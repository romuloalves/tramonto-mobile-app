"use strict";function _objectSpread2(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==='function'){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable;}));}ownKeys.forEach(function(key){_defineProperty2(target,key,source[key]);});}return target;}function _defineProperty2(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function _awaitAsyncGenerator(value){return new _AwaitValue(value);}function _wrapAsyncGenerator(fn){return function(){return new _AsyncGenerator(fn.apply(this,arguments));};}function _AsyncGenerator(gen){var front,back;function send(key,arg){return new Promise(function(resolve,reject){var request={key:key,arg:arg,resolve:resolve,reject:reject,next:null};if(back){back=back.next=request;}else{front=back=request;resume(key,arg);}});}function resume(key,arg){try{var result=gen[key](arg);var value=result.value;var wrappedAwait=value instanceof _AwaitValue;Promise.resolve(wrappedAwait?value.wrapped:value).then(function(arg){if(wrappedAwait){resume("next",arg);return;}settle(result.done?"return":"normal",arg);},function(err){resume("throw",err);});}catch(err){settle("throw",err);}}function settle(type,value){switch(type){case"return":front.resolve({value:value,done:true});break;case"throw":front.reject(value);break;default:front.resolve({value:value,done:false});break;}front=front.next;if(front){resume(front.key,front.arg);}else{back=null;}}this._invoke=send;if(typeof gen.return!=="function"){this.return=undefined;}}if(typeof Symbol==="function"&&Symbol.asyncIterator){_AsyncGenerator.prototype[Symbol.asyncIterator]=function(){return this;};}_AsyncGenerator.prototype.next=function(arg){return this._invoke("next",arg);};_AsyncGenerator.prototype.throw=function(arg){return this._invoke("throw",arg);};_AsyncGenerator.prototype.return=function(arg){return this._invoke("return",arg);};function _AwaitValue(value){this.wrapped=value;}module.exports=function(modules,runtime){"use strict";var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports;}var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports;}function startup(){return __webpack_require__(5268);};runtime(__webpack_require__);return startup();}({23:function(__unusedmodule,exports,__webpack_require__){exports.AbstractLevelDOWN=__webpack_require__(6043);exports.AbstractIterator=__webpack_require__(4679);exports.AbstractChainedBatch=__webpack_require__(9849);},36:function(module){"use strict";var isStream=module.exports=function(stream){return stream!==null&&typeof stream==='object'&&typeof stream.pipe==='function';};isStream.writable=function(stream){return isStream(stream)&&stream.writable!==false&&typeof stream._write==='function'&&typeof stream._writableState==='object';};isStream.readable=function(stream){return isStream(stream)&&stream.readable!==false&&typeof stream._read==='function'&&typeof stream._readableState==='object';};isStream.duplex=function(stream){return isStream.writable(stream)&&isStream.readable(stream);};isStream.transform=function(stream){return isStream.duplex(stream)&&typeof stream._transform==='function'&&typeof stream._transformState==='object';};},61:function(module,__unusedexports,__webpack_require__){"use strict";var Buffer=__webpack_require__(7572).Buffer;var Transform=__webpack_require__(6886).Transform;var inherits=__webpack_require__(92);module.exports=function(KeccakState){function Keccak(rate,capacity,delimitedSuffix,hashBitLength,options){Transform.call(this,options);this._rate=rate;this._capacity=capacity;this._delimitedSuffix=delimitedSuffix;this._hashBitLength=hashBitLength;this._options=options;this._state=new KeccakState();this._state.initialize(rate,capacity);this._finalized=false;}inherits(Keccak,Transform);Keccak.prototype._transform=function(chunk,encoding,callback){var error=null;try{this.update(chunk,encoding);}catch(err){error=err;}callback(error);};Keccak.prototype._flush=function(callback){var error=null;try{this.push(this.digest());}catch(err){error=err;}callback(error);};Keccak.prototype.update=function(data,encoding){if(!Buffer.isBuffer(data)&&typeof data!=='string')throw new TypeError('Data must be a string or a buffer');if(this._finalized)throw new Error('Digest already called');if(!Buffer.isBuffer(data))data=Buffer.from(data,encoding);this._state.absorb(data);return this;};Keccak.prototype.digest=function(encoding){if(this._finalized)throw new Error('Digest already called');this._finalized=true;if(this._delimitedSuffix)this._state.absorbLastFewBits(this._delimitedSuffix);var digest=this._state.squeeze(this._hashBitLength/8);if(encoding!==undefined)digest=digest.toString(encoding);this._resetState();return digest;};Keccak.prototype._resetState=function(){this._state.initialize(this._rate,this._capacity);return this;};Keccak.prototype._clone=function(){var clone=new Keccak(this._rate,this._capacity,this._delimitedSuffix,this._hashBitLength,this._options);this._state.copy(clone._state);clone._finalized=this._finalized;return clone;};return Keccak;};},62:function(module,__unusedexports,__webpack_require__){"use strict";const pull=__webpack_require__(2885);const levelup=__webpack_require__(9777);const asyncFilter=__webpack_require__(759).utils.asyncFilter;const asyncSort=__webpack_require__(759).utils.asyncSort;const Key=__webpack_require__(759).Key;const Errors=__webpack_require__(759).Errors;const encode=__webpack_require__(5026);class LevelDatastore{constructor(path,opts){let database;if(opts&&opts.db){database=opts.db;delete opts.db;}else{database=__webpack_require__(3342);}this.db=levelup(encode(database(path),{valueEncoding:'binary'}),Object.assign({},opts,{compression:false}),err=>{if(err){throw err;}});}open(callback){this.db.open(err=>{if(err){return callback(Errors.dbOpenFailedError(err));}callback();});}put(key,value,callback){this.db.put(key.toString(),value,err=>{if(err){return callback(Errors.dbWriteFailedError(err));}callback();});}get(key,callback){this.db.get(key.toString(),(err,data)=>{if(err){return callback(Errors.notFoundError(err));}callback(null,data);});}has(key,callback){this.db.get(key.toString(),(err,res)=>{if(err){if(err.notFound){callback(null,false);return;}callback(err);return;}callback(null,true);});}delete(key,callback){this.db.del(key.toString(),err=>{if(err){return callback(Errors.dbDeleteFailedError(err));}callback();});}close(callback){this.db.close(callback);}batch(){const ops=[];return{put:(key,value)=>{ops.push({type:'put',key:key.toString(),value:value});},delete:(key)=>{ops.push({type:'del',key:key.toString()});},commit:(callback)=>{this.db.batch(ops,callback);}};}query(q){let values=true;if(q.keysOnly!=null){values=!q.keysOnly;}const iter=this.db.db.iterator({keys:true,values:values,keyAsBuffer:true});const rawStream=(end,cb)=>{if(end){return iter.end(err=>{cb(err||end);});}iter.next((err,key,value)=>{if(err){return cb(err);}if(err==null&&key==null&&value==null){return iter.end(err=>{cb(err||true);});}const res={key:new Key(key,false)};if(values){res.value=Buffer.from(value);}cb(null,res);});};let tasks=[rawStream];let filters=[];if(q.prefix!=null){const prefix=q.prefix;filters.push((e,cb)=>cb(null,e.key.toString().startsWith(prefix)));}if(q.filters!=null){filters=filters.concat(q.filters);}tasks=tasks.concat(filters.map(f=>asyncFilter(f)));if(q.orders!=null){tasks=tasks.concat(q.orders.map(o=>asyncSort(o)));}if(q.offset!=null){let i=0;tasks.push(pull.filter(()=>i++>=q.offset));}if(q.limit!=null){tasks.push(pull.take(q.limit));}return pull.apply(null,tasks);}}module.exports=LevelDatastore;},64:function(__unusedmodule,exports,__webpack_require__){"use strict";var curves=exports;var hash=__webpack_require__(2543);var elliptic=__webpack_require__(3459);var assert=elliptic.utils.assert;function PresetCurve(options){if(options.type==='short')this.curve=new elliptic.curve.short(options);else if(options.type==='edwards')this.curve=new elliptic.curve.edwards(options);else this.curve=new elliptic.curve.mont(options);this.g=this.curve.g;this.n=this.curve.n;this.hash=options.hash;assert(this.g.validate(),'Invalid curve');assert(this.g.mul(this.n).isInfinity(),'Invalid curve, G*N != O');}curves.PresetCurve=PresetCurve;function defineCurve(name,options){Object.defineProperty(curves,name,{configurable:true,enumerable:true,get:function(){var curve=new PresetCurve(options);Object.defineProperty(curves,name,{configurable:true,enumerable:true,value:curve});return curve;}});}defineCurve('p192',{type:'short',prime:'p192',p:'ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff',a:'ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc',b:'64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1',n:'ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831',hash:hash.sha256,gRed:false,g:['188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012','07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811']});defineCurve('p224',{type:'short',prime:'p224',p:'ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001',a:'ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe',b:'b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4',n:'ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d',hash:hash.sha256,gRed:false,g:['b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21','bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34']});defineCurve('p256',{type:'short',prime:null,p:'ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff',a:'ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc',b:'5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b',n:'ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551',hash:hash.sha256,gRed:false,g:['6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296','4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5']});defineCurve('p384',{type:'short',prime:null,p:'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff '+'fffffffe ffffffff 00000000 00000000 ffffffff',a:'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff '+'fffffffe ffffffff 00000000 00000000 fffffffc',b:'b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f '+'5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef',n:'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 '+'f4372ddf 581a0db2 48b0a77a ecec196a ccc52973',hash:hash.sha384,gRed:false,g:['aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 '+'5502f25d bf55296c 3a545e38 72760ab7','3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 '+'0a60b1ce 1d7e819d 7a431d7c 90ea0e5f']});defineCurve('p521',{type:'short',prime:null,p:'000001ff ffffffff ffffffff ffffffff ffffffff ffffffff '+'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff '+'ffffffff ffffffff ffffffff ffffffff ffffffff',a:'000001ff ffffffff ffffffff ffffffff ffffffff ffffffff '+'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff '+'ffffffff ffffffff ffffffff ffffffff fffffffc',b:'00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b '+'99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd '+'3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00',n:'000001ff ffffffff ffffffff ffffffff ffffffff ffffffff '+'ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 '+'f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409',hash:hash.sha512,gRed:false,g:['000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 '+'053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 '+'a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66','00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 '+'579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 '+'3fad0761 353c7086 a272c240 88be9476 9fd16650']});defineCurve('curve25519',{type:'mont',prime:'p25519',p:'7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed',a:'76d06',b:'1',n:'1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed',hash:hash.sha256,gRed:false,g:['9']});defineCurve('ed25519',{type:'edwards',prime:'p25519',p:'7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed',a:'-1',c:'1',d:'52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3',n:'1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed',hash:hash.sha256,gRed:false,g:['216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a','6666666666666666666666666666666666666666666666666666666666666658']});var pre;try{pre=__webpack_require__(7679);}catch(e){pre=undefined;}defineCurve('secp256k1',{type:'short',prime:'k256',p:'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f',a:'0',b:'7',n:'ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141',h:'1',hash:hash.sha256,beta:'7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee',lambda:'5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72',basis:[{a:'3086d221a7d46bcde86c90e49284eb15',b:'-e4437ed6010e88286f547fa90abfe4c3'},{a:'114ca50f7a8e2f3f657c1108d9d44cfd8',b:'3086d221a7d46bcde86c90e49284eb15'}],gRed:false,g:['79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798','483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8',pre]});},68:function(module,__unusedexports,__webpack_require__){"use strict";var hash=__webpack_require__(3102);var elliptic=__webpack_require__(5194);var utils=elliptic.utils;var assert=utils.assert;function HmacDRBG(options){if(!(this instanceof HmacDRBG))return new HmacDRBG(options);this.hash=options.hash;this.predResist=!!options.predResist;this.outLen=this.hash.outSize;this.minEntropy=options.minEntropy||this.hash.hmacStrength;this.reseed=null;this.reseedInterval=null;this.K=null;this.V=null;var entropy=utils.toArray(options.entropy,options.entropyEnc);var nonce=utils.toArray(options.nonce,options.nonceEnc);var pers=utils.toArray(options.pers,options.persEnc);assert(entropy.length>=this.minEntropy/8,'Not enough entropy. Minimum is: '+this.minEntropy+' bits');this._init(entropy,nonce,pers);}module.exports=HmacDRBG;HmacDRBG.prototype._init=function init(entropy,nonce,pers){var seed=entropy.concat(nonce).concat(pers);this.K=new Array(this.outLen/8);this.V=new Array(this.outLen/8);for(var i=0;i<this.V.length;i++){this.K[i]=0x00;this.V[i]=0x01;}this._update(seed);this.reseed=1;this.reseedInterval=0x1000000000000;};HmacDRBG.prototype._hmac=function hmac(){return new hash.hmac(this.hash,this.K);};HmacDRBG.prototype._update=function update(seed){var kmac=this._hmac().update(this.V).update([0x00]);if(seed)kmac=kmac.update(seed);this.K=kmac.digest();this.V=this._hmac().update(this.V).digest();if(!seed)return;this.K=this._hmac().update(this.V).update([0x01]).update(seed).digest();this.V=this._hmac().update(this.V).digest();};HmacDRBG.prototype.reseed=function reseed(entropy,entropyEnc,add,addEnc){if(typeof entropyEnc!=='string'){addEnc=add;add=entropyEnc;entropyEnc=null;}entropy=utils.toBuffer(entropy,entropyEnc);add=utils.toBuffer(add,addEnc);assert(entropy.length>=this.minEntropy/8,'Not enough entropy. Minimum is: '+this.minEntropy+' bits');this._update(entropy.concat(add||[]));this.reseed=1;};HmacDRBG.prototype.generate=function generate(len,enc,add,addEnc){if(this.reseed>this.reseedInterval)throw new Error('Reseed is required');if(typeof enc!=='string'){addEnc=add;add=enc;enc=null;}if(add){add=utils.toArray(add,addEnc);this._update(add);}var temp=[];while(temp.length<len){this.V=this._hmac().update(this.V).digest();temp=temp.concat(this.V);}var res=temp.slice(0,len);this._update(add);this.reseed++;return utils.encode(res,enc);};},76:function(module,__unusedexports,__webpack_require__){"use strict";const sha3=__webpack_require__(6755);const murmur3=__webpack_require__(1007);const utils=__webpack_require__(2447);const sha=__webpack_require__(1142);const toCallback=utils.toCallback;const toBuf=utils.toBuf;const fromString=utils.fromString;const fromNumberTo32BitBuf=utils.fromNumberTo32BitBuf;const dblSha2256=(buf,cb)=>{sha.sha2256(buf,(err,firstHash)=>{if(err){cb(err);}sha.sha2256(Buffer.from(firstHash),cb);});};module.exports={sha1:sha.sha1,sha2256:sha.sha2256,sha2512:sha.sha2512,sha3512:toCallback(toBuf(sha3.sha3_512)),sha3384:toCallback(toBuf(sha3.sha3_384)),sha3256:toCallback(toBuf(sha3.sha3_256)),sha3224:toCallback(toBuf(sha3.sha3_224)),shake128:toCallback(toBuf(sha3.shake_128,128)),shake256:toCallback(toBuf(sha3.shake_256,256)),keccak224:toCallback(toBuf(sha3.keccak_224)),keccak256:toCallback(toBuf(sha3.keccak_256)),keccak384:toCallback(toBuf(sha3.keccak_384)),keccak512:toCallback(toBuf(sha3.keccak_512)),murmur3128:toCallback(toBuf(fromString(murmur3.x64.hash128))),murmur332:toCallback(fromNumberTo32BitBuf(fromString(murmur3.x86.hash32))),addBlake:__webpack_require__(1281),dblSha2256:dblSha2256};},81:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _identity=__webpack_require__(4314);var _identity2=_interopRequireDefault(_identity);var _createTester=__webpack_require__(476);var _createTester2=_interopRequireDefault(_createTester);var _doParallelLimit=__webpack_require__(95);var _doParallelLimit2=_interopRequireDefault(_doParallelLimit);var _findGetResult=__webpack_require__(4787);var _findGetResult2=_interopRequireDefault(_findGetResult);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}exports.default=(0,_doParallelLimit2.default)((0,_createTester2.default)(_identity2.default,_findGetResult2.default));module.exports=exports['default'];},84:function(module,__unusedexports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}var Buffer=__webpack_require__(7572).Buffer;var util=__webpack_require__(649);function copyBuffer(src,target,offset){src.copy(target,offset);}module.exports=function(){function BufferList(){_classCallCheck(this,BufferList);this.head=null;this.tail=null;this.length=0;}BufferList.prototype.push=function push(v){var entry={data:v,next:null};if(this.length>0)this.tail.next=entry;else this.head=entry;this.tail=entry;++this.length;};BufferList.prototype.unshift=function unshift(v){var entry={data:v,next:this.head};if(this.length===0)this.tail=entry;this.head=entry;++this.length;};BufferList.prototype.shift=function shift(){if(this.length===0)return;var ret=this.head.data;if(this.length===1)this.head=this.tail=null;else this.head=this.head.next;--this.length;return ret;};BufferList.prototype.clear=function clear(){this.head=this.tail=null;this.length=0;};BufferList.prototype.join=function join(s){if(this.length===0)return'';var p=this.head;var ret=''+p.data;while(p=p.next){ret+=s+p.data;}return ret;};BufferList.prototype.concat=function concat(n){if(this.length===0)return Buffer.alloc(0);if(this.length===1)return this.head.data;var ret=Buffer.allocUnsafe(n>>>0);var p=this.head;var i=0;while(p){copyBuffer(p.data,ret,i);i+=p.data.length;p=p.next;}return ret;};return BufferList;}();if(util&&util.inspect&&util.inspect.custom){module.exports.prototype[util.inspect.custom]=function(){var obj=util.inspect({length:this.length});return this.constructor.name+' '+obj;};}},88:function(module){"use strict";if(!process.version||process.version.indexOf('v0.')===0||process.version.indexOf('v1.')===0&&process.version.indexOf('v1.8.')!==0){module.exports={nextTick:nextTick};}else{module.exports=process;}function nextTick(fn,arg1,arg2,arg3){if(typeof fn!=='function'){throw new TypeError('"callback" argument must be a function');}var len=arguments.length;var args,i;switch(len){case 0:case 1:return process.nextTick(fn);case 2:return process.nextTick(function afterTickOne(){fn.call(null,arg1);});case 3:return process.nextTick(function afterTickTwo(){fn.call(null,arg1,arg2);});case 4:return process.nextTick(function afterTickThree(){fn.call(null,arg1,arg2,arg3);});default:args=new Array(len-1);i=0;while(i<args.length){args[i++]=arguments[i];}return process.nextTick(function afterTick(){fn.apply(null,args);});}}},92:function(module,__unusedexports,__webpack_require__){try{var util=__webpack_require__(649);if(typeof util.inherits!=='function')throw'';module.exports=util.inherits;}catch(e){module.exports=__webpack_require__(1694);}},95:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=doParallelLimit;var _eachOfLimit=__webpack_require__(3177);var _eachOfLimit2=_interopRequireDefault(_eachOfLimit);var _wrapAsync=__webpack_require__(9396);var _wrapAsync2=_interopRequireDefault(_wrapAsync);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function doParallelLimit(fn){return function(obj,limit,iteratee,callback){return fn((0,_eachOfLimit2.default)(limit),obj,(0,_wrapAsync2.default)(iteratee),callback);};}module.exports=exports['default'];},99:function(module,__unusedexports,__webpack_require__){var Node=__webpack_require__(344);module.exports=isCircular;function isCircular(obj){if(!(obj instanceof Object)){throw new TypeError('"obj" must be an object (or inherit from it)');}return _isCircular(obj);}function _isCircular(obj,parentList){parentList=new Node(obj,parentList);for(var key in obj){var val=obj[key];if(val instanceof Object){if(parentList.contains(val)||_isCircular(val,parentList)){return true;}}}return false;}},104:function(module,__unusedexports,__webpack_require__){const bip66=__webpack_require__(560);const Buffer=__webpack_require__(7572).Buffer;const typeforce=__webpack_require__(2809);const types=__webpack_require__(8781);const ZERO=Buffer.alloc(1,0);function toDER(x){let i=0;while(x[i]===0)++i;if(i===x.length)return ZERO;x=x.slice(i);if(x[0]&0x80)return Buffer.concat([ZERO,x],1+x.length);return x;}function fromDER(x){if(x[0]===0x00)x=x.slice(1);const buffer=Buffer.alloc(32,0);const bstart=Math.max(0,32-x.length);x.copy(buffer,bstart);return buffer;}function decode(buffer){const hashType=buffer.readUInt8(buffer.length-1);const hashTypeMod=hashType&~0x80;if(hashTypeMod<=0||hashTypeMod>=4)throw new Error('Invalid hashType '+hashType);const decode=bip66.decode(buffer.slice(0,-1));const r=fromDER(decode.r);const s=fromDER(decode.s);return{signature:Buffer.concat([r,s],64),hashType:hashType};}function encode(signature,hashType){typeforce({signature:types.BufferN(64),hashType:types.UInt8},{signature,hashType});const hashTypeMod=hashType&~0x80;if(hashTypeMod<=0||hashTypeMod>=4)throw new Error('Invalid hashType '+hashType);const hashTypeBuffer=Buffer.allocUnsafe(1);hashTypeBuffer.writeUInt8(hashType,0);const r=toDER(signature.slice(0,32));const s=toDER(signature.slice(32,64));return Buffer.concat([bip66.encode(r,s),hashTypeBuffer]);}module.exports={decode:decode,encode:encode};},108:function(module,__unusedexports,__webpack_require__){var Transport=__webpack_require__(4910);var parser=__webpack_require__(5410);var parseqs=__webpack_require__(2887);var inherit=__webpack_require__(1199);var yeast=__webpack_require__(2968);var debug=__webpack_require__(3114)('engine.io-client:websocket');var BrowserWebSocket,NodeWebSocket;if(typeof WebSocket!=='undefined'){BrowserWebSocket=WebSocket;}else if(typeof self!=='undefined'){BrowserWebSocket=self.WebSocket||self.MozWebSocket;}else{try{NodeWebSocket=__webpack_require__(7154);}catch(e){}}var WebSocketImpl=BrowserWebSocket||NodeWebSocket;module.exports=WS;function WS(opts){var forceBase64=opts&&opts.forceBase64;if(forceBase64){this.supportsBinary=false;}this.perMessageDeflate=opts.perMessageDeflate;this.usingBrowserWebSocket=BrowserWebSocket&&!opts.forceNode;this.protocols=opts.protocols;if(!this.usingBrowserWebSocket){WebSocketImpl=NodeWebSocket;}Transport.call(this,opts);}inherit(WS,Transport);WS.prototype.name='websocket';WS.prototype.supportsBinary=true;WS.prototype.doOpen=function(){if(!this.check()){return;}var uri=this.uri();var protocols=this.protocols;var opts={agent:this.agent,perMessageDeflate:this.perMessageDeflate};opts.pfx=this.pfx;opts.key=this.key;opts.passphrase=this.passphrase;opts.cert=this.cert;opts.ca=this.ca;opts.ciphers=this.ciphers;opts.rejectUnauthorized=this.rejectUnauthorized;if(this.extraHeaders){opts.headers=this.extraHeaders;}if(this.localAddress){opts.localAddress=this.localAddress;}try{this.ws=this.usingBrowserWebSocket&&!this.isReactNative?protocols?new WebSocketImpl(uri,protocols):new WebSocketImpl(uri):new WebSocketImpl(uri,protocols,opts);}catch(err){return this.emit('error',err);}if(this.ws.binaryType===undefined){this.supportsBinary=false;}if(this.ws.supports&&this.ws.supports.binary){this.supportsBinary=true;this.ws.binaryType='nodebuffer';}else{this.ws.binaryType='arraybuffer';}this.addEventListeners();};WS.prototype.addEventListeners=function(){var self=this;this.ws.onopen=function(){self.onOpen();};this.ws.onclose=function(){self.onClose();};this.ws.onmessage=function(ev){self.onData(ev.data);};this.ws.onerror=function(e){self.onError('websocket error',e);};};WS.prototype.write=function(packets){var self=this;this.writable=false;var total=packets.length;for(var i=0,l=total;i<l;i++){(function(packet){parser.encodePacket(packet,self.supportsBinary,function(data){if(!self.usingBrowserWebSocket){var opts={};if(packet.options){opts.compress=packet.options.compress;}if(self.perMessageDeflate){var len='string'===typeof data?Buffer.byteLength(data):data.length;if(len<self.perMessageDeflate.threshold){opts.compress=false;}}}try{if(self.usingBrowserWebSocket){self.ws.send(data);}else{self.ws.send(data,opts);}}catch(e){debug('websocket closed before onclose event');}--total||done();});})(packets[i]);}function done(){self.emit('flush');setTimeout(function(){self.writable=true;self.emit('drain');},0);}};WS.prototype.onClose=function(){Transport.prototype.onClose.call(this);};WS.prototype.doClose=function(){if(typeof this.ws!=='undefined'){this.ws.close();}};WS.prototype.uri=function(){var query=this.query||{};var schema=this.secure?'wss':'ws';var port='';if(this.port&&('wss'===schema&&Number(this.port)!==443||'ws'===schema&&Number(this.port)!==80)){port=':'+this.port;}if(this.timestampRequests){query[this.timestampParam]=yeast();}if(!this.supportsBinary){query.b64=1;}query=parseqs.encode(query);if(query.length){query='?'+query;}var ipv6=this.hostname.indexOf(':')!==-1;return schema+'://'+(ipv6?'['+this.hostname+']':this.hostname)+port+this.path+query;};WS.prototype.check=function(){return!!WebSocketImpl&&!('__initialize'in WebSocketImpl&&this.name===WS.prototype.name);};},109:function(module,__unusedexports,__webpack_require__){let Buffer=__webpack_require__(7572).Buffer;let bs58check=__webpack_require__(6614);let crypto=__webpack_require__(7471);let ecc=__webpack_require__(6290);let typeforce=__webpack_require__(2809);let wif=__webpack_require__(5411);let UINT256_TYPE=typeforce.BufferN(32);let NETWORK_TYPE=typeforce.compile({wif:typeforce.UInt8,bip32:{public:typeforce.UInt32,private:typeforce.UInt32}});let BITCOIN={wif:0x80,bip32:{public:0x0488b21e,private:0x0488ade4}};function BIP32(d,Q,chainCode,network){typeforce(NETWORK_TYPE,network);this.__d=d||null;this.__Q=Q||null;this.chainCode=chainCode;this.depth=0;this.index=0;this.network=network;this.parentFingerprint=0x00000000;}Object.defineProperty(BIP32.prototype,'identifier',{get:function(){return crypto.hash160(this.publicKey);}});Object.defineProperty(BIP32.prototype,'fingerprint',{get:function(){return this.identifier.slice(0,4);}});Object.defineProperty(BIP32.prototype,'privateKey',{enumerable:false,get:function(){return this.__d;}});Object.defineProperty(BIP32.prototype,'publicKey',{get:function(){if(!this.__Q)this.__Q=ecc.pointFromScalar(this.__d,this.compressed);return this.__Q;}});BIP32.prototype.isNeutered=function(){return this.__d===null;};BIP32.prototype.neutered=function(){let neutered=fromPublicKey(this.publicKey,this.chainCode,this.network);neutered.depth=this.depth;neutered.index=this.index;neutered.parentFingerprint=this.parentFingerprint;return neutered;};BIP32.prototype.toBase58=function(){let network=this.network;let version=!this.isNeutered()?network.bip32.private:network.bip32.public;let buffer=Buffer.allocUnsafe(78);buffer.writeUInt32BE(version,0);buffer.writeUInt8(this.depth,4);buffer.writeUInt32BE(this.parentFingerprint,5);buffer.writeUInt32BE(this.index,9);this.chainCode.copy(buffer,13);if(!this.isNeutered()){buffer.writeUInt8(0,45);this.privateKey.copy(buffer,46);}else{this.publicKey.copy(buffer,45);}return bs58check.encode(buffer);};BIP32.prototype.toWIF=function(){if(!this.privateKey)throw new TypeError('Missing private key');return wif.encode(this.network.wif,this.privateKey,true);};let HIGHEST_BIT=0x80000000;BIP32.prototype.derive=function(index){typeforce(typeforce.UInt32,index);let isHardened=index>=HIGHEST_BIT;let data=Buffer.allocUnsafe(37);if(isHardened){if(this.isNeutered())throw new TypeError('Missing private key for hardened child key');data[0]=0x00;this.privateKey.copy(data,1);data.writeUInt32BE(index,33);}else{this.publicKey.copy(data,0);data.writeUInt32BE(index,33);}let I=crypto.hmacSHA512(this.chainCode,data);let IL=I.slice(0,32);let IR=I.slice(32);if(!ecc.isPrivate(IL))return this.derive(index+1);let hd;if(!this.isNeutered()){let ki=ecc.privateAdd(this.privateKey,IL);if(ki==null)return this.derive(index+1);hd=fromPrivateKey(ki,IR,this.network);}else{let Ki=ecc.pointAddScalar(this.publicKey,IL,true);if(Ki===null)return this.derive(index+1);hd=fromPublicKey(Ki,IR,this.network);}hd.depth=this.depth+1;hd.index=index;hd.parentFingerprint=this.fingerprint.readUInt32BE(0);return hd;};let UINT31_MAX=Math.pow(2,31)-1;function UInt31(value){return typeforce.UInt32(value)&&value<=UINT31_MAX;}BIP32.prototype.deriveHardened=function(index){typeforce(UInt31,index);return this.derive(index+HIGHEST_BIT);};function BIP32Path(value){return typeforce.String(value)&&value.match(/^(m\/)?(\d+'?\/)*\d+'?$/);}BIP32.prototype.derivePath=function(path){typeforce(BIP32Path,path);let splitPath=path.split('/');if(splitPath[0]==='m'){if(this.parentFingerprint)throw new TypeError('Expected master, got child');splitPath=splitPath.slice(1);}return splitPath.reduce(function(prevHd,indexStr){let index;if(indexStr.slice(-1)==="'"){index=parseInt(indexStr.slice(0,-1),10);return prevHd.deriveHardened(index);}else{index=parseInt(indexStr,10);return prevHd.derive(index);}},this);};BIP32.prototype.sign=function(hash){return ecc.sign(hash,this.privateKey);};BIP32.prototype.verify=function(hash,signature){return ecc.verify(hash,this.publicKey,signature);};function fromBase58(string,network){let buffer=bs58check.decode(string);if(buffer.length!==78)throw new TypeError('Invalid buffer length');network=network||BITCOIN;let version=buffer.readUInt32BE(0);if(version!==network.bip32.private&&version!==network.bip32.public)throw new TypeError('Invalid network version');let depth=buffer[4];let parentFingerprint=buffer.readUInt32BE(5);if(depth===0){if(parentFingerprint!==0x00000000)throw new TypeError('Invalid parent fingerprint');}let index=buffer.readUInt32BE(9);if(depth===0&&index!==0)throw new TypeError('Invalid index');let chainCode=buffer.slice(13,45);let hd;if(version===network.bip32.private){if(buffer.readUInt8(45)!==0x00)throw new TypeError('Invalid private key');let k=buffer.slice(46,78);hd=fromPrivateKey(k,chainCode,network);}else{let X=buffer.slice(45,78);hd=fromPublicKey(X,chainCode,network);}hd.depth=depth;hd.index=index;hd.parentFingerprint=parentFingerprint;return hd;}function fromPrivateKey(privateKey,chainCode,network){typeforce({privateKey:UINT256_TYPE,chainCode:UINT256_TYPE},{privateKey,chainCode});network=network||BITCOIN;if(!ecc.isPrivate(privateKey))throw new TypeError('Private key not in range [1, n)');return new BIP32(privateKey,null,chainCode,network);}function fromPublicKey(publicKey,chainCode,network){typeforce({publicKey:typeforce.BufferN(33),chainCode:UINT256_TYPE},{publicKey,chainCode});network=network||BITCOIN;if(!ecc.isPoint(publicKey))throw new TypeError('Point is not on the curve');return new BIP32(null,publicKey,chainCode,network);}function fromSeed(seed,network){typeforce(typeforce.Buffer,seed);if(seed.length<16)throw new TypeError('Seed should be at least 128 bits');if(seed.length>64)throw new TypeError('Seed should be at most 512 bits');network=network||BITCOIN;let I=crypto.hmacSHA512('Bitcoin seed',seed);let IL=I.slice(0,32);let IR=I.slice(32);return fromPrivateKey(IL,IR,network);}module.exports={fromBase58,fromPrivateKey,fromPublicKey,fromSeed};},110:function(module,__unusedexports,__webpack_require__){"use strict";function setup(env){createDebug.debug=createDebug;createDebug.default=createDebug;createDebug.coerce=coerce;createDebug.disable=disable;createDebug.enable=enable;createDebug.enabled=enabled;createDebug.humanize=__webpack_require__(9934);Object.keys(env).forEach(function(key){createDebug[key]=env[key];});createDebug.instances=[];createDebug.names=[];createDebug.skips=[];createDebug.formatters={};function selectColor(namespace){var hash=0;for(var i=0;i<namespace.length;i++){hash=(hash<<5)-hash+namespace.charCodeAt(i);hash|=0;}return createDebug.colors[Math.abs(hash)%createDebug.colors.length];}createDebug.selectColor=selectColor;function createDebug(namespace){var prevTime;function debug(){if(!debug.enabled){return;}for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}var self=debug;var curr=Number(new Date());var ms=curr-(prevTime||curr);self.diff=ms;self.prev=prevTime;self.curr=curr;prevTime=curr;args[0]=createDebug.coerce(args[0]);if(typeof args[0]!=='string'){args.unshift('%O');}var index=0;args[0]=args[0].replace(/%([a-zA-Z%])/g,function(match,format){if(match==='%%'){return match;}index++;var formatter=createDebug.formatters[format];if(typeof formatter==='function'){var val=args[index];match=formatter.call(self,val);args.splice(index,1);index--;}return match;});createDebug.formatArgs.call(self,args);var logFn=self.log||createDebug.log;logFn.apply(self,args);}debug.namespace=namespace;debug.enabled=createDebug.enabled(namespace);debug.useColors=createDebug.useColors();debug.color=selectColor(namespace);debug.destroy=destroy;debug.extend=extend;if(typeof createDebug.init==='function'){createDebug.init(debug);}createDebug.instances.push(debug);return debug;}function destroy(){var index=createDebug.instances.indexOf(this);if(index!==-1){createDebug.instances.splice(index,1);return true;}return false;}function extend(namespace,delimiter){return createDebug(this.namespace+(typeof delimiter==='undefined'?':':delimiter)+namespace);}function enable(namespaces){createDebug.save(namespaces);createDebug.names=[];createDebug.skips=[];var i;var split=(typeof namespaces==='string'?namespaces:'').split(/[\s,]+/);var len=split.length;for(i=0;i<len;i++){if(!split[i]){continue;}namespaces=split[i].replace(/\*/g,'.*?');if(namespaces[0]==='-'){createDebug.skips.push(new RegExp('^'+namespaces.substr(1)+'$'));}else{createDebug.names.push(new RegExp('^'+namespaces+'$'));}}for(i=0;i<createDebug.instances.length;i++){var instance=createDebug.instances[i];instance.enabled=createDebug.enabled(instance.namespace);}}function disable(){createDebug.enable('');}function enabled(name){if(name[name.length-1]==='*'){return true;}var i;var len;for(i=0,len=createDebug.skips.length;i<len;i++){if(createDebug.skips[i].test(name)){return false;}}for(i=0,len=createDebug.names.length;i<len;i++){if(createDebug.names[i].test(name)){return true;}}return false;}function coerce(val){if(val instanceof Error){return val.stack||val.message;}return val;}createDebug.enable(createDebug.load());return createDebug;}module.exports=setup;},122:function(module,__unusedexports,__webpack_require__){var events=__webpack_require__(4859),util=__webpack_require__(649),EventEmitter=events.EventEmitter;function Sender(socket){if(this instanceof Sender===false){throw new TypeError("Classes can't be function-called");}events.EventEmitter.call(this);this.socket=socket;this.continuationFrame=false;this.isClosed=false;}module.exports=Sender;util.inherits(Sender,events.EventEmitter);Sender.prototype.send=function(data,options,cb){if(this.isClosed)return;var isString=typeof data=='string',length=isString?Buffer.byteLength(data):data.length,lengthbytes=length>127?2:1,writeStartMarker=this.continuationFrame==false,writeEndMarker=!options||!(typeof options.fin!='undefined'&&!options.fin),buffer=new Buffer((writeStartMarker?options&&options.binary?1+lengthbytes:1:0)+length+(writeEndMarker&&!(options&&options.binary)?1:0)),offset=writeStartMarker?1:0;if(writeStartMarker){if(options&&options.binary){buffer.write('\x80','binary');if(lengthbytes>1)buffer.write(String.fromCharCode(128+length/128),offset++,'binary');buffer.write(String.fromCharCode(length&0x7f),offset++,'binary');}else buffer.write('\x00','binary');}if(isString)buffer.write(data,offset,'utf8');else data.copy(buffer,offset,0);if(writeEndMarker){if(options&&options.binary){}else buffer.write('\xff',offset+length,'binary');this.continuationFrame=false;}else this.continuationFrame=true;try{this.socket.write(buffer,'binary',cb);}catch(e){this.error(e.toString());}};Sender.prototype.close=function(code,data,mask,cb){if(this.isClosed)return;this.isClosed=true;try{if(this.continuationFrame)this.socket.write(new Buffer([0xff],'binary'));this.socket.write(new Buffer([0xff,0x00]),'binary',cb);}catch(e){this.error(e.toString());}};Sender.prototype.ping=function(data,options){};Sender.prototype.pong=function(data,options){};Sender.prototype.error=function(reason){this.emit('error',reason);return this;};},124:function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=_withoutIndex;function _withoutIndex(iteratee){return function(value,index,callback){return iteratee(value,callback);};}module.exports=exports["default"];},145:function(module){"use strict";module.exports=class Dir{constructor(props,_options){this._options=_options||{};Object.assign(this,props);}};},153:function(module,__unusedexports,__webpack_require__){"use strict";const assert=__webpack_require__(3930);const CID=__webpack_require__(9339);class WantListEntry{constructor(cid,priority){assert(CID.isCID(cid),'must be valid CID');this._refCounter=1;this.cid=cid;this.priority=priority||1;}inc(){this._refCounter+=1;}dec(){this._refCounter=Math.max(0,this._refCounter-1);}hasRefs(){return this._refCounter>0;}get[Symbol.toStringTag](){const cidStr=this.cid.toBaseEncodedString();return`WantlistEntry <key: ${cidStr}, priority: ${this.priority}, refs: ${this._refCounter}>`;}equals(other){return this._refCounter===other._refCounter&&this.cid.equals(other.cid)&&this.priority===other.priority;}}module.exports=WantListEntry;},159:function(module,__unusedexports,__webpack_require__){"use strict";var assert=__webpack_require__(3930);var buffer=__webpack_require__(9423);var _=__webpack_require__(6064);var $=__webpack_require__(5107);var BN=__webpack_require__(6122);var Base58=__webpack_require__(8014);var Base58Check=__webpack_require__(7341);var Hash=__webpack_require__(2442);var Network=__webpack_require__(8368);var HDKeyCache=__webpack_require__(5315);var Point=__webpack_require__(9933);var PrivateKey=__webpack_require__(8322);var Random=__webpack_require__(3215);var errors=__webpack_require__(6379);var hdErrors=errors.HDPrivateKey;var BufferUtil=__webpack_require__(9657);var JSUtil=__webpack_require__(8416);var MINIMUM_ENTROPY_BITS=128;var BITS_TO_BYTES=1/8;var MAXIMUM_ENTROPY_BITS=512;function HDPrivateKey(arg){if(arg instanceof HDPrivateKey){return arg;}if(!(this instanceof HDPrivateKey)){return new HDPrivateKey(arg);}if(!arg){return this._generateRandomly();}if(Network.get(arg)){return this._generateRandomly(arg);}else if(_.isString(arg)||BufferUtil.isBuffer(arg)){if(HDPrivateKey.isValidSerialized(arg)){this._buildFromSerialized(arg);}else if(JSUtil.isValidJSON(arg)){this._buildFromJSON(arg);}else if(BufferUtil.isBuffer(arg)&&HDPrivateKey.isValidSerialized(arg.toString())){this._buildFromSerialized(arg.toString());}else{throw HDPrivateKey.getSerializedError(arg);}}else if(_.isObject(arg)){this._buildFromObject(arg);}else{throw new hdErrors.UnrecognizedArgument(arg);}}HDPrivateKey.isValidPath=function(arg,hardened){if(_.isString(arg)){var indexes=HDPrivateKey._getDerivationIndexes(arg);return indexes!==null&&_.all(indexes,HDPrivateKey.isValidPath);}if(_.isNumber(arg)){if(arg<HDPrivateKey.Hardened&&hardened===true){arg+=HDPrivateKey.Hardened;}return arg>=0&&arg<HDPrivateKey.MaxIndex;}return false;};HDPrivateKey._getDerivationIndexes=function(path){var steps=path.split('/');if(_.contains(HDPrivateKey.RootElementAlias,path)){return[];}if(!_.contains(HDPrivateKey.RootElementAlias,steps[0])){return null;}var indexes=steps.slice(1).map(function(step){var isHardened=step.slice(-1)==='\'';if(isHardened){step=step.slice(0,-1);}if(!step||step[0]==='-'){return NaN;}var index=+step;if(isHardened){index+=HDPrivateKey.Hardened;}return index;});return _.any(indexes,isNaN)?null:indexes;};HDPrivateKey.prototype.derive=function(arg,hardened){if(_.isNumber(arg)){return this._deriveWithNumber(arg,hardened);}else if(_.isString(arg)){return this._deriveFromString(arg);}else{throw new hdErrors.InvalidDerivationArgument(arg);}};HDPrivateKey.prototype._deriveWithNumber=function(index,hardened){if(!HDPrivateKey.isValidPath(index,hardened)){throw new hdErrors.InvalidPath(index);}hardened=index>=HDPrivateKey.Hardened?true:hardened;if(index<HDPrivateKey.Hardened&&hardened===true){index+=HDPrivateKey.Hardened;}var cached=HDKeyCache.get(this.xprivkey,index,hardened);if(cached){return cached;}var indexBuffer=BufferUtil.integerAsBuffer(index);var data;if(hardened){data=BufferUtil.concat([new buffer.Buffer([0]),this.privateKey.toBuffer(),indexBuffer]);}else{data=BufferUtil.concat([this.publicKey.toBuffer(),indexBuffer]);}var hash=Hash.sha512hmac(data,this._buffers.chainCode);var leftPart=BN.fromBuffer(hash.slice(0,32),{size:32});var chainCode=hash.slice(32,64);var privateKey=leftPart.add(this.privateKey.toBigNumber()).mod(Point.getN()).toBuffer({size:32});var derived=new HDPrivateKey({network:this.network,depth:this.depth+1,parentFingerPrint:this.fingerPrint,childIndex:index,chainCode:chainCode,privateKey:privateKey});HDKeyCache.set(this.xprivkey,index,hardened,derived);return derived;};HDPrivateKey.prototype._deriveFromString=function(path){if(!HDPrivateKey.isValidPath(path)){throw new hdErrors.InvalidPath(path);}var indexes=HDPrivateKey._getDerivationIndexes(path);var derived=indexes.reduce(function(prev,index){return prev._deriveWithNumber(index);},this);return derived;};HDPrivateKey.isValidSerialized=function(data,network){return!HDPrivateKey.getSerializedError(data,network);};HDPrivateKey.getSerializedError=function(data,network){if(!(_.isString(data)||BufferUtil.isBuffer(data))){return new hdErrors.UnrecognizedArgument('Expected string or buffer');}if(!Base58.validCharacters(data)){return new errors.InvalidB58Char('(unknown)',data);}try{data=Base58Check.decode(data);}catch(e){return new errors.InvalidB58Checksum(data);}if(data.length!==HDPrivateKey.DataLength){return new hdErrors.InvalidLength(data);}if(!_.isUndefined(network)){var error=HDPrivateKey._validateNetwork(data,network);if(error){return error;}}return null;};HDPrivateKey._validateNetwork=function(data,networkArg){var network=Network.get(networkArg);if(!network){return new errors.InvalidNetworkArgument(networkArg);}var version=data.slice(0,4);if(BufferUtil.integerFromBuffer(version)!==network.xprivkey){return new errors.InvalidNetwork(version);}return null;};HDPrivateKey.fromString=function(arg){$.checkArgument(_.isString(arg),'No valid string was provided');return new HDPrivateKey(arg);};HDPrivateKey.fromObject=function(arg){$.checkArgument(_.isObject(arg),'No valid argument was provided');return new HDPrivateKey(arg);};HDPrivateKey.prototype._buildFromJSON=function(arg){return this._buildFromObject(JSON.parse(arg));};HDPrivateKey.prototype._buildFromObject=function(arg){var buffers={version:arg.network?BufferUtil.integerAsBuffer(Network.get(arg.network).xprivkey):arg.version,depth:_.isNumber(arg.depth)?BufferUtil.integerAsSingleByteBuffer(arg.depth):arg.depth,parentFingerPrint:_.isNumber(arg.parentFingerPrint)?BufferUtil.integerAsBuffer(arg.parentFingerPrint):arg.parentFingerPrint,childIndex:_.isNumber(arg.childIndex)?BufferUtil.integerAsBuffer(arg.childIndex):arg.childIndex,chainCode:_.isString(arg.chainCode)?BufferUtil.hexToBuffer(arg.chainCode):arg.chainCode,privateKey:_.isString(arg.privateKey)&&JSUtil.isHexa(arg.privateKey)?BufferUtil.hexToBuffer(arg.privateKey):arg.privateKey,checksum:arg.checksum?arg.checksum.length?arg.checksum:BufferUtil.integerAsBuffer(arg.checksum):undefined};return this._buildFromBuffers(buffers);};HDPrivateKey.prototype._buildFromSerialized=function(arg){var decoded=Base58Check.decode(arg);var buffers={version:decoded.slice(HDPrivateKey.VersionStart,HDPrivateKey.VersionEnd),depth:decoded.slice(HDPrivateKey.DepthStart,HDPrivateKey.DepthEnd),parentFingerPrint:decoded.slice(HDPrivateKey.ParentFingerPrintStart,HDPrivateKey.ParentFingerPrintEnd),childIndex:decoded.slice(HDPrivateKey.ChildIndexStart,HDPrivateKey.ChildIndexEnd),chainCode:decoded.slice(HDPrivateKey.ChainCodeStart,HDPrivateKey.ChainCodeEnd),privateKey:decoded.slice(HDPrivateKey.PrivateKeyStart,HDPrivateKey.PrivateKeyEnd),checksum:decoded.slice(HDPrivateKey.ChecksumStart,HDPrivateKey.ChecksumEnd),xprivkey:arg};return this._buildFromBuffers(buffers);};HDPrivateKey.prototype._generateRandomly=function(network){return HDPrivateKey.fromSeed(Random.getRandomBuffer(64),network);};HDPrivateKey.fromSeed=function(hexa,network){if(JSUtil.isHexaString(hexa)){hexa=BufferUtil.hexToBuffer(hexa);}if(!Buffer.isBuffer(hexa)){throw new hdErrors.InvalidEntropyArgument(hexa);}if(hexa.length<MINIMUM_ENTROPY_BITS*BITS_TO_BYTES){throw new hdErrors.InvalidEntropyArgument.NotEnoughEntropy(hexa);}if(hexa.length>MAXIMUM_ENTROPY_BITS*BITS_TO_BYTES){throw new hdErrors.InvalidEntropyArgument.TooMuchEntropy(hexa);}var hash=Hash.sha512hmac(hexa,new buffer.Buffer('Bitcoin seed'));return new HDPrivateKey({network:Network.get(network)||Network.defaultNetwork,depth:0,parentFingerPrint:0,childIndex:0,privateKey:hash.slice(0,32),chainCode:hash.slice(32,64)});};HDPrivateKey.prototype._calcHDPublicKey=function(){if(!this._hdPublicKey){var HDPublicKey=__webpack_require__(843);this._hdPublicKey=new HDPublicKey(this);}};HDPrivateKey.prototype._buildFromBuffers=function(arg){HDPrivateKey._validateBufferArguments(arg);JSUtil.defineImmutable(this,{_buffers:arg});var sequence=[arg.version,arg.depth,arg.parentFingerPrint,arg.childIndex,arg.chainCode,BufferUtil.emptyBuffer(1),arg.privateKey];var concat=buffer.Buffer.concat(sequence);if(!arg.checksum||!arg.checksum.length){arg.checksum=Base58Check.checksum(concat);}else{if(arg.checksum.toString()!==Base58Check.checksum(concat).toString()){throw new errors.InvalidB58Checksum(concat);}}var network=Network.get(BufferUtil.integerFromBuffer(arg.version));var xprivkey;xprivkey=Base58Check.encode(buffer.Buffer.concat(sequence));arg.xprivkey=new Buffer(xprivkey);var privateKey=new PrivateKey(BN.fromBuffer(arg.privateKey),network);var publicKey=privateKey.toPublicKey();var size=HDPrivateKey.ParentFingerPrintSize;var fingerPrint=Hash.sha256ripemd160(publicKey.toBuffer()).slice(0,size);JSUtil.defineImmutable(this,{xprivkey:xprivkey,network:network,depth:BufferUtil.integerFromSingleByteBuffer(arg.depth),privateKey:privateKey,publicKey:publicKey,fingerPrint:fingerPrint});this._hdPublicKey=null;Object.defineProperty(this,'hdPublicKey',{configurable:false,enumerable:true,get:function(){this._calcHDPublicKey();return this._hdPublicKey;}});Object.defineProperty(this,'xpubkey',{configurable:false,enumerable:true,get:function(){this._calcHDPublicKey();return this._hdPublicKey.xpubkey;}});return this;};HDPrivateKey._validateBufferArguments=function(arg){var checkBuffer=function(name,size){var buff=arg[name];assert(BufferUtil.isBuffer(buff),name+' argument is not a buffer');assert(buff.length===size,name+' has not the expected size: found '+buff.length+', expected '+size);};checkBuffer('version',HDPrivateKey.VersionSize);checkBuffer('depth',HDPrivateKey.DepthSize);checkBuffer('parentFingerPrint',HDPrivateKey.ParentFingerPrintSize);checkBuffer('childIndex',HDPrivateKey.ChildIndexSize);checkBuffer('chainCode',HDPrivateKey.ChainCodeSize);checkBuffer('privateKey',HDPrivateKey.PrivateKeySize);if(arg.checksum&&arg.checksum.length){checkBuffer('checksum',HDPrivateKey.CheckSumSize);}};HDPrivateKey.prototype.toString=function(){return this.xprivkey;};HDPrivateKey.prototype.inspect=function(){return'<HDPrivateKey: '+this.xprivkey+'>';};HDPrivateKey.prototype.toObject=HDPrivateKey.prototype.toJSON=function toObject(){return{network:Network.get(BufferUtil.integerFromBuffer(this._buffers.version),'xprivkey').name,depth:BufferUtil.integerFromSingleByteBuffer(this._buffers.depth),fingerPrint:BufferUtil.integerFromBuffer(this.fingerPrint),parentFingerPrint:BufferUtil.integerFromBuffer(this._buffers.parentFingerPrint),childIndex:BufferUtil.integerFromBuffer(this._buffers.childIndex),chainCode:BufferUtil.bufferToHex(this._buffers.chainCode),privateKey:this.privateKey.toBuffer().toString('hex'),checksum:BufferUtil.integerFromBuffer(this._buffers.checksum),xprivkey:this.xprivkey};};HDPrivateKey.fromBuffer=function(arg){return new HDPrivateKey(arg.toString());};HDPrivateKey.prototype.toBuffer=function(){return BufferUtil.copy(this._buffers.xprivkey);};HDPrivateKey.DefaultDepth=0;HDPrivateKey.DefaultFingerprint=0;HDPrivateKey.DefaultChildIndex=0;HDPrivateKey.Hardened=0x80000000;HDPrivateKey.MaxIndex=2*HDPrivateKey.Hardened;HDPrivateKey.RootElementAlias=['m','M','m\'','M\''];HDPrivateKey.VersionSize=4;HDPrivateKey.DepthSize=1;HDPrivateKey.ParentFingerPrintSize=4;HDPrivateKey.ChildIndexSize=4;HDPrivateKey.ChainCodeSize=32;HDPrivateKey.PrivateKeySize=32;HDPrivateKey.CheckSumSize=4;HDPrivateKey.DataLength=78;HDPrivateKey.SerializedByteSize=82;HDPrivateKey.VersionStart=0;HDPrivateKey.VersionEnd=HDPrivateKey.VersionStart+HDPrivateKey.VersionSize;HDPrivateKey.DepthStart=HDPrivateKey.VersionEnd;HDPrivateKey.DepthEnd=HDPrivateKey.DepthStart+HDPrivateKey.DepthSize;HDPrivateKey.ParentFingerPrintStart=HDPrivateKey.DepthEnd;HDPrivateKey.ParentFingerPrintEnd=HDPrivateKey.ParentFingerPrintStart+HDPrivateKey.ParentFingerPrintSize;HDPrivateKey.ChildIndexStart=HDPrivateKey.ParentFingerPrintEnd;HDPrivateKey.ChildIndexEnd=HDPrivateKey.ChildIndexStart+HDPrivateKey.ChildIndexSize;HDPrivateKey.ChainCodeStart=HDPrivateKey.ChildIndexEnd;HDPrivateKey.ChainCodeEnd=HDPrivateKey.ChainCodeStart+HDPrivateKey.ChainCodeSize;HDPrivateKey.PrivateKeyStart=HDPrivateKey.ChainCodeEnd+1;HDPrivateKey.PrivateKeyEnd=HDPrivateKey.PrivateKeyStart+HDPrivateKey.PrivateKeySize;HDPrivateKey.ChecksumStart=HDPrivateKey.PrivateKeyEnd;HDPrivateKey.ChecksumEnd=HDPrivateKey.ChecksumStart+HDPrivateKey.CheckSumSize;assert(HDPrivateKey.ChecksumEnd===HDPrivateKey.SerializedByteSize);module.exports=HDPrivateKey;},171:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=timeout;var _initialParams=__webpack_require__(8084);var _initialParams2=_interopRequireDefault(_initialParams);var _wrapAsync=__webpack_require__(9396);var _wrapAsync2=_interopRequireDefault(_wrapAsync);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function timeout(asyncFn,milliseconds,info){var fn=(0,_wrapAsync2.default)(asyncFn);return(0,_initialParams2.default)(function(args,callback){var timedOut=false;var timer;function timeoutCallback(){var name=asyncFn.name||'anonymous';var error=new Error('Callback function "'+name+'" timed out.');error.code='ETIMEDOUT';if(info){error.info=info;}timedOut=true;callback(error);}args.push(function(){if(!timedOut){callback.apply(null,arguments);clearTimeout(timer);}});timer=setTimeout(timeoutCallback,milliseconds);fn.apply(null,args);});}module.exports=exports['default'];},177:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=_parallel;var _noop=__webpack_require__(5811);var _noop2=_interopRequireDefault(_noop);var _isArrayLike=__webpack_require__(4356);var _isArrayLike2=_interopRequireDefault(_isArrayLike);var _slice=__webpack_require__(3404);var _slice2=_interopRequireDefault(_slice);var _wrapAsync=__webpack_require__(9396);var _wrapAsync2=_interopRequireDefault(_wrapAsync);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _parallel(eachfn,tasks,callback){callback=callback||_noop2.default;var results=(0,_isArrayLike2.default)(tasks)?[]:{};eachfn(tasks,function(task,key,callback){(0,_wrapAsync2.default)(task)(function(err,result){if(arguments.length>2){result=(0,_slice2.default)(arguments,1);}results[key]=result;callback(err);});},function(err){callback(err,results);});}module.exports=exports['default'];},192:function(__unusedmodule,exports,__webpack_require__){"use strict";var modules=[__webpack_require__(2437),__webpack_require__(5100),__webpack_require__(1111),__webpack_require__(2614),__webpack_require__(3204),__webpack_require__(3080),__webpack_require__(8095),__webpack_require__(2880)];for(var i=0;i<modules.length;i++){var module=modules[i];for(var enc in module)if(Object.prototype.hasOwnProperty.call(module,enc))exports[enc]=module[enc];}},201:function(module,__unusedexports,__webpack_require__){"use strict";var pna=__webpack_require__(88);module.exports=Writable;function WriteReq(chunk,encoding,cb){this.chunk=chunk;this.encoding=encoding;this.callback=cb;this.next=null;}function CorkedRequest(state){var _this=this;this.next=null;this.entry=null;this.finish=function(){onCorkedFinish(_this,state);};}var asyncWrite=!process.browser&&['v0.10','v0.9.'].indexOf(process.version.slice(0,5))>-1?setImmediate:pna.nextTick;var Duplex;Writable.WritableState=WritableState;var util=__webpack_require__(5548);util.inherits=__webpack_require__(92);var internalUtil={deprecate:__webpack_require__(8008)};var Stream=__webpack_require__(2422);var Buffer=__webpack_require__(7572).Buffer;var OurUint8Array=global.Uint8Array||function(){};function _uint8ArrayToBuffer(chunk){return Buffer.from(chunk);}function _isUint8Array(obj){return Buffer.isBuffer(obj)||obj instanceof OurUint8Array;}var destroyImpl=__webpack_require__(5709);util.inherits(Writable,Stream);function nop(){}function WritableState(options,stream){Duplex=Duplex||__webpack_require__(5427);options=options||{};var isDuplex=stream instanceof Duplex;this.objectMode=!!options.objectMode;if(isDuplex)this.objectMode=this.objectMode||!!options.writableObjectMode;var hwm=options.highWaterMark;var writableHwm=options.writableHighWaterMark;var defaultHwm=this.objectMode?16:16*1024;if(hwm||hwm===0)this.highWaterMark=hwm;else if(isDuplex&&(writableHwm||writableHwm===0))this.highWaterMark=writableHwm;else this.highWaterMark=defaultHwm;this.highWaterMark=Math.floor(this.highWaterMark);this.finalCalled=false;this.needDrain=false;this.ending=false;this.ended=false;this.finished=false;this.destroyed=false;var noDecode=options.decodeStrings===false;this.decodeStrings=!noDecode;this.defaultEncoding=options.defaultEncoding||'utf8';this.length=0;this.writing=false;this.corked=0;this.sync=true;this.bufferProcessing=false;this.onwrite=function(er){onwrite(stream,er);};this.writecb=null;this.writelen=0;this.bufferedRequest=null;this.lastBufferedRequest=null;this.pendingcb=0;this.prefinished=false;this.errorEmitted=false;this.bufferedRequestCount=0;this.corkedRequestsFree=new CorkedRequest(this);}WritableState.prototype.getBuffer=function getBuffer(){var current=this.bufferedRequest;var out=[];while(current){out.push(current);current=current.next;}return out;};(function(){try{Object.defineProperty(WritableState.prototype,'buffer',{get:internalUtil.deprecate(function(){return this.getBuffer();},'_writableState.buffer is deprecated. Use _writableState.getBuffer '+'instead.','DEP0003')});}catch(_){}})();var realHasInstance;if(typeof Symbol==='function'&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]==='function'){realHasInstance=Function.prototype[Symbol.hasInstance];Object.defineProperty(Writable,Symbol.hasInstance,{value:function(object){if(realHasInstance.call(this,object))return true;if(this!==Writable)return false;return object&&object._writableState instanceof WritableState;}});}else{realHasInstance=function(object){return object instanceof this;};}function Writable(options){Duplex=Duplex||__webpack_require__(5427);if(!realHasInstance.call(Writable,this)&&!(this instanceof Duplex)){return new Writable(options);}this._writableState=new WritableState(options,this);this.writable=true;if(options){if(typeof options.write==='function')this._write=options.write;if(typeof options.writev==='function')this._writev=options.writev;if(typeof options.destroy==='function')this._destroy=options.destroy;if(typeof options.final==='function')this._final=options.final;}Stream.call(this);}Writable.prototype.pipe=function(){this.emit('error',new Error('Cannot pipe, not readable'));};function writeAfterEnd(stream,cb){var er=new Error('write after end');stream.emit('error',er);pna.nextTick(cb,er);}function validChunk(stream,state,chunk,cb){var valid=true;var er=false;if(chunk===null){er=new TypeError('May not write null values to stream');}else if(typeof chunk!=='string'&&chunk!==undefined&&!state.objectMode){er=new TypeError('Invalid non-string/buffer chunk');}if(er){stream.emit('error',er);pna.nextTick(cb,er);valid=false;}return valid;}Writable.prototype.write=function(chunk,encoding,cb){var state=this._writableState;var ret=false;var isBuf=!state.objectMode&&_isUint8Array(chunk);if(isBuf&&!Buffer.isBuffer(chunk)){chunk=_uint8ArrayToBuffer(chunk);}if(typeof encoding==='function'){cb=encoding;encoding=null;}if(isBuf)encoding='buffer';else if(!encoding)encoding=state.defaultEncoding;if(typeof cb!=='function')cb=nop;if(state.ended)writeAfterEnd(this,cb);else if(isBuf||validChunk(this,state,chunk,cb)){state.pendingcb++;ret=writeOrBuffer(this,state,isBuf,chunk,encoding,cb);}return ret;};Writable.prototype.cork=function(){var state=this._writableState;state.corked++;};Writable.prototype.uncork=function(){var state=this._writableState;if(state.corked){state.corked--;if(!state.writing&&!state.corked&&!state.finished&&!state.bufferProcessing&&state.bufferedRequest)clearBuffer(this,state);}};Writable.prototype.setDefaultEncoding=function setDefaultEncoding(encoding){if(typeof encoding==='string')encoding=encoding.toLowerCase();if(!(['hex','utf8','utf-8','ascii','binary','base64','ucs2','ucs-2','utf16le','utf-16le','raw'].indexOf((encoding+'').toLowerCase())>-1))throw new TypeError('Unknown encoding: '+encoding);this._writableState.defaultEncoding=encoding;return this;};function decodeChunk(state,chunk,encoding){if(!state.objectMode&&state.decodeStrings!==false&&typeof chunk==='string'){chunk=Buffer.from(chunk,encoding);}return chunk;}Object.defineProperty(Writable.prototype,'writableHighWaterMark',{enumerable:false,get:function(){return this._writableState.highWaterMark;}});function writeOrBuffer(stream,state,isBuf,chunk,encoding,cb){if(!isBuf){var newChunk=decodeChunk(state,chunk,encoding);if(chunk!==newChunk){isBuf=true;encoding='buffer';chunk=newChunk;}}var len=state.objectMode?1:chunk.length;state.length+=len;var ret=state.length<state.highWaterMark;if(!ret)state.needDrain=true;if(state.writing||state.corked){var last=state.lastBufferedRequest;state.lastBufferedRequest={chunk:chunk,encoding:encoding,isBuf:isBuf,callback:cb,next:null};if(last){last.next=state.lastBufferedRequest;}else{state.bufferedRequest=state.lastBufferedRequest;}state.bufferedRequestCount+=1;}else{doWrite(stream,state,false,len,chunk,encoding,cb);}return ret;}function doWrite(stream,state,writev,len,chunk,encoding,cb){state.writelen=len;state.writecb=cb;state.writing=true;state.sync=true;if(writev)stream._writev(chunk,state.onwrite);else stream._write(chunk,encoding,state.onwrite);state.sync=false;}function onwriteError(stream,state,sync,er,cb){--state.pendingcb;if(sync){pna.nextTick(cb,er);pna.nextTick(finishMaybe,stream,state);stream._writableState.errorEmitted=true;stream.emit('error',er);}else{cb(er);stream._writableState.errorEmitted=true;stream.emit('error',er);finishMaybe(stream,state);}}function onwriteStateUpdate(state){state.writing=false;state.writecb=null;state.length-=state.writelen;state.writelen=0;}function onwrite(stream,er){var state=stream._writableState;var sync=state.sync;var cb=state.writecb;onwriteStateUpdate(state);if(er)onwriteError(stream,state,sync,er,cb);else{var finished=needFinish(state);if(!finished&&!state.corked&&!state.bufferProcessing&&state.bufferedRequest){clearBuffer(stream,state);}if(sync){asyncWrite(afterWrite,stream,state,finished,cb);}else{afterWrite(stream,state,finished,cb);}}}function afterWrite(stream,state,finished,cb){if(!finished)onwriteDrain(stream,state);state.pendingcb--;cb();finishMaybe(stream,state);}function onwriteDrain(stream,state){if(state.length===0&&state.needDrain){state.needDrain=false;stream.emit('drain');}}function clearBuffer(stream,state){state.bufferProcessing=true;var entry=state.bufferedRequest;if(stream._writev&&entry&&entry.next){var l=state.bufferedRequestCount;var buffer=new Array(l);var holder=state.corkedRequestsFree;holder.entry=entry;var count=0;var allBuffers=true;while(entry){buffer[count]=entry;if(!entry.isBuf)allBuffers=false;entry=entry.next;count+=1;}buffer.allBuffers=allBuffers;doWrite(stream,state,true,state.length,buffer,'',holder.finish);state.pendingcb++;state.lastBufferedRequest=null;if(holder.next){state.corkedRequestsFree=holder.next;holder.next=null;}else{state.corkedRequestsFree=new CorkedRequest(state);}state.bufferedRequestCount=0;}else{while(entry){var chunk=entry.chunk;var encoding=entry.encoding;var cb=entry.callback;var len=state.objectMode?1:chunk.length;doWrite(stream,state,false,len,chunk,encoding,cb);entry=entry.next;state.bufferedRequestCount--;if(state.writing){break;}}if(entry===null)state.lastBufferedRequest=null;}state.bufferedRequest=entry;state.bufferProcessing=false;}Writable.prototype._write=function(chunk,encoding,cb){cb(new Error('_write() is not implemented'));};Writable.prototype._writev=null;Writable.prototype.end=function(chunk,encoding,cb){var state=this._writableState;if(typeof chunk==='function'){cb=chunk;chunk=null;encoding=null;}else if(typeof encoding==='function'){cb=encoding;encoding=null;}if(chunk!==null&&chunk!==undefined)this.write(chunk,encoding);if(state.corked){state.corked=1;this.uncork();}if(!state.ending&&!state.finished)endWritable(this,state,cb);};function needFinish(state){return state.ending&&state.length===0&&state.bufferedRequest===null&&!state.finished&&!state.writing;}function callFinal(stream,state){stream._final(function(err){state.pendingcb--;if(err){stream.emit('error',err);}state.prefinished=true;stream.emit('prefinish');finishMaybe(stream,state);});}function prefinish(stream,state){if(!state.prefinished&&!state.finalCalled){if(typeof stream._final==='function'){state.pendingcb++;state.finalCalled=true;pna.nextTick(callFinal,stream,state);}else{state.prefinished=true;stream.emit('prefinish');}}}function finishMaybe(stream,state){var need=needFinish(state);if(need){prefinish(stream,state);if(state.pendingcb===0){state.finished=true;stream.emit('finish');}}return need;}function endWritable(stream,state,cb){state.ending=true;finishMaybe(stream,state);if(cb){if(state.finished)pna.nextTick(cb);else stream.once('finish',cb);}state.ended=true;stream.writable=false;}function onCorkedFinish(corkReq,state,err){var entry=corkReq.entry;corkReq.entry=null;while(entry){var cb=entry.callback;state.pendingcb--;cb(err);entry=entry.next;}if(state.corkedRequestsFree){state.corkedRequestsFree.next=corkReq;}else{state.corkedRequestsFree=corkReq;}}Object.defineProperty(Writable.prototype,'destroyed',{get:function(){if(this._writableState===undefined){return false;}return this._writableState.destroyed;},set:function(value){if(!this._writableState){return;}this._writableState.destroyed=value;}});Writable.prototype.destroy=destroyImpl.destroy;Writable.prototype._undestroy=destroyImpl.undestroy;Writable.prototype._destroy=function(err,cb){this.end();cb(err);};},204:function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj;};}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return _typeof(obj);}exports.log=log;exports.formatArgs=formatArgs;exports.save=save;exports.load=load;exports.useColors=useColors;exports.storage=localstorage();exports.colors=['#0000CC','#0000FF','#0033CC','#0033FF','#0066CC','#0066FF','#0099CC','#0099FF','#00CC00','#00CC33','#00CC66','#00CC99','#00CCCC','#00CCFF','#3300CC','#3300FF','#3333CC','#3333FF','#3366CC','#3366FF','#3399CC','#3399FF','#33CC00','#33CC33','#33CC66','#33CC99','#33CCCC','#33CCFF','#6600CC','#6600FF','#6633CC','#6633FF','#66CC00','#66CC33','#9900CC','#9900FF','#9933CC','#9933FF','#99CC00','#99CC33','#CC0000','#CC0033','#CC0066','#CC0099','#CC00CC','#CC00FF','#CC3300','#CC3333','#CC3366','#CC3399','#CC33CC','#CC33FF','#CC6600','#CC6633','#CC9900','#CC9933','#CCCC00','#CCCC33','#FF0000','#FF0033','#FF0066','#FF0099','#FF00CC','#FF00FF','#FF3300','#FF3333','#FF3366','#FF3399','#FF33CC','#FF33FF','#FF6600','#FF6633','#FF9900','#FF9933','#FFCC00','#FFCC33'];function useColors(){if(typeof window!=='undefined'&&window.process&&(window.process.type==='renderer'||window.process.__nwjs)){return true;}if(typeof navigator!=='undefined'&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)){return false;}return typeof document!=='undefined'&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!=='undefined'&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!=='undefined'&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!=='undefined'&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/);}function formatArgs(args){args[0]=(this.useColors?'%c':'')+this.namespace+(this.useColors?' %c':' ')+args[0]+(this.useColors?'%c ':' ')+'+'+module.exports.humanize(this.diff);if(!this.useColors){return;}var c='color: '+this.color;args.splice(1,0,c,'color: inherit');var index=0;var lastC=0;args[0].replace(/%[a-zA-Z%]/g,function(match){if(match==='%%'){return;}index++;if(match==='%c'){lastC=index;}});args.splice(lastC,0,c);}function log(){var _console;return(typeof console==="undefined"?"undefined":_typeof(console))==='object'&&console.log&&(_console=console).log.apply(_console,arguments);}function save(namespaces){try{if(namespaces){exports.storage.setItem('debug',namespaces);}else{exports.storage.removeItem('debug');}}catch(error){}}function load(){var r;try{r=exports.storage.getItem('debug');}catch(error){}if(!r&&typeof process!=='undefined'&&'env'in process){r=process.env.DEBUG;}return r;}function localstorage(){try{return localStorage;}catch(error){}}module.exports=__webpack_require__(2330)(exports);var formatters=module.exports.formatters;formatters.j=function(v){try{return JSON.stringify(v);}catch(error){return'[UnexpectedJSONParseError]: '+error.message;}};},221:function(module){module.exports=function(stream){var read,started=false;function consume(_read){if(!_read)throw new Error('must be passed a readable');read=_read;if(started)stream(read);}consume.resolve=consume.ready=consume.start=function(_stream){started=true;stream=_stream||stream;if(read)stream(read);return consume;};return consume;};},229:function(module,__unusedexports,__webpack_require__){"use strict";const waterfall=__webpack_require__(4265);const reject=__webpack_require__(3901);const each=__webpack_require__(4486);const series=__webpack_require__(7644);const map=__webpack_require__(7011);const nextTick=__webpack_require__(7173);const WantManager=__webpack_require__(1351);const Network=__webpack_require__(5794);const DecisionEngine=__webpack_require__(1102);const Notifications=__webpack_require__(4249);const logger=__webpack_require__(8047).logger;const Stats=__webpack_require__(5229);const defaultOptions={statsEnabled:false,statsComputeThrottleTimeout:1000,statsComputeThrottleMaxQueueSize:1000};const statsKeys=['blocksReceived','dataReceived','dupBlksReceived','dupDataReceived','blocksSent','dataSent','providesBufferLength','wantListLength','peerCount'];class Bitswap{constructor(libp2p,blockstore,options){this._libp2p=libp2p;this._log=logger(this.peerInfo.id);this._options=Object.assign({},defaultOptions,options);this._stats=new Stats(statsKeys,{enabled:this._options.statsEnabled,computeThrottleTimeout:this._options.statsComputeThrottleTimeout,computeThrottleMaxQueueSize:this._options.statsComputeThrottleMaxQueueSize});this.network=new Network(libp2p,this,{},this._stats);this.blockstore=blockstore;this.engine=new DecisionEngine(this.peerInfo.id,blockstore,this.network,this._stats);this.wm=new WantManager(this.peerInfo.id,this.network,this._stats);this.notifications=new Notifications(this.peerInfo.id);}get peerInfo(){return this._libp2p.peerInfo;}_receiveMessage(peerId,incoming,callback){this.engine.messageReceived(peerId,incoming,err=>{if(err){this._log('failed to receive message',incoming);}if(incoming.blocks.size===0){return callback();}const blocks=Array.from(incoming.blocks.values());const toCancel=blocks.filter(b=>this.wm.wantlist.contains(b.cid)).map(b=>b.cid);this.wm.cancelWants(toCancel);each(blocks,(b,cb)=>this._handleReceivedBlock(peerId,b,cb),callback);});}_handleReceivedBlock(peerId,block,callback){this._log('received block');waterfall([cb=>this.blockstore.has(block.cid,cb),(has,cb)=>{this._updateReceiveCounters(peerId.toB58String(),block,has);if(has){return nextTick(cb);}this._putBlock(block,cb);}],callback);}_updateReceiveCounters(peerId,block,exists){this._stats.push(peerId,'blocksReceived',1);this._stats.push(peerId,'dataReceived',block.data.length);if(exists){this._stats.push(peerId,'dupBlksReceived',1);this._stats.push(peerId,'dupDataReceived',block.data.length);}}_receiveError(err){this._log.error('ReceiveError: %s',err.message);}_onPeerConnected(peerId){this.wm.connected(peerId);}_onPeerDisconnected(peerId){this.wm.disconnected(peerId);this.engine.peerDisconnected(peerId);this._stats.disconnected(peerId);}_putBlock(block,callback){this.blockstore.put(block,err=>{if(err){return callback(err);}this.notifications.hasBlock(block);this.network.provide(block.cid,err=>{if(err){this._log.error('Failed to provide: %s',err.message);}});this.engine.receivedBlocks([block.cid]);callback();});}enableStats(){this._stats.enable();}disableStats(){this._stats.disable();}wantlistForPeer(peerId){return this.engine.wantlistForPeer(peerId);}ledgerForPeer(peerId){return this.engine.ledgerForPeer(peerId);}get(cid,callback){this.getMany([cid],(err,blocks)=>{if(err){return callback(err);}if(blocks&&blocks.length>0){callback(null,blocks[0]);}else{callback();}});}getMany(cids,callback){let pendingStart=cids.length;const wantList=[];let promptedNetwork=false;const getFromOutside=(cid,cb)=>{wantList.push(cid);this.notifications.wantBlock(cid,block=>{this.wm.cancelWants([cid]);cb(null,block);},()=>{this.wm.cancelWants([cid]);cb(null,undefined);});if(!pendingStart){this.wm.wantBlocks(wantList);}};map(cids,(cid,cb)=>{waterfall([cb=>this.blockstore.has(cid,cb),(has,cb)=>{pendingStart--;if(has){if(!pendingStart){this.wm.wantBlocks(wantList);}return this.blockstore.get(cid,cb);}if(!promptedNetwork){promptedNetwork=true;this.network.findAndConnect(cids[0],err=>{if(err){this._log.error(err);}});}getFromOutside(cid,cb);}],cb);},callback);}unwant(cids){if(!Array.isArray(cids)){cids=[cids];}this.wm.unwantBlocks(cids);cids.forEach(cid=>this.notifications.unwantBlock(cid));}cancelWants(cids){if(!Array.isArray(cids)){cids=[cids];}this.wm.cancelWants(cids);}put(block,callback){this._log('putting block');waterfall([cb=>this.blockstore.has(block.cid,cb),(has,cb)=>{if(has){return nextTick(cb);}this._putBlock(block,cb);}],callback);}putMany(blocks,callback){waterfall([cb=>reject(blocks,(b,cb)=>{this.blockstore.has(b.cid,cb);},cb),(newBlocks,cb)=>this.blockstore.putMany(newBlocks,err=>{if(err){return cb(err);}newBlocks.forEach(block=>{this.notifications.hasBlock(block);this.engine.receivedBlocks([block.cid]);this.network.provide(block.cid,err=>{if(err){this._log.error('Failed to provide: %s',err.message);}});});cb();})],callback);}getWantlist(){return this.wm.wantlist.entries();}peers(){return this.engine.peers();}stat(){return this._stats;}start(callback){series([cb=>this.wm.start(cb),cb=>this.network.start(cb),cb=>this.engine.start(cb)],callback);}stop(callback){this._stats.stop();series([cb=>this.wm.stop(cb),cb=>this.network.stop(cb),cb=>this.engine.stop(cb)],callback);}}module.exports=Bitswap;},230:function(module,__unusedexports,__webpack_require__){var baseGetTag=__webpack_require__(2339),isArray=__webpack_require__(1015),isObjectLike=__webpack_require__(2321);var stringTag='[object String]';function isString(value){return typeof value=='string'||!isArray(value)&&isObjectLike(value)&&baseGetTag(value)==stringTag;}module.exports=isString;},237:function(module){var LIMIT=process.maxTickDepth/2||1000,factory=function(){var count=0;return function(callback){if(count>=LIMIT){global.setImmediate(callback);count=0;}else process.nextTick(callback);count++;};};module.exports=global.setImmediate?factory:function(){return process.nextTick;};},249:function(module,__unusedexports,__webpack_require__){var isPrototype=__webpack_require__(8249),nativeKeys=__webpack_require__(4715);var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function baseKeys(object){if(!isPrototype(object)){return nativeKeys(object);}var result=[];for(var key in Object(object)){if(hasOwnProperty.call(object,key)&&key!='constructor'){result.push(key);}}return result;}module.exports=baseKeys;},257:function(module,__unusedexports,__webpack_require__){"use strict";var _=__webpack_require__(6064);var BlockHeader=__webpack_require__(4951);var BN=__webpack_require__(6122);var BufferUtil=__webpack_require__(9657);var BufferReader=__webpack_require__(412);var BufferWriter=__webpack_require__(2418);var Hash=__webpack_require__(2442);var Transaction=__webpack_require__(2548);var $=__webpack_require__(5107);function Block(arg){if(!(this instanceof Block)){return new Block(arg);}_.extend(this,Block._from(arg));return this;}Block.MAX_BLOCK_SIZE=1000000;Block._from=function _from(arg){var info={};if(BufferUtil.isBuffer(arg)){info=Block._fromBufferReader(BufferReader(arg));}else if(_.isObject(arg)){info=Block._fromObject(arg);}else{throw new TypeError('Unrecognized argument for Block');}return info;};Block._fromObject=function _fromObject(data){var transactions=[];data.transactions.forEach(function(tx){if(tx instanceof Transaction){transactions.push(tx);}else{transactions.push(Transaction().fromObject(tx));}});var info={header:BlockHeader.fromObject(data.header),transactions:transactions};return info;};Block.fromObject=function fromObject(obj){var info=Block._fromObject(obj);return new Block(info);};Block._fromBufferReader=function _fromBufferReader(br){var info={};$.checkState(!br.finished(),'No block data received');info.header=BlockHeader.fromBufferReader(br);var transactions=br.readVarintNum();info.transactions=[];for(var i=0;i<transactions;i++){info.transactions.push(Transaction().fromBufferReader(br));}return info;};Block.fromBufferReader=function fromBufferReader(br){$.checkArgument(br,'br is required');var info=Block._fromBufferReader(br);return new Block(info);};Block.fromBuffer=function fromBuffer(buf){return Block.fromBufferReader(new BufferReader(buf));};Block.fromString=function fromString(str){var buf=new Buffer(str,'hex');return Block.fromBuffer(buf);};Block.fromRawBlock=function fromRawBlock(data){if(!BufferUtil.isBuffer(data)){data=new Buffer(data,'binary');}var br=BufferReader(data);br.pos=Block.Values.START_OF_BLOCK;var info=Block._fromBufferReader(br);return new Block(info);};Block.prototype.toObject=Block.prototype.toJSON=function toObject(){var transactions=[];this.transactions.forEach(function(tx){transactions.push(tx.toObject());});return{header:this.header.toObject(),transactions:transactions};};Block.prototype.toBuffer=function toBuffer(){return this.toBufferWriter().concat();};Block.prototype.toString=function toString(){return this.toBuffer().toString('hex');};Block.prototype.toBufferWriter=function toBufferWriter(bw){if(!bw){bw=new BufferWriter();}bw.write(this.header.toBuffer());bw.writeVarintNum(this.transactions.length);for(var i=0;i<this.transactions.length;i++){this.transactions[i].toBufferWriter(bw);}return bw;};Block.prototype.getTransactionHashes=function getTransactionHashes(){var hashes=[];if(this.transactions.length===0){return[Block.Values.NULL_HASH];}for(var t=0;t<this.transactions.length;t++){hashes.push(this.transactions[t]._getHash());}return hashes;};Block.prototype.getMerkleTree=function getMerkleTree(){var tree=this.getTransactionHashes();var j=0;for(var size=this.transactions.length;size>1;size=Math.floor((size+1)/2)){for(var i=0;i<size;i+=2){var i2=Math.min(i+1,size-1);var buf=Buffer.concat([tree[j+i],tree[j+i2]]);tree.push(Hash.sha256sha256(buf));}j+=size;}return tree;};Block.prototype.getMerkleRoot=function getMerkleRoot(){var tree=this.getMerkleTree();return tree[tree.length-1];};Block.prototype.validMerkleRoot=function validMerkleRoot(){var h=new BN(this.header.merkleRoot.toString('hex'),'hex');var c=new BN(this.getMerkleRoot().toString('hex'),'hex');if(h.cmp(c)!==0){return false;}return true;};Block.prototype._getHash=function(){return this.header._getHash();};var idProperty={configurable:false,enumerable:true,get:function(){if(!this._id){this._id=this.header.id;}return this._id;},set:_.noop};Object.defineProperty(Block.prototype,'id',idProperty);Object.defineProperty(Block.prototype,'hash',idProperty);Block.prototype.inspect=function inspect(){return'<Block '+this.id+'>';};Block.Values={START_OF_BLOCK:8,NULL_HASH:new Buffer('0000000000000000000000000000000000000000000000000000000000000000','hex')};module.exports=Block;},264:function(module,__unusedexports,__webpack_require__){"use strict";const EventEmitter=__webpack_require__(4859);const LatencyMonitor=__webpack_require__(484).default;const debug=__webpack_require__(3325)('libp2p:connection-manager');const defaultOptions={maxPeers:Infinity,minPeers:0,maxData:Infinity,maxSentData:Infinity,maxReceivedData:Infinity,maxEventLoopDelay:Infinity,pollInterval:2000,movingAverageInterval:60000,defaultPeerValue:1};class ConnectionManager extends EventEmitter{constructor(libp2p,options){super();this._libp2p=libp2p;this._options=Object.assign({},defaultOptions,options);this._options.maxPeersPerProtocol=fixMaxPeersPerProtocol(this._options.maxPeersPerProtocol);debug('options: %j',this._options);this._stats=libp2p.stats;if(options&&!this._stats){throw new Error('No libp2p.stats');}this._peerValues=new Map();this._peers=new Map();this._peerProtocols=new Map();this._peerCountPerProtocol=new Map();this._onStatsUpdate=this._onStatsUpdate.bind(this);this._onPeerConnect=this._onPeerConnect.bind(this);this._onPeerDisconnect=this._onPeerDisconnect.bind(this);if(this._libp2p.isStarted()){this._onceStarted();}else{this._libp2p.once('start',this._onceStarted.bind(this));}}start(){this._stats.on('update',this._onStatsUpdate);this._libp2p.on('peer:connect',this._onPeerConnect);this._libp2p.on('peer:disconnect',this._onPeerDisconnect);this._latencyMonitor=new LatencyMonitor({dataEmitIntervalMs:this._options.pollInterval});this._onLatencyMeasure=this._onLatencyMeasure.bind(this);this._latencyMonitor.on('data',this._onLatencyMeasure);}stop(){this._stats.removeListener('update',this._onStatsUpdate);this._libp2p.removeListener('peer:connect',this._onPeerConnect);this._libp2p.removeListener('peer:disconnect',this._onPeerDisconnect);this._latencyMonitor.removeListener('data',this._onLatencyMeasure);}setPeerValue(peerId,value){if(value<0||value>1){throw new Error('value should be a number between 0 and 1');}if(peerId.toB58String){peerId=peerId.toB58String();}this._peerValues.set(peerId,value);}_onceStarted(){this._peerId=this._libp2p.peerInfo.id.toB58String();}_onStatsUpdate(){const movingAvgs=this._stats.global.movingAverages;const received=movingAvgs.dataReceived[this._options.movingAverageInterval].movingAverage();this._checkLimit('maxReceivedData',received);const sent=movingAvgs.dataSent[this._options.movingAverageInterval].movingAverage();this._checkLimit('maxSentData',sent);const total=received+sent;this._checkLimit('maxData',total);debug('stats update',total);}_onPeerConnect(peerInfo){const peerId=peerInfo.id.toB58String();debug('%s: connected to %s',this._peerId,peerId);this._peerValues.set(peerId,this._options.defaultPeerValue);this._peers.set(peerId,peerInfo);this.emit('connected',peerId);this._checkLimit('maxPeers',this._peers.size);protocolsFromPeerInfo(peerInfo).forEach(protocolTag=>{const protocol=this._peerCountPerProtocol[protocolTag];if(!protocol){this._peerCountPerProtocol[protocolTag]=0;}this._peerCountPerProtocol[protocolTag]++;let peerProtocols=this._peerProtocols[peerId];if(!peerProtocols){peerProtocols=this._peerProtocols[peerId]=new Set();}peerProtocols.add(protocolTag);this._checkProtocolMaxPeersLimit(protocolTag,this._peerCountPerProtocol[protocolTag]);});}_onPeerDisconnect(peerInfo){const peerId=peerInfo.id.toB58String();debug('%s: disconnected from %s',this._peerId,peerId);this._peerValues.delete(peerId);this._peers.delete(peerId);const peerProtocols=this._peerProtocols[peerId];if(peerProtocols){Array.from(peerProtocols).forEach(protocolTag=>{const peerCountForProtocol=this._peerCountPerProtocol[protocolTag];if(peerCountForProtocol){this._peerCountPerProtocol[protocolTag]--;}});}this.emit('disconnected',peerId);}_onLatencyMeasure(summary){this._checkLimit('maxEventLoopDelay',summary.avgMs);}_checkLimit(name,value){debug('checking limit. current value of %s is %d',name,value);const limit=this._options[name];if(value>limit){debug('%s: limit exceeded: %s, %d',this._peerId,name,value);this.emit('limit:exceeded',name,value);this._maybeDisconnectOne();}}_checkProtocolMaxPeersLimit(protocolTag,value){debug('checking protocol limit. current value of %s is %d',protocolTag,value);const limit=this._options.maxPeersPerProtocol[protocolTag];if(value>limit){debug('%s: protocol max peers limit exceeded: %s, %d',this._peerId,protocolTag,value);this.emit('limit:exceeded',protocolTag,value);this._maybeDisconnectOne();}}_maybeDisconnectOne(){if(this._options.minPeers<this._peerValues.size){const peerValues=Array.from(this._peerValues).sort(byPeerValue);debug('%s: sorted peer values: %j',this._peerId,peerValues);const disconnectPeer=peerValues[0];if(disconnectPeer){const peerId=disconnectPeer[0];debug('%s: lowest value peer is %s',this._peerId,peerId);debug('%s: forcing disconnection from %j',this._peerId,peerId);this._disconnectPeer(peerId);}}}_disconnectPeer(peerId){debug('preemptively disconnecting peer',peerId);this.emit('%s: disconnect:preemptive',this._peerId,peerId);const peer=this._peers.get(peerId);this._libp2p.hangUp(peer,err=>{if(err){this.emit('error',err);}});}}module.exports=ConnectionManager;function byPeerValue(peerValueEntryA,peerValueEntryB){return peerValueEntryA[1]-peerValueEntryB[1];}function fixMaxPeersPerProtocol(maxPeersPerProtocol){if(!maxPeersPerProtocol){maxPeersPerProtocol={};}Object.keys(maxPeersPerProtocol).forEach(transportTag=>{const max=maxPeersPerProtocol[transportTag];delete maxPeersPerProtocol[transportTag];maxPeersPerProtocol[transportTag.toLowerCase()]=max;});return maxPeersPerProtocol;}function protocolsFromPeerInfo(peerInfo){const protocolTags=new Set();peerInfo.multiaddrs.forEach(multiaddr=>{multiaddr.protos().map(protocolToProtocolTag).forEach(protocolTag=>{protocolTags.add(protocolTag);});});return Array.from(protocolTags);}function protocolToProtocolTag(protocol){return protocol.name.toLowerCase();}},278:function(module,__unusedexports,__webpack_require__){"use strict";const{FILE_SEPARATOR}=__webpack_require__(7514);const withMfsRoot=__webpack_require__(5502);const waterfall=__webpack_require__(4265);const parallel=__webpack_require__(4876);const toPathComponents=__webpack_require__(8551);const IPFS_PREFIX='ipfs';const toMfsPath=(context,path,callback)=>{let outputArray=Array.isArray(path);const paths=Array.isArray(path)?path:[path];waterfall([cb=>{parallel({paths:done=>{let p;try{p=paths.map(path=>{path=(path||'').trim();path=path.replace(/(\/\/+)/g,'/');if(!path){throw new Error('paths must not be empty');}if(path.substring(0,1)!==FILE_SEPARATOR){throw new Error(`paths must start with a leading ${FILE_SEPARATOR}`);}if(path.substring(path.length-FILE_SEPARATOR.length)===FILE_SEPARATOR){path=path.substring(0,path.length-FILE_SEPARATOR.length);}return toPathComponents(path);});}catch(err){return done(err);}done(null,p);},root:done=>withMfsRoot(context,done)},cb);},({paths,root},cb)=>{cb(null,paths.map(parts=>{if(parts[0]===IPFS_PREFIX){let mfsDirectory;if(parts.length===2){mfsDirectory=`${FILE_SEPARATOR}${parts.join(FILE_SEPARATOR)}`;}else{mfsDirectory=`${FILE_SEPARATOR}${parts.slice(0,parts.length-1).join(FILE_SEPARATOR)}`;}return{type:'ipfs',depth:parts.length-2,mfsPath:`${FILE_SEPARATOR}${parts.join(FILE_SEPARATOR)}`,mfsDirectory,root,parts,path:`${FILE_SEPARATOR}${parts.join(FILE_SEPARATOR)}`,name:parts[parts.length-1]};}const mfsPath=`/${IPFS_PREFIX}/${root.toBaseEncodedString()}/${parts.join(FILE_SEPARATOR)}`;const mfsDirectory=`/${IPFS_PREFIX}/${root.toBaseEncodedString()}/${parts.slice(0,parts.length-1).join(FILE_SEPARATOR)}`;return{type:'mfs',depth:parts.length,mfsDirectory,mfsPath,root,parts,path:`${FILE_SEPARATOR}${parts.join(FILE_SEPARATOR)}`,name:parts[parts.length-1]};}));},(mfsPaths,cb)=>{if(outputArray){return cb(null,mfsPaths);}cb(null,mfsPaths[0]);}],callback);};module.exports=toMfsPath;},282:function(module,__unusedexports,__webpack_require__){const Buffer=__webpack_require__(7572).Buffer;const bscript=__webpack_require__(5099);const p2ms=__webpack_require__(7722);const p2pk=__webpack_require__(9517);const p2pkh=__webpack_require__(8982);const p2wpkho=__webpack_require__(6297);const p2wsho=__webpack_require__(3910);function check(script,allowIncomplete){const chunks=bscript.decompile(script);if(chunks.length<1)return false;const lastChunk=chunks[chunks.length-1];if(!Buffer.isBuffer(lastChunk))return false;const scriptSigChunks=bscript.decompile(bscript.compile(chunks.slice(0,-1)));const redeemScriptChunks=bscript.decompile(lastChunk);if(!redeemScriptChunks)return false;if(!bscript.isPushOnly(scriptSigChunks))return false;if(chunks.length===1){return p2wsho.check(redeemScriptChunks)||p2wpkho.check(redeemScriptChunks);}if(p2pkh.input.check(scriptSigChunks)&&p2pkh.output.check(redeemScriptChunks))return true;if(p2ms.input.check(scriptSigChunks,allowIncomplete)&&p2ms.output.check(redeemScriptChunks))return true;if(p2pk.input.check(scriptSigChunks)&&p2pk.output.check(redeemScriptChunks))return true;return false;}check.toJSON=function(){return'scriptHash input';};module.exports={check};},285:function(module,__unusedexports,__webpack_require__){"use strict";module.exports=__webpack_require__(8530);},289:function(module,__unusedexports,__webpack_require__){"use strict";const EthBlockHeader=__webpack_require__(5506);const cidFromHash=__webpack_require__(5855);const createResolver=__webpack_require__(7656);module.exports=createResolver('eth-block',EthBlockHeader,mapFromEthObj);function mapFromEthObj(ethObj,options,callback){const paths=[];paths.push({path:'parent',value:{'/':cidFromHash('eth-block',ethObj.parentHash).toBaseEncodedString()}});paths.push({path:'ommers',value:{'/':cidFromHash('eth-block-list',ethObj.uncleHash).toBaseEncodedString()}});paths.push({path:'transactions',value:{'/':cidFromHash('eth-tx-trie',ethObj.transactionsTrie).toBaseEncodedString()}});paths.push({path:'transactionReceipts',value:{'/':cidFromHash('eth-tx-receipt-trie',ethObj.receiptTrie).toBaseEncodedString()}});paths.push({path:'state',value:{'/':cidFromHash('eth-state-trie',ethObj.stateRoot).toBaseEncodedString()}});paths.push({path:'parentHash',value:ethObj.parentHash});paths.push({path:'ommerHash',value:ethObj.uncleHash});paths.push({path:'transactionTrieRoot',value:ethObj.transactionsTrie});paths.push({path:'transactionReceiptTrieRoot',value:ethObj.receiptTrie});paths.push({path:'stateRoot',value:ethObj.stateRoot});paths.push({path:'authorAddress',value:ethObj.coinbase});paths.push({path:'bloom',value:ethObj.bloom});paths.push({path:'difficulty',value:ethObj.difficulty});paths.push({path:'number',value:ethObj.number});paths.push({path:'gasLimit',value:ethObj.gasLimit});paths.push({path:'gasUsed',value:ethObj.gasUsed});paths.push({path:'timestamp',value:ethObj.timestamp});paths.push({path:'extraData',value:ethObj.extraData});paths.push({path:'mixHash',value:ethObj.mixHash});paths.push({path:'nonce',value:ethObj.nonce});callback(null,paths);}},294:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=whilst;var _noop=__webpack_require__(5811);var _noop2=_interopRequireDefault(_noop);var _slice=__webpack_require__(3404);var _slice2=_interopRequireDefault(_slice);var _onlyOnce=__webpack_require__(2306);var _onlyOnce2=_interopRequireDefault(_onlyOnce);var _wrapAsync=__webpack_require__(9396);var _wrapAsync2=_interopRequireDefault(_wrapAsync);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function whilst(test,iteratee,callback){callback=(0,_onlyOnce2.default)(callback||_noop2.default);var _iteratee=(0,_wrapAsync2.default)(iteratee);if(!test())return callback(null);var next=function(err){if(err)return callback(err);if(test())return _iteratee(next);var args=(0,_slice2.default)(arguments,1);callback.apply(null,[null].concat(args));};_iteratee(next);}module.exports=exports['default'];},296:function(__unusedmodule,exports,__webpack_require__){"use strict";var utils=__webpack_require__(1702);var rotr32=utils.rotr32;function ft_1(s,x,y,z){if(s===0)return ch32(x,y,z);if(s===1||s===3)return p32(x,y,z);if(s===2)return maj32(x,y,z);}exports.ft_1=ft_1;function ch32(x,y,z){return x&y^~x&z;}exports.ch32=ch32;function maj32(x,y,z){return x&y^x&z^y&z;}exports.maj32=maj32;function p32(x,y,z){return x^y^z;}exports.p32=p32;function s0_256(x){return rotr32(x,2)^rotr32(x,13)^rotr32(x,22);}exports.s0_256=s0_256;function s1_256(x){return rotr32(x,6)^rotr32(x,11)^rotr32(x,25);}exports.s1_256=s1_256;function g0_256(x){return rotr32(x,7)^rotr32(x,18)^x>>>3;}exports.g0_256=g0_256;function g1_256(x){return rotr32(x,17)^rotr32(x,19)^x>>>10;}exports.g1_256=g1_256;},300:function(module){"use strict";module.exports=function through(op,onEnd){var a=false;function once(abort){if(a||!onEnd)return;a=true;onEnd(abort===true?null:abort);}return function(read){return function(end,cb){if(end)once(end);return read(end,function(end,data){if(!end)op&&op(data);else once(end);cb(end,data);});};};};},306:function(module,__unusedexports,__webpack_require__){"use strict";module.exports=Transform;var Duplex=__webpack_require__(7371);var util=__webpack_require__(5548);util.inherits=__webpack_require__(92);util.inherits(Transform,Duplex);function afterTransform(er,data){var ts=this._transformState;ts.transforming=false;var cb=ts.writecb;if(!cb){return this.emit('error',new Error('write callback called multiple times'));}ts.writechunk=null;ts.writecb=null;if(data!=null)this.push(data);cb(er);var rs=this._readableState;rs.reading=false;if(rs.needReadable||rs.length<rs.highWaterMark){this._read(rs.highWaterMark);}}function Transform(options){if(!(this instanceof Transform))return new Transform(options);Duplex.call(this,options);this._transformState={afterTransform:afterTransform.bind(this),needTransform:false,transforming:false,writecb:null,writechunk:null,writeencoding:null};this._readableState.needReadable=true;this._readableState.sync=false;if(options){if(typeof options.transform==='function')this._transform=options.transform;if(typeof options.flush==='function')this._flush=options.flush;}this.on('prefinish',prefinish);}function prefinish(){var _this=this;if(typeof this._flush==='function'){this._flush(function(er,data){done(_this,er,data);});}else{done(this,null,null);}}Transform.prototype.push=function(chunk,encoding){this._transformState.needTransform=false;return Duplex.prototype.push.call(this,chunk,encoding);};Transform.prototype._transform=function(chunk,encoding,cb){throw new Error('_transform() is not implemented');};Transform.prototype._write=function(chunk,encoding,cb){var ts=this._transformState;ts.writecb=cb;ts.writechunk=chunk;ts.writeencoding=encoding;if(!ts.transforming){var rs=this._readableState;if(ts.needTransform||rs.needReadable||rs.length<rs.highWaterMark)this._read(rs.highWaterMark);}};Transform.prototype._read=function(n){var ts=this._transformState;if(ts.writechunk!==null&&ts.writecb&&!ts.transforming){ts.transforming=true;this._transform(ts.writechunk,ts.writeencoding,ts.afterTransform);}else{ts.needTransform=true;}};Transform.prototype._destroy=function(err,cb){var _this2=this;Duplex.prototype._destroy.call(this,err,function(err2){cb(err2);_this2.emit('close');});};function done(stream,er,data){if(er)return stream.emit('error',er);if(data!=null)stream.push(data);if(stream._writableState.length)throw new Error('Calling transform done when ws.length != 0');if(stream._transformState.transforming)throw new Error('Calling transform done when still transforming');return stream.push(null);}},307:function(module,__unusedexports,__webpack_require__){"use strict";const debug=__webpack_require__(746);const log=debug('libp2p:websocket-star:multi');const once=__webpack_require__(7957);const EE=__webpack_require__(4859).EventEmitter;const{map,parallel}=__webpack_require__(6373);const multiaddr=__webpack_require__(5920);const mafmt=__webpack_require__(7511);const WSStar=__webpack_require__(6038);class WebsocketStarMulti{constructor(opt){this.opt=opt||{};this.servers=opt.servers||[];this.ws=new WSStar(this.opt);this.discovery=this.ws.discovery;}dial(ma,opt,cb){log('dial',ma);return this.ws.dial(ma,opt,cb);}createListener(options,handler){if(typeof options==='function'){handler=options;options={};}const listener=new EE();listener.servers={};listener.online=[];this.servers.forEach(ser=>{const s=this.ws.createListener(options,handler);s.once('error',()=>{});s.url=ser;listener.servers[ser]=s;});listener.listen=(ma,cb)=>{const id=ma.toString().split('ipfs/').pop();log('listen on %s server(s) with id %s',this.servers.length,id);parallel(this.servers.map(url=>listener.servers[url]).map(server=>cb=>{log('listen %s',server.url);const next=once(err=>{log('listen %s ok %s',server.url,!err);if(err)return cb(log(err));listener.online.push(server);return cb();});setTimeout(next,this.opt.timeout||5000,new Error('Timeout'));server.listen(multiaddr(server.url).encapsulate('/ipfs/'+id),next);}),()=>{if(!listener.online.length&&!this.opt.ignore_no_online){const e=new Error("Couldn't listen on any of the servers");listener.emit('error',e);cb(e);}else{listener.emit('listening');cb();}});};listener.close=cb=>parallel(listener.online.map(s=>cb=>s.close(cb)),err=>cb(err,listener.online=[]));listener.getAddrs=cb=>map(listener.online,(s,n)=>s.getAddrs(n),(err,res)=>{if(err)return cb(err);return cb(null,res.reduce((a,b)=>a.concat(b),[]));});return listener;}filter(ma){if(!Array.isArray(ma))ma=[ma];return ma.filter(ma=>ma.toString().startsWith('/p2p-websocket-star')||mafmt.WebSocketStar.matches(ma));}}module.exports=WebsocketStarMulti;},318:function(module,exports,__webpack_require__){"use strict";const hmac=__webpack_require__(6082);const aes=__webpack_require__(5115);const keys=__webpack_require__(9480);exports=module.exports;exports.aes=aes;exports.hmac=hmac;exports.keys=keys;exports.randomBytes=__webpack_require__(3532);exports.pbkdf2=__webpack_require__(6003);},321:function(module,__unusedexports,__webpack_require__){var forge=__webpack_require__(7938);__webpack_require__(1617);__webpack_require__(6050);__webpack_require__(5645);__webpack_require__(1214);(function(){if(forge.random&&forge.random.getBytes){module.exports=forge.random;return;}(function(jQuery){var prng_aes={};var _prng_aes_output=new Array(4);var _prng_aes_buffer=forge.util.createBuffer();prng_aes.formatKey=function(key){var tmp=forge.util.createBuffer(key);key=new Array(4);key[0]=tmp.getInt32();key[1]=tmp.getInt32();key[2]=tmp.getInt32();key[3]=tmp.getInt32();return forge.aes._expandKey(key,false);};prng_aes.formatSeed=function(seed){var tmp=forge.util.createBuffer(seed);seed=new Array(4);seed[0]=tmp.getInt32();seed[1]=tmp.getInt32();seed[2]=tmp.getInt32();seed[3]=tmp.getInt32();return seed;};prng_aes.cipher=function(key,seed){forge.aes._updateBlock(key,seed,_prng_aes_output,false);_prng_aes_buffer.putInt32(_prng_aes_output[0]);_prng_aes_buffer.putInt32(_prng_aes_output[1]);_prng_aes_buffer.putInt32(_prng_aes_output[2]);_prng_aes_buffer.putInt32(_prng_aes_output[3]);return _prng_aes_buffer.getBytes();};prng_aes.increment=function(seed){++seed[3];return seed;};prng_aes.md=forge.md.sha256;function spawnPrng(){var ctx=forge.prng.create(prng_aes);ctx.getBytes=function(count,callback){return ctx.generate(count,callback);};ctx.getBytesSync=function(count){return ctx.generate(count);};return ctx;}var _ctx=spawnPrng();var getRandomValues=null;if(typeof window!=='undefined'){var _crypto=window.crypto||window.msCrypto;if(_crypto&&_crypto.getRandomValues){getRandomValues=function(arr){return _crypto.getRandomValues(arr);};}}if(forge.options.usePureJavaScript||!forge.util.isNodejs&&!getRandomValues){if(typeof window==='undefined'||window.document===undefined){}_ctx.collectInt(+new Date(),32);if(typeof navigator!=='undefined'){var _navBytes='';for(var key in navigator){try{if(typeof navigator[key]=='string'){_navBytes+=navigator[key];}}catch(e){}}_ctx.collect(_navBytes);_navBytes=null;}if(jQuery){jQuery().mousemove(function(e){_ctx.collectInt(e.clientX,16);_ctx.collectInt(e.clientY,16);});jQuery().keypress(function(e){_ctx.collectInt(e.charCode,8);});}}if(!forge.random){forge.random=_ctx;}else{for(var key in _ctx){forge.random[key]=_ctx[key];}}forge.random.createInstance=spawnPrng;module.exports=forge.random;})(typeof jQuery!=='undefined'?jQuery:null);})();},322:function(module,exports){"use strict";exports=module.exports;exports['raw']=Buffer.from('55','hex');exports['base1']=Buffer.from('01','hex');exports['base2']=Buffer.from('00','hex');exports['base8']=Buffer.from('07','hex');exports['base10']=Buffer.from('09','hex');exports['cbor']=Buffer.from('51','hex');exports['protobuf']=Buffer.from('50','hex');exports['rlp']=Buffer.from('60','hex');exports['bencode']=Buffer.from('63','hex');exports['multicodec']=Buffer.from('30','hex');exports['multihash']=Buffer.from('31','hex');exports['multiaddr']=Buffer.from('32','hex');exports['multibase']=Buffer.from('33','hex');exports['md4']=Buffer.from('d4','hex');exports['md5']=Buffer.from('d5','hex');exports['sha1']=Buffer.from('11','hex');exports['sha2-256']=Buffer.from('12','hex');exports['sha2-512']=Buffer.from('13','hex');exports['dbl-sha2-256']=Buffer.from('56','hex');exports['sha3-224']=Buffer.from('17','hex');exports['sha3-256']=Buffer.from('16','hex');exports['sha3-384']=Buffer.from('15','hex');exports['sha3-512']=Buffer.from('14','hex');exports['shake-128']=Buffer.from('18','hex');exports['shake-256']=Buffer.from('19','hex');exports['keccak-224']=Buffer.from('1a','hex');exports['keccak-256']=Buffer.from('1b','hex');exports['keccak-384']=Buffer.from('1c','hex');exports['keccak-512']=Buffer.from('1d','hex');exports['murmur3']=Buffer.from('22','hex');exports['blake2b-8']=Buffer.from('b201','hex');exports['blake2b-16']=Buffer.from('b202','hex');exports['blake2b-24']=Buffer.from('b203','hex');exports['blake2b-32']=Buffer.from('b204','hex');exports['blake2b-40']=Buffer.from('b205','hex');exports['blake2b-48']=Buffer.from('b206','hex');exports['blake2b-56']=Buffer.from('b207','hex');exports['blake2b-64']=Buffer.from('b208','hex');exports['blake2b-72']=Buffer.from('b209','hex');exports['blake2b-80']=Buffer.from('b20a','hex');exports['blake2b-88']=Buffer.from('b20b','hex');exports['blake2b-96']=Buffer.from('b20c','hex');exports['blake2b-104']=Buffer.from('b20d','hex');exports['blake2b-112']=Buffer.from('b20e','hex');exports['blake2b-120']=Buffer.from('b20f','hex');exports['blake2b-128']=Buffer.from('b210','hex');exports['blake2b-136']=Buffer.from('b211','hex');exports['blake2b-144']=Buffer.from('b212','hex');exports['blake2b-152']=Buffer.from('b213','hex');exports['blake2b-160']=Buffer.from('b214','hex');exports['blake2b-168']=Buffer.from('b215','hex');exports['blake2b-176']=Buffer.from('b216','hex');exports['blake2b-184']=Buffer.from('b217','hex');exports['blake2b-192']=Buffer.from('b218','hex');exports['blake2b-200']=Buffer.from('b219','hex');exports['blake2b-208']=Buffer.from('b21a','hex');exports['blake2b-216']=Buffer.from('b21b','hex');exports['blake2b-224']=Buffer.from('b21c','hex');exports['blake2b-232']=Buffer.from('b21d','hex');exports['blake2b-240']=Buffer.from('b21e','hex');exports['blake2b-248']=Buffer.from('b21f','hex');exports['blake2b-256']=Buffer.from('b220','hex');exports['blake2b-264']=Buffer.from('b221','hex');exports['blake2b-272']=Buffer.from('b222','hex');exports['blake2b-280']=Buffer.from('b223','hex');exports['blake2b-288']=Buffer.from('b224','hex');exports['blake2b-296']=Buffer.from('b225','hex');exports['blake2b-304']=Buffer.from('b226','hex');exports['blake2b-312']=Buffer.from('b227','hex');exports['blake2b-320']=Buffer.from('b228','hex');exports['blake2b-328']=Buffer.from('b229','hex');exports['blake2b-336']=Buffer.from('b22a','hex');exports['blake2b-344']=Buffer.from('b22b','hex');exports['blake2b-352']=Buffer.from('b22c','hex');exports['blake2b-360']=Buffer.from('b22d','hex');exports['blake2b-368']=Buffer.from('b22e','hex');exports['blake2b-376']=Buffer.from('b22f','hex');exports['blake2b-384']=Buffer.from('b230','hex');exports['blake2b-392']=Buffer.from('b231','hex');exports['blake2b-400']=Buffer.from('b232','hex');exports['blake2b-408']=Buffer.from('b233','hex');exports['blake2b-416']=Buffer.from('b234','hex');exports['blake2b-424']=Buffer.from('b235','hex');exports['blake2b-432']=Buffer.from('b236','hex');exports['blake2b-440']=Buffer.from('b237','hex');exports['blake2b-448']=Buffer.from('b238','hex');exports['blake2b-456']=Buffer.from('b239','hex');exports['blake2b-464']=Buffer.from('b23a','hex');exports['blake2b-472']=Buffer.from('b23b','hex');exports['blake2b-480']=Buffer.from('b23c','hex');exports['blake2b-488']=Buffer.from('b23d','hex');exports['blake2b-496']=Buffer.from('b23e','hex');exports['blake2b-504']=Buffer.from('b23f','hex');exports['blake2b-512']=Buffer.from('b240','hex');exports['blake2s-8']=Buffer.from('b241','hex');exports['blake2s-16']=Buffer.from('b242','hex');exports['blake2s-24']=Buffer.from('b243','hex');exports['blake2s-32']=Buffer.from('b244','hex');exports['blake2s-40']=Buffer.from('b245','hex');exports['blake2s-48']=Buffer.from('b246','hex');exports['blake2s-56']=Buffer.from('b247','hex');exports['blake2s-64']=Buffer.from('b248','hex');exports['blake2s-72']=Buffer.from('b249','hex');exports['blake2s-80']=Buffer.from('b24a','hex');exports['blake2s-88']=Buffer.from('b24b','hex');exports['blake2s-96']=Buffer.from('b24c','hex');exports['blake2s-104']=Buffer.from('b24d','hex');exports['blake2s-112']=Buffer.from('b24e','hex');exports['blake2s-120']=Buffer.from('b24f','hex');exports['blake2s-128']=Buffer.from('b250','hex');exports['blake2s-136']=Buffer.from('b251','hex');exports['blake2s-144']=Buffer.from('b252','hex');exports['blake2s-152']=Buffer.from('b253','hex');exports['blake2s-160']=Buffer.from('b254','hex');exports['blake2s-168']=Buffer.from('b255','hex');exports['blake2s-176']=Buffer.from('b256','hex');exports['blake2s-184']=Buffer.from('b257','hex');exports['blake2s-192']=Buffer.from('b258','hex');exports['blake2s-200']=Buffer.from('b259','hex');exports['blake2s-208']=Buffer.from('b25a','hex');exports['blake2s-216']=Buffer.from('b25b','hex');exports['blake2s-224']=Buffer.from('b25c','hex');exports['blake2s-232']=Buffer.from('b25d','hex');exports['blake2s-240']=Buffer.from('b25e','hex');exports['blake2s-248']=Buffer.from('b25f','hex');exports['blake2s-256']=Buffer.from('b260','hex');exports['skein256-8']=Buffer.from('b301','hex');exports['skein256-16']=Buffer.from('b302','hex');exports['skein256-24']=Buffer.from('b303','hex');exports['skein256-32']=Buffer.from('b304','hex');exports['skein256-40']=Buffer.from('b305','hex');exports['skein256-48']=Buffer.from('b306','hex');exports['skein256-56']=Buffer.from('b307','hex');exports['skein256-64']=Buffer.from('b308','hex');exports['skein256-72']=Buffer.from('b309','hex');exports['skein256-80']=Buffer.from('b30a','hex');exports['skein256-88']=Buffer.from('b30b','hex');exports['skein256-96']=Buffer.from('b30c','hex');exports['skein256-104']=Buffer.from('b30d','hex');exports['skein256-112']=Buffer.from('b30e','hex');exports['skein256-120']=Buffer.from('b30f','hex');exports['skein256-128']=Buffer.from('b310','hex');exports['skein256-136']=Buffer.from('b311','hex');exports['skein256-144']=Buffer.from('b312','hex');exports['skein256-152']=Buffer.from('b313','hex');exports['skein256-160']=Buffer.from('b314','hex');exports['skein256-168']=Buffer.from('b315','hex');exports['skein256-176']=Buffer.from('b316','hex');exports['skein256-184']=Buffer.from('b317','hex');exports['skein256-192']=Buffer.from('b318','hex');exports['skein256-200']=Buffer.from('b319','hex');exports['skein256-208']=Buffer.from('b31a','hex');exports['skein256-216']=Buffer.from('b31b','hex');exports['skein256-224']=Buffer.from('b31c','hex');exports['skein256-232']=Buffer.from('b31d','hex');exports['skein256-240']=Buffer.from('b31e','hex');exports['skein256-248']=Buffer.from('b31f','hex');exports['skein256-256']=Buffer.from('b320','hex');exports['skein512-8']=Buffer.from('b321','hex');exports['skein512-16']=Buffer.from('b322','hex');exports['skein512-24']=Buffer.from('b323','hex');exports['skein512-32']=Buffer.from('b324','hex');exports['skein512-40']=Buffer.from('b325','hex');exports['skein512-48']=Buffer.from('b326','hex');exports['skein512-56']=Buffer.from('b327','hex');exports['skein512-64']=Buffer.from('b328','hex');exports['skein512-72']=Buffer.from('b329','hex');exports['skein512-80']=Buffer.from('b32a','hex');exports['skein512-88']=Buffer.from('b32b','hex');exports['skein512-96']=Buffer.from('b32c','hex');exports['skein512-104']=Buffer.from('b32d','hex');exports['skein512-112']=Buffer.from('b32e','hex');exports['skein512-120']=Buffer.from('b32f','hex');exports['skein512-128']=Buffer.from('b330','hex');exports['skein512-136']=Buffer.from('b331','hex');exports['skein512-144']=Buffer.from('b332','hex');exports['skein512-152']=Buffer.from('b333','hex');exports['skein512-160']=Buffer.from('b334','hex');exports['skein512-168']=Buffer.from('b335','hex');exports['skein512-176']=Buffer.from('b336','hex');exports['skein512-184']=Buffer.from('b337','hex');exports['skein512-192']=Buffer.from('b338','hex');exports['skein512-200']=Buffer.from('b339','hex');exports['skein512-208']=Buffer.from('b33a','hex');exports['skein512-216']=Buffer.from('b33b','hex');exports['skein512-224']=Buffer.from('b33c','hex');exports['skein512-232']=Buffer.from('b33d','hex');exports['skein512-240']=Buffer.from('b33e','hex');exports['skein512-248']=Buffer.from('b33f','hex');exports['skein512-256']=Buffer.from('b340','hex');exports['skein512-264']=Buffer.from('b341','hex');exports['skein512-272']=Buffer.from('b342','hex');exports['skein512-280']=Buffer.from('b343','hex');exports['skein512-288']=Buffer.from('b344','hex');exports['skein512-296']=Buffer.from('b345','hex');exports['skein512-304']=Buffer.from('b346','hex');exports['skein512-312']=Buffer.from('b347','hex');exports['skein512-320']=Buffer.from('b348','hex');exports['skein512-328']=Buffer.from('b349','hex');exports['skein512-336']=Buffer.from('b34a','hex');exports['skein512-344']=Buffer.from('b34b','hex');exports['skein512-352']=Buffer.from('b34c','hex');exports['skein512-360']=Buffer.from('b34d','hex');exports['skein512-368']=Buffer.from('b34e','hex');exports['skein512-376']=Buffer.from('b34f','hex');exports['skein512-384']=Buffer.from('b350','hex');exports['skein512-392']=Buffer.from('b351','hex');exports['skein512-400']=Buffer.from('b352','hex');exports['skein512-408']=Buffer.from('b353','hex');exports['skein512-416']=Buffer.from('b354','hex');exports['skein512-424']=Buffer.from('b355','hex');exports['skein512-432']=Buffer.from('b356','hex');exports['skein512-440']=Buffer.from('b357','hex');exports['skein512-448']=Buffer.from('b358','hex');exports['skein512-456']=Buffer.from('b359','hex');exports['skein512-464']=Buffer.from('b35a','hex');exports['skein512-472']=Buffer.from('b35b','hex');exports['skein512-480']=Buffer.from('b35c','hex');exports['skein512-488']=Buffer.from('b35d','hex');exports['skein512-496']=Buffer.from('b35e','hex');exports['skein512-504']=Buffer.from('b35f','hex');exports['skein512-512']=Buffer.from('b360','hex');exports['skein1024-8']=Buffer.from('b361','hex');exports['skein1024-16']=Buffer.from('b362','hex');exports['skein1024-24']=Buffer.from('b363','hex');exports['skein1024-32']=Buffer.from('b364','hex');exports['skein1024-40']=Buffer.from('b365','hex');exports['skein1024-48']=Buffer.from('b366','hex');exports['skein1024-56']=Buffer.from('b367','hex');exports['skein1024-64']=Buffer.from('b368','hex');exports['skein1024-72']=Buffer.from('b369','hex');exports['skein1024-80']=Buffer.from('b36a','hex');exports['skein1024-88']=Buffer.from('b36b','hex');exports['skein1024-96']=Buffer.from('b36c','hex');exports['skein1024-104']=Buffer.from('b36d','hex');exports['skein1024-112']=Buffer.from('b36e','hex');exports['skein1024-120']=Buffer.from('b36f','hex');exports['skein1024-128']=Buffer.from('b370','hex');exports['skein1024-136']=Buffer.from('b371','hex');exports['skein1024-144']=Buffer.from('b372','hex');exports['skein1024-152']=Buffer.from('b373','hex');exports['skein1024-160']=Buffer.from('b374','hex');exports['skein1024-168']=Buffer.from('b375','hex');exports['skein1024-176']=Buffer.from('b376','hex');exports['skein1024-184']=Buffer.from('b377','hex');exports['skein1024-192']=Buffer.from('b378','hex');exports['skein1024-200']=Buffer.from('b379','hex');exports['skein1024-208']=Buffer.from('b37a','hex');exports['skein1024-216']=Buffer.from('b37b','hex');exports['skein1024-224']=Buffer.from('b37c','hex');exports['skein1024-232']=Buffer.from('b37d','hex');exports['skein1024-240']=Buffer.from('b37e','hex');exports['skein1024-248']=Buffer.from('b37f','hex');exports['skein1024-256']=Buffer.from('b380','hex');exports['skein1024-264']=Buffer.from('b381','hex');exports['skein1024-272']=Buffer.from('b382','hex');exports['skein1024-280']=Buffer.from('b383','hex');exports['skein1024-288']=Buffer.from('b384','hex');exports['skein1024-296']=Buffer.from('b385','hex');exports['skein1024-304']=Buffer.from('b386','hex');exports['skein1024-312']=Buffer.from('b387','hex');exports['skein1024-320']=Buffer.from('b388','hex');exports['skein1024-328']=Buffer.from('b389','hex');exports['skein1024-336']=Buffer.from('b38a','hex');exports['skein1024-344']=Buffer.from('b38b','hex');exports['skein1024-352']=Buffer.from('b38c','hex');exports['skein1024-360']=Buffer.from('b38d','hex');exports['skein1024-368']=Buffer.from('b38e','hex');exports['skein1024-376']=Buffer.from('b38f','hex');exports['skein1024-384']=Buffer.from('b390','hex');exports['skein1024-392']=Buffer.from('b391','hex');exports['skein1024-400']=Buffer.from('b392','hex');exports['skein1024-408']=Buffer.from('b393','hex');exports['skein1024-416']=Buffer.from('b394','hex');exports['skein1024-424']=Buffer.from('b395','hex');exports['skein1024-432']=Buffer.from('b396','hex');exports['skein1024-440']=Buffer.from('b397','hex');exports['skein1024-448']=Buffer.from('b398','hex');exports['skein1024-456']=Buffer.from('b399','hex');exports['skein1024-464']=Buffer.from('b39a','hex');exports['skein1024-472']=Buffer.from('b39b','hex');exports['skein1024-480']=Buffer.from('b39c','hex');exports['skein1024-488']=Buffer.from('b39d','hex');exports['skein1024-496']=Buffer.from('b39e','hex');exports['skein1024-504']=Buffer.from('b39f','hex');exports['skein1024-512']=Buffer.from('b3a0','hex');exports['skein1024-520']=Buffer.from('b3a1','hex');exports['skein1024-528']=Buffer.from('b3a2','hex');exports['skein1024-536']=Buffer.from('b3a3','hex');exports['skein1024-544']=Buffer.from('b3a4','hex');exports['skein1024-552']=Buffer.from('b3a5','hex');exports['skein1024-560']=Buffer.from('b3a6','hex');exports['skein1024-568']=Buffer.from('b3a7','hex');exports['skein1024-576']=Buffer.from('b3a8','hex');exports['skein1024-584']=Buffer.from('b3a9','hex');exports['skein1024-592']=Buffer.from('b3aa','hex');exports['skein1024-600']=Buffer.from('b3ab','hex');exports['skein1024-608']=Buffer.from('b3ac','hex');exports['skein1024-616']=Buffer.from('b3ad','hex');exports['skein1024-624']=Buffer.from('b3ae','hex');exports['skein1024-632']=Buffer.from('b3af','hex');exports['skein1024-640']=Buffer.from('b3b0','hex');exports['skein1024-648']=Buffer.from('b3b1','hex');exports['skein1024-656']=Buffer.from('b3b2','hex');exports['skein1024-664']=Buffer.from('b3b3','hex');exports['skein1024-672']=Buffer.from('b3b4','hex');exports['skein1024-680']=Buffer.from('b3b5','hex');exports['skein1024-688']=Buffer.from('b3b6','hex');exports['skein1024-696']=Buffer.from('b3b7','hex');exports['skein1024-704']=Buffer.from('b3b8','hex');exports['skein1024-712']=Buffer.from('b3b9','hex');exports['skein1024-720']=Buffer.from('b3ba','hex');exports['skein1024-728']=Buffer.from('b3bb','hex');exports['skein1024-736']=Buffer.from('b3bc','hex');exports['skein1024-744']=Buffer.from('b3bd','hex');exports['skein1024-752']=Buffer.from('b3be','hex');exports['skein1024-760']=Buffer.from('b3bf','hex');exports['skein1024-768']=Buffer.from('b3c0','hex');exports['skein1024-776']=Buffer.from('b3c1','hex');exports['skein1024-784']=Buffer.from('b3c2','hex');exports['skein1024-792']=Buffer.from('b3c3','hex');exports['skein1024-800']=Buffer.from('b3c4','hex');exports['skein1024-808']=Buffer.from('b3c5','hex');exports['skein1024-816']=Buffer.from('b3c6','hex');exports['skein1024-824']=Buffer.from('b3c7','hex');exports['skein1024-832']=Buffer.from('b3c8','hex');exports['skein1024-840']=Buffer.from('b3c9','hex');exports['skein1024-848']=Buffer.from('b3ca','hex');exports['skein1024-856']=Buffer.from('b3cb','hex');exports['skein1024-864']=Buffer.from('b3cc','hex');exports['skein1024-872']=Buffer.from('b3cd','hex');exports['skein1024-880']=Buffer.from('b3ce','hex');exports['skein1024-888']=Buffer.from('b3cf','hex');exports['skein1024-896']=Buffer.from('b3d0','hex');exports['skein1024-904']=Buffer.from('b3d1','hex');exports['skein1024-912']=Buffer.from('b3d2','hex');exports['skein1024-920']=Buffer.from('b3d3','hex');exports['skein1024-928']=Buffer.from('b3d4','hex');exports['skein1024-936']=Buffer.from('b3d5','hex');exports['skein1024-944']=Buffer.from('b3d6','hex');exports['skein1024-952']=Buffer.from('b3d7','hex');exports['skein1024-960']=Buffer.from('b3d8','hex');exports['skein1024-968']=Buffer.from('b3d9','hex');exports['skein1024-976']=Buffer.from('b3da','hex');exports['skein1024-984']=Buffer.from('b3db','hex');exports['skein1024-992']=Buffer.from('b3dc','hex');exports['skein1024-1000']=Buffer.from('b3dd','hex');exports['skein1024-1008']=Buffer.from('b3de','hex');exports['skein1024-1016']=Buffer.from('b3df','hex');exports['skein1024-1024']=Buffer.from('b3e0','hex');exports['ip4']=Buffer.from('04','hex');exports['ip6']=Buffer.from('29','hex');exports['tcp']=Buffer.from('06','hex');exports['udp']=Buffer.from('0111','hex');exports['dccp']=Buffer.from('21','hex');exports['sctp']=Buffer.from('84','hex');exports['udt']=Buffer.from('012d','hex');exports['utp']=Buffer.from('012e','hex');exports['ipfs']=Buffer.from('01a5','hex');exports['http']=Buffer.from('01e0','hex');exports['https']=Buffer.from('01bb','hex');exports['quic']=Buffer.from('01cc','hex');exports['ws']=Buffer.from('01dd','hex');exports['onion']=Buffer.from('01bc','hex');exports['p2p-circuit']=Buffer.from('0122','hex');exports['git-raw']=Buffer.from('78','hex');exports['dag-pb']=Buffer.from('70','hex');exports['dag-cbor']=Buffer.from('71','hex');exports['git-raw']=Buffer.from('78','hex');exports['eth-block']=Buffer.from('90','hex');exports['eth-block-list']=Buffer.from('91','hex');exports['eth-tx-trie']=Buffer.from('92','hex');exports['eth-tx']=Buffer.from('93','hex');exports['eth-tx-receipt-trie']=Buffer.from('94','hex');exports['eth-tx-receipt']=Buffer.from('95','hex');exports['eth-state-trie']=Buffer.from('96','hex');exports['eth-account-snapshot']=Buffer.from('97','hex');exports['eth-storage-trie']=Buffer.from('98','hex');exports['bitcoin-block']=Buffer.from('b0','hex');exports['bitcoin-tx']=Buffer.from('b1','hex');exports['zcash-block']=Buffer.from('c0','hex');exports['zcash-tx']=Buffer.from('c1','hex');exports['stellar-block']=Buffer.from('d0','hex');exports['stellar-tx']=Buffer.from('d1','hex');exports['torrent-info']=Buffer.from('7b','hex');exports['torrent-file']=Buffer.from('7c','hex');exports['ed25519-pub']=Buffer.from('ed','hex');},327:function(module){"use strict";module.exports=`// can't use, because protocol-buffers doesn't support imports
// so we have to duplicate for now :(
// import "record.proto";

message Record {
  // adjusted for javascript
  optional bytes key = 1;
  optional bytes value = 2;
  optional bytes author = 3;
  optional bytes signature = 4;
  optional string timeReceived = 5;
}

message Message {
  enum MessageType {
    PUT_VALUE = 0;
    GET_VALUE = 1;
    ADD_PROVIDER = 2;
    GET_PROVIDERS = 3;
    FIND_NODE = 4;
    PING = 5;
  }

  enum ConnectionType {
    // sender does not have a connection to peer, and no extra information (default)
    NOT_CONNECTED = 0;

    // sender has a live connection to peer
    CONNECTED = 1;

    // sender recently connected to peer
    CAN_CONNECT = 2;

    // sender recently tried to connect to peer repeatedly but failed to connect
    // ("try" here is loose, but this should signal "made strong effort, failed")
    CANNOT_CONNECT = 3;
  }

  message Peer {
    // ID of a given peer.
    optional bytes id = 1;

    // multiaddrs for a given peer
    repeated bytes addrs = 2;

    // used to signal the sender's connection capabilities to the peer
    optional ConnectionType connection = 3;
  }

  // defines what type of message it is.
  optional MessageType type = 1;

  // defines what coral cluster level this query/response belongs to.
  // in case we want to implement coral's cluster rings in the future.
  optional int32 clusterLevelRaw = 10;

  // Used to specify the key associated with this message.
  // PUT_VALUE, GET_VALUE, ADD_PROVIDER, GET_PROVIDERS
  // adjusted for javascript
  optional bytes key = 2;

  // Used to return a value
  // PUT_VALUE, GET_VALUE
  // adjusted Record to bytes for js
  optional bytes record = 3;

  // Used to return peers closer to a key in a query
  // GET_VALUE, GET_PROVIDERS, FIND_NODE
  repeated Peer closerPeers = 8;

  // Used to return Providers
  // GET_VALUE, ADD_PROVIDER, GET_PROVIDERS
  repeated Peer providerPeers = 9;
}`;},341:function(module){function baseIsNaN(value){return value!==value;}module.exports=baseIsNaN;},344:function(module){module.exports=Node;function Node(value,next){this.value=value;this.next=next;}Node.prototype.contains=function(value){var cursor=this;while(cursor){if(cursor.value===value)return true;cursor=cursor.next;}return false;};},366:function(__unusedmodule,exports,__webpack_require__){"use strict";var varint=__webpack_require__(2572);var svarint=__webpack_require__(8501);var Buffer=__webpack_require__(7572).Buffer;var encoder=function(type,encode,decode,encodingLength){encode.bytes=decode.bytes=0;return{type:type,encode:encode,decode:decode,encodingLength:encodingLength};};exports.make=encoder;exports.bytes=function(tag){var bufferLength=function(val){return Buffer.isBuffer(val)?val.length:Buffer.byteLength(val);};var encodingLength=function(val){var len=bufferLength(val);return varint.encodingLength(len)+len;};var encode=function(val,buffer,offset){var oldOffset=offset;var len=bufferLength(val);varint.encode(len,buffer,offset);offset+=varint.encode.bytes;if(Buffer.isBuffer(val))val.copy(buffer,offset);else buffer.write(val,offset,len);offset+=len;encode.bytes=offset-oldOffset;return buffer;};var decode=function(buffer,offset){var oldOffset=offset;var len=varint.decode(buffer,offset);offset+=varint.decode.bytes;var val=buffer.slice(offset,offset+len);offset+=val.length;decode.bytes=offset-oldOffset;return val;};return encoder(2,encode,decode,encodingLength);}();exports.string=function(){var encodingLength=function(val){var len=Buffer.byteLength(val);return varint.encodingLength(len)+len;};var encode=function(val,buffer,offset){var oldOffset=offset;var len=Buffer.byteLength(val);varint.encode(len,buffer,offset,'utf-8');offset+=varint.encode.bytes;buffer.write(val,offset,len);offset+=len;encode.bytes=offset-oldOffset;return buffer;};var decode=function(buffer,offset){var oldOffset=offset;var len=varint.decode(buffer,offset);offset+=varint.decode.bytes;var val=buffer.toString('utf-8',offset,offset+len);offset+=len;decode.bytes=offset-oldOffset;return val;};return encoder(2,encode,decode,encodingLength);}();exports.bool=function(){var encodingLength=function(val){return 1;};var encode=function(val,buffer,offset){buffer[offset]=val?1:0;encode.bytes=1;return buffer;};var decode=function(buffer,offset){var bool=buffer[offset]>0;decode.bytes=1;return bool;};return encoder(0,encode,decode,encodingLength);}();exports.int32=function(){var decode=function(buffer,offset){var val=varint.decode(buffer,offset);decode.bytes=varint.decode.bytes;return val>2147483647?val-4294967296:val;};var encode=function(val,buffer,offset){varint.encode(val<0?val+4294967296:val,buffer,offset);encode.bytes=varint.encode.bytes;return buffer;};var encodingLength=function(val){return varint.encodingLength(val<0?val+4294967296:val);};return encoder(0,varint.encode,decode,encodingLength);}();exports.int64=function(){var decode=function(buffer,offset){var val=varint.decode(buffer,offset);if(val>=Math.pow(2,63)){var limit=9;while(buffer[offset+limit-1]===0xff)limit--;limit=limit||9;var subset=Buffer.allocUnsafe(limit);buffer.copy(subset,0,offset,offset+limit);subset[limit-1]=subset[limit-1]&0x7f;val=-1*varint.decode(subset,0);decode.bytes=10;}else{decode.bytes=varint.decode.bytes;}return val;};var encode=function(val,buffer,offset){if(val<0){var last=offset+9;varint.encode(val*-1,buffer,offset);offset+=varint.encode.bytes-1;buffer[offset]=buffer[offset]|0x80;while(offset<last-1){offset++;buffer[offset]=0xff;}buffer[last]=0x01;encode.bytes=10;}else{varint.encode(val,buffer,offset);encode.bytes=varint.encode.bytes;}return buffer;};var encodingLength=function(val){return val<0?10:varint.encodingLength(val);};return encoder(0,encode,decode,encodingLength);}();exports.sint32=exports.sint64=function(){return encoder(0,svarint.encode,svarint.decode,svarint.encodingLength);}();exports.uint32=exports.uint64=exports.enum=exports.varint=function(){return encoder(0,varint.encode,varint.decode,varint.encodingLength);}();exports.fixed64=exports.sfixed64=function(){var encodingLength=function(val){return 8;};var encode=function(val,buffer,offset){val.copy(buffer,offset);encode.bytes=8;return buffer;};var decode=function(buffer,offset){var val=buffer.slice(offset,offset+8);decode.bytes=8;return val;};return encoder(1,encode,decode,encodingLength);}();exports.double=function(){var encodingLength=function(val){return 8;};var encode=function(val,buffer,offset){buffer.writeDoubleLE(val,offset);encode.bytes=8;return buffer;};var decode=function(buffer,offset){var val=buffer.readDoubleLE(offset);decode.bytes=8;return val;};return encoder(1,encode,decode,encodingLength);}();exports.fixed32=function(){var encodingLength=function(val){return 4;};var encode=function(val,buffer,offset){buffer.writeUInt32LE(val,offset);encode.bytes=4;return buffer;};var decode=function(buffer,offset){var val=buffer.readUInt32LE(offset);decode.bytes=4;return val;};return encoder(5,encode,decode,encodingLength);}();exports.sfixed32=function(){var encodingLength=function(val){return 4;};var encode=function(val,buffer,offset){buffer.writeInt32LE(val,offset);encode.bytes=4;return buffer;};var decode=function(buffer,offset){var val=buffer.readInt32LE(offset);decode.bytes=4;return val;};return encoder(5,encode,decode,encodingLength);}();exports.float=function(){var encodingLength=function(val){return 4;};var encode=function(val,buffer,offset){buffer.writeFloatLE(val,offset);encode.bytes=4;return buffer;};var decode=function(buffer,offset){var val=buffer.readFloatLE(offset);decode.bytes=4;return val;};return encoder(5,encode,decode,encodingLength);}();},372:function(module,__unusedexports,__webpack_require__){var OPS=__webpack_require__(9710);var map={};for(var op in OPS){var code=OPS[op];map[code]=op;}module.exports=map;},375:function(module,exports,__webpack_require__){module=__webpack_require__.nmd(module);var root=__webpack_require__(9274),stubFalse=__webpack_require__(2888);var freeExports=true&&exports&&!exports.nodeType&&exports;var freeModule=freeExports&&"object"=='object'&&module&&!module.nodeType&&module;var moduleExports=freeModule&&freeModule.exports===freeExports;var Buffer=moduleExports?root.Buffer:undefined;var nativeIsBuffer=Buffer?Buffer.isBuffer:undefined;var isBuffer=nativeIsBuffer||stubFalse;module.exports=isBuffer;},378:function(__unusedmodule,exports,__webpack_require__){"use strict";exports.Connection=__webpack_require__(3789);},379:function(module,exports){exports=module.exports=SemVer;var debug;if(typeof process==='object'&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG))debug=function(){var args=Array.prototype.slice.call(arguments,0);args.unshift('SEMVER');console.log.apply(console,args);};else debug=function(){};exports.SEMVER_SPEC_VERSION='2.0.0';var MAX_LENGTH=256;var MAX_SAFE_INTEGER=Number.MAX_SAFE_INTEGER||9007199254740991;var MAX_SAFE_COMPONENT_LENGTH=16;var re=exports.re=[];var src=exports.src=[];var R=0;var NUMERICIDENTIFIER=R++;src[NUMERICIDENTIFIER]='0|[1-9]\\d*';var NUMERICIDENTIFIERLOOSE=R++;src[NUMERICIDENTIFIERLOOSE]='[0-9]+';var NONNUMERICIDENTIFIER=R++;src[NONNUMERICIDENTIFIER]='\\d*[a-zA-Z-][a-zA-Z0-9-]*';var MAINVERSION=R++;src[MAINVERSION]='('+src[NUMERICIDENTIFIER]+')\\.'+'('+src[NUMERICIDENTIFIER]+')\\.'+'('+src[NUMERICIDENTIFIER]+')';var MAINVERSIONLOOSE=R++;src[MAINVERSIONLOOSE]='('+src[NUMERICIDENTIFIERLOOSE]+')\\.'+'('+src[NUMERICIDENTIFIERLOOSE]+')\\.'+'('+src[NUMERICIDENTIFIERLOOSE]+')';var PRERELEASEIDENTIFIER=R++;src[PRERELEASEIDENTIFIER]='(?:'+src[NUMERICIDENTIFIER]+'|'+src[NONNUMERICIDENTIFIER]+')';var PRERELEASEIDENTIFIERLOOSE=R++;src[PRERELEASEIDENTIFIERLOOSE]='(?:'+src[NUMERICIDENTIFIERLOOSE]+'|'+src[NONNUMERICIDENTIFIER]+')';var PRERELEASE=R++;src[PRERELEASE]='(?:-('+src[PRERELEASEIDENTIFIER]+'(?:\\.'+src[PRERELEASEIDENTIFIER]+')*))';var PRERELEASELOOSE=R++;src[PRERELEASELOOSE]='(?:-?('+src[PRERELEASEIDENTIFIERLOOSE]+'(?:\\.'+src[PRERELEASEIDENTIFIERLOOSE]+')*))';var BUILDIDENTIFIER=R++;src[BUILDIDENTIFIER]='[0-9A-Za-z-]+';var BUILD=R++;src[BUILD]='(?:\\+('+src[BUILDIDENTIFIER]+'(?:\\.'+src[BUILDIDENTIFIER]+')*))';var FULL=R++;var FULLPLAIN='v?'+src[MAINVERSION]+src[PRERELEASE]+'?'+src[BUILD]+'?';src[FULL]='^'+FULLPLAIN+'$';var LOOSEPLAIN='[v=\\s]*'+src[MAINVERSIONLOOSE]+src[PRERELEASELOOSE]+'?'+src[BUILD]+'?';var LOOSE=R++;src[LOOSE]='^'+LOOSEPLAIN+'$';var GTLT=R++;src[GTLT]='((?:<|>)?=?)';var XRANGEIDENTIFIERLOOSE=R++;src[XRANGEIDENTIFIERLOOSE]=src[NUMERICIDENTIFIERLOOSE]+'|x|X|\\*';var XRANGEIDENTIFIER=R++;src[XRANGEIDENTIFIER]=src[NUMERICIDENTIFIER]+'|x|X|\\*';var XRANGEPLAIN=R++;src[XRANGEPLAIN]='[v=\\s]*('+src[XRANGEIDENTIFIER]+')'+'(?:\\.('+src[XRANGEIDENTIFIER]+')'+'(?:\\.('+src[XRANGEIDENTIFIER]+')'+'(?:'+src[PRERELEASE]+')?'+src[BUILD]+'?'+')?)?';var XRANGEPLAINLOOSE=R++;src[XRANGEPLAINLOOSE]='[v=\\s]*('+src[XRANGEIDENTIFIERLOOSE]+')'+'(?:\\.('+src[XRANGEIDENTIFIERLOOSE]+')'+'(?:\\.('+src[XRANGEIDENTIFIERLOOSE]+')'+'(?:'+src[PRERELEASELOOSE]+')?'+src[BUILD]+'?'+')?)?';var XRANGE=R++;src[XRANGE]='^'+src[GTLT]+'\\s*'+src[XRANGEPLAIN]+'$';var XRANGELOOSE=R++;src[XRANGELOOSE]='^'+src[GTLT]+'\\s*'+src[XRANGEPLAINLOOSE]+'$';var COERCE=R++;src[COERCE]='(?:^|[^\\d])'+'(\\d{1,'+MAX_SAFE_COMPONENT_LENGTH+'})'+'(?:\\.(\\d{1,'+MAX_SAFE_COMPONENT_LENGTH+'}))?'+'(?:\\.(\\d{1,'+MAX_SAFE_COMPONENT_LENGTH+'}))?'+'(?:$|[^\\d])';var LONETILDE=R++;src[LONETILDE]='(?:~>?)';var TILDETRIM=R++;src[TILDETRIM]='(\\s*)'+src[LONETILDE]+'\\s+';re[TILDETRIM]=new RegExp(src[TILDETRIM],'g');var tildeTrimReplace='$1~';var TILDE=R++;src[TILDE]='^'+src[LONETILDE]+src[XRANGEPLAIN]+'$';var TILDELOOSE=R++;src[TILDELOOSE]='^'+src[LONETILDE]+src[XRANGEPLAINLOOSE]+'$';var LONECARET=R++;src[LONECARET]='(?:\\^)';var CARETTRIM=R++;src[CARETTRIM]='(\\s*)'+src[LONECARET]+'\\s+';re[CARETTRIM]=new RegExp(src[CARETTRIM],'g');var caretTrimReplace='$1^';var CARET=R++;src[CARET]='^'+src[LONECARET]+src[XRANGEPLAIN]+'$';var CARETLOOSE=R++;src[CARETLOOSE]='^'+src[LONECARET]+src[XRANGEPLAINLOOSE]+'$';var COMPARATORLOOSE=R++;src[COMPARATORLOOSE]='^'+src[GTLT]+'\\s*('+LOOSEPLAIN+')$|^$';var COMPARATOR=R++;src[COMPARATOR]='^'+src[GTLT]+'\\s*('+FULLPLAIN+')$|^$';var COMPARATORTRIM=R++;src[COMPARATORTRIM]='(\\s*)'+src[GTLT]+'\\s*('+LOOSEPLAIN+'|'+src[XRANGEPLAIN]+')';re[COMPARATORTRIM]=new RegExp(src[COMPARATORTRIM],'g');var comparatorTrimReplace='$1$2$3';var HYPHENRANGE=R++;src[HYPHENRANGE]='^\\s*('+src[XRANGEPLAIN]+')'+'\\s+-\\s+'+'('+src[XRANGEPLAIN]+')'+'\\s*$';var HYPHENRANGELOOSE=R++;src[HYPHENRANGELOOSE]='^\\s*('+src[XRANGEPLAINLOOSE]+')'+'\\s+-\\s+'+'('+src[XRANGEPLAINLOOSE]+')'+'\\s*$';var STAR=R++;src[STAR]='(<|>)?=?\\s*\\*';for(var i=0;i<R;i++){debug(i,src[i]);if(!re[i])re[i]=new RegExp(src[i]);}exports.parse=parse;function parse(version,options){if(!options||typeof options!=='object')options={loose:!!options,includePrerelease:false};if(version instanceof SemVer)return version;if(typeof version!=='string')return null;if(version.length>MAX_LENGTH)return null;var r=options.loose?re[LOOSE]:re[FULL];if(!r.test(version))return null;try{return new SemVer(version,options);}catch(er){return null;}}exports.valid=valid;function valid(version,options){var v=parse(version,options);return v?v.version:null;}exports.clean=clean;function clean(version,options){var s=parse(version.trim().replace(/^[=v]+/,''),options);return s?s.version:null;}exports.SemVer=SemVer;function SemVer(version,options){if(!options||typeof options!=='object')options={loose:!!options,includePrerelease:false};if(version instanceof SemVer){if(version.loose===options.loose)return version;else version=version.version;}else if(typeof version!=='string'){throw new TypeError('Invalid Version: '+version);}if(version.length>MAX_LENGTH)throw new TypeError('version is longer than '+MAX_LENGTH+' characters');if(!(this instanceof SemVer))return new SemVer(version,options);debug('SemVer',version,options);this.options=options;this.loose=!!options.loose;var m=version.trim().match(options.loose?re[LOOSE]:re[FULL]);if(!m)throw new TypeError('Invalid Version: '+version);this.raw=version;this.major=+m[1];this.minor=+m[2];this.patch=+m[3];if(this.major>MAX_SAFE_INTEGER||this.major<0)throw new TypeError('Invalid major version');if(this.minor>MAX_SAFE_INTEGER||this.minor<0)throw new TypeError('Invalid minor version');if(this.patch>MAX_SAFE_INTEGER||this.patch<0)throw new TypeError('Invalid patch version');if(!m[4])this.prerelease=[];else this.prerelease=m[4].split('.').map(function(id){if(/^[0-9]+$/.test(id)){var num=+id;if(num>=0&&num<MAX_SAFE_INTEGER)return num;}return id;});this.build=m[5]?m[5].split('.'):[];this.format();}SemVer.prototype.format=function(){this.version=this.major+'.'+this.minor+'.'+this.patch;if(this.prerelease.length)this.version+='-'+this.prerelease.join('.');return this.version;};SemVer.prototype.toString=function(){return this.version;};SemVer.prototype.compare=function(other){debug('SemVer.compare',this.version,this.options,other);if(!(other instanceof SemVer))other=new SemVer(other,this.options);return this.compareMain(other)||this.comparePre(other);};SemVer.prototype.compareMain=function(other){if(!(other instanceof SemVer))other=new SemVer(other,this.options);return compareIdentifiers(this.major,other.major)||compareIdentifiers(this.minor,other.minor)||compareIdentifiers(this.patch,other.patch);};SemVer.prototype.comparePre=function(other){if(!(other instanceof SemVer))other=new SemVer(other,this.options);if(this.prerelease.length&&!other.prerelease.length)return-1;else if(!this.prerelease.length&&other.prerelease.length)return 1;else if(!this.prerelease.length&&!other.prerelease.length)return 0;var i=0;do{var a=this.prerelease[i];var b=other.prerelease[i];debug('prerelease compare',i,a,b);if(a===undefined&&b===undefined)return 0;else if(b===undefined)return 1;else if(a===undefined)return-1;else if(a===b)continue;else return compareIdentifiers(a,b);}while(++i);};SemVer.prototype.inc=function(release,identifier){switch(release){case'premajor':this.prerelease.length=0;this.patch=0;this.minor=0;this.major++;this.inc('pre',identifier);break;case'preminor':this.prerelease.length=0;this.patch=0;this.minor++;this.inc('pre',identifier);break;case'prepatch':this.prerelease.length=0;this.inc('patch',identifier);this.inc('pre',identifier);break;case'prerelease':if(this.prerelease.length===0)this.inc('patch',identifier);this.inc('pre',identifier);break;case'major':if(this.minor!==0||this.patch!==0||this.prerelease.length===0)this.major++;this.minor=0;this.patch=0;this.prerelease=[];break;case'minor':if(this.patch!==0||this.prerelease.length===0)this.minor++;this.patch=0;this.prerelease=[];break;case'patch':if(this.prerelease.length===0)this.patch++;this.prerelease=[];break;case'pre':if(this.prerelease.length===0)this.prerelease=[0];else{var i=this.prerelease.length;while(--i>=0){if(typeof this.prerelease[i]==='number'){this.prerelease[i]++;i=-2;}}if(i===-1)this.prerelease.push(0);}if(identifier){if(this.prerelease[0]===identifier){if(isNaN(this.prerelease[1]))this.prerelease=[identifier,0];}else this.prerelease=[identifier,0];}break;default:throw new Error('invalid increment argument: '+release);}this.format();this.raw=this.version;return this;};exports.inc=inc;function inc(version,release,loose,identifier){if(typeof loose==='string'){identifier=loose;loose=undefined;}try{return new SemVer(version,loose).inc(release,identifier).version;}catch(er){return null;}}exports.diff=diff;function diff(version1,version2){if(eq(version1,version2)){return null;}else{var v1=parse(version1);var v2=parse(version2);if(v1.prerelease.length||v2.prerelease.length){for(var key in v1){if(key==='major'||key==='minor'||key==='patch'){if(v1[key]!==v2[key]){return'pre'+key;}}}return'prerelease';}for(var key in v1){if(key==='major'||key==='minor'||key==='patch'){if(v1[key]!==v2[key]){return key;}}}}}exports.compareIdentifiers=compareIdentifiers;var numeric=/^[0-9]+$/;function compareIdentifiers(a,b){var anum=numeric.test(a);var bnum=numeric.test(b);if(anum&&bnum){a=+a;b=+b;}return anum&&!bnum?-1:bnum&&!anum?1:a<b?-1:a>b?1:0;}exports.rcompareIdentifiers=rcompareIdentifiers;function rcompareIdentifiers(a,b){return compareIdentifiers(b,a);}exports.major=major;function major(a,loose){return new SemVer(a,loose).major;}exports.minor=minor;function minor(a,loose){return new SemVer(a,loose).minor;}exports.patch=patch;function patch(a,loose){return new SemVer(a,loose).patch;}exports.compare=compare;function compare(a,b,loose){return new SemVer(a,loose).compare(new SemVer(b,loose));}exports.compareLoose=compareLoose;function compareLoose(a,b){return compare(a,b,true);}exports.rcompare=rcompare;function rcompare(a,b,loose){return compare(b,a,loose);}exports.sort=sort;function sort(list,loose){return list.sort(function(a,b){return exports.compare(a,b,loose);});}exports.rsort=rsort;function rsort(list,loose){return list.sort(function(a,b){return exports.rcompare(a,b,loose);});}exports.gt=gt;function gt(a,b,loose){return compare(a,b,loose)>0;}exports.lt=lt;function lt(a,b,loose){return compare(a,b,loose)<0;}exports.eq=eq;function eq(a,b,loose){return compare(a,b,loose)===0;}exports.neq=neq;function neq(a,b,loose){return compare(a,b,loose)!==0;}exports.gte=gte;function gte(a,b,loose){return compare(a,b,loose)>=0;}exports.lte=lte;function lte(a,b,loose){return compare(a,b,loose)<=0;}exports.cmp=cmp;function cmp(a,op,b,loose){var ret;switch(op){case'===':if(typeof a==='object')a=a.version;if(typeof b==='object')b=b.version;ret=a===b;break;case'!==':if(typeof a==='object')a=a.version;if(typeof b==='object')b=b.version;ret=a!==b;break;case'':case'=':case'==':ret=eq(a,b,loose);break;case'!=':ret=neq(a,b,loose);break;case'>':ret=gt(a,b,loose);break;case'>=':ret=gte(a,b,loose);break;case'<':ret=lt(a,b,loose);break;case'<=':ret=lte(a,b,loose);break;default:throw new TypeError('Invalid operator: '+op);}return ret;}exports.Comparator=Comparator;function Comparator(comp,options){if(!options||typeof options!=='object')options={loose:!!options,includePrerelease:false};if(comp instanceof Comparator){if(comp.loose===!!options.loose)return comp;else comp=comp.value;}if(!(this instanceof Comparator))return new Comparator(comp,options);debug('comparator',comp,options);this.options=options;this.loose=!!options.loose;this.parse(comp);if(this.semver===ANY)this.value='';else this.value=this.operator+this.semver.version;debug('comp',this);}var ANY={};Comparator.prototype.parse=function(comp){var r=this.options.loose?re[COMPARATORLOOSE]:re[COMPARATOR];var m=comp.match(r);if(!m)throw new TypeError('Invalid comparator: '+comp);this.operator=m[1];if(this.operator==='=')this.operator='';if(!m[2])this.semver=ANY;else this.semver=new SemVer(m[2],this.options.loose);};Comparator.prototype.toString=function(){return this.value;};Comparator.prototype.test=function(version){debug('Comparator.test',version,this.options.loose);if(this.semver===ANY)return true;if(typeof version==='string')version=new SemVer(version,this.options);return cmp(version,this.operator,this.semver,this.options);};Comparator.prototype.intersects=function(comp,options){if(!(comp instanceof Comparator)){throw new TypeError('a Comparator is required');}if(!options||typeof options!=='object')options={loose:!!options,includePrerelease:false};var rangeTmp;if(this.operator===''){rangeTmp=new Range(comp.value,options);return satisfies(this.value,rangeTmp,options);}else if(comp.operator===''){rangeTmp=new Range(this.value,options);return satisfies(comp.semver,rangeTmp,options);}var sameDirectionIncreasing=(this.operator==='>='||this.operator==='>')&&(comp.operator==='>='||comp.operator==='>');var sameDirectionDecreasing=(this.operator==='<='||this.operator==='<')&&(comp.operator==='<='||comp.operator==='<');var sameSemVer=this.semver.version===comp.semver.version;var differentDirectionsInclusive=(this.operator==='>='||this.operator==='<=')&&(comp.operator==='>='||comp.operator==='<=');var oppositeDirectionsLessThan=cmp(this.semver,'<',comp.semver,options)&&(this.operator==='>='||this.operator==='>')&&(comp.operator==='<='||comp.operator==='<');var oppositeDirectionsGreaterThan=cmp(this.semver,'>',comp.semver,options)&&(this.operator==='<='||this.operator==='<')&&(comp.operator==='>='||comp.operator==='>');return sameDirectionIncreasing||sameDirectionDecreasing||sameSemVer&&differentDirectionsInclusive||oppositeDirectionsLessThan||oppositeDirectionsGreaterThan;};exports.Range=Range;function Range(range,options){if(!options||typeof options!=='object')options={loose:!!options,includePrerelease:false};if(range instanceof Range){if(range.loose===!!options.loose&&range.includePrerelease===!!options.includePrerelease){return range;}else{return new Range(range.raw,options);}}if(range instanceof Comparator){return new Range(range.value,options);}if(!(this instanceof Range))return new Range(range,options);this.options=options;this.loose=!!options.loose;this.includePrerelease=!!options.includePrerelease;this.raw=range;this.set=range.split(/\s*\|\|\s*/).map(function(range){return this.parseRange(range.trim());},this).filter(function(c){return c.length;});if(!this.set.length){throw new TypeError('Invalid SemVer Range: '+range);}this.format();}Range.prototype.format=function(){this.range=this.set.map(function(comps){return comps.join(' ').trim();}).join('||').trim();return this.range;};Range.prototype.toString=function(){return this.range;};Range.prototype.parseRange=function(range){var loose=this.options.loose;range=range.trim();var hr=loose?re[HYPHENRANGELOOSE]:re[HYPHENRANGE];range=range.replace(hr,hyphenReplace);debug('hyphen replace',range);range=range.replace(re[COMPARATORTRIM],comparatorTrimReplace);debug('comparator trim',range,re[COMPARATORTRIM]);range=range.replace(re[TILDETRIM],tildeTrimReplace);range=range.replace(re[CARETTRIM],caretTrimReplace);range=range.split(/\s+/).join(' ');var compRe=loose?re[COMPARATORLOOSE]:re[COMPARATOR];var set=range.split(' ').map(function(comp){return parseComparator(comp,this.options);},this).join(' ').split(/\s+/);if(this.options.loose){set=set.filter(function(comp){return!!comp.match(compRe);});}set=set.map(function(comp){return new Comparator(comp,this.options);},this);return set;};Range.prototype.intersects=function(range,options){if(!(range instanceof Range)){throw new TypeError('a Range is required');}return this.set.some(function(thisComparators){return thisComparators.every(function(thisComparator){return range.set.some(function(rangeComparators){return rangeComparators.every(function(rangeComparator){return thisComparator.intersects(rangeComparator,options);});});});});};exports.toComparators=toComparators;function toComparators(range,options){return new Range(range,options).set.map(function(comp){return comp.map(function(c){return c.value;}).join(' ').trim().split(' ');});}function parseComparator(comp,options){debug('comp',comp,options);comp=replaceCarets(comp,options);debug('caret',comp);comp=replaceTildes(comp,options);debug('tildes',comp);comp=replaceXRanges(comp,options);debug('xrange',comp);comp=replaceStars(comp,options);debug('stars',comp);return comp;}function isX(id){return!id||id.toLowerCase()==='x'||id==='*';}function replaceTildes(comp,options){return comp.trim().split(/\s+/).map(function(comp){return replaceTilde(comp,options);}).join(' ');}function replaceTilde(comp,options){if(!options||typeof options!=='object')options={loose:!!options,includePrerelease:false};var r=options.loose?re[TILDELOOSE]:re[TILDE];return comp.replace(r,function(_,M,m,p,pr){debug('tilde',comp,_,M,m,p,pr);var ret;if(isX(M))ret='';else if(isX(m))ret='>='+M+'.0.0 <'+(+M+1)+'.0.0';else if(isX(p))ret='>='+M+'.'+m+'.0 <'+M+'.'+(+m+1)+'.0';else if(pr){debug('replaceTilde pr',pr);if(pr.charAt(0)!=='-')pr='-'+pr;ret='>='+M+'.'+m+'.'+p+pr+' <'+M+'.'+(+m+1)+'.0';}else ret='>='+M+'.'+m+'.'+p+' <'+M+'.'+(+m+1)+'.0';debug('tilde return',ret);return ret;});}function replaceCarets(comp,options){return comp.trim().split(/\s+/).map(function(comp){return replaceCaret(comp,options);}).join(' ');}function replaceCaret(comp,options){debug('caret',comp,options);if(!options||typeof options!=='object')options={loose:!!options,includePrerelease:false};var r=options.loose?re[CARETLOOSE]:re[CARET];return comp.replace(r,function(_,M,m,p,pr){debug('caret',comp,_,M,m,p,pr);var ret;if(isX(M))ret='';else if(isX(m))ret='>='+M+'.0.0 <'+(+M+1)+'.0.0';else if(isX(p)){if(M==='0')ret='>='+M+'.'+m+'.0 <'+M+'.'+(+m+1)+'.0';else ret='>='+M+'.'+m+'.0 <'+(+M+1)+'.0.0';}else if(pr){debug('replaceCaret pr',pr);if(pr.charAt(0)!=='-')pr='-'+pr;if(M==='0'){if(m==='0')ret='>='+M+'.'+m+'.'+p+pr+' <'+M+'.'+m+'.'+(+p+1);else ret='>='+M+'.'+m+'.'+p+pr+' <'+M+'.'+(+m+1)+'.0';}else ret='>='+M+'.'+m+'.'+p+pr+' <'+(+M+1)+'.0.0';}else{debug('no pr');if(M==='0'){if(m==='0')ret='>='+M+'.'+m+'.'+p+' <'+M+'.'+m+'.'+(+p+1);else ret='>='+M+'.'+m+'.'+p+' <'+M+'.'+(+m+1)+'.0';}else ret='>='+M+'.'+m+'.'+p+' <'+(+M+1)+'.0.0';}debug('caret return',ret);return ret;});}function replaceXRanges(comp,options){debug('replaceXRanges',comp,options);return comp.split(/\s+/).map(function(comp){return replaceXRange(comp,options);}).join(' ');}function replaceXRange(comp,options){comp=comp.trim();if(!options||typeof options!=='object')options={loose:!!options,includePrerelease:false};var r=options.loose?re[XRANGELOOSE]:re[XRANGE];return comp.replace(r,function(ret,gtlt,M,m,p,pr){debug('xRange',comp,ret,gtlt,M,m,p,pr);var xM=isX(M);var xm=xM||isX(m);var xp=xm||isX(p);var anyX=xp;if(gtlt==='='&&anyX)gtlt='';if(xM){if(gtlt==='>'||gtlt==='<'){ret='<0.0.0';}else{ret='*';}}else if(gtlt&&anyX){if(xm)m=0;if(xp)p=0;if(gtlt==='>'){gtlt='>=';if(xm){M=+M+1;m=0;p=0;}else if(xp){m=+m+1;p=0;}}else if(gtlt==='<='){gtlt='<';if(xm)M=+M+1;else m=+m+1;}ret=gtlt+M+'.'+m+'.'+p;}else if(xm){ret='>='+M+'.0.0 <'+(+M+1)+'.0.0';}else if(xp){ret='>='+M+'.'+m+'.0 <'+M+'.'+(+m+1)+'.0';}debug('xRange return',ret);return ret;});}function replaceStars(comp,options){debug('replaceStars',comp,options);return comp.trim().replace(re[STAR],'');}function hyphenReplace($0,from,fM,fm,fp,fpr,fb,to,tM,tm,tp,tpr,tb){if(isX(fM))from='';else if(isX(fm))from='>='+fM+'.0.0';else if(isX(fp))from='>='+fM+'.'+fm+'.0';else from='>='+from;if(isX(tM))to='';else if(isX(tm))to='<'+(+tM+1)+'.0.0';else if(isX(tp))to='<'+tM+'.'+(+tm+1)+'.0';else if(tpr)to='<='+tM+'.'+tm+'.'+tp+'-'+tpr;else to='<='+to;return(from+' '+to).trim();}Range.prototype.test=function(version){if(!version)return false;if(typeof version==='string')version=new SemVer(version,this.options);for(var i=0;i<this.set.length;i++){if(testSet(this.set[i],version,this.options))return true;}return false;};function testSet(set,version,options){for(var i=0;i<set.length;i++){if(!set[i].test(version))return false;}if(!options)options={};if(version.prerelease.length&&!options.includePrerelease){for(var i=0;i<set.length;i++){debug(set[i].semver);if(set[i].semver===ANY)continue;if(set[i].semver.prerelease.length>0){var allowed=set[i].semver;if(allowed.major===version.major&&allowed.minor===version.minor&&allowed.patch===version.patch)return true;}}return false;}return true;}exports.satisfies=satisfies;function satisfies(version,range,options){try{range=new Range(range,options);}catch(er){return false;}return range.test(version);}exports.maxSatisfying=maxSatisfying;function maxSatisfying(versions,range,options){var max=null;var maxSV=null;try{var rangeObj=new Range(range,options);}catch(er){return null;}versions.forEach(function(v){if(rangeObj.test(v)){if(!max||maxSV.compare(v)===-1){max=v;maxSV=new SemVer(max,options);}}});return max;}exports.minSatisfying=minSatisfying;function minSatisfying(versions,range,options){var min=null;var minSV=null;try{var rangeObj=new Range(range,options);}catch(er){return null;}versions.forEach(function(v){if(rangeObj.test(v)){if(!min||minSV.compare(v)===1){min=v;minSV=new SemVer(min,options);}}});return min;}exports.validRange=validRange;function validRange(range,options){try{return new Range(range,options).range||'*';}catch(er){return null;}}exports.ltr=ltr;function ltr(version,range,options){return outside(version,range,'<',options);}exports.gtr=gtr;function gtr(version,range,options){return outside(version,range,'>',options);}exports.outside=outside;function outside(version,range,hilo,options){version=new SemVer(version,options);range=new Range(range,options);var gtfn,ltefn,ltfn,comp,ecomp;switch(hilo){case'>':gtfn=gt;ltefn=lte;ltfn=lt;comp='>';ecomp='>=';break;case'<':gtfn=lt;ltefn=gte;ltfn=gt;comp='<';ecomp='<=';break;default:throw new TypeError('Must provide a hilo val of "<" or ">"');}if(satisfies(version,range,options)){return false;}for(var i=0;i<range.set.length;++i){var comparators=range.set[i];var high=null;var low=null;comparators.forEach(function(comparator){if(comparator.semver===ANY){comparator=new Comparator('>=0.0.0');}high=high||comparator;low=low||comparator;if(gtfn(comparator.semver,high.semver,options)){high=comparator;}else if(ltfn(comparator.semver,low.semver,options)){low=comparator;}});if(high.operator===comp||high.operator===ecomp){return false;}if((!low.operator||low.operator===comp)&&ltefn(version,low.semver)){return false;}else if(low.operator===ecomp&&ltfn(version,low.semver)){return false;}}return true;}exports.prerelease=prerelease;function prerelease(version,options){var parsed=parse(version,options);return parsed&&parsed.prerelease.length?parsed.prerelease:null;}exports.intersects=intersects;function intersects(r1,r2,options){r1=new Range(r1,options);r2=new Range(r2,options);return r1.intersects(r2);}exports.coerce=coerce;function coerce(version){if(version instanceof SemVer)return version;if(typeof version!=='string')return null;var match=version.match(re[COERCE]);if(match==null)return null;return parse((match[1]||'0')+'.'+(match[2]||'0')+'.'+(match[3]||'0'));}},387:function(module,__unusedexports,__webpack_require__){"use strict";const promisify=__webpack_require__(6955);const values=__webpack_require__(5672);const OFFLINE_ERROR=__webpack_require__(5527).OFFLINE_ERROR;module.exports=function swarm(self){return{peers:promisify((opts,callback)=>{if(typeof opts==='function'){callback=opts;opts={};}opts=opts||{};if(!self.isOnline()){return callback(new Error(OFFLINE_ERROR));}const verbose=opts.v||opts.verbose;const peers=[];values(self._peerInfoBook.getAll()).forEach(peer=>{const connectedAddr=peer.isConnected();if(!connectedAddr){return;}const tupple={addr:connectedAddr,peer:peer.id};if(verbose){tupple.latency='unknown';}peers.push(tupple);});callback(null,peers);}),addrs:promisify(callback=>{if(!self.isOnline()){return callback(new Error(OFFLINE_ERROR));}const peers=values(self._peerInfoBook.getAll());callback(null,peers);}),localAddrs:promisify(callback=>{if(!self.isOnline()){return callback(new Error(OFFLINE_ERROR));}callback(null,self.libp2p.peerInfo.multiaddrs.toArray());}),connect:promisify((maddr,callback)=>{if(!self.isOnline()){return callback(new Error(OFFLINE_ERROR));}self.libp2p.dial(maddr,callback);}),disconnect:promisify((maddr,callback)=>{if(!self.isOnline()){return callback(new Error(OFFLINE_ERROR));}self.libp2p.hangUp(maddr,callback);}),filters:promisify(callback=>callback(new Error('Not implemented')))};};},406:function(module,__unusedexports,__webpack_require__){"use strict";var BN=__webpack_require__(6122);var _=__webpack_require__(6064);var $=__webpack_require__(5107);var BufferUtil=__webpack_require__(9657);var JSUtil=__webpack_require__(8416);var Signature=function Signature(r,s){if(!(this instanceof Signature)){return new Signature(r,s);}if(r instanceof BN){this.set({r:r,s:s});}else if(r){var obj=r;this.set(obj);}};Signature.prototype.set=function(obj){this.r=obj.r||this.r||undefined;this.s=obj.s||this.s||undefined;this.i=typeof obj.i!=='undefined'?obj.i:this.i;this.compressed=typeof obj.compressed!=='undefined'?obj.compressed:this.compressed;this.nhashtype=obj.nhashtype||this.nhashtype||undefined;return this;};Signature.fromCompact=function(buf){$.checkArgument(BufferUtil.isBuffer(buf),'Argument is expected to be a Buffer');var sig=new Signature();var compressed=true;var i=buf.slice(0,1)[0]-27-4;if(i<0){compressed=false;i=i+4;}var b2=buf.slice(1,33);var b3=buf.slice(33,65);$.checkArgument(i===0||i===1||i===2||i===3,new Error('i must be 0, 1, 2, or 3'));$.checkArgument(b2.length===32,new Error('r must be 32 bytes'));$.checkArgument(b3.length===32,new Error('s must be 32 bytes'));sig.compressed=compressed;sig.i=i;sig.r=BN.fromBuffer(b2);sig.s=BN.fromBuffer(b3);return sig;};Signature.fromDER=Signature.fromBuffer=function(buf,strict){var obj=Signature.parseDER(buf,strict);var sig=new Signature();sig.r=obj.r;sig.s=obj.s;return sig;};Signature.fromTxFormat=function(buf){var nhashtype=buf.readUInt8(buf.length-1);var derbuf=buf.slice(0,buf.length-1);var sig=new Signature.fromDER(derbuf,false);sig.nhashtype=nhashtype;return sig;};Signature.fromString=function(str){var buf=new Buffer(str,'hex');return Signature.fromDER(buf);};Signature.parseDER=function(buf,strict){$.checkArgument(BufferUtil.isBuffer(buf),new Error('DER formatted signature should be a buffer'));if(_.isUndefined(strict)){strict=true;}var header=buf[0];$.checkArgument(header===0x30,new Error('Header byte should be 0x30'));var length=buf[1];var buflength=buf.slice(2).length;$.checkArgument(!strict||length===buflength,new Error('Length byte should length of what follows'));length=length<buflength?length:buflength;var rheader=buf[2+0];$.checkArgument(rheader===0x02,new Error('Integer byte for r should be 0x02'));var rlength=buf[2+1];var rbuf=buf.slice(2+2,2+2+rlength);var r=BN.fromBuffer(rbuf);var rneg=buf[2+1+1]===0x00?true:false;$.checkArgument(rlength===rbuf.length,new Error('Length of r incorrect'));var sheader=buf[2+2+rlength+0];$.checkArgument(sheader===0x02,new Error('Integer byte for s should be 0x02'));var slength=buf[2+2+rlength+1];var sbuf=buf.slice(2+2+rlength+2,2+2+rlength+2+slength);var s=BN.fromBuffer(sbuf);var sneg=buf[2+2+rlength+2+2]===0x00?true:false;$.checkArgument(slength===sbuf.length,new Error('Length of s incorrect'));var sumlength=2+2+rlength+2+slength;$.checkArgument(length===sumlength-2,new Error('Length of signature incorrect'));var obj={header:header,length:length,rheader:rheader,rlength:rlength,rneg:rneg,rbuf:rbuf,r:r,sheader:sheader,slength:slength,sneg:sneg,sbuf:sbuf,s:s};return obj;};Signature.prototype.toCompact=function(i,compressed){i=typeof i==='number'?i:this.i;compressed=typeof compressed==='boolean'?compressed:this.compressed;if(!(i===0||i===1||i===2||i===3)){throw new Error('i must be equal to 0, 1, 2, or 3');}var val=i+27+4;if(compressed===false){val=val-4;}var b1=new Buffer([val]);var b2=this.r.toBuffer({size:32});var b3=this.s.toBuffer({size:32});return Buffer.concat([b1,b2,b3]);};Signature.prototype.toBuffer=Signature.prototype.toDER=function(){var rnbuf=this.r.toBuffer();var snbuf=this.s.toBuffer();var rneg=rnbuf[0]&0x80?true:false;var sneg=snbuf[0]&0x80?true:false;var rbuf=rneg?Buffer.concat([new Buffer([0x00]),rnbuf]):rnbuf;var sbuf=sneg?Buffer.concat([new Buffer([0x00]),snbuf]):snbuf;var rlength=rbuf.length;var slength=sbuf.length;var length=2+rlength+2+slength;var rheader=0x02;var sheader=0x02;var header=0x30;var der=Buffer.concat([new Buffer([header,length,rheader,rlength]),rbuf,new Buffer([sheader,slength]),sbuf]);return der;};Signature.prototype.toString=function(){var buf=this.toDER();return buf.toString('hex');};Signature.isTxDER=function(buf){if(buf.length<9){return false;}if(buf.length>73){return false;}if(buf[0]!==0x30){return false;}if(buf[1]!==buf.length-3){return false;}var nLenR=buf[3];if(5+nLenR>=buf.length){return false;}var nLenS=buf[5+nLenR];if(nLenR+nLenS+7!==buf.length){return false;}var R=buf.slice(4);if(buf[4-2]!==0x02){return false;}if(nLenR===0){return false;}if(R[0]&0x80){return false;}if(nLenR>1&&R[0]===0x00&&!(R[1]&0x80)){return false;}var S=buf.slice(6+nLenR);if(buf[6+nLenR-2]!==0x02){return false;}if(nLenS===0){return false;}if(S[0]&0x80){return false;}if(nLenS>1&&S[0]===0x00&&!(S[1]&0x80)){return false;}return true;};Signature.prototype.hasLowS=function(){if(this.s.lt(new BN(1))||this.s.gt(new BN('7FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF5D576E7357A4501DDFE92F46681B20A0','hex'))){return false;}return true;};Signature.prototype.hasDefinedHashtype=function(){if(!JSUtil.isNaturalNumber(this.nhashtype)){return false;}var temp=this.nhashtype&~Signature.SIGHASH_ANYONECANPAY;if(temp<Signature.SIGHASH_ALL||temp>Signature.SIGHASH_SINGLE){return false;}return true;};Signature.prototype.toTxFormat=function(){var derbuf=this.toDER();var buf=new Buffer(1);buf.writeUInt8(this.nhashtype,0);return Buffer.concat([derbuf,buf]);};Signature.SIGHASH_ALL=0x01;Signature.SIGHASH_NONE=0x02;Signature.SIGHASH_SINGLE=0x03;Signature.SIGHASH_ANYONECANPAY=0x80;module.exports=Signature;},412:function(module,__unusedexports,__webpack_require__){"use strict";var _=__webpack_require__(6064);var $=__webpack_require__(5107);var BufferUtil=__webpack_require__(9657);var BN=__webpack_require__(6122);var BufferReader=function BufferReader(buf){if(!(this instanceof BufferReader)){return new BufferReader(buf);}if(_.isUndefined(buf)){return;}if(Buffer.isBuffer(buf)){this.set({buf:buf});}else if(_.isString(buf)){this.set({buf:new Buffer(buf,'hex')});}else if(_.isObject(buf)){var obj=buf;this.set(obj);}else{throw new TypeError('Unrecognized argument for BufferReader');}};BufferReader.prototype.set=function(obj){this.buf=obj.buf||this.buf||undefined;this.pos=obj.pos||this.pos||0;return this;};BufferReader.prototype.eof=function(){return this.pos>=this.buf.length;};BufferReader.prototype.finished=BufferReader.prototype.eof;BufferReader.prototype.read=function(len){$.checkArgument(!_.isUndefined(len),'Must specify a length');var buf=this.buf.slice(this.pos,this.pos+len);this.pos=this.pos+len;return buf;};BufferReader.prototype.readAll=function(){var buf=this.buf.slice(this.pos,this.buf.length);this.pos=this.buf.length;return buf;};BufferReader.prototype.readUInt8=function(){var val=this.buf.readUInt8(this.pos);this.pos=this.pos+1;return val;};BufferReader.prototype.readUInt16BE=function(){var val=this.buf.readUInt16BE(this.pos);this.pos=this.pos+2;return val;};BufferReader.prototype.readUInt16LE=function(){var val=this.buf.readUInt16LE(this.pos);this.pos=this.pos+2;return val;};BufferReader.prototype.readUInt32BE=function(){var val=this.buf.readUInt32BE(this.pos);this.pos=this.pos+4;return val;};BufferReader.prototype.readUInt32LE=function(){var val=this.buf.readUInt32LE(this.pos);this.pos=this.pos+4;return val;};BufferReader.prototype.readUInt64BEBN=function(){var buf=this.buf.slice(this.pos,this.pos+8);var bn=BN.fromBuffer(buf);this.pos=this.pos+8;return bn;};BufferReader.prototype.readUInt64LEBN=function(){var second=this.buf.readUInt32LE(this.pos);var first=this.buf.readUInt32LE(this.pos+4);var combined=first*0x100000000+second;var bn;if(combined<=0x1fffffffffffff){bn=new BN(combined);}else{var data=Array.prototype.slice.call(this.buf,this.pos,this.pos+8);bn=new BN(data,10,'le');}this.pos=this.pos+8;return bn;};BufferReader.prototype.readVarintNum=function(){var first=this.readUInt8();switch(first){case 0xFD:return this.readUInt16LE();case 0xFE:return this.readUInt32LE();case 0xFF:var bn=this.readUInt64LEBN();var n=bn.toNumber();if(n<=Math.pow(2,53)){return n;}else{throw new Error('number too large to retain precision - use readVarintBN');}break;default:return first;}};BufferReader.prototype.readVarLengthBuffer=function(){var len=this.readVarintNum();var buf=this.read(len);$.checkState(buf.length===len,'Invalid length while reading varlength buffer. '+'Expected to read: '+len+' and read '+buf.length);return buf;};BufferReader.prototype.readVarintBuf=function(){var first=this.buf.readUInt8(this.pos);switch(first){case 0xFD:return this.read(1+2);case 0xFE:return this.read(1+4);case 0xFF:return this.read(1+8);default:return this.read(1);}};BufferReader.prototype.readVarintBN=function(){var first=this.readUInt8();switch(first){case 0xFD:return new BN(this.readUInt16LE());case 0xFE:return new BN(this.readUInt32LE());case 0xFF:return this.readUInt64LEBN();default:return new BN(first);}};BufferReader.prototype.reverse=function(){var buf=new Buffer(this.buf.length);for(var i=0;i<buf.length;i++){buf[i]=this.buf[this.buf.length-1-i];}this.buf=buf;return this;};BufferReader.prototype.readReverse=function(len){if(_.isUndefined(len)){len=this.buf.length;}var buf=this.buf.slice(this.pos,this.pos+len);this.pos=this.pos+len;return BufferUtil.reverse(buf);};module.exports=BufferReader;},418:function(module){"use strict";module.exports=function pull(a){var length=arguments.length;if(typeof a==='function'&&a.length===1){var args=new Array(length);for(var i=0;i<length;i++)args[i]=arguments[i];return function(read){if(args==null){throw new TypeError("partial sink should only be called once!");}var ref=args;args=null;switch(length){case 1:return pull(read,ref[0]);case 2:return pull(read,ref[0],ref[1]);case 3:return pull(read,ref[0],ref[1],ref[2]);case 4:return pull(read,ref[0],ref[1],ref[2],ref[3]);default:ref.unshift(read);return pull.apply(null,ref);}};}var read=a;if(read&&typeof read.source==='function'){read=read.source;}for(var i=1;i<length;i++){var s=arguments[i];if(typeof s==='function'){read=s(read);}else if(s&&typeof s==='object'){s.sink(read);read=s.source;}}return read;};},430:function(module,__unusedexports,__webpack_require__){"use strict";const PeerList=__webpack_require__(6749);class LimitedPeerList extends PeerList{constructor(limit){super();this.limit=limit;}push(info){if(this.length<this.limit){return super.push(info);}return false;}}module.exports=LimitedPeerList;},432:function(module,__unusedexports,__webpack_require__){"use strict";module.exports=Receptacle;var toMS=__webpack_require__(9934);var cache=Receptacle.prototype;var counter=new Date()%1e9;function getUID(){return(Math.random()*1e9>>>0)+counter++;}function Receptacle(options){options=options||{};this.id=options.id||getUID();this.max=options.max||Infinity;this.items=options.items||[];this._lookup={};this.size=this.items.length;this.lastModified=new Date(options.lastModified||new Date());for(var item,ttl,i=this.items.length;i--;){item=this.items[i];ttl=new Date(item.expires)-new Date();this._lookup[item.key]=item;if(ttl>0)this.expire(item.key,ttl);else if(ttl<=0)this.delete(item.key);}}cache.has=function(key){return key in this._lookup;};cache.get=function(key){if(!this.has(key))return null;var record=this._lookup[key];if(record.refresh)this.expire(key,record.refresh);this.items.splice(this.items.indexOf(record),1);this.items.push(record);return record.value;};cache.meta=function(key){if(!this.has(key))return null;var record=this._lookup[key];if(!('meta'in record))return null;return record.meta;};cache.set=function(key,value,options){var oldRecord=this._lookup[key];var record=this._lookup[key]={key:key,value:value};this.lastModified=new Date();if(oldRecord){clearTimeout(oldRecord.timeout);this.items.splice(this.items.indexOf(oldRecord),1,record);}else{if(this.size>=this.max)this.delete(this.items[0].key);this.items.push(record);this.size++;}if(options){if('ttl'in options)this.expire(key,options.ttl);if('meta'in options)record.meta=options.meta;if(options.refresh)record.refresh=options.ttl;}return this;};cache.delete=function(key){var record=this._lookup[key];if(!record)return false;this.lastModified=new Date();this.items.splice(this.items.indexOf(record),1);clearTimeout(record.timeout);delete this._lookup[key];this.size--;return this;};cache.expire=function(key,ttl){var ms=ttl||0;var record=this._lookup[key];if(!record)return this;if(typeof ms==='string')ms=toMS(ttl);if(typeof ms!=='number')throw new TypeError('Expiration time must be a string or number.');clearTimeout(record.timeout);record.timeout=setTimeout(this.delete.bind(this,record.key),ms);record.expires=Number(new Date())+ms;return this;};cache.clear=function(){for(var i=this.items.length;i--;)this.delete(this.items[i].key);return this;};cache.toJSON=function(){var items=new Array(this.items.length);var item;for(var i=items.length;i--;){item=this.items[i];items[i]={key:item.key,meta:item.meta,value:item.value,expires:item.expires,refresh:item.refresh};}return{id:this.id,max:isFinite(this.max)?this.max:undefined,lastModified:this.lastModified,items:items};};},451:function(module,__unusedexports,__webpack_require__){var baseFindIndex=__webpack_require__(8928),baseIsNaN=__webpack_require__(341),strictIndexOf=__webpack_require__(7137);function baseIndexOf(array,value,fromIndex){return value===value?strictIndexOf(array,value,fromIndex):baseFindIndex(array,baseIsNaN,fromIndex);}module.exports=baseIndexOf;},463:function(module,__unusedexports,__webpack_require__){"use strict";const Hoek=__webpack_require__(2850);const Any=__webpack_require__(7492);const Cast=__webpack_require__(7622);const Errors=__webpack_require__(1729);const Lazy=__webpack_require__(2802);const Ref=__webpack_require__(1937);const Settings=__webpack_require__(4086);const internals={alternatives:__webpack_require__(2008),array:__webpack_require__(7442),boolean:__webpack_require__(841),binary:__webpack_require__(5068),date:__webpack_require__(1553),func:__webpack_require__(4264),number:__webpack_require__(1286),object:__webpack_require__(7834),string:__webpack_require__(6044),symbol:__webpack_require__(1288)};internals.callWithDefaults=function(schema,args){Hoek.assert(this,'Must be invoked on a Joi instance.');if(this._defaults){schema=this._defaults(schema);}schema._currentJoi=this;return schema._init(...args);};internals.root=function(){const any=new Any();const root=any.clone();Any.prototype._currentJoi=root;root._currentJoi=root;root._binds=new Set(['any','alternatives','alt','array','boolean','binary','date','func','number','object','string','symbol','validate','describe','compile','assert','attempt','lazy','defaults','extend','allow','valid','only','equal','invalid','disallow','not','required','exist','optional','forbidden','strip','when','empty','default']);root.any=function(...args){Hoek.assert(args.length===0,'Joi.any() does not allow arguments.');return internals.callWithDefaults.call(this,any,args);};root.alternatives=root.alt=function(...args){return internals.callWithDefaults.call(this,internals.alternatives,args);};root.array=function(...args){Hoek.assert(args.length===0,'Joi.array() does not allow arguments.');return internals.callWithDefaults.call(this,internals.array,args);};root.boolean=root.bool=function(...args){Hoek.assert(args.length===0,'Joi.boolean() does not allow arguments.');return internals.callWithDefaults.call(this,internals.boolean,args);};root.binary=function(...args){Hoek.assert(args.length===0,'Joi.binary() does not allow arguments.');return internals.callWithDefaults.call(this,internals.binary,args);};root.date=function(...args){Hoek.assert(args.length===0,'Joi.date() does not allow arguments.');return internals.callWithDefaults.call(this,internals.date,args);};root.func=function(...args){Hoek.assert(args.length===0,'Joi.func() does not allow arguments.');return internals.callWithDefaults.call(this,internals.func,args);};root.number=function(...args){Hoek.assert(args.length===0,'Joi.number() does not allow arguments.');return internals.callWithDefaults.call(this,internals.number,args);};root.object=function(...args){return internals.callWithDefaults.call(this,internals.object,args);};root.string=function(...args){Hoek.assert(args.length===0,'Joi.string() does not allow arguments.');return internals.callWithDefaults.call(this,internals.string,args);};root.symbol=function(...args){Hoek.assert(args.length===0,'Joi.symbol() does not allow arguments.');return internals.callWithDefaults.call(this,internals.symbol,args);};root.ref=function(...args){return Ref.create(...args);};root.isRef=function(ref){return Ref.isRef(ref);};root.validate=function(value,...args){const last=args[args.length-1];const callback=typeof last==='function'?last:null;const count=args.length-(callback?1:0);if(count===0){return any.validate(value,callback);}const options=count===2?args[1]:undefined;const schema=this.compile(args[0]);return schema._validateWithOptions(value,options,callback);};root.describe=function(...args){const schema=args.length?this.compile(args[0]):any;return schema.describe();};root.compile=function(schema){try{return Cast.schema(this,schema);}catch(err){if(err.hasOwnProperty('path')){err.message=err.message+'('+err.path+')';}throw err;}};root.assert=function(value,schema,message){this.attempt(value,schema,message);};root.attempt=function(value,schema,message){const result=this.validate(value,schema);const error=result.error;if(error){if(!message){if(typeof error.annotate==='function'){error.message=error.annotate();}throw error;}if(!(message instanceof Error)){if(typeof error.annotate==='function'){error.message=`${message} ${error.annotate()}`;}throw error;}throw message;}return result.value;};root.reach=function(schema,path){Hoek.assert(schema&&schema instanceof Any,'you must provide a joi schema');Hoek.assert(Array.isArray(path)||typeof path==='string','path must be a string or an array of strings');const reach=(sourceSchema,schemaPath)=>{if(!schemaPath.length){return sourceSchema;}const children=sourceSchema._inner.children;if(!children){return;}const key=schemaPath.shift();for(let i=0;i<children.length;++i){const child=children[i];if(child.key===key){return reach(child.schema,schemaPath);}}};const schemaPath=typeof path==='string'?path?path.split('.'):[]:path.slice();return reach(schema,schemaPath);};root.lazy=function(...args){return internals.callWithDefaults.call(this,Lazy,args);};root.defaults=function(fn){Hoek.assert(typeof fn==='function','Defaults must be a function');let joi=Object.create(this.any());joi=fn(joi);Hoek.assert(joi&&joi instanceof this.constructor,'defaults() must return a schema');Object.assign(joi,this,joi.clone());joi._defaults=schema=>{if(this._defaults){schema=this._defaults(schema);Hoek.assert(schema instanceof this.constructor,'defaults() must return a schema');}schema=fn(schema);Hoek.assert(schema instanceof this.constructor,'defaults() must return a schema');return schema;};return joi;};root.bind=function(){const joi=Object.create(this);joi._binds.forEach(bind=>{joi[bind]=joi[bind].bind(joi);});return joi;};root.extend=function(...args){const extensions=Hoek.flatten(args);Hoek.assert(extensions.length>0,'You need to provide at least one extension');this.assert(extensions,root.extensionsSchema);const joi=Object.create(this.any());Object.assign(joi,this);joi._currentJoi=joi;joi._binds=new Set(joi._binds);for(let i=0;i<extensions.length;++i){let extension=extensions[i];if(typeof extension==='function'){extension=extension(joi);}this.assert(extension,root.extensionSchema);const base=(extension.base||this.any()).clone();const ctor=base.constructor;const type=class extends ctor{constructor(){super();if(extension.base){Object.assign(this,base);}this._type=extension.name;if(extension.language){this._settings=Settings.concat(this._settings,{language:{[extension.name]:extension.language}});}}};if(extension.coerce){type.prototype._coerce=function(value,state,options){if(ctor.prototype._coerce){const baseRet=ctor.prototype._coerce.call(this,value,state,options);if(baseRet.errors){return baseRet;}value=baseRet.value;}const ret=extension.coerce.call(this,value,state,options);if(ret instanceof Errors.Err){return{value,errors:ret};}return{value:ret};};}if(extension.pre){type.prototype._base=function(value,state,options){if(ctor.prototype._base){const baseRet=ctor.prototype._base.call(this,value,state,options);if(baseRet.errors){return baseRet;}value=baseRet.value;}const ret=extension.pre.call(this,value,state,options);if(ret instanceof Errors.Err){return{value,errors:ret};}return{value:ret};};}if(extension.rules){for(let j=0;j<extension.rules.length;++j){const rule=extension.rules[j];const ruleArgs=rule.params?rule.params instanceof Any?rule.params._inner.children.map(k=>k.key):Object.keys(rule.params):[];const validateArgs=rule.params?Cast.schema(this,rule.params):null;type.prototype[rule.name]=function(...rArgs){if(rArgs.length>ruleArgs.length){throw new Error('Unexpected number of arguments');}let hasRef=false;let arg={};for(let k=0;k<ruleArgs.length;++k){arg[ruleArgs[k]]=rArgs[k];if(!hasRef&&Ref.isRef(rArgs[k])){hasRef=true;}}if(validateArgs){arg=joi.attempt(arg,validateArgs);}let schema;if(rule.validate){const validate=function(value,state,options){return rule.validate.call(this,arg,value,state,options);};schema=this._test(rule.name,arg,validate,{description:rule.description,hasRef});}else{schema=this.clone();}if(rule.setup){const newSchema=rule.setup.call(schema,arg);if(newSchema!==undefined){Hoek.assert(newSchema instanceof Any,`Setup of extension Joi.${this._type}().${rule.name}() must return undefined or a Joi object`);schema=newSchema;}}return schema;};}}if(extension.describe){type.prototype.describe=function(){const description=ctor.prototype.describe.call(this);return extension.describe.call(this,description);};}const instance=new type();joi[extension.name]=function(...extArgs){return internals.callWithDefaults.call(this,instance,extArgs);};joi._binds.add(extension.name);}return joi;};root.extensionSchema=internals.object.keys({base:internals.object.type(Any,'Joi object'),name:internals.string.required(),coerce:internals.func.arity(3),pre:internals.func.arity(3),language:internals.object,describe:internals.func.arity(1),rules:internals.array.items(internals.object.keys({name:internals.string.required(),setup:internals.func.arity(1),validate:internals.func.arity(4),params:[internals.object.pattern(/.*/,internals.object.type(Any,'Joi object')),internals.object.type(internals.object.constructor,'Joi object')],description:[internals.string,internals.func.arity(1)]}).or('setup','validate'))}).strict();root.extensionsSchema=internals.array.items([internals.object,internals.func.arity(1)]).strict();root.version=__webpack_require__(8606).version;return root;};module.exports=internals.root();},472:function(module,__unusedexports,__webpack_require__){module.exports=minimatch;minimatch.Minimatch=Minimatch;var path={sep:'/'};try{path=__webpack_require__(5897);}catch(er){}var GLOBSTAR=minimatch.GLOBSTAR=Minimatch.GLOBSTAR={};var expand=__webpack_require__(9184);var plTypes={'!':{open:'(?:(?!(?:',close:'))[^/]*?)'},'?':{open:'(?:',close:')?'},'+':{open:'(?:',close:')+'},'*':{open:'(?:',close:')*'},'@':{open:'(?:',close:')'}};var qmark='[^/]';var star=qmark+'*?';var twoStarDot='(?:(?!(?:\\\/|^)(?:\\.{1,2})($|\\\/)).)*?';var twoStarNoDot='(?:(?!(?:\\\/|^)\\.).)*?';var reSpecials=charSet('().*{}+?[]^$\\!');function charSet(s){return s.split('').reduce(function(set,c){set[c]=true;return set;},{});}var slashSplit=/\/+/;minimatch.filter=filter;function filter(pattern,options){options=options||{};return function(p,i,list){return minimatch(p,pattern,options);};}function ext(a,b){a=a||{};b=b||{};var t={};Object.keys(b).forEach(function(k){t[k]=b[k];});Object.keys(a).forEach(function(k){t[k]=a[k];});return t;}minimatch.defaults=function(def){if(!def||!Object.keys(def).length)return minimatch;var orig=minimatch;var m=function minimatch(p,pattern,options){return orig.minimatch(p,pattern,ext(def,options));};m.Minimatch=function Minimatch(pattern,options){return new orig.Minimatch(pattern,ext(def,options));};return m;};Minimatch.defaults=function(def){if(!def||!Object.keys(def).length)return Minimatch;return minimatch.defaults(def).Minimatch;};function minimatch(p,pattern,options){if(typeof pattern!=='string'){throw new TypeError('glob pattern string required');}if(!options)options={};if(!options.nocomment&&pattern.charAt(0)==='#'){return false;}if(pattern.trim()==='')return p==='';return new Minimatch(pattern,options).match(p);}function Minimatch(pattern,options){if(!(this instanceof Minimatch)){return new Minimatch(pattern,options);}if(typeof pattern!=='string'){throw new TypeError('glob pattern string required');}if(!options)options={};pattern=pattern.trim();if(path.sep!=='/'){pattern=pattern.split(path.sep).join('/');}this.options=options;this.set=[];this.pattern=pattern;this.regexp=null;this.negate=false;this.comment=false;this.empty=false;this.make();}Minimatch.prototype.debug=function(){};Minimatch.prototype.make=make;function make(){if(this._made)return;var pattern=this.pattern;var options=this.options;if(!options.nocomment&&pattern.charAt(0)==='#'){this.comment=true;return;}if(!pattern){this.empty=true;return;}this.parseNegate();var set=this.globSet=this.braceExpand();if(options.debug)this.debug=console.error;this.debug(this.pattern,set);set=this.globParts=set.map(function(s){return s.split(slashSplit);});this.debug(this.pattern,set);set=set.map(function(s,si,set){return s.map(this.parse,this);},this);this.debug(this.pattern,set);set=set.filter(function(s){return s.indexOf(false)===-1;});this.debug(this.pattern,set);this.set=set;}Minimatch.prototype.parseNegate=parseNegate;function parseNegate(){var pattern=this.pattern;var negate=false;var options=this.options;var negateOffset=0;if(options.nonegate)return;for(var i=0,l=pattern.length;i<l&&pattern.charAt(i)==='!';i++){negate=!negate;negateOffset++;}if(negateOffset)this.pattern=pattern.substr(negateOffset);this.negate=negate;}minimatch.braceExpand=function(pattern,options){return braceExpand(pattern,options);};Minimatch.prototype.braceExpand=braceExpand;function braceExpand(pattern,options){if(!options){if(this instanceof Minimatch){options=this.options;}else{options={};}}pattern=typeof pattern==='undefined'?this.pattern:pattern;if(typeof pattern==='undefined'){throw new TypeError('undefined pattern');}if(options.nobrace||!pattern.match(/\{.*\}/)){return[pattern];}return expand(pattern);}Minimatch.prototype.parse=parse;var SUBPARSE={};function parse(pattern,isSub){if(pattern.length>1024*64){throw new TypeError('pattern is too long');}var options=this.options;if(!options.noglobstar&&pattern==='**')return GLOBSTAR;if(pattern==='')return'';var re='';var hasMagic=!!options.nocase;var escaping=false;var patternListStack=[];var negativeLists=[];var stateChar;var inClass=false;var reClassStart=-1;var classStart=-1;var patternStart=pattern.charAt(0)==='.'?'':options.dot?'(?!(?:^|\\\/)\\.{1,2}(?:$|\\\/))':'(?!\\.)';var self=this;function clearStateChar(){if(stateChar){switch(stateChar){case'*':re+=star;hasMagic=true;break;case'?':re+=qmark;hasMagic=true;break;default:re+='\\'+stateChar;break;}self.debug('clearStateChar %j %j',stateChar,re);stateChar=false;}}for(var i=0,len=pattern.length,c;i<len&&(c=pattern.charAt(i));i++){this.debug('%s\t%s %s %j',pattern,i,re,c);if(escaping&&reSpecials[c]){re+='\\'+c;escaping=false;continue;}switch(c){case'/':return false;case'\\':clearStateChar();escaping=true;continue;case'?':case'*':case'+':case'@':case'!':this.debug('%s\t%s %s %j <-- stateChar',pattern,i,re,c);if(inClass){this.debug('  in class');if(c==='!'&&i===classStart+1)c='^';re+=c;continue;}self.debug('call clearStateChar %j',stateChar);clearStateChar();stateChar=c;if(options.noext)clearStateChar();continue;case'(':if(inClass){re+='(';continue;}if(!stateChar){re+='\\(';continue;}patternListStack.push({type:stateChar,start:i-1,reStart:re.length,open:plTypes[stateChar].open,close:plTypes[stateChar].close});re+=stateChar==='!'?'(?:(?!(?:':'(?:';this.debug('plType %j %j',stateChar,re);stateChar=false;continue;case')':if(inClass||!patternListStack.length){re+='\\)';continue;}clearStateChar();hasMagic=true;var pl=patternListStack.pop();re+=pl.close;if(pl.type==='!'){negativeLists.push(pl);}pl.reEnd=re.length;continue;case'|':if(inClass||!patternListStack.length||escaping){re+='\\|';escaping=false;continue;}clearStateChar();re+='|';continue;case'[':clearStateChar();if(inClass){re+='\\'+c;continue;}inClass=true;classStart=i;reClassStart=re.length;re+=c;continue;case']':if(i===classStart+1||!inClass){re+='\\'+c;escaping=false;continue;}if(inClass){var cs=pattern.substring(classStart+1,i);try{RegExp('['+cs+']');}catch(er){var sp=this.parse(cs,SUBPARSE);re=re.substr(0,reClassStart)+'\\['+sp[0]+'\\]';hasMagic=hasMagic||sp[1];inClass=false;continue;}}hasMagic=true;inClass=false;re+=c;continue;default:clearStateChar();if(escaping){escaping=false;}else if(reSpecials[c]&&!(c==='^'&&inClass)){re+='\\';}re+=c;}}if(inClass){cs=pattern.substr(classStart+1);sp=this.parse(cs,SUBPARSE);re=re.substr(0,reClassStart)+'\\['+sp[0];hasMagic=hasMagic||sp[1];}for(pl=patternListStack.pop();pl;pl=patternListStack.pop()){var tail=re.slice(pl.reStart+pl.open.length);this.debug('setting tail',re,pl);tail=tail.replace(/((?:\\{2}){0,64})(\\?)\|/g,function(_,$1,$2){if(!$2){$2='\\';}return $1+$1+$2+'|';});this.debug('tail=%j\n   %s',tail,tail,pl,re);var t=pl.type==='*'?star:pl.type==='?'?qmark:'\\'+pl.type;hasMagic=true;re=re.slice(0,pl.reStart)+t+'\\('+tail;}clearStateChar();if(escaping){re+='\\\\';}var addPatternStart=false;switch(re.charAt(0)){case'.':case'[':case'(':addPatternStart=true;}for(var n=negativeLists.length-1;n>-1;n--){var nl=negativeLists[n];var nlBefore=re.slice(0,nl.reStart);var nlFirst=re.slice(nl.reStart,nl.reEnd-8);var nlLast=re.slice(nl.reEnd-8,nl.reEnd);var nlAfter=re.slice(nl.reEnd);nlLast+=nlAfter;var openParensBefore=nlBefore.split('(').length-1;var cleanAfter=nlAfter;for(i=0;i<openParensBefore;i++){cleanAfter=cleanAfter.replace(/\)[+*?]?/,'');}nlAfter=cleanAfter;var dollar='';if(nlAfter===''&&isSub!==SUBPARSE){dollar='$';}var newRe=nlBefore+nlFirst+nlAfter+dollar+nlLast;re=newRe;}if(re!==''&&hasMagic){re='(?=.)'+re;}if(addPatternStart){re=patternStart+re;}if(isSub===SUBPARSE){return[re,hasMagic];}if(!hasMagic){return globUnescape(pattern);}var flags=options.nocase?'i':'';try{var regExp=new RegExp('^'+re+'$',flags);}catch(er){return new RegExp('$.');}regExp._glob=pattern;regExp._src=re;return regExp;}minimatch.makeRe=function(pattern,options){return new Minimatch(pattern,options||{}).makeRe();};Minimatch.prototype.makeRe=makeRe;function makeRe(){if(this.regexp||this.regexp===false)return this.regexp;var set=this.set;if(!set.length){this.regexp=false;return this.regexp;}var options=this.options;var twoStar=options.noglobstar?star:options.dot?twoStarDot:twoStarNoDot;var flags=options.nocase?'i':'';var re=set.map(function(pattern){return pattern.map(function(p){return p===GLOBSTAR?twoStar:typeof p==='string'?regExpEscape(p):p._src;}).join('\\\/');}).join('|');re='^(?:'+re+')$';if(this.negate)re='^(?!'+re+').*$';try{this.regexp=new RegExp(re,flags);}catch(ex){this.regexp=false;}return this.regexp;}minimatch.match=function(list,pattern,options){options=options||{};var mm=new Minimatch(pattern,options);list=list.filter(function(f){return mm.match(f);});if(mm.options.nonull&&!list.length){list.push(pattern);}return list;};Minimatch.prototype.match=match;function match(f,partial){this.debug('match',f,this.pattern);if(this.comment)return false;if(this.empty)return f==='';if(f==='/'&&partial)return true;var options=this.options;if(path.sep!=='/'){f=f.split(path.sep).join('/');}f=f.split(slashSplit);this.debug(this.pattern,'split',f);var set=this.set;this.debug(this.pattern,'set',set);var filename;var i;for(i=f.length-1;i>=0;i--){filename=f[i];if(filename)break;}for(i=0;i<set.length;i++){var pattern=set[i];var file=f;if(options.matchBase&&pattern.length===1){file=[filename];}var hit=this.matchOne(file,pattern,partial);if(hit){if(options.flipNegate)return true;return!this.negate;}}if(options.flipNegate)return false;return this.negate;}Minimatch.prototype.matchOne=function(file,pattern,partial){var options=this.options;this.debug('matchOne',{'this':this,file:file,pattern:pattern});this.debug('matchOne',file.length,pattern.length);for(var fi=0,pi=0,fl=file.length,pl=pattern.length;fi<fl&&pi<pl;fi++,pi++){this.debug('matchOne loop');var p=pattern[pi];var f=file[fi];this.debug(pattern,p,f);if(p===false)return false;if(p===GLOBSTAR){this.debug('GLOBSTAR',[pattern,p,f]);var fr=fi;var pr=pi+1;if(pr===pl){this.debug('** at the end');for(;fi<fl;fi++){if(file[fi]==='.'||file[fi]==='..'||!options.dot&&file[fi].charAt(0)==='.')return false;}return true;}while(fr<fl){var swallowee=file[fr];this.debug('\nglobstar while',file,fr,pattern,pr,swallowee);if(this.matchOne(file.slice(fr),pattern.slice(pr),partial)){this.debug('globstar found match!',fr,fl,swallowee);return true;}else{if(swallowee==='.'||swallowee==='..'||!options.dot&&swallowee.charAt(0)==='.'){this.debug('dot detected!',file,fr,pattern,pr);break;}this.debug('globstar swallow a segment, and continue');fr++;}}if(partial){this.debug('\n>>> no match, partial?',file,fr,pattern,pr);if(fr===fl)return true;}return false;}var hit;if(typeof p==='string'){if(options.nocase){hit=f.toLowerCase()===p.toLowerCase();}else{hit=f===p;}this.debug('string match',p,f,hit);}else{hit=f.match(p);this.debug('pattern match',p,f,hit);}if(!hit)return false;}if(fi===fl&&pi===pl){return true;}else if(fi===fl){return partial;}else if(pi===pl){var emptyFileEnd=fi===fl-1&&file[fi]==='';return emptyFileEnd;}throw new Error('wtf?');};function globUnescape(s){return s.replace(/\\(.)/g,'$1');}function regExpEscape(s){return s.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,'\\$&');}},474:function(module){function AbstractIterator(db){this.db=db;this._ended=false;this._nexting=false;}AbstractIterator.prototype.next=function(callback){var self=this;if(typeof callback!=='function'){throw new Error('next() requires a callback argument');}if(self._ended){process.nextTick(callback,new Error('cannot call next() after end()'));return self;}if(self._nexting){process.nextTick(callback,new Error('cannot call next() before previous next() has completed'));return self;}self._nexting=true;self._next(function(){self._nexting=false;callback.apply(null,arguments);});return self;};AbstractIterator.prototype._next=function(callback){process.nextTick(callback);};AbstractIterator.prototype.end=function(callback){if(typeof callback!=='function'){throw new Error('end() requires a callback argument');}if(this._ended){return process.nextTick(callback,new Error('end() already called on iterator'));}this._ended=true;this._end(callback);};AbstractIterator.prototype._end=function(callback){process.nextTick(callback);};module.exports=AbstractIterator;},476:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=_createTester;var _noop=__webpack_require__(5811);var _noop2=_interopRequireDefault(_noop);var _breakLoop=__webpack_require__(3487);var _breakLoop2=_interopRequireDefault(_breakLoop);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _createTester(check,getResult){return function(eachfn,arr,iteratee,cb){cb=cb||_noop2.default;var testPassed=false;var testResult;eachfn(arr,function(value,_,callback){iteratee(value,function(err,result){if(err){callback(err);}else if(check(result)&&!testResult){testPassed=true;testResult=getResult(true,value);callback(null,_breakLoop2.default);}else{callback();}});},function(err){if(err){cb(err);}else{cb(null,testPassed?testResult:getResult(false));}});};}module.exports=exports['default'];},484:function(__unusedmodule,exports,__webpack_require__){"use strict";Object.defineProperty(exports,'__esModule',{value:true});exports.default=__webpack_require__(1384).default;},485:function(module,__unusedexports,__webpack_require__){"use strict";var defined=__webpack_require__(8542).defined;var varint=__webpack_require__(2572);function compileEncodingLength(m,enc,oneofs){var oneofsKeys=Object.keys(oneofs);var encLength=enc.length;var hls=new Array(encLength);for(var i=0;i<m.fields.length;i++){hls[i]=varint.encodingLength(m.fields[i].tag<<3|enc[i].type);var field=m.fields[i];m.fields[i].packed=field.repeated&&field.options&&field.options.packed&&field.options.packed!=='false';}return function encodingLength(obj){var length=0;var i=0;var j=0;for(i=0;i<oneofsKeys.length;i++){var name=oneofsKeys[i];var props=oneofs[name];var match=false;for(j=0;j<props.length;j++){if(defined(obj[props[j]])){if(match){throw new Error('only one of the properties defined in oneof '+name+' can be set');}match=true;}}}for(i=0;i<encLength;i++){var e=enc[i];var field=m.fields[i];var val=obj[field.name];var hl=hls[i];var len;if(!defined(val)){if(field.required){throw new Error(field.name+' is required');}continue;}if(field.map){var tmp=Object.keys(val);for(j=0;j<tmp.length;j++){tmp[j]={key:tmp[j],value:val[tmp[j]]};}val=tmp;}if(field.packed){var packedLen=0;for(j=0;j<val.length;j++){if(!defined(val[j])){continue;}len=e.encodingLength(val[j]);packedLen+=len;if(e.message){packedLen+=varint.encodingLength(len);}}if(packedLen){length+=hl+packedLen+varint.encodingLength(packedLen);}}else if(field.repeated){for(j=0;j<val.length;j++){if(!defined(val[j])){continue;}len=e.encodingLength(val[j]);length+=hl+len+(e.message?varint.encodingLength(len):0);}}else{len=e.encodingLength(val);length+=hl+len+(e.message?varint.encodingLength(len):0);}}return length;};}module.exports=compileEncodingLength;},486:function(module,__unusedexports,__webpack_require__){"use strict";const Wantlist=__webpack_require__(668);class Ledger{constructor(peerId){this.partner=peerId;this.wantlist=new Wantlist();this.exchangeCount=0;this.sentToPeer=new Map();this.accounting={bytesSent:0,bytesRecv:0};}sentBytes(n){this.exchangeCount++;this.lastExchange=new Date().getTime();this.accounting.bytesSent+=n;}receivedBytes(n){this.exchangeCount++;this.lastExchange=new Date().getTime();this.accounting.bytesRecv+=n;}wants(cid,priority){this.wantlist.add(cid,priority);}cancelWant(cid){this.wantlist.remove(cid);}wantlistContains(cid){return this.wantlist.contains(cid);}debtRatio(){return this.accounting.bytesSent/(this.accounting.bytesRecv+1);}}module.exports=Ledger;},495:function(__unusedmodule,exports,__webpack_require__){"use strict";var Buffer=__webpack_require__(7572).Buffer;var createHash=__webpack_require__(980);var BN=__webpack_require__(5584);var EC=__webpack_require__(3459).ec;var messages=__webpack_require__(4110);var ec=new EC('secp256k1');var ecparams=ec.curve;function loadCompressedPublicKey(first,xBuffer){var x=new BN(xBuffer);if(x.cmp(ecparams.p)>=0)return null;x=x.toRed(ecparams.red);var y=x.redSqr().redIMul(x).redIAdd(ecparams.b).redSqrt();if(first===0x03!==y.isOdd())y=y.redNeg();return ec.keyPair({pub:{x:x,y:y}});}function loadUncompressedPublicKey(first,xBuffer,yBuffer){var x=new BN(xBuffer);var y=new BN(yBuffer);if(x.cmp(ecparams.p)>=0||y.cmp(ecparams.p)>=0)return null;x=x.toRed(ecparams.red);y=y.toRed(ecparams.red);if((first===0x06||first===0x07)&&y.isOdd()!==(first===0x07))return null;var x3=x.redSqr().redIMul(x);if(!y.redSqr().redISub(x3.redIAdd(ecparams.b)).isZero())return null;return ec.keyPair({pub:{x:x,y:y}});}function loadPublicKey(publicKey){var first=publicKey[0];switch(first){case 0x02:case 0x03:if(publicKey.length!==33)return null;return loadCompressedPublicKey(first,publicKey.slice(1,33));case 0x04:case 0x06:case 0x07:if(publicKey.length!==65)return null;return loadUncompressedPublicKey(first,publicKey.slice(1,33),publicKey.slice(33,65));default:return null;}}exports.privateKeyVerify=function(privateKey){var bn=new BN(privateKey);return bn.cmp(ecparams.n)<0&&!bn.isZero();};exports.privateKeyExport=function(privateKey,compressed){var d=new BN(privateKey);if(d.cmp(ecparams.n)>=0||d.isZero())throw new Error(messages.EC_PRIVATE_KEY_EXPORT_DER_FAIL);return Buffer.from(ec.keyFromPrivate(privateKey).getPublic(compressed,true));};exports.privateKeyNegate=function(privateKey){var bn=new BN(privateKey);return bn.isZero()?Buffer.alloc(32):ecparams.n.sub(bn).umod(ecparams.n).toArrayLike(Buffer,'be',32);};exports.privateKeyModInverse=function(privateKey){var bn=new BN(privateKey);if(bn.cmp(ecparams.n)>=0||bn.isZero())throw new Error(messages.EC_PRIVATE_KEY_RANGE_INVALID);return bn.invm(ecparams.n).toArrayLike(Buffer,'be',32);};exports.privateKeyTweakAdd=function(privateKey,tweak){var bn=new BN(tweak);if(bn.cmp(ecparams.n)>=0)throw new Error(messages.EC_PRIVATE_KEY_TWEAK_ADD_FAIL);bn.iadd(new BN(privateKey));if(bn.cmp(ecparams.n)>=0)bn.isub(ecparams.n);if(bn.isZero())throw new Error(messages.EC_PRIVATE_KEY_TWEAK_ADD_FAIL);return bn.toArrayLike(Buffer,'be',32);};exports.privateKeyTweakMul=function(privateKey,tweak){var bn=new BN(tweak);if(bn.cmp(ecparams.n)>=0||bn.isZero())throw new Error(messages.EC_PRIVATE_KEY_TWEAK_MUL_FAIL);bn.imul(new BN(privateKey));if(bn.cmp(ecparams.n))bn=bn.umod(ecparams.n);return bn.toArrayLike(Buffer,'be',32);};exports.publicKeyCreate=function(privateKey,compressed){var d=new BN(privateKey);if(d.cmp(ecparams.n)>=0||d.isZero())throw new Error(messages.EC_PUBLIC_KEY_CREATE_FAIL);return Buffer.from(ec.keyFromPrivate(privateKey).getPublic(compressed,true));};exports.publicKeyConvert=function(publicKey,compressed){var pair=loadPublicKey(publicKey);if(pair===null)throw new Error(messages.EC_PUBLIC_KEY_PARSE_FAIL);return Buffer.from(pair.getPublic(compressed,true));};exports.publicKeyVerify=function(publicKey){return loadPublicKey(publicKey)!==null;};exports.publicKeyTweakAdd=function(publicKey,tweak,compressed){var pair=loadPublicKey(publicKey);if(pair===null)throw new Error(messages.EC_PUBLIC_KEY_PARSE_FAIL);tweak=new BN(tweak);if(tweak.cmp(ecparams.n)>=0)throw new Error(messages.EC_PUBLIC_KEY_TWEAK_ADD_FAIL);var point=ecparams.g.mul(tweak).add(pair.pub);if(point.isInfinity())throw new Error(messages.EC_PUBLIC_KEY_TWEAK_ADD_FAIL);return Buffer.from(point.encode(true,compressed));};exports.publicKeyTweakMul=function(publicKey,tweak,compressed){var pair=loadPublicKey(publicKey);if(pair===null)throw new Error(messages.EC_PUBLIC_KEY_PARSE_FAIL);tweak=new BN(tweak);if(tweak.cmp(ecparams.n)>=0||tweak.isZero())throw new Error(messages.EC_PUBLIC_KEY_TWEAK_MUL_FAIL);return Buffer.from(pair.pub.mul(tweak).encode(true,compressed));};exports.publicKeyCombine=function(publicKeys,compressed){var pairs=new Array(publicKeys.length);for(var i=0;i<publicKeys.length;++i){pairs[i]=loadPublicKey(publicKeys[i]);if(pairs[i]===null)throw new Error(messages.EC_PUBLIC_KEY_PARSE_FAIL);}var point=pairs[0].pub;for(var j=1;j<pairs.length;++j)point=point.add(pairs[j].pub);if(point.isInfinity())throw new Error(messages.EC_PUBLIC_KEY_COMBINE_FAIL);return Buffer.from(point.encode(true,compressed));};exports.signatureNormalize=function(signature){var r=new BN(signature.slice(0,32));var s=new BN(signature.slice(32,64));if(r.cmp(ecparams.n)>=0||s.cmp(ecparams.n)>=0)throw new Error(messages.ECDSA_SIGNATURE_PARSE_FAIL);var result=Buffer.from(signature);if(s.cmp(ec.nh)===1)ecparams.n.sub(s).toArrayLike(Buffer,'be',32).copy(result,32);return result;};exports.signatureExport=function(signature){var r=signature.slice(0,32);var s=signature.slice(32,64);if(new BN(r).cmp(ecparams.n)>=0||new BN(s).cmp(ecparams.n)>=0)throw new Error(messages.ECDSA_SIGNATURE_PARSE_FAIL);return{r:r,s:s};};exports.signatureImport=function(sigObj){var r=new BN(sigObj.r);if(r.cmp(ecparams.n)>=0)r=new BN(0);var s=new BN(sigObj.s);if(s.cmp(ecparams.n)>=0)s=new BN(0);return Buffer.concat([r.toArrayLike(Buffer,'be',32),s.toArrayLike(Buffer,'be',32)]);};exports.sign=function(message,privateKey,noncefn,data){if(typeof noncefn==='function'){var getNonce=noncefn;noncefn=function(counter){var nonce=getNonce(message,privateKey,null,data,counter);if(!Buffer.isBuffer(nonce)||nonce.length!==32)throw new Error(messages.ECDSA_SIGN_FAIL);return new BN(nonce);};}var d=new BN(privateKey);if(d.cmp(ecparams.n)>=0||d.isZero())throw new Error(messages.ECDSA_SIGN_FAIL);var result=ec.sign(message,privateKey,{canonical:true,k:noncefn,pers:data});return{signature:Buffer.concat([result.r.toArrayLike(Buffer,'be',32),result.s.toArrayLike(Buffer,'be',32)]),recovery:result.recoveryParam};};exports.verify=function(message,signature,publicKey){var sigObj={r:signature.slice(0,32),s:signature.slice(32,64)};var sigr=new BN(sigObj.r);var sigs=new BN(sigObj.s);if(sigr.cmp(ecparams.n)>=0||sigs.cmp(ecparams.n)>=0)throw new Error(messages.ECDSA_SIGNATURE_PARSE_FAIL);if(sigs.cmp(ec.nh)===1||sigr.isZero()||sigs.isZero())return false;var pair=loadPublicKey(publicKey);if(pair===null)throw new Error(messages.EC_PUBLIC_KEY_PARSE_FAIL);return ec.verify(message,sigObj,{x:pair.pub.x,y:pair.pub.y});};exports.recover=function(message,signature,recovery,compressed){var sigObj={r:signature.slice(0,32),s:signature.slice(32,64)};var sigr=new BN(sigObj.r);var sigs=new BN(sigObj.s);if(sigr.cmp(ecparams.n)>=0||sigs.cmp(ecparams.n)>=0)throw new Error(messages.ECDSA_SIGNATURE_PARSE_FAIL);try{if(sigr.isZero()||sigs.isZero())throw new Error();var point=ec.recoverPubKey(message,sigObj,recovery);return Buffer.from(point.encode(true,compressed));}catch(err){throw new Error(messages.ECDSA_RECOVER_FAIL);}};exports.ecdh=function(publicKey,privateKey){var shared=exports.ecdhUnsafe(publicKey,privateKey,true);return createHash('sha256').update(shared).digest();};exports.ecdhUnsafe=function(publicKey,privateKey,compressed){var pair=loadPublicKey(publicKey);if(pair===null)throw new Error(messages.EC_PUBLIC_KEY_PARSE_FAIL);var scalar=new BN(privateKey);if(scalar.cmp(ecparams.n)>=0||scalar.isZero())throw new Error(messages.ECDH_FAIL);return Buffer.from(pair.pub.mul(scalar).encode(true,compressed));};},497:function(module,__unusedexports,__webpack_require__){"use strict";const ZcashBitcoreBlockHeader=__webpack_require__(6716).BlockHeader;const CID=__webpack_require__(9339);const multihashes=__webpack_require__(8757);const multihashing=__webpack_require__(9424);const waterfall=__webpack_require__(4265);const ZCASH_BLOCK_HEADER_SIZE=1487;const serialize=(dagNode,callback)=>{let err=null;let binaryBlob;try{binaryBlob=dagNode.toBuffer();}catch(serializeError){err=serializeError;}finally{callback(err,binaryBlob);}};const deserialize=(binaryBlob,callback)=>{if(binaryBlob.length!==ZCASH_BLOCK_HEADER_SIZE){const err=new Error(`Zcash block header needs to be ${ZCASH_BLOCK_HEADER_SIZE} bytes`);return callback(err);}const dagNode=ZcashBitcoreBlockHeader.fromBuffer(binaryBlob);callback(null,dagNode);};const cid=(dagNode,options,callback)=>{if(typeof options==='function'){callback=options;options={};}options=options||{};const hashAlg=options.hashAlg||__webpack_require__(7506).defaultHashAlg;const version=typeof options.version==='undefined'?1:options.version;waterfall([cb=>{try{multihashing(dagNode.toBuffer(),hashAlg,cb);}catch(err){cb(err);}},(mh,cb)=>cb(null,new CID(version,'zcash-block',mh))],callback);};const hashToCid=hash=>{const defaultHashAlg=__webpack_require__(7506).defaultHashAlg;const multihash=multihashes.encode(hash,defaultHashAlg);const cidVersion=1;const cid=new CID(cidVersion,'zcash-block',multihash);return cid;};module.exports={hashToCid:hashToCid,ZCASH_BLOCK_HEADER_SIZE:ZCASH_BLOCK_HEADER_SIZE,cid:cid,deserialize:deserialize,serialize:serialize};},498:function(module,__unusedexports,__webpack_require__){"use strict";const defaultConfig=__webpack_require__(6857);const isMultiaddr=__webpack_require__(7511).IPFS.matches;const promisify=__webpack_require__(6955);function isValidMultiaddr(ma){try{return isMultiaddr(ma);}catch(err){return false;}}function invalidMultiaddrError(ma){return new Error(`${ma} is not a valid Multiaddr`);}module.exports=function bootstrap(self){return{list:promisify(callback=>{self._repo.config.get((err,config)=>{if(err){return callback(err);}callback(null,{Peers:config.Bootstrap});});}),add:promisify((multiaddr,args,callback)=>{if(typeof args==='function'){callback=args;args={default:false};}if(multiaddr&&!isValidMultiaddr(multiaddr)){return setImmediate(()=>callback(invalidMultiaddrError(multiaddr)));}self._repo.config.get((err,config)=>{if(err){return callback(err);}if(args.default){config.Bootstrap=defaultConfig().Bootstrap;}else if(multiaddr&&config.Bootstrap.indexOf(multiaddr)===-1){config.Bootstrap.push(multiaddr);}self._repo.config.set(config,err=>{if(err){return callback(err);}callback(null,{Peers:args.default?defaultConfig().Bootstrap:[multiaddr]});});});}),rm:promisify((multiaddr,args,callback)=>{if(typeof args==='function'){callback=args;args={all:false};}if(multiaddr&&!isValidMultiaddr(multiaddr)){return setImmediate(()=>callback(invalidMultiaddrError(multiaddr)));}self._repo.config.get((err,config)=>{if(err){return callback(err);}if(args.all){config.Bootstrap=[];}else{config.Bootstrap=config.Bootstrap.filter(mh=>mh!==multiaddr);}self._repo.config.set(config,err=>{if(err){return callback(err);}const res=[];if(!args.all&&multiaddr){res.push(multiaddr);}callback(null,{Peers:res});});});})};};},507:function(module,__unusedexports,__webpack_require__){"use strict";const Key=__webpack_require__(759).Key;const apiFile=new Key('api');module.exports=store=>{return{get(callback){store.get(apiFile,(err,value)=>callback(err,value&&value.toString()));},set(value,callback){store.put(apiFile,Buffer.from(value.toString()),callback);},delete(callback){store.delete(apiFile,callback);}};};},552:function(module){module.exports=require("string_decoder");},560:function(module,__unusedexports,__webpack_require__){var Buffer=__webpack_require__(7572).Buffer;function check(buffer){if(buffer.length<8)return false;if(buffer.length>72)return false;if(buffer[0]!==0x30)return false;if(buffer[1]!==buffer.length-2)return false;if(buffer[2]!==0x02)return false;var lenR=buffer[3];if(lenR===0)return false;if(5+lenR>=buffer.length)return false;if(buffer[4+lenR]!==0x02)return false;var lenS=buffer[5+lenR];if(lenS===0)return false;if(6+lenR+lenS!==buffer.length)return false;if(buffer[4]&0x80)return false;if(lenR>1&&buffer[4]===0x00&&!(buffer[5]&0x80))return false;if(buffer[lenR+6]&0x80)return false;if(lenS>1&&buffer[lenR+6]===0x00&&!(buffer[lenR+7]&0x80))return false;return true;}function decode(buffer){if(buffer.length<8)throw new Error('DER sequence length is too short');if(buffer.length>72)throw new Error('DER sequence length is too long');if(buffer[0]!==0x30)throw new Error('Expected DER sequence');if(buffer[1]!==buffer.length-2)throw new Error('DER sequence length is invalid');if(buffer[2]!==0x02)throw new Error('Expected DER integer');var lenR=buffer[3];if(lenR===0)throw new Error('R length is zero');if(5+lenR>=buffer.length)throw new Error('R length is too long');if(buffer[4+lenR]!==0x02)throw new Error('Expected DER integer (2)');var lenS=buffer[5+lenR];if(lenS===0)throw new Error('S length is zero');if(6+lenR+lenS!==buffer.length)throw new Error('S length is invalid');if(buffer[4]&0x80)throw new Error('R value is negative');if(lenR>1&&buffer[4]===0x00&&!(buffer[5]&0x80))throw new Error('R value excessively padded');if(buffer[lenR+6]&0x80)throw new Error('S value is negative');if(lenS>1&&buffer[lenR+6]===0x00&&!(buffer[lenR+7]&0x80))throw new Error('S value excessively padded');return{r:buffer.slice(4,4+lenR),s:buffer.slice(6+lenR)};}function encode(r,s){var lenR=r.length;var lenS=s.length;if(lenR===0)throw new Error('R length is zero');if(lenS===0)throw new Error('S length is zero');if(lenR>33)throw new Error('R length is too long');if(lenS>33)throw new Error('S length is too long');if(r[0]&0x80)throw new Error('R value is negative');if(s[0]&0x80)throw new Error('S value is negative');if(lenR>1&&r[0]===0x00&&!(r[1]&0x80))throw new Error('R value excessively padded');if(lenS>1&&s[0]===0x00&&!(s[1]&0x80))throw new Error('S value excessively padded');var signature=Buffer.allocUnsafe(6+lenR+lenS);signature[0]=0x30;signature[1]=signature.length-2;signature[2]=0x02;signature[3]=r.length;r.copy(signature,4);signature[4+lenR]=0x02;signature[5+lenR]=s.length;s.copy(signature,6+lenR);return signature;}module.exports={check:check,decode:decode,encode:encode};},561:function(module){"use strict";module.exports=`
  message Message {
    message Wantlist {
      message Entry {
        // changed from string to bytes, it makes a difference in JavaScript
        optional bytes block = 1;      // the block cid (cidV0 in bitswap 1.0.0, cidV1 in bitswap 1.1.0)
        optional int32 priority = 2;    // the priority (normalized). default to 1
        optional bool cancel = 3;       // whether this revokes an entry
      }

      repeated Entry entries = 1;       // a list of wantlist entries
      optional bool full = 2;           // whether this is the full wantlist. default to false
    }

    message Block {
      optional bytes prefix = 1;        // CID prefix (cid version, multicodec and multihash prefix (type + length)
      optional bytes data = 2;
    }

    optional Wantlist wantlist = 1;
    repeated bytes blocks = 2;          // used to send Blocks in bitswap 1.0.0
    repeated Block payload = 3;         // used to send Blocks in bitswap 1.1.0
  }
`;},562:function(module){module.exports=function(){var buffers=[],length=0;function calcLength(){return buffers.reduce(function(a,b){return a+b.length;},0);}return{length:length,data:this,add:function(data){if(!Buffer.isBuffer(data))throw new Error('data must be a buffer, was: '+JSON.stringify(data));this.length=length=length+data.length;buffers.push(data);return this;},has:function(n){if(null==n)return length>0;return length>=n;},get:function(n){var _length;if(n==null||n===length){length=0;var _buffers=buffers;buffers=[];if(_buffers.length==1)return _buffers[0];else return Buffer.concat(_buffers);}else if(buffers.length>1&&n<=(_length=buffers[0].length)){var buf=buffers[0].slice(0,n);if(n===_length){buffers.shift();}else{buffers[0]=buffers[0].slice(n,_length);}length-=n;return buf;}else if(n<length){var out=[],len=0;while(len+buffers[0].length<n){var b=buffers.shift();len+=b.length;out.push(b);}if(len<n){out.push(buffers[0].slice(0,n-len));buffers[0]=buffers[0].slice(n-len,buffers[0].length);this.length=length=length-n;}return Buffer.concat(out);}else throw new Error('could not get '+n+' bytes');}};};},569:function(module,__unusedexports,__webpack_require__){"use strict";function id(e){return e;}var prop=__webpack_require__(8145);module.exports=function map(mapper){if(!mapper)return id;mapper=prop(mapper);return function(read){return function(abort,cb){read(abort,function(end,data){try{data=!end?mapper(data):null;}catch(err){return read(err,function(){return cb(err);});}cb(end,data);});};};};},574:function(module,exports,__webpack_require__){"use strict";const crypto=__webpack_require__(318);const constants=__webpack_require__(4980);exports=module.exports;exports.rnd=length=>{if(!length){length=constants.PING_LENGTH;}return crypto.randomBytes(length);};},579:function(module,__unusedexports,__webpack_require__){"use strict";const convert=__webpack_require__(9343);const protocols=__webpack_require__(6899);const varint=__webpack_require__(2572);module.exports={stringToStringTuples:stringToStringTuples,stringTuplesToString:stringTuplesToString,tuplesToStringTuples:tuplesToStringTuples,stringTuplesToTuples:stringTuplesToTuples,bufferToTuples:bufferToTuples,tuplesToBuffer:tuplesToBuffer,bufferToString:bufferToString,stringToBuffer:stringToBuffer,fromString:fromString,fromBuffer:fromBuffer,validateBuffer:validateBuffer,isValidBuffer:isValidBuffer,cleanPath:cleanPath,ParseError:ParseError,protoFromTuple:protoFromTuple,sizeForAddr:sizeForAddr};function stringToStringTuples(str){const tuples=[];const parts=str.split('/').slice(1);if(parts.length===1&&parts[0]===''){return[];}for(let p=0;p<parts.length;p++){const part=parts[p];const proto=protocols(part);if(proto.size===0){tuples.push([part]);continue;}p++;if(p>=parts.length){throw ParseError('invalid address: '+str);}if(proto.path){tuples.push([part,cleanPath(parts.slice(p).join('/'))]);break;}tuples.push([part,parts[p]]);}return tuples;}function stringTuplesToString(tuples){const parts=[];tuples.map(tup=>{const proto=protoFromTuple(tup);parts.push(proto.name);if(tup.length>1){parts.push(tup[1]);}});return cleanPath(parts.join('/'));}function stringTuplesToTuples(tuples){return tuples.map(tup=>{if(!Array.isArray(tup)){tup=[tup];}const proto=protoFromTuple(tup);if(tup.length>1){return[proto.code,convert.toBuffer(proto.code,tup[1])];}return[proto.code];});}function tuplesToStringTuples(tuples){return tuples.map(tup=>{const proto=protoFromTuple(tup);if(tup.length>1){return[proto.code,convert.toString(proto.code,tup[1])];}return[proto.code];});}function tuplesToBuffer(tuples){return fromBuffer(Buffer.concat(tuples.map(tup=>{const proto=protoFromTuple(tup);let buf=Buffer.from(varint.encode(proto.code));if(tup.length>1){buf=Buffer.concat([buf,tup[1]]);}return buf;})));}function sizeForAddr(p,addr){if(p.size>0){return p.size/8;}else if(p.size===0){return 0;}else{const size=varint.decode(addr);return size+varint.decode.bytes;}}function bufferToTuples(buf){const tuples=[];let i=0;while(i<buf.length){const code=varint.decode(buf,i);const n=varint.decode.bytes;const p=protocols(code);const size=sizeForAddr(p,buf.slice(i+n));if(size===0){tuples.push([code]);i+=n;continue;}const addr=buf.slice(i+n,i+n+size);i+=size+n;if(i>buf.length){throw ParseError('Invalid address buffer: '+buf.toString('hex'));}tuples.push([code,addr]);}return tuples;}function bufferToString(buf){const a=bufferToTuples(buf);const b=tuplesToStringTuples(a);return stringTuplesToString(b);}function stringToBuffer(str){str=cleanPath(str);const a=stringToStringTuples(str);const b=stringTuplesToTuples(a);return tuplesToBuffer(b);}function fromString(str){return stringToBuffer(str);}function fromBuffer(buf){const err=validateBuffer(buf);if(err)throw err;return Buffer.from(buf);}function validateBuffer(buf){try{bufferToTuples(buf);}catch(err){return err;}}function isValidBuffer(buf){return validateBuffer(buf)===undefined;}function cleanPath(str){return'/'+str.trim().split('/').filter(a=>a).join('/');}function ParseError(str){return new Error('Error parsing address: '+str);}function protoFromTuple(tup){const proto=protocols(tup[0]);return proto;}},593:function(module,__unusedexports,__webpack_require__){"use strict";const{exporter}=__webpack_require__(3021);const pull=__webpack_require__(2885);const deferred=__webpack_require__(5213);const{normalizePath}=__webpack_require__(8170);module.exports=function(self){return function catPullStream(ipfsPath,options){if(typeof ipfsPath==='function'){throw new Error('You must supply an ipfsPath');}options=options||{};ipfsPath=normalizePath(ipfsPath);const pathComponents=ipfsPath.split('/');const restPath=normalizePath(pathComponents.slice(1).join('/'));const filterFile=file=>restPath&&file.path===restPath||file.path===ipfsPath;if(options.preload!==false){self._preload(pathComponents[0]);}const d=deferred.source();pull(exporter(ipfsPath,self._ipld,options),pull.filter(filterFile),pull.take(1),pull.collect((err,files)=>{if(err){return d.abort(err);}if(!files.length){return d.abort(new Error('No such file'));}const file=files[0];if(!file.content&&file.type==='dir'){return d.abort(new Error('this dag node is a directory'));}if(!file.content){return d.abort(new Error('this dag node has no content'));}d.resolve(file.content);}));return d;};};},609:function(module,__unusedexports,__webpack_require__){"use strict";const pull=__webpack_require__(2885);class KeyTransformDatastore{constructor(child,transform){this.child=child;this.transform=transform;}open(callback){this.child.open(callback);}put(key,val,callback){this.child.put(this.transform.convert(key),val,callback);}get(key,callback){this.child.get(this.transform.convert(key),callback);}has(key,callback){this.child.has(this.transform.convert(key),callback);}delete(key,callback){this.child.delete(this.transform.convert(key),callback);}batch(){const b=this.child.batch();return{put:(key,value)=>{b.put(this.transform.convert(key),value);},delete:(key)=>{b.delete(this.transform.convert(key));},commit:(callback)=>{b.commit(callback);}};}query(q){return pull(this.child.query(q),pull.map(e=>{e.key=this.transform.invert(e.key);return e;}));}close(callback){this.child.close(callback);}}module.exports=KeyTransformDatastore;},621:function(module){module.exports=[["0","\u0000",127,""],["8140","",5,"",9,"",6,""],["8180","",6,"",4,"",4,"",5,""],["8240","",4,"",8,"",4,"",11],["8280","",10,"",4,"",7,"",5,"",8,"",20,"",4,"",6,""],["8340","",17,"",5,"",10,"",4,"",9,""],["8380","",5,"",13,"",28,"",4,"",4,"",5],["8440","",5,"",5,""],["8480","",9,"",4,"",6,"",6,"",9,"",5,"",10,"",7,""],["8540","",9,""],["8580","",4,"",6,"",4,"",4,"",7,""],["8640","",4,"",5,"",4,"",5,""],["8680","",4,"",4,"",5,"",6,"",8,"",4,"",4,"",4,""],["8740","",7,"",11,"",4,"",4],["8780","",7,"",6,"",14,"",10,"",6,"",12,"",8,"",5,"",6],["8840","",9,"",4,"",4,""],["8880","",4,"",6,"",8,"",6,"",7,"",4,"",4,"",7],["8940","",5,"",6,"",4,"",5,"",4,"",16,""],["8980","",4,"",4,"",7,"",17,"",10,"",13,"",5,"",7,"",4,""],["8a40","",4,"",12,""],["8a80","",5,"",6,"",4,"",11,"",6,"",4,"",4,"",9,"",5],["8b40","",8,"",17,"",6,"",13,""],["8b80","",4,"",4,"",5,"",4,"",4,"",22,"",11,"",25,"",7,"",6],["8c40","",7,""],["8c80","",8,"",4,"",6,"",6,"",6,"",4,"",4,"",4],["8d40","",5,"",5,"",5,"",6,"",9,"",4],["8d80","",5,"",4,"",4,"",4,"",7,"",7,"",10,"",10,"",12,"",21,""],["8e40","",21,"",12,"",6,"",12,""],["8e80","",4,"",7,"",4,"",4,"",5,"",6,"",4,"",14,"",4,"",4,"",6],["8f40","",5,"",11,"",8,""],["8f80","",6,"",14,"",5,"",5,"",4,""],["9040","",4,"",4,"",6,""],["9080","",7,"",4,"",4,"",4,"",4,"",18,"",6],["9140","",6,"",6,"",18,"",4,""],["9180","",6,"",8,"",9,"",5,"",4,"",4,"",16,"",13,"",8,"",5,"",4,""],["9240","",6,"",5,""],["9280","",5,"",7,"",6,""],["9340","",6,"",4,"",4,"",5,""],["9380","",5,"",4,"",6,"",4,"",7,"",9,"",6,"",8,"",4,"",6,""],["9440","",24,"",7,"",7,"",4,"",8],["9480","",4,"",4,"",14,"",7,"",7,""],["9540","",4,"",4,"",6,""],["9580","",4,"",4,"",8,"",4,"",4,"",25,"",7,"",5,""],["9640","",5,"",4,""],["9680","",7,"",9,"",7,"",4,"",6,"",6,"",5],["9740","",7,"",8,"",7,"",9,""],["9780","",6,"",5,"",4,"",9,"",4,"",11,"",7,"",16,""],["9840","",4,"",5,"",9,""],["9880","",7,"",5,"",11,"",9,"",9,"",11,"",5,"",5,"",6,"",4,"",7,"",6,""],["9940","",4,"",10,"",6,"",8,"",4,"",7,"",5],["9980","",114,"",6],["9a40","",11,"",7,"",13,""],["9a80","",4,"",7,"",7,"",6,"",4,"",4,"",7,"",6,"",4,"",4,""],["9b40","",4,""],["9b80","",5,"",4,"",4,"",5,""],["9c40","",7,""],["9c80","",7,"",7,"",10,"",14,"",4,"",6,"",5],["9d40","",7,"",4,"",9,"",6,""],["9d80","",9,"",5,"",6,"",12,"",4,"",10,"",5,"",5,"",6,"",10,""],["9e40","",7,"",32,"",7,"",6,"",6],["9e80","",9,"",17,"",13,"",11,"",12,"",12,""],["9f40","",6,"",10,"",4,"",10,"",7,""],["9f80","",13,"",12,"",4,"",4,"",5,"",4,"",4,"",6,"",5,"",8,"",9,"",4],["a040","",9,"",5,"",9,"",11,"",19],["a080","",9,"",6,"",4,"",11,"",11,"",6,""],["a1a1","",7,""],["a2a1","",9],["a2b1","",19,"",19,"",9],["a2e5","",9],["a2f1","",11],["a3a1","",88,""],["a4a1","",82],["a5a1","",85],["a6a1","",16,"",6],["a6c1","",16,"",6],["a6e0",""],["a6ee",""],["a6f4",""],["a7a1","",5,"",25],["a7d1","",5,"",25],["a840","",35,"",6],["a880","",7,""],["a8a1",""],["a8bd",""],["a8c0",""],["a8c5","",36],["a940","",8,""],["a959",""],["a95c",""],["a960","",9,"",8],["a980","",4,""],["a996",""],["a9a4","",75],["aa40","",5,"",5,"",8],["aa80","",7,"",10,""],["ab40","",11,"",4,"",5,"",4],["ab80","",6,"",4],["ac40","",10,"",8,"",5,"",4,"",11],["ac80","",6,"",12,"",4,""],["ad40","",10,"",7,"",15,"",12],["ad80","",9,"",8,"",6,""],["ae40","",6,"",7,"",4,""],["ae80","",7,"",6,"",4,""],["af40","",4,""],["af80",""],["b040","",6,"",5,"",4,"",6,"",7,""],["b080","",7,"",8,"",9,""],["b140","",4,"",7,"",10,""],["b180","",4,"",7,"",7,""],["b240","",11,"",5,"",11,"",4],["b280","",12,"",8,"",4,""],["b340","",5,""],["b380","",11,"",7,"",6,""],["b440","",7,"",9],["b480","",4,"",5,"",6,""],["b540","",5,"",9,"",4,"",14,"",4,"",8,""],["b580","",6,"",4,""],["b640","",6,"",11,"",10,"",4,"",5,""],["b680","",6,"",4,""],["b740","",14,"",5,"",9,"",4,"",16],["b780","",6,""],["b840","",4,"",10,"",10,"",9,"",5,""],["b880","",4,""],["b940","",5,"",10,"",6,""],["b980","",7,""],["ba40","",4,"",4,"",7,"",5,""],["ba80","",4,"",5,"",12,"",5,""],["bb40","",9,"",36,"",5,"",9],["bb80","",6,"",4,""],["bc40","",6,"",6,"",5,"",7,"",13,"",5],["bc80","",14,"",6,""],["bd40","",54,"",7],["bd80","",32,""],["be40","",12,"",6,"",42],["be80","",32,""],["bf40","",62],["bf80","",4,"",4,"",21,""],["c040","",35,"",23,""],["c080","",6,"",9,""],["c140","",4,"",7,"",4,"",4,"",6,""],["c180","",4,"",4,"",5,""],["c240","",6,"",5,""],["c280","",13,"",5,"",11,""],["c340","",5,"",4,"",6,""],["c380","",12,"",4,""],["c440","",5,"",4,"",4,"",5,"",4,""],["c480","",7,"",5,"",6,""],["c540","",14,"",4,"",5,"",4,"",5,""],["c580","",7,"",7,""],["c640",""],["c680","",4,"",9,""],["c740","",4,"",4,"",6,"",6,"",6,""],["c780",""],["c840","",4,"",5,"",5,"",7,"",5,"",7,""],["c880","",6,"",4,"",4,""],["c940","",4,"",7,"",12,""],["c980","",4,"",4,"",10,""],["ca40","",8,"",8,"",9,"",4,"",10],["ca80","",4,"",8,""],["cb40","",6,"",10,"",6,"",5,"",6,"",6,"",4,""],["cb80","",5,"",6,"",14,""],["cc40","",4,"",10,"",15,"",13,""],["cc80","",11,"",4,"",7,""],["cd40","",6,"",6,"",4,"",5,"",4,"",4,""],["cd80",""],["ce40","",6,"",5,"",7,""],["ce80","",4,"",6,"",4,""],["cf40","",4,"",4,"",6,"",9],["cf80","",5,"",7,"",4,""],["d040","",13,"",5,"",5,"",5,"",6,""],["d080","",4,"",4,"",5,""],["d140","",4,"",4,"",6,"",5],["d180","",4,"",4,"",4,""],["d240","",8,"",24,"",5,"",19,""],["d280","",26,""],["d340","",30,"",6],["d380","",4,"",5,"",21,""],["d440","",31,"",8,"",21],["d480","",25,"",6,""],["d540","",7,"",7,"",46],["d580","",32,""],["d640","",34,"",27],["d680","",30,""],["d740","",31,"",4,"",25],["d780","",24,""],["d840","",8,"",7,"",5,"",6,"",6,"",6,""],["d880","",6,"",20,""],["d940","",62],["d980","",32,""],["da40","",14,"",8,"",4,"",9,""],["da80","",12,""],["db40","",6,"",7,"",4,""],["db80","",4,"",5,"",11,""],["dc40","",4,"",6,"",6,"",11,"",6,"",7],["dc80","",10,"",21,""],["dd40","",62],["dd80","",32,""],["de40","",32,""],["de80","",4,""],["df40","",5,"",4,"",4,"",5,"",4,"",6,""],["df80","",4,""],["e040","",19,""],["e080","",10,"",6,"",8,""],["e140","",4,"",6,"",5,"",5,""],["e180","",10,"",9,"",8,""],["e240","",62],["e280","",32,"",5,""],["e340","",45,"",16],["e380","",7,"",24,""],["e440","",5,"",24,"",31],["e480","",32,""],["e540","",51,"",10],["e580","",31,""],["e640","",34,"",27],["e680","",29,""],["e740","",7,"",54],["e780","",32,"",6,"",4,""],["e840","",14,"",43,""],["e880","",20,""],["e940","",7,"",42],["e980","",32,""],["ea40","",27,"",6,""],["ea80","",4,"",12,""],["eb40","",9,"",7,"",9,"",6,""],["eb80","",4,""],["ec40","",8,"",4,"",18,"",7],["ec80","",4,"",7,"",4,"",4,""],["ed40","",6,"",46],["ed80","",4,"",23,""],["ee40","",62],["ee80","",32,"",4,"",6,""],["ef40","",5,"",37,"",4],["ef80","",30,"",4,"",8,""],["f040","",4,"",28,"",26],["f080","",9,"",12,"",4,"",6,""],["f140","",10,"",47],["f180","",32,""],["f240","",62],["f280","",32,""],["f340","",17,"",6,"",4,""],["f380","",8,"",6,""],["f440","",5,"",10,"",10,"",7,"",5],["f480","",32,""],["f540","",62],["f580","",32,""],["f640","",62],["f680","",32,"",5,"",5,"",4,"",7,""],["f740","",62],["f780","",4,"",4,""],["f840","",62],["f880","",32],["f940","",62],["f980","",32],["fa40","",62],["fa80","",32],["fb40","",27,"",9,""],["fb80","",5,"",8,"",5,""],["fc40","",8,"",4,"",8,"",6],["fc80","",4,"",5,"",8,""],["fd40","",4,"",4,"",10,"",38],["fd80","",5,"",11,"",4,""],["fe40",""]];},628:function(module,exports,__webpack_require__){"use strict";__webpack_require__(4445);const forge=__webpack_require__(7938);const pki=forge.pki;exports=module.exports;exports.certificateForKey=(key,privateKey,callback)=>{const publicKey=pki.setRsaPublicKey(privateKey.n,privateKey.e);const cert=pki.createCertificate();cert.publicKey=publicKey;cert.serialNumber='01';cert.validity.notBefore=new Date();cert.validity.notAfter=new Date();cert.validity.notAfter.setFullYear(cert.validity.notBefore.getFullYear()+10);const attrs=[{name:'organizationName',value:'ipfs'},{shortName:'OU',value:'keystore'},{name:'commonName',value:key.id}];cert.setSubject(attrs);cert.setIssuer(attrs);cert.setExtensions([{name:'basicConstraints',cA:true},{name:'keyUsage',keyCertSign:true,digitalSignature:true,nonRepudiation:true,keyEncipherment:true,dataEncipherment:true},{name:'extKeyUsage',serverAuth:true,clientAuth:true,codeSigning:true,emailProtection:true,timeStamping:true},{name:'nsCertType',client:true,server:true,email:true,objsign:true,sslCA:true,emailCA:true,objCA:true}]);cert.sign(privateKey);return callback(null,cert);};},629:function(module,__unusedexports,__webpack_require__){const bscript=__webpack_require__(5099);const OPS=__webpack_require__(9710);function check(script){const buffer=bscript.compile(script);return buffer.length===25&&buffer[0]===OPS.OP_DUP&&buffer[1]===OPS.OP_HASH160&&buffer[2]===0x14&&buffer[23]===OPS.OP_EQUALVERIFY&&buffer[24]===OPS.OP_CHECKSIG;}check.toJSON=function(){return'pubKeyHash output';};module.exports={check};},633:function(module){module.exports=require("dgram");},636:function(module,__unusedexports,__webpack_require__){"use strict";const map=__webpack_require__(569);const EventEmitter=__webpack_require__(4859);module.exports=swtch=>{const observer=Object.assign(new EventEmitter(),{incoming:observe('in'),outgoing:observe('out')});swtch.on('peer-mux-established',peerInfo=>{observer.emit('peer:connected',peerInfo.id.toB58String());});swtch.on('peer-mux-closed',peerInfo=>{observer.emit('peer:closed',peerInfo.id.toB58String());});return observer;function observe(direction){return(transport,protocol,peerInfo)=>{return map(buffer=>{willObserve(peerInfo,transport,protocol,direction,buffer.length);return buffer;});};}function willObserve(peerInfo,transport,protocol,direction,bufferLength){peerInfo.then(_peerInfo=>{if(_peerInfo){const peerId=_peerInfo.id.toB58String();observer.emit('message',peerId,transport,protocol,direction,bufferLength);}});}};},641:function(module,__unusedexports,__webpack_require__){const Buffer=__webpack_require__(7572).Buffer;function decode(buffer,maxLength,minimal){maxLength=maxLength||4;minimal=minimal===undefined?true:minimal;const length=buffer.length;if(length===0)return 0;if(length>maxLength)throw new TypeError('Script number overflow');if(minimal){if((buffer[length-1]&0x7f)===0){if(length<=1||(buffer[length-2]&0x80)===0)throw new Error('Non-minimally encoded script number');}}if(length===5){const a=buffer.readUInt32LE(0);const b=buffer.readUInt8(4);if(b&0x80)return-((b&~0x80)*0x100000000+a);return b*0x100000000+a;}let result=0;for(var i=0;i<length;++i){result|=buffer[i]<<8*i;}if(buffer[length-1]&0x80)return-(result&~(0x80<<8*(length-1)));return result;}function scriptNumSize(i){return i>0x7fffffff?5:i>0x7fffff?4:i>0x7fff?3:i>0x7f?2:i>0x00?1:0;}function encode(number){let value=Math.abs(number);const size=scriptNumSize(value);const buffer=Buffer.allocUnsafe(size);const negative=number<0;for(var i=0;i<size;++i){buffer.writeUInt8(value&0xff,i);value>>=8;}if(buffer[size-1]&0x80){buffer.writeUInt8(negative?0x80:0x00,size-1);}else if(negative){buffer[size-1]|=0x80;}return buffer;}module.exports={decode:decode,encode:encode};},646:function(module,__unusedexports,__webpack_require__){var OPS=__webpack_require__(9710);function encodingLength(i){return i<OPS.OP_PUSHDATA1?1:i<=0xff?2:i<=0xffff?3:5;}function encode(buffer,number,offset){var size=encodingLength(number);if(size===1){buffer.writeUInt8(number,offset);}else if(size===2){buffer.writeUInt8(OPS.OP_PUSHDATA1,offset);buffer.writeUInt8(number,offset+1);}else if(size===3){buffer.writeUInt8(OPS.OP_PUSHDATA2,offset);buffer.writeUInt16LE(number,offset+1);}else{buffer.writeUInt8(OPS.OP_PUSHDATA4,offset);buffer.writeUInt32LE(number,offset+1);}return size;}function decode(buffer,offset){var opcode=buffer.readUInt8(offset);var number,size;if(opcode<OPS.OP_PUSHDATA1){number=opcode;size=1;}else if(opcode===OPS.OP_PUSHDATA1){if(offset+2>buffer.length)return null;number=buffer.readUInt8(offset+1);size=2;}else if(opcode===OPS.OP_PUSHDATA2){if(offset+3>buffer.length)return null;number=buffer.readUInt16LE(offset+1);size=3;}else{if(offset+5>buffer.length)return null;if(opcode!==OPS.OP_PUSHDATA4)throw new Error('Unexpected opcode');number=buffer.readUInt32LE(offset+1);size=5;}return{opcode:opcode,number:number,size:size};}module.exports={encodingLength:encodingLength,encode:encode,decode:decode};},649:function(module){module.exports=require("util");},652:function(module,__unusedexports,__webpack_require__){"use strict";var BN=__webpack_require__(5584);var elliptic=__webpack_require__(3459);var utils=elliptic.utils;var assert=utils.assert;function KeyPair(ec,options){this.ec=ec;this.priv=null;this.pub=null;if(options.priv)this._importPrivate(options.priv,options.privEnc);if(options.pub)this._importPublic(options.pub,options.pubEnc);}module.exports=KeyPair;KeyPair.fromPublic=function fromPublic(ec,pub,enc){if(pub instanceof KeyPair)return pub;return new KeyPair(ec,{pub:pub,pubEnc:enc});};KeyPair.fromPrivate=function fromPrivate(ec,priv,enc){if(priv instanceof KeyPair)return priv;return new KeyPair(ec,{priv:priv,privEnc:enc});};KeyPair.prototype.validate=function validate(){var pub=this.getPublic();if(pub.isInfinity())return{result:false,reason:'Invalid public key'};if(!pub.validate())return{result:false,reason:'Public key is not a point'};if(!pub.mul(this.ec.curve.n).isInfinity())return{result:false,reason:'Public key * N != O'};return{result:true,reason:null};};KeyPair.prototype.getPublic=function getPublic(compact,enc){if(typeof compact==='string'){enc=compact;compact=null;}if(!this.pub)this.pub=this.ec.g.mul(this.priv);if(!enc)return this.pub;return this.pub.encode(enc,compact);};KeyPair.prototype.getPrivate=function getPrivate(enc){if(enc==='hex')return this.priv.toString(16,2);else return this.priv;};KeyPair.prototype._importPrivate=function _importPrivate(key,enc){this.priv=new BN(key,enc||16);this.priv=this.priv.umod(this.ec.curve.n);};KeyPair.prototype._importPublic=function _importPublic(key,enc){if(key.x||key.y){if(this.ec.curve.type==='mont'){assert(key.x,'Need x coordinate');}else if(this.ec.curve.type==='short'||this.ec.curve.type==='edwards'){assert(key.x&&key.y,'Need both x and y coordinate');}this.pub=this.ec.curve.point(key.x,key.y);return;}this.pub=this.ec.curve.decodePoint(key,enc);};KeyPair.prototype.derive=function derive(pub){return pub.mul(this.priv).getX();};KeyPair.prototype.sign=function sign(msg,enc,options){return this.ec.sign(msg,this,enc,options);};KeyPair.prototype.verify=function verify(msg,signature){return this.ec.verify(msg,signature,this);};KeyPair.prototype.inspect=function inspect(){return'<Key priv: '+(this.priv&&this.priv.toString(16,2))+' pub: '+(this.pub&&this.pub.inspect())+' >';};},654:function(module){module.exports=function(sch){var noComments=function(line){var i=line.indexOf('//');return i>-1?line.slice(0,i):line;};var noMultilineComments=function(){var inside=false;return function(token){if(token==='/*'){inside=true;return false;}if(token==='*/'){inside=false;return false;}return!inside;};};var trim=function(line){return line.trim();};return sch.replace(/([;,{}()=:[\]<>]|\/\*|\*\/)/g,' $1 ').split(/\n/).map(trim).filter(Boolean).map(noComments).map(trim).filter(Boolean).join('\n').split(/\s+|\n+/gm).filter(noMultilineComments());};},657:function(module,__unusedexports,__webpack_require__){"use strict";const EventEmitter=__webpack_require__(4859);const crypto=__webpack_require__(2984);const https=__webpack_require__(2307);const http=__webpack_require__(3853);const net=__webpack_require__(1939);const tls=__webpack_require__(8060);const url=__webpack_require__(774);const PerMessageDeflate=__webpack_require__(8904);const EventTarget=__webpack_require__(2807);const extension=__webpack_require__(6788);const constants=__webpack_require__(6198);const Receiver=__webpack_require__(2274);const Sender=__webpack_require__(5237);const readyStates=['CONNECTING','OPEN','CLOSING','CLOSED'];const kWebSocket=constants.kWebSocket;const protocolVersions=[8,13];const closeTimeout=30*1000;class WebSocket extends EventEmitter{constructor(address,protocols,options){super();this.readyState=WebSocket.CONNECTING;this.protocol='';this._binaryType=constants.BINARY_TYPES[0];this._closeFrameReceived=false;this._closeFrameSent=false;this._closeMessage='';this._closeTimer=null;this._closeCode=1006;this._extensions={};this._isServer=true;this._receiver=null;this._sender=null;this._socket=null;if(address!==null){if(Array.isArray(protocols)){protocols=protocols.join(', ');}else if(typeof protocols==='object'&&protocols!==null){options=protocols;protocols=undefined;}initAsClient.call(this,address,protocols,options);}}get CONNECTING(){return WebSocket.CONNECTING;}get CLOSING(){return WebSocket.CLOSING;}get CLOSED(){return WebSocket.CLOSED;}get OPEN(){return WebSocket.OPEN;}get binaryType(){return this._binaryType;}set binaryType(type){if(!constants.BINARY_TYPES.includes(type))return;this._binaryType=type;if(this._receiver)this._receiver._binaryType=type;}get bufferedAmount(){if(!this._socket)return 0;return(this._socket.bufferSize||0)+this._sender._bufferedBytes;}get extensions(){return Object.keys(this._extensions).join();}setSocket(socket,head,maxPayload){const receiver=new Receiver(this._binaryType,this._extensions,maxPayload);this._sender=new Sender(socket,this._extensions);this._receiver=receiver;this._socket=socket;receiver[kWebSocket]=this;socket[kWebSocket]=this;receiver.on('conclude',receiverOnConclude);receiver.on('drain',receiverOnDrain);receiver.on('error',receiverOnError);receiver.on('message',receiverOnMessage);receiver.on('ping',receiverOnPing);receiver.on('pong',receiverOnPong);socket.setTimeout(0);socket.setNoDelay();if(head.length>0)socket.unshift(head);socket.on('close',socketOnClose);socket.on('data',socketOnData);socket.on('end',socketOnEnd);socket.on('error',socketOnError);this.readyState=WebSocket.OPEN;this.emit('open');}emitClose(){this.readyState=WebSocket.CLOSED;if(!this._socket){this.emit('close',this._closeCode,this._closeMessage);return;}if(this._extensions[PerMessageDeflate.extensionName]){this._extensions[PerMessageDeflate.extensionName].cleanup();}this._receiver.removeAllListeners();this.emit('close',this._closeCode,this._closeMessage);}close(code,data){if(this.readyState===WebSocket.CLOSED)return;if(this.readyState===WebSocket.CONNECTING){const msg='WebSocket was closed before the connection was established';return abortHandshake(this,this._req,msg);}if(this.readyState===WebSocket.CLOSING){if(this._closeFrameSent&&this._closeFrameReceived)this._socket.end();return;}this.readyState=WebSocket.CLOSING;this._sender.close(code,data,!this._isServer,err=>{if(err)return;this._closeFrameSent=true;if(this._socket.writable){if(this._closeFrameReceived)this._socket.end();this._closeTimer=setTimeout(this._socket.destroy.bind(this._socket),closeTimeout);}});}ping(data,mask,cb){if(typeof data==='function'){cb=data;data=mask=undefined;}else if(typeof mask==='function'){cb=mask;mask=undefined;}if(this.readyState!==WebSocket.OPEN){const err=new Error(`WebSocket is not open: readyState ${this.readyState} `+`(${readyStates[this.readyState]})`);if(cb)return cb(err);throw err;}if(typeof data==='number')data=data.toString();if(mask===undefined)mask=!this._isServer;this._sender.ping(data||constants.EMPTY_BUFFER,mask,cb);}pong(data,mask,cb){if(typeof data==='function'){cb=data;data=mask=undefined;}else if(typeof mask==='function'){cb=mask;mask=undefined;}if(this.readyState!==WebSocket.OPEN){const err=new Error(`WebSocket is not open: readyState ${this.readyState} `+`(${readyStates[this.readyState]})`);if(cb)return cb(err);throw err;}if(typeof data==='number')data=data.toString();if(mask===undefined)mask=!this._isServer;this._sender.pong(data||constants.EMPTY_BUFFER,mask,cb);}send(data,options,cb){if(typeof options==='function'){cb=options;options={};}if(this.readyState!==WebSocket.OPEN){const err=new Error(`WebSocket is not open: readyState ${this.readyState} `+`(${readyStates[this.readyState]})`);if(cb)return cb(err);throw err;}if(typeof data==='number')data=data.toString();const opts=Object.assign({binary:typeof data!=='string',mask:!this._isServer,compress:true,fin:true},options);if(!this._extensions[PerMessageDeflate.extensionName]){opts.compress=false;}this._sender.send(data||constants.EMPTY_BUFFER,opts,cb);}terminate(){if(this.readyState===WebSocket.CLOSED)return;if(this.readyState===WebSocket.CONNECTING){const msg='WebSocket was closed before the connection was established';return abortHandshake(this,this._req,msg);}if(this._socket){this.readyState=WebSocket.CLOSING;this._socket.destroy();}}}readyStates.forEach((readyState,i)=>{WebSocket[readyState]=i;});['open','error','close','message'].forEach(method=>{Object.defineProperty(WebSocket.prototype,`on${method}`,{get(){const listeners=this.listeners(method);for(var i=0;i<listeners.length;i++){if(listeners[i]._listener)return listeners[i]._listener;}return undefined;},set(listener){const listeners=this.listeners(method);for(var i=0;i<listeners.length;i++){if(listeners[i]._listener)this.removeListener(method,listeners[i]);}this.addEventListener(method,listener);}});});WebSocket.prototype.addEventListener=EventTarget.addEventListener;WebSocket.prototype.removeEventListener=EventTarget.removeEventListener;module.exports=WebSocket;function initAsClient(address,protocols,options){options=Object.assign({protocolVersion:protocolVersions[1],perMessageDeflate:true,maxPayload:100*1024*1024},options,{createConnection:undefined,socketPath:undefined,hostname:undefined,protocol:undefined,timeout:undefined,method:undefined,auth:undefined,host:undefined,path:undefined,port:undefined});if(!protocolVersions.includes(options.protocolVersion)){throw new RangeError(`Unsupported protocol version: ${options.protocolVersion} `+`(supported versions: ${protocolVersions.join(', ')})`);}this._isServer=false;var parsedUrl;if(typeof address==='object'&&address.href!==undefined){parsedUrl=address;this.url=address.href;}else{parsedUrl=url.URL?new url.URL(address):url.parse(address);this.url=address;}const isUnixSocket=parsedUrl.protocol==='ws+unix:';if(!parsedUrl.host&&(!isUnixSocket||!parsedUrl.pathname)){throw new Error(`Invalid URL: ${this.url}`);}const isSecure=parsedUrl.protocol==='wss:'||parsedUrl.protocol==='https:';const defaultPort=isSecure?443:80;const key=crypto.randomBytes(16).toString('base64');const httpObj=isSecure?https:http;const path=parsedUrl.search?`${parsedUrl.pathname||'/'}${parsedUrl.search}`:parsedUrl.pathname||'/';var perMessageDeflate;options.createConnection=isSecure?tlsConnect:netConnect;options.defaultPort=options.defaultPort||defaultPort;options.port=parsedUrl.port||defaultPort;options.host=parsedUrl.hostname.startsWith('[')?parsedUrl.hostname.slice(1,-1):parsedUrl.hostname;options.headers=Object.assign({'Sec-WebSocket-Version':options.protocolVersion,'Sec-WebSocket-Key':key,Connection:'Upgrade',Upgrade:'websocket'},options.headers);options.path=path;options.timeout=options.handshakeTimeout;if(options.perMessageDeflate){perMessageDeflate=new PerMessageDeflate(options.perMessageDeflate!==true?options.perMessageDeflate:{},false,options.maxPayload);options.headers['Sec-WebSocket-Extensions']=extension.format({[PerMessageDeflate.extensionName]:perMessageDeflate.offer()});}if(protocols){options.headers['Sec-WebSocket-Protocol']=protocols;}if(options.origin){if(options.protocolVersion<13){options.headers['Sec-WebSocket-Origin']=options.origin;}else{options.headers.Origin=options.origin;}}if(parsedUrl.auth){options.auth=parsedUrl.auth;}else if(parsedUrl.username||parsedUrl.password){options.auth=`${parsedUrl.username}:${parsedUrl.password}`;}if(isUnixSocket){const parts=path.split(':');options.socketPath=parts[0];options.path=parts[1];}var req=this._req=httpObj.get(options);if(options.handshakeTimeout){req.on('timeout',()=>{abortHandshake(this,req,'Opening handshake has timed out');});}req.on('error',err=>{if(this._req.aborted)return;req=this._req=null;this.readyState=WebSocket.CLOSING;this.emit('error',err);this.emitClose();});req.on('response',res=>{if(this.emit('unexpected-response',req,res))return;abortHandshake(this,req,`Unexpected server response: ${res.statusCode}`);});req.on('upgrade',(res,socket,head)=>{this.emit('upgrade',res);if(this.readyState!==WebSocket.CONNECTING)return;req=this._req=null;const digest=crypto.createHash('sha1').update(key+constants.GUID,'binary').digest('base64');if(res.headers['sec-websocket-accept']!==digest){abortHandshake(this,socket,'Invalid Sec-WebSocket-Accept header');return;}const serverProt=res.headers['sec-websocket-protocol'];const protList=(protocols||'').split(/, */);var protError;if(!protocols&&serverProt){protError='Server sent a subprotocol but none was requested';}else if(protocols&&!serverProt){protError='Server sent no subprotocol';}else if(serverProt&&!protList.includes(serverProt)){protError='Server sent an invalid subprotocol';}if(protError){abortHandshake(this,socket,protError);return;}if(serverProt)this.protocol=serverProt;if(perMessageDeflate){try{const extensions=extension.parse(res.headers['sec-websocket-extensions']);if(extensions[PerMessageDeflate.extensionName]){perMessageDeflate.accept(extensions[PerMessageDeflate.extensionName]);this._extensions[PerMessageDeflate.extensionName]=perMessageDeflate;}}catch(err){abortHandshake(this,socket,'Invalid Sec-WebSocket-Extensions header');return;}}this.setSocket(socket,head,options.maxPayload);});}function netConnect(options){if(options.protocolVersion)options.path=options.socketPath;return net.connect(options);}function tlsConnect(options){options.path=undefined;options.servername=options.servername||options.host;return tls.connect(options);}function abortHandshake(websocket,stream,message){websocket.readyState=WebSocket.CLOSING;const err=new Error(message);Error.captureStackTrace(err,abortHandshake);if(stream.setHeader){stream.abort();stream.once('abort',websocket.emitClose.bind(websocket));websocket.emit('error',err);}else{stream.destroy(err);stream.once('error',websocket.emit.bind(websocket,'error'));stream.once('close',websocket.emitClose.bind(websocket));}}function receiverOnConclude(code,reason){const websocket=this[kWebSocket];websocket._socket.removeListener('data',socketOnData);websocket._socket.resume();websocket._closeFrameReceived=true;websocket._closeMessage=reason;websocket._closeCode=code;if(code===1005)websocket.close();else websocket.close(code,reason);}function receiverOnDrain(){this[kWebSocket]._socket.resume();}function receiverOnError(err){const websocket=this[kWebSocket];websocket._socket.removeListener('data',socketOnData);websocket.readyState=WebSocket.CLOSING;websocket._closeCode=err[constants.kStatusCode];websocket.emit('error',err);websocket._socket.destroy();}function receiverOnFinish(){this[kWebSocket].emitClose();}function receiverOnMessage(data){this[kWebSocket].emit('message',data);}function receiverOnPing(data){const websocket=this[kWebSocket];websocket.pong(data,!websocket._isServer,constants.NOOP);websocket.emit('ping',data);}function receiverOnPong(data){this[kWebSocket].emit('pong',data);}function socketOnClose(){const websocket=this[kWebSocket];this.removeListener('close',socketOnClose);this.removeListener('end',socketOnEnd);websocket.readyState=WebSocket.CLOSING;websocket._socket.read();websocket._receiver.end();this.removeListener('data',socketOnData);this[kWebSocket]=undefined;clearTimeout(websocket._closeTimer);if(websocket._receiver._writableState.finished||websocket._receiver._writableState.errorEmitted){websocket.emitClose();}else{websocket._receiver.on('error',receiverOnFinish);websocket._receiver.on('finish',receiverOnFinish);}}function socketOnData(chunk){if(!this[kWebSocket]._receiver.write(chunk)){this.pause();}}function socketOnEnd(){const websocket=this[kWebSocket];websocket.readyState=WebSocket.CLOSING;websocket._receiver.end();this.end();}function socketOnError(){const websocket=this[kWebSocket];this.removeListener('error',socketOnError);this.on('error',constants.NOOP);if(websocket){websocket.readyState=WebSocket.CLOSING;this.destroy();}}},662:function(module){module.exports=require("fs");},668:function(module,__unusedexports,__webpack_require__){"use strict";const{sortBy}=__webpack_require__(8047);const Entry=__webpack_require__(153);class Wantlist{constructor(stats){this.set=new Map();this._stats=stats;}get length(){return this.set.size;}add(cid,priority){const cidStr=cid.buffer.toString();const entry=this.set.get(cidStr);if(entry){entry.inc();entry.priority=priority;}else{this.set.set(cidStr,new Entry(cid,priority));if(this._stats){this._stats.push(null,'wantListSize',1);}}}remove(cid){const cidStr=cid.buffer.toString();const entry=this.set.get(cidStr);if(!entry){return;}entry.dec();if(entry.hasRefs()){return;}this.set.delete(cidStr);if(this._stats){this._stats.push(null,'wantListSize',-1);}}removeForce(cidStr){if(this.set.has(cidStr)){this.set.delete(cidStr);}}forEach(fn){return this.set.forEach(fn);}entries(){return this.set.entries();}sortedEntries(){return new Map(sortBy(o=>o[1].key,Array.from(this.set.entries())));}contains(cid){const cidStr=cid.buffer.toString();return this.set.get(cidStr);}}Wantlist.Entry=Entry;module.exports=Wantlist;},677:function(module,__unusedexports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}var Buffer=__webpack_require__(7572).Buffer;var util=__webpack_require__(649);function copyBuffer(src,target,offset){src.copy(target,offset);}module.exports=function(){function BufferList(){_classCallCheck(this,BufferList);this.head=null;this.tail=null;this.length=0;}BufferList.prototype.push=function push(v){var entry={data:v,next:null};if(this.length>0)this.tail.next=entry;else this.head=entry;this.tail=entry;++this.length;};BufferList.prototype.unshift=function unshift(v){var entry={data:v,next:this.head};if(this.length===0)this.tail=entry;this.head=entry;++this.length;};BufferList.prototype.shift=function shift(){if(this.length===0)return;var ret=this.head.data;if(this.length===1)this.head=this.tail=null;else this.head=this.head.next;--this.length;return ret;};BufferList.prototype.clear=function clear(){this.head=this.tail=null;this.length=0;};BufferList.prototype.join=function join(s){if(this.length===0)return'';var p=this.head;var ret=''+p.data;while(p=p.next){ret+=s+p.data;}return ret;};BufferList.prototype.concat=function concat(n){if(this.length===0)return Buffer.alloc(0);if(this.length===1)return this.head.data;var ret=Buffer.allocUnsafe(n>>>0);var p=this.head;var i=0;while(p){copyBuffer(p.data,ret,i);i+=p.data.length;p=p.next;}return ret;};return BufferList;}();if(util&&util.inspect&&util.inspect.custom){module.exports.prototype[util.inspect.custom]=function(){var obj=util.inspect({length:this.length});return this.constructor.name+' '+obj;};}},705:function(module){function baseProperty(key){return function(object){return object==null?undefined:object[key];};}module.exports=baseProperty;},708:function(module,__unusedexports,__webpack_require__){"use strict";var tester=__webpack_require__(1373);module.exports=function filter(test){test=tester(test);return function(read){return function next(end,cb){var sync,loop=true;while(loop){loop=false;sync=true;read(end,function(end,data){if(!end&&!test(data))return sync?loop=true:next(end,cb);cb(end,data);});sync=false;}};};};},720:function(module,__unusedexports,__webpack_require__){var assocIndexOf=__webpack_require__(4292);function listCacheSet(key,value){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){++this.size;data.push([key,value]);}else{data[index][1]=value;}return this;}module.exports=listCacheSet;},727:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=reduce;var _eachOfSeries=__webpack_require__(5643);var _eachOfSeries2=_interopRequireDefault(_eachOfSeries);var _noop=__webpack_require__(5811);var _noop2=_interopRequireDefault(_noop);var _once=__webpack_require__(3925);var _once2=_interopRequireDefault(_once);var _wrapAsync=__webpack_require__(9396);var _wrapAsync2=_interopRequireDefault(_wrapAsync);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function reduce(coll,memo,iteratee,callback){callback=(0,_once2.default)(callback||_noop2.default);var _iteratee=(0,_wrapAsync2.default)(iteratee);(0,_eachOfSeries2.default)(coll,function(x,i,callback){_iteratee(memo,x,function(err,v){memo=v;callback(err);});},function(err){callback(err,memo);});}module.exports=exports['default'];},728:function(module,__unusedexports,__webpack_require__){"use strict";var BufferWriter=__webpack_require__(2418);var BufferReader=__webpack_require__(412);var BN=__webpack_require__(6122);var Varint=function Varint(buf){if(!(this instanceof Varint))return new Varint(buf);if(Buffer.isBuffer(buf)){this.buf=buf;}else if(typeof buf==='number'){var num=buf;this.fromNumber(num);}else if(buf instanceof BN){var bn=buf;this.fromBN(bn);}else if(buf){var obj=buf;this.set(obj);}};Varint.prototype.set=function(obj){this.buf=obj.buf||this.buf;return this;};Varint.prototype.fromString=function(str){this.set({buf:new Buffer(str,'hex')});return this;};Varint.prototype.toString=function(){return this.buf.toString('hex');};Varint.prototype.fromBuffer=function(buf){this.buf=buf;return this;};Varint.prototype.fromBufferReader=function(br){this.buf=br.readVarintBuf();return this;};Varint.prototype.fromBN=function(bn){this.buf=BufferWriter().writeVarintBN(bn).concat();return this;};Varint.prototype.fromNumber=function(num){this.buf=BufferWriter().writeVarintNum(num).concat();return this;};Varint.prototype.toBuffer=function(){return this.buf;};Varint.prototype.toBN=function(){return BufferReader(this.buf).readVarintBN();};Varint.prototype.toNumber=function(){return BufferReader(this.buf).readVarintNum();};module.exports=Varint;},742:function(module,__unusedexports,__webpack_require__){"use strict";const setImmediate=__webpack_require__(7368);const series=__webpack_require__(7644);const detect=__webpack_require__(1066);const waterfall=__webpack_require__(4265);__webpack_require__(9024);__webpack_require__(9457);const forge=__webpack_require__(7938);const util=__webpack_require__(628);class CMS{constructor(keychain){if(!keychain){throw new Error('keychain is required');}this.keychain=keychain;}encrypt(name,plain,callback){const self=this;const done=(err,result)=>setImmediate(()=>callback(err,result));if(!Buffer.isBuffer(plain)){return done(new Error('Plain data must be a Buffer'));}series([cb=>self.keychain.findKeyByName(name,cb),cb=>self.keychain._getPrivateKey(name,cb)],(err,results)=>{if(err)return done(err);let key=results[0];let pem=results[1];try{const privateKey=forge.pki.decryptRsaPrivateKey(pem,self.keychain._());util.certificateForKey(key,privateKey,(err,certificate)=>{if(err)return callback(err);const p7=forge.pkcs7.createEnvelopedData();p7.addRecipient(certificate);p7.content=forge.util.createBuffer(plain);p7.encrypt();const der=forge.asn1.toDer(p7.toAsn1()).getBytes();done(null,Buffer.from(der,'binary'));});}catch(err){done(err);}});}decrypt(cmsData,callback){const done=(err,result)=>setImmediate(()=>callback(err,result));if(!Buffer.isBuffer(cmsData)){return done(new Error('CMS data is required'));}const self=this;let cms;try{const buf=forge.util.createBuffer(cmsData.toString('binary'));const obj=forge.asn1.fromDer(buf);cms=forge.pkcs7.messageFromAsn1(obj);}catch(err){return done(new Error('Invalid CMS: '+err.message));}const recipients=cms.recipients.filter(r=>r.issuer.find(a=>a.shortName==='O'&&a.value==='ipfs')).filter(r=>r.issuer.find(a=>a.shortName==='CN')).map(r=>{return{recipient:r,keyId:r.issuer.find(a=>a.shortName==='CN').value};});detect(recipients,(r,cb)=>self.keychain.findKeyById(r.keyId,(err,info)=>cb(null,!err&&info)),(err,r)=>{if(err)return done(err);if(!r){const missingKeys=recipients.map(r=>r.keyId);err=new Error('Decryption needs one of the key(s): '+missingKeys.join(', '));err.missingKeys=missingKeys;return done(err);}waterfall([cb=>self.keychain.findKeyById(r.keyId,cb),(key,cb)=>self.keychain._getPrivateKey(key.name,cb)],(err,pem)=>{if(err)return done(err);const privateKey=forge.pki.decryptRsaPrivateKey(pem,self.keychain._());cms.decrypt(r.recipient,privateKey);done(null,Buffer.from(cms.content.getBytes(),'binary'));});});}}module.exports=CMS;},746:function(module,__unusedexports,__webpack_require__){if(typeof process==='undefined'||process.type==='renderer'||process.browser===true||process.__nwjs){module.exports=__webpack_require__(9960);}else{module.exports=__webpack_require__(8451);}},751:function(module,__unusedexports,__webpack_require__){"use strict";var abortCb=__webpack_require__(4379);module.exports=function once(value,onAbort){return function(abort,cb){if(abort)return abortCb(cb,abort,onAbort);if(value!=null){var _value=value;value=null;cb(null,_value);}else cb(true);};};},757:function(module,exports,__webpack_require__){var tty=__webpack_require__(8859);var util=__webpack_require__(649);exports=module.exports=__webpack_require__(5721);exports.init=init;exports.log=log;exports.formatArgs=formatArgs;exports.save=save;exports.load=load;exports.useColors=useColors;exports.colors=[6,2,3,4,5,1];try{var supportsColor=__webpack_require__(8443);if(supportsColor&&supportsColor.level>=2){exports.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221];}}catch(err){}exports.inspectOpts=Object.keys(process.env).filter(function(key){return /^debug_/i.test(key);}).reduce(function(obj,key){var prop=key.substring(6).toLowerCase().replace(/_([a-z])/g,function(_,k){return k.toUpperCase();});var val=process.env[key];if(/^(yes|on|true|enabled)$/i.test(val))val=true;else if(/^(no|off|false|disabled)$/i.test(val))val=false;else if(val==='null')val=null;else val=Number(val);obj[prop]=val;return obj;},{});function useColors(){return'colors'in exports.inspectOpts?Boolean(exports.inspectOpts.colors):tty.isatty(process.stderr.fd);}exports.formatters.o=function(v){this.inspectOpts.colors=this.useColors;return util.inspect(v,this.inspectOpts).split('\n').map(function(str){return str.trim();}).join(' ');};exports.formatters.O=function(v){this.inspectOpts.colors=this.useColors;return util.inspect(v,this.inspectOpts);};function formatArgs(args){var name=this.namespace;var useColors=this.useColors;if(useColors){var c=this.color;var colorCode='\u001b[3'+(c<8?c:'8;5;'+c);var prefix='  '+colorCode+';1m'+name+' '+'\u001b[0m';args[0]=prefix+args[0].split('\n').join('\n'+prefix);args.push(colorCode+'m+'+exports.humanize(this.diff)+'\u001b[0m');}else{args[0]=getDate()+name+' '+args[0];}}function getDate(){if(exports.inspectOpts.hideDate){return'';}else{return new Date().toISOString()+' ';}}function log(){return process.stderr.write(util.format.apply(util,arguments)+'\n');}function save(namespaces){if(null==namespaces){delete process.env.DEBUG;}else{process.env.DEBUG=namespaces;}}function load(){return process.env.DEBUG;}function init(debug){debug.inspectOpts={};var keys=Object.keys(exports.inspectOpts);for(var i=0;i<keys.length;i++){debug.inspectOpts[keys[i]]=exports.inspectOpts[keys[i]];}}exports.enable(load());},759:function(__unusedmodule,exports,__webpack_require__){"use strict";const Key=__webpack_require__(7761);const MemoryDatastore=__webpack_require__(7201);const utils=__webpack_require__(4035);const Errors=__webpack_require__(1860);exports.Key=Key;exports.MemoryDatastore=MemoryDatastore;exports.utils=utils;exports.Errors=Errors;},764:function(module,__unusedexports,__webpack_require__){"use strict";const multiaddr=__webpack_require__(3187);const Address6=__webpack_require__(7293).Address6;const debug=__webpack_require__(3116);const log=debug('libp2p:tcp:get-multiaddr');module.exports=socket=>{let ma;try{if(socket.remoteFamily==='IPv6'){const addr=new Address6(socket.remoteAddress);if(addr.v4){const ip4=addr.to4().correctForm();ma=multiaddr('/ip4/'+ip4+'/tcp/'+socket.remotePort);}else{ma=multiaddr('/ip6/'+socket.remoteAddress+'/tcp/'+socket.remotePort);}}else{ma=multiaddr('/ip4/'+socket.remoteAddress+'/tcp/'+socket.remotePort);}}catch(err){log(err);}return ma;};},769:function(module){"use strict";module.exports=function base16(alphabet){return{encode(input){if(typeof input==='string'){return Buffer.from(input).toString('hex');}return input.toString('hex');},decode(input){for(let char of input){if(alphabet.indexOf(char)<0){throw new Error('invalid base16 character');}}return Buffer.from(input,'hex');}};};},774:function(module){module.exports=require("url");},787:function(module,__unusedexports,__webpack_require__){"use strict";const BitcoinjsBlock=__webpack_require__(5695).Block;const CID=__webpack_require__(9339);const multihashes=__webpack_require__(8757);const multihashing=__webpack_require__(9424);const waterfall=__webpack_require__(4265);const BITCOIN_BLOCK_HEADER_SIZE=80;const serialize=(dagNode,callback)=>{let err=null;let binaryBlob;try{binaryBlob=dagNode.toBuffer(true);}catch(serializeError){err=serializeError;}finally{callback(err,binaryBlob);}};const deserialize=(binaryBlob,callback)=>{if(binaryBlob.length!==BITCOIN_BLOCK_HEADER_SIZE){const err=new Error(`Bitcoin block header needs to be ${BITCOIN_BLOCK_HEADER_SIZE} bytes`);return callback(err);}const dagNode=BitcoinjsBlock.fromBuffer(binaryBlob);callback(null,dagNode);};const cid=(dagNode,options,callback)=>{if(typeof options==='function'){callback=options;options={};}options=options||{};const hashAlg=options.hashAlg||__webpack_require__(1525).defaultHashAlg;const version=typeof options.version==='undefined'?1:options.version;waterfall([cb=>{try{multihashing(dagNode.toBuffer(true),hashAlg,cb);}catch(err){cb(err);}},(mh,cb)=>cb(null,new CID(version,'bitcoin-block',mh))],callback);};const hashToCid=hash=>{const defaultHashAlg=__webpack_require__(1525).defaultHashAlg;const multihash=multihashes.encode(hash,defaultHashAlg);const cidVersion=1;const cid=new CID(cidVersion,'bitcoin-block',multihash);return cid;};module.exports={hashToCid:hashToCid,BITCOIN_BLOCK_HEADER_SIZE:BITCOIN_BLOCK_HEADER_SIZE,cid:cid,deserialize:deserialize,serialize:serialize};},788:function(module,__unusedexports,__webpack_require__){"use strict";function setup(env){createDebug.debug=createDebug;createDebug.default=createDebug;createDebug.coerce=coerce;createDebug.disable=disable;createDebug.enable=enable;createDebug.enabled=enabled;createDebug.humanize=__webpack_require__(9934);Object.keys(env).forEach(function(key){createDebug[key]=env[key];});createDebug.instances=[];createDebug.names=[];createDebug.skips=[];createDebug.formatters={};function selectColor(namespace){var hash=0;for(var i=0;i<namespace.length;i++){hash=(hash<<5)-hash+namespace.charCodeAt(i);hash|=0;}return createDebug.colors[Math.abs(hash)%createDebug.colors.length];}createDebug.selectColor=selectColor;function createDebug(namespace){var prevTime;function debug(){if(!debug.enabled){return;}for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}var self=debug;var curr=Number(new Date());var ms=curr-(prevTime||curr);self.diff=ms;self.prev=prevTime;self.curr=curr;prevTime=curr;args[0]=createDebug.coerce(args[0]);if(typeof args[0]!=='string'){args.unshift('%O');}var index=0;args[0]=args[0].replace(/%([a-zA-Z%])/g,function(match,format){if(match==='%%'){return match;}index++;var formatter=createDebug.formatters[format];if(typeof formatter==='function'){var val=args[index];match=formatter.call(self,val);args.splice(index,1);index--;}return match;});createDebug.formatArgs.call(self,args);var logFn=self.log||createDebug.log;logFn.apply(self,args);}debug.namespace=namespace;debug.enabled=createDebug.enabled(namespace);debug.useColors=createDebug.useColors();debug.color=selectColor(namespace);debug.destroy=destroy;debug.extend=extend;if(typeof createDebug.init==='function'){createDebug.init(debug);}createDebug.instances.push(debug);return debug;}function destroy(){var index=createDebug.instances.indexOf(this);if(index!==-1){createDebug.instances.splice(index,1);return true;}return false;}function extend(namespace,delimiter){return createDebug(this.namespace+(typeof delimiter==='undefined'?':':delimiter)+namespace);}function enable(namespaces){createDebug.save(namespaces);createDebug.names=[];createDebug.skips=[];var i;var split=(typeof namespaces==='string'?namespaces:'').split(/[\s,]+/);var len=split.length;for(i=0;i<len;i++){if(!split[i]){continue;}namespaces=split[i].replace(/\*/g,'.*?');if(namespaces[0]==='-'){createDebug.skips.push(new RegExp('^'+namespaces.substr(1)+'$'));}else{createDebug.names.push(new RegExp('^'+namespaces+'$'));}}for(i=0;i<createDebug.instances.length;i++){var instance=createDebug.instances[i];instance.enabled=createDebug.enabled(instance.namespace);}}function disable(){createDebug.enable('');}function enabled(name){if(name[name.length-1]==='*'){return true;}var i;var len;for(i=0,len=createDebug.skips.length;i<len;i++){if(createDebug.skips[i].test(name)){return false;}}for(i=0,len=createDebug.names.length;i<len;i++){if(createDebug.names[i].test(name)){return true;}}return false;}function coerce(val){if(val instanceof Error){return val.stack||val.message;}return val;}createDebug.enable(createDebug.load());return createDebug;}module.exports=setup;},799:function(module,__unusedexports,__webpack_require__){"use strict";const{ensureMultiaddr}=__webpack_require__(4216);const uniqBy=__webpack_require__(2423);class MultiaddrSet{constructor(multiaddrs){this._multiaddrs=multiaddrs||[];this._observedMultiaddrs=[];}add(ma){ma=ensureMultiaddr(ma);if(!this.has(ma)){this._multiaddrs.push(ma);}}addSafe(ma){ma=ensureMultiaddr(ma);const check=this._observedMultiaddrs.some((m,i)=>{if(m.equals(ma)){this.add(ma);this._observedMultiaddrs.splice(i,1);return true;}});if(!check){this._observedMultiaddrs.push(ma);}}toArray(){return this._multiaddrs.slice();}get size(){return this._multiaddrs.length;}forEach(fn){return this._multiaddrs.forEach(fn);}filterBy(maFmt){if(typeof maFmt!=='object'||typeof maFmt.matches!=='function'||typeof maFmt.partialMatch!=='function'||typeof maFmt.toString!=='function')return[];return this._multiaddrs.filter(ma=>maFmt.matches(ma));}has(ma){ma=ensureMultiaddr(ma);return this._multiaddrs.some(m=>m.equals(ma));}delete(ma){ma=ensureMultiaddr(ma);this._multiaddrs.some((m,i)=>{if(m.equals(ma)){this._multiaddrs.splice(i,1);return true;}});}replace(existing,fresh){if(!Array.isArray(existing)){existing=[existing];}if(!Array.isArray(fresh)){fresh=[fresh];}existing.forEach(m=>this.delete(m));fresh.forEach(m=>this.add(m));}clear(){this._multiaddrs=[];}distinct(){return uniqBy(this._multiaddrs,ma=>{return[ma.toOptions().port,ma.toOptions().transport].join();});}}module.exports=MultiaddrSet;},806:function(module,exports,__webpack_require__){"use strict";const waterfall=__webpack_require__(4265);const CID=__webpack_require__(9339);const util=__webpack_require__(7954);exports=module.exports;exports.multicodec='dag-pb';exports.defaultHashAlg='sha2-256';exports.resolve=(binaryBlob,path,callback)=>{waterfall([cb=>util.deserialize(binaryBlob,cb),(node,cb)=>{if(!path){return callback(null,{value:node,remainderPath:''});}const split=path.split('/');if(split[0]==='Links'){let remainderPath='';if(!split[1]){return cb(null,{value:node.links.map(l=>l.toJSON()),remainderPath:''});}const values={};node.links.forEach((l,i)=>{const link=l.toJSON();values[i]=values[link.name]={cid:link.cid,name:link.name,size:link.size};});let value=values[split[1]];if(split[2]==='Hash'){value={'/':value.cid};}else if(split[2]==='Tsize'){value=value.size;}else if(split[2]==='Name'){value=value.name;}remainderPath=split.slice(3).join('/');cb(null,{value:value,remainderPath:remainderPath});}else if(split[0]==='Data'){cb(null,{value:node.data,remainderPath:''});}else{const values={};node.links.forEach((l,i)=>{const link=l.toJSON();values[link.name]={cid:link.cid,name:link.name,size:link.size};});const value=values[split[0]];if(value){return cb(null,{value:{'/':value.cid},remainderPath:split.slice(1).join('/')});}cb(new Error('path not available'));}}],callback);};exports.tree=(binaryBlob,options,callback)=>{if(typeof options==='function'){callback=options;options={};}options=options||{};util.deserialize(binaryBlob,(err,node)=>{if(err){return callback(err);}const paths=[];paths.push('Links');node.links.forEach((link,i)=>{paths.push(`Links/${i}/Name`);paths.push(`Links/${i}/Tsize`);paths.push(`Links/${i}/Hash`);});paths.push('Data');callback(null,paths);});};exports.isLink=(binaryBlob,path,callback)=>{exports.resolve(binaryBlob,path,(err,result)=>{if(err){return callback(err);}if(result.remainderPath.length>0){return callback(new Error('path out of scope'));}if(typeof result.value==='object'&&result.value['/']){let valid;try{valid=CID.isCID(new CID(result.value['/']));}catch(err){valid=false;}if(valid){return callback(null,result.value);}}callback(null,false);});};},809:function(module){module.exports=assert;function assert(val,msg){if(!val)throw new Error(msg||'Assertion failed');}assert.equal=function assertEqual(l,r,msg){if(l!=r)throw new Error(msg||'Assertion failed: '+l+' != '+r);};},817:function(module,__unusedexports,__webpack_require__){"use strict";var schema=__webpack_require__(5294);var compile=__webpack_require__(1299);var flatten=function(values){if(!values)return null;var result={};Object.keys(values).forEach(function(k){result[k]=values[k].value;});return result;};module.exports=function(proto,opts){if(!opts)opts={};if(!proto)throw new Error('Pass in a .proto string or a protobuf-schema parsed object');var sch=typeof proto==='object'&&!Buffer.isBuffer(proto)?proto:schema.parse(proto);var Messages=function(){var self=this;compile(sch,opts.encodings||{}).forEach(function(m){self[m.name]=flatten(m.values)||m;});};Messages.prototype.toString=function(){return schema.stringify(sch);};Messages.prototype.toJSON=function(){return sch;};return new Messages();};},823:function(module,__unusedexports,__webpack_require__){"use strict";module.exports=Transform;var Duplex=__webpack_require__(5427);var util=__webpack_require__(5548);util.inherits=__webpack_require__(92);util.inherits(Transform,Duplex);function afterTransform(er,data){var ts=this._transformState;ts.transforming=false;var cb=ts.writecb;if(!cb){return this.emit('error',new Error('write callback called multiple times'));}ts.writechunk=null;ts.writecb=null;if(data!=null)this.push(data);cb(er);var rs=this._readableState;rs.reading=false;if(rs.needReadable||rs.length<rs.highWaterMark){this._read(rs.highWaterMark);}}function Transform(options){if(!(this instanceof Transform))return new Transform(options);Duplex.call(this,options);this._transformState={afterTransform:afterTransform.bind(this),needTransform:false,transforming:false,writecb:null,writechunk:null,writeencoding:null};this._readableState.needReadable=true;this._readableState.sync=false;if(options){if(typeof options.transform==='function')this._transform=options.transform;if(typeof options.flush==='function')this._flush=options.flush;}this.on('prefinish',prefinish);}function prefinish(){var _this=this;if(typeof this._flush==='function'){this._flush(function(er,data){done(_this,er,data);});}else{done(this,null,null);}}Transform.prototype.push=function(chunk,encoding){this._transformState.needTransform=false;return Duplex.prototype.push.call(this,chunk,encoding);};Transform.prototype._transform=function(chunk,encoding,cb){throw new Error('_transform() is not implemented');};Transform.prototype._write=function(chunk,encoding,cb){var ts=this._transformState;ts.writecb=cb;ts.writechunk=chunk;ts.writeencoding=encoding;if(!ts.transforming){var rs=this._readableState;if(ts.needTransform||rs.needReadable||rs.length<rs.highWaterMark)this._read(rs.highWaterMark);}};Transform.prototype._read=function(n){var ts=this._transformState;if(ts.writechunk!==null&&ts.writecb&&!ts.transforming){ts.transforming=true;this._transform(ts.writechunk,ts.writeencoding,ts.afterTransform);}else{ts.needTransform=true;}};Transform.prototype._destroy=function(err,cb){var _this2=this;Duplex.prototype._destroy.call(this,err,function(err2){cb(err2);_this2.emit('close');});};function done(stream,er,data){if(er)return stream.emit('error',er);if(data!=null)stream.push(data);if(stream._writableState.length)throw new Error('Calling transform done when ws.length != 0');if(stream._transformState.transforming)throw new Error('Calling transform done when still transforming');return stream.push(null);}},839:function(module){"use strict";const internals={rfc3986:{}};internals.generate=function(){const or='|';const zeroPad='0?';const digit='0-9';const digitOnly='['+digit+']';const alpha='a-zA-Z';const alphaOnly='['+alpha+']';internals.rfc3986.ipv4Cidr=digitOnly+or+'[1-2]'+digitOnly+or+'3'+'[0-2]';internals.rfc3986.ipv6Cidr='(?:'+zeroPad+zeroPad+digitOnly+or+zeroPad+'[1-9]'+digitOnly+or+'1'+'[01]'+digitOnly+or+'12[0-8])';const hexDigit=digit+'A-Fa-f';const hexDigitOnly='['+hexDigit+']';const unreserved=alpha+digit+'-\\._~';const subDelims='!\\$&\'\\(\\)\\*\\+,;=';const pctEncoded='%'+hexDigit;const pchar=unreserved+pctEncoded+subDelims+':@';const pcharOnly='['+pchar+']';const squareBrackets='\\[\\]';const decOctect='(?:'+zeroPad+zeroPad+digitOnly+or+zeroPad+'[1-9]'+digitOnly+or+'1'+digitOnly+digitOnly+or+'2'+'[0-4]'+digitOnly+or+'25'+'[0-5])';internals.rfc3986.IPv4address='(?:'+decOctect+'\\.){3}'+decOctect;const h16=hexDigitOnly+'{1,4}';const ls32='(?:'+h16+':'+h16+'|'+internals.rfc3986.IPv4address+')';const IPv6SixHex='(?:'+h16+':){6}'+ls32;const IPv6FiveHex='::(?:'+h16+':){5}'+ls32;const IPv6FourHex='(?:'+h16+')?::(?:'+h16+':){4}'+ls32;const IPv6ThreeHex='(?:(?:'+h16+':){0,1}'+h16+')?::(?:'+h16+':){3}'+ls32;const IPv6TwoHex='(?:(?:'+h16+':){0,2}'+h16+')?::(?:'+h16+':){2}'+ls32;const IPv6OneHex='(?:(?:'+h16+':){0,3}'+h16+')?::'+h16+':'+ls32;const IPv6NoneHex='(?:(?:'+h16+':){0,4}'+h16+')?::'+ls32;const IPv6NoneHex2='(?:(?:'+h16+':){0,5}'+h16+')?::'+h16;const IPv6NoneHex3='(?:(?:'+h16+':){0,6}'+h16+')?::';internals.rfc3986.IPv6address='(?:'+IPv6SixHex+or+IPv6FiveHex+or+IPv6FourHex+or+IPv6ThreeHex+or+IPv6TwoHex+or+IPv6OneHex+or+IPv6NoneHex+or+IPv6NoneHex2+or+IPv6NoneHex3+')';internals.rfc3986.IPvFuture='v'+hexDigitOnly+'+\\.['+unreserved+subDelims+':]+';internals.rfc3986.scheme=alphaOnly+'['+alpha+digit+'+-\\.]*';const userinfo='['+unreserved+pctEncoded+subDelims+':]*';const IPLiteral='\\[(?:'+internals.rfc3986.IPv6address+or+internals.rfc3986.IPvFuture+')\\]';const regName='['+unreserved+pctEncoded+subDelims+']{0,255}';const host='(?:'+IPLiteral+or+internals.rfc3986.IPv4address+or+regName+')';const port=digitOnly+'*';const authority='(?:'+userinfo+'@)?'+host+'(?::'+port+')?';const segment=pcharOnly+'*';const segmentNz=pcharOnly+'+';const segmentNzNc='['+unreserved+pctEncoded+subDelims+'@'+']+';const pathEmpty='';const pathAbEmpty='(?:\\/'+segment+')*';const pathAbsolute='\\/(?:'+segmentNz+pathAbEmpty+')?';const pathRootless=segmentNz+pathAbEmpty;const pathNoScheme=segmentNzNc+pathAbEmpty;internals.rfc3986.hierPart='(?:'+'(?:\\/\\/'+authority+pathAbEmpty+')'+or+pathAbsolute+or+pathRootless+')';internals.rfc3986.relativeRef='(?:'+'(?:\\/\\/'+authority+pathAbEmpty+')'+or+pathAbsolute+or+pathNoScheme+or+pathEmpty+')';internals.rfc3986.query='['+pchar+'\\/\\?]*(?=#|$)';internals.rfc3986.queryWithSquareBrackets='['+pchar+squareBrackets+'\\/\\?]*(?=#|$)';internals.rfc3986.fragment='['+pchar+'\\/\\?]*';};internals.generate();module.exports=internals.rfc3986;},841:function(module,__unusedexports,__webpack_require__){"use strict";const Any=__webpack_require__(7492);const Hoek=__webpack_require__(2850);const internals={Set:__webpack_require__(2605)};internals.Boolean=class extends Any{constructor(){super();this._type='boolean';this._flags.insensitive=true;this._inner.truthySet=new internals.Set();this._inner.falsySet=new internals.Set();}_base(value,state,options){const result={value};if(typeof value==='string'&&options.convert){const normalized=this._flags.insensitive?value.toLowerCase():value;result.value=normalized==='true'?true:normalized==='false'?false:value;}if(typeof result.value!=='boolean'){result.value=this._inner.truthySet.has(value,null,null,this._flags.insensitive)?true:this._inner.falsySet.has(value,null,null,this._flags.insensitive)?false:value;}result.errors=typeof result.value==='boolean'?null:this.createError('boolean.base',{value},state,options);return result;}truthy(...values){const obj=this.clone();values=Hoek.flatten(values);for(let i=0;i<values.length;++i){const value=values[i];Hoek.assert(value!==undefined,'Cannot call truthy with undefined');obj._inner.truthySet.add(value);}return obj;}falsy(...values){const obj=this.clone();values=Hoek.flatten(values);for(let i=0;i<values.length;++i){const value=values[i];Hoek.assert(value!==undefined,'Cannot call falsy with undefined');obj._inner.falsySet.add(value);}return obj;}insensitive(enabled){const insensitive=enabled===undefined?true:!!enabled;if(this._flags.insensitive===insensitive){return this;}const obj=this.clone();obj._flags.insensitive=insensitive;return obj;}describe(){const description=super.describe();description.truthy=[true,...this._inner.truthySet.values()];description.falsy=[false,...this._inner.falsySet.values()];return description;}};module.exports=new internals.Boolean();},843:function(module,__unusedexports,__webpack_require__){"use strict";var _=__webpack_require__(6064);var $=__webpack_require__(5107);var BN=__webpack_require__(6122);var Base58=__webpack_require__(8014);var Base58Check=__webpack_require__(7341);var Hash=__webpack_require__(2442);var HDPrivateKey=__webpack_require__(159);var HDKeyCache=__webpack_require__(5315);var Network=__webpack_require__(8368);var Point=__webpack_require__(9933);var PublicKey=__webpack_require__(4721);var bitcoreErrors=__webpack_require__(6379);var errors=bitcoreErrors;var hdErrors=bitcoreErrors.HDPublicKey;var assert=__webpack_require__(3930);var JSUtil=__webpack_require__(8416);var BufferUtil=__webpack_require__(9657);function HDPublicKey(arg){if(arg instanceof HDPublicKey){return arg;}if(!(this instanceof HDPublicKey)){return new HDPublicKey(arg);}if(arg){if(_.isString(arg)||BufferUtil.isBuffer(arg)){var error=HDPublicKey.getSerializedError(arg);if(!error){return this._buildFromSerialized(arg);}else if(BufferUtil.isBuffer(arg)&&!HDPublicKey.getSerializedError(arg.toString())){return this._buildFromSerialized(arg.toString());}else{if(error instanceof hdErrors.ArgumentIsPrivateExtended){return new HDPrivateKey(arg).hdPublicKey;}throw error;}}else{if(_.isObject(arg)){if(arg instanceof HDPrivateKey){return this._buildFromPrivate(arg);}else{return this._buildFromObject(arg);}}else{throw new hdErrors.UnrecognizedArgument(arg);}}}else{throw new hdErrors.MustSupplyArgument();}}HDPublicKey.isValidPath=function(arg){if(_.isString(arg)){var indexes=HDPrivateKey._getDerivationIndexes(arg);return indexes!==null&&_.all(indexes,HDPublicKey.isValidPath);}if(_.isNumber(arg)){return arg>=0&&arg<HDPublicKey.Hardened;}return false;};HDPublicKey.prototype.derive=function(arg,hardened){if(_.isNumber(arg)){return this._deriveWithNumber(arg,hardened);}else if(_.isString(arg)){return this._deriveFromString(arg);}else{throw new hdErrors.InvalidDerivationArgument(arg);}};HDPublicKey.prototype._deriveWithNumber=function(index,hardened){if(index>=HDPublicKey.Hardened||hardened){throw new hdErrors.InvalidIndexCantDeriveHardened();}if(index<0){throw new hdErrors.InvalidPath(index);}var cached=HDKeyCache.get(this.xpubkey,index,false);if(cached){return cached;}var indexBuffer=BufferUtil.integerAsBuffer(index);var data=BufferUtil.concat([this.publicKey.toBuffer(),indexBuffer]);var hash=Hash.sha512hmac(data,this._buffers.chainCode);var leftPart=BN.fromBuffer(hash.slice(0,32),{size:32});var chainCode=hash.slice(32,64);var publicKey=PublicKey.fromPoint(Point.getG().mul(leftPart).add(this.publicKey.point));var derived=new HDPublicKey({network:this.network,depth:this.depth+1,parentFingerPrint:this.fingerPrint,childIndex:index,chainCode:chainCode,publicKey:publicKey});HDKeyCache.set(this.xpubkey,index,false,derived);return derived;};HDPublicKey.prototype._deriveFromString=function(path){if(_.contains(path,"'")){throw new hdErrors.InvalidIndexCantDeriveHardened();}else if(!HDPublicKey.isValidPath(path)){throw new hdErrors.InvalidPath(path);}var indexes=HDPrivateKey._getDerivationIndexes(path);var derived=indexes.reduce(function(prev,index){return prev._deriveWithNumber(index);},this);return derived;};HDPublicKey.isValidSerialized=function(data,network){return _.isNull(HDPublicKey.getSerializedError(data,network));};HDPublicKey.getSerializedError=function(data,network){if(!(_.isString(data)||BufferUtil.isBuffer(data))){return new hdErrors.UnrecognizedArgument('expected buffer or string');}if(!Base58.validCharacters(data)){return new errors.InvalidB58Char('(unknown)',data);}try{data=Base58Check.decode(data);}catch(e){return new errors.InvalidB58Checksum(data);}if(data.length!==HDPublicKey.DataSize){return new hdErrors.InvalidLength(data);}if(!_.isUndefined(network)){var error=HDPublicKey._validateNetwork(data,network);if(error){return error;}}var version=BufferUtil.integerFromBuffer(data.slice(0,4));if(version===Network.livenet.xprivkey||version===Network.testnet.xprivkey){return new hdErrors.ArgumentIsPrivateExtended();}return null;};HDPublicKey._validateNetwork=function(data,networkArg){var network=Network.get(networkArg);if(!network){return new errors.InvalidNetworkArgument(networkArg);}var version=data.slice(HDPublicKey.VersionStart,HDPublicKey.VersionEnd);if(BufferUtil.integerFromBuffer(version)!==network.xpubkey){return new errors.InvalidNetwork(version);}return null;};HDPublicKey.prototype._buildFromPrivate=function(arg){var args=_.clone(arg._buffers);var point=Point.getG().mul(BN.fromBuffer(args.privateKey));args.publicKey=Point.pointToCompressed(point);args.version=BufferUtil.integerAsBuffer(Network.get(BufferUtil.integerFromBuffer(args.version)).xpubkey);args.privateKey=undefined;args.checksum=undefined;args.xprivkey=undefined;return this._buildFromBuffers(args);};HDPublicKey.prototype._buildFromObject=function(arg){var buffers={version:arg.network?BufferUtil.integerAsBuffer(Network.get(arg.network).xpubkey):arg.version,depth:_.isNumber(arg.depth)?BufferUtil.integerAsSingleByteBuffer(arg.depth):arg.depth,parentFingerPrint:_.isNumber(arg.parentFingerPrint)?BufferUtil.integerAsBuffer(arg.parentFingerPrint):arg.parentFingerPrint,childIndex:_.isNumber(arg.childIndex)?BufferUtil.integerAsBuffer(arg.childIndex):arg.childIndex,chainCode:_.isString(arg.chainCode)?BufferUtil.hexToBuffer(arg.chainCode):arg.chainCode,publicKey:_.isString(arg.publicKey)?BufferUtil.hexToBuffer(arg.publicKey):BufferUtil.isBuffer(arg.publicKey)?arg.publicKey:arg.publicKey.toBuffer(),checksum:_.isNumber(arg.checksum)?BufferUtil.integerAsBuffer(arg.checksum):arg.checksum};return this._buildFromBuffers(buffers);};HDPublicKey.prototype._buildFromSerialized=function(arg){var decoded=Base58Check.decode(arg);var buffers={version:decoded.slice(HDPublicKey.VersionStart,HDPublicKey.VersionEnd),depth:decoded.slice(HDPublicKey.DepthStart,HDPublicKey.DepthEnd),parentFingerPrint:decoded.slice(HDPublicKey.ParentFingerPrintStart,HDPublicKey.ParentFingerPrintEnd),childIndex:decoded.slice(HDPublicKey.ChildIndexStart,HDPublicKey.ChildIndexEnd),chainCode:decoded.slice(HDPublicKey.ChainCodeStart,HDPublicKey.ChainCodeEnd),publicKey:decoded.slice(HDPublicKey.PublicKeyStart,HDPublicKey.PublicKeyEnd),checksum:decoded.slice(HDPublicKey.ChecksumStart,HDPublicKey.ChecksumEnd),xpubkey:arg};return this._buildFromBuffers(buffers);};HDPublicKey.prototype._buildFromBuffers=function(arg){HDPublicKey._validateBufferArguments(arg);JSUtil.defineImmutable(this,{_buffers:arg});var sequence=[arg.version,arg.depth,arg.parentFingerPrint,arg.childIndex,arg.chainCode,arg.publicKey];var concat=BufferUtil.concat(sequence);var checksum=Base58Check.checksum(concat);if(!arg.checksum||!arg.checksum.length){arg.checksum=checksum;}else{if(arg.checksum.toString('hex')!==checksum.toString('hex')){throw new errors.InvalidB58Checksum(concat,checksum);}}var network=Network.get(BufferUtil.integerFromBuffer(arg.version));var xpubkey;xpubkey=Base58Check.encode(BufferUtil.concat(sequence));arg.xpubkey=new Buffer(xpubkey);var publicKey=new PublicKey(arg.publicKey,{network:network});var size=HDPublicKey.ParentFingerPrintSize;var fingerPrint=Hash.sha256ripemd160(publicKey.toBuffer()).slice(0,size);JSUtil.defineImmutable(this,{xpubkey:xpubkey,network:network,depth:BufferUtil.integerFromSingleByteBuffer(arg.depth),publicKey:publicKey,fingerPrint:fingerPrint});return this;};HDPublicKey._validateBufferArguments=function(arg){var checkBuffer=function(name,size){var buff=arg[name];assert(BufferUtil.isBuffer(buff),name+' argument is not a buffer, it\'s '+typeof buff);assert(buff.length===size,name+' has not the expected size: found '+buff.length+', expected '+size);};checkBuffer('version',HDPublicKey.VersionSize);checkBuffer('depth',HDPublicKey.DepthSize);checkBuffer('parentFingerPrint',HDPublicKey.ParentFingerPrintSize);checkBuffer('childIndex',HDPublicKey.ChildIndexSize);checkBuffer('chainCode',HDPublicKey.ChainCodeSize);checkBuffer('publicKey',HDPublicKey.PublicKeySize);if(arg.checksum&&arg.checksum.length){checkBuffer('checksum',HDPublicKey.CheckSumSize);}};HDPublicKey.fromString=function(arg){$.checkArgument(_.isString(arg),'No valid string was provided');return new HDPublicKey(arg);};HDPublicKey.fromObject=function(arg){$.checkArgument(_.isObject(arg),'No valid argument was provided');return new HDPublicKey(arg);};HDPublicKey.prototype.toString=function(){return this.xpubkey;};HDPublicKey.prototype.inspect=function(){return'<HDPublicKey: '+this.xpubkey+'>';};HDPublicKey.prototype.toObject=HDPublicKey.prototype.toJSON=function toObject(){return{network:Network.get(BufferUtil.integerFromBuffer(this._buffers.version)).name,depth:BufferUtil.integerFromSingleByteBuffer(this._buffers.depth),fingerPrint:BufferUtil.integerFromBuffer(this.fingerPrint),parentFingerPrint:BufferUtil.integerFromBuffer(this._buffers.parentFingerPrint),childIndex:BufferUtil.integerFromBuffer(this._buffers.childIndex),chainCode:BufferUtil.bufferToHex(this._buffers.chainCode),publicKey:this.publicKey.toString(),checksum:BufferUtil.integerFromBuffer(this._buffers.checksum),xpubkey:this.xpubkey};};HDPublicKey.fromBuffer=function(arg){return new HDPublicKey(arg);};HDPublicKey.prototype.toBuffer=function(){return BufferUtil.copy(this._buffers.xpubkey);};HDPublicKey.Hardened=0x80000000;HDPublicKey.RootElementAlias=['m','M'];HDPublicKey.VersionSize=4;HDPublicKey.DepthSize=1;HDPublicKey.ParentFingerPrintSize=4;HDPublicKey.ChildIndexSize=4;HDPublicKey.ChainCodeSize=32;HDPublicKey.PublicKeySize=33;HDPublicKey.CheckSumSize=4;HDPublicKey.DataSize=78;HDPublicKey.SerializedByteSize=82;HDPublicKey.VersionStart=0;HDPublicKey.VersionEnd=HDPublicKey.VersionStart+HDPublicKey.VersionSize;HDPublicKey.DepthStart=HDPublicKey.VersionEnd;HDPublicKey.DepthEnd=HDPublicKey.DepthStart+HDPublicKey.DepthSize;HDPublicKey.ParentFingerPrintStart=HDPublicKey.DepthEnd;HDPublicKey.ParentFingerPrintEnd=HDPublicKey.ParentFingerPrintStart+HDPublicKey.ParentFingerPrintSize;HDPublicKey.ChildIndexStart=HDPublicKey.ParentFingerPrintEnd;HDPublicKey.ChildIndexEnd=HDPublicKey.ChildIndexStart+HDPublicKey.ChildIndexSize;HDPublicKey.ChainCodeStart=HDPublicKey.ChildIndexEnd;HDPublicKey.ChainCodeEnd=HDPublicKey.ChainCodeStart+HDPublicKey.ChainCodeSize;HDPublicKey.PublicKeyStart=HDPublicKey.ChainCodeEnd;HDPublicKey.PublicKeyEnd=HDPublicKey.PublicKeyStart+HDPublicKey.PublicKeySize;HDPublicKey.ChecksumStart=HDPublicKey.PublicKeyEnd;HDPublicKey.ChecksumEnd=HDPublicKey.ChecksumStart+HDPublicKey.CheckSumSize;assert(HDPublicKey.PublicKeyEnd===HDPublicKey.DataSize);assert(HDPublicKey.ChecksumEnd===HDPublicKey.SerializedByteSize);module.exports=HDPublicKey;},856:function(module,exports,__webpack_require__){"use strict";const ipns=__webpack_require__(3843);const{fromB58String,toB58String}=__webpack_require__(8757);const PubsubDatastore=__webpack_require__(2956);const withIs=__webpack_require__(3171);const errcode=__webpack_require__(4999);const debug=__webpack_require__(746);const log=debug('jsipfs:ipns:pubsub');log.error=debug('jsipfs:ipns:pubsub:error');class IpnsPubsubDatastore{constructor(pubsub,localDatastore,peerId){this._pubsub=pubsub;this._subscriptions={};this._handleSubscriptionKey=this._handleSubscriptionKey.bind(this);this._pubsubDs=new PubsubDatastore(pubsub,localDatastore,peerId,ipns.validator,this._handleSubscriptionKey);}put(key,value,callback){this._pubsubDs.put(key,value,callback);}get(key,callback){this._pubsubDs.get(key,(err,res)=>{const ns=key.slice(0,ipns.namespaceLength);if(ns.toString()===ipns.namespace){const stringifiedTopic=key.toString();const id=toB58String(key.slice(ipns.namespaceLength));this._subscriptions[stringifiedTopic]=id;log(`subscribed pubsub ${stringifiedTopic}: ${id}`);}if(err){return callback(err);}callback(null,res);});}_handleSubscriptionKey(key,callback){const subscriber=this._subscriptions[key];if(!subscriber){const errMsg=`key ${key} does not correspond to a subscription`;log.error(errMsg);return callback(errcode(new Error(errMsg),'ERR_INVALID_KEY'));}let keys;try{keys=ipns.getIdKeys(fromB58String(subscriber));}catch(err){log.error(err);return callback(err);}callback(null,keys.routingKey.toBuffer());}getSubscriptions(callback){const subscriptions=Object.values(this._subscriptions).filter(Boolean);return callback(null,subscriptions.map(sub=>`${ipns.namespace}${sub}`));}cancel(name,callback){if(typeof name!=='string'){const errMsg=`received subscription name is not valid`;log.error(errMsg);return callback(errcode(new Error(errMsg),'ERR_INVALID_SUBSCRIPTION_NAME'));}if(name.startsWith(ipns.namespace)){name=name.substring(ipns.namespaceLength);}const stringifiedTopic=Object.keys(this._subscriptions).find(key=>this._subscriptions[key]===name);if(!stringifiedTopic){return callback(null,{canceled:false});}try{const bufTopic=Buffer.from(stringifiedTopic);this._pubsubDs.unsubscribe(bufTopic);}catch(err){return callback(err);}this._subscriptions[stringifiedTopic]=undefined;log(`unsubscribed pubsub ${stringifiedTopic}: ${name}`);callback(null,{canceled:true});}}exports=module.exports=withIs(IpnsPubsubDatastore,{className:'IpnsPubsubDatastore',symbolName:'@js-ipfs/ipns/IpnsPubsubDatastore'});},858:function(module,__unusedexports,__webpack_require__){var castPath=__webpack_require__(5853),toKey=__webpack_require__(8898);function baseGet(object,path){path=castPath(path,object);var index=0,length=path.length;while(object!=null&&index<length){object=object[toKey(path[index++])];}return index&&index==length?object:undefined;}module.exports=baseGet;},863:function(module,__unusedexports,__webpack_require__){"use strict";const promisify=__webpack_require__(6955);const waterfall=__webpack_require__(4265);const parallel=__webpack_require__(4876);const series=__webpack_require__(7644);const{createLock,updateMfsRoot,addLink,updateTree,toMfsPath,toPathComponents,toPullSource,loadNode,limitStreamBytes,countStreamBytes,toTrail,zeros}=__webpack_require__(7777);const{unmarshal}=__webpack_require__(7959);const pull=__webpack_require__(418);const cat=__webpack_require__(6246);const collect=__webpack_require__(8342);const empty=__webpack_require__(7086);const err=__webpack_require__(5619);const log=__webpack_require__(746)('ipfs:mfs:write');const values=__webpack_require__(5130);const exporter=__webpack_require__(7623);const importer=__webpack_require__(4062);const deferred=__webpack_require__(5213);const CID=__webpack_require__(9339);const stat=__webpack_require__(1847);const mkdir=__webpack_require__(1674);const defaultOptions={offset:0,length:undefined,create:false,truncate:false,rawLeaves:false,reduceSingleLeafToSelf:false,cidVersion:0,hashAlg:'sha2-256',format:'dag-pb',parents:false,progress:()=>{},strategy:'trickle',flush:true,leafType:'raw',shardSplitThreshold:1000};module.exports=function mfsWrite(context){return promisify((path,content,options,callback)=>{if(typeof options==='function'){callback=options;options={};}options=Object.assign({},defaultOptions,options);if(options.offset<0){return callback(new Error('cannot have negative write offset'));}if(options.length<0){return callback(new Error('cannot have negative byte count'));}if(!options.length&&options.length!==0){options.length=Infinity;}options.cidVersion=options.cidVersion||0;waterfall([done=>{createLock().readLock(callback=>{waterfall([done=>{parallel({source:next=>toPullSource(content,options,next),path:next=>toMfsPath(context,path,next)},done);},({source,path:{mfsPath,mfsDirectory}},done)=>{series({mfsDirectory:next=>stat(context)(mfsDirectory,{unsorted:true,long:true},(error,result)=>{if(error&&error.message.includes('does not exist')){error=null;}next(error,result);}),mfsPath:next=>stat(context)(mfsPath,{unsorted:true,long:true},(error,result)=>{if(error&&error.message.includes('does not exist')){error=null;}next(error,result);})},(error,result={})=>{done(error,{source,path,mfsDirectory:result.mfsDirectory,mfsPath:result.mfsPath});});}],callback);})(done);},({source,path,mfsDirectory,mfsPath},done)=>{if(!options.parents&&!mfsDirectory){return done(new Error('directory does not exist'));}if(!options.create&&!mfsPath){return done(new Error('file does not exist'));}updateOrImport(context,options,path,source,mfsPath,done);}],error=>callback(error));});};const updateOrImport=(context,options,path,source,existingChild,callback)=>{waterfall([next=>{if(existingChild){return loadNode(context,{cid:existingChild.hash},next);}next(null,null);},(result,next)=>{const{cid,node}=result||{};write(context,cid,node,source,options,next);},(child,next)=>{createLock().writeLock(writeLockCallback=>{const pathComponents=toPathComponents(path);const fileName=pathComponents.pop();waterfall([cb=>stat(context)(`/${pathComponents.join('/')}`,options,(error,result)=>{if(error&&error.message.includes('does not exist')){error=null;}cb(null,Boolean(result));}),(parentExists,cb)=>{if(parentExists){return cb();}mkdir(context)(`/${pathComponents.join('/')}`,options,cb);},cb=>toMfsPath(context,path,cb),({mfsDirectory,root},cb)=>{toTrail(context,mfsDirectory,options,(err,trail)=>{if(err){return cb(err);}const parent=trail[trail.length-1];if(parent.type!=='dir'){return cb(new Error(`cannot write to ${parent.name}: Not a directory`));}context.ipld.get(parent.cid,(err,result)=>{if(err){return cb(err);}addLink(context,{parent:result.value,parentCid:parent.cid,name:fileName,cid:child.cid,size:child.size,flush:options.flush,shardSplitThreshold:options.shardSplitThreshold},(err,result)=>{if(err){return cb(err);}parent.cid=result.cid;parent.size=result.node.size;cb(null,trail);});});});},(trail,cb)=>updateTree(context,trail,options,cb),({cid},cb)=>updateMfsRoot(context,cid,cb)],writeLockCallback);})(next);}],callback);};const write=(context,existingNodeCid,existingNode,source,options,callback)=>{let existingNodeMeta;if(existingNode){existingNodeMeta=unmarshal(existingNode.data);log(`Overwriting file ${existingNodeCid.toBaseEncodedString()} offset ${options.offset} length ${options.length}`);}else{log(`Writing file offset ${options.offset} length ${options.length}`);}const sources=[];if(options.offset>0){if(existingNode&&existingNodeMeta.fileSize()>options.offset){log(`Writing first ${options.offset} bytes of original file`);const startFile=deferred.source();sources.push(startFile);pull(exporter(existingNodeCid,context.ipld,{offset:0,length:options.offset}),collect((error,files)=>{if(error){return startFile.resolve(err(error));}startFile.resolve(files[0].content);}));}else{log(`Writing zeros for first ${options.offset} bytes`);sources.push(zeros(options.offset));}}const endFile=deferred.source();sources.push(pull(source,limitStreamBytes(options.length),countStreamBytes(bytesRead=>{log(`Wrote ${bytesRead} bytes`);if(existingNode&&!options.truncate){const fileSize=existingNodeMeta.fileSize();const offset=options.offset+bytesRead;if(fileSize>offset){log(`Writing last ${fileSize-offset} of ${fileSize} bytes from original file`);pull(exporter(existingNodeCid,context.ipld,{offset}),collect((error,files)=>{if(error){return endFile.resolve(err(error));}endFile.resolve(files[0].content);}));}else{log(`Not writing last bytes from original file`);endFile.resolve(empty());}}})));if(existingNode&&!options.truncate){sources.push(endFile);}pull(values([{path:'',content:cat(sources)}]),importer(context.ipld,{progress:options.progress,hashAlg:options.hashAlg,cidVersion:options.cidVersion,strategy:options.strategy,rawLeaves:options.rawLeaves,reduceSingleLeafToSelf:options.reduceSingleLeafToSelf,leafType:options.leafType}),collect((error,results)=>{if(error){return callback(error);}const result=results.pop();const cid=new CID(result.multihash);log(`Wrote ${cid.toBaseEncodedString()}`);callback(null,{cid,size:result.size});}));};},864:function(module,__unusedexports,__webpack_require__){var Stream=__webpack_require__(6886);module.exports=duplex;module.exports.source=function(source){return duplex(null,source);};module.exports.sink=function(sink){return duplex(sink,null);};var next='undefined'===typeof setImmediate?process.nextTick:setImmediate;function duplex(reader,read){if(reader&&'object'===typeof reader){read=reader.source;reader=reader.sink;}var cbs=[],input=[],ended,needDrain;var s=new Stream();s.writable=s.readable=true;s.write=function(data){if(cbs.length)cbs.shift()(null,data);else input.push(data);if(!cbs.length){needDrain=true;}return!!cbs.length;};s.end=function(){if(read){if(input.length)drain();else read(ended=true,cbs.length?cbs.shift():function(){});}else if(cbs.length){cbs.shift()(true);}};s.source=function(end,cb){if(input.length){cb(null,input.shift());if(!input.length)s.emit('drain');}else{if(ended=ended||end)cb(ended);else cbs.push(cb);if(needDrain){needDrain=false;s.emit('drain');}}};var n;if(reader)n=reader(s.source);if(n&&!read)read=n;var output=[],_cbs=[];var _ended=false,waiting=false,busy=false;s.sink=function(_read){read=_read;next(drain);};if(read){s.sink(read);var pipe=s.pipe.bind(s);s.pipe=function(dest,opts){var res=pipe(dest,opts);if(s.paused)s.resume();return res;};}function drain(){waiting=false;if(!read||busy)return;while(output.length&&!s.paused){s.emit('data',output.shift());}if(s.paused)return;if(_ended)return s.emit('end');busy=true;read(null,function next(end,data){busy=false;if(s.paused){if(end===true)_ended=end;else if(end)s.emit('error',end);else output.push(data);waiting=true;}else{if(end&&(ended=end)!==true)s.emit('error',end);else if(ended=ended||end)s.emit('end');else{s.emit('data',data);busy=true;read(null,next);}}});}s.pause=function(){s.paused=true;return s;};s.resume=function(){s.paused=false;drain();return s;};s.destroy=function(){if(!ended&&read)read(ended=true,function(){});ended=true;if(cbs.length)cbs.shift()(true);s.emit('close');};return s;}},865:function(module,__unusedexports,__webpack_require__){"use strict";var pna=__webpack_require__(88);function destroy(err,cb){var _this=this;var readableDestroyed=this._readableState&&this._readableState.destroyed;var writableDestroyed=this._writableState&&this._writableState.destroyed;if(readableDestroyed||writableDestroyed){if(cb){cb(err);}else if(err&&(!this._writableState||!this._writableState.errorEmitted)){pna.nextTick(emitErrorNT,this,err);}return this;}if(this._readableState){this._readableState.destroyed=true;}if(this._writableState){this._writableState.destroyed=true;}this._destroy(err||null,function(err){if(!cb&&err){pna.nextTick(emitErrorNT,_this,err);if(_this._writableState){_this._writableState.errorEmitted=true;}}else if(cb){cb(err);}});return this;}function undestroy(){if(this._readableState){this._readableState.destroyed=false;this._readableState.reading=false;this._readableState.ended=false;this._readableState.endEmitted=false;}if(this._writableState){this._writableState.destroyed=false;this._writableState.ended=false;this._writableState.ending=false;this._writableState.finished=false;this._writableState.errorEmitted=false;}}function emitErrorNT(self,err){self.emit('error',err);}module.exports={destroy:destroy,undestroy:undestroy};},880:function(module,__unusedexports,__webpack_require__){var Symbol=__webpack_require__(8326),arrayMap=__webpack_require__(6016),isArray=__webpack_require__(1015),isSymbol=__webpack_require__(5578);var INFINITY=1/0;var symbolProto=Symbol?Symbol.prototype:undefined,symbolToString=symbolProto?symbolProto.toString:undefined;function baseToString(value){if(typeof value=='string'){return value;}if(isArray(value)){return arrayMap(value,baseToString)+'';}if(isSymbol(value)){return symbolToString?symbolToString.call(value):'';}var result=value+'';return result=='0'&&1/value==-INFINITY?'-0':result;}module.exports=baseToString;},891:function(module,__unusedexports,__webpack_require__){"use strict";const semver=__webpack_require__(379);function matchSemver(myProtocol,senderProtocol,callback){const mps=myProtocol.split('/');const sps=senderProtocol.split('/');const myName=mps[1];const myVersion=mps[2];const senderName=sps[1];const senderVersion=sps[2];if(myName!==senderName){return callback(null,false);}const valid=semver.satisfies(myVersion,'~'+senderVersion);callback(null,valid);}module.exports=matchSemver;},944:function(module){(function(global,factory){true?module.exports=factory():undefined;})(this,function(){'use strict';var stable=function(arr,comp){return exec(arr.slice(),comp);};stable.inplace=function(arr,comp){var result=exec(arr,comp);if(result!==arr){pass(result,null,arr.length,arr);}return arr;};function exec(arr,comp){if(typeof comp!=='function'){comp=function(a,b){return String(a).localeCompare(b);};}var len=arr.length;if(len<=1){return arr;}var buffer=new Array(len);for(var chk=1;chk<len;chk*=2){pass(arr,comp,chk,buffer);var tmp=arr;arr=buffer;buffer=tmp;}return arr;}var pass=function(arr,comp,chk,result){var len=arr.length;var i=0;var dbl=chk*2;var l,r,e;var li,ri;for(l=0;l<len;l+=dbl){r=l+chk;e=r+chk;if(r>len)r=len;if(e>len)e=len;li=l;ri=r;while(true){if(li<r&&ri<e){if(comp(arr[li],arr[ri])<=0){result[i++]=arr[li++];}else{result[i++]=arr[ri++];}}else if(li<r){result[i++]=arr[li++];}else if(ri<e){result[i++]=arr[ri++];}else{break;}}}};return stable;});},951:function(__unusedmodule,exports){"use strict";var P1600_ROUND_CONSTANTS=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648];exports.p1600=function(s){for(var round=0;round<24;++round){var lo0=s[0]^s[10]^s[20]^s[30]^s[40];var hi0=s[1]^s[11]^s[21]^s[31]^s[41];var lo1=s[2]^s[12]^s[22]^s[32]^s[42];var hi1=s[3]^s[13]^s[23]^s[33]^s[43];var lo2=s[4]^s[14]^s[24]^s[34]^s[44];var hi2=s[5]^s[15]^s[25]^s[35]^s[45];var lo3=s[6]^s[16]^s[26]^s[36]^s[46];var hi3=s[7]^s[17]^s[27]^s[37]^s[47];var lo4=s[8]^s[18]^s[28]^s[38]^s[48];var hi4=s[9]^s[19]^s[29]^s[39]^s[49];var lo=lo4^(lo1<<1|hi1>>>31);var hi=hi4^(hi1<<1|lo1>>>31);var t1slo0=s[0]^lo;var t1shi0=s[1]^hi;var t1slo5=s[10]^lo;var t1shi5=s[11]^hi;var t1slo10=s[20]^lo;var t1shi10=s[21]^hi;var t1slo15=s[30]^lo;var t1shi15=s[31]^hi;var t1slo20=s[40]^lo;var t1shi20=s[41]^hi;lo=lo0^(lo2<<1|hi2>>>31);hi=hi0^(hi2<<1|lo2>>>31);var t1slo1=s[2]^lo;var t1shi1=s[3]^hi;var t1slo6=s[12]^lo;var t1shi6=s[13]^hi;var t1slo11=s[22]^lo;var t1shi11=s[23]^hi;var t1slo16=s[32]^lo;var t1shi16=s[33]^hi;var t1slo21=s[42]^lo;var t1shi21=s[43]^hi;lo=lo1^(lo3<<1|hi3>>>31);hi=hi1^(hi3<<1|lo3>>>31);var t1slo2=s[4]^lo;var t1shi2=s[5]^hi;var t1slo7=s[14]^lo;var t1shi7=s[15]^hi;var t1slo12=s[24]^lo;var t1shi12=s[25]^hi;var t1slo17=s[34]^lo;var t1shi17=s[35]^hi;var t1slo22=s[44]^lo;var t1shi22=s[45]^hi;lo=lo2^(lo4<<1|hi4>>>31);hi=hi2^(hi4<<1|lo4>>>31);var t1slo3=s[6]^lo;var t1shi3=s[7]^hi;var t1slo8=s[16]^lo;var t1shi8=s[17]^hi;var t1slo13=s[26]^lo;var t1shi13=s[27]^hi;var t1slo18=s[36]^lo;var t1shi18=s[37]^hi;var t1slo23=s[46]^lo;var t1shi23=s[47]^hi;lo=lo3^(lo0<<1|hi0>>>31);hi=hi3^(hi0<<1|lo0>>>31);var t1slo4=s[8]^lo;var t1shi4=s[9]^hi;var t1slo9=s[18]^lo;var t1shi9=s[19]^hi;var t1slo14=s[28]^lo;var t1shi14=s[29]^hi;var t1slo19=s[38]^lo;var t1shi19=s[39]^hi;var t1slo24=s[48]^lo;var t1shi24=s[49]^hi;var t2slo0=t1slo0;var t2shi0=t1shi0;var t2slo16=t1shi5<<4|t1slo5>>>28;var t2shi16=t1slo5<<4|t1shi5>>>28;var t2slo7=t1slo10<<3|t1shi10>>>29;var t2shi7=t1shi10<<3|t1slo10>>>29;var t2slo23=t1shi15<<9|t1slo15>>>23;var t2shi23=t1slo15<<9|t1shi15>>>23;var t2slo14=t1slo20<<18|t1shi20>>>14;var t2shi14=t1shi20<<18|t1slo20>>>14;var t2slo10=t1slo1<<1|t1shi1>>>31;var t2shi10=t1shi1<<1|t1slo1>>>31;var t2slo1=t1shi6<<12|t1slo6>>>20;var t2shi1=t1slo6<<12|t1shi6>>>20;var t2slo17=t1slo11<<10|t1shi11>>>22;var t2shi17=t1shi11<<10|t1slo11>>>22;var t2slo8=t1shi16<<13|t1slo16>>>19;var t2shi8=t1slo16<<13|t1shi16>>>19;var t2slo24=t1slo21<<2|t1shi21>>>30;var t2shi24=t1shi21<<2|t1slo21>>>30;var t2slo20=t1shi2<<30|t1slo2>>>2;var t2shi20=t1slo2<<30|t1shi2>>>2;var t2slo11=t1slo7<<6|t1shi7>>>26;var t2shi11=t1shi7<<6|t1slo7>>>26;var t2slo2=t1shi12<<11|t1slo12>>>21;var t2shi2=t1slo12<<11|t1shi12>>>21;var t2slo18=t1slo17<<15|t1shi17>>>17;var t2shi18=t1shi17<<15|t1slo17>>>17;var t2slo9=t1shi22<<29|t1slo22>>>3;var t2shi9=t1slo22<<29|t1shi22>>>3;var t2slo5=t1slo3<<28|t1shi3>>>4;var t2shi5=t1shi3<<28|t1slo3>>>4;var t2slo21=t1shi8<<23|t1slo8>>>9;var t2shi21=t1slo8<<23|t1shi8>>>9;var t2slo12=t1slo13<<25|t1shi13>>>7;var t2shi12=t1shi13<<25|t1slo13>>>7;var t2slo3=t1slo18<<21|t1shi18>>>11;var t2shi3=t1shi18<<21|t1slo18>>>11;var t2slo19=t1shi23<<24|t1slo23>>>8;var t2shi19=t1slo23<<24|t1shi23>>>8;var t2slo15=t1slo4<<27|t1shi4>>>5;var t2shi15=t1shi4<<27|t1slo4>>>5;var t2slo6=t1slo9<<20|t1shi9>>>12;var t2shi6=t1shi9<<20|t1slo9>>>12;var t2slo22=t1shi14<<7|t1slo14>>>25;var t2shi22=t1slo14<<7|t1shi14>>>25;var t2slo13=t1slo19<<8|t1shi19>>>24;var t2shi13=t1shi19<<8|t1slo19>>>24;var t2slo4=t1slo24<<14|t1shi24>>>18;var t2shi4=t1shi24<<14|t1slo24>>>18;s[0]=t2slo0^~t2slo1&t2slo2;s[1]=t2shi0^~t2shi1&t2shi2;s[10]=t2slo5^~t2slo6&t2slo7;s[11]=t2shi5^~t2shi6&t2shi7;s[20]=t2slo10^~t2slo11&t2slo12;s[21]=t2shi10^~t2shi11&t2shi12;s[30]=t2slo15^~t2slo16&t2slo17;s[31]=t2shi15^~t2shi16&t2shi17;s[40]=t2slo20^~t2slo21&t2slo22;s[41]=t2shi20^~t2shi21&t2shi22;s[2]=t2slo1^~t2slo2&t2slo3;s[3]=t2shi1^~t2shi2&t2shi3;s[12]=t2slo6^~t2slo7&t2slo8;s[13]=t2shi6^~t2shi7&t2shi8;s[22]=t2slo11^~t2slo12&t2slo13;s[23]=t2shi11^~t2shi12&t2shi13;s[32]=t2slo16^~t2slo17&t2slo18;s[33]=t2shi16^~t2shi17&t2shi18;s[42]=t2slo21^~t2slo22&t2slo23;s[43]=t2shi21^~t2shi22&t2shi23;s[4]=t2slo2^~t2slo3&t2slo4;s[5]=t2shi2^~t2shi3&t2shi4;s[14]=t2slo7^~t2slo8&t2slo9;s[15]=t2shi7^~t2shi8&t2shi9;s[24]=t2slo12^~t2slo13&t2slo14;s[25]=t2shi12^~t2shi13&t2shi14;s[34]=t2slo17^~t2slo18&t2slo19;s[35]=t2shi17^~t2shi18&t2shi19;s[44]=t2slo22^~t2slo23&t2slo24;s[45]=t2shi22^~t2shi23&t2shi24;s[6]=t2slo3^~t2slo4&t2slo0;s[7]=t2shi3^~t2shi4&t2shi0;s[16]=t2slo8^~t2slo9&t2slo5;s[17]=t2shi8^~t2shi9&t2shi5;s[26]=t2slo13^~t2slo14&t2slo10;s[27]=t2shi13^~t2shi14&t2shi10;s[36]=t2slo18^~t2slo19&t2slo15;s[37]=t2shi18^~t2shi19&t2shi15;s[46]=t2slo23^~t2slo24&t2slo20;s[47]=t2shi23^~t2shi24&t2shi20;s[8]=t2slo4^~t2slo0&t2slo1;s[9]=t2shi4^~t2shi0&t2shi1;s[18]=t2slo9^~t2slo5&t2slo6;s[19]=t2shi9^~t2shi5&t2shi6;s[28]=t2slo14^~t2slo10&t2slo11;s[29]=t2shi14^~t2shi10&t2shi11;s[38]=t2slo19^~t2slo15&t2slo16;s[39]=t2shi19^~t2shi15&t2shi16;s[48]=t2slo24^~t2slo20&t2slo21;s[49]=t2shi24^~t2shi20&t2shi21;s[0]^=P1600_ROUND_CONSTANTS[round*2];s[1]^=P1600_ROUND_CONSTANTS[round*2+1];}};},967:function(module){module.exports=require("cluster");},968:function(module,__unusedexports,__webpack_require__){"use strict";const leftPad=__webpack_require__(6485);module.exports.toRFC3339=time=>{const year=time.getUTCFullYear();const month=leftPad(time.getUTCMonth()+1,2,'0');const day=leftPad(time.getUTCDate(),2,'0');const hour=leftPad(time.getUTCHours(),2,'0');const minute=leftPad(time.getUTCMinutes(),2,'0');const seconds=leftPad(time.getUTCSeconds(),2,'0');const milliseconds=time.getUTCMilliseconds();const nanoseconds=milliseconds*1000*1000;return`${year}-${month}-${day}T${hour}:${minute}:${seconds}.${nanoseconds}Z`;};module.exports.parseRFC3339=time=>{const rfc3339Matcher=new RegExp('(\\d{4})-(\\d{2})-(\\d{2})T'+'(\\d{2}):(\\d{2}):(\\d{2})'+'\\.(\\d+)Z');const m=String(time).trim().match(rfc3339Matcher);if(!m){throw new Error('Invalid format');}const year=parseInt(m[1],10);const month=parseInt(m[2],10)-1;const date=parseInt(m[3],10);const hour=parseInt(m[4],10);const minute=parseInt(m[5],10);const second=parseInt(m[6],10);const millisecond=parseInt(m[7].slice(0,-6),10);return new Date(Date.UTC(year,month,date,hour,minute,second,millisecond));};},973:function(__unusedmodule,exports,__webpack_require__){"use strict";const leftPad=__webpack_require__(6485);const Key=__webpack_require__(759).Key;const readme=__webpack_require__(9441);const PREFIX=exports.PREFIX='/repo/flatfs/shard/';const SHARDING_FN=exports.SHARDING_FN='SHARDING';exports.README_FN='_README';class Shard{constructor(param){this.param=param;}fun(str){throw new Error('implement me');}toString(){return`${PREFIX}v1/${this.name}/${this.param}`;}}class Prefix extends Shard{constructor(prefixLen){super(prefixLen);this._padding=leftPad('',prefixLen,'_');this.name='prefix';}fun(noslash){return(noslash+this._padding).slice(0,this.param);}}class Suffix extends Shard{constructor(suffixLen){super(suffixLen);this._padding=leftPad('',suffixLen,'_');this.name='suffix';}fun(noslash){const s=this._padding+noslash;return s.slice(s.length-this.param);}}class NextToLast extends Shard{constructor(suffixLen){super(suffixLen);this._padding=leftPad('',suffixLen+1,'_');this.name='next-to-last';}fun(noslash){const s=this._padding+noslash;const offset=s.length-this.param-1;return s.slice(offset,offset+this.param);}}function parseShardFun(str){str=str.trim();if(str.length===0){throw new Error('empty shard string');}if(!str.startsWith(PREFIX)){throw new Error(`invalid or no path prefix: ${str}`);}const parts=str.slice(PREFIX.length).split('/');const version=parts[0];if(version!=='v1'){throw new Error(`expect 'v1' version, got '${version}'`);}const name=parts[1];if(!parts[2]){throw new Error('missing param');}const param=parseInt(parts[2],10);switch(name){case'prefix':return new Prefix(param);case'suffix':return new Suffix(param);case'next-to-last':return new NextToLast(param);default:throw new Error(`unkown sharding function: ${name}`);}}exports.readShardFun=(path,store,callback)=>{const key=new Key(path).child(new Key(SHARDING_FN));const get=typeof store.getRaw==='function'?store.getRaw.bind(store):store.get.bind(store);get(key,(err,res)=>{if(err){return callback(err);}let shard;try{shard=parseShardFun((res||'').toString().trim());}catch(err){return callback(err);}callback(null,shard);});};exports.readme=readme;exports.parseShardFun=parseShardFun;exports.Prefix=Prefix;exports.Suffix=Suffix;exports.NextToLast=NextToLast;},974:function(module,exports,__webpack_require__){"use strict";const DAGLink=__webpack_require__(7545);const{cid}=__webpack_require__(7954);exports=module.exports;function cloneData(dagNode){let data;if(dagNode.data&&dagNode.data.length>0){data=Buffer.alloc(dagNode.data.length);dagNode.data.copy(data);}else{data=Buffer.alloc(0);}return data;}function cloneLinks(dagNode){return dagNode.links.slice();}function linkSort(a,b){return Buffer.compare(a.nameAsBuffer,b.nameAsBuffer);}function toDAGLink(node,options,callback){if(typeof options==='function'){callback=options;options={};}cid(node,options,(error,cid)=>{if(error){return callback(error);}callback(null,new DAGLink(options.name||'',node.size,cid));});}exports.cloneData=cloneData;exports.cloneLinks=cloneLinks;exports.linkSort=linkSort;exports.toDAGLink=toDAGLink;},980:function(module,__unusedexports,__webpack_require__){module.exports=__webpack_require__(2984).createHash;},983:function(module,__unusedexports,__webpack_require__){const bscript=__webpack_require__(5099);const OPS=__webpack_require__(9710);function check(script){const buffer=bscript.compile(script);return buffer.length===23&&buffer[0]===OPS.OP_HASH160&&buffer[1]===0x14&&buffer[22]===OPS.OP_EQUAL;}check.toJSON=function(){return'scriptHash output';};module.exports={check};},1002:function(module,__unusedexports,__webpack_require__){"use strict";var _=__webpack_require__(6064);var BlockHeader=__webpack_require__(4951);var BufferUtil=__webpack_require__(9657);var BufferReader=__webpack_require__(412);var BufferWriter=__webpack_require__(2418);var Hash=__webpack_require__(2442);var JSUtil=__webpack_require__(8416);var Transaction=__webpack_require__(2548);var $=__webpack_require__(5107);function MerkleBlock(arg){if(!(this instanceof MerkleBlock)){return new MerkleBlock(arg);}var info={};if(BufferUtil.isBuffer(arg)){info=MerkleBlock._fromBufferReader(BufferReader(arg));}else if(_.isObject(arg)){var header;if(arg.header instanceof BlockHeader){header=arg.header;}else{header=BlockHeader.fromObject(arg.header);}info={header:header,numTransactions:arg.numTransactions,hashes:arg.hashes,flags:arg.flags};}else{throw new TypeError('Unrecognized argument for MerkleBlock');}_.extend(this,info);this._flagBitsUsed=0;this._hashesUsed=0;return this;}MerkleBlock.fromBuffer=function fromBuffer(buf){return MerkleBlock.fromBufferReader(BufferReader(buf));};MerkleBlock.fromBufferReader=function fromBufferReader(br){return new MerkleBlock(MerkleBlock._fromBufferReader(br));};MerkleBlock.prototype.toBuffer=function toBuffer(){return this.toBufferWriter().concat();};MerkleBlock.prototype.toBufferWriter=function toBufferWriter(bw){if(!bw){bw=new BufferWriter();}bw.write(this.header.toBuffer());bw.writeUInt32LE(this.numTransactions);bw.writeVarintNum(this.hashes.length);for(var i=0;i<this.hashes.length;i++){bw.write(new Buffer(this.hashes[i],'hex'));}bw.writeVarintNum(this.flags.length);for(i=0;i<this.flags.length;i++){bw.writeUInt8(this.flags[i]);}return bw;};MerkleBlock.prototype.toObject=MerkleBlock.prototype.toJSON=function toObject(){return{header:this.header.toObject(),numTransactions:this.numTransactions,hashes:this.hashes,flags:this.flags};};MerkleBlock.prototype.validMerkleTree=function validMerkleTree(){$.checkState(_.isArray(this.flags),'MerkleBlock flags is not an array');$.checkState(_.isArray(this.hashes),'MerkleBlock hashes is not an array');if(this.hashes.length>this.numTransactions){return false;}if(this.flags.length*8<this.hashes.length){return false;}var height=this._calcTreeHeight();var opts={hashesUsed:0,flagBitsUsed:0};var root=this._traverseMerkleTree(height,0,opts);if(opts.hashesUsed!==this.hashes.length){return false;}return BufferUtil.equals(root,this.header.merkleRoot);};MerkleBlock.prototype._traverseMerkleTree=function traverseMerkleTree(depth,pos,opts){opts=opts||{};opts.txs=opts.txs||[];opts.flagBitsUsed=opts.flagBitsUsed||0;opts.hashesUsed=opts.hashesUsed||0;if(opts.flagBitsUsed>this.flags.length*8){return null;}var isParentOfMatch=this.flags[opts.flagBitsUsed>>3]>>>(opts.flagBitsUsed++&7)&1;if(depth===0||!isParentOfMatch){if(opts.hashesUsed>=this.hashes.length){return null;}var hash=this.hashes[opts.hashesUsed++];if(depth===0&&isParentOfMatch){opts.txs.push(hash);}return new Buffer(hash,'hex');}else{var left=this._traverseMerkleTree(depth-1,pos*2,opts);var right=left;if(pos*2+1<this._calcTreeWidth(depth-1)){right=this._traverseMerkleTree(depth-1,pos*2+1,opts);}return Hash.sha256sha256(new Buffer.concat([left,right]));}};MerkleBlock.prototype._calcTreeWidth=function calcTreeWidth(height){return this.numTransactions+(1<<height)-1>>height;};MerkleBlock.prototype._calcTreeHeight=function calcTreeHeight(){var height=0;while(this._calcTreeWidth(height)>1){height++;}return height;};MerkleBlock.prototype.hasTransaction=function hasTransaction(tx){$.checkArgument(!_.isUndefined(tx),'tx cannot be undefined');$.checkArgument(tx instanceof Transaction||typeof tx==='string','Invalid tx given, tx must be a "string" or "Transaction"');var hash=tx;if(tx instanceof Transaction){hash=BufferUtil.reverse(new Buffer(tx.id,'hex')).toString('hex');}var txs=[];var height=this._calcTreeHeight();this._traverseMerkleTree(height,0,{txs:txs});return txs.indexOf(hash)!==-1;};MerkleBlock._fromBufferReader=function _fromBufferReader(br){$.checkState(!br.finished(),'No merkleblock data received');var info={};info.header=BlockHeader.fromBufferReader(br);info.numTransactions=br.readUInt32LE();var numHashes=br.readVarintNum();info.hashes=[];for(var i=0;i<numHashes;i++){info.hashes.push(br.read(32).toString('hex'));}var numFlags=br.readVarintNum();info.flags=[];for(i=0;i<numFlags;i++){info.flags.push(br.readUInt8());}return info;};MerkleBlock.fromObject=function fromObject(obj){return new MerkleBlock(obj);};module.exports=MerkleBlock;},1007:function(module,__unusedexports,__webpack_require__){module.exports=__webpack_require__(1976);},1014:function(module){"use strict";module.exports=clone;function clone(obj){if(obj===null||typeof obj!=='object')return obj;if(obj instanceof Object)var copy={__proto__:obj.__proto__};else var copy=Object.create(null);Object.getOwnPropertyNames(obj).forEach(function(key){Object.defineProperty(copy,key,Object.getOwnPropertyDescriptor(obj,key));});return copy;}},1015:function(module){var isArray=Array.isArray;module.exports=isArray;},1018:function(module,__unusedexports,__webpack_require__){"use strict";const EventEmitter=__webpack_require__(4859);const Stat=__webpack_require__(9075);const OldPeers=__webpack_require__(4275);const defaultOptions={computeThrottleMaxQueueSize:1000,computeThrottleTimeout:2000,movingAverageIntervals:[60*1000,5*60*1000,15*60*1000],maxOldPeersRetention:50};const initialCounters=['dataReceived','dataSent'];const directionToEvent={in:'dataReceived',out:'dataSent'};module.exports=(observer,_options)=>{const options=Object.assign({},defaultOptions,_options);const globalStats=new Stat(initialCounters,options);const stats=Object.assign(new EventEmitter(),{start:start,stop:stop,global:globalStats,peers:()=>Array.from(peerStats.keys()),forPeer:peerId=>{return peerStats.get(peerId)||oldPeers.get(peerId);},transports:()=>Array.from(transportStats.keys()),forTransport:transport=>transportStats.get(transport),protocols:()=>Array.from(protocolStats.keys()),forProtocol:protocol=>protocolStats.get(protocol)});globalStats.on('update',propagateChange);const oldPeers=OldPeers(options.maxOldPeersRetention);const peerStats=new Map();const transportStats=new Map();const protocolStats=new Map();observer.on('peer:closed',peerId=>{const peer=peerStats.get(peerId);if(peer){peer.removeListener('update',propagateChange);peer.stop();peerStats.delete(peerId);oldPeers.set(peerId,peer);}});return stats;function onMessage(peerId,transportTag,protocolTag,direction,bufferLength){const event=directionToEvent[direction];if(transportTag){globalStats.push(event,bufferLength);let peer=peerStats.get(peerId);if(!peer){peer=oldPeers.get(peerId);if(peer){oldPeers.delete(peerId);}else{peer=new Stat(initialCounters,options);}peer.on('update',propagateChange);peer.start();peerStats.set(peerId,peer);}peer.push(event,bufferLength);}if(transportTag){let transport=transportStats.get(transportTag);if(!transport){transport=new Stat(initialCounters,options);transport.on('update',propagateChange);transportStats.set(transportTag,transport);}transport.push(event,bufferLength);}if(protocolTag){let protocol=protocolStats.get(protocolTag);if(!protocol){protocol=new Stat(initialCounters,options);protocol.on('update',propagateChange);protocolStats.set(protocolTag,protocol);}protocol.push(event,bufferLength);}}function start(){observer.on('message',onMessage);globalStats.start();for(let peerStat of peerStats.values()){peerStat.start();}for(let transportStat of transportStats.values()){transportStat.start();}}function stop(){observer.removeListener('message',onMessage);globalStats.stop();for(let peerStat of peerStats.values()){peerStat.stop();}for(let transportStat of transportStats.values()){transportStat.stop();}}function propagateChange(){stats.emit('update');}};},1021:function(module){module.exports=['SIGABRT','SIGALRM','SIGHUP','SIGINT','SIGTERM'];if(process.platform!=='win32'){module.exports.push('SIGVTALRM','SIGXCPU','SIGXFSZ','SIGUSR2','SIGTRAP','SIGSYS','SIGQUIT','SIGIOT');}if(process.platform==='linux'){module.exports.push('SIGIO','SIGPOLL','SIGPWR','SIGSTKFLT','SIGUNUSED');}},1028:function(module,__unusedexports,__webpack_require__){"use strict";const Queue=__webpack_require__(7110);const uuid=__webpack_require__(1245);const pull=__webpack_require__(2885);const sioname=(type,name)=>'socket.io-pull-stream.'+type+(name?'.'+name:'');const debug=__webpack_require__(4126);const _log=debug('socket.io-pull-stream');function doCodec(codec,data){if(data==null)return data;try{return codec(data);}catch(e){console.error('Codec Error');console.error(e);return false;}}const codecs={hex:{encode:v=>v.toString('hex'),decode:v=>Buffer.from(v,'hex')},plain:{encode:v=>v,decode:v=>v},buffer:{encode:v=>Buffer.from(v),decode:v=>Buffer.from(v)}};function getCodec(c){if(!c)c='plain';if(typeof c==='object')return c;const co=codecs[c];if(!co)throw new Error('Invalid codec '+c);return co;}function SIOSource(sio,id,opt){const q=Queue();const log=sio.sioplog.bind(sio.sioplog,'source('+id+')');const codec=getCodec(opt.codec).decode;log('create source');sio.emit(sioname('accept',id));function unlisten(){sio.removeAllListeners(sioname('error',id));sio.removeAllListeners(sioname('queue',id));}sio.on(sioname('error',id),err=>{if(err===true)log('finish');else log('error');unlisten();q.append({end:err});});sio.on(sioname('queue',id),data=>{log('queue data');q.append({data:doCodec(codec,data)});});sio.once('disconnect',()=>{unlisten();q.append({end:true});});return function(end,cb){log('reading');if(end)return cb(end);q.get((err,data)=>{if(err)return cb(err);if(data.end){q.error(data.end);return cb(data.end);}return cb(null,data.data);});};}function SIOSink(sio,id,opt){const q=Queue();const log=sio.sioplog.bind(sio.sioplog,'  sink('+id+')');const codec=getCodec(opt.codec).encode;let ended;log('create sink');sio.once(sioname('accept',id),()=>{log('start transmission');function loop(){q.get((_,val)=>{let{data,err}=val||{};if(_)err=_;log('send',err&&err===true?'finish':err?'error':data?'data':'<invalid>');if(err&&!_)q.error(err);if(err)return sio.emit(sioname('error',id),err);if(data)sio.emit(sioname('queue',id),doCodec(codec,data));loop();});}loop();});function doErr(end){q.append({err:end});ended=end;}sio.once('disconnect',()=>doErr(true));return function(read){read(null,function next(end,data){if(end)return doErr(end);if(ended)return read(ended,next);q.append({data});read(null,next);});};}module.exports=function SIOPullStream(sio,opt){if(sio.createSink)return;sio.sioplog=sio.id?_log.bind(_log,'['+sio.id+']'):_log;sio.createSink=(id,_)=>{if(!id)id=uuid();const sink=SIOSink(sio,id,opt||_);sink.id=id;return sink;};sio.createSource=(id,_)=>{const source=SIOSource(sio,id,opt||_);source.id=id;return source;};sio.createProxy=(id,tsio,_)=>{pull(sio.createSource(id,_),tsio.createSink(id,_));};};},1045:function(module,__unusedexports,__webpack_require__){"use strict";var _=__webpack_require__(6064);var errors=__webpack_require__(6379);var $=__webpack_require__(5107);var UNITS={'BTC':[1e8,8],'mBTC':[1e5,5],'uBTC':[1e2,2],'bits':[1e2,2],'satoshis':[1,0]};function Unit(amount,code){if(!(this instanceof Unit)){return new Unit(amount,code);}if(_.isNumber(code)){if(code<=0){throw new errors.Unit.InvalidRate(code);}amount=amount/code;code=Unit.BTC;}this._value=this._from(amount,code);var self=this;var defineAccesor=function(key){Object.defineProperty(self,key,{get:function(){return self.to(key);},enumerable:true});};Object.keys(UNITS).forEach(defineAccesor);}Object.keys(UNITS).forEach(function(key){Unit[key]=key;});Unit.fromObject=function fromObject(data){$.checkArgument(_.isObject(data),'Argument is expected to be an object');return new Unit(data.amount,data.code);};Unit.fromBTC=function(amount){return new Unit(amount,Unit.BTC);};Unit.fromMillis=Unit.fromMilis=function(amount){return new Unit(amount,Unit.mBTC);};Unit.fromMicros=Unit.fromBits=function(amount){return new Unit(amount,Unit.bits);};Unit.fromSatoshis=function(amount){return new Unit(amount,Unit.satoshis);};Unit.fromFiat=function(amount,rate){return new Unit(amount,rate);};Unit.prototype._from=function(amount,code){if(!UNITS[code]){throw new errors.Unit.UnknownCode(code);}return parseInt((amount*UNITS[code][0]).toFixed());};Unit.prototype.to=function(code){if(_.isNumber(code)){if(code<=0){throw new errors.Unit.InvalidRate(code);}return parseFloat((this.BTC*code).toFixed(2));}if(!UNITS[code]){throw new errors.Unit.UnknownCode(code);}var value=this._value/UNITS[code][0];return parseFloat(value.toFixed(UNITS[code][1]));};Unit.prototype.toBTC=function(){return this.to(Unit.BTC);};Unit.prototype.toMillis=Unit.prototype.toMilis=function(){return this.to(Unit.mBTC);};Unit.prototype.toMicros=Unit.prototype.toBits=function(){return this.to(Unit.bits);};Unit.prototype.toSatoshis=function(){return this.to(Unit.satoshis);};Unit.prototype.atRate=function(rate){return this.to(rate);};Unit.prototype.toString=function(){return this.satoshis+' satoshis';};Unit.prototype.toObject=Unit.prototype.toJSON=function toObject(){return{amount:this.BTC,code:Unit.BTC};};Unit.prototype.inspect=function(){return'<Unit: '+this.toString()+'>';};module.exports=Unit;},1066:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _identity=__webpack_require__(4314);var _identity2=_interopRequireDefault(_identity);var _createTester=__webpack_require__(476);var _createTester2=_interopRequireDefault(_createTester);var _doParallel=__webpack_require__(5847);var _doParallel2=_interopRequireDefault(_doParallel);var _findGetResult=__webpack_require__(4787);var _findGetResult2=_interopRequireDefault(_findGetResult);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}exports.default=(0,_doParallel2.default)((0,_createTester2.default)(_identity2.default,_findGetResult2.default));module.exports=exports['default'];},1080:function(__unusedmodule,exports,__webpack_require__){"use strict";const crypto=__webpack_require__(2984);const randomBytes=__webpack_require__(3532);const nextTick=__webpack_require__(7173);let keypair;try{if(process.env.LP2P_FORCE_CRYPTO_LIB==='keypair'){throw new Error('Force keypair usage');}const ursa=__webpack_require__(1529);keypair=({bits})=>{const key=ursa.generatePrivateKey(bits);return{private:key.toPrivatePem(),public:key.toPublicPem()};};}catch(e){if(process.env.LP2P_FORCE_CRYPTO_LIB==='ursa'){throw e;}keypair=__webpack_require__(9957);}const pemToJwk=__webpack_require__(2521).pem2jwk;const jwkToPem=__webpack_require__(2521).jwk2pem;exports.utils=__webpack_require__(3024);exports.generateKey=function(bits,callback){nextTick(()=>{let result;try{const key=keypair({bits:bits});result={privateKey:pemToJwk(key.private),publicKey:pemToJwk(key.public)};}catch(err){return callback(err);}callback(null,result);});};exports.unmarshalPrivateKey=function(key,callback){nextTick(()=>{if(!key){return callback(new Error('Key is invalid'));}callback(null,{privateKey:key,publicKey:{kty:key.kty,n:key.n,e:key.e}});});};exports.getRandomValues=randomBytes;exports.hashAndSign=function(key,msg,callback){nextTick(()=>{let result;try{const sign=crypto.createSign('RSA-SHA256');sign.update(msg);const pem=jwkToPem(key);result=sign.sign(pem);}catch(err){return callback(new Error('Key or message is invalid!: '+err.message));}callback(null,result);});};exports.hashAndVerify=function(key,sig,msg,callback){nextTick(()=>{let result;try{const verify=crypto.createVerify('RSA-SHA256');verify.update(msg);const pem=jwkToPem(key);result=verify.verify(pem,sig);}catch(err){return callback(new Error('Key or message is invalid!:'+err.message));}callback(null,result);});};},1087:function(module,__unusedexports,__webpack_require__){var forge=__webpack_require__(7938);forge.pki=forge.pki||{};var oids=module.exports=forge.pki.oids=forge.oids=forge.oids||{};function _IN(id,name){oids[id]=name;oids[name]=id;}function _I_(id,name){oids[id]=name;}_IN('1.2.840.113549.1.1.1','rsaEncryption');_IN('1.2.840.113549.1.1.4','md5WithRSAEncryption');_IN('1.2.840.113549.1.1.5','sha1WithRSAEncryption');_IN('1.2.840.113549.1.1.7','RSAES-OAEP');_IN('1.2.840.113549.1.1.8','mgf1');_IN('1.2.840.113549.1.1.9','pSpecified');_IN('1.2.840.113549.1.1.10','RSASSA-PSS');_IN('1.2.840.113549.1.1.11','sha256WithRSAEncryption');_IN('1.2.840.113549.1.1.12','sha384WithRSAEncryption');_IN('1.2.840.113549.1.1.13','sha512WithRSAEncryption');_IN('1.2.840.10040.4.3','dsa-with-sha1');_IN('1.3.14.3.2.7','desCBC');_IN('1.3.14.3.2.26','sha1');_IN('2.16.840.1.101.3.4.2.1','sha256');_IN('2.16.840.1.101.3.4.2.2','sha384');_IN('2.16.840.1.101.3.4.2.3','sha512');_IN('1.2.840.113549.2.5','md5');_IN('1.2.840.113549.1.7.1','data');_IN('1.2.840.113549.1.7.2','signedData');_IN('1.2.840.113549.1.7.3','envelopedData');_IN('1.2.840.113549.1.7.4','signedAndEnvelopedData');_IN('1.2.840.113549.1.7.5','digestedData');_IN('1.2.840.113549.1.7.6','encryptedData');_IN('1.2.840.113549.1.9.1','emailAddress');_IN('1.2.840.113549.1.9.2','unstructuredName');_IN('1.2.840.113549.1.9.3','contentType');_IN('1.2.840.113549.1.9.4','messageDigest');_IN('1.2.840.113549.1.9.5','signingTime');_IN('1.2.840.113549.1.9.6','counterSignature');_IN('1.2.840.113549.1.9.7','challengePassword');_IN('1.2.840.113549.1.9.8','unstructuredAddress');_IN('1.2.840.113549.1.9.14','extensionRequest');_IN('1.2.840.113549.1.9.20','friendlyName');_IN('1.2.840.113549.1.9.21','localKeyId');_IN('1.2.840.113549.1.9.22.1','x509Certificate');_IN('1.2.840.113549.1.12.10.1.1','keyBag');_IN('1.2.840.113549.1.12.10.1.2','pkcs8ShroudedKeyBag');_IN('1.2.840.113549.1.12.10.1.3','certBag');_IN('1.2.840.113549.1.12.10.1.4','crlBag');_IN('1.2.840.113549.1.12.10.1.5','secretBag');_IN('1.2.840.113549.1.12.10.1.6','safeContentsBag');_IN('1.2.840.113549.1.5.13','pkcs5PBES2');_IN('1.2.840.113549.1.5.12','pkcs5PBKDF2');_IN('1.2.840.113549.1.12.1.1','pbeWithSHAAnd128BitRC4');_IN('1.2.840.113549.1.12.1.2','pbeWithSHAAnd40BitRC4');_IN('1.2.840.113549.1.12.1.3','pbeWithSHAAnd3-KeyTripleDES-CBC');_IN('1.2.840.113549.1.12.1.4','pbeWithSHAAnd2-KeyTripleDES-CBC');_IN('1.2.840.113549.1.12.1.5','pbeWithSHAAnd128BitRC2-CBC');_IN('1.2.840.113549.1.12.1.6','pbewithSHAAnd40BitRC2-CBC');_IN('1.2.840.113549.2.7','hmacWithSHA1');_IN('1.2.840.113549.2.8','hmacWithSHA224');_IN('1.2.840.113549.2.9','hmacWithSHA256');_IN('1.2.840.113549.2.10','hmacWithSHA384');_IN('1.2.840.113549.2.11','hmacWithSHA512');_IN('1.2.840.113549.3.7','des-EDE3-CBC');_IN('2.16.840.1.101.3.4.1.2','aes128-CBC');_IN('2.16.840.1.101.3.4.1.22','aes192-CBC');_IN('2.16.840.1.101.3.4.1.42','aes256-CBC');_IN('2.5.4.3','commonName');_IN('2.5.4.5','serialName');_IN('2.5.4.6','countryName');_IN('2.5.4.7','localityName');_IN('2.5.4.8','stateOrProvinceName');_IN('2.5.4.10','organizationName');_IN('2.5.4.11','organizationalUnitName');_IN('2.16.840.1.113730.1.1','nsCertType');_I_('2.5.29.1','authorityKeyIdentifier');_I_('2.5.29.2','keyAttributes');_I_('2.5.29.3','certificatePolicies');_I_('2.5.29.4','keyUsageRestriction');_I_('2.5.29.5','policyMapping');_I_('2.5.29.6','subtreesConstraint');_I_('2.5.29.7','subjectAltName');_I_('2.5.29.8','issuerAltName');_I_('2.5.29.9','subjectDirectoryAttributes');_I_('2.5.29.10','basicConstraints');_I_('2.5.29.11','nameConstraints');_I_('2.5.29.12','policyConstraints');_I_('2.5.29.13','basicConstraints');_IN('2.5.29.14','subjectKeyIdentifier');_IN('2.5.29.15','keyUsage');_I_('2.5.29.16','privateKeyUsagePeriod');_IN('2.5.29.17','subjectAltName');_IN('2.5.29.18','issuerAltName');_IN('2.5.29.19','basicConstraints');_I_('2.5.29.20','cRLNumber');_I_('2.5.29.21','cRLReason');_I_('2.5.29.22','expirationDate');_I_('2.5.29.23','instructionCode');_I_('2.5.29.24','invalidityDate');_I_('2.5.29.25','cRLDistributionPoints');_I_('2.5.29.26','issuingDistributionPoint');_I_('2.5.29.27','deltaCRLIndicator');_I_('2.5.29.28','issuingDistributionPoint');_I_('2.5.29.29','certificateIssuer');_I_('2.5.29.30','nameConstraints');_IN('2.5.29.31','cRLDistributionPoints');_IN('2.5.29.32','certificatePolicies');_I_('2.5.29.33','policyMappings');_I_('2.5.29.34','policyConstraints');_IN('2.5.29.35','authorityKeyIdentifier');_I_('2.5.29.36','policyConstraints');_IN('2.5.29.37','extKeyUsage');_I_('2.5.29.46','freshestCRL');_I_('2.5.29.54','inhibitAnyPolicy');_IN('1.3.6.1.4.1.11129.2.4.2','timestampList');_IN('1.3.6.1.5.5.7.1.1','authorityInfoAccess');_IN('1.3.6.1.5.5.7.3.1','serverAuth');_IN('1.3.6.1.5.5.7.3.2','clientAuth');_IN('1.3.6.1.5.5.7.3.3','codeSigning');_IN('1.3.6.1.5.5.7.3.4','emailProtection');_IN('1.3.6.1.5.5.7.3.8','timeStamping');},1094:function(module,__unusedexports,__webpack_require__){var hashClear=__webpack_require__(4180),hashDelete=__webpack_require__(2656),hashGet=__webpack_require__(2463),hashHas=__webpack_require__(7473),hashSet=__webpack_require__(4219);function Hash(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1]);}}Hash.prototype.clear=hashClear;Hash.prototype['delete']=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;module.exports=Hash;},1102:function(module,__unusedexports,__webpack_require__){"use strict";const each=__webpack_require__(4486);const eachSeries=__webpack_require__(9891);const waterfall=__webpack_require__(4265);const nextTick=__webpack_require__(7173);const map=__webpack_require__(7011);const debounce=__webpack_require__(7659);const Message=__webpack_require__(9683);const Wantlist=__webpack_require__(668);const Ledger=__webpack_require__(486);const{logger,groupBy,pullAllWith,uniqWith}=__webpack_require__(8047);const MAX_MESSAGE_SIZE=512*1024;class DecisionEngine{constructor(peerId,blockstore,network,stats){this._log=logger(peerId,'engine');this.blockstore=blockstore;this.network=network;this._stats=stats;this.ledgerMap=new Map();this._running=false;this._tasks=[];this._outbox=debounce(this._processTasks.bind(this),100);}_sendBlocks(peer,blocks,cb){const total=blocks.reduce((acc,b)=>{return acc+b.data.byteLength;},0);if(total<MAX_MESSAGE_SIZE){return this._sendSafeBlocks(peer,blocks,cb);}let size=0;let batch=[];let outstanding=blocks.length;eachSeries(blocks,(b,cb)=>{outstanding--;batch.push(b);size+=b.data.byteLength;if(size>=MAX_MESSAGE_SIZE||outstanding===0){size=0;const nextBatch=batch.slice();batch=[];this._sendSafeBlocks(peer,nextBatch,err=>{if(err){this._log('sendblock error: %s',err.message);}cb();});}else{nextTick(cb);}},cb);}_sendSafeBlocks(peer,blocks,cb){const msg=new Message(false);blocks.forEach(b=>msg.addBlock(b));this.network.sendMessage(peer,msg,cb);}_processTasks(){if(!this._running||!this._tasks.length){return;}const tasks=this._tasks;this._tasks=[];const entries=tasks.map(t=>t.entry);const cids=entries.map(e=>e.cid);const uniqCids=uniqWith((a,b)=>a.equals(b),cids);const groupedTasks=groupBy(task=>task.target.toB58String(),tasks);waterfall([callback=>map(uniqCids,(cid,cb)=>{this.blockstore.get(cid,cb);},callback),(blocks,callback)=>each(Object.values(groupedTasks),(tasks,cb)=>{const peer=tasks[0].target;const blockList=cids.map(cid=>{return blocks.find(b=>b.cid.equals(cid));});this._sendBlocks(peer,blockList,err=>{if(err){this._log.error('should never happen: ',err);}else{blockList.forEach(block=>this.messageSent(peer,block));}cb();});},callback)],err=>{this._tasks=[];if(err){this._log.error(err);}});}wantlistForPeer(peerId){const peerIdStr=peerId.toB58String();if(!this.ledgerMap.has(peerIdStr)){return new Map();}return this.ledgerMap.get(peerIdStr).wantlist.sortedEntries();}ledgerForPeer(peerId){const peerIdStr=peerId.toB58String();const ledger=this.ledgerMap.get(peerIdStr);if(!ledger){return null;}return{peer:ledger.partner.toPrint(),value:ledger.debtRatio(),sent:ledger.accounting.bytesSent,recv:ledger.accounting.bytesRecv,exchanged:ledger.exchangeCount};}peers(){return Array.from(this.ledgerMap.values()).map(l=>l.partner);}receivedBlocks(cids){if(!cids.length){return;}this.ledgerMap.forEach(ledger=>{cids.map(cid=>ledger.wantlistContains(cid)).filter(Boolean).forEach(entry=>{this._tasks.push({entry:entry,target:ledger.partner});});});this._outbox();}messageReceived(peerId,msg,cb){const ledger=this._findOrCreate(peerId);if(msg.empty){return nextTick(cb);}if(msg.full){ledger.wantlist=new Wantlist();}this._processBlocks(msg.blocks,ledger);if(msg.wantlist.size===0){return nextTick(cb);}let cancels=[];let wants=[];msg.wantlist.forEach(entry=>{if(entry.cancel){ledger.cancelWant(entry.cid);cancels.push(entry);}else{ledger.wants(entry.cid,entry.priority);wants.push(entry);}});this._cancelWants(ledger,peerId,cancels);this._addWants(ledger,peerId,wants,cb);}_cancelWants(ledger,peerId,entries){const id=peerId.toB58String();this._tasks=pullAllWith((t,e)=>{const sameTarget=t.target.toB58String()===id;const sameCid=t.entry.cid.equals(e.cid);return sameTarget&&sameCid;},this._tasks,entries);}_addWants(ledger,peerId,entries,callback){each(entries,(entry,cb)=>{this.blockstore.has(entry.cid,(err,exists)=>{if(err){this._log.error('failed existence check');}else if(exists){this._tasks.push({entry:entry.entry,target:peerId});}cb();});},()=>{this._outbox();callback();});}_processBlocks(blocks,ledger,callback){const cids=[];blocks.forEach((b,cidStr)=>{this._log('got block (%s bytes)',b.data.length);ledger.receivedBytes(b.data.length);cids.push(b.cid);});this.receivedBlocks(cids);}messageSent(peerId,block){const ledger=this._findOrCreate(peerId);ledger.sentBytes(block?block.data.length:0);if(block&&block.cid){ledger.wantlist.remove(block.cid);}}numBytesSentTo(peerId){return this._findOrCreate(peerId).accounting.bytesSent;}numBytesReceivedFrom(peerId){return this._findOrCreate(peerId).accounting.bytesRecv;}peerDisconnected(peerId){}_findOrCreate(peerId){const peerIdStr=peerId.toB58String();if(this.ledgerMap.has(peerIdStr)){return this.ledgerMap.get(peerIdStr);}const l=new Ledger(peerId);this.ledgerMap.set(peerIdStr,l);if(this._stats){this._stats.push(peerIdStr,'peerCount',1);}return l;}start(callback){this._running=true;nextTick(()=>callback());}stop(callback){this._running=false;nextTick(()=>callback());}}module.exports=DecisionEngine;},1111:function(__unusedmodule,exports,__webpack_require__){"use strict";var Buffer=__webpack_require__(1173).Buffer;exports.utf7=Utf7Codec;exports.unicode11utf7='utf7';function Utf7Codec(codecOptions,iconv){this.iconv=iconv;};Utf7Codec.prototype.encoder=Utf7Encoder;Utf7Codec.prototype.decoder=Utf7Decoder;Utf7Codec.prototype.bomAware=true;var nonDirectChars=/[^A-Za-z0-9'\(\),-\.\/:\? \n\r\t]+/g;function Utf7Encoder(options,codec){this.iconv=codec.iconv;}Utf7Encoder.prototype.write=function(str){return Buffer.from(str.replace(nonDirectChars,function(chunk){return"+"+(chunk==='+'?'':this.iconv.encode(chunk,'utf16-be').toString('base64').replace(/=+$/,''))+"-";}.bind(this)));};Utf7Encoder.prototype.end=function(){};function Utf7Decoder(options,codec){this.iconv=codec.iconv;this.inBase64=false;this.base64Accum='';}var base64Regex=/[A-Za-z0-9\/+]/;var base64Chars=[];for(var i=0;i<256;i++)base64Chars[i]=base64Regex.test(String.fromCharCode(i));var plusChar='+'.charCodeAt(0),minusChar='-'.charCodeAt(0),andChar='&'.charCodeAt(0);Utf7Decoder.prototype.write=function(buf){var res="",lastI=0,inBase64=this.inBase64,base64Accum=this.base64Accum;for(var i=0;i<buf.length;i++){if(!inBase64){if(buf[i]==plusChar){res+=this.iconv.decode(buf.slice(lastI,i),"ascii");lastI=i+1;inBase64=true;}}else{if(!base64Chars[buf[i]]){if(i==lastI&&buf[i]==minusChar){res+="+";}else{var b64str=base64Accum+buf.slice(lastI,i).toString();res+=this.iconv.decode(Buffer.from(b64str,'base64'),"utf16-be");}if(buf[i]!=minusChar)i--;lastI=i+1;inBase64=false;base64Accum='';}}}if(!inBase64){res+=this.iconv.decode(buf.slice(lastI),"ascii");}else{var b64str=base64Accum+buf.slice(lastI).toString();var canBeDecoded=b64str.length-b64str.length%8;base64Accum=b64str.slice(canBeDecoded);b64str=b64str.slice(0,canBeDecoded);res+=this.iconv.decode(Buffer.from(b64str,'base64'),"utf16-be");}this.inBase64=inBase64;this.base64Accum=base64Accum;return res;};Utf7Decoder.prototype.end=function(){var res="";if(this.inBase64&&this.base64Accum.length>0)res=this.iconv.decode(Buffer.from(this.base64Accum,'base64'),"utf16-be");this.inBase64=false;this.base64Accum='';return res;};exports.utf7imap=Utf7IMAPCodec;function Utf7IMAPCodec(codecOptions,iconv){this.iconv=iconv;};Utf7IMAPCodec.prototype.encoder=Utf7IMAPEncoder;Utf7IMAPCodec.prototype.decoder=Utf7IMAPDecoder;Utf7IMAPCodec.prototype.bomAware=true;function Utf7IMAPEncoder(options,codec){this.iconv=codec.iconv;this.inBase64=false;this.base64Accum=Buffer.alloc(6);this.base64AccumIdx=0;}Utf7IMAPEncoder.prototype.write=function(str){var inBase64=this.inBase64,base64Accum=this.base64Accum,base64AccumIdx=this.base64AccumIdx,buf=Buffer.alloc(str.length*5+10),bufIdx=0;for(var i=0;i<str.length;i++){var uChar=str.charCodeAt(i);if(0x20<=uChar&&uChar<=0x7E){if(inBase64){if(base64AccumIdx>0){bufIdx+=buf.write(base64Accum.slice(0,base64AccumIdx).toString('base64').replace(/\//g,',').replace(/=+$/,''),bufIdx);base64AccumIdx=0;}buf[bufIdx++]=minusChar;inBase64=false;}if(!inBase64){buf[bufIdx++]=uChar;if(uChar===andChar)buf[bufIdx++]=minusChar;}}else{if(!inBase64){buf[bufIdx++]=andChar;inBase64=true;}if(inBase64){base64Accum[base64AccumIdx++]=uChar>>8;base64Accum[base64AccumIdx++]=uChar&0xFF;if(base64AccumIdx==base64Accum.length){bufIdx+=buf.write(base64Accum.toString('base64').replace(/\//g,','),bufIdx);base64AccumIdx=0;}}}}this.inBase64=inBase64;this.base64AccumIdx=base64AccumIdx;return buf.slice(0,bufIdx);};Utf7IMAPEncoder.prototype.end=function(){var buf=Buffer.alloc(10),bufIdx=0;if(this.inBase64){if(this.base64AccumIdx>0){bufIdx+=buf.write(this.base64Accum.slice(0,this.base64AccumIdx).toString('base64').replace(/\//g,',').replace(/=+$/,''),bufIdx);this.base64AccumIdx=0;}buf[bufIdx++]=minusChar;this.inBase64=false;}return buf.slice(0,bufIdx);};function Utf7IMAPDecoder(options,codec){this.iconv=codec.iconv;this.inBase64=false;this.base64Accum='';}var base64IMAPChars=base64Chars.slice();base64IMAPChars[','.charCodeAt(0)]=true;Utf7IMAPDecoder.prototype.write=function(buf){var res="",lastI=0,inBase64=this.inBase64,base64Accum=this.base64Accum;for(var i=0;i<buf.length;i++){if(!inBase64){if(buf[i]==andChar){res+=this.iconv.decode(buf.slice(lastI,i),"ascii");lastI=i+1;inBase64=true;}}else{if(!base64IMAPChars[buf[i]]){if(i==lastI&&buf[i]==minusChar){res+="&";}else{var b64str=base64Accum+buf.slice(lastI,i).toString().replace(/,/g,'/');res+=this.iconv.decode(Buffer.from(b64str,'base64'),"utf16-be");}if(buf[i]!=minusChar)i--;lastI=i+1;inBase64=false;base64Accum='';}}}if(!inBase64){res+=this.iconv.decode(buf.slice(lastI),"ascii");}else{var b64str=base64Accum+buf.slice(lastI).toString().replace(/,/g,'/');var canBeDecoded=b64str.length-b64str.length%8;base64Accum=b64str.slice(canBeDecoded);b64str=b64str.slice(0,canBeDecoded);res+=this.iconv.decode(Buffer.from(b64str,'base64'),"utf16-be");}this.inBase64=inBase64;this.base64Accum=base64Accum;return res;};Utf7IMAPDecoder.prototype.end=function(){var res="";if(this.inBase64&&this.base64Accum.length>0)res=this.iconv.decode(Buffer.from(this.base64Accum,'base64'),"utf16-be");this.inBase64=false;this.base64Accum='';return res;};},1114:function(module,__unusedexports,__webpack_require__){"use strict";const Identify=__webpack_require__(6906);module.exports.msHandle=(multistream,connection)=>{return new Promise((resolve,reject)=>{multistream.handle(connection,err=>{if(err)return reject(err);resolve();});});};module.exports.msSelect=(multistream,protocol)=>{return new Promise((resolve,reject)=>{multistream.select(protocol,(err,connection)=>{if(err)return reject(err);resolve(connection);});});};module.exports.identifyDialer=(connection,cryptoPeerInfo)=>{return new Promise((resolve,reject)=>{Identify.dialer(connection,cryptoPeerInfo,(err,peerInfo,observedAddrs)=>{if(err)return reject(err);resolve({peerInfo,observedAddrs});});});};},1116:function(module,__unusedexports,__webpack_require__){"use strict";const ipRegex=__webpack_require__(8940);const isIp=module.exports=x=>ipRegex({exact:true}).test(x);isIp.v4=x=>ipRegex.v4({exact:true}).test(x);isIp.v6=x=>ipRegex.v6({exact:true}).test(x);},1119:function(module,__unusedexports,__webpack_require__){var arrayMap=__webpack_require__(6016);function baseValues(object,props){return arrayMap(props,function(key){return object[key];});}module.exports=baseValues;},1142:function(module,__unusedexports,__webpack_require__){"use strict";const crypto=__webpack_require__(2984);const toCallback=__webpack_require__(2447).toCallback;const sha1=toCallback(buf=>crypto.createHash('sha1').update(buf).digest());const sha2256=toCallback(buf=>crypto.createHash('sha256').update(buf).digest());const sha2512=toCallback(buf=>crypto.createHash('sha512').update(buf).digest());module.exports={sha1:sha1,sha2256:sha2256,sha2512:sha2512};},1143:function(module,__unusedexports,__webpack_require__){"use strict";var _=__webpack_require__(6064);var BN=__webpack_require__(6122);var buffer=__webpack_require__(9423);var bufferUtil=__webpack_require__(9657);var JSUtil=__webpack_require__(8416);var BufferWriter=__webpack_require__(2418);var Script=__webpack_require__(5355);var $=__webpack_require__(5107);var errors=__webpack_require__(6379);var MAX_SAFE_INTEGER=0x1fffffffffffff;function Output(args){if(!(this instanceof Output)){return new Output(args);}if(_.isObject(args)){this.satoshis=args.satoshis;if(bufferUtil.isBuffer(args.script)){this._scriptBuffer=args.script;}else{var script;if(_.isString(args.script)&&JSUtil.isHexa(args.script)){script=new buffer.Buffer(args.script,'hex');}else{script=args.script;}this.setScript(script);}}else{throw new TypeError('Unrecognized argument for Output');}}Object.defineProperty(Output.prototype,'script',{configurable:false,enumerable:true,get:function(){if(this._script){return this._script;}else{this.setScriptFromBuffer(this._scriptBuffer);return this._script;}}});Object.defineProperty(Output.prototype,'satoshis',{configurable:false,enumerable:true,get:function(){return this._satoshis;},set:function(num){if(num instanceof BN){this._satoshisBN=num;this._satoshis=num.toNumber();}else if(_.isString(num)){this._satoshis=parseInt(num);this._satoshisBN=BN.fromNumber(this._satoshis);}else{$.checkArgument(JSUtil.isNaturalNumber(num),'Output satoshis is not a natural number');this._satoshisBN=BN.fromNumber(num);this._satoshis=num;}$.checkState(JSUtil.isNaturalNumber(this._satoshis),'Output satoshis is not a natural number');}});Output.prototype.invalidSatoshis=function(){if(this._satoshis>MAX_SAFE_INTEGER){return'transaction txout satoshis greater than max safe integer';}if(this._satoshis!==this._satoshisBN.toNumber()){return'transaction txout satoshis has corrupted value';}if(this._satoshis<0){return'transaction txout negative';}return false;};Output.prototype.toObject=Output.prototype.toJSON=function toObject(){var obj={satoshis:this.satoshis};obj.script=this._scriptBuffer.toString('hex');return obj;};Output.fromObject=function(data){return new Output(data);};Output.prototype.setScriptFromBuffer=function(buffer){this._scriptBuffer=buffer;try{this._script=Script.fromBuffer(this._scriptBuffer);this._script._isOutput=true;}catch(e){if(e instanceof errors.Script.InvalidBuffer){this._script=null;}else{throw e;}}};Output.prototype.setScript=function(script){if(script instanceof Script){this._scriptBuffer=script.toBuffer();this._script=script;this._script._isOutput=true;}else if(_.isString(script)){this._script=Script.fromString(script);this._scriptBuffer=this._script.toBuffer();this._script._isOutput=true;}else if(bufferUtil.isBuffer(script)){this.setScriptFromBuffer(script);}else{throw new TypeError('Invalid argument type: script');}return this;};Output.prototype.inspect=function(){var scriptStr;if(this.script){scriptStr=this.script.inspect();}else{scriptStr=this._scriptBuffer.toString('hex');}return'<Output ('+this.satoshis+' sats) '+scriptStr+'>';};Output.fromBufferReader=function(br){var obj={};obj.satoshis=br.readUInt64LEBN();var size=br.readVarintNum();if(size!==0){obj.script=br.read(size);}else{obj.script=new buffer.Buffer([]);}return new Output(obj);};Output.prototype.toBufferWriter=function(writer){if(!writer){writer=new BufferWriter();}writer.writeUInt64LEBN(this._satoshisBN);var script=this._scriptBuffer;writer.writeVarintNum(script.length);writer.write(script);return writer;};module.exports=Output;},1144:function(module){"use strict";const internals={arrayType:Symbol('array'),bufferType:Symbol('buffer'),dateType:Symbol('date'),errorType:Symbol('error'),genericType:Symbol('generic'),mapType:Symbol('map'),regexType:Symbol('regex'),setType:Symbol('set'),weakMapType:Symbol('weak-map'),weakSetType:Symbol('weak-set'),mismatched:Symbol('mismatched')};internals.typeMap={'[object Array]':internals.arrayType,'[object Date]':internals.dateType,'[object Error]':internals.errorType,'[object Map]':internals.mapType,'[object RegExp]':internals.regexType,'[object Set]':internals.setType,'[object WeakMap]':internals.weakMapType,'[object WeakSet]':internals.weakSetType};internals.SeenEntry=class{constructor(obj,ref){this.obj=obj;this.ref=ref;}isSame(obj,ref){return this.obj===obj&&this.ref===ref;}};internals.getInternalType=function(obj){const{typeMap,bufferType,genericType}=internals;if(obj instanceof Buffer){return bufferType;}const objName=Object.prototype.toString.call(obj);return typeMap[objName]||genericType;};internals.getSharedType=function(obj,ref,checkPrototype){if(checkPrototype){if(Object.getPrototypeOf(obj)!==Object.getPrototypeOf(ref)){return internals.mismatched;}return internals.getInternalType(obj);}const type=internals.getInternalType(obj);if(type!==internals.getInternalType(ref)){return internals.mismatched;}return type;};internals.valueOf=function(obj){const objValueOf=obj.valueOf;if(objValueOf===undefined){return obj;}try{return objValueOf.call(obj);}catch(err){return err;}};internals.hasOwnEnumerableProperty=function(obj,key){return Object.prototype.propertyIsEnumerable.call(obj,key);};internals.isSetSimpleEqual=function(obj,ref){for(const entry of obj){if(!ref.has(entry)){return false;}}return true;};internals.isDeepEqualObj=function(instanceType,obj,ref,options,seen){const{isDeepEqual,valueOf,hasOwnEnumerableProperty}=internals;const{keys,getOwnPropertySymbols}=Object;if(instanceType===internals.arrayType){if(options.part){for(let i=0;i<obj.length;++i){const objValue=obj[i];for(let j=0;j<ref.length;++j){if(isDeepEqual(objValue,ref[j],options,seen)){return true;}}}}else{if(obj.length!==ref.length){return false;}for(let i=0;i<obj.length;++i){if(!isDeepEqual(obj[i],ref[i],options,seen)){return false;}}return true;}}else if(instanceType===internals.setType){if(obj.size!==ref.size){return false;}if(!internals.isSetSimpleEqual(obj,ref)){const ref2=new Set(ref);for(const objEntry of obj){if(ref2.delete(objEntry)){continue;}let found=false;for(const refEntry of ref2){if(isDeepEqual(objEntry,refEntry,options,seen)){ref2.delete(refEntry);found=true;break;}}if(!found){return false;}}}}else if(instanceType===internals.mapType){if(obj.size!==ref.size){return false;}for(const[key,value]of obj){if(value===undefined&&!ref.has(key)){return false;}if(!isDeepEqual(value,ref.get(key),options,seen)){return false;}}}else if(instanceType===internals.errorType){if(obj.name!==ref.name||obj.message!==ref.message){return false;}}const valueOfObj=valueOf(obj);const valueOfRef=valueOf(ref);if(!(obj===valueOfObj&&ref===valueOfRef)&&!isDeepEqual(valueOfObj,valueOfRef,options,seen)){return false;}const objKeys=keys(obj);if(!options.part&&objKeys.length!==keys(ref).length){return false;}for(let i=0;i<objKeys.length;++i){const key=objKeys[i];if(!hasOwnEnumerableProperty(ref,key)){return false;}if(!isDeepEqual(obj[key],ref[key],options,seen)){return false;}}if(options.symbols){const objSymbols=getOwnPropertySymbols(obj);const refSymbols=new Set(getOwnPropertySymbols(ref));for(let i=0;i<objSymbols.length;++i){const key=objSymbols[i];if(hasOwnEnumerableProperty(obj,key)){if(!hasOwnEnumerableProperty(ref,key)){return false;}if(!isDeepEqual(obj[key],ref[key],options,seen)){return false;}}else if(hasOwnEnumerableProperty(ref,key)){return false;}refSymbols.delete(key);}for(const key of refSymbols){if(hasOwnEnumerableProperty(ref,key)){return false;}}}return true;};internals.isDeepEqual=function(obj,ref,options,seen){if(obj===ref){return obj!==0||1/obj===1/ref;}const type=typeof obj;if(type!==typeof ref){return false;}if(type!=='object'||obj===null||ref===null){return obj!==obj&&ref!==ref;}const instanceType=internals.getSharedType(obj,ref,!!options.prototype);switch(instanceType){case internals.bufferType:return Buffer.prototype.equals.call(obj,ref);case internals.regexType:return obj.toString()===ref.toString();case internals.mismatched:return false;}for(let i=seen.length-1;i>=0;--i){if(seen[i].isSame(obj,ref)){return true;}}seen.push(new internals.SeenEntry(obj,ref));try{return!!internals.isDeepEqualObj(instanceType,obj,ref,options,seen);}finally{seen.pop();}};module.exports=function(obj,ref,options){options=options||{prototype:true};return!!internals.isDeepEqual(obj,ref,options,[]);};},1146:function(module,__unusedexports,__webpack_require__){"use strict";const debug=__webpack_require__(746);const waterfall=__webpack_require__(4265);const support=__webpack_require__(2457);const crypto=__webpack_require__(7314);const log=debug('libp2p:secio');log.error=debug('libp2p:secio:error');module.exports=function propose(state,callback){log('1. propose - start');log('1. propose - writing proposal');support.write(state,crypto.createProposal(state));waterfall([cb=>support.read(state.shake,cb),(msg,cb)=>{log('1. propose - reading proposal',msg);crypto.identify(state,msg,cb);},cb=>crypto.selectProtocols(state,cb)],err=>{if(err){return callback(err);}log('1. propose - finish');callback();});};},1147:function(module){"use strict";const toPathComponents=(path='')=>{return(path.trim().match(/([^\\^/]|\\\/)+/g)||[]).filter(Boolean);};module.exports=toPathComponents;},1150:function(module,__unusedexports,__webpack_require__){"use strict";const Key=__webpack_require__(759).Key;const queue=__webpack_require__(5978);const waterfall=__webpack_require__(4265);const _get=__webpack_require__(8256);const _set=__webpack_require__(1837);const _has=__webpack_require__(5027);const configKey=new Key('config');module.exports=store=>{const setQueue=queue(_doSet,1);const configStore={get(key,callback){if(typeof key==='function'){callback=key;key=undefined;}if(!key){key=undefined;}store.get(configKey,(err,encodedValue)=>{if(err){return callback(err);}let config;try{config=JSON.parse(encodedValue.toString());}catch(err){return callback(err);}if(key!==undefined&&!_has(config,key)){return callback(new Error('Key '+key+' does not exist in config'));}const value=key!==undefined?_get(config,key):config;callback(null,value);});},set(key,value,callback){if(typeof value==='function'){callback=value;value=key;key=undefined;}else if(!key||typeof key!=='string'){return callback(new Error('Invalid key type'));}if(value===undefined||Buffer.isBuffer(value)){return callback(new Error('Invalid value type'));}setQueue.push({key:key,value:value},callback);},exists(callback){store.has(configKey,callback);}};return configStore;function _doSet(m,callback){const key=m.key;const value=m.value;if(key){waterfall([cb=>configStore.get(cb),(config,cb)=>cb(null,_set(config,key,value)),_saveAll],callback);}else{_saveAll(value,callback);}}function _saveAll(config,callback){const buf=Buffer.from(JSON.stringify(config,null,2));store.put(configKey,buf,callback);}};},1157:function(module,__unusedexports,__webpack_require__){const xtend=__webpack_require__(7756);const AbstractIterator=__webpack_require__(474);const AbstractChainedBatch=__webpack_require__(7927);const hasOwnProperty=Object.prototype.hasOwnProperty;const rangeOptions='start end gt gte lt lte'.split(' ');function AbstractLevelDOWN(location){if(!arguments.length||location===undefined){throw new Error('constructor requires at least a location argument');}if(typeof location!=='string'){throw new Error('constructor requires a location string argument');}this.location=location;this.status='new';}AbstractLevelDOWN.prototype.open=function(options,callback){var self=this;var oldStatus=this.status;if(typeof options==='function'){callback=options;}if(typeof callback!=='function'){throw new Error('open() requires a callback argument');}if(typeof options!=='object'){options={};}options.createIfMissing=options.createIfMissing!==false;options.errorIfExists=!!options.errorIfExists;this.status='opening';this._open(options,function(err){if(err){self.status=oldStatus;return callback(err);}self.status='open';callback();});};AbstractLevelDOWN.prototype._open=function(options,callback){process.nextTick(callback);};AbstractLevelDOWN.prototype.close=function(callback){var self=this;var oldStatus=this.status;if(typeof callback!=='function'){throw new Error('close() requires a callback argument');}this.status='closing';this._close(function(err){if(err){self.status=oldStatus;return callback(err);}self.status='closed';callback();});};AbstractLevelDOWN.prototype._close=function(callback){process.nextTick(callback);};AbstractLevelDOWN.prototype.get=function(key,options,callback){if(typeof options==='function'){callback=options;}if(typeof callback!=='function'){throw new Error('get() requires a callback argument');}var err=this._checkKey(key,'key');if(err)return process.nextTick(callback,err);key=this._serializeKey(key);if(typeof options!=='object'){options={};}options.asBuffer=options.asBuffer!==false;this._get(key,options,callback);};AbstractLevelDOWN.prototype._get=function(key,options,callback){process.nextTick(function(){callback(new Error('NotFound'));});};AbstractLevelDOWN.prototype.put=function(key,value,options,callback){if(typeof options==='function'){callback=options;}if(typeof callback!=='function'){throw new Error('put() requires a callback argument');}var err=this._checkKey(key,'key');if(err)return process.nextTick(callback,err);key=this._serializeKey(key);value=this._serializeValue(value);if(typeof options!=='object'){options={};}this._put(key,value,options,callback);};AbstractLevelDOWN.prototype._put=function(key,value,options,callback){process.nextTick(callback);};AbstractLevelDOWN.prototype.del=function(key,options,callback){if(typeof options==='function'){callback=options;}if(typeof callback!=='function'){throw new Error('del() requires a callback argument');}var err=this._checkKey(key,'key');if(err)return process.nextTick(callback,err);key=this._serializeKey(key);if(typeof options!=='object'){options={};}this._del(key,options,callback);};AbstractLevelDOWN.prototype._del=function(key,options,callback){process.nextTick(callback);};AbstractLevelDOWN.prototype.batch=function(array,options,callback){if(!arguments.length){return this._chainedBatch();}if(typeof options==='function'){callback=options;}if(typeof array==='function'){callback=array;}if(typeof callback!=='function'){throw new Error('batch(array) requires a callback argument');}if(!Array.isArray(array)){return process.nextTick(callback,new Error('batch(array) requires an array argument'));}if(!options||typeof options!=='object'){options={};}var serialized=new Array(array.length);for(var i=0;i<array.length;i++){if(typeof array[i]!=='object'||array[i]===null){return process.nextTick(callback,new Error('batch(array) element must be an object and not `null`'));}var e=xtend(array[i]);if(e.type!=='put'&&e.type!=='del'){return process.nextTick(callback,new Error("`type` must be 'put' or 'del'"));}var err=this._checkKey(e.key,'key');if(err)return process.nextTick(callback,err);e.key=this._serializeKey(e.key);if(e.type==='put'){e.value=this._serializeValue(e.value);}serialized[i]=e;}this._batch(serialized,options,callback);};AbstractLevelDOWN.prototype._batch=function(array,options,callback){process.nextTick(callback);};AbstractLevelDOWN.prototype._setupIteratorOptions=function(options){options=cleanRangeOptions(options);options.reverse=!!options.reverse;options.keys=options.keys!==false;options.values=options.values!==false;options.limit='limit'in options?options.limit:-1;options.keyAsBuffer=options.keyAsBuffer!==false;options.valueAsBuffer=options.valueAsBuffer!==false;return options;};function cleanRangeOptions(options){var result={};for(var k in options){if(!hasOwnProperty.call(options,k))continue;if(isRangeOption(k)&&isEmptyRangeOption(options[k]))continue;result[k]=options[k];}return result;}function isRangeOption(k){return rangeOptions.indexOf(k)!==-1;}function isEmptyRangeOption(v){return v===''||v==null||isEmptyBuffer(v);}function isEmptyBuffer(v){return Buffer.isBuffer(v)&&v.length===0;}AbstractLevelDOWN.prototype.iterator=function(options){if(typeof options!=='object'){options={};}options=this._setupIteratorOptions(options);return this._iterator(options);};AbstractLevelDOWN.prototype._iterator=function(options){return new AbstractIterator(this);};AbstractLevelDOWN.prototype._chainedBatch=function(){return new AbstractChainedBatch(this);};AbstractLevelDOWN.prototype._serializeKey=function(key){return Buffer.isBuffer(key)?key:String(key);};AbstractLevelDOWN.prototype._serializeValue=function(value){if(value==null)return'';return Buffer.isBuffer(value)||process.browser?value:String(value);};AbstractLevelDOWN.prototype._checkKey=function(obj,type){if(obj===null||obj===undefined){return new Error(type+' cannot be `null` or `undefined`');}if(Buffer.isBuffer(obj)&&obj.length===0){return new Error(type+' cannot be an empty Buffer');}if(String(obj)===''){return new Error(type+' cannot be an empty String');}};module.exports=AbstractLevelDOWN;},1164:function(module,__unusedexports,__webpack_require__){"use strict";const FSM=__webpack_require__(7032);const multistream=__webpack_require__(9759);const withIs=__webpack_require__(3171);const BaseConnection=__webpack_require__(3607);class IncomingConnectionFSM extends BaseConnection{constructor({connection,_switch,transportKey}){super({_switch,name:`inc:${_switch._peerInfo.id.toB58String().slice(0,8)}`});this.conn=connection;this.theirPeerInfo=null;this.ourPeerInfo=this.switch._peerInfo;this.transportKey=transportKey;this.protocolMuxer=this.switch.protocolMuxer(this.transportKey);this.msListener=new multistream.Listener();this._state=FSM('DIALED',{DISCONNECTED:{disconnect:'DISCONNECTED'},DIALED:{privatize:'PRIVATIZING',encrypt:'ENCRYPTING'},PRIVATIZING:{done:'PRIVATIZED',disconnect:'DISCONNECTING'},PRIVATIZED:{encrypt:'ENCRYPTING'},ENCRYPTING:{done:'ENCRYPTED',disconnect:'DISCONNECTING'},ENCRYPTED:{upgrade:'UPGRADING',disconnect:'DISCONNECTING'},UPGRADING:{done:'MUXED'},MUXED:{disconnect:'DISCONNECTING'},DISCONNECTING:{done:'DISCONNECTED'}});this._state.on('PRIVATIZING',()=>this._onPrivatizing());this._state.on('PRIVATIZED',()=>this._onPrivatized());this._state.on('ENCRYPTING',()=>this._onEncrypting());this._state.on('ENCRYPTED',()=>{this.log(`successfully encrypted connection to ${this.theirB58Id||'unknown peer'}`);this.emit('encrypted',this.conn);});this._state.on('UPGRADING',()=>this._onUpgrading());this._state.on('MUXED',()=>{this.log(`successfully muxed connection to ${this.theirB58Id||'unknown peer'}`);this.emit('muxed',this.conn);});this._state.on('DISCONNECTING',()=>{if(this.theirPeerInfo){this.theirPeerInfo.disconnect();}this._state('done');});}_onEncrypting(){this.log(`encrypting connection via ${this.switch.crypto.tag}`);this.msListener.addHandler(this.switch.crypto.tag,(protocol,_conn)=>{this.conn=this.switch.crypto.encrypt(this.ourPeerInfo.id,_conn,undefined,err=>{if(err){return this.close(err);}this.conn.getPeerInfo((_,peerInfo)=>{this.theirPeerInfo=peerInfo;this._state('done');});});},null);this.msListener.handle(this.conn,err=>{if(err){this.emit('crypto handshaking failed',err);}});}_onUpgrading(){this.log('adding the protocol muxer to the connection');this.protocolMuxer(this.conn,this.msListener);this._state('done');}}module.exports=withIs(IncomingConnectionFSM,{className:'IncomingConnectionFSM',symbolName:'libp2p-switch/IncomingConnectionFSM'});},1173:function(module,__unusedexports,__webpack_require__){"use strict";var buffer=__webpack_require__(9423);var Buffer=buffer.Buffer;var safer={};var key;for(key in buffer){if(!buffer.hasOwnProperty(key))continue;if(key==='SlowBuffer'||key==='Buffer')continue;safer[key]=buffer[key];}var Safer=safer.Buffer={};for(key in Buffer){if(!Buffer.hasOwnProperty(key))continue;if(key==='allocUnsafe'||key==='allocUnsafeSlow')continue;Safer[key]=Buffer[key];}safer.Buffer.prototype=Buffer.prototype;if(!Safer.from||Safer.from===Uint8Array.from){Safer.from=function(value,encodingOrOffset,length){if(typeof value==='number'){throw new TypeError('The "value" argument must not be of type number. Received type '+typeof value);}if(value&&typeof value.length==='undefined'){throw new TypeError('The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type '+typeof value);}return Buffer(value,encodingOrOffset,length);};}if(!Safer.alloc){Safer.alloc=function(size,fill,encoding){if(typeof size!=='number'){throw new TypeError('The "size" argument must be of type number. Received type '+typeof size);}if(size<0||size>=2*(1<<30)){throw new RangeError('The value "'+size+'" is invalid for option "size"');}var buf=Buffer(size);if(!fill||fill.length===0){buf.fill(0);}else if(typeof encoding==='string'){buf.fill(fill,encoding);}else{buf.fill(fill);}return buf;};}if(!safer.kStringMaxLength){try{safer.kStringMaxLength=process.binding('buffer').kStringMaxLength;}catch(e){}}if(!safer.constants){safer.constants={MAX_LENGTH:safer.kMaxLength};if(safer.kStringMaxLength){safer.constants.MAX_STRING_LENGTH=safer.kStringMaxLength;}}module.exports=safer;},1178:function(module,__unusedexports,__webpack_require__){"use strict";const leftPad=__webpack_require__(6485);module.exports.toRFC3339=time=>{const year=time.getUTCFullYear();const month=leftPad(time.getUTCMonth()+1,2,'0');const day=leftPad(time.getUTCDate(),2,'0');const hour=leftPad(time.getUTCHours(),2,'0');const minute=leftPad(time.getUTCMinutes(),2,'0');const seconds=leftPad(time.getUTCSeconds(),2,'0');const milliseconds=time.getUTCMilliseconds();const nanoseconds=milliseconds*1000*1000;return`${year}-${month}-${day}T${hour}:${minute}:${seconds}.${nanoseconds}Z`;};module.exports.parseRFC3339=time=>{const rfc3339Matcher=new RegExp('(\\d{4})-(\\d{2})-(\\d{2})T'+'(\\d{2}):(\\d{2}):(\\d{2})'+'\\.(\\d+)Z');const m=String(time).trim().match(rfc3339Matcher);if(!m){throw new Error('Invalid format');}const year=parseInt(m[1],10);const month=parseInt(m[2],10)-1;const date=parseInt(m[3],10);const hour=parseInt(m[4],10);const minute=parseInt(m[5],10);const second=parseInt(m[6],10);const millisecond=parseInt(m[7].slice(0,-6),10);return new Date(Date.UTC(year,month,date,hour,minute,second,millisecond));};},1179:function(module,__unusedexports,__webpack_require__){"use strict";const Connection=__webpack_require__(378).Connection;const pull=__webpack_require__(418);module.exports=(transport,protocol,connection,observer)=>{const peerInfo=new Promise((resolve,reject)=>{connection.getPeerInfo((err,peerInfo)=>{if(!err&&peerInfo){resolve(peerInfo);return;}const setPeerInfo=connection.setPeerInfo;connection.setPeerInfo=pi=>{setPeerInfo.call(connection,pi);resolve(pi);};});});const stream={source:pull(connection,observer.incoming(transport,protocol,peerInfo)),sink:pull(observer.outgoing(transport,protocol,peerInfo),connection)};return new Connection(stream,connection);};},1190:function(__unusedmodule,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const utils_1=__webpack_require__(6679);const DEFAULT_SMARTBUFFER_SIZE=4096;const DEFAULT_SMARTBUFFER_ENCODING='utf8';class SmartBuffer{constructor(options){this.length=0;this._encoding=DEFAULT_SMARTBUFFER_ENCODING;this._writeOffset=0;this._readOffset=0;if(SmartBuffer.isSmartBufferOptions(options)){if(options.encoding){utils_1.checkEncoding(options.encoding);this._encoding=options.encoding;}if(options.size){if(utils_1.isFiniteInteger(options.size)&&options.size>0){this._buff=Buffer.allocUnsafe(options.size);}else{throw new Error(utils_1.ERRORS.INVALID_SMARTBUFFER_SIZE);}}else if(options.buff){if(options.buff instanceof Buffer){this._buff=options.buff;this.length=options.buff.length;}else{throw new Error(utils_1.ERRORS.INVALID_SMARTBUFFER_BUFFER);}}else{this._buff=Buffer.allocUnsafe(DEFAULT_SMARTBUFFER_SIZE);}}else{if(typeof options!=='undefined'){throw new Error(utils_1.ERRORS.INVALID_SMARTBUFFER_OBJECT);}this._buff=Buffer.allocUnsafe(DEFAULT_SMARTBUFFER_SIZE);}}static fromSize(size,encoding){return new this({size:size,encoding:encoding});}static fromBuffer(buff,encoding){return new this({buff:buff,encoding:encoding});}static fromOptions(options){return new this(options);}static isSmartBufferOptions(options){const castOptions=options;return castOptions&&(castOptions.encoding!==undefined||castOptions.size!==undefined||castOptions.buff!==undefined);}readInt8(offset){return this._readNumberValue(Buffer.prototype.readInt8,1,offset);}readInt16BE(offset){return this._readNumberValue(Buffer.prototype.readInt16BE,2,offset);}readInt16LE(offset){return this._readNumberValue(Buffer.prototype.readInt16LE,2,offset);}readInt32BE(offset){return this._readNumberValue(Buffer.prototype.readInt32BE,4,offset);}readInt32LE(offset){return this._readNumberValue(Buffer.prototype.readInt32LE,4,offset);}writeInt8(value,offset){this._writeNumberValue(Buffer.prototype.writeInt8,1,value,offset);return this;}insertInt8(value,offset){return this._insertNumberValue(Buffer.prototype.writeInt8,1,value,offset);}writeInt16BE(value,offset){return this._writeNumberValue(Buffer.prototype.writeInt16BE,2,value,offset);}insertInt16BE(value,offset){return this._insertNumberValue(Buffer.prototype.writeInt16BE,2,value,offset);}writeInt16LE(value,offset){return this._writeNumberValue(Buffer.prototype.writeInt16LE,2,value,offset);}insertInt16LE(value,offset){return this._insertNumberValue(Buffer.prototype.writeInt16LE,2,value,offset);}writeInt32BE(value,offset){return this._writeNumberValue(Buffer.prototype.writeInt32BE,4,value,offset);}insertInt32BE(value,offset){return this._insertNumberValue(Buffer.prototype.writeInt32BE,4,value,offset);}writeInt32LE(value,offset){return this._writeNumberValue(Buffer.prototype.writeInt32LE,4,value,offset);}insertInt32LE(value,offset){return this._insertNumberValue(Buffer.prototype.writeInt32LE,4,value,offset);}readUInt8(offset){return this._readNumberValue(Buffer.prototype.readUInt8,1,offset);}readUInt16BE(offset){return this._readNumberValue(Buffer.prototype.readUInt16BE,2,offset);}readUInt16LE(offset){return this._readNumberValue(Buffer.prototype.readUInt16LE,2,offset);}readUInt32BE(offset){return this._readNumberValue(Buffer.prototype.readUInt32BE,4,offset);}readUInt32LE(offset){return this._readNumberValue(Buffer.prototype.readUInt32LE,4,offset);}writeUInt8(value,offset){return this._writeNumberValue(Buffer.prototype.writeUInt8,1,value,offset);}insertUInt8(value,offset){return this._insertNumberValue(Buffer.prototype.writeUInt8,1,value,offset);}writeUInt16BE(value,offset){return this._writeNumberValue(Buffer.prototype.writeUInt16BE,2,value,offset);}insertUInt16BE(value,offset){return this._insertNumberValue(Buffer.prototype.writeUInt16BE,2,value,offset);}writeUInt16LE(value,offset){return this._writeNumberValue(Buffer.prototype.writeUInt16LE,2,value,offset);}insertUInt16LE(value,offset){return this._insertNumberValue(Buffer.prototype.writeUInt16LE,2,value,offset);}writeUInt32BE(value,offset){return this._writeNumberValue(Buffer.prototype.writeUInt32BE,4,value,offset);}insertUInt32BE(value,offset){return this._insertNumberValue(Buffer.prototype.writeUInt32BE,4,value,offset);}writeUInt32LE(value,offset){return this._writeNumberValue(Buffer.prototype.writeUInt32LE,4,value,offset);}insertUInt32LE(value,offset){return this._insertNumberValue(Buffer.prototype.writeUInt32LE,4,value,offset);}readFloatBE(offset){return this._readNumberValue(Buffer.prototype.readFloatBE,4,offset);}readFloatLE(offset){return this._readNumberValue(Buffer.prototype.readFloatLE,4,offset);}writeFloatBE(value,offset){return this._writeNumberValue(Buffer.prototype.writeFloatBE,4,value,offset);}insertFloatBE(value,offset){return this._insertNumberValue(Buffer.prototype.writeFloatBE,4,value,offset);}writeFloatLE(value,offset){return this._writeNumberValue(Buffer.prototype.writeFloatLE,4,value,offset);}insertFloatLE(value,offset){return this._insertNumberValue(Buffer.prototype.writeFloatLE,4,value,offset);}readDoubleBE(offset){return this._readNumberValue(Buffer.prototype.readDoubleBE,8,offset);}readDoubleLE(offset){return this._readNumberValue(Buffer.prototype.readDoubleLE,8,offset);}writeDoubleBE(value,offset){return this._writeNumberValue(Buffer.prototype.writeDoubleBE,8,value,offset);}insertDoubleBE(value,offset){return this._insertNumberValue(Buffer.prototype.writeDoubleBE,8,value,offset);}writeDoubleLE(value,offset){return this._writeNumberValue(Buffer.prototype.writeDoubleLE,8,value,offset);}insertDoubleLE(value,offset){return this._insertNumberValue(Buffer.prototype.writeDoubleLE,8,value,offset);}readString(arg1,encoding){let lengthVal;if(typeof arg1==='number'){utils_1.checkLengthValue(arg1);lengthVal=Math.min(arg1,this.length-this._readOffset);}else{encoding=arg1;lengthVal=this.length-this._readOffset;}if(typeof encoding!=='undefined'){utils_1.checkEncoding(encoding);}const value=this._buff.slice(this._readOffset,this._readOffset+lengthVal).toString(encoding||this._encoding);this._readOffset+=lengthVal;return value;}insertString(value,offset,encoding){utils_1.checkOffsetValue(offset);return this._handleString(value,true,offset,encoding);}writeString(value,arg2,encoding){return this._handleString(value,false,arg2,encoding);}readStringNT(encoding){if(typeof encoding!=='undefined'){utils_1.checkEncoding(encoding);}let nullPos=this.length;for(let i=this._readOffset;i<this.length;i++){if(this._buff[i]===0x00){nullPos=i;break;}}const value=this._buff.slice(this._readOffset,nullPos);this._readOffset=nullPos+1;return value.toString(encoding||this._encoding);}insertStringNT(value,offset,encoding){utils_1.checkOffsetValue(offset);this.insertString(value,offset,encoding);this.insertUInt8(0x00,offset+value.length);return this;}writeStringNT(value,arg2,encoding){this.writeString(value,arg2,encoding);this.writeUInt8(0x00,typeof arg2==='number'?arg2+value.length:this.writeOffset);return this;}readBuffer(length){if(typeof length!=='undefined'){utils_1.checkLengthValue(length);}const lengthVal=typeof length==='number'?length:this.length;const endPoint=Math.min(this.length,this._readOffset+lengthVal);const value=this._buff.slice(this._readOffset,endPoint);this._readOffset=endPoint;return value;}insertBuffer(value,offset){utils_1.checkOffsetValue(offset);return this._handleBuffer(value,true,offset);}writeBuffer(value,offset){return this._handleBuffer(value,false,offset);}readBufferNT(){let nullPos=this.length;for(let i=this._readOffset;i<this.length;i++){if(this._buff[i]===0x00){nullPos=i;break;}}const value=this._buff.slice(this._readOffset,nullPos);this._readOffset=nullPos+1;return value;}insertBufferNT(value,offset){utils_1.checkOffsetValue(offset);this.insertBuffer(value,offset);this.insertUInt8(0x00,offset+value.length);return this;}writeBufferNT(value,offset){if(typeof offset!=='undefined'){utils_1.checkOffsetValue(offset);}this.writeBuffer(value,offset);this.writeUInt8(0x00,typeof offset==='number'?offset+value.length:this._writeOffset);return this;}clear(){this._writeOffset=0;this._readOffset=0;this.length=0;return this;}remaining(){return this.length-this._readOffset;}get readOffset(){return this._readOffset;}set readOffset(offset){utils_1.checkOffsetValue(offset);utils_1.checkTargetOffset(offset,this);this._readOffset=offset;}get writeOffset(){return this._writeOffset;}set writeOffset(offset){utils_1.checkOffsetValue(offset);utils_1.checkTargetOffset(offset,this);this._writeOffset=offset;}get encoding(){return this._encoding;}set encoding(encoding){utils_1.checkEncoding(encoding);this._encoding=encoding;}get internalBuffer(){return this._buff;}toBuffer(){return this._buff.slice(0,this.length);}toString(encoding){const encodingVal=typeof encoding==='string'?encoding:this._encoding;utils_1.checkEncoding(encodingVal);return this._buff.toString(encodingVal,0,this.length);}destroy(){this.clear();return this;}_handleString(value,isInsert,arg3,encoding){let offsetVal=this._writeOffset;let encodingVal=this._encoding;if(typeof arg3==='number'){offsetVal=arg3;}else if(typeof arg3==='string'){utils_1.checkEncoding(arg3);encodingVal=arg3;}if(typeof encoding==='string'){utils_1.checkEncoding(encoding);encodingVal=encoding;}const byteLength=Buffer.byteLength(value,encodingVal);if(isInsert){this.ensureInsertable(byteLength,offsetVal);}else{this._ensureWriteable(byteLength,offsetVal);}this._buff.write(value,offsetVal,byteLength,encodingVal);if(isInsert){this._writeOffset+=byteLength;}else{if(typeof arg3==='number'){this._writeOffset=Math.max(this._writeOffset,offsetVal+byteLength);}else{this._writeOffset+=byteLength;}}return this;}_handleBuffer(value,isInsert,offset){const offsetVal=typeof offset==='number'?offset:this._writeOffset;if(isInsert){this.ensureInsertable(value.length,offsetVal);}else{this._ensureWriteable(value.length,offsetVal);}value.copy(this._buff,offsetVal);if(isInsert){this._writeOffset+=value.length;}else{if(typeof offset==='number'){this._writeOffset=Math.max(this._writeOffset,offsetVal+value.length);}else{this._writeOffset+=value.length;}}return this;}ensureReadable(length,offset){let offsetVal=this._readOffset;if(typeof offset!=='undefined'){utils_1.checkOffsetValue(offset);offsetVal=offset;}if(offsetVal<0||offsetVal+length>this.length){throw new Error(utils_1.ERRORS.INVALID_READ_BEYOND_BOUNDS);}}ensureInsertable(dataLength,offset){utils_1.checkOffsetValue(offset);this._ensureCapacity(this.length+dataLength);if(offset<this.length){this._buff.copy(this._buff,offset+dataLength,offset,this._buff.length);}if(offset+dataLength>this.length){this.length=offset+dataLength;}else{this.length+=dataLength;}}_ensureWriteable(dataLength,offset){const offsetVal=typeof offset==='number'?offset:this._writeOffset;this._ensureCapacity(offsetVal+dataLength);if(offsetVal+dataLength>this.length){this.length=offsetVal+dataLength;}}_ensureCapacity(minLength){const oldLength=this._buff.length;if(minLength>oldLength){let data=this._buff;let newLength=oldLength*3/2+1;if(newLength<minLength){newLength=minLength;}this._buff=Buffer.allocUnsafe(newLength);data.copy(this._buff,0,0,oldLength);}}_readNumberValue(func,byteSize,offset){this.ensureReadable(byteSize,offset);const value=func.call(this._buff,typeof offset==='number'?offset:this._readOffset);if(typeof offset==='undefined'){this._readOffset+=byteSize;}return value;}_insertNumberValue(func,byteSize,value,offset){utils_1.checkOffsetValue(offset);this.ensureInsertable(byteSize,offset);func.call(this._buff,value,offset);this._writeOffset+=byteSize;return this;}_writeNumberValue(func,byteSize,value,offset){if(typeof offset==='number'){if(offset<0){throw new Error(utils_1.ERRORS.INVALID_WRITE_BEYOND_BOUNDS);}utils_1.checkOffsetValue(offset);}const offsetVal=typeof offset==='number'?offset:this._writeOffset;this._ensureWriteable(byteSize,offsetVal);func.call(this._buff,value,offsetVal);if(typeof offset==='number'){this._writeOffset=Math.max(this._writeOffset,offsetVal+byteSize);}else{this._writeOffset+=byteSize;}return this;}}exports.SmartBuffer=SmartBuffer;},1193:function(module,__unusedexports,__webpack_require__){"use strict";var bn=__webpack_require__(2420);var elliptic=__webpack_require__(5194);var utils=elliptic.utils;var assert=utils.assert;var KeyPair=__webpack_require__(5246);var Signature=__webpack_require__(1625);function EC(options){if(!(this instanceof EC))return new EC(options);if(typeof options==='string'){assert(elliptic.curves.hasOwnProperty(options),'Unknown curve '+options);options=elliptic.curves[options];}if(options instanceof elliptic.curves.PresetCurve)options={curve:options};this.curve=options.curve.curve;this.n=this.curve.n;this.nh=this.n.shrn(1);this.g=this.curve.g;this.g=options.curve.g;this.g.precompute(options.curve.n.bitLength()+1);this.hash=options.hash||options.curve.hash;}module.exports=EC;EC.prototype.keyPair=function keyPair(options){return new KeyPair(this,options);};EC.prototype.keyFromPrivate=function keyFromPrivate(priv,enc){return KeyPair.fromPrivate(this,priv,enc);};EC.prototype.keyFromPublic=function keyFromPublic(pub,enc){return KeyPair.fromPublic(this,pub,enc);};EC.prototype.genKeyPair=function genKeyPair(options){if(!options)options={};var drbg=new elliptic.hmacDRBG({hash:this.hash,pers:options.pers,entropy:options.entropy||elliptic.rand(this.hash.hmacStrength),nonce:this.n.toArray()});var bytes=this.n.byteLength();var ns2=this.n.sub(new bn(2));do{var priv=new bn(drbg.generate(bytes));if(priv.cmp(ns2)>0)continue;priv.iaddn(1);return this.keyFromPrivate(priv);}while(true);};EC.prototype._truncateToN=function truncateToN(msg,truncOnly){var delta=msg.byteLength()*8-this.n.bitLength();if(delta>0)msg=msg.shrn(delta);if(!truncOnly&&msg.cmp(this.n)>=0)return msg.sub(this.n);else return msg;};EC.prototype.sign=function sign(msg,key,enc,options){if(typeof enc==='object'){options=enc;enc=null;}if(!options)options={};key=this.keyFromPrivate(key,enc);msg=this._truncateToN(new bn(msg,16));var bytes=this.n.byteLength();var bkey=key.getPrivate().toArray();for(var i=bkey.length;i<21;i++)bkey.unshift(0);var nonce=msg.toArray();for(var i=nonce.length;i<bytes;i++)nonce.unshift(0);var drbg=new elliptic.hmacDRBG({hash:this.hash,entropy:bkey,nonce:nonce});var ns1=this.n.sub(new bn(1));do{var k=new bn(drbg.generate(this.n.byteLength()));k=this._truncateToN(k,true);if(k.cmpn(1)<=0||k.cmp(ns1)>=0)continue;var kp=this.g.mul(k);if(kp.isInfinity())continue;var r=kp.getX().mod(this.n);if(r.cmpn(0)===0)continue;var s=k.invm(this.n).mul(r.mul(key.getPrivate()).iadd(msg)).mod(this.n);if(s.cmpn(0)===0)continue;if(options.canonical&&s.cmp(this.nh)>0)s=this.n.sub(s);return new Signature({r:r,s:s});}while(true);};EC.prototype.verify=function verify(msg,signature,key,enc){msg=this._truncateToN(new bn(msg,16));key=this.keyFromPublic(key,enc);signature=new Signature(signature,'hex');var r=signature.r;var s=signature.s;if(r.cmpn(1)<0||r.cmp(this.n)>=0)return false;if(s.cmpn(1)<0||s.cmp(this.n)>=0)return false;var sinv=s.invm(this.n);var u1=sinv.mul(msg).mod(this.n);var u2=sinv.mul(r).mod(this.n);var p=this.g.mulAdd(u1,key.getPublic(),u2);if(p.isInfinity())return false;return p.getX().mod(this.n).cmp(r)===0;};},1199:function(module){module.exports=function(a,b){var fn=function(){};fn.prototype=b.prototype;a.prototype=new fn();a.prototype.constructor=a;};},1201:function(module,__unusedexports,__webpack_require__){var once=__webpack_require__(7957);var noop=function(){};var isRequest=function(stream){return stream.setHeader&&typeof stream.abort==='function';};var isChildProcess=function(stream){return stream.stdio&&Array.isArray(stream.stdio)&&stream.stdio.length===3;};var eos=function(stream,opts,callback){if(typeof opts==='function')return eos(stream,null,opts);if(!opts)opts={};callback=once(callback||noop);var ws=stream._writableState;var rs=stream._readableState;var readable=opts.readable||opts.readable!==false&&stream.readable;var writable=opts.writable||opts.writable!==false&&stream.writable;var onlegacyfinish=function(){if(!stream.writable)onfinish();};var onfinish=function(){writable=false;if(!readable)callback.call(stream);};var onend=function(){readable=false;if(!writable)callback.call(stream);};var onexit=function(exitCode){callback.call(stream,exitCode?new Error('exited with error code: '+exitCode):null);};var onerror=function(err){callback.call(stream,err);};var onclose=function(){if(readable&&!(rs&&rs.ended))return callback.call(stream,new Error('premature close'));if(writable&&!(ws&&ws.ended))return callback.call(stream,new Error('premature close'));};var onrequest=function(){stream.req.on('finish',onfinish);};if(isRequest(stream)){stream.on('complete',onfinish);stream.on('abort',onclose);if(stream.req)onrequest();else stream.on('request',onrequest);}else if(writable&&!ws){stream.on('end',onlegacyfinish);stream.on('close',onlegacyfinish);}if(isChildProcess(stream))stream.on('exit',onexit);stream.on('end',onend);stream.on('finish',onfinish);if(opts.error!==false)stream.on('error',onerror);stream.on('close',onclose);return function(){stream.removeListener('complete',onfinish);stream.removeListener('abort',onclose);stream.removeListener('request',onrequest);if(stream.req)stream.req.removeListener('finish',onfinish);stream.removeListener('end',onlegacyfinish);stream.removeListener('close',onlegacyfinish);stream.removeListener('finish',onfinish);stream.removeListener('exit',onexit);stream.removeListener('end',onend);stream.removeListener('error',onerror);stream.removeListener('close',onclose);};};module.exports=eos;},1214:function(module,__unusedexports,__webpack_require__){var forge=__webpack_require__(7938);var baseN=__webpack_require__(3472);var util=module.exports=forge.util=forge.util||{};(function(){if(typeof process!=='undefined'&&process.nextTick&&!process.browser){util.nextTick=process.nextTick;if(typeof setImmediate==='function'){util.setImmediate=setImmediate;}else{util.setImmediate=util.nextTick;}return;}if(typeof setImmediate==='function'){util.setImmediate=function(){return setImmediate.apply(undefined,arguments);};util.nextTick=function(callback){return setImmediate(callback);};return;}util.setImmediate=function(callback){setTimeout(callback,0);};if(typeof window!=='undefined'&&typeof window.postMessage==='function'){var msg='forge.setImmediate';var callbacks=[];util.setImmediate=function(callback){callbacks.push(callback);if(callbacks.length===1){window.postMessage(msg,'*');}};function handler(event){if(event.source===window&&event.data===msg){event.stopPropagation();var copy=callbacks.slice();callbacks.length=0;copy.forEach(function(callback){callback();});}}window.addEventListener('message',handler,true);}if(typeof MutationObserver!=='undefined'){var now=Date.now();var attr=true;var div=document.createElement('div');var callbacks=[];new MutationObserver(function(){var copy=callbacks.slice();callbacks.length=0;copy.forEach(function(callback){callback();});}).observe(div,{attributes:true});var oldSetImmediate=util.setImmediate;util.setImmediate=function(callback){if(Date.now()-now>15){now=Date.now();oldSetImmediate(callback);}else{callbacks.push(callback);if(callbacks.length===1){div.setAttribute('a',attr=!attr);}}};}util.nextTick=util.setImmediate;})();util.isNodejs=typeof process!=='undefined'&&process.versions&&process.versions.node;util.isArray=Array.isArray||function(x){return Object.prototype.toString.call(x)==='[object Array]';};util.isArrayBuffer=function(x){return typeof ArrayBuffer!=='undefined'&&x instanceof ArrayBuffer;};util.isArrayBufferView=function(x){return x&&util.isArrayBuffer(x.buffer)&&x.byteLength!==undefined;};function _checkBitsParam(n){if(!(n===8||n===16||n===24||n===32)){throw new Error('Only 8, 16, 24, or 32 bits supported: '+n);}}util.ByteBuffer=ByteStringBuffer;function ByteStringBuffer(b){this.data='';this.read=0;if(typeof b==='string'){this.data=b;}else if(util.isArrayBuffer(b)||util.isArrayBufferView(b)){if(typeof Buffer!=='undefined'&&b instanceof Buffer){this.data=b.toString('binary');}else{var arr=new Uint8Array(b);try{this.data=String.fromCharCode.apply(null,arr);}catch(e){for(var i=0;i<arr.length;++i){this.putByte(arr[i]);}}}}else if(b instanceof ByteStringBuffer||typeof b==='object'&&typeof b.data==='string'&&typeof b.read==='number'){this.data=b.data;this.read=b.read;}this._constructedStringLength=0;}util.ByteStringBuffer=ByteStringBuffer;var _MAX_CONSTRUCTED_STRING_LENGTH=4096;util.ByteStringBuffer.prototype._optimizeConstructedString=function(x){this._constructedStringLength+=x;if(this._constructedStringLength>_MAX_CONSTRUCTED_STRING_LENGTH){this.data.substr(0,1);this._constructedStringLength=0;}};util.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read;};util.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0;};util.ByteStringBuffer.prototype.putByte=function(b){return this.putBytes(String.fromCharCode(b));};util.ByteStringBuffer.prototype.fillWithByte=function(b,n){b=String.fromCharCode(b);var d=this.data;while(n>0){if(n&1){d+=b;}n>>>=1;if(n>0){b+=b;}}this.data=d;this._optimizeConstructedString(n);return this;};util.ByteStringBuffer.prototype.putBytes=function(bytes){this.data+=bytes;this._optimizeConstructedString(bytes.length);return this;};util.ByteStringBuffer.prototype.putString=function(str){return this.putBytes(util.encodeUtf8(str));};util.ByteStringBuffer.prototype.putInt16=function(i){return this.putBytes(String.fromCharCode(i>>8&0xFF)+String.fromCharCode(i&0xFF));};util.ByteStringBuffer.prototype.putInt24=function(i){return this.putBytes(String.fromCharCode(i>>16&0xFF)+String.fromCharCode(i>>8&0xFF)+String.fromCharCode(i&0xFF));};util.ByteStringBuffer.prototype.putInt32=function(i){return this.putBytes(String.fromCharCode(i>>24&0xFF)+String.fromCharCode(i>>16&0xFF)+String.fromCharCode(i>>8&0xFF)+String.fromCharCode(i&0xFF));};util.ByteStringBuffer.prototype.putInt16Le=function(i){return this.putBytes(String.fromCharCode(i&0xFF)+String.fromCharCode(i>>8&0xFF));};util.ByteStringBuffer.prototype.putInt24Le=function(i){return this.putBytes(String.fromCharCode(i&0xFF)+String.fromCharCode(i>>8&0xFF)+String.fromCharCode(i>>16&0xFF));};util.ByteStringBuffer.prototype.putInt32Le=function(i){return this.putBytes(String.fromCharCode(i&0xFF)+String.fromCharCode(i>>8&0xFF)+String.fromCharCode(i>>16&0xFF)+String.fromCharCode(i>>24&0xFF));};util.ByteStringBuffer.prototype.putInt=function(i,n){_checkBitsParam(n);var bytes='';do{n-=8;bytes+=String.fromCharCode(i>>n&0xFF);}while(n>0);return this.putBytes(bytes);};util.ByteStringBuffer.prototype.putSignedInt=function(i,n){if(i<0){i+=2<<n-1;}return this.putInt(i,n);};util.ByteStringBuffer.prototype.putBuffer=function(buffer){return this.putBytes(buffer.getBytes());};util.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++);};util.ByteStringBuffer.prototype.getInt16=function(){var rval=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);this.read+=2;return rval;};util.ByteStringBuffer.prototype.getInt24=function(){var rval=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);this.read+=3;return rval;};util.ByteStringBuffer.prototype.getInt32=function(){var rval=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);this.read+=4;return rval;};util.ByteStringBuffer.prototype.getInt16Le=function(){var rval=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;this.read+=2;return rval;};util.ByteStringBuffer.prototype.getInt24Le=function(){var rval=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;this.read+=3;return rval;};util.ByteStringBuffer.prototype.getInt32Le=function(){var rval=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;this.read+=4;return rval;};util.ByteStringBuffer.prototype.getInt=function(n){_checkBitsParam(n);var rval=0;do{rval=(rval<<8)+this.data.charCodeAt(this.read++);n-=8;}while(n>0);return rval;};util.ByteStringBuffer.prototype.getSignedInt=function(n){var x=this.getInt(n);var max=2<<n-2;if(x>=max){x-=max<<1;}return x;};util.ByteStringBuffer.prototype.getBytes=function(count){var rval;if(count){count=Math.min(this.length(),count);rval=this.data.slice(this.read,this.read+count);this.read+=count;}else if(count===0){rval='';}else{rval=this.read===0?this.data:this.data.slice(this.read);this.clear();}return rval;};util.ByteStringBuffer.prototype.bytes=function(count){return typeof count==='undefined'?this.data.slice(this.read):this.data.slice(this.read,this.read+count);};util.ByteStringBuffer.prototype.at=function(i){return this.data.charCodeAt(this.read+i);};util.ByteStringBuffer.prototype.setAt=function(i,b){this.data=this.data.substr(0,this.read+i)+String.fromCharCode(b)+this.data.substr(this.read+i+1);return this;};util.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1);};util.ByteStringBuffer.prototype.copy=function(){var c=util.createBuffer(this.data);c.read=this.read;return c;};util.ByteStringBuffer.prototype.compact=function(){if(this.read>0){this.data=this.data.slice(this.read);this.read=0;}return this;};util.ByteStringBuffer.prototype.clear=function(){this.data='';this.read=0;return this;};util.ByteStringBuffer.prototype.truncate=function(count){var len=Math.max(0,this.length()-count);this.data=this.data.substr(this.read,len);this.read=0;return this;};util.ByteStringBuffer.prototype.toHex=function(){var rval='';for(var i=this.read;i<this.data.length;++i){var b=this.data.charCodeAt(i);if(b<16){rval+='0';}rval+=b.toString(16);}return rval;};util.ByteStringBuffer.prototype.toString=function(){return util.decodeUtf8(this.bytes());};function DataBuffer(b,options){options=options||{};this.read=options.readOffset||0;this.growSize=options.growSize||1024;var isArrayBuffer=util.isArrayBuffer(b);var isArrayBufferView=util.isArrayBufferView(b);if(isArrayBuffer||isArrayBufferView){if(isArrayBuffer){this.data=new DataView(b);}else{this.data=new DataView(b.buffer,b.byteOffset,b.byteLength);}this.write='writeOffset'in options?options.writeOffset:this.data.byteLength;return;}this.data=new DataView(new ArrayBuffer(0));this.write=0;if(b!==null&&b!==undefined){this.putBytes(b);}if('writeOffset'in options){this.write=options.writeOffset;}}util.DataBuffer=DataBuffer;util.DataBuffer.prototype.length=function(){return this.write-this.read;};util.DataBuffer.prototype.isEmpty=function(){return this.length()<=0;};util.DataBuffer.prototype.accommodate=function(amount,growSize){if(this.length()>=amount){return this;}growSize=Math.max(growSize||this.growSize,amount);var src=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength);var dst=new Uint8Array(this.length()+growSize);dst.set(src);this.data=new DataView(dst.buffer);return this;};util.DataBuffer.prototype.putByte=function(b){this.accommodate(1);this.data.setUint8(this.write++,b);return this;};util.DataBuffer.prototype.fillWithByte=function(b,n){this.accommodate(n);for(var i=0;i<n;++i){this.data.setUint8(b);}return this;};util.DataBuffer.prototype.putBytes=function(bytes,encoding){if(util.isArrayBufferView(bytes)){var src=new Uint8Array(bytes.buffer,bytes.byteOffset,bytes.byteLength);var len=src.byteLength-src.byteOffset;this.accommodate(len);var dst=new Uint8Array(this.data.buffer,this.write);dst.set(src);this.write+=len;return this;}if(util.isArrayBuffer(bytes)){var src=new Uint8Array(bytes);this.accommodate(src.byteLength);var dst=new Uint8Array(this.data.buffer);dst.set(src,this.write);this.write+=src.byteLength;return this;}if(bytes instanceof util.DataBuffer||typeof bytes==='object'&&typeof bytes.read==='number'&&typeof bytes.write==='number'&&util.isArrayBufferView(bytes.data)){var src=new Uint8Array(bytes.data.byteLength,bytes.read,bytes.length());this.accommodate(src.byteLength);var dst=new Uint8Array(bytes.data.byteLength,this.write);dst.set(src);this.write+=src.byteLength;return this;}if(bytes instanceof util.ByteStringBuffer){bytes=bytes.data;encoding='binary';}encoding=encoding||'binary';if(typeof bytes==='string'){var view;if(encoding==='hex'){this.accommodate(Math.ceil(bytes.length/2));view=new Uint8Array(this.data.buffer,this.write);this.write+=util.binary.hex.decode(bytes,view,this.write);return this;}if(encoding==='base64'){this.accommodate(Math.ceil(bytes.length/4)*3);view=new Uint8Array(this.data.buffer,this.write);this.write+=util.binary.base64.decode(bytes,view,this.write);return this;}if(encoding==='utf8'){bytes=util.encodeUtf8(bytes);encoding='binary';}if(encoding==='binary'||encoding==='raw'){this.accommodate(bytes.length);view=new Uint8Array(this.data.buffer,this.write);this.write+=util.binary.raw.decode(view);return this;}if(encoding==='utf16'){this.accommodate(bytes.length*2);view=new Uint16Array(this.data.buffer,this.write);this.write+=util.text.utf16.encode(view);return this;}throw new Error('Invalid encoding: '+encoding);}throw Error('Invalid parameter: '+bytes);};util.DataBuffer.prototype.putBuffer=function(buffer){this.putBytes(buffer);buffer.clear();return this;};util.DataBuffer.prototype.putString=function(str){return this.putBytes(str,'utf16');};util.DataBuffer.prototype.putInt16=function(i){this.accommodate(2);this.data.setInt16(this.write,i);this.write+=2;return this;};util.DataBuffer.prototype.putInt24=function(i){this.accommodate(3);this.data.setInt16(this.write,i>>8&0xFFFF);this.data.setInt8(this.write,i>>16&0xFF);this.write+=3;return this;};util.DataBuffer.prototype.putInt32=function(i){this.accommodate(4);this.data.setInt32(this.write,i);this.write+=4;return this;};util.DataBuffer.prototype.putInt16Le=function(i){this.accommodate(2);this.data.setInt16(this.write,i,true);this.write+=2;return this;};util.DataBuffer.prototype.putInt24Le=function(i){this.accommodate(3);this.data.setInt8(this.write,i>>16&0xFF);this.data.setInt16(this.write,i>>8&0xFFFF,true);this.write+=3;return this;};util.DataBuffer.prototype.putInt32Le=function(i){this.accommodate(4);this.data.setInt32(this.write,i,true);this.write+=4;return this;};util.DataBuffer.prototype.putInt=function(i,n){_checkBitsParam(n);this.accommodate(n/8);do{n-=8;this.data.setInt8(this.write++,i>>n&0xFF);}while(n>0);return this;};util.DataBuffer.prototype.putSignedInt=function(i,n){_checkBitsParam(n);this.accommodate(n/8);if(i<0){i+=2<<n-1;}return this.putInt(i,n);};util.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++);};util.DataBuffer.prototype.getInt16=function(){var rval=this.data.getInt16(this.read);this.read+=2;return rval;};util.DataBuffer.prototype.getInt24=function(){var rval=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);this.read+=3;return rval;};util.DataBuffer.prototype.getInt32=function(){var rval=this.data.getInt32(this.read);this.read+=4;return rval;};util.DataBuffer.prototype.getInt16Le=function(){var rval=this.data.getInt16(this.read,true);this.read+=2;return rval;};util.DataBuffer.prototype.getInt24Le=function(){var rval=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,true)<<8;this.read+=3;return rval;};util.DataBuffer.prototype.getInt32Le=function(){var rval=this.data.getInt32(this.read,true);this.read+=4;return rval;};util.DataBuffer.prototype.getInt=function(n){_checkBitsParam(n);var rval=0;do{rval=(rval<<8)+this.data.getInt8(this.read++);n-=8;}while(n>0);return rval;};util.DataBuffer.prototype.getSignedInt=function(n){var x=this.getInt(n);var max=2<<n-2;if(x>=max){x-=max<<1;}return x;};util.DataBuffer.prototype.getBytes=function(count){var rval;if(count){count=Math.min(this.length(),count);rval=this.data.slice(this.read,this.read+count);this.read+=count;}else if(count===0){rval='';}else{rval=this.read===0?this.data:this.data.slice(this.read);this.clear();}return rval;};util.DataBuffer.prototype.bytes=function(count){return typeof count==='undefined'?this.data.slice(this.read):this.data.slice(this.read,this.read+count);};util.DataBuffer.prototype.at=function(i){return this.data.getUint8(this.read+i);};util.DataBuffer.prototype.setAt=function(i,b){this.data.setUint8(i,b);return this;};util.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1);};util.DataBuffer.prototype.copy=function(){return new util.DataBuffer(this);};util.DataBuffer.prototype.compact=function(){if(this.read>0){var src=new Uint8Array(this.data.buffer,this.read);var dst=new Uint8Array(src.byteLength);dst.set(src);this.data=new DataView(dst);this.write-=this.read;this.read=0;}return this;};util.DataBuffer.prototype.clear=function(){this.data=new DataView(new ArrayBuffer(0));this.read=this.write=0;return this;};util.DataBuffer.prototype.truncate=function(count){this.write=Math.max(0,this.length()-count);this.read=Math.min(this.read,this.write);return this;};util.DataBuffer.prototype.toHex=function(){var rval='';for(var i=this.read;i<this.data.byteLength;++i){var b=this.data.getUint8(i);if(b<16){rval+='0';}rval+=b.toString(16);}return rval;};util.DataBuffer.prototype.toString=function(encoding){var view=new Uint8Array(this.data,this.read,this.length());encoding=encoding||'utf8';if(encoding==='binary'||encoding==='raw'){return util.binary.raw.encode(view);}if(encoding==='hex'){return util.binary.hex.encode(view);}if(encoding==='base64'){return util.binary.base64.encode(view);}if(encoding==='utf8'){return util.text.utf8.decode(view);}if(encoding==='utf16'){return util.text.utf16.decode(view);}throw new Error('Invalid encoding: '+encoding);};util.createBuffer=function(input,encoding){encoding=encoding||'raw';if(input!==undefined&&encoding==='utf8'){input=util.encodeUtf8(input);}return new util.ByteBuffer(input);};util.fillString=function(c,n){var s='';while(n>0){if(n&1){s+=c;}n>>>=1;if(n>0){c+=c;}}return s;};util.xorBytes=function(s1,s2,n){var s3='';var b='';var t='';var i=0;var c=0;for(;n>0;--n,++i){b=s1.charCodeAt(i)^s2.charCodeAt(i);if(c>=10){s3+=t;t='';c=0;}t+=String.fromCharCode(b);++c;}s3+=t;return s3;};util.hexToBytes=function(hex){var rval='';var i=0;if(hex.length&1==1){i=1;rval+=String.fromCharCode(parseInt(hex[0],16));}for(;i<hex.length;i+=2){rval+=String.fromCharCode(parseInt(hex.substr(i,2),16));}return rval;};util.bytesToHex=function(bytes){return util.createBuffer(bytes).toHex();};util.int32ToBytes=function(i){return String.fromCharCode(i>>24&0xFF)+String.fromCharCode(i>>16&0xFF)+String.fromCharCode(i>>8&0xFF)+String.fromCharCode(i&0xFF);};var _base64='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';var _base64Idx=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51];var _base58='123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz';util.encode64=function(input,maxline){var line='';var output='';var chr1,chr2,chr3;var i=0;while(i<input.length){chr1=input.charCodeAt(i++);chr2=input.charCodeAt(i++);chr3=input.charCodeAt(i++);line+=_base64.charAt(chr1>>2);line+=_base64.charAt((chr1&3)<<4|chr2>>4);if(isNaN(chr2)){line+='==';}else{line+=_base64.charAt((chr2&15)<<2|chr3>>6);line+=isNaN(chr3)?'=':_base64.charAt(chr3&63);}if(maxline&&line.length>maxline){output+=line.substr(0,maxline)+'\r\n';line=line.substr(maxline);}}output+=line;return output;};util.decode64=function(input){input=input.replace(/[^A-Za-z0-9\+\/\=]/g,'');var output='';var enc1,enc2,enc3,enc4;var i=0;while(i<input.length){enc1=_base64Idx[input.charCodeAt(i++)-43];enc2=_base64Idx[input.charCodeAt(i++)-43];enc3=_base64Idx[input.charCodeAt(i++)-43];enc4=_base64Idx[input.charCodeAt(i++)-43];output+=String.fromCharCode(enc1<<2|enc2>>4);if(enc3!==64){output+=String.fromCharCode((enc2&15)<<4|enc3>>2);if(enc4!==64){output+=String.fromCharCode((enc3&3)<<6|enc4);}}}return output;};util.encodeUtf8=function(str){return unescape(encodeURIComponent(str));};util.decodeUtf8=function(str){return decodeURIComponent(escape(str));};util.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:baseN.encode,decode:baseN.decode}};util.binary.raw.encode=function(bytes){return String.fromCharCode.apply(null,bytes);};util.binary.raw.decode=function(str,output,offset){var out=output;if(!out){out=new Uint8Array(str.length);}offset=offset||0;var j=offset;for(var i=0;i<str.length;++i){out[j++]=str.charCodeAt(i);}return output?j-offset:out;};util.binary.hex.encode=util.bytesToHex;util.binary.hex.decode=function(hex,output,offset){var out=output;if(!out){out=new Uint8Array(Math.ceil(hex.length/2));}offset=offset||0;var i=0,j=offset;if(hex.length&1){i=1;out[j++]=parseInt(hex[0],16);}for(;i<hex.length;i+=2){out[j++]=parseInt(hex.substr(i,2),16);}return output?j-offset:out;};util.binary.base64.encode=function(input,maxline){var line='';var output='';var chr1,chr2,chr3;var i=0;while(i<input.byteLength){chr1=input[i++];chr2=input[i++];chr3=input[i++];line+=_base64.charAt(chr1>>2);line+=_base64.charAt((chr1&3)<<4|chr2>>4);if(isNaN(chr2)){line+='==';}else{line+=_base64.charAt((chr2&15)<<2|chr3>>6);line+=isNaN(chr3)?'=':_base64.charAt(chr3&63);}if(maxline&&line.length>maxline){output+=line.substr(0,maxline)+'\r\n';line=line.substr(maxline);}}output+=line;return output;};util.binary.base64.decode=function(input,output,offset){var out=output;if(!out){out=new Uint8Array(Math.ceil(input.length/4)*3);}input=input.replace(/[^A-Za-z0-9\+\/\=]/g,'');offset=offset||0;var enc1,enc2,enc3,enc4;var i=0,j=offset;while(i<input.length){enc1=_base64Idx[input.charCodeAt(i++)-43];enc2=_base64Idx[input.charCodeAt(i++)-43];enc3=_base64Idx[input.charCodeAt(i++)-43];enc4=_base64Idx[input.charCodeAt(i++)-43];out[j++]=enc1<<2|enc2>>4;if(enc3!==64){out[j++]=(enc2&15)<<4|enc3>>2;if(enc4!==64){out[j++]=(enc3&3)<<6|enc4;}}}return output?j-offset:out.subarray(0,j);};util.binary.base58.encode=function(input,maxline){return util.binary.baseN.encode(input,_base58,maxline);};util.binary.base58.decode=function(input,maxline){return util.binary.baseN.decode(input,_base58,maxline);};util.text={utf8:{},utf16:{}};util.text.utf8.encode=function(str,output,offset){str=util.encodeUtf8(str);var out=output;if(!out){out=new Uint8Array(str.length);}offset=offset||0;var j=offset;for(var i=0;i<str.length;++i){out[j++]=str.charCodeAt(i);}return output?j-offset:out;};util.text.utf8.decode=function(bytes){return util.decodeUtf8(String.fromCharCode.apply(null,bytes));};util.text.utf16.encode=function(str,output,offset){var out=output;if(!out){out=new Uint8Array(str.length*2);}var view=new Uint16Array(out.buffer);offset=offset||0;var j=offset;var k=offset;for(var i=0;i<str.length;++i){view[k++]=str.charCodeAt(i);j+=2;}return output?j-offset:out;};util.text.utf16.decode=function(bytes){return String.fromCharCode.apply(null,new Uint16Array(bytes.buffer));};util.deflate=function(api,bytes,raw){bytes=util.decode64(api.deflate(util.encode64(bytes)).rval);if(raw){var start=2;var flg=bytes.charCodeAt(1);if(flg&0x20){start=6;}bytes=bytes.substring(start,bytes.length-4);}return bytes;};util.inflate=function(api,bytes,raw){var rval=api.inflate(util.encode64(bytes)).rval;return rval===null?null:util.decode64(rval);};var _setStorageObject=function(api,id,obj){if(!api){throw new Error('WebStorage not available.');}var rval;if(obj===null){rval=api.removeItem(id);}else{obj=util.encode64(JSON.stringify(obj));rval=api.setItem(id,obj);}if(typeof rval!=='undefined'&&rval.rval!==true){var error=new Error(rval.error.message);error.id=rval.error.id;error.name=rval.error.name;throw error;}};var _getStorageObject=function(api,id){if(!api){throw new Error('WebStorage not available.');}var rval=api.getItem(id);if(api.init){if(rval.rval===null){if(rval.error){var error=new Error(rval.error.message);error.id=rval.error.id;error.name=rval.error.name;throw error;}rval=null;}else{rval=rval.rval;}}if(rval!==null){rval=JSON.parse(util.decode64(rval));}return rval;};var _setItem=function(api,id,key,data){var obj=_getStorageObject(api,id);if(obj===null){obj={};}obj[key]=data;_setStorageObject(api,id,obj);};var _getItem=function(api,id,key){var rval=_getStorageObject(api,id);if(rval!==null){rval=key in rval?rval[key]:null;}return rval;};var _removeItem=function(api,id,key){var obj=_getStorageObject(api,id);if(obj!==null&&key in obj){delete obj[key];var empty=true;for(var prop in obj){empty=false;break;}if(empty){obj=null;}_setStorageObject(api,id,obj);}};var _clearItems=function(api,id){_setStorageObject(api,id,null);};var _callStorageFunction=function(func,args,location){var rval=null;if(typeof location==='undefined'){location=['web','flash'];}var type;var done=false;var exception=null;for(var idx in location){type=location[idx];try{if(type==='flash'||type==='both'){if(args[0]===null){throw new Error('Flash local storage not available.');}rval=func.apply(this,args);done=type==='flash';}if(type==='web'||type==='both'){args[0]=localStorage;rval=func.apply(this,args);done=true;}}catch(ex){exception=ex;}if(done){break;}}if(!done){throw exception;}return rval;};util.setItem=function(api,id,key,data,location){_callStorageFunction(_setItem,arguments,location);};util.getItem=function(api,id,key,location){return _callStorageFunction(_getItem,arguments,location);};util.removeItem=function(api,id,key,location){_callStorageFunction(_removeItem,arguments,location);};util.clearItems=function(api,id,location){_callStorageFunction(_clearItems,arguments,location);};util.parseUrl=function(str){var regex=/^(https?):\/\/([^:&^\/]*):?(\d*)(.*)$/g;regex.lastIndex=0;var m=regex.exec(str);var url=m===null?null:{full:str,scheme:m[1],host:m[2],port:m[3],path:m[4]};if(url){url.fullHost=url.host;if(url.port){if(url.port!==80&&url.scheme==='http'){url.fullHost+=':'+url.port;}else if(url.port!==443&&url.scheme==='https'){url.fullHost+=':'+url.port;}}else if(url.scheme==='http'){url.port=80;}else if(url.scheme==='https'){url.port=443;}url.full=url.scheme+'://'+url.fullHost;}return url;};var _queryVariables=null;util.getQueryVariables=function(query){var parse=function(q){var rval={};var kvpairs=q.split('&');for(var i=0;i<kvpairs.length;i++){var pos=kvpairs[i].indexOf('=');var key;var val;if(pos>0){key=kvpairs[i].substring(0,pos);val=kvpairs[i].substring(pos+1);}else{key=kvpairs[i];val=null;}if(!(key in rval)){rval[key]=[];}if(!(key in Object.prototype)&&val!==null){rval[key].push(unescape(val));}}return rval;};var rval;if(typeof query==='undefined'){if(_queryVariables===null){if(typeof window!=='undefined'&&window.location&&window.location.search){_queryVariables=parse(window.location.search.substring(1));}else{_queryVariables={};}}rval=_queryVariables;}else{rval=parse(query);}return rval;};util.parseFragment=function(fragment){var fp=fragment;var fq='';var pos=fragment.indexOf('?');if(pos>0){fp=fragment.substring(0,pos);fq=fragment.substring(pos+1);}var path=fp.split('/');if(path.length>0&&path[0]===''){path.shift();}var query=fq===''?{}:util.getQueryVariables(fq);return{pathString:fp,queryString:fq,path:path,query:query};};util.makeRequest=function(reqString){var frag=util.parseFragment(reqString);var req={path:frag.pathString,query:frag.queryString,getPath:function(i){return typeof i==='undefined'?frag.path:frag.path[i];},getQuery:function(k,i){var rval;if(typeof k==='undefined'){rval=frag.query;}else{rval=frag.query[k];if(rval&&typeof i!=='undefined'){rval=rval[i];}}return rval;},getQueryLast:function(k,_default){var rval;var vals=req.getQuery(k);if(vals){rval=vals[vals.length-1];}else{rval=_default;}return rval;}};return req;};util.makeLink=function(path,query,fragment){path=jQuery.isArray(path)?path.join('/'):path;var qstr=jQuery.param(query||{});fragment=fragment||'';return path+(qstr.length>0?'?'+qstr:'')+(fragment.length>0?'#'+fragment:'');};util.setPath=function(object,keys,value){if(typeof object==='object'&&object!==null){var i=0;var len=keys.length;while(i<len){var next=keys[i++];if(i==len){object[next]=value;}else{var hasNext=next in object;if(!hasNext||hasNext&&typeof object[next]!=='object'||hasNext&&object[next]===null){object[next]={};}object=object[next];}}}};util.getPath=function(object,keys,_default){var i=0;var len=keys.length;var hasNext=true;while(hasNext&&i<len&&typeof object==='object'&&object!==null){var next=keys[i++];hasNext=next in object;if(hasNext){object=object[next];}}return hasNext?object:_default;};util.deletePath=function(object,keys){if(typeof object==='object'&&object!==null){var i=0;var len=keys.length;while(i<len){var next=keys[i++];if(i==len){delete object[next];}else{if(!(next in object)||typeof object[next]!=='object'||object[next]===null){break;}object=object[next];}}}};util.isEmpty=function(obj){for(var prop in obj){if(obj.hasOwnProperty(prop)){return false;}}return true;};util.format=function(format){var re=/%./g;var match;var part;var argi=0;var parts=[];var last=0;while(match=re.exec(format)){part=format.substring(last,re.lastIndex-2);if(part.length>0){parts.push(part);}last=re.lastIndex;var code=match[0][1];switch(code){case's':case'o':if(argi<arguments.length){parts.push(arguments[argi++ +1]);}else{parts.push('<?>');}break;case'%':parts.push('%');break;default:parts.push('<%'+code+'?>');}}parts.push(format.substring(last));return parts.join('');};util.formatNumber=function(number,decimals,dec_point,thousands_sep){var n=number,c=isNaN(decimals=Math.abs(decimals))?2:decimals;var d=dec_point===undefined?',':dec_point;var t=thousands_sep===undefined?'.':thousands_sep,s=n<0?'-':'';var i=parseInt(n=Math.abs(+n||0).toFixed(c),10)+'';var j=i.length>3?i.length%3:0;return s+(j?i.substr(0,j)+t:'')+i.substr(j).replace(/(\d{3})(?=\d)/g,'$1'+t)+(c?d+Math.abs(n-i).toFixed(c).slice(2):'');};util.formatSize=function(size){if(size>=1073741824){size=util.formatNumber(size/1073741824,2,'.','')+' GiB';}else if(size>=1048576){size=util.formatNumber(size/1048576,2,'.','')+' MiB';}else if(size>=1024){size=util.formatNumber(size/1024,0)+' KiB';}else{size=util.formatNumber(size,0)+' bytes';}return size;};util.bytesFromIP=function(ip){if(ip.indexOf('.')!==-1){return util.bytesFromIPv4(ip);}if(ip.indexOf(':')!==-1){return util.bytesFromIPv6(ip);}return null;};util.bytesFromIPv4=function(ip){ip=ip.split('.');if(ip.length!==4){return null;}var b=util.createBuffer();for(var i=0;i<ip.length;++i){var num=parseInt(ip[i],10);if(isNaN(num)){return null;}b.putByte(num);}return b.getBytes();};util.bytesFromIPv6=function(ip){var blanks=0;ip=ip.split(':').filter(function(e){if(e.length===0)++blanks;return true;});var zeros=(8-ip.length+blanks)*2;var b=util.createBuffer();for(var i=0;i<8;++i){if(!ip[i]||ip[i].length===0){b.fillWithByte(0,zeros);zeros=0;continue;}var bytes=util.hexToBytes(ip[i]);if(bytes.length<2){b.putByte(0);}b.putBytes(bytes);}return b.getBytes();};util.bytesToIP=function(bytes){if(bytes.length===4){return util.bytesToIPv4(bytes);}if(bytes.length===16){return util.bytesToIPv6(bytes);}return null;};util.bytesToIPv4=function(bytes){if(bytes.length!==4){return null;}var ip=[];for(var i=0;i<bytes.length;++i){ip.push(bytes.charCodeAt(i));}return ip.join('.');};util.bytesToIPv6=function(bytes){if(bytes.length!==16){return null;}var ip=[];var zeroGroups=[];var zeroMaxGroup=0;for(var i=0;i<bytes.length;i+=2){var hex=util.bytesToHex(bytes[i]+bytes[i+1]);while(hex[0]==='0'&&hex!=='0'){hex=hex.substr(1);}if(hex==='0'){var last=zeroGroups[zeroGroups.length-1];var idx=ip.length;if(!last||idx!==last.end+1){zeroGroups.push({start:idx,end:idx});}else{last.end=idx;if(last.end-last.start>zeroGroups[zeroMaxGroup].end-zeroGroups[zeroMaxGroup].start){zeroMaxGroup=zeroGroups.length-1;}}}ip.push(hex);}if(zeroGroups.length>0){var group=zeroGroups[zeroMaxGroup];if(group.end-group.start>0){ip.splice(group.start,group.end-group.start+1,'');if(group.start===0){ip.unshift('');}if(group.end===7){ip.push('');}}}return ip.join(':');};util.estimateCores=function(options,callback){if(typeof options==='function'){callback=options;options={};}options=options||{};if('cores'in util&&!options.update){return callback(null,util.cores);}if(typeof navigator!=='undefined'&&'hardwareConcurrency'in navigator&&navigator.hardwareConcurrency>0){util.cores=navigator.hardwareConcurrency;return callback(null,util.cores);}if(typeof Worker==='undefined'){util.cores=1;return callback(null,util.cores);}if(typeof Blob==='undefined'){util.cores=2;return callback(null,util.cores);}var blobUrl=URL.createObjectURL(new Blob(['(',function(){self.addEventListener('message',function(e){var st=Date.now();var et=st+4;while(Date.now()<et);self.postMessage({st:st,et:et});});}.toString(),')()'],{type:'application/javascript'}));sample([],5,16);function sample(max,samples,numWorkers){if(samples===0){var avg=Math.floor(max.reduce(function(avg,x){return avg+x;},0)/max.length);util.cores=Math.max(1,avg);URL.revokeObjectURL(blobUrl);return callback(null,util.cores);}map(numWorkers,function(err,results){max.push(reduce(numWorkers,results));sample(max,samples-1,numWorkers);});}function map(numWorkers,callback){var workers=[];var results=[];for(var i=0;i<numWorkers;++i){var worker=new Worker(blobUrl);worker.addEventListener('message',function(e){results.push(e.data);if(results.length===numWorkers){for(var i=0;i<numWorkers;++i){workers[i].terminate();}callback(null,results);}});workers.push(worker);}for(var i=0;i<numWorkers;++i){workers[i].postMessage(i);}}function reduce(numWorkers,results){var overlaps=[];for(var n=0;n<numWorkers;++n){var r1=results[n];var overlap=overlaps[n]=[];for(var i=0;i<numWorkers;++i){if(n===i){continue;}var r2=results[i];if(r1.st>r2.st&&r1.st<r2.et||r2.st>r1.st&&r2.st<r1.et){overlap.push(i);}}}return overlaps.reduce(function(max,overlap){return Math.max(max,overlap.length);},0);}};},1215:function(module){module.exports={bitcoin:{messagePrefix:'\x18Bitcoin Signed Message:\n',bech32:'bc',bip32:{public:0x0488b21e,private:0x0488ade4},pubKeyHash:0x00,scriptHash:0x05,wif:0x80},regtest:{messagePrefix:'\x18Bitcoin Signed Message:\n',bech32:'bcrt',bip32:{public:0x043587cf,private:0x04358394},pubKeyHash:0x6f,scriptHash:0xc4,wif:0xef},testnet:{messagePrefix:'\x18Bitcoin Signed Message:\n',bech32:'tb',bip32:{public:0x043587cf,private:0x04358394},pubKeyHash:0x6f,scriptHash:0xc4,wif:0xef}};},1217:function(module,__unusedexports,__webpack_require__){"use strict";module.exports=Writable;function WriteReq(chunk,encoding,cb){this.chunk=chunk;this.encoding=encoding;this.callback=cb;this.next=null;}function CorkedRequest(state){var _this=this;this.next=null;this.entry=null;this.finish=function(){onCorkedFinish(_this,state);};}var Duplex;Writable.WritableState=WritableState;var internalUtil={deprecate:__webpack_require__(8008)};var Stream=__webpack_require__(7810);var Buffer=__webpack_require__(9423).Buffer;var OurUint8Array=global.Uint8Array||function(){};function _uint8ArrayToBuffer(chunk){return Buffer.from(chunk);}function _isUint8Array(obj){return Buffer.isBuffer(obj)||obj instanceof OurUint8Array;}var destroyImpl=__webpack_require__(5106);var _require=__webpack_require__(4539),getHighWaterMark=_require.getHighWaterMark;var _require$codes=__webpack_require__(3368).codes,ERR_INVALID_ARG_TYPE=_require$codes.ERR_INVALID_ARG_TYPE,ERR_METHOD_NOT_IMPLEMENTED=_require$codes.ERR_METHOD_NOT_IMPLEMENTED,ERR_MULTIPLE_CALLBACK=_require$codes.ERR_MULTIPLE_CALLBACK,ERR_STREAM_CANNOT_PIPE=_require$codes.ERR_STREAM_CANNOT_PIPE,ERR_STREAM_DESTROYED=_require$codes.ERR_STREAM_DESTROYED,ERR_STREAM_NULL_VALUES=_require$codes.ERR_STREAM_NULL_VALUES,ERR_STREAM_WRITE_AFTER_END=_require$codes.ERR_STREAM_WRITE_AFTER_END,ERR_UNKNOWN_ENCODING=_require$codes.ERR_UNKNOWN_ENCODING;__webpack_require__(92)(Writable,Stream);function nop(){}function WritableState(options,stream,isDuplex){Duplex=Duplex||__webpack_require__(1686);options=options||{};if(typeof isDuplex!=='boolean')isDuplex=stream instanceof Duplex;this.objectMode=!!options.objectMode;if(isDuplex)this.objectMode=this.objectMode||!!options.writableObjectMode;this.highWaterMark=getHighWaterMark(this,options,'writableHighWaterMark',isDuplex);this.finalCalled=false;this.needDrain=false;this.ending=false;this.ended=false;this.finished=false;this.destroyed=false;var noDecode=options.decodeStrings===false;this.decodeStrings=!noDecode;this.defaultEncoding=options.defaultEncoding||'utf8';this.length=0;this.writing=false;this.corked=0;this.sync=true;this.bufferProcessing=false;this.onwrite=function(er){onwrite(stream,er);};this.writecb=null;this.writelen=0;this.bufferedRequest=null;this.lastBufferedRequest=null;this.pendingcb=0;this.prefinished=false;this.errorEmitted=false;this.emitClose=options.emitClose!==false;this.bufferedRequestCount=0;this.corkedRequestsFree=new CorkedRequest(this);}WritableState.prototype.getBuffer=function getBuffer(){var current=this.bufferedRequest;var out=[];while(current){out.push(current);current=current.next;}return out;};(function(){try{Object.defineProperty(WritableState.prototype,'buffer',{get:internalUtil.deprecate(function writableStateBufferGetter(){return this.getBuffer();},'_writableState.buffer is deprecated. Use _writableState.getBuffer '+'instead.','DEP0003')});}catch(_){}})();var realHasInstance;if(typeof Symbol==='function'&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]==='function'){realHasInstance=Function.prototype[Symbol.hasInstance];Object.defineProperty(Writable,Symbol.hasInstance,{value:function value(object){if(realHasInstance.call(this,object))return true;if(this!==Writable)return false;return object&&object._writableState instanceof WritableState;}});}else{realHasInstance=function realHasInstance(object){return object instanceof this;};}function Writable(options){Duplex=Duplex||__webpack_require__(1686);var isDuplex=this instanceof Duplex;if(!isDuplex&&!realHasInstance.call(Writable,this))return new Writable(options);this._writableState=new WritableState(options,this,isDuplex);this.writable=true;if(options){if(typeof options.write==='function')this._write=options.write;if(typeof options.writev==='function')this._writev=options.writev;if(typeof options.destroy==='function')this._destroy=options.destroy;if(typeof options.final==='function')this._final=options.final;}Stream.call(this);}Writable.prototype.pipe=function(){this.emit('error',new ERR_STREAM_CANNOT_PIPE());};function writeAfterEnd(stream,cb){var er=new ERR_STREAM_WRITE_AFTER_END();stream.emit('error',er);process.nextTick(cb,er);}function validChunk(stream,state,chunk,cb){var er;if(chunk===null){er=new ERR_STREAM_NULL_VALUES();}else if(typeof chunk!=='string'&&!state.objectMode){er=new ERR_INVALID_ARG_TYPE('chunk',['string','Buffer'],chunk);}if(er){stream.emit('error',er);process.nextTick(cb,er);return false;}return true;}Writable.prototype.write=function(chunk,encoding,cb){var state=this._writableState;var ret=false;var isBuf=!state.objectMode&&_isUint8Array(chunk);if(isBuf&&!Buffer.isBuffer(chunk)){chunk=_uint8ArrayToBuffer(chunk);}if(typeof encoding==='function'){cb=encoding;encoding=null;}if(isBuf)encoding='buffer';else if(!encoding)encoding=state.defaultEncoding;if(typeof cb!=='function')cb=nop;if(state.ending)writeAfterEnd(this,cb);else if(isBuf||validChunk(this,state,chunk,cb)){state.pendingcb++;ret=writeOrBuffer(this,state,isBuf,chunk,encoding,cb);}return ret;};Writable.prototype.cork=function(){this._writableState.corked++;};Writable.prototype.uncork=function(){var state=this._writableState;if(state.corked){state.corked--;if(!state.writing&&!state.corked&&!state.bufferProcessing&&state.bufferedRequest)clearBuffer(this,state);}};Writable.prototype.setDefaultEncoding=function setDefaultEncoding(encoding){if(typeof encoding==='string')encoding=encoding.toLowerCase();if(!(['hex','utf8','utf-8','ascii','binary','base64','ucs2','ucs-2','utf16le','utf-16le','raw'].indexOf((encoding+'').toLowerCase())>-1))throw new ERR_UNKNOWN_ENCODING(encoding);this._writableState.defaultEncoding=encoding;return this;};Object.defineProperty(Writable.prototype,'writableBuffer',{enumerable:false,get:function get(){return this._writableState&&this._writableState.getBuffer();}});function decodeChunk(state,chunk,encoding){if(!state.objectMode&&state.decodeStrings!==false&&typeof chunk==='string'){chunk=Buffer.from(chunk,encoding);}return chunk;}Object.defineProperty(Writable.prototype,'writableHighWaterMark',{enumerable:false,get:function get(){return this._writableState.highWaterMark;}});function writeOrBuffer(stream,state,isBuf,chunk,encoding,cb){if(!isBuf){var newChunk=decodeChunk(state,chunk,encoding);if(chunk!==newChunk){isBuf=true;encoding='buffer';chunk=newChunk;}}var len=state.objectMode?1:chunk.length;state.length+=len;var ret=state.length<state.highWaterMark;if(!ret)state.needDrain=true;if(state.writing||state.corked){var last=state.lastBufferedRequest;state.lastBufferedRequest={chunk:chunk,encoding:encoding,isBuf:isBuf,callback:cb,next:null};if(last){last.next=state.lastBufferedRequest;}else{state.bufferedRequest=state.lastBufferedRequest;}state.bufferedRequestCount+=1;}else{doWrite(stream,state,false,len,chunk,encoding,cb);}return ret;}function doWrite(stream,state,writev,len,chunk,encoding,cb){state.writelen=len;state.writecb=cb;state.writing=true;state.sync=true;if(state.destroyed)state.onwrite(new ERR_STREAM_DESTROYED('write'));else if(writev)stream._writev(chunk,state.onwrite);else stream._write(chunk,encoding,state.onwrite);state.sync=false;}function onwriteError(stream,state,sync,er,cb){--state.pendingcb;if(sync){process.nextTick(cb,er);process.nextTick(finishMaybe,stream,state);stream._writableState.errorEmitted=true;stream.emit('error',er);}else{cb(er);stream._writableState.errorEmitted=true;stream.emit('error',er);finishMaybe(stream,state);}}function onwriteStateUpdate(state){state.writing=false;state.writecb=null;state.length-=state.writelen;state.writelen=0;}function onwrite(stream,er){var state=stream._writableState;var sync=state.sync;var cb=state.writecb;if(typeof cb!=='function')throw new ERR_MULTIPLE_CALLBACK();onwriteStateUpdate(state);if(er)onwriteError(stream,state,sync,er,cb);else{var finished=needFinish(state)||stream.destroyed;if(!finished&&!state.corked&&!state.bufferProcessing&&state.bufferedRequest){clearBuffer(stream,state);}if(sync){process.nextTick(afterWrite,stream,state,finished,cb);}else{afterWrite(stream,state,finished,cb);}}}function afterWrite(stream,state,finished,cb){if(!finished)onwriteDrain(stream,state);state.pendingcb--;cb();finishMaybe(stream,state);}function onwriteDrain(stream,state){if(state.length===0&&state.needDrain){state.needDrain=false;stream.emit('drain');}}function clearBuffer(stream,state){state.bufferProcessing=true;var entry=state.bufferedRequest;if(stream._writev&&entry&&entry.next){var l=state.bufferedRequestCount;var buffer=new Array(l);var holder=state.corkedRequestsFree;holder.entry=entry;var count=0;var allBuffers=true;while(entry){buffer[count]=entry;if(!entry.isBuf)allBuffers=false;entry=entry.next;count+=1;}buffer.allBuffers=allBuffers;doWrite(stream,state,true,state.length,buffer,'',holder.finish);state.pendingcb++;state.lastBufferedRequest=null;if(holder.next){state.corkedRequestsFree=holder.next;holder.next=null;}else{state.corkedRequestsFree=new CorkedRequest(state);}state.bufferedRequestCount=0;}else{while(entry){var chunk=entry.chunk;var encoding=entry.encoding;var cb=entry.callback;var len=state.objectMode?1:chunk.length;doWrite(stream,state,false,len,chunk,encoding,cb);entry=entry.next;state.bufferedRequestCount--;if(state.writing){break;}}if(entry===null)state.lastBufferedRequest=null;}state.bufferedRequest=entry;state.bufferProcessing=false;}Writable.prototype._write=function(chunk,encoding,cb){cb(new ERR_METHOD_NOT_IMPLEMENTED('_write()'));};Writable.prototype._writev=null;Writable.prototype.end=function(chunk,encoding,cb){var state=this._writableState;if(typeof chunk==='function'){cb=chunk;chunk=null;encoding=null;}else if(typeof encoding==='function'){cb=encoding;encoding=null;}if(chunk!==null&&chunk!==undefined)this.write(chunk,encoding);if(state.corked){state.corked=1;this.uncork();}if(!state.ending)endWritable(this,state,cb);return this;};Object.defineProperty(Writable.prototype,'writableLength',{enumerable:false,get:function get(){return this._writableState.length;}});function needFinish(state){return state.ending&&state.length===0&&state.bufferedRequest===null&&!state.finished&&!state.writing;}function callFinal(stream,state){stream._final(function(err){state.pendingcb--;if(err){stream.emit('error',err);}state.prefinished=true;stream.emit('prefinish');finishMaybe(stream,state);});}function prefinish(stream,state){if(!state.prefinished&&!state.finalCalled){if(typeof stream._final==='function'&&!state.destroyed){state.pendingcb++;state.finalCalled=true;process.nextTick(callFinal,stream,state);}else{state.prefinished=true;stream.emit('prefinish');}}}function finishMaybe(stream,state){var need=needFinish(state);if(need){prefinish(stream,state);if(state.pendingcb===0){state.finished=true;stream.emit('finish');}}return need;}function endWritable(stream,state,cb){state.ending=true;finishMaybe(stream,state);if(cb){if(state.finished)process.nextTick(cb);else stream.once('finish',cb);}state.ended=true;stream.writable=false;}function onCorkedFinish(corkReq,state,err){var entry=corkReq.entry;corkReq.entry=null;while(entry){var cb=entry.callback;state.pendingcb--;cb(err);entry=entry.next;}state.corkedRequestsFree.next=corkReq;}Object.defineProperty(Writable.prototype,'destroyed',{enumerable:false,get:function get(){if(this._writableState===undefined){return false;}return this._writableState.destroyed;},set:function set(value){if(!this._writableState){return;}this._writableState.destroyed=value;}});Writable.prototype.destroy=destroyImpl.destroy;Writable.prototype._undestroy=destroyImpl.undestroy;Writable.prototype._destroy=function(err,cb){cb(err);};},1226:function(__unusedmodule,exports){"use strict";exports.ERR_WS_STAR_WEBSOCKET_CONNECTION='ERR_WS_STAR_WEBSOCKET_CONNECTION';},1231:function(__unusedmodule,exports,__webpack_require__){"use strict";exports.util=__webpack_require__(5803);exports.resolver=__webpack_require__(1834);},1235:function(__unusedmodule,exports,__webpack_require__){"use strict";var Buffer=__webpack_require__(7572).Buffer;var isEncoding=Buffer.isEncoding||function(encoding){encoding=''+encoding;switch(encoding&&encoding.toLowerCase()){case'hex':case'utf8':case'utf-8':case'ascii':case'binary':case'base64':case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':case'raw':return true;default:return false;}};function _normalizeEncoding(enc){if(!enc)return'utf8';var retried;while(true){switch(enc){case'utf8':case'utf-8':return'utf8';case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return'utf16le';case'latin1':case'binary':return'latin1';case'base64':case'ascii':case'hex':return enc;default:if(retried)return;enc=(''+enc).toLowerCase();retried=true;}}};function normalizeEncoding(enc){var nenc=_normalizeEncoding(enc);if(typeof nenc!=='string'&&(Buffer.isEncoding===isEncoding||!isEncoding(enc)))throw new Error('Unknown encoding: '+enc);return nenc||enc;}exports.StringDecoder=StringDecoder;function StringDecoder(encoding){this.encoding=normalizeEncoding(encoding);var nb;switch(this.encoding){case'utf16le':this.text=utf16Text;this.end=utf16End;nb=4;break;case'utf8':this.fillLast=utf8FillLast;nb=4;break;case'base64':this.text=base64Text;this.end=base64End;nb=3;break;default:this.write=simpleWrite;this.end=simpleEnd;return;}this.lastNeed=0;this.lastTotal=0;this.lastChar=Buffer.allocUnsafe(nb);}StringDecoder.prototype.write=function(buf){if(buf.length===0)return'';var r;var i;if(this.lastNeed){r=this.fillLast(buf);if(r===undefined)return'';i=this.lastNeed;this.lastNeed=0;}else{i=0;}if(i<buf.length)return r?r+this.text(buf,i):this.text(buf,i);return r||'';};StringDecoder.prototype.end=utf8End;StringDecoder.prototype.text=utf8Text;StringDecoder.prototype.fillLast=function(buf){if(this.lastNeed<=buf.length){buf.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed);return this.lastChar.toString(this.encoding,0,this.lastTotal);}buf.copy(this.lastChar,this.lastTotal-this.lastNeed,0,buf.length);this.lastNeed-=buf.length;};function utf8CheckByte(byte){if(byte<=0x7F)return 0;else if(byte>>5===0x06)return 2;else if(byte>>4===0x0E)return 3;else if(byte>>3===0x1E)return 4;return byte>>6===0x02?-1:-2;}function utf8CheckIncomplete(self,buf,i){var j=buf.length-1;if(j<i)return 0;var nb=utf8CheckByte(buf[j]);if(nb>=0){if(nb>0)self.lastNeed=nb-1;return nb;}if(--j<i||nb===-2)return 0;nb=utf8CheckByte(buf[j]);if(nb>=0){if(nb>0)self.lastNeed=nb-2;return nb;}if(--j<i||nb===-2)return 0;nb=utf8CheckByte(buf[j]);if(nb>=0){if(nb>0){if(nb===2)nb=0;else self.lastNeed=nb-3;}return nb;}return 0;}function utf8CheckExtraBytes(self,buf,p){if((buf[0]&0xC0)!==0x80){self.lastNeed=0;return'\ufffd';}if(self.lastNeed>1&&buf.length>1){if((buf[1]&0xC0)!==0x80){self.lastNeed=1;return'\ufffd';}if(self.lastNeed>2&&buf.length>2){if((buf[2]&0xC0)!==0x80){self.lastNeed=2;return'\ufffd';}}}}function utf8FillLast(buf){var p=this.lastTotal-this.lastNeed;var r=utf8CheckExtraBytes(this,buf,p);if(r!==undefined)return r;if(this.lastNeed<=buf.length){buf.copy(this.lastChar,p,0,this.lastNeed);return this.lastChar.toString(this.encoding,0,this.lastTotal);}buf.copy(this.lastChar,p,0,buf.length);this.lastNeed-=buf.length;}function utf8Text(buf,i){var total=utf8CheckIncomplete(this,buf,i);if(!this.lastNeed)return buf.toString('utf8',i);this.lastTotal=total;var end=buf.length-(total-this.lastNeed);buf.copy(this.lastChar,0,end);return buf.toString('utf8',i,end);}function utf8End(buf){var r=buf&&buf.length?this.write(buf):'';if(this.lastNeed)return r+'\ufffd';return r;}function utf16Text(buf,i){if((buf.length-i)%2===0){var r=buf.toString('utf16le',i);if(r){var c=r.charCodeAt(r.length-1);if(c>=0xD800&&c<=0xDBFF){this.lastNeed=2;this.lastTotal=4;this.lastChar[0]=buf[buf.length-2];this.lastChar[1]=buf[buf.length-1];return r.slice(0,-1);}}return r;}this.lastNeed=1;this.lastTotal=2;this.lastChar[0]=buf[buf.length-1];return buf.toString('utf16le',i,buf.length-1);}function utf16End(buf){var r=buf&&buf.length?this.write(buf):'';if(this.lastNeed){var end=this.lastTotal-this.lastNeed;return r+this.lastChar.toString('utf16le',0,end);}return r;}function base64Text(buf,i){var n=(buf.length-i)%3;if(n===0)return buf.toString('base64',i);this.lastNeed=3-n;this.lastTotal=3;if(n===1){this.lastChar[0]=buf[buf.length-1];}else{this.lastChar[0]=buf[buf.length-2];this.lastChar[1]=buf[buf.length-1];}return buf.toString('base64',i,buf.length-n);}function base64End(buf){var r=buf&&buf.length?this.write(buf):'';if(this.lastNeed)return r+this.lastChar.toString('base64',0,3-this.lastNeed);return r;}function simpleWrite(buf){return buf.toString(this.encoding);}function simpleEnd(buf){return buf&&buf.length?this.write(buf):'';}},1237:function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj;};}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return _typeof(obj);}exports.log=log;exports.formatArgs=formatArgs;exports.save=save;exports.load=load;exports.useColors=useColors;exports.storage=localstorage();exports.colors=['#0000CC','#0000FF','#0033CC','#0033FF','#0066CC','#0066FF','#0099CC','#0099FF','#00CC00','#00CC33','#00CC66','#00CC99','#00CCCC','#00CCFF','#3300CC','#3300FF','#3333CC','#3333FF','#3366CC','#3366FF','#3399CC','#3399FF','#33CC00','#33CC33','#33CC66','#33CC99','#33CCCC','#33CCFF','#6600CC','#6600FF','#6633CC','#6633FF','#66CC00','#66CC33','#9900CC','#9900FF','#9933CC','#9933FF','#99CC00','#99CC33','#CC0000','#CC0033','#CC0066','#CC0099','#CC00CC','#CC00FF','#CC3300','#CC3333','#CC3366','#CC3399','#CC33CC','#CC33FF','#CC6600','#CC6633','#CC9900','#CC9933','#CCCC00','#CCCC33','#FF0000','#FF0033','#FF0066','#FF0099','#FF00CC','#FF00FF','#FF3300','#FF3333','#FF3366','#FF3399','#FF33CC','#FF33FF','#FF6600','#FF6633','#FF9900','#FF9933','#FFCC00','#FFCC33'];function useColors(){if(typeof window!=='undefined'&&window.process&&(window.process.type==='renderer'||window.process.__nwjs)){return true;}if(typeof navigator!=='undefined'&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)){return false;}return typeof document!=='undefined'&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!=='undefined'&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!=='undefined'&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!=='undefined'&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/);}function formatArgs(args){args[0]=(this.useColors?'%c':'')+this.namespace+(this.useColors?' %c':' ')+args[0]+(this.useColors?'%c ':' ')+'+'+module.exports.humanize(this.diff);if(!this.useColors){return;}var c='color: '+this.color;args.splice(1,0,c,'color: inherit');var index=0;var lastC=0;args[0].replace(/%[a-zA-Z%]/g,function(match){if(match==='%%'){return;}index++;if(match==='%c'){lastC=index;}});args.splice(lastC,0,c);}function log(){var _console;return(typeof console==="undefined"?"undefined":_typeof(console))==='object'&&console.log&&(_console=console).log.apply(_console,arguments);}function save(namespaces){try{if(namespaces){exports.storage.setItem('debug',namespaces);}else{exports.storage.removeItem('debug');}}catch(error){}}function load(){var r;try{r=exports.storage.getItem('debug');}catch(error){}if(!r&&typeof process!=='undefined'&&'env'in process){r=process.env.DEBUG;}return r;}function localstorage(){try{return localStorage;}catch(error){}}module.exports=__webpack_require__(788)(exports);var formatters=module.exports.formatters;formatters.j=function(v){try{return JSON.stringify(v);}catch(error){return'[UnexpectedJSONParseError]: '+error.message;}};},1245:function(module,__unusedexports,__webpack_require__){var v1=__webpack_require__(5688);var v4=__webpack_require__(5292);var uuid=v4;uuid.v1=v1;uuid.v4=v4;module.exports=uuid;},1259:function(module,__unusedexports,__webpack_require__){"use strict";var BN=__webpack_require__(5584);var elliptic=__webpack_require__(3459);var utils=elliptic.utils;var assert=utils.assert;function Signature(options,enc){if(options instanceof Signature)return options;if(this._importDER(options,enc))return;assert(options.r&&options.s,'Signature without r or s');this.r=new BN(options.r,16);this.s=new BN(options.s,16);if(options.recoveryParam===undefined)this.recoveryParam=null;else this.recoveryParam=options.recoveryParam;}module.exports=Signature;function Position(){this.place=0;}function getLength(buf,p){var initial=buf[p.place++];if(!(initial&0x80)){return initial;}var octetLen=initial&0xf;var val=0;for(var i=0,off=p.place;i<octetLen;i++,off++){val<<=8;val|=buf[off];}p.place=off;return val;}function rmPadding(buf){var i=0;var len=buf.length-1;while(!buf[i]&&!(buf[i+1]&0x80)&&i<len){i++;}if(i===0){return buf;}return buf.slice(i);}Signature.prototype._importDER=function _importDER(data,enc){data=utils.toArray(data,enc);var p=new Position();if(data[p.place++]!==0x30){return false;}var len=getLength(data,p);if(len+p.place!==data.length){return false;}if(data[p.place++]!==0x02){return false;}var rlen=getLength(data,p);var r=data.slice(p.place,rlen+p.place);p.place+=rlen;if(data[p.place++]!==0x02){return false;}var slen=getLength(data,p);if(data.length!==slen+p.place){return false;}var s=data.slice(p.place,slen+p.place);if(r[0]===0&&r[1]&0x80){r=r.slice(1);}if(s[0]===0&&s[1]&0x80){s=s.slice(1);}this.r=new BN(r);this.s=new BN(s);this.recoveryParam=null;return true;};function constructLength(arr,len){if(len<0x80){arr.push(len);return;}var octets=1+(Math.log(len)/Math.LN2>>>3);arr.push(octets|0x80);while(--octets){arr.push(len>>>(octets<<3)&0xff);}arr.push(len);}Signature.prototype.toDER=function toDER(enc){var r=this.r.toArray();var s=this.s.toArray();if(r[0]&0x80)r=[0].concat(r);if(s[0]&0x80)s=[0].concat(s);r=rmPadding(r);s=rmPadding(s);while(!s[0]&&!(s[1]&0x80)){s=s.slice(1);}var arr=[0x02];constructLength(arr,r.length);arr=arr.concat(r);arr.push(0x02);constructLength(arr,s.length);var backHalf=arr.concat(s);var res=[0x30];constructLength(res,backHalf.length);res=res.concat(backHalf);return utils.encode(res,enc);};},1263:function(module,__unusedexports,__webpack_require__){"use strict";const promisify=__webpack_require__(6955);const pull=__webpack_require__(2885);const globSource=__webpack_require__(4746);module.exports=self=>{return promisify((...args)=>{const callback=args.pop();const options=typeof args[args.length-1]==='string'?{}:args.pop();const paths=args;pull(globSource(...paths,options),self.addPullStream(options),pull.collect(callback));});};},1264:function(module,__unusedexports,__webpack_require__){"use strict";var utils=__webpack_require__(1702);var common=__webpack_require__(7874);var shaCommon=__webpack_require__(296);var rotl32=utils.rotl32;var sum32=utils.sum32;var sum32_5=utils.sum32_5;var ft_1=shaCommon.ft_1;var BlockHash=common.BlockHash;var sha1_K=[0x5A827999,0x6ED9EBA1,0x8F1BBCDC,0xCA62C1D6];function SHA1(){if(!(this instanceof SHA1))return new SHA1();BlockHash.call(this);this.h=[0x67452301,0xefcdab89,0x98badcfe,0x10325476,0xc3d2e1f0];this.W=new Array(80);}utils.inherits(SHA1,BlockHash);module.exports=SHA1;SHA1.blockSize=512;SHA1.outSize=160;SHA1.hmacStrength=80;SHA1.padLength=64;SHA1.prototype._update=function _update(msg,start){var W=this.W;for(var i=0;i<16;i++)W[i]=msg[start+i];for(;i<W.length;i++)W[i]=rotl32(W[i-3]^W[i-8]^W[i-14]^W[i-16],1);var a=this.h[0];var b=this.h[1];var c=this.h[2];var d=this.h[3];var e=this.h[4];for(i=0;i<W.length;i++){var s=~~(i/20);var t=sum32_5(rotl32(a,5),ft_1(s,b,c,d),e,W[i],sha1_K[s]);e=d;d=c;c=rotl32(b,30);b=a;a=t;}this.h[0]=sum32(this.h[0],a);this.h[1]=sum32(this.h[1],b);this.h[2]=sum32(this.h[2],c);this.h[3]=sum32(this.h[3],d);this.h[4]=sum32(this.h[4],e);};SHA1.prototype._digest=function digest(enc){if(enc==='hex')return utils.toHex32(this.h,'big');else return utils.split32(this.h,'big');};},1271:function(module,__unusedexports,__webpack_require__){module.exports={input:__webpack_require__(2606),output:__webpack_require__(3910)};},1273:function(module,__unusedexports,__webpack_require__){var mapCacheClear=__webpack_require__(9262),mapCacheDelete=__webpack_require__(4666),mapCacheGet=__webpack_require__(3664),mapCacheHas=__webpack_require__(7991),mapCacheSet=__webpack_require__(8065);function MapCache(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1]);}}MapCache.prototype.clear=mapCacheClear;MapCache.prototype['delete']=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;module.exports=MapCache;},1274:function(module,__unusedexports,__webpack_require__){var isFunction=__webpack_require__(7028),isMasked=__webpack_require__(9598),isObject=__webpack_require__(2988),toSource=__webpack_require__(8239);var reRegExpChar=/[\\^$.*+?()[\]{}|]/g;var reIsHostCtor=/^\[object .+?Constructor\]$/;var funcProto=Function.prototype,objectProto=Object.prototype;var funcToString=funcProto.toString;var hasOwnProperty=objectProto.hasOwnProperty;var reIsNative=RegExp('^'+funcToString.call(hasOwnProperty).replace(reRegExpChar,'\\$&').replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,'$1.*?')+'$');function baseIsNative(value){if(!isObject(value)||isMasked(value)){return false;}var pattern=isFunction(value)?reIsNative:reIsHostCtor;return pattern.test(toSource(value));}module.exports=baseIsNative;},1277:function(module,__unusedexports,__webpack_require__){"use strict";try{module.exports=__webpack_require__(5674)(__dirname+'/bufferutil');}catch(e){module.exports=__webpack_require__(8235);}},1281:function(module,__unusedexports,__webpack_require__){"use strict";const blake=__webpack_require__(4429);const toCallback=__webpack_require__(2447).toCallback;const minB=0xb201;const minS=0xb241;const blake2b={init:blake.blake2bInit,update:blake.blake2bUpdate,digest:blake.blake2bFinal};const blake2s={init:blake.blake2sInit,update:blake.blake2sUpdate,digest:blake.blake2sFinal};const makeB2Hash=(size,hf)=>toCallback(buf=>{const ctx=hf.init(size,null);hf.update(ctx,buf);return Buffer.from(hf.digest(ctx));});module.exports=table=>{for(let i=0;i<64;i++){table[minB+i]=makeB2Hash(i+1,blake2b);}for(let i=0;i<32;i++){table[minS+i]=makeB2Hash(i+1,blake2s);}};},1283:function(module,__unusedexports,__webpack_require__){"use strict";var pna=__webpack_require__(88);var objectKeys=Object.keys||function(obj){var keys=[];for(var key in obj){keys.push(key);}return keys;};module.exports=Duplex;var util=__webpack_require__(5548);util.inherits=__webpack_require__(92);var Readable=__webpack_require__(2843);var Writable=__webpack_require__(8909);util.inherits(Duplex,Readable);{var keys=objectKeys(Writable.prototype);for(var v=0;v<keys.length;v++){var method=keys[v];if(!Duplex.prototype[method])Duplex.prototype[method]=Writable.prototype[method];}}function Duplex(options){if(!(this instanceof Duplex))return new Duplex(options);Readable.call(this,options);Writable.call(this,options);if(options&&options.readable===false)this.readable=false;if(options&&options.writable===false)this.writable=false;this.allowHalfOpen=true;if(options&&options.allowHalfOpen===false)this.allowHalfOpen=false;this.once('end',onend);}Object.defineProperty(Duplex.prototype,'writableHighWaterMark',{enumerable:false,get:function(){return this._writableState.highWaterMark;}});function onend(){if(this.allowHalfOpen||this._writableState.ended)return;pna.nextTick(onEndNT,this);}function onEndNT(self){self.end();}Object.defineProperty(Duplex.prototype,'destroyed',{get:function(){if(this._readableState===undefined||this._writableState===undefined){return false;}return this._readableState.destroyed&&this._writableState.destroyed;},set:function(value){if(this._readableState===undefined||this._writableState===undefined){return;}this._readableState.destroyed=value;this._writableState.destroyed=value;}});Duplex.prototype._destroy=function(err,cb){this.push(null);this.end();pna.nextTick(cb,err);};},1286:function(module,__unusedexports,__webpack_require__){"use strict";const Any=__webpack_require__(7492);const Ref=__webpack_require__(1937);const Hoek=__webpack_require__(2850);const internals={precisionRx:/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/,normalizeExponent(str){return str.replace(/\.?0+e/,'e').replace(/e\+/,'e').replace(/^\+/,'').replace(/^(-?)0+([1-9])/,'$1$2');},normalizeDecimal(str){str=str.replace(/^\+/,'').replace(/\.0+$/,'').replace(/^(-?)0+([1-9])/,'$1$2');if(str.includes('.')&&str.endsWith('0')){str=str.replace(/0+$/,'');}return str;}};internals.Number=class extends Any{constructor(){super();this._type='number';this._flags.unsafe=false;this._invalids.add(Infinity);this._invalids.add(-Infinity);}_base(value,state,options){const result={errors:null,value};if(typeof value==='string'&&options.convert){const matches=value.match(/^\s*[+-]?\d+(?:\.\d+)?(?:e([+-]?\d+))?\s*$/i);if(matches){value=value.trim();result.value=parseFloat(value);if(!this._flags.unsafe){if(value.includes('e')){if(internals.normalizeExponent(`${result.value/Math.pow(10,matches[1])}e${matches[1]}`)!==internals.normalizeExponent(value)){result.errors=this.createError('number.unsafe',{value},state,options);return result;}}else{if(result.value.toString()!==internals.normalizeDecimal(value)){result.errors=this.createError('number.unsafe',{value},state,options);return result;}}}}}const isNumber=typeof result.value==='number'&&!isNaN(result.value);if(options.convert&&'precision'in this._flags&&isNumber){const precision=Math.pow(10,this._flags.precision);result.value=Math.round(result.value*precision)/precision;}if(isNumber){if(!this._flags.unsafe&&(value>Number.MAX_SAFE_INTEGER||value<Number.MIN_SAFE_INTEGER)){result.errors=this.createError('number.unsafe',{value},state,options);}}else{result.errors=this.createError('number.base',{value},state,options);}return result;}multiple(base){const isRef=Ref.isRef(base);if(!isRef){Hoek.assert(typeof base==='number'&&isFinite(base),'multiple must be a number');Hoek.assert(base>0,'multiple must be greater than 0');}return this._test('multiple',base,function(value,state,options){const divisor=isRef?base(state.reference||state.parent,options):base;if(isRef&&(typeof divisor!=='number'||!isFinite(divisor))){return this.createError('number.ref',{ref:base.key},state,options);}if(value%divisor===0){return value;}return this.createError('number.multiple',{multiple:base,value},state,options);});}integer(){return this._test('integer',undefined,function(value,state,options){return Math.trunc(value)-value===0?value:this.createError('number.integer',{value},state,options);});}unsafe(enabled=true){Hoek.assert(typeof enabled==='boolean','enabled must be a boolean');if(this._flags.unsafe===enabled){return this;}const obj=this.clone();obj._flags.unsafe=enabled;return obj;}negative(){return this._test('negative',undefined,function(value,state,options){if(value<0){return value;}return this.createError('number.negative',{value},state,options);});}positive(){return this._test('positive',undefined,function(value,state,options){if(value>0){return value;}return this.createError('number.positive',{value},state,options);});}precision(limit){Hoek.assert(Number.isSafeInteger(limit),'limit must be an integer');Hoek.assert(!('precision'in this._flags),'precision already set');const obj=this._test('precision',limit,function(value,state,options){const places=value.toString().match(internals.precisionRx);const decimals=Math.max((places[1]?places[1].length:0)-(places[2]?parseInt(places[2],10):0),0);if(decimals<=limit){return value;}return this.createError('number.precision',{limit,value},state,options);});obj._flags.precision=limit;return obj;}port(){return this._test('port',undefined,function(value,state,options){if(!Number.isSafeInteger(value)||value<0||value>65535){return this.createError('number.port',{value},state,options);}return value;});}};internals.compare=function(type,compare){return function(limit){const isRef=Ref.isRef(limit);const isNumber=typeof limit==='number'&&!isNaN(limit);Hoek.assert(isNumber||isRef,'limit must be a number or reference');return this._test(type,limit,function(value,state,options){let compareTo;if(isRef){compareTo=limit(state.reference||state.parent,options);if(!(typeof compareTo==='number'&&!isNaN(compareTo))){return this.createError('number.ref',{ref:limit.key},state,options);}}else{compareTo=limit;}if(compare(value,compareTo)){return value;}return this.createError('number.'+type,{limit:compareTo,value},state,options);});};};internals.Number.prototype.min=internals.compare('min',(value,limit)=>value>=limit);internals.Number.prototype.max=internals.compare('max',(value,limit)=>value<=limit);internals.Number.prototype.greater=internals.compare('greater',(value,limit)=>value>limit);internals.Number.prototype.less=internals.compare('less',(value,limit)=>value<limit);module.exports=new internals.Number();},1288:function(module,__unusedexports,__webpack_require__){"use strict";const Util=__webpack_require__(649);const Any=__webpack_require__(7492);const Hoek=__webpack_require__(2850);const internals={};internals.Map=class extends Map{slice(){return new internals.Map(this);}toString(){return Util.inspect(this);}};internals.Symbol=class extends Any{constructor(){super();this._type='symbol';this._inner.map=new internals.Map();}_base(value,state,options){if(options.convert){const lookup=this._inner.map.get(value);if(lookup){value=lookup;}if(this._flags.allowOnly){return{value,errors:typeof value==='symbol'?null:this.createError('symbol.map',{value,map:this._inner.map},state,options)};}}return{value,errors:typeof value==='symbol'?null:this.createError('symbol.base',{value},state,options)};}map(iterable){if(iterable&&!iterable[Symbol.iterator]&&typeof iterable==='object'){iterable=Object.entries(iterable);}Hoek.assert(iterable&&iterable[Symbol.iterator],'Iterable must be an iterable or object');const obj=this.clone();const symbols=[];for(const entry of iterable){Hoek.assert(entry&&entry[Symbol.iterator],'Entry must be an iterable');const[key,value]=entry;Hoek.assert(typeof key!=='object'&&typeof key!=='function'&&typeof key!=='symbol','Key must not be an object, function, or Symbol');Hoek.assert(typeof value==='symbol','Value must be a Symbol');obj._inner.map.set(key,value);symbols.push(value);}return obj.valid(...symbols);}describe(){const description=super.describe();description.map=new Map(this._inner.map);return description;}};module.exports=new internals.Symbol();},1289:function(module,__unusedexports,__webpack_require__){const createHmac=__webpack_require__(2125);const ONE1=Buffer.alloc(1,1);const ZERO1=Buffer.alloc(1,0);function deterministicGenerateK(hash,x,checkSig,isPrivate){let k=Buffer.alloc(32,0);let v=Buffer.alloc(32,1);k=createHmac('sha256',k).update(v).update(ZERO1).update(x).update(hash).digest();v=createHmac('sha256',k).update(v).digest();k=createHmac('sha256',k).update(v).update(ONE1).update(x).update(hash).digest();v=createHmac('sha256',k).update(v).digest();v=createHmac('sha256',k).update(v).digest();let T=v;while(!isPrivate(T)||!checkSig(T)){k=createHmac('sha256',k).update(v).update(ZERO1).digest();v=createHmac('sha256',k).update(v).digest();v=createHmac('sha256',k).update(v).digest();T=v;}return T;}module.exports=deterministicGenerateK;},1299:function(module,__unusedexports,__webpack_require__){"use strict";var encodings=__webpack_require__(366);var compileDecode=__webpack_require__(6642);var compileEncode=__webpack_require__(3010);var compileEncodingLength=__webpack_require__(485);var varint=__webpack_require__(2572);var flatten=function(values){if(!values)return null;var result={};Object.keys(values).forEach(function(k){result[k]=values[k].value;});return result;};module.exports=function(schema,extraEncodings){var messages={};var enums={};var cache={};var visit=function(schema,prefix){if(schema.enums){schema.enums.forEach(function(e){e.id=prefix+(prefix?'.':'')+e.name;enums[e.id]=e;visit(e,e.id);});}if(schema.messages){schema.messages.forEach(function(m){m.id=prefix+(prefix?'.':'')+m.name;messages[m.id]=m;m.fields.forEach(function(f){if(!f.map)return;var name='Map_'+f.map.from+'_'+f.map.to;var map={name:name,enums:[],messages:[],fields:[{name:'key',type:f.map.from,tag:1,repeated:false,required:true},{name:'value',type:f.map.to,tag:2,repeated:false,required:false}],extensions:null,id:prefix+(prefix?'.':'')+name};if(!messages[map.id]){messages[map.id]=map;schema.messages.push(map);}f.type=name;f.repeated=true;});visit(m,m.id);});}};visit(schema,'');var compileEnum=function(e){var values=Object.keys(e.values||[]).map(function(k){return parseInt(e.values[k].value,10);});var encode=function encode(val,buf,offset){if(!values.length||values.indexOf(val)===-1){throw new Error('Invalid enum value: '+val);}varint.encode(val,buf,offset);encode.bytes=varint.encode.bytes;return buf;};var decode=function decode(buf,offset){var val=varint.decode(buf,offset);if(!values.length||values.indexOf(val)===-1){throw new Error('Invalid enum value: '+val);}decode.bytes=varint.decode.bytes;return val;};return encodings.make(0,encode,decode,varint.encodingLength);};var compileMessage=function(m,exports){m.messages.forEach(function(nested){exports[nested.name]=resolve(nested.name,m.id);});m.enums.forEach(function(val){exports[val.name]=flatten(val.values);});exports.type=2;exports.message=true;exports.name=m.name;var oneofs={};m.fields.forEach(function(f){if(!f.oneof)return;if(!oneofs[f.oneof])oneofs[f.oneof]=[];oneofs[f.oneof].push(f.name);});var enc=m.fields.map(function(f){return resolve(f.type,m.id);});var encodingLength=compileEncodingLength(m,enc,oneofs);var encode=compileEncode(m,resolve,enc,oneofs,encodingLength);var decode=compileDecode(m,resolve,enc);encode.bytes=decode.bytes=0;exports.buffer=true;exports.encode=encode;exports.decode=decode;exports.encodingLength=encodingLength;return exports;};var resolve=function(name,from,compile){if(extraEncodings&&extraEncodings[name])return extraEncodings[name];if(encodings[name])return encodings[name];var m=(from?from+'.'+name:name).split('.').map(function(part,i,list){return list.slice(0,i).concat(name).join('.');}).reverse().reduce(function(result,id){return result||messages[id]||enums[id];},null);if(compile===false)return m;if(!m)throw new Error('Could not resolve '+name);if(m.values)return compileEnum(m);var res=cache[m.id]||compileMessage(m,cache[m.id]={});return res;};return(schema.enums||[]).concat((schema.messages||[]).map(function(message){return resolve(message.id);}));};},1300:function(module,__unusedexports,__webpack_require__){"use strict";const EthAccount=__webpack_require__(8638);const cidFromHash=__webpack_require__(5855);const createResolver=__webpack_require__(7656);const emptyCodeHash=__webpack_require__(5823);module.exports=createResolver('eth-account-snapshot',EthAccount,mapFromEthObj);function mapFromEthObj(account,options,callback){const paths=[];paths.push({path:'storage',value:{'/':cidFromHash('eth-storage-trie',account.stateRoot).toBaseEncodedString()}});if(emptyCodeHash.equals(account.codeHash)){paths.push({path:'code',value:Buffer.from('')});}else{paths.push({path:'code',value:{'/':cidFromHash('raw',account.codeHash).toBaseEncodedString()}});}paths.push({path:'stateRoot',value:account.stateRoot});paths.push({path:'codeHash',value:account.codeHash});paths.push({path:'nonce',value:account.nonce});paths.push({path:'balance',value:account.balance});paths.push({path:'isEmpty',value:account.isEmpty()});paths.push({path:'isContract',value:account.isContract()});callback(null,paths);}},1302:function(__unusedmodule,exports,__webpack_require__){"use strict";const Joi=__webpack_require__(463);const internals={};exports.options=Joi.object({abortEarly:Joi.boolean(),convert:Joi.boolean(),allowUnknown:Joi.boolean(),skipFunctions:Joi.boolean(),stripUnknown:[Joi.boolean(),Joi.object({arrays:Joi.boolean(),objects:Joi.boolean()}).or('arrays','objects')],language:Joi.object(),presence:Joi.string().only('required','optional','forbidden','ignore'),raw:Joi.boolean(),context:Joi.object(),strip:Joi.boolean(),noDefaults:Joi.boolean(),escapeHtml:Joi.boolean()}).strict();},1320:function(module,__unusedexports,__webpack_require__){"use strict";const waterfall=__webpack_require__(4265);const UnixFs=__webpack_require__(7959);const exporter=__webpack_require__(7623);const{loadNode,formatCid,toMfsPath,FILE_SEPARATOR,FILE_TYPES}=__webpack_require__(7777);const pull=__webpack_require__(418);const collect=__webpack_require__(8342);const asyncMap=__webpack_require__(9720);const filter=__webpack_require__(708);const once=__webpack_require__(751);const error=__webpack_require__(5619);const defer=__webpack_require__(5213);const defaultOptions={long:false,cidBase:'base58btc'};module.exports=context=>{return function mfsLs(path,options={}){if(typeof path==='object'){options=path;path=FILE_SEPARATOR;}if(path===undefined){path=FILE_SEPARATOR;}options=Object.assign({},defaultOptions,options);options.long=options.l||options.long;const deferred=defer.source();waterfall([cb=>toMfsPath(context,path,cb),({mfsPath,depth},cb)=>{pull(exporter(mfsPath,context.ipld,{maxDepth:depth}),collect((err,files)=>{if(err){return cb(err);}if(files.length>1){return cb(new Error(`Path ${path} had ${files.length} roots`));}const file=files[0];if(!file){return cb(new Error(`${path} does not exist`));}if(file.type!=='dir'){return cb(null,once(file));}let first=true;return cb(null,pull(exporter(mfsPath,context.ipld,{maxDepth:depth+1}),filter(()=>{if(first){first=false;return false;}return true;})));}));},(source,cb)=>{cb(null,pull(source,asyncMap((file,cb)=>{if(!options.long){return cb(null,{name:file.name,type:0,size:0,hash:''});}loadNode(context,{cid:file.hash},(err,result)=>{if(err){return cb(err);}const meta=UnixFs.unmarshal(result.node.data);cb(null,{name:file.name,type:FILE_TYPES[meta.type],hash:formatCid(file.hash,options.cidBase),size:meta.fileSize()||0});});})));}],(err,source)=>{if(err){return deferred.resolve(error(err));}deferred.resolve(source);});return deferred;};};},1326:function(module,__unusedexports,__webpack_require__){"use strict";const Connection=__webpack_require__(378).Connection;const ConnectionFSM=__webpack_require__(9782);const getPeerInfo=__webpack_require__(6904);const once=__webpack_require__(7957);const debug=__webpack_require__(746);const log=debug('libp2p:switch:dial');function maybePerformHandshake({protocol,proxyConnection,connection,callback}){if(protocol){return connection.shake(protocol,(err,conn)=>{if(!conn){return callback(err);}proxyConnection.setPeerInfo(connection.theirPeerInfo);proxyConnection.setInnerConn(conn);callback(null,proxyConnection);});}callback();}function dial(_switch,returnFSM){return(peer,protocol,callback)=>{if(typeof protocol==='function'){callback=protocol;protocol=null;}callback=once(callback||function noop(){});const peerInfo=getPeerInfo(peer,_switch._peerBook);const b58Id=peerInfo.id.toB58String();log(`dialing to ${b58Id.slice(0,8)} with protocol ${protocol||'unknown'}`);let connection=_switch.connection.getOne(b58Id);if(!ConnectionFSM.isConnectionFSM(connection)){connection=new ConnectionFSM({_switch,peerInfo,muxer:null,conn:null});connection.once('error',err=>callback(err));connection.once('connected',()=>connection.protect());connection.once('private',()=>connection.encrypt());connection.once('encrypted',()=>connection.upgrade());connection.once('muxed',()=>{maybePerformHandshake({protocol,proxyConnection,connection,callback});});connection.once('unmuxed',()=>{maybePerformHandshake({protocol,proxyConnection,connection,callback});});}const proxyConnection=new Connection();proxyConnection.setPeerInfo(peerInfo);setImmediate(()=>{if(connection.getState()==='MUXED'){maybePerformHandshake({protocol,proxyConnection,connection,callback});}else{connection.dial();}});return returnFSM?connection:proxyConnection;};}module.exports=dial;},1332:function(module,__unusedexports,__webpack_require__){var util=__webpack_require__(649);var AbstractIterator=__webpack_require__(8324).AbstractIterator;function DeferredIterator(options){AbstractIterator.call(this,options);this._options=options;this._iterator=null;this._operations=[];}util.inherits(DeferredIterator,AbstractIterator);DeferredIterator.prototype.setDb=function(db){var it=this._iterator=db.iterator(this._options);this._operations.forEach(function(op){it[op.method].apply(it,op.args);});};DeferredIterator.prototype._operation=function(method,args){if(this._iterator)return this._iterator[method].apply(this._iterator,args);this._operations.push({method:method,args:args});};'next end'.split(' ').forEach(function(m){DeferredIterator.prototype['_'+m]=function(){this._operation(m,arguments);};});module.exports=DeferredIterator;},1334:function(module,__unusedexports,__webpack_require__){const node=__webpack_require__(3986);const browser=__webpack_require__(7360);const Queue=__webpack_require__(1467);const{timeout}=__webpack_require__(1864);const observe=__webpack_require__(9264);const mutexes={};let implementation;const createMutex=(name,options)=>{if(implementation.isWorker){return{readLock:implementation.readLock(name,options),writeLock:implementation.writeLock(name,options)};}const masterQueue=new Queue({concurrency:1});let readQueue=null;return{readLock:fn=>{if(!readQueue){readQueue=new Queue({concurrency:options.concurrency,autoStart:false});const localReadQueue=readQueue;masterQueue.add(()=>{localReadQueue.start();return localReadQueue.onIdle().then(()=>{if(readQueue===localReadQueue){readQueue=null;}});});}return readQueue.add(()=>timeout(fn(),options.timeout));},writeLock:fn=>{readQueue=null;return masterQueue.add(()=>timeout(fn(),options.timeout));}};};const defaultOptions={concurrency:Infinity,timeout:84600000,global:global,singleProcess:false};module.exports=(name,options)=>{if(!options){options={};}if(typeof name==='object'){options=name;name='lock';}if(!name){name='lock';}options=Object.assign({},defaultOptions,options);if(!implementation){implementation=node(options)||browser(options);if(!implementation.isWorker){implementation.on('requestReadLock',(name,fn)=>{mutexes[name]&&mutexes[name].readLock(fn);});implementation.on('requestWriteLock',(name,fn)=>{mutexes[name]&&mutexes[name].writeLock(fn);});}}if(!mutexes[name]){mutexes[name]=createMutex(name,options);}return mutexes[name];};module.exports.Worker=function(script,Impl){Impl=Impl||global.Worker;let worker;try{worker=new Impl(script);}catch(error){if(error.message.includes('not a constructor')){worker=Impl(script);}}if(!worker){throw new Error('Could not create Worker from',Impl);}observe(worker);return worker;};},1351:function(module,__unusedexports,__webpack_require__){"use strict";const nextTick=__webpack_require__(7173);const Message=__webpack_require__(9683);const Wantlist=__webpack_require__(668);const CONSTANTS=__webpack_require__(2841);const MsgQueue=__webpack_require__(9621);const logger=__webpack_require__(8047).logger;module.exports=class WantManager{constructor(peerId,network,stats){this.peers=new Map();this.wantlist=new Wantlist(stats);this.network=network;this._stats=stats;this._peerId=peerId;this._log=logger(peerId,'want');}_addEntries(cids,cancel,force){const entries=cids.map((cid,i)=>{return new Message.Entry(cid,CONSTANTS.kMaxPriority-i,cancel);});entries.forEach(e=>{if(e.cancel){if(force){this.wantlist.removeForce(e.cid);}else{this.wantlist.remove(e.cid);}}else{this._log('adding to wl');this.wantlist.add(e.cid,e.priority);}});for(let p of this.peers.values()){p.addEntries(entries);}}_startPeerHandler(peerId){let mq=this.peers.get(peerId.toB58String());if(mq){mq.refcnt++;return;}mq=new MsgQueue(this._peerId,peerId,this.network);const fullwantlist=new Message(true);for(let entry of this.wantlist.entries()){fullwantlist.addEntry(entry[1].cid,entry[1].priority);}mq.addMessage(fullwantlist);this.peers.set(peerId.toB58String(),mq);return mq;}_stopPeerHandler(peerId){const mq=this.peers.get(peerId.toB58String());if(!mq){return;}mq.refcnt--;if(mq.refcnt>0){return;}this.peers.delete(peerId.toB58String());}wantBlocks(cids){this._addEntries(cids,false);}unwantBlocks(cids){this._log('unwant blocks: %s',cids.length);this._addEntries(cids,true,true);}cancelWants(cids){this._log('cancel wants: %s',cids.length);this._addEntries(cids,true);}connectedPeers(){return Array.from(this.peers.keys());}connected(peerId){this._startPeerHandler(peerId);}disconnected(peerId){this._stopPeerHandler(peerId);}start(callback){this.timer=setInterval(()=>{this._log('resend full-wantlist');const fullwantlist=new Message(true);this.wantlist.forEach(entry=>{fullwantlist.addEntry(entry.cid,entry.priority);});this.peers.forEach(p=>p.addMessage(fullwantlist));},60*1000);nextTick(()=>callback());}stop(callback){this.peers.forEach(mq=>this.disconnected(mq.peerId));clearInterval(this.timer);nextTick(()=>callback());}};},1355:function(module,__unusedexports,__webpack_require__){"use strict";const setImmediate=__webpack_require__(7368);const retry=__webpack_require__(9357);const toUri=__webpack_require__(3819);const debug=__webpack_require__(746);const CID=__webpack_require__(9339);const preload=__webpack_require__(1734);const log=debug('jsipfs:preload');log.error=debug('jsipfs:preload:error');const noop=err=>{if(err)log.error(err);};module.exports=self=>{const options=self._options.preload||{};options.enabled=Boolean(options.enabled);options.addresses=options.addresses||[];if(!options.enabled||!options.addresses.length){const api=(_,callback)=>{if(callback){setImmediate(()=>callback());}};api.start=()=>{};api.stop=()=>{};return api;}let stopped=true;let requests=[];const apiUris=options.addresses.map(apiAddrToUri);const api=(cid,callback)=>{callback=callback||noop;if(typeof cid!=='string'){try{cid=new CID(cid).toBaseEncodedString();}catch(err){return setImmediate(()=>callback(err));}}const fallbackApiUris=Array.from(apiUris);let request;const now=Date.now();retry({times:fallbackApiUris.length},cb=>{if(stopped)return cb(new Error(`preload aborted for ${cid}`));requests=requests.filter(r=>r!==request);const apiUri=fallbackApiUris.shift();request=preload(`${apiUri}/api/v0/refs?r=true&arg=${cid}`,cb);requests=requests.concat(request);},err=>{requests=requests.filter(r=>r!==request);if(err){return callback(err);}log(`preloaded ${cid} in ${Date.now()-now}ms`);callback();});};api.start=()=>{stopped=false;};api.stop=()=>{stopped=true;log(`canceling ${requests.length} pending preload request(s)`);requests.forEach(r=>r.cancel());requests=[];};return api;};function apiAddrToUri(addr){if(!(addr.endsWith('http')||addr.endsWith('https'))){addr=addr+'/http';}return toUri(addr);}},1356:function(module,__unusedexports,__webpack_require__){var createError=__webpack_require__(4458).create;var LevelUPError=createError('LevelUPError');var NotFoundError=createError('NotFoundError',LevelUPError);NotFoundError.prototype.notFound=true;NotFoundError.prototype.status=404;module.exports={LevelUPError:LevelUPError,InitializationError:createError('InitializationError',LevelUPError),OpenError:createError('OpenError',LevelUPError),ReadError:createError('ReadError',LevelUPError),WriteError:createError('WriteError',LevelUPError),NotFoundError:NotFoundError,EncodingError:createError('EncodingError',LevelUPError)};},1360:function(module,__unusedexports,__webpack_require__){var util=__webpack_require__(649),events=__webpack_require__(4859),http=__webpack_require__(3853),crypto=__webpack_require__(2984),Options=__webpack_require__(7370),WebSocket=__webpack_require__(6306),Extensions=__webpack_require__(4537),PerMessageDeflate=__webpack_require__(7505),tls=__webpack_require__(8060),url=__webpack_require__(774);function WebSocketServer(options,callback){if(this instanceof WebSocketServer===false){return new WebSocketServer(options,callback);}events.EventEmitter.call(this);options=new Options({host:'0.0.0.0',port:null,server:null,verifyClient:null,handleProtocols:null,path:null,noServer:false,disableHixie:false,clientTracking:true,perMessageDeflate:true,maxPayload:100*1024*1024}).merge(options);if(!options.isDefinedAndNonNull('port')&&!options.isDefinedAndNonNull('server')&&!options.value.noServer){throw new TypeError('`port` or a `server` must be provided');}var self=this;if(options.isDefinedAndNonNull('port')){this._server=http.createServer(function(req,res){var body=http.STATUS_CODES[426];res.writeHead(426,{'Content-Length':body.length,'Content-Type':'text/plain'});res.end(body);});this._server.allowHalfOpen=false;this._server.listen(options.value.port,options.value.host,callback);this._closeServer=function(){if(self._server)self._server.close();};}else if(options.value.server){this._server=options.value.server;if(options.value.path){if(this._server._webSocketPaths&&options.value.server._webSocketPaths[options.value.path]){throw new Error('two instances of WebSocketServer cannot listen on the same http server path');}if(typeof this._server._webSocketPaths!=='object'){this._server._webSocketPaths={};}this._server._webSocketPaths[options.value.path]=1;}}if(this._server){this._onceServerListening=function(){self.emit('listening');};this._server.once('listening',this._onceServerListening);}if(typeof this._server!='undefined'){this._onServerError=function(error){self.emit('error',error);};this._server.on('error',this._onServerError);this._onServerUpgrade=function(req,socket,upgradeHead){var head=new Buffer(upgradeHead.length);upgradeHead.copy(head);self.handleUpgrade(req,socket,head,function(client){self.emit('connection'+req.url,client);self.emit('connection',client);});};this._server.on('upgrade',this._onServerUpgrade);}this.options=options.value;this.path=options.value.path;this.clients=[];}util.inherits(WebSocketServer,events.EventEmitter);WebSocketServer.prototype.close=function(callback){var error=null;try{for(var i=0,l=this.clients.length;i<l;++i){this.clients[i].terminate();}}catch(e){error=e;}if(this.path&&this._server._webSocketPaths){delete this._server._webSocketPaths[this.path];if(Object.keys(this._server._webSocketPaths).length==0){delete this._server._webSocketPaths;}}try{if(typeof this._closeServer!=='undefined'){this._closeServer();}}finally{if(this._server){this._server.removeListener('listening',this._onceServerListening);this._server.removeListener('error',this._onServerError);this._server.removeListener('upgrade',this._onServerUpgrade);}delete this._server;}if(callback)callback(error);else if(error)throw error;};WebSocketServer.prototype.handleUpgrade=function(req,socket,upgradeHead,cb){if(this.options.path){var u=url.parse(req.url);if(u&&u.pathname!==this.options.path)return;}if(typeof req.headers.upgrade==='undefined'||req.headers.upgrade.toLowerCase()!=='websocket'){abortConnection(socket,400,'Bad Request');return;}if(req.headers['sec-websocket-key1'])handleHixieUpgrade.apply(this,arguments);else handleHybiUpgrade.apply(this,arguments);};module.exports=WebSocketServer;function handleHybiUpgrade(req,socket,upgradeHead,cb){var errorHandler=function(){try{socket.destroy();}catch(e){}};socket.on('error',errorHandler);if(!req.headers['sec-websocket-key']){abortConnection(socket,400,'Bad Request');return;}var version=parseInt(req.headers['sec-websocket-version']);if([8,13].indexOf(version)===-1){abortConnection(socket,400,'Bad Request');return;}var protocols=req.headers['sec-websocket-protocol'];var origin=version<13?req.headers['sec-websocket-origin']:req.headers['origin'];var extensionsOffer=Extensions.parse(req.headers['sec-websocket-extensions']);var self=this;var completeHybiUpgrade2=function(protocol){var key=req.headers['sec-websocket-key'];var shasum=crypto.createHash('sha1');shasum.update(key+"258EAFA5-E914-47DA-95CA-C5AB0DC85B11");key=shasum.digest('base64');var headers=['HTTP/1.1 101 Switching Protocols','Upgrade: websocket','Connection: Upgrade','Sec-WebSocket-Accept: '+key];if(typeof protocol!='undefined'){headers.push('Sec-WebSocket-Protocol: '+protocol);}var extensions={};try{extensions=acceptExtensions.call(self,extensionsOffer);}catch(err){abortConnection(socket,400,'Bad Request');return;}if(Object.keys(extensions).length){var serverExtensions={};Object.keys(extensions).forEach(function(token){serverExtensions[token]=[extensions[token].params];});headers.push('Sec-WebSocket-Extensions: '+Extensions.format(serverExtensions));}self.emit('headers',headers);socket.setTimeout(0);socket.setNoDelay(true);try{socket.write(headers.concat('','').join('\r\n'));}catch(e){try{socket.destroy();}catch(e){}return;}var client=new WebSocket([req,socket,upgradeHead],{protocolVersion:version,protocol:protocol,extensions:extensions,maxPayload:self.options.maxPayload});if(self.options.clientTracking){self.clients.push(client);client.on('close',function(){var index=self.clients.indexOf(client);if(index!=-1){self.clients.splice(index,1);}});}socket.removeListener('error',errorHandler);cb(client);};var completeHybiUpgrade1=function(){if(typeof self.options.handleProtocols=='function'){var protList=(protocols||"").split(/, */);var callbackCalled=false;var res=self.options.handleProtocols(protList,function(result,protocol){callbackCalled=true;if(!result)abortConnection(socket,401,'Unauthorized');else completeHybiUpgrade2(protocol);});if(!callbackCalled){abortConnection(socket,501,'Could not process protocols');}return;}else{if(typeof protocols!=='undefined'){completeHybiUpgrade2(protocols.split(/, */)[0]);}else{completeHybiUpgrade2();}}};if(typeof this.options.verifyClient=='function'){var info={origin:origin,secure:typeof req.connection.authorized!=='undefined'||typeof req.connection.encrypted!=='undefined',req:req};if(this.options.verifyClient.length==2){this.options.verifyClient(info,function(result,code,name){if(typeof code==='undefined')code=401;if(typeof name==='undefined')name=http.STATUS_CODES[code];if(!result)abortConnection(socket,code,name);else completeHybiUpgrade1();});return;}else if(!this.options.verifyClient(info)){abortConnection(socket,401,'Unauthorized');return;}}completeHybiUpgrade1();}function handleHixieUpgrade(req,socket,upgradeHead,cb){var errorHandler=function(){try{socket.destroy();}catch(e){}};socket.on('error',errorHandler);if(this.options.disableHixie){abortConnection(socket,401,'Hixie support disabled');return;}if(!req.headers['sec-websocket-key2']){abortConnection(socket,400,'Bad Request');return;}var origin=req.headers['origin'],self=this;var onClientVerified=function(){var wshost;if(!req.headers['x-forwarded-host'])wshost=req.headers.host;else wshost=req.headers['x-forwarded-host'];var location=(req.headers['x-forwarded-proto']==='https'||socket.encrypted?'wss':'ws')+'://'+wshost+req.url,protocol=req.headers['sec-websocket-protocol'];var buildResponseHeader=function(){var headers=['HTTP/1.1 101 Switching Protocols','Upgrade: WebSocket','Connection: Upgrade','Sec-WebSocket-Location: '+location];if(typeof protocol!='undefined')headers.push('Sec-WebSocket-Protocol: '+protocol);if(typeof origin!='undefined')headers.push('Sec-WebSocket-Origin: '+origin);return new Buffer(headers.concat('','').join('\r\n'));};var handshakeResponse=function(){socket.setTimeout(0);socket.setNoDelay(true);var headerBuffer=buildResponseHeader();try{socket.write(headerBuffer,'binary',function(err){if(err)socket.removeListener('data',handler);return;});}catch(e){try{socket.destroy();}catch(e){}return;};};var completeHandshake=function(nonce,rest,headerBuffer){var k1=req.headers['sec-websocket-key1'],k2=req.headers['sec-websocket-key2'],md5=crypto.createHash('md5');[k1,k2].forEach(function(k){var n=parseInt(k.replace(/[^\d]/g,'')),spaces=k.replace(/[^ ]/g,'').length;if(spaces===0||n%spaces!==0){abortConnection(socket,400,'Bad Request');return;}n/=spaces;md5.update(String.fromCharCode(n>>24&0xFF,n>>16&0xFF,n>>8&0xFF,n&0xFF));});md5.update(nonce.toString('binary'));socket.setTimeout(0);socket.setNoDelay(true);try{var hashBuffer=new Buffer(md5.digest('binary'),'binary');var handshakeBuffer=new Buffer(headerBuffer.length+hashBuffer.length);headerBuffer.copy(handshakeBuffer,0);hashBuffer.copy(handshakeBuffer,headerBuffer.length);socket.write(handshakeBuffer,'binary',function(err){if(err)return;var client=new WebSocket([req,socket,rest],{protocolVersion:'hixie-76',protocol:protocol});if(self.options.clientTracking){self.clients.push(client);client.on('close',function(){var index=self.clients.indexOf(client);if(index!=-1){self.clients.splice(index,1);}});}socket.removeListener('error',errorHandler);cb(client);});}catch(e){try{socket.destroy();}catch(e){}return;}};var nonceLength=8;if(upgradeHead&&upgradeHead.length>=nonceLength){var nonce=upgradeHead.slice(0,nonceLength);var rest=upgradeHead.length>nonceLength?upgradeHead.slice(nonceLength):null;completeHandshake.call(self,nonce,rest,buildResponseHeader());}else{var nonce=new Buffer(nonceLength);upgradeHead.copy(nonce,0);var received=upgradeHead.length;var rest=null;var handler=function(data){var toRead=Math.min(data.length,nonceLength-received);if(toRead===0)return;data.copy(nonce,received,0,toRead);received+=toRead;if(received==nonceLength){socket.removeListener('data',handler);if(toRead<data.length)rest=data.slice(toRead);completeHandshake.call(self,nonce,rest,new Buffer(0));}};socket.on('data',handler);handshakeResponse();}};if(typeof this.options.verifyClient=='function'){var info={origin:origin,secure:typeof req.connection.authorized!=='undefined'||typeof req.connection.encrypted!=='undefined',req:req};if(this.options.verifyClient.length==2){var self=this;this.options.verifyClient(info,function(result,code,name){if(typeof code==='undefined')code=401;if(typeof name==='undefined')name=http.STATUS_CODES[code];if(!result)abortConnection(socket,code,name);else onClientVerified.apply(self);});return;}else if(!this.options.verifyClient(info)){abortConnection(socket,401,'Unauthorized');return;}}onClientVerified();}function acceptExtensions(offer){var extensions={};var options=this.options.perMessageDeflate;var maxPayload=this.options.maxPayload;if(options&&offer[PerMessageDeflate.extensionName]){var perMessageDeflate=new PerMessageDeflate(options!==true?options:{},true,maxPayload);perMessageDeflate.accept(offer[PerMessageDeflate.extensionName]);extensions[PerMessageDeflate.extensionName]=perMessageDeflate;}return extensions;}function abortConnection(socket,code,name){try{var response=['HTTP/1.1 '+code+' '+name,'Content-type: text/html'];socket.write(response.concat('','').join('\r\n'));}catch(e){}finally{try{socket.destroy();}catch(e){}}}},1365:function(module,__unusedexports,__webpack_require__){"use strict";const map=__webpack_require__(3037);const filter=__webpack_require__(6382);const convert=__webpack_require__(8411);const protocols=__webpack_require__(7948);const varint=__webpack_require__(2572);module.exports={stringToStringTuples:stringToStringTuples,stringTuplesToString:stringTuplesToString,tuplesToStringTuples:tuplesToStringTuples,stringTuplesToTuples:stringTuplesToTuples,bufferToTuples:bufferToTuples,tuplesToBuffer:tuplesToBuffer,bufferToString:bufferToString,stringToBuffer:stringToBuffer,fromString:fromString,fromBuffer:fromBuffer,validateBuffer:validateBuffer,isValidBuffer:isValidBuffer,cleanPath:cleanPath,ParseError:ParseError,protoFromTuple:protoFromTuple,sizeForAddr:sizeForAddr};function stringToStringTuples(str){const tuples=[];const parts=str.split('/').slice(1);if(parts.length===1&&parts[0]===''){return[];}for(let p=0;p<parts.length;p++){const part=parts[p];const proto=protocols(part);if(proto.size===0){tuples.push([part]);continue;}p++;if(p>=parts.length){throw ParseError('invalid address: '+str);}tuples.push([part,parts[p]]);}return tuples;}function stringTuplesToString(tuples){const parts=[];map(tuples,function(tup){const proto=protoFromTuple(tup);parts.push(proto.name);if(tup.length>1){parts.push(tup[1]);}});return'/'+parts.join('/');}function stringTuplesToTuples(tuples){return map(tuples,function(tup){if(!Array.isArray(tup)){tup=[tup];}const proto=protoFromTuple(tup);if(tup.length>1){return[proto.code,convert.toBuffer(proto.code,tup[1])];}return[proto.code];});}function tuplesToStringTuples(tuples){return map(tuples,function(tup){const proto=protoFromTuple(tup);if(tup.length>1){return[proto.code,convert.toString(proto.code,tup[1])];}return[proto.code];});}function tuplesToBuffer(tuples){return fromBuffer(Buffer.concat(map(tuples,function(tup){const proto=protoFromTuple(tup);let buf=Buffer.from(varint.encode(proto.code));if(tup.length>1){buf=Buffer.concat([buf,tup[1]]);}return buf;})));}function sizeForAddr(p,addr){if(p.size>0){return p.size/8;}else if(p.size===0){return 0;}else{const size=varint.decode(addr);return size+varint.decode.bytes;}}function bufferToTuples(buf){const tuples=[];let i=0;while(i<buf.length){const code=varint.decode(buf,i);const n=varint.decode.bytes;const p=protocols(code);const size=sizeForAddr(p,buf.slice(i+n));if(size===0){tuples.push([code]);i+=n;continue;}const addr=buf.slice(i+n,i+n+size);i+=size+n;if(i>buf.length){throw ParseError('Invalid address buffer: '+buf.toString('hex'));}tuples.push([code,addr]);}return tuples;}function bufferToString(buf){const a=bufferToTuples(buf);const b=tuplesToStringTuples(a);return stringTuplesToString(b);}function stringToBuffer(str){str=cleanPath(str);const a=stringToStringTuples(str);const b=stringTuplesToTuples(a);return tuplesToBuffer(b);}function fromString(str){return stringToBuffer(str);}function fromBuffer(buf){const err=validateBuffer(buf);if(err)throw err;return Buffer.from(buf);}function validateBuffer(buf){try{bufferToTuples(buf);}catch(err){return err;}}function isValidBuffer(buf){return validateBuffer(buf)===undefined;}function cleanPath(str){return'/'+filter(str.trim().split('/')).join('/');}function ParseError(str){return new Error('Error parsing address: '+str);}function protoFromTuple(tup){const proto=protocols(tup[0]);return proto;}},1372:function(module,__unusedexports,__webpack_require__){var Readable=__webpack_require__(3981).Readable;var inherits=__webpack_require__(92);module.exports=from2;from2.ctor=ctor;from2.obj=obj;var Proto=ctor();function toFunction(list){list=list.slice();return function(_,cb){var err=null;var item=list.length?list.shift():null;if(item instanceof Error){err=item;item=null;}cb(err,item);};}function from2(opts,read){if(typeof opts!=='object'||Array.isArray(opts)){read=opts;opts={};}var rs=new Proto(opts);rs._from=Array.isArray(read)?toFunction(read):read||noop;return rs;}function ctor(opts,read){if(typeof opts==='function'){read=opts;opts={};}opts=defaults(opts);inherits(Class,Readable);function Class(override){if(!(this instanceof Class))return new Class(override);this._reading=false;this._callback=check;this.destroyed=false;Readable.call(this,override||opts);var self=this;var hwm=this._readableState.highWaterMark;function check(err,data){if(self.destroyed)return;if(err)return self.destroy(err);if(data===null)return self.push(null);self._reading=false;if(self.push(data))self._read(hwm);}}Class.prototype._from=read||noop;Class.prototype._read=function(size){if(this._reading||this.destroyed)return;this._reading=true;this._from(size,this._callback);};Class.prototype.destroy=function(err){if(this.destroyed)return;this.destroyed=true;var self=this;process.nextTick(function(){if(err)self.emit('error',err);self.emit('close');});};return Class;}function obj(opts,read){if(typeof opts==='function'||Array.isArray(opts)){read=opts;opts={};}opts=defaults(opts);opts.objectMode=true;opts.highWaterMark=16;return from2(opts,read);}function noop(){}function defaults(opts){opts=opts||{};return opts;}},1373:function(module,__unusedexports,__webpack_require__){var prop=__webpack_require__(8145);function id(e){return e;}module.exports=function tester(test){return'object'===typeof test&&'function'===typeof test.test?function(data){return test.test(data);}:prop(test)||id;};},1384:function(__unusedmodule,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _events=__webpack_require__(4859);var _events2=_interopRequireDefault(_events);var _get=__webpack_require__(2814);var _get2=_interopRequireDefault(_get);var _isFunction=__webpack_require__(7028);var _isFunction2=_interopRequireDefault(_isFunction);var _VisibilityChangeEmitter=__webpack_require__(4603);var _VisibilityChangeEmitter2=_interopRequireDefault(_VisibilityChangeEmitter);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var debug=__webpack_require__(4104)('latency-monitor:LatencyMonitor');var LatencyMonitor=function(_EventEmitter){_inherits(LatencyMonitor,_EventEmitter);function LatencyMonitor(){var _ref=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},latencyCheckIntervalMs=_ref.latencyCheckIntervalMs,dataEmitIntervalMs=_ref.dataEmitIntervalMs,asyncTestFn=_ref.asyncTestFn,latencyRandomPercentage=_ref.latencyRandomPercentage;_classCallCheck(this,LatencyMonitor);var _this=_possibleConstructorReturn(this,(LatencyMonitor.__proto__||Object.getPrototypeOf(LatencyMonitor)).call(this));var that=_this;that.latencyCheckIntervalMs=latencyCheckIntervalMs||500;that.latencyRandomPercentage=latencyRandomPercentage||10;that._latecyCheckMultiply=2*(that.latencyRandomPercentage/100.0)*that.latencyCheckIntervalMs;that._latecyCheckSubtract=that._latecyCheckMultiply/2;that.dataEmitIntervalMs=dataEmitIntervalMs===null||dataEmitIntervalMs===0?undefined:dataEmitIntervalMs||5*1000;debug('latencyCheckIntervalMs: %s dataEmitIntervalMs: %s',that.latencyCheckIntervalMs,that.dataEmitIntervalMs);if(that.dataEmitIntervalMs){debug('Expecting ~%s events per summary',that.latencyCheckIntervalMs/that.dataEmitIntervalMs);}else{debug('Not emitting summaries');}that.asyncTestFn=asyncTestFn;if(process&&process.hrtime){debug('Using process.hrtime for timing');that.now=process.hrtime;that.getDeltaMS=function(startTime){var hrtime=that.now(startTime);return hrtime[0]*1000+hrtime[1]/1000000;};}else if(typeof window!=='undefined'&&(0,_get2.default)(window,'performance.now')){debug('Using performance.now for timing');that.now=window.performance.now.bind(window.performance);that.getDeltaMS=function(startTime){return Math.round(that.now()-startTime);};}else{debug('Using Date.now for timing');that.now=Date.now;that.getDeltaMS=function(startTime){return that.now()-startTime;};}that._latencyData=that._initLatencyData();if(isBrowser()){that._visibilityChangeEmitter=new _VisibilityChangeEmitter2.default();that._visibilityChangeEmitter.on('visibilityChange',function(pageInFocus){if(pageInFocus){that._startTimers();}else{that._emitSummary();that._stopTimers();}});}if(!that._visibilityChangeEmitter||that._visibilityChangeEmitter.isVisible()){that._startTimers();}return _this;}_createClass(LatencyMonitor,[{key:'_startTimers',value:function _startTimers(){var _this2=this;if(this._checkLatencyID){return;}this._checkLatency();if(this.dataEmitIntervalMs){this._emitIntervalID=setInterval(function(){return _this2._emitSummary();},this.dataEmitIntervalMs);if((0,_isFunction2.default)(this._emitIntervalID.unref)){this._emitIntervalID.unref();}}}},{key:'_stopTimers',value:function _stopTimers(){if(this._checkLatencyID){clearTimeout(this._checkLatencyID);this._checkLatencyID=undefined;}if(this._emitIntervalID){clearInterval(this._emitIntervalID);this._emitIntervalID=undefined;}}},{key:'_emitSummary',value:function _emitSummary(){var summary=this.getSummary();if(summary.events>0){this.emit('data',summary);}}},{key:'getSummary',value:function getSummary(){var latency={events:this._latencyData.events,minMs:this._latencyData.minMs,maxMs:this._latencyData.maxMs,avgMs:this._latencyData.events?this._latencyData.totalMs/this._latencyData.events:Number.POSITIVE_INFINITY,lengthMs:this.getDeltaMS(this._latencyData.startTime)};this._latencyData=this._initLatencyData();debug('Summary: %O',latency);return latency;}},{key:'_checkLatency',value:function _checkLatency(){var _this3=this;var that=this;var randomness=Math.random()*that._latecyCheckMultiply-that._latecyCheckSubtract;var localData={deltaOffset:Math.ceil(that.latencyCheckIntervalMs+randomness),startTime:that.now()};var cb=function cb(){if(!_this3._checkLatencyID){return;}var deltaMS=that.getDeltaMS(localData.startTime)-localData.deltaOffset;that._checkLatency();that._latencyData.events++;that._latencyData.minMs=Math.min(that._latencyData.minMs,deltaMS);that._latencyData.maxMs=Math.max(that._latencyData.maxMs,deltaMS);that._latencyData.totalMs+=deltaMS;debug('MS: %s Data: %O',deltaMS,that._latencyData);};debug('localData: %O',localData);this._checkLatencyID=setTimeout(function(){if(that.asyncTestFn){localData.deltaOffset=0;localData.startTime=that.now();that.asyncTestFn(cb);}else{localData.deltaOffset-=1;cb();}},localData.deltaOffset);if((0,_isFunction2.default)(this._checkLatencyID.unref)){this._checkLatencyID.unref();}}},{key:'_initLatencyData',value:function _initLatencyData(){return{startTime:this.now(),minMs:Number.POSITIVE_INFINITY,maxMs:Number.NEGATIVE_INFINITY,events:0,totalMs:0};}}]);return LatencyMonitor;}(_events2.default);function isBrowser(){return typeof window!=='undefined';}exports.default=LatencyMonitor;},1400:function(module){var re=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/;var parts=['source','protocol','authority','userInfo','user','password','host','port','relative','path','directory','file','query','anchor'];module.exports=function parseuri(str){var src=str,b=str.indexOf('['),e=str.indexOf(']');if(b!=-1&&e!=-1){str=str.substring(0,b)+str.substring(b,e).replace(/:/g,';')+str.substring(e,str.length);}var m=re.exec(str||''),uri={},i=14;while(i--){uri[parts[i]]=m[i]||'';}if(b!=-1&&e!=-1){uri.source=src;uri.host=uri.host.substring(1,uri.host.length-1).replace(/;/g,':');uri.authority=uri.authority.replace('[','').replace(']','').replace(/;/g,':');uri.ipv6uri=true;}return uri;};},1402:function(module,exports,__webpack_require__){var tty=__webpack_require__(8859);var util=__webpack_require__(649);exports=module.exports=__webpack_require__(2685);exports.init=init;exports.log=log;exports.formatArgs=formatArgs;exports.save=save;exports.load=load;exports.useColors=useColors;exports.colors=[6,2,3,4,5,1];try{var supportsColor=__webpack_require__(8443);if(supportsColor&&supportsColor.level>=2){exports.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221];}}catch(err){}exports.inspectOpts=Object.keys(process.env).filter(function(key){return /^debug_/i.test(key);}).reduce(function(obj,key){var prop=key.substring(6).toLowerCase().replace(/_([a-z])/g,function(_,k){return k.toUpperCase();});var val=process.env[key];if(/^(yes|on|true|enabled)$/i.test(val))val=true;else if(/^(no|off|false|disabled)$/i.test(val))val=false;else if(val==='null')val=null;else val=Number(val);obj[prop]=val;return obj;},{});function useColors(){return'colors'in exports.inspectOpts?Boolean(exports.inspectOpts.colors):tty.isatty(process.stderr.fd);}exports.formatters.o=function(v){this.inspectOpts.colors=this.useColors;return util.inspect(v,this.inspectOpts).split('\n').map(function(str){return str.trim();}).join(' ');};exports.formatters.O=function(v){this.inspectOpts.colors=this.useColors;return util.inspect(v,this.inspectOpts);};function formatArgs(args){var name=this.namespace;var useColors=this.useColors;if(useColors){var c=this.color;var colorCode='\u001b[3'+(c<8?c:'8;5;'+c);var prefix='  '+colorCode+';1m'+name+' '+'\u001b[0m';args[0]=prefix+args[0].split('\n').join('\n'+prefix);args.push(colorCode+'m+'+exports.humanize(this.diff)+'\u001b[0m');}else{args[0]=getDate()+name+' '+args[0];}}function getDate(){if(exports.inspectOpts.hideDate){return'';}else{return new Date().toISOString()+' ';}}function log(){return process.stderr.write(util.format.apply(util,arguments)+'\n');}function save(namespaces){if(null==namespaces){delete process.env.DEBUG;}else{process.env.DEBUG=namespaces;}}function load(){return process.env.DEBUG;}function init(debug){debug.inspectOpts={};var keys=Object.keys(exports.inspectOpts);for(var i=0;i<keys.length;i++){debug.inspectOpts[keys[i]]=exports.inspectOpts[keys[i]];}}exports.enable(load());},1428:function(module,__unusedexports,__webpack_require__){"use strict";const waterfall=__webpack_require__(4265);const RepoErrors=__webpack_require__(3279).errors;module.exports=self=>{self.log('booting');const options=self._options;const doInit=options.init;const doStart=options.start;waterfall([cb=>{if(!self._repo.closed){return cb(null,true);}self._repo.open((err,res)=>{if(isRepoUninitializedError(err))return cb(null,false);if(err)return cb(err);cb(null,true);});},(repoOpened,cb)=>{if(repoOpened){return self.init({repo:self._repo},err=>{if(err)return cb(Object.assign(err,{emitted:true}));cb();});}if(doInit){const initOptions=Object.assign({bits:2048,pass:self._options.pass},typeof options.init==='object'?options.init:{});return self.init(initOptions,err=>{if(err)return cb(Object.assign(err,{emitted:true}));cb();});}cb();},cb=>{if(!doStart){return cb();}self.start(err=>{if(err)return cb(Object.assign(err,{emitted:true}));cb();});}],err=>{if(err){if(!err.emitted){self.emit('error',err);}return;}self.log('booted');self.emit('ready');});};function isRepoUninitializedError(err){if(!err){return false;}if(err.code===RepoErrors.ERR_REPO_NOT_INITIALIZED){return true;}if(err.message.match(/not found/)||err.message.match(/ENOENT/)||err.message.match(/No value/)){return true;}return false;}},1437:function(module,__unusedexports,__webpack_require__){"use strict";var cluster=__webpack_require__(967);var clusterId=0;if(!cluster.isMaster&&cluster.worker){clusterId=cluster.worker.id;}module.exports=parseInt(process.env.NODE_UNIQUE_ID||clusterId,10);},1438:function(__unusedmodule,exports,__webpack_require__){"use strict";var utils=__webpack_require__(1702);var common=__webpack_require__(7874);var rotl32=utils.rotl32;var sum32=utils.sum32;var sum32_3=utils.sum32_3;var sum32_4=utils.sum32_4;var BlockHash=common.BlockHash;function RIPEMD160(){if(!(this instanceof RIPEMD160))return new RIPEMD160();BlockHash.call(this);this.h=[0x67452301,0xefcdab89,0x98badcfe,0x10325476,0xc3d2e1f0];this.endian='little';}utils.inherits(RIPEMD160,BlockHash);exports.ripemd160=RIPEMD160;RIPEMD160.blockSize=512;RIPEMD160.outSize=160;RIPEMD160.hmacStrength=192;RIPEMD160.padLength=64;RIPEMD160.prototype._update=function update(msg,start){var A=this.h[0];var B=this.h[1];var C=this.h[2];var D=this.h[3];var E=this.h[4];var Ah=A;var Bh=B;var Ch=C;var Dh=D;var Eh=E;for(var j=0;j<80;j++){var T=sum32(rotl32(sum32_4(A,f(j,B,C,D),msg[r[j]+start],K(j)),s[j]),E);A=E;E=D;D=rotl32(C,10);C=B;B=T;T=sum32(rotl32(sum32_4(Ah,f(79-j,Bh,Ch,Dh),msg[rh[j]+start],Kh(j)),sh[j]),Eh);Ah=Eh;Eh=Dh;Dh=rotl32(Ch,10);Ch=Bh;Bh=T;}T=sum32_3(this.h[1],C,Dh);this.h[1]=sum32_3(this.h[2],D,Eh);this.h[2]=sum32_3(this.h[3],E,Ah);this.h[3]=sum32_3(this.h[4],A,Bh);this.h[4]=sum32_3(this.h[0],B,Ch);this.h[0]=T;};RIPEMD160.prototype._digest=function digest(enc){if(enc==='hex')return utils.toHex32(this.h,'little');else return utils.split32(this.h,'little');};function f(j,x,y,z){if(j<=15)return x^y^z;else if(j<=31)return x&y|~x&z;else if(j<=47)return(x|~y)^z;else if(j<=63)return x&z|y&~z;else return x^(y|~z);}function K(j){if(j<=15)return 0x00000000;else if(j<=31)return 0x5a827999;else if(j<=47)return 0x6ed9eba1;else if(j<=63)return 0x8f1bbcdc;else return 0xa953fd4e;}function Kh(j){if(j<=15)return 0x50a28be6;else if(j<=31)return 0x5c4dd124;else if(j<=47)return 0x6d703ef3;else if(j<=63)return 0x7a6d76e9;else return 0x00000000;}var r=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13];var rh=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11];var s=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6];var sh=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];},1443:function(module){function baseUnary(func){return function(value){return func(value);};}module.exports=baseUnary;},1454:function(__unusedmodule,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.hasNextTick=exports.hasSetImmediate=undefined;exports.fallback=fallback;exports.wrap=wrap;var _slice=__webpack_require__(3404);var _slice2=_interopRequireDefault(_slice);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var hasSetImmediate=exports.hasSetImmediate=typeof setImmediate==='function'&&setImmediate;var hasNextTick=exports.hasNextTick=typeof process==='object'&&typeof process.nextTick==='function';function fallback(fn){setTimeout(fn,0);}function wrap(defer){return function(fn){var args=(0,_slice2.default)(arguments,1);defer(function(){fn.apply(null,args);});};}var _defer;if(hasSetImmediate){_defer=setImmediate;}else if(hasNextTick){_defer=process.nextTick;}else{_defer=fallback;}exports.default=wrap(_defer);},1458:function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(8046);exports.log=log;exports.formatArgs=formatArgs;exports.save=save;exports.load=load;exports.useColors=useColors;exports.storage='undefined'!=typeof chrome&&'undefined'!=typeof chrome.storage?chrome.storage.local:localstorage();exports.colors=['lightseagreen','forestgreen','goldenrod','dodgerblue','darkorchid','crimson'];function useColors(){if(typeof window!=='undefined'&&window.process&&window.process.type==='renderer'){return true;}return typeof document!=='undefined'&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!=='undefined'&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!=='undefined'&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!=='undefined'&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/);}exports.formatters.j=function(v){try{return JSON.stringify(v);}catch(err){return'[UnexpectedJSONParseError]: '+err.message;}};function formatArgs(args){var useColors=this.useColors;args[0]=(useColors?'%c':'')+this.namespace+(useColors?' %c':' ')+args[0]+(useColors?'%c ':' ')+'+'+exports.humanize(this.diff);if(!useColors)return;var c='color: '+this.color;args.splice(1,0,c,'color: inherit');var index=0;var lastC=0;args[0].replace(/%[a-zA-Z%]/g,function(match){if('%%'===match)return;index++;if('%c'===match){lastC=index;}});args.splice(lastC,0,c);}function log(){return'object'===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments);}function save(namespaces){try{if(null==namespaces){exports.storage.removeItem('debug');}else{exports.storage.debug=namespaces;}}catch(e){}}function load(){var r;try{r=exports.storage.debug;}catch(e){}if(!r&&typeof process!=='undefined'&&'env'in process){r=process.env.DEBUG;}return r;}exports.enable(load());function localstorage(){try{return window.localStorage;}catch(e){}}},1460:function(module,__unusedexports,__webpack_require__){const lazy=__webpack_require__(8643);const typef=__webpack_require__(2809);const OPS=__webpack_require__(9710);const ecc=__webpack_require__(6290);const bscript=__webpack_require__(5099);const BITCOIN_NETWORK=__webpack_require__(1215).bitcoin;function p2pk(a,opts){if(!a.input&&!a.output&&!a.pubkey&&!a.input&&!a.signature)throw new TypeError('Not enough data');opts=Object.assign({validate:true},opts||{});typef({network:typef.maybe(typef.Object),output:typef.maybe(typef.Buffer),pubkey:typef.maybe(ecc.isPoint),signature:typef.maybe(bscript.isCanonicalScriptSignature),input:typef.maybe(typef.Buffer)},a);const _chunks=lazy.value(function(){return bscript.decompile(a.input);});const network=a.network||BITCOIN_NETWORK;const o={network};lazy.prop(o,'output',function(){if(!a.pubkey)return;return bscript.compile([a.pubkey,OPS.OP_CHECKSIG]);});lazy.prop(o,'pubkey',function(){if(!a.output)return;return a.output.slice(1,-1);});lazy.prop(o,'signature',function(){if(!a.input)return;return _chunks()[0];});lazy.prop(o,'input',function(){if(!a.signature)return;return bscript.compile([a.signature]);});lazy.prop(o,'witness',function(){if(!o.input)return;return[];});if(opts.validate){if(a.output){if(a.output[a.output.length-1]!==OPS.OP_CHECKSIG)throw new TypeError('Output is invalid');if(!ecc.isPoint(o.pubkey))throw new TypeError('Output pubkey is invalid');if(a.pubkey&&!a.pubkey.equals(o.pubkey))throw new TypeError('Pubkey mismatch');}if(a.signature){if(a.input&&!a.input.equals(o.input))throw new TypeError('Signature mismatch');}if(a.input){if(_chunks().length!==1)throw new TypeError('Input is invalid');if(!bscript.isCanonicalScriptSignature(o.signature))throw new TypeError('Input has invalid signature');}}return Object.assign(o,a);}module.exports=p2pk;},1467:function(module){"use strict";function lowerBound(array,value,comp){let first=0;let count=array.length;while(count>0){const step=count/2|0;let it=first+step;if(comp(array[it],value)<=0){first=++it;count-=step+1;}else{count=step;}}return first;}class PriorityQueue{constructor(){this._queue=[];}enqueue(run,opts){opts=Object.assign({priority:0},opts);const element={priority:opts.priority,run};if(this.size&&this._queue[this.size-1].priority>=opts.priority){this._queue.push(element);return;}const index=lowerBound(this._queue,element,(a,b)=>b.priority-a.priority);this._queue.splice(index,0,element);}dequeue(){return this._queue.shift().run;}get size(){return this._queue.length;}}class PQueue{constructor(opts){opts=Object.assign({concurrency:Infinity,autoStart:true,queueClass:PriorityQueue},opts);if(!(typeof opts.concurrency==='number'&&opts.concurrency>=1)){throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${opts.concurrency}\` (${typeof opts.concurrency})`);}this.queue=new opts.queueClass();this._queueClass=opts.queueClass;this._pendingCount=0;this._concurrency=opts.concurrency;this._isPaused=opts.autoStart===false;this._resolveEmpty=()=>{};this._resolveIdle=()=>{};}_next(){this._pendingCount--;if(this.queue.size>0){if(!this._isPaused){this.queue.dequeue()();}}else{this._resolveEmpty();this._resolveEmpty=()=>{};if(this._pendingCount===0){this._resolveIdle();this._resolveIdle=()=>{};}}}add(fn,opts){return new Promise((resolve,reject)=>{const run=()=>{this._pendingCount++;try{Promise.resolve(fn()).then(val=>{resolve(val);this._next();},err=>{reject(err);this._next();});}catch(err){reject(err);this._next();}};if(!this._isPaused&&this._pendingCount<this._concurrency){run();}else{this.queue.enqueue(run,opts);}});}addAll(fns,opts){return Promise.all(fns.map(fn=>this.add(fn,opts)));}start(){if(!this._isPaused){return;}this._isPaused=false;while(this.queue.size>0&&this._pendingCount<this._concurrency){this.queue.dequeue()();}}pause(){this._isPaused=true;}clear(){this.queue=new this._queueClass();}onEmpty(){if(this.queue.size===0){return Promise.resolve();}return new Promise(resolve=>{const existingResolve=this._resolveEmpty;this._resolveEmpty=()=>{existingResolve();resolve();};});}onIdle(){if(this._pendingCount===0){return Promise.resolve();}return new Promise(resolve=>{const existingResolve=this._resolveIdle;this._resolveIdle=()=>{existingResolve();resolve();};});}get size(){return this.queue.size;}get pending(){return this._pendingCount;}get isPaused(){return this._isPaused;}}module.exports=PQueue;},1474:function(module,__unusedexports,__webpack_require__){"use strict";const promisify=__webpack_require__(6955);const every=__webpack_require__(7789);const PeerId=__webpack_require__(1832);const CID=__webpack_require__(9339);const each=__webpack_require__(4486);const setImmediate=__webpack_require__(7368);const errCode=__webpack_require__(4999);module.exports=self=>{return{get:promisify((key,options,callback)=>{if(!Buffer.isBuffer(key)){return callback(new Error('Not valid key'));}if(typeof options==='function'){callback=options;options={};}options=options||{};self.libp2p.dht.get(key,options.timeout,callback);}),put:promisify((key,value,callback)=>{if(!Buffer.isBuffer(key)){return callback(new Error('Not valid key'));}self.libp2p.dht.put(key,value,callback);}),findprovs:promisify((key,opts,callback)=>{if(typeof opts==='function'){callback=opts;opts={};}opts=opts||{};if(typeof key==='string'){try{key=new CID(key);}catch(err){return setImmediate(()=>callback(errCode(err,'ERR_INVALID_CID')));}}if(typeof opts==='function'){callback=opts;opts={};}opts=opts||{};self.libp2p.contentRouting.findProviders(key,opts.timeout||null,callback);}),findpeer:promisify((peer,callback)=>{if(typeof peer==='string'){peer=PeerId.createFromB58String(peer);}self.libp2p.peerRouting.findPeer(peer,(err,info)=>{if(err){return callback(err);}const goResult=[{Responses:[{ID:info.id.toB58String(),Addresses:info.multiaddrs.toArray().map(a=>a.toString())}]}];callback(null,goResult);});}),provide:promisify((keys,options,callback)=>{if(!Array.isArray(keys)){keys=[keys];}if(typeof options==='function'){callback=options;options={};}options=options||{};every(keys,(key,cb)=>{self._repo.blocks.has(key,cb);},(err,has)=>{if(err){return callback(err);}if(!has){return callback(new Error('block(s) not found locally, cannot provide'));}if(options.recursive){}else{each(keys,(cid,cb)=>{self.libp2p.contentRouting.provide(cid,cb);},callback);}});}),query:promisify((peerId,callback)=>{if(typeof peerId==='string'){peerId=PeerId.createFromB58String(peerId);}self.libp2p._dht.getClosestPeers(peerId.toBytes(),(err,peerIds)=>{if(err){return callback(err);}callback(null,peerIds.map(id=>{return{ID:id.toB58String()};}));});})};};},1479:function(__unusedmodule,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.chains={names:{'1':'mainnet','3':'ropsten','4':'rinkeby','42':'kovan','6284':'goerli'},mainnet:__webpack_require__(6998),ropsten:__webpack_require__(9001),rinkeby:__webpack_require__(7560),kovan:__webpack_require__(9733),goerli:__webpack_require__(5765)};},1486:function(module,exports,__webpack_require__){"use strict";const toStream=__webpack_require__(864);const MplexCore=__webpack_require__(2018);const MULTIPLEX_CODEC=__webpack_require__(9524);const Muxer=__webpack_require__(7687);const pump=__webpack_require__(6641);function create(rawConn,isListener){const stream=toStream(rawConn);stream.on('end',()=>stream.destroy());const mpx=new MplexCore({halfOpen:true,initiator:!isListener});pump(stream,mpx,stream);return new Muxer(rawConn,mpx);}exports=module.exports=create;exports.multicodec=MULTIPLEX_CODEC;exports.dialer=conn=>create(conn,false);exports.listener=conn=>create(conn,true);},1498:function(module,__unusedexports,__webpack_require__){"use strict";const promisify=__webpack_require__(6955);const pull=__webpack_require__(418);module.exports=function ping(self){return promisify((peerId,opts,callback)=>{if(typeof opts==='function'){callback=opts;opts={};}pull(self.pingPullStream(peerId,opts),pull.collect(callback));});};},1500:function(__unusedmodule,exports,__webpack_require__){"use strict";const constants=__webpack_require__(9781);exports.tagClass={0:'universal',1:'application',2:'context',3:'private'};exports.tagClassByName=constants._reverse(exports.tagClass);exports.tag={0x00:'end',0x01:'bool',0x02:'int',0x03:'bitstr',0x04:'octstr',0x05:'null_',0x06:'objid',0x07:'objDesc',0x08:'external',0x09:'real',0x0a:'enum',0x0b:'embed',0x0c:'utf8str',0x0d:'relativeOid',0x10:'seq',0x11:'set',0x12:'numstr',0x13:'printstr',0x14:'t61str',0x15:'videostr',0x16:'ia5str',0x17:'utctime',0x18:'gentime',0x19:'graphstr',0x1a:'iso646str',0x1b:'genstr',0x1c:'unistr',0x1d:'charstr',0x1e:'bmpstr'};exports.tagByName=constants._reverse(exports.tag);},1512:function(module){"use strict";module.exports={SHA1:20,SHA256:32,SHA512:64};},1525:function(module,__unusedexports,__webpack_require__){"use strict";const util=__webpack_require__(787);const resolve=(binaryBlob,path,callback)=>{if(typeof path==='function'){callback=path;path=undefined;}util.deserialize(binaryBlob,(err,dagNode)=>{if(err){return callback(err);}if(!path){return callback(null,{value:dagNode,remainderPath:''});}const pathArray=path.split('/');const value=resolveField(dagNode,pathArray[0]);if(value===null){return callback(new Error('No such path'),null);}let remainderPath=pathArray.slice(1).join('/');if(value['/']!==undefined){return callback(null,{value:value,remainderPath:remainderPath});}else{if(remainderPath.length>0){return callback(new Error('No such path'),null);}else{return callback(null,{value:value,remainderPath:''});}}});};const tree=(binaryBlob,options,callback)=>{if(typeof options==='function'){callback=options;options=undefined;}options=options||{};util.deserialize(binaryBlob,(err,dagNode)=>{if(err){return callback(err);}const paths=['version','timestamp','difficulty','nonce','parent','tx'];if(options.values===true){const pathValues={};for(let path of paths){pathValues[path]=resolveField(dagNode,path);}return callback(null,pathValues);}else{return callback(null,paths);}});};const resolveField=(dagNode,field)=>{switch(field){case'version':return dagNode.version;case'timestamp':return dagNode.timestamp;case'difficulty':return dagNode.bits;case'nonce':return dagNode.nonce;case'parent':return{'/':util.hashToCid(dagNode.prevHash)};case'tx':return{'/':util.hashToCid(dagNode.merkleRoot)};default:return null;}};module.exports={multicodec:'bitcoin-block',defaultHashAlg:'dbl-sha2-256',resolve:resolve,tree:tree};},1529:function(module,__unusedexports,__webpack_require__){"use strict";var crypto=__webpack_require__(2984);var assert=__webpack_require__(3930);var ursaNative=require(__dirname+'//build/Release/ursaNative.node');var RsaWrap=ursaNative.RsaWrap;var textToNid=ursaNative.textToNid;var BASE64="base64";var BINARY="binary";var HEX="hex";var STRING="string";var UTF8="utf8";var UTF16="utf16le";var MD5="md5";var PEM_REGEX=/^(-----BEGIN (.*) KEY-----\r?\n[:\s,-\/+=a-zA-Z0-9\r\n]*\r?\n-----END \2 KEY-----\r?\n)/m;var theUnsealer=["ursa unsealer"];function isStringOrBuffer(x){return typeof x===STRING||Buffer.isBuffer(x);}function identifyPemType(buf){var str=encodeBuffer(buf,UTF8);var match=PEM_REGEX.exec(str);if(!match){return undefined;}return match[2];}function isPublicKeyPem(buf){var kind=identifyPemType(buf);return kind=="PUBLIC";}function isPrivateKeyPem(buf){var kind=identifyPemType(buf);return kind=="RSA PRIVATE";}function toSshBigint(value){var prefix00=(value[0]&0x80)!==0;var length=value.length+(prefix00?1:0);var result=new Buffer(length+4);var offset=0;result.writeUInt32BE(length,offset);offset+=4;if(prefix00){result[offset]=0;offset++;}value.copy(result,offset);return result;}function createSshPublicKey(rsa){var e=toSshBigint(rsa.getExponent());var m=toSshBigint(rsa.getModulus());var header=toSshBigint(new Buffer("ssh-rsa",UTF8));var result=new Buffer(header.length+m.length+e.length);var offset=0;header.copy(result,offset);offset+=header.length;e.copy(result,offset);offset+=e.length;m.copy(result,offset);return result;}function validateEncoding(encoding){switch(encoding){case BASE64:case BINARY:case HEX:case UTF16:case UTF8:{break;}default:{throw new Error("Invalid encoding: "+encoding);}}}function encodeBuffer(buf,encoding){if(encoding===undefined){return buf;}validateEncoding(encoding);return buf.toString(encoding);}function decodeString(str,encoding){if(str===undefined||Buffer.isBuffer(str)){return str;}if(encoding===undefined){encoding=UTF8;}validateEncoding(encoding);return new Buffer(str,encoding);}function openSshPublicKey(key,encoding){if(!Buffer.isBuffer(key)){key=key.substr(0,3)==='ssh'?key.split(' ')[1]:key;key=new Buffer(key,encoding||'base64');}function parsePublicKey(key){var parts=[],partsLength=3;while(key.length){var dLen=key.readInt32BE(0);var data=key.slice(4,dLen+4);key=key.slice(4+dLen);parts.push(data);if(! --partsLength)break;}return{modulus:parts[2],exponent:parts[1],type:parts[0]};}var pubKey=parsePublicKey(key);var rsa=new RsaWrap();if(pubKey.type!='ssh-rsa'){throw new TypeError('Only "ssh-rsa" format supported');}rsa.openPublicSshKey(pubKey.modulus,pubKey.exponent);return PublicKey(rsa);}function PublicKey(rsa){var self;function getExponent(encoding){return encodeBuffer(rsa.getExponent(),encoding);}function getModulus(encoding){return encodeBuffer(rsa.getModulus(),encoding);}function toPublicPem(encoding){return encodeBuffer(rsa.getPublicKeyPem(),encoding);}function toPublicSsh(encoding){return encodeBuffer(createSshPublicKey(rsa),encoding);}function toPublicSshFingerprint(encoding){return sshFingerprint(createSshPublicKey(rsa),undefined,encoding);}function encrypt(buf,bufEncoding,outEncoding,padding){buf=decodeString(buf,bufEncoding);padding=padding===undefined?ursaNative.RSA_PKCS1_OAEP_PADDING:padding;return encodeBuffer(rsa.publicEncrypt(buf,padding),outEncoding);}function publicDecrypt(buf,bufEncoding,outEncoding,padding){buf=decodeString(buf,bufEncoding);padding=padding===undefined?ursaNative.RSA_PKCS1_PADDING:padding;return encodeBuffer(rsa.publicDecrypt(buf,padding),outEncoding);}function verify(algorithm,hash,sig,encoding){algorithm=textToNid(algorithm);hash=decodeString(hash,encoding);sig=decodeString(sig,encoding);return rsa.verify(algorithm,hash,sig);}function hashAndVerify(algorithm,buf,sig,encoding,use_pss_padding,salt_len){if(use_pss_padding){sig=publicDecrypt(sig,encoding,undefined,ursaNative.RSA_NO_PADDING);var hash=crypto.createHash(algorithm);hash.update(decodeString(buf,encoding));buf=new Buffer(hash.digest(BINARY),BINARY);return rsa.verifyPSSPadding(textToNid(algorithm),buf,sig,salt_len===undefined?ursaNative.RSA_PKCS1_SALT_LEN_HLEN:salt_len);}else{var verifier=createVerifier(algorithm);verifier.update(buf,encoding);return verifier.verify(self,sig,encoding);}}function unseal(unsealer){return unsealer===theUnsealer?self:undefined;}self={encrypt:encrypt,getExponent:getExponent,getModulus:getModulus,hashAndVerify:hashAndVerify,publicDecrypt:publicDecrypt,toPublicPem:toPublicPem,toPublicSsh:toPublicSsh,toPublicSshFingerprint:toPublicSshFingerprint,verify:verify,unseal:unseal};return self;}function PrivateKey(rsa){var self;function getPrivateExponent(encoding){return encodeBuffer(rsa.getPrivateExponent(),encoding);}function toPrivatePem(encoding){return encodeBuffer(rsa.getPrivateKeyPem(),encoding);}function toEncryptedPrivatePem(passPhrase,cipher,encoding){if(!passPhrase)return toPrivatePem(encoding);return encodeBuffer(rsa.getPrivateKeyPem(passPhrase,cipher));}function decrypt(buf,bufEncoding,outEncoding,padding){buf=decodeString(buf,bufEncoding);padding=padding===undefined?ursaNative.RSA_PKCS1_OAEP_PADDING:padding;return encodeBuffer(rsa.privateDecrypt(buf,padding),outEncoding);}function privateEncrypt(buf,bufEncoding,outEncoding,padding){buf=decodeString(buf,bufEncoding);padding=padding===undefined?ursaNative.RSA_PKCS1_PADDING:padding;return encodeBuffer(rsa.privateEncrypt(buf,padding),outEncoding);}function sign(algorithm,hash,hashEncoding,outEncoding){algorithm=textToNid(algorithm);hash=decodeString(hash,hashEncoding);return encodeBuffer(rsa.sign(algorithm,hash),outEncoding);}function hashAndSign(algorithm,buf,bufEncoding,outEncoding,use_pss_padding,salt_len){if(use_pss_padding){var hash=crypto.createHash(algorithm);hash.update(decodeString(buf,bufEncoding));buf=new Buffer(hash.digest(BINARY),BINARY);buf=rsa.addPSSPadding(textToNid(algorithm),buf,salt_len===undefined?ursaNative.RSA_PKCS1_SALT_LEN_HLEN:salt_len);return privateEncrypt(buf,undefined,outEncoding,ursaNative.RSA_NO_PADDING);}else{var signer=createSigner(algorithm);signer.update(buf,bufEncoding);return signer.sign(self,outEncoding);}}self=PublicKey(rsa);self.decrypt=decrypt;self.getPrivateExponent=getPrivateExponent;self.hashAndSign=hashAndSign;self.privateEncrypt=privateEncrypt;self.sign=sign;self.toPrivatePem=toPrivatePem;self.toEncryptedPrivatePem=toEncryptedPrivatePem;return self;}function createPublicKey(pem,encoding){var rsa=new RsaWrap();pem=decodeString(pem,encoding);try{rsa.setPublicKeyPem(pem);}catch(ex){if(!isPublicKeyPem(pem)){throw new Error("Not a public key.");}throw ex;}return PublicKey(rsa);}function createPrivateKey(pem,password,encoding){var rsa=new RsaWrap();pem=decodeString(pem,encoding);password=decodeString(password,encoding);try{if(password){rsa.setPrivateKeyPem(pem,password);}else{rsa.setPrivateKeyPem(pem);}}catch(ex){if(!isPrivateKeyPem(pem)){throw new Error("Not a private key.");}throw ex;}return PrivateKey(rsa);}function createPublicKeyFromComponents(modulus,exponent){var rsa=new RsaWrap();rsa.createPublicKeyFromComponents(modulus,exponent);return PublicKey(rsa);}function createPrivateKeyFromComponents(modulus,exponent,p,q,dp,dq,inverseQ,d){var rsa=new RsaWrap();rsa.createPrivateKeyFromComponents(modulus,exponent,p,q,dp,dq,inverseQ,d);return PrivateKey(rsa);}function generatePrivateKey(modulusBits,exponent){if(modulusBits===undefined){modulusBits=2048;}if(exponent===undefined){exponent=65537;}var rsa=new RsaWrap();rsa.generatePrivateKey(modulusBits,exponent);return PrivateKey(rsa);}function createKey(pem,encoding){pem=decodeString(pem,encoding);if(isPublicKeyPem(pem)){return createPublicKey(pem);}else if(isPrivateKeyPem(pem)){return createPrivateKey(pem);}else{throw new Error("Not a key.");}}function sshFingerprint(sshKey,sshEncoding,outEncoding){var hash=crypto.createHash(MD5);hash.update(decodeString(sshKey,sshEncoding));var result=new Buffer(hash.digest(BINARY),BINARY);return encodeBuffer(result,outEncoding);}function isKey(obj){var obj2;try{var unseal=obj.unseal;if(typeof unseal!=="function"){return false;}obj2=unseal(theUnsealer);}catch(ex){return false;}return obj2!==undefined;}function isPrivateKey(obj){return isKey(obj)&&obj.decrypt!==undefined;}function isPublicKey(obj){return isKey(obj)&&!isPrivateKey(obj);}function assertKey(obj){assert(isKey(obj));}function assertPrivateKey(obj){assert(isPrivateKey(obj));}function assertPublicKey(obj){assert(isPublicKey(obj));}function coercePrivateKey(orig){if(isPrivateKey(orig)){return orig;}else if(isStringOrBuffer(orig)){return createPrivateKey(orig);}throw new Error("Not a private key: "+orig);}function coercePublicKey(orig){if(isPublicKey(orig)){return orig;}else if(isStringOrBuffer(orig)){return createPublicKey(orig);}throw new Error("Not a public key: "+orig);}function coerceKey(orig){if(isKey(orig)){return orig;}else if(isStringOrBuffer(orig)){return createKey(orig);}throw new Error("Not a key: "+orig);}function matchingPublicKeys(key1,key2){if(!(isKey(key1)&&isKey(key2))){return false;}var ssh1=key1.toPublicSsh(UTF8);var ssh2=key2.toPublicSsh(UTF8);return ssh1===ssh2;}function equalKeys(key1,key2){if(isPrivateKey(key1)&&isPrivateKey(key2)){var pem1=key1.toPrivatePem(UTF8);var pem2=key2.toPrivatePem(UTF8);return pem1===pem2;}if(isPublicKey(key1)&&isPublicKey(key2)){return matchingPublicKeys(key1,key2);}return false;}function createSigner(algorithm){var hash=crypto.createHash(algorithm);var self={};function update(buf,bufEncoding){buf=decodeString(buf,bufEncoding);hash.update(buf);return self;}function sign(privateKey,outEncoding){var hashBuf=new Buffer(hash.digest(BINARY),BINARY);return privateKey.sign(algorithm,hashBuf,undefined,outEncoding);}self.sign=sign;self.update=update;return self;}function createVerifier(algorithm){var hash=crypto.createHash(algorithm);var self={};function update(buf,bufEncoding){buf=decodeString(buf,bufEncoding);hash.update(buf);return self;}function verify(publicKey,sig,sigEncoding){var hashBuf=new Buffer(hash.digest(BINARY),BINARY);sig=decodeString(sig,sigEncoding);return publicKey.verify(algorithm,hashBuf,sig);}self.update=update;self.verify=verify;return self;}module.exports={assertKey:assertKey,assertPrivateKey:assertPrivateKey,assertPublicKey:assertPublicKey,coerceKey:coerceKey,coercePrivateKey:coercePrivateKey,coercePublicKey:coercePublicKey,createKey:createKey,createPrivateKey:createPrivateKey,createPrivateKeyFromComponents:createPrivateKeyFromComponents,openSshPublicKey:openSshPublicKey,createPublicKey:createPublicKey,createPublicKeyFromComponents:createPublicKeyFromComponents,createSigner:createSigner,createVerifier:createVerifier,equalKeys:equalKeys,generatePrivateKey:generatePrivateKey,isKey:isKey,isPrivateKey:isPrivateKey,isPublicKey:isPublicKey,matchingPublicKeys:matchingPublicKeys,sshFingerprint:sshFingerprint,RSA_NO_PADDING:ursaNative.RSA_NO_PADDING,RSA_PKCS1_PADDING:ursaNative.RSA_PKCS1_PADDING,RSA_PKCS1_OAEP_PADDING:ursaNative.RSA_PKCS1_OAEP_PADDING,RSA_PKCS1_SALT_LEN_HLEN:ursaNative.RSA_PKCS1_SALT_LEN_HLEN,RSA_PKCS1_SALT_LEN_MAX:ursaNative.RSA_PKCS1_SALT_LEN_MAX,RSA_PKCS1_SALT_LEN_RECOVER:ursaNative.RSA_PKCS1_SALT_LEN_RECOVER};},1553:function(module,__unusedexports,__webpack_require__){"use strict";const Any=__webpack_require__(7492);const Ref=__webpack_require__(1937);const Hoek=__webpack_require__(2850);const internals={};internals.isoDate=/^(?:[-+]\d{2})?(?:\d{4}(?!\d{2}\b))(?:(-?)(?:(?:0[1-9]|1[0-2])(?:\1(?:[12]\d|0[1-9]|3[01]))?|W(?:[0-4]\d|5[0-2])(?:-?[1-7])?|(?:00[1-9]|0[1-9]\d|[12]\d{2}|3(?:[0-5]\d|6[1-6])))(?![T]$|[T][\d]+Z$)(?:[T\s](?:(?:(?:[01]\d|2[0-3])(?:(:?)[0-5]\d)?|24\:?00)(?:[.,]\d+(?!:))?)(?:\2[0-5]\d(?:[.,]\d+)?)?(?:[Z]|(?:[+-])(?:[01]\d|2[0-3])(?::?[0-5]\d)?)?)?)?$/;internals.invalidDate=new Date('');internals.isIsoDate=(()=>{const isoString=internals.isoDate.toString();return date=>{return date&&date.toString()===isoString;};})();internals.Date=class extends Any{constructor(){super();this._type='date';}_base(value,state,options){const result={value:options.convert&&internals.Date.toDate(value,this._flags.format,this._flags.timestamp,this._flags.multiplier)||value};if(result.value instanceof Date&&!isNaN(result.value.getTime())){result.errors=null;}else if(!options.convert){result.errors=this.createError('date.strict',{value},state,options);}else{let type;if(internals.isIsoDate(this._flags.format)){type='isoDate';}else if(this._flags.timestamp){type=`timestamp.${this._flags.timestamp}`;}else{type='base';}result.errors=this.createError(`date.${type}`,{value},state,options);}return result;}static toDate(value,format,timestamp,multiplier){if(value instanceof Date){return value;}if(typeof value==='string'||typeof value==='number'&&!isNaN(value)&&isFinite(value)){const isIsoDate=format&&internals.isIsoDate(format);if(!isIsoDate&&typeof value==='string'&&/^[+-]?\d+(\.\d+)?$/.test(value)){value=parseFloat(value);}let date;if(isIsoDate){date=format.test(value)?new Date(value.toString()):internals.invalidDate;}else if(timestamp){date=/^\s*$/.test(value)?internals.invalidDate:new Date(value*multiplier);}else{date=new Date(value);}if(!isNaN(date.getTime())){return date;}}return null;}iso(){if(this._flags.format===internals.isoDate){return this;}const obj=this.clone();obj._flags.format=internals.isoDate;return obj;}timestamp(type='javascript'){const allowed=['javascript','unix'];Hoek.assert(allowed.includes(type),'"type" must be one of "'+allowed.join('", "')+'"');if(this._flags.timestamp===type){return this;}const obj=this.clone();obj._flags.timestamp=type;obj._flags.multiplier=type==='unix'?1000:1;return obj;}_isIsoDate(value){return internals.isoDate.test(value);}};internals.compare=function(type,compare){return function(date){const isNow=date==='now';const isRef=Ref.isRef(date);if(!isNow&&!isRef){date=internals.Date.toDate(date);}Hoek.assert(date,'Invalid date format');return this._test(type,date,function(value,state,options){let compareTo;if(isNow){compareTo=Date.now();}else if(isRef){const refValue=date(state.reference||state.parent,options);compareTo=internals.Date.toDate(refValue);if(!compareTo){return this.createError('date.ref',{ref:date,value:refValue},state,options);}compareTo=compareTo.getTime();}else{compareTo=date.getTime();}if(compare(value.getTime(),compareTo)){return value;}return this.createError('date.'+type,{limit:new Date(compareTo),value},state,options);});};};internals.Date.prototype.min=internals.compare('min',(value,date)=>value>=date);internals.Date.prototype.max=internals.compare('max',(value,date)=>value<=date);internals.Date.prototype.greater=internals.compare('greater',(value,date)=>value>date);internals.Date.prototype.less=internals.compare('less',(value,date)=>value<date);module.exports=new internals.Date();},1558:function(__unusedmodule,exports,__webpack_require__){var XMLHttpRequest=__webpack_require__(5999);var XHR=__webpack_require__(8897);var JSONP=__webpack_require__(8462);var websocket=__webpack_require__(108);exports.polling=polling;exports.websocket=websocket;function polling(opts){var xhr;var xd=false;var xs=false;var jsonp=false!==opts.jsonp;if(typeof location!=='undefined'){var isSSL='https:'===location.protocol;var port=location.port;if(!port){port=isSSL?443:80;}xd=opts.hostname!==location.hostname||port!==opts.port;xs=opts.secure!==isSSL;}opts.xdomain=xd;opts.xscheme=xs;xhr=new XMLHttpRequest(opts);if('open'in xhr&&!opts.forceJSONP){return new XHR(opts);}else{if(!jsonp)throw new Error('JSONP disabled');return new JSONP(opts);}}},1560:function(module,__unusedexports,__webpack_require__){"use strict";module.exports=__webpack_require__(9242);},1574:function(module,__unusedexports,__webpack_require__){"use strict";const bsplit=__webpack_require__(7917);const errcode=__webpack_require__(4999);const verifyRecord=(validators,record,callback)=>{const key=record.key;const parts=bsplit(key,Buffer.from('/'));if(parts.length<3){return callback();}const validator=validators[parts[1].toString()];if(!validator){const errMsg=`Invalid record keytype`;return callback(errcode(new Error(errMsg),'ERR_INVALID_RECORD_KEY_TYPE'));}validator.func(key,record.value,callback);};module.exports={verifyRecord:verifyRecord,validators:__webpack_require__(9268)};},1583:function(module){"use strict";class Base{constructor(name,code,implementation,alphabet){this.name=name;this.code=code;this.alphabet=alphabet;if(implementation&&alphabet){this.engine=implementation(alphabet);}}encode(stringOrBuffer){return this.engine.encode(stringOrBuffer);}decode(stringOrBuffer){return this.engine.decode(stringOrBuffer);}isImplemented(){return this.engine;}}module.exports=Base;},1587:function(module,__unusedexports,__webpack_require__){"use strict";const KBucket=__webpack_require__(9291);const utils=__webpack_require__(2869);class RoutingTable{constructor(self,kBucketSize){this.self=self;this._onPing=this._onPing.bind(this);utils.convertPeerId(self,(err,selfKey)=>{if(err){throw err;}this.kb=new KBucket({localNodeId:selfKey,numberOfNodesPerKBucket:kBucketSize,numberOfNodesToPing:1});this.kb.on('ping',this._onPing);});}_onPing(oldContacts,newContact){const oldest=oldContacts[0];this.kb.remove(oldest.id);this.kb.add(newContact);}get size(){return this.kb.count();}find(peer,callback){utils.convertPeerId(peer,(err,key)=>{if(err){return callback(err);}const closest=this.closestPeer(key);if(closest&&closest.isEqual(peer)){return callback(null,closest);}callback();});}closestPeer(key,count){const res=this.closestPeers(key,1);if(res.length>0){return res[0];}}closestPeers(key,count){return this.kb.closest(key,count).map(p=>p.peer);}add(peer,callback){utils.convertPeerId(peer,(err,id)=>{if(err){return callback(err);}this.kb.add({id:id,peer:peer});callback();});}remove(peer,callback){utils.convertPeerId(peer,(err,id)=>{if(err){return callback(err);}this.kb.remove(id);callback();});}}module.exports=RoutingTable;},1590:function(module,__unusedexports,__webpack_require__){"use strict";var pna=__webpack_require__(88);module.exports=Readable;var isArray=__webpack_require__(4797);var Duplex;Readable.ReadableState=ReadableState;var EE=__webpack_require__(4859).EventEmitter;var EElistenerCount=function(emitter,type){return emitter.listeners(type).length;};var Stream=__webpack_require__(9715);var Buffer=__webpack_require__(7572).Buffer;var OurUint8Array=global.Uint8Array||function(){};function _uint8ArrayToBuffer(chunk){return Buffer.from(chunk);}function _isUint8Array(obj){return Buffer.isBuffer(obj)||obj instanceof OurUint8Array;}var util=__webpack_require__(5548);util.inherits=__webpack_require__(92);var debugUtil=__webpack_require__(649);var debug=void 0;if(debugUtil&&debugUtil.debuglog){debug=debugUtil.debuglog('stream');}else{debug=function(){};}var BufferList=__webpack_require__(5984);var destroyImpl=__webpack_require__(5635);var StringDecoder;util.inherits(Readable,Stream);var kProxyEvents=['error','close','destroy','pause','resume'];function prependListener(emitter,event,fn){if(typeof emitter.prependListener==='function')return emitter.prependListener(event,fn);if(!emitter._events||!emitter._events[event])emitter.on(event,fn);else if(isArray(emitter._events[event]))emitter._events[event].unshift(fn);else emitter._events[event]=[fn,emitter._events[event]];}function ReadableState(options,stream){Duplex=Duplex||__webpack_require__(6504);options=options||{};var isDuplex=stream instanceof Duplex;this.objectMode=!!options.objectMode;if(isDuplex)this.objectMode=this.objectMode||!!options.readableObjectMode;var hwm=options.highWaterMark;var readableHwm=options.readableHighWaterMark;var defaultHwm=this.objectMode?16:16*1024;if(hwm||hwm===0)this.highWaterMark=hwm;else if(isDuplex&&(readableHwm||readableHwm===0))this.highWaterMark=readableHwm;else this.highWaterMark=defaultHwm;this.highWaterMark=Math.floor(this.highWaterMark);this.buffer=new BufferList();this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.ended=false;this.endEmitted=false;this.reading=false;this.sync=true;this.needReadable=false;this.emittedReadable=false;this.readableListening=false;this.resumeScheduled=false;this.destroyed=false;this.defaultEncoding=options.defaultEncoding||'utf8';this.awaitDrain=0;this.readingMore=false;this.decoder=null;this.encoding=null;if(options.encoding){if(!StringDecoder)StringDecoder=__webpack_require__(1235).StringDecoder;this.decoder=new StringDecoder(options.encoding);this.encoding=options.encoding;}}function Readable(options){Duplex=Duplex||__webpack_require__(6504);if(!(this instanceof Readable))return new Readable(options);this._readableState=new ReadableState(options,this);this.readable=true;if(options){if(typeof options.read==='function')this._read=options.read;if(typeof options.destroy==='function')this._destroy=options.destroy;}Stream.call(this);}Object.defineProperty(Readable.prototype,'destroyed',{get:function(){if(this._readableState===undefined){return false;}return this._readableState.destroyed;},set:function(value){if(!this._readableState){return;}this._readableState.destroyed=value;}});Readable.prototype.destroy=destroyImpl.destroy;Readable.prototype._undestroy=destroyImpl.undestroy;Readable.prototype._destroy=function(err,cb){this.push(null);cb(err);};Readable.prototype.push=function(chunk,encoding){var state=this._readableState;var skipChunkCheck;if(!state.objectMode){if(typeof chunk==='string'){encoding=encoding||state.defaultEncoding;if(encoding!==state.encoding){chunk=Buffer.from(chunk,encoding);encoding='';}skipChunkCheck=true;}}else{skipChunkCheck=true;}return readableAddChunk(this,chunk,encoding,false,skipChunkCheck);};Readable.prototype.unshift=function(chunk){return readableAddChunk(this,chunk,null,true,false);};function readableAddChunk(stream,chunk,encoding,addToFront,skipChunkCheck){var state=stream._readableState;if(chunk===null){state.reading=false;onEofChunk(stream,state);}else{var er;if(!skipChunkCheck)er=chunkInvalid(state,chunk);if(er){stream.emit('error',er);}else if(state.objectMode||chunk&&chunk.length>0){if(typeof chunk!=='string'&&!state.objectMode&&Object.getPrototypeOf(chunk)!==Buffer.prototype){chunk=_uint8ArrayToBuffer(chunk);}if(addToFront){if(state.endEmitted)stream.emit('error',new Error('stream.unshift() after end event'));else addChunk(stream,state,chunk,true);}else if(state.ended){stream.emit('error',new Error('stream.push() after EOF'));}else{state.reading=false;if(state.decoder&&!encoding){chunk=state.decoder.write(chunk);if(state.objectMode||chunk.length!==0)addChunk(stream,state,chunk,false);else maybeReadMore(stream,state);}else{addChunk(stream,state,chunk,false);}}}else if(!addToFront){state.reading=false;}}return needMoreData(state);}function addChunk(stream,state,chunk,addToFront){if(state.flowing&&state.length===0&&!state.sync){stream.emit('data',chunk);stream.read(0);}else{state.length+=state.objectMode?1:chunk.length;if(addToFront)state.buffer.unshift(chunk);else state.buffer.push(chunk);if(state.needReadable)emitReadable(stream);}maybeReadMore(stream,state);}function chunkInvalid(state,chunk){var er;if(!_isUint8Array(chunk)&&typeof chunk!=='string'&&chunk!==undefined&&!state.objectMode){er=new TypeError('Invalid non-string/buffer chunk');}return er;}function needMoreData(state){return!state.ended&&(state.needReadable||state.length<state.highWaterMark||state.length===0);}Readable.prototype.isPaused=function(){return this._readableState.flowing===false;};Readable.prototype.setEncoding=function(enc){if(!StringDecoder)StringDecoder=__webpack_require__(1235).StringDecoder;this._readableState.decoder=new StringDecoder(enc);this._readableState.encoding=enc;return this;};var MAX_HWM=0x800000;function computeNewHighWaterMark(n){if(n>=MAX_HWM){n=MAX_HWM;}else{n--;n|=n>>>1;n|=n>>>2;n|=n>>>4;n|=n>>>8;n|=n>>>16;n++;}return n;}function howMuchToRead(n,state){if(n<=0||state.length===0&&state.ended)return 0;if(state.objectMode)return 1;if(n!==n){if(state.flowing&&state.length)return state.buffer.head.data.length;else return state.length;}if(n>state.highWaterMark)state.highWaterMark=computeNewHighWaterMark(n);if(n<=state.length)return n;if(!state.ended){state.needReadable=true;return 0;}return state.length;}Readable.prototype.read=function(n){debug('read',n);n=parseInt(n,10);var state=this._readableState;var nOrig=n;if(n!==0)state.emittedReadable=false;if(n===0&&state.needReadable&&(state.length>=state.highWaterMark||state.ended)){debug('read: emitReadable',state.length,state.ended);if(state.length===0&&state.ended)endReadable(this);else emitReadable(this);return null;}n=howMuchToRead(n,state);if(n===0&&state.ended){if(state.length===0)endReadable(this);return null;}var doRead=state.needReadable;debug('need readable',doRead);if(state.length===0||state.length-n<state.highWaterMark){doRead=true;debug('length less than watermark',doRead);}if(state.ended||state.reading){doRead=false;debug('reading or ended',doRead);}else if(doRead){debug('do read');state.reading=true;state.sync=true;if(state.length===0)state.needReadable=true;this._read(state.highWaterMark);state.sync=false;if(!state.reading)n=howMuchToRead(nOrig,state);}var ret;if(n>0)ret=fromList(n,state);else ret=null;if(ret===null){state.needReadable=true;n=0;}else{state.length-=n;}if(state.length===0){if(!state.ended)state.needReadable=true;if(nOrig!==n&&state.ended)endReadable(this);}if(ret!==null)this.emit('data',ret);return ret;};function onEofChunk(stream,state){if(state.ended)return;if(state.decoder){var chunk=state.decoder.end();if(chunk&&chunk.length){state.buffer.push(chunk);state.length+=state.objectMode?1:chunk.length;}}state.ended=true;emitReadable(stream);}function emitReadable(stream){var state=stream._readableState;state.needReadable=false;if(!state.emittedReadable){debug('emitReadable',state.flowing);state.emittedReadable=true;if(state.sync)pna.nextTick(emitReadable_,stream);else emitReadable_(stream);}}function emitReadable_(stream){debug('emit readable');stream.emit('readable');flow(stream);}function maybeReadMore(stream,state){if(!state.readingMore){state.readingMore=true;pna.nextTick(maybeReadMore_,stream,state);}}function maybeReadMore_(stream,state){var len=state.length;while(!state.reading&&!state.flowing&&!state.ended&&state.length<state.highWaterMark){debug('maybeReadMore read 0');stream.read(0);if(len===state.length)break;else len=state.length;}state.readingMore=false;}Readable.prototype._read=function(n){this.emit('error',new Error('_read() is not implemented'));};Readable.prototype.pipe=function(dest,pipeOpts){var src=this;var state=this._readableState;switch(state.pipesCount){case 0:state.pipes=dest;break;case 1:state.pipes=[state.pipes,dest];break;default:state.pipes.push(dest);break;}state.pipesCount+=1;debug('pipe count=%d opts=%j',state.pipesCount,pipeOpts);var doEnd=(!pipeOpts||pipeOpts.end!==false)&&dest!==process.stdout&&dest!==process.stderr;var endFn=doEnd?onend:unpipe;if(state.endEmitted)pna.nextTick(endFn);else src.once('end',endFn);dest.on('unpipe',onunpipe);function onunpipe(readable,unpipeInfo){debug('onunpipe');if(readable===src){if(unpipeInfo&&unpipeInfo.hasUnpiped===false){unpipeInfo.hasUnpiped=true;cleanup();}}}function onend(){debug('onend');dest.end();}var ondrain=pipeOnDrain(src);dest.on('drain',ondrain);var cleanedUp=false;function cleanup(){debug('cleanup');dest.removeListener('close',onclose);dest.removeListener('finish',onfinish);dest.removeListener('drain',ondrain);dest.removeListener('error',onerror);dest.removeListener('unpipe',onunpipe);src.removeListener('end',onend);src.removeListener('end',unpipe);src.removeListener('data',ondata);cleanedUp=true;if(state.awaitDrain&&(!dest._writableState||dest._writableState.needDrain))ondrain();}var increasedAwaitDrain=false;src.on('data',ondata);function ondata(chunk){debug('ondata');increasedAwaitDrain=false;var ret=dest.write(chunk);if(false===ret&&!increasedAwaitDrain){if((state.pipesCount===1&&state.pipes===dest||state.pipesCount>1&&indexOf(state.pipes,dest)!==-1)&&!cleanedUp){debug('false write response, pause',src._readableState.awaitDrain);src._readableState.awaitDrain++;increasedAwaitDrain=true;}src.pause();}}function onerror(er){debug('onerror',er);unpipe();dest.removeListener('error',onerror);if(EElistenerCount(dest,'error')===0)dest.emit('error',er);}prependListener(dest,'error',onerror);function onclose(){dest.removeListener('finish',onfinish);unpipe();}dest.once('close',onclose);function onfinish(){debug('onfinish');dest.removeListener('close',onclose);unpipe();}dest.once('finish',onfinish);function unpipe(){debug('unpipe');src.unpipe(dest);}dest.emit('pipe',src);if(!state.flowing){debug('pipe resume');src.resume();}return dest;};function pipeOnDrain(src){return function(){var state=src._readableState;debug('pipeOnDrain',state.awaitDrain);if(state.awaitDrain)state.awaitDrain--;if(state.awaitDrain===0&&EElistenerCount(src,'data')){state.flowing=true;flow(src);}};}Readable.prototype.unpipe=function(dest){var state=this._readableState;var unpipeInfo={hasUnpiped:false};if(state.pipesCount===0)return this;if(state.pipesCount===1){if(dest&&dest!==state.pipes)return this;if(!dest)dest=state.pipes;state.pipes=null;state.pipesCount=0;state.flowing=false;if(dest)dest.emit('unpipe',this,unpipeInfo);return this;}if(!dest){var dests=state.pipes;var len=state.pipesCount;state.pipes=null;state.pipesCount=0;state.flowing=false;for(var i=0;i<len;i++){dests[i].emit('unpipe',this,unpipeInfo);}return this;}var index=indexOf(state.pipes,dest);if(index===-1)return this;state.pipes.splice(index,1);state.pipesCount-=1;if(state.pipesCount===1)state.pipes=state.pipes[0];dest.emit('unpipe',this,unpipeInfo);return this;};Readable.prototype.on=function(ev,fn){var res=Stream.prototype.on.call(this,ev,fn);if(ev==='data'){if(this._readableState.flowing!==false)this.resume();}else if(ev==='readable'){var state=this._readableState;if(!state.endEmitted&&!state.readableListening){state.readableListening=state.needReadable=true;state.emittedReadable=false;if(!state.reading){pna.nextTick(nReadingNextTick,this);}else if(state.length){emitReadable(this);}}}return res;};Readable.prototype.addListener=Readable.prototype.on;function nReadingNextTick(self){debug('readable nexttick read 0');self.read(0);}Readable.prototype.resume=function(){var state=this._readableState;if(!state.flowing){debug('resume');state.flowing=true;resume(this,state);}return this;};function resume(stream,state){if(!state.resumeScheduled){state.resumeScheduled=true;pna.nextTick(resume_,stream,state);}}function resume_(stream,state){if(!state.reading){debug('resume read 0');stream.read(0);}state.resumeScheduled=false;state.awaitDrain=0;stream.emit('resume');flow(stream);if(state.flowing&&!state.reading)stream.read(0);}Readable.prototype.pause=function(){debug('call pause flowing=%j',this._readableState.flowing);if(false!==this._readableState.flowing){debug('pause');this._readableState.flowing=false;this.emit('pause');}return this;};function flow(stream){var state=stream._readableState;debug('flow',state.flowing);while(state.flowing&&stream.read()!==null){}}Readable.prototype.wrap=function(stream){var _this=this;var state=this._readableState;var paused=false;stream.on('end',function(){debug('wrapped end');if(state.decoder&&!state.ended){var chunk=state.decoder.end();if(chunk&&chunk.length)_this.push(chunk);}_this.push(null);});stream.on('data',function(chunk){debug('wrapped data');if(state.decoder)chunk=state.decoder.write(chunk);if(state.objectMode&&(chunk===null||chunk===undefined))return;else if(!state.objectMode&&(!chunk||!chunk.length))return;var ret=_this.push(chunk);if(!ret){paused=true;stream.pause();}});for(var i in stream){if(this[i]===undefined&&typeof stream[i]==='function'){this[i]=function(method){return function(){return stream[method].apply(stream,arguments);};}(i);}}for(var n=0;n<kProxyEvents.length;n++){stream.on(kProxyEvents[n],this.emit.bind(this,kProxyEvents[n]));}this._read=function(n){debug('wrapped _read',n);if(paused){paused=false;stream.resume();}};return this;};Object.defineProperty(Readable.prototype,'readableHighWaterMark',{enumerable:false,get:function(){return this._readableState.highWaterMark;}});Readable._fromList=fromList;function fromList(n,state){if(state.length===0)return null;var ret;if(state.objectMode)ret=state.buffer.shift();else if(!n||n>=state.length){if(state.decoder)ret=state.buffer.join('');else if(state.buffer.length===1)ret=state.buffer.head.data;else ret=state.buffer.concat(state.length);state.buffer.clear();}else{ret=fromListPartial(n,state.buffer,state.decoder);}return ret;}function fromListPartial(n,list,hasStrings){var ret;if(n<list.head.data.length){ret=list.head.data.slice(0,n);list.head.data=list.head.data.slice(n);}else if(n===list.head.data.length){ret=list.shift();}else{ret=hasStrings?copyFromBufferString(n,list):copyFromBuffer(n,list);}return ret;}function copyFromBufferString(n,list){var p=list.head;var c=1;var ret=p.data;n-=ret.length;while(p=p.next){var str=p.data;var nb=n>str.length?str.length:n;if(nb===str.length)ret+=str;else ret+=str.slice(0,n);n-=nb;if(n===0){if(nb===str.length){++c;if(p.next)list.head=p.next;else list.head=list.tail=null;}else{list.head=p;p.data=str.slice(nb);}break;}++c;}list.length-=c;return ret;}function copyFromBuffer(n,list){var ret=Buffer.allocUnsafe(n);var p=list.head;var c=1;p.data.copy(ret);n-=p.data.length;while(p=p.next){var buf=p.data;var nb=n>buf.length?buf.length:n;buf.copy(ret,ret.length-n,0,nb);n-=nb;if(n===0){if(nb===buf.length){++c;if(p.next)list.head=p.next;else list.head=list.tail=null;}else{list.head=p;p.data=buf.slice(nb);}break;}++c;}list.length-=c;return ret;}function endReadable(stream){var state=stream._readableState;if(state.length>0)throw new Error('"endReadable()" called on non-empty stream');if(!state.endEmitted){state.ended=true;pna.nextTick(endReadableNT,state,stream);}}function endReadableNT(state,stream){if(!state.endEmitted&&state.length===0){state.endEmitted=true;stream.readable=false;stream.emit('end');}}function indexOf(xs,x){for(var i=0,l=xs.length;i<l;i++){if(xs[i]===x)return i;}return-1;}},1611:function(__unusedmodule,exports){"use strict";exports.toString=function(rcode){switch(rcode){case 0:return'NOERROR';case 1:return'FORMERR';case 2:return'SERVFAIL';case 3:return'NXDOMAIN';case 4:return'NOTIMP';case 5:return'REFUSED';case 6:return'YXDOMAIN';case 7:return'YXRRSET';case 8:return'NXRRSET';case 9:return'NOTAUTH';case 10:return'NOTZONE';case 11:return'RCODE_11';case 12:return'RCODE_12';case 13:return'RCODE_13';case 14:return'RCODE_14';case 15:return'RCODE_15';}return'RCODE_'+rcode;};exports.toRcode=function(code){switch(code.toUpperCase()){case'NOERROR':return 0;case'FORMERR':return 1;case'SERVFAIL':return 2;case'NXDOMAIN':return 3;case'NOTIMP':return 4;case'REFUSED':return 5;case'YXDOMAIN':return 6;case'YXRRSET':return 7;case'NXRRSET':return 8;case'NOTAUTH':return 9;case'NOTZONE':return 10;case'RCODE_11':return 11;case'RCODE_12':return 12;case'RCODE_13':return 13;case'RCODE_14':return 14;case'RCODE_15':return 15;}return 0;};},1617:function(module,__unusedexports,__webpack_require__){var forge=__webpack_require__(7938);__webpack_require__(5302);__webpack_require__(8434);__webpack_require__(1214);module.exports=forge.aes=forge.aes||{};forge.aes.startEncrypting=function(key,iv,output,mode){var cipher=_createCipher({key:key,output:output,decrypt:false,mode:mode});cipher.start(iv);return cipher;};forge.aes.createEncryptionCipher=function(key,mode){return _createCipher({key:key,output:null,decrypt:false,mode:mode});};forge.aes.startDecrypting=function(key,iv,output,mode){var cipher=_createCipher({key:key,output:output,decrypt:true,mode:mode});cipher.start(iv);return cipher;};forge.aes.createDecryptionCipher=function(key,mode){return _createCipher({key:key,output:null,decrypt:true,mode:mode});};forge.aes.Algorithm=function(name,mode){if(!init){initialize();}var self=this;self.name=name;self.mode=new mode({blockSize:16,cipher:{encrypt:function(inBlock,outBlock){return _updateBlock(self._w,inBlock,outBlock,false);},decrypt:function(inBlock,outBlock){return _updateBlock(self._w,inBlock,outBlock,true);}}});self._init=false;};forge.aes.Algorithm.prototype.initialize=function(options){if(this._init){return;}var key=options.key;var tmp;if(typeof key==='string'&&(key.length===16||key.length===24||key.length===32)){key=forge.util.createBuffer(key);}else if(forge.util.isArray(key)&&(key.length===16||key.length===24||key.length===32)){tmp=key;key=forge.util.createBuffer();for(var i=0;i<tmp.length;++i){key.putByte(tmp[i]);}}if(!forge.util.isArray(key)){tmp=key;key=[];var len=tmp.length();if(len===16||len===24||len===32){len=len>>>2;for(var i=0;i<len;++i){key.push(tmp.getInt32());}}}if(!forge.util.isArray(key)||!(key.length===4||key.length===6||key.length===8)){throw new Error('Invalid key parameter.');}var mode=this.mode.name;var encryptOp=['CFB','OFB','CTR','GCM'].indexOf(mode)!==-1;this._w=_expandKey(key,options.decrypt&&!encryptOp);this._init=true;};forge.aes._expandKey=function(key,decrypt){if(!init){initialize();}return _expandKey(key,decrypt);};forge.aes._updateBlock=_updateBlock;registerAlgorithm('AES-ECB',forge.cipher.modes.ecb);registerAlgorithm('AES-CBC',forge.cipher.modes.cbc);registerAlgorithm('AES-CFB',forge.cipher.modes.cfb);registerAlgorithm('AES-OFB',forge.cipher.modes.ofb);registerAlgorithm('AES-CTR',forge.cipher.modes.ctr);registerAlgorithm('AES-GCM',forge.cipher.modes.gcm);function registerAlgorithm(name,mode){var factory=function(){return new forge.aes.Algorithm(name,mode);};forge.cipher.registerAlgorithm(name,factory);}var init=false;var Nb=4;var sbox;var isbox;var rcon;var mix;var imix;function initialize(){init=true;rcon=[0x00,0x01,0x02,0x04,0x08,0x10,0x20,0x40,0x80,0x1B,0x36];var xtime=new Array(256);for(var i=0;i<128;++i){xtime[i]=i<<1;xtime[i+128]=i+128<<1^0x11B;}sbox=new Array(256);isbox=new Array(256);mix=new Array(4);imix=new Array(4);for(var i=0;i<4;++i){mix[i]=new Array(256);imix[i]=new Array(256);}var e=0,ei=0,e2,e4,e8,sx,sx2,me,ime;for(var i=0;i<256;++i){sx=ei^ei<<1^ei<<2^ei<<3^ei<<4;sx=sx>>8^sx&255^0x63;sbox[e]=sx;isbox[sx]=e;sx2=xtime[sx];e2=xtime[e];e4=xtime[e2];e8=xtime[e4];me=sx2<<24^sx<<16^sx<<8^(sx^sx2);ime=(e2^e4^e8)<<24^(e^e8)<<16^(e^e4^e8)<<8^(e^e2^e8);for(var n=0;n<4;++n){mix[n][e]=me;imix[n][sx]=ime;me=me<<24|me>>>8;ime=ime<<24|ime>>>8;}if(e===0){e=ei=1;}else{e=e2^xtime[xtime[xtime[e2^e8]]];ei^=xtime[xtime[ei]];}}}function _expandKey(key,decrypt){var w=key.slice(0);var temp,iNk=1;var Nk=w.length;var Nr1=Nk+6+1;var end=Nb*Nr1;for(var i=Nk;i<end;++i){temp=w[i-1];if(i%Nk===0){temp=sbox[temp>>>16&255]<<24^sbox[temp>>>8&255]<<16^sbox[temp&255]<<8^sbox[temp>>>24]^rcon[iNk]<<24;iNk++;}else if(Nk>6&&i%Nk===4){temp=sbox[temp>>>24]<<24^sbox[temp>>>16&255]<<16^sbox[temp>>>8&255]<<8^sbox[temp&255];}w[i]=w[i-Nk]^temp;}if(decrypt){var tmp;var m0=imix[0];var m1=imix[1];var m2=imix[2];var m3=imix[3];var wnew=w.slice(0);end=w.length;for(var i=0,wi=end-Nb;i<end;i+=Nb,wi-=Nb){if(i===0||i===end-Nb){wnew[i]=w[wi];wnew[i+1]=w[wi+3];wnew[i+2]=w[wi+2];wnew[i+3]=w[wi+1];}else{for(var n=0;n<Nb;++n){tmp=w[wi+n];wnew[i+(3&-n)]=m0[sbox[tmp>>>24]]^m1[sbox[tmp>>>16&255]]^m2[sbox[tmp>>>8&255]]^m3[sbox[tmp&255]];}}}w=wnew;}return w;}function _updateBlock(w,input,output,decrypt){var Nr=w.length/4-1;var m0,m1,m2,m3,sub;if(decrypt){m0=imix[0];m1=imix[1];m2=imix[2];m3=imix[3];sub=isbox;}else{m0=mix[0];m1=mix[1];m2=mix[2];m3=mix[3];sub=sbox;}var a,b,c,d,a2,b2,c2;a=input[0]^w[0];b=input[decrypt?3:1]^w[1];c=input[2]^w[2];d=input[decrypt?1:3]^w[3];var i=3;for(var round=1;round<Nr;++round){a2=m0[a>>>24]^m1[b>>>16&255]^m2[c>>>8&255]^m3[d&255]^w[++i];b2=m0[b>>>24]^m1[c>>>16&255]^m2[d>>>8&255]^m3[a&255]^w[++i];c2=m0[c>>>24]^m1[d>>>16&255]^m2[a>>>8&255]^m3[b&255]^w[++i];d=m0[d>>>24]^m1[a>>>16&255]^m2[b>>>8&255]^m3[c&255]^w[++i];a=a2;b=b2;c=c2;}output[0]=sub[a>>>24]<<24^sub[b>>>16&255]<<16^sub[c>>>8&255]<<8^sub[d&255]^w[++i];output[decrypt?3:1]=sub[b>>>24]<<24^sub[c>>>16&255]<<16^sub[d>>>8&255]<<8^sub[a&255]^w[++i];output[2]=sub[c>>>24]<<24^sub[d>>>16&255]<<16^sub[a>>>8&255]<<8^sub[b&255]^w[++i];output[decrypt?1:3]=sub[d>>>24]<<24^sub[a>>>16&255]<<16^sub[b>>>8&255]<<8^sub[c&255]^w[++i];}function _createCipher(options){options=options||{};var mode=(options.mode||'CBC').toUpperCase();var algorithm='AES-'+mode;var cipher;if(options.decrypt){cipher=forge.cipher.createDecipher(algorithm,options.key);}else{cipher=forge.cipher.createCipher(algorithm,options.key);}var start=cipher.start;cipher.start=function(iv,options){var output=null;if(options instanceof forge.util.ByteBuffer){output=options;options={};}options=options||{};options.output=output;options.iv=iv;start.call(cipher,options);};return cipher;}},1619:function(module,__unusedexports,__webpack_require__){"use strict";const parallel=__webpack_require__(4876);const Record=__webpack_require__(6091).Record;const errcode=__webpack_require__(4999);const Message=__webpack_require__(6102);const utils=__webpack_require__(2869);module.exports=dht=>{const log=utils.logger(dht.peerInfo.id,'rpc:get-value');return function getValue(peer,msg,callback){const key=msg.key;log('key: %b',key);if(!key||key.length===0){return callback(errcode(new Error('Invalid key'),'ERR_INVALID_KEY'));}const response=new Message(Message.TYPES.GET_VALUE,key,msg.clusterLevel);if(utils.isPublicKeyKey(key)){log('is public key');const id=utils.fromPublicKeyKey(key);let info;if(dht._isSelf(id)){info=dht.peerInfo;}else if(dht.peerBook.has(id)){info=dht.peerBook.get(id);}if(info&&info.id.pubKey){log('returning found public key');response.record=new Record(key,info.id.pubKey.bytes);return callback(null,response);}}parallel([cb=>dht._checkLocalDatastore(key,cb),cb=>dht._betterPeersToQuery(msg,peer,cb)],(err,res)=>{if(err){return callback(err);}const record=res[0];const closer=res[1];if(record){log('got record');response.record=record;}if(closer.length>0){log('got closer %s',closer.length);response.closerPeers=closer;}callback(null,response);});};};},1625:function(module,__unusedexports,__webpack_require__){"use strict";var bn=__webpack_require__(2420);var elliptic=__webpack_require__(5194);var utils=elliptic.utils;var assert=utils.assert;function Signature(options,enc){if(options instanceof Signature)return options;if(this._importDER(options,enc))return;assert(options.r&&options.s,'Signature without r or s');this.r=new bn(options.r,16);this.s=new bn(options.s,16);}module.exports=Signature;Signature.prototype._importDER=function _importDER(data,enc){data=utils.toArray(data,enc);if(data.length<6||data[0]!==0x30||data[2]!==0x02)return false;var total=data[1];if(1+total>data.length)return false;var rlen=data[3];if(rlen>=0x80)return false;if(4+rlen+2>=data.length)return false;if(data[4+rlen]!==0x02)return false;var slen=data[5+rlen];if(slen>=0x80)return false;if(4+rlen+2+slen>data.length)return false;this.r=new bn(data.slice(4,4+rlen));this.s=new bn(data.slice(4+rlen+2,4+rlen+2+slen));return true;};Signature.prototype.toDER=function toDER(enc){var r=this.r.toArray();var s=this.s.toArray();if(r[0]&0x80)r=[0].concat(r);if(s[0]&0x80)s=[0].concat(s);var total=r.length+s.length+4;var res=[0x30,total,0x02,r.length];res=res.concat(r,[0x02,s.length],s);return utils.encode(res,enc);};},1627:function(module,__unusedexports,__webpack_require__){"use strict";const path=__webpack_require__(5897);const fs=__webpack_require__(2756);const retry=__webpack_require__(4442);const onExit=__webpack_require__(3103);const locks={};function getLockFile(file,options){return options.lockfilePath||`${file}.lock`;}function resolveCanonicalPath(file,options,callback){if(!options.realpath){return callback(null,path.resolve(file));}options.fs.realpath(file,callback);}function acquireLock(file,options,callback){options.fs.mkdir(getLockFile(file,options),err=>{if(!err){return callback();}if(err.code!=='EEXIST'){return callback(err);}if(options.stale<=0){return callback(Object.assign(new Error('Lock file is already being hold'),{code:'ELOCKED',file}));}options.fs.stat(getLockFile(file,options),(err,stat)=>{if(err){if(err.code==='ENOENT'){return acquireLock(file,_objectSpread2({},options,{stale:0}),callback);}return callback(err);}if(!isLockStale(stat,options)){return callback(Object.assign(new Error('Lock file is already being hold'),{code:'ELOCKED',file}));}removeLock(file,options,err=>{if(err){return callback(err);}acquireLock(file,_objectSpread2({},options,{stale:0}),callback);});});});}function isLockStale(stat,options){return stat.mtime.getTime()<Date.now()-options.stale;}function removeLock(file,options,callback){options.fs.rmdir(getLockFile(file,options),err=>{if(err&&err.code!=='ENOENT'){return callback(err);}callback();});}function updateLock(file,options){const lock=locks[file];if(lock.updateTimeout){return;}lock.updateDelay=lock.updateDelay||options.update;lock.updateTimeout=setTimeout(()=>{const mtime=Date.now()/1000;lock.updateTimeout=null;options.fs.utimes(getLockFile(file,options),mtime,mtime,err=>{if(lock.released){return;}if(lock.lastUpdate<=Date.now()-options.stale&&lock.lastUpdate>Date.now()-options.stale*2){const err=Object.assign(new Error(lock.updateError||'Unable to update lock within the stale threshold'),{code:'ECOMPROMISED'});return setLockAsCompromised(file,lock,err);}if(err){if(err.code==='ENOENT'){return setLockAsCompromised(file,lock,Object.assign(err,{code:'ECOMPROMISED'}));}lock.updateError=err;lock.updateDelay=1000;return updateLock(file,options);}lock.lastUpdate=Date.now();lock.updateError=null;lock.updateDelay=null;updateLock(file,options);});},lock.updateDelay);if(lock.updateTimeout.unref){lock.updateTimeout.unref();}}function setLockAsCompromised(file,lock,err){lock.released=true;if(lock.updateTimeout){clearTimeout(lock.updateTimeout);}if(locks[file]===lock){delete locks[file];}lock.options.onCompromised(err);}function lock(file,options,callback){options=_objectSpread2({stale:10000,update:null,realpath:true,retries:0,fs,onCompromised:err=>{throw err;}},options);options.retries=options.retries||0;options.retries=typeof options.retries==='number'?{retries:options.retries}:options.retries;options.stale=Math.max(options.stale||0,2000);options.update=options.update==null?options.stale/2:options.update||0;options.update=Math.max(Math.min(options.update,options.stale/2),1000);resolveCanonicalPath(file,options,(err,file)=>{if(err){return callback(err);}const operation=retry.operation(options.retries);operation.attempt(()=>{acquireLock(file,options,err=>{if(operation.retry(err)){return;}if(err){return callback(operation.mainError());}const lock=locks[file]={options,lastUpdate:Date.now()};updateLock(file,options);callback(null,releasedCallback=>{if(lock.released){return releasedCallback&&releasedCallback(Object.assign(new Error('Lock is already released'),{code:'ERELEASED'}));}unlock(file,_objectSpread2({},options,{realpath:false}),releasedCallback);});});});});}function unlock(file,options,callback){options=_objectSpread2({fs,realpath:true},options);resolveCanonicalPath(file,options,(err,file)=>{if(err){return callback(err);}const lock=locks[file];if(!lock){return callback(Object.assign(new Error('Lock is not acquired/owned by you'),{code:'ENOTACQUIRED'}));}lock.updateTimeout&&clearTimeout(lock.updateTimeout);lock.released=true;delete locks[file];removeLock(file,options,callback);});}function check(file,options,callback){options=_objectSpread2({stale:10000,realpath:true,fs},options);options.stale=Math.max(options.stale||0,2000);resolveCanonicalPath(file,options,(err,file)=>{if(err){return callback(err);}options.fs.stat(getLockFile(file,options),(err,stat)=>{if(err){return err.code==='ENOENT'?callback(null,false):callback(err);}return callback(null,!isLockStale(stat,options));});});}function getLocks(){return locks;}onExit(()=>{for(const file in locks){const options=locks[file].options;try{options.fs.rmdirSync(getLockFile(file,options));}catch(e){}}});module.exports.lock=lock;module.exports.unlock=unlock;module.exports.check=check;module.exports.getLocks=getLocks;},1635:function(__unusedmodule,exports,__webpack_require__){"use strict";exports.Diagnose=__webpack_require__(3854);exports.Decoder=__webpack_require__(8012);exports.Encoder=__webpack_require__(3583);exports.Simple=__webpack_require__(3749);exports.Tagged=__webpack_require__(3967);exports.decodeAll=exports.Decoder.decodeAll;exports.decodeFirst=exports.Decoder.decodeFirst;exports.diagnose=exports.Diagnose.diagnose;exports.encode=exports.Encoder.encode;exports.decode=exports.Decoder.decode;exports.leveldb={decode:exports.Decoder.decodeAll,encode:exports.Encoder.encode,buffer:true,name:'cbor'};},1641:function(module,__unusedexports,__webpack_require__){"use strict";const waterfall=__webpack_require__(4265);const parallel=__webpack_require__(4876);const{addLink,updateTree,updateMfsRoot,toTrail,toSourcesAndDestination,toMfsPath}=__webpack_require__(7777);const stat=__webpack_require__(1847);const mkdir=__webpack_require__(1674);const log=__webpack_require__(746)('ipfs:mfs:cp');const defaultOptions={parents:false,flush:true,format:'dag-pb',hashAlg:'sha2-256',shardSplitThreshold:1000};module.exports=context=>{return function mfsCp(){const args=Array.from(arguments);const callback=args.pop();waterfall([cb=>toSourcesAndDestination(context,args,defaultOptions,cb),({sources,destination,options},cb)=>{if(!sources.length){return cb(new Error('Please supply at least one source'));}if(!destination){return cb(new Error('Please supply a destination'));}options.parents=options.p||options.parents;cb(null,{sources,destination,options});},({sources,destination,options},cb)=>toTrail(context,destination.mfsPath,options,(error,trail)=>{if(error){return cb(error);}if(trail.length===destination.parts.length){log('Destination does not exist');if(sources.length===1){log('Only one source, copying to a file');return copyToFile(context,sources.pop(),destination,trail,options,cb);}log('Multiple sources, copying to a directory');return copyToDirectory(context,sources,destination,trail,options,cb);}const parent=trail[trail.length-1];if(parent.type==='dir'){log('Destination is a directory');return copyToDirectory(context,sources,destination,trail,options,cb);}cb(new Error('directory already has entry by that name'));})],callback);};};const copyToFile=(context,source,destination,destinationTrail,options,callback)=>{waterfall([cb=>asExistentTrail(context,source,options,cb),(sourceTrail,cb)=>{const parent=destinationTrail[destinationTrail.length-1];const child=sourceTrail[sourceTrail.length-1];waterfall([next=>context.ipld.get(parent.cid,next),(result,next)=>addLink(context,{parent:result.value,parentCid:parent.cid,size:child.size,cid:child.cid,name:destination.parts[destination.parts.length-1]},next),({node,cid},next)=>{parent.node=node;parent.cid=cid;parent.size=node.size;next(null,destinationTrail);}],cb);},(trail,cb)=>updateTree(context,trail,options,cb),({cid},cb)=>updateMfsRoot(context,cid,cb)],error=>callback(error));};const copyToDirectory=(context,sources,destination,destinationTrail,options,callback)=>{waterfall([cb=>{if(destinationTrail.length!==destination.parts.length+1){log(`Making destination directory`,destination.path);return waterfall([cb=>mkdir(context)(destination.path,options,cb),cb=>toMfsPath(context,destination.path,cb),(mfsPath,cb)=>{destination=mfsPath;toTrail(context,destination.mfsPath,options,cb);}],(err,trail)=>{if(err){return cb(err);}destinationTrail=trail;cb();});}cb();},cb=>parallel(sources.map(source=>next=>asExistentTrail(context,source,options,next)),cb),(sourceTrails,cb)=>{waterfall([next=>{parallel(sources.map(source=>{return cb=>{stat(context)(`${destination.path}/${source.name}`,options,error=>{if(error){if(error.message.includes('does not exist')){return cb();}return cb(error);}cb(new Error('directory already has entry by that name'));});};}),error=>next(error));},next=>{const parent=destinationTrail[destinationTrail.length-1];waterfall([next=>context.ipld.get(parent.cid,next),(result,next)=>next(null,{cid:parent.cid,node:result.value})].concat(sourceTrails.map((sourceTrail,index)=>{return(parent,done)=>{const child=sourceTrail[sourceTrail.length-1];log(`Adding ${sources[index].name} to ${parent.cid.toBaseEncodedString()}`);addLink(context,{parent:parent.node,parentCid:parent.cid,size:child.size,cid:child.cid,name:sources[index].name},(err,result)=>{if(err){return done(err);}log(`New directory hash ${result.cid.toBaseEncodedString()}`);done(err,result);});};})),next);},({node,cid},next)=>{const parent=destinationTrail[destinationTrail.length-1];parent.node=node;parent.cid=cid;parent.size=node.size;next(null,destinationTrail);},(trail,next)=>updateTree(context,trail,options,next),({cid},next)=>updateMfsRoot(context,cid,next)],cb);}],error=>callback(error));};const asExistentTrail=(context,source,options,callback)=>{toTrail(context,source.mfsPath,options,(err,trail)=>{if(err){return callback(err);}if(source.type==='ipfs'){return callback(null,trail);}if(trail.length!==source.parts.length+1){return callback(new Error(`${source.path} does not exist`));}callback(null,trail);});};},1663:function(module,__unusedexports,__webpack_require__){var tokenize=__webpack_require__(654);var MAX_RANGE=0x1FFFFFFF;var PACKABLE_TYPES=['int32','int64','uint32','uint64','sint32','sint64','bool','fixed64','sfixed64','double','fixed32','sfixed32','float'];var onfieldoptions=function(tokens){var opts={};while(tokens.length){switch(tokens[0]){case'[':case',':tokens.shift();var name=tokens.shift();if(name==='('){name=tokens.shift();tokens.shift();}if(tokens[0]!=='=')throw new Error('Unexpected token in field options: '+tokens[0]);tokens.shift();if(tokens[0]===']')throw new Error('Unexpected ] in field option');opts[name]=tokens.shift();break;case']':tokens.shift();return opts;default:throw new Error('Unexpected token in field options: '+tokens[0]);}}throw new Error('No closing tag for field options');};var onfield=function(tokens){var field={name:null,type:null,tag:-1,map:null,oneof:null,required:false,repeated:false,options:{}};while(tokens.length){switch(tokens[0]){case'=':tokens.shift();field.tag=Number(tokens.shift());break;case'map':field.type='map';field.map={from:null,to:null};tokens.shift();if(tokens[0]!=='<')throw new Error('Unexpected token in map type: '+tokens[0]);tokens.shift();field.map.from=tokens.shift();if(tokens[0]!==',')throw new Error('Unexpected token in map type: '+tokens[0]);tokens.shift();field.map.to=tokens.shift();if(tokens[0]!=='>')throw new Error('Unexpected token in map type: '+tokens[0]);tokens.shift();field.name=tokens.shift();break;case'repeated':case'required':case'optional':var t=tokens.shift();field.required=t==='required';field.repeated=t==='repeated';field.type=tokens.shift();field.name=tokens.shift();break;case'[':field.options=onfieldoptions(tokens);break;case';':if(field.name===null)throw new Error('Missing field name');if(field.type===null)throw new Error('Missing type in message field: '+field.name);if(field.tag===-1)throw new Error('Missing tag number in message field: '+field.name);tokens.shift();return field;default:throw new Error('Unexpected token in message field: '+tokens[0]);}}throw new Error('No ; found for message field');};var onmessagebody=function(tokens){var body={enums:[],messages:[],fields:[],extends:[],extensions:null};while(tokens.length){switch(tokens[0]){case'map':case'repeated':case'optional':case'required':body.fields.push(onfield(tokens));break;case'enum':body.enums.push(onenum(tokens));break;case'message':body.messages.push(onmessage(tokens));break;case'extensions':body.extensions=onextensions(tokens);break;case'oneof':tokens.shift();var name=tokens.shift();if(tokens[0]!=='{')throw new Error('Unexpected token in oneof: '+tokens[0]);tokens.shift();while(tokens[0]!=='}'){tokens.unshift('optional');var field=onfield(tokens);field.oneof=name;body.fields.push(field);}tokens.shift();break;case'extend':body.extends.push(onextend(tokens));break;case';':tokens.shift();break;case'reserved':case'option':tokens.shift();while(tokens[0]!==';'){tokens.shift();}break;default:tokens.unshift('optional');body.fields.push(onfield(tokens));}}return body;};var onextend=function(tokens){var out={name:tokens[1],message:onmessage(tokens)};return out;};var onextensions=function(tokens){tokens.shift();var from=Number(tokens.shift());if(isNaN(from))throw new Error('Invalid from in extensions definition');if(tokens.shift()!=='to')throw new Error("Expected keyword 'to' in extensions definition");var to=tokens.shift();if(to==='max')to=MAX_RANGE;to=Number(to);if(isNaN(to))throw new Error('Invalid to in extensions definition');if(tokens.shift()!==';')throw new Error('Missing ; in extensions definition');return{from:from,to:to};};var onmessage=function(tokens){tokens.shift();var lvl=1;var body=[];var msg={name:tokens.shift(),enums:[],extends:[],messages:[],fields:[]};if(tokens[0]!=='{')throw new Error('Expected { but found '+tokens[0]);tokens.shift();while(tokens.length){if(tokens[0]==='{')lvl++;else if(tokens[0]==='}')lvl--;if(!lvl){tokens.shift();body=onmessagebody(body);msg.enums=body.enums;msg.messages=body.messages;msg.fields=body.fields;msg.extends=body.extends;msg.extensions=body.extensions;return msg;}body.push(tokens.shift());}if(lvl)throw new Error('No closing tag for message');};var onpackagename=function(tokens){tokens.shift();var name=tokens.shift();if(tokens[0]!==';')throw new Error('Expected ; but found '+tokens[0]);tokens.shift();return name;};var onsyntaxversion=function(tokens){tokens.shift();if(tokens[0]!=='=')throw new Error('Expected = but found '+tokens[0]);tokens.shift();var version=tokens.shift();switch(version){case'"proto2"':version=2;break;case'"proto3"':version=3;break;default:throw new Error('Expected protobuf syntax version but found '+version);}if(tokens[0]!==';')throw new Error('Expected ; but found '+tokens[0]);tokens.shift();return version;};var onenumvalue=function(tokens){if(tokens.length<4)throw new Error('Invalid enum value: '+tokens.slice(0,3).join(' '));if(tokens[1]!=='=')throw new Error('Expected = but found '+tokens[1]);if(tokens[3]!==';'&&tokens[3]!=='[')throw new Error('Expected ; or [ but found '+tokens[1]);var name=tokens.shift();tokens.shift();var val={value:null,options:{}};val.value=Number(tokens.shift());if(tokens[0]==='['){val.options=onfieldoptions(tokens);}tokens.shift();return{name:name,val:val};};var onenum=function(tokens){tokens.shift();var options={};var e={name:tokens.shift(),values:{},options:{}};if(tokens[0]!=='{')throw new Error('Expected { but found '+tokens[0]);tokens.shift();while(tokens.length){if(tokens[0]==='}'){tokens.shift();if(tokens[0]===';')tokens.shift();return e;}if(tokens[0]==='option'){options=onoption(tokens);e.options[options.name]=options.value;continue;}var val=onenumvalue(tokens);e.values[val.name]=val.val;}throw new Error('No closing tag for enum');};var onoption=function(tokens){var name=null;var value=null;var parse=function(value){if(value==='true')return true;if(value==='false')return false;return value.replace(/^"+|"+$/gm,'');};while(tokens.length){if(tokens[0]===';'){tokens.shift();return{name:name,value:value};}switch(tokens[0]){case'option':tokens.shift();var hasBracket=tokens[0]==='(';if(hasBracket)tokens.shift();name=tokens.shift();if(hasBracket){if(tokens[0]!==')')throw new Error('Expected ) but found '+tokens[0]);tokens.shift();}if(tokens[0][0]==='.'){name+=tokens.shift();}break;case'=':tokens.shift();if(name===null)throw new Error('Expected key for option with value: '+tokens[0]);value=parse(tokens.shift());if(name==='optimize_for'&&!/^(SPEED|CODE_SIZE|LITE_RUNTIME)$/.test(value)){throw new Error('Unexpected value for option optimize_for: '+value);}else if(value==='{'){value=onoptionMap(tokens);}break;default:throw new Error('Unexpected token in option: '+tokens[0]);}}};var onoptionMap=function(tokens){var parse=function(value){if(value==='true')return true;if(value==='false')return false;return value.replace(/^"+|"+$/gm,'');};var map={};while(tokens.length){if(tokens[0]==='}'){tokens.shift();return map;}var hasBracket=tokens[0]==='(';if(hasBracket)tokens.shift();var key=tokens.shift();if(hasBracket){if(tokens[0]!==')')throw new Error('Expected ) but found '+tokens[0]);tokens.shift();}var value=null;switch(tokens[0]){case':':if(map[key]!==undefined)throw new Error('Duplicate option map key '+key);tokens.shift();value=parse(tokens.shift());if(value==='{'){value=onoptionMap(tokens);}map[key]=value;if(tokens[0]===';'){tokens.shift();}break;case'{':tokens.shift();value=onoptionMap(tokens);if(map[key]===undefined)map[key]=[];if(!Array.isArray(map[key]))throw new Error('Duplicate option map key '+key);map[key].push(value);break;default:throw new Error('Unexpected token in option map: '+tokens[0]);}}throw new Error('No closing tag for option map');};var onimport=function(tokens){tokens.shift();var file=tokens.shift().replace(/^"+|"+$/gm,'');if(tokens[0]!==';')throw new Error('Unexpected token: '+tokens[0]+'. Expected ";"');tokens.shift();return file;};var onservice=function(tokens){tokens.shift();var service={name:tokens.shift(),methods:[],options:{}};if(tokens[0]!=='{')throw new Error('Expected { but found '+tokens[0]);tokens.shift();while(tokens.length){if(tokens[0]==='}'){tokens.shift();if(tokens[0]===';')tokens.shift();return service;}switch(tokens[0]){case'option':var opt=onoption(tokens);if(service.options[opt.name]!==undefined)throw new Error('Duplicate option '+opt.name);service.options[opt.name]=opt.value;break;case'rpc':service.methods.push(onrpc(tokens));break;default:throw new Error('Unexpected token in service: '+tokens[0]);}}throw new Error('No closing tag for service');};var onrpc=function(tokens){tokens.shift();var rpc={name:tokens.shift(),input_type:null,output_type:null,client_streaming:false,server_streaming:false,options:{}};if(tokens[0]!=='(')throw new Error('Expected ( but found '+tokens[0]);tokens.shift();if(tokens[0]==='stream'){tokens.shift();rpc.client_streaming=true;}rpc.input_type=tokens.shift();if(tokens[0]!==')')throw new Error('Expected ) but found '+tokens[0]);tokens.shift();if(tokens[0]!=='returns')throw new Error('Expected returns but found '+tokens[0]);tokens.shift();if(tokens[0]!=='(')throw new Error('Expected ( but found '+tokens[0]);tokens.shift();if(tokens[0]==='stream'){tokens.shift();rpc.server_streaming=true;}rpc.output_type=tokens.shift();if(tokens[0]!==')')throw new Error('Expected ) but found '+tokens[0]);tokens.shift();if(tokens[0]===';'){tokens.shift();return rpc;}if(tokens[0]!=='{')throw new Error('Expected { but found '+tokens[0]);tokens.shift();while(tokens.length){if(tokens[0]==='}'){tokens.shift();if(tokens[0]===';')tokens.shift();return rpc;}if(tokens[0]==='option'){var opt=onoption(tokens);if(rpc.options[opt.name]!==undefined)throw new Error('Duplicate option '+opt.name);rpc.options[opt.name]=opt.value;}else{throw new Error('Unexpected token in rpc options: '+tokens[0]);}}throw new Error('No closing tag for rpc');};var parse=function(buf){var tokens=tokenize(buf.toString());for(var i=0;i<tokens.length;i++){if(/^("|')([^'"]*)$/.test(tokens[i])){var j;if(tokens[i].length===1){j=i+1;}else{j=i;}for(j;j<tokens.length;j++){if(/^([^'"]*)("|')$/.test(tokens[j])){tokens=tokens.slice(0,i).concat(tokens.slice(i,j+1).join('')).concat(tokens.slice(j+1));break;}}}}var schema={syntax:3,package:null,imports:[],enums:[],messages:[],options:{},extends:[]};var firstline=true;while(tokens.length){switch(tokens[0]){case'package':schema.package=onpackagename(tokens);break;case'syntax':if(!firstline)throw new Error('Protobuf syntax version should be first thing in file');schema.syntax=onsyntaxversion(tokens);break;case'message':schema.messages.push(onmessage(tokens));break;case'enum':schema.enums.push(onenum(tokens));break;case'option':var opt=onoption(tokens);if(schema.options[opt.name])throw new Error('Duplicate option '+opt.name);schema.options[opt.name]=opt.value;break;case'import':schema.imports.push(onimport(tokens));break;case'extend':schema.extends.push(onextend(tokens));break;case'service':if(!schema.services)schema.services=[];schema.services.push(onservice(tokens));break;default:throw new Error('Unexpected token: '+tokens[0]);}firstline=false;}schema.extends.forEach(function(ext){schema.messages.forEach(function(msg){if(msg.name===ext.name){ext.message.fields.forEach(function(field){if(!msg.extensions||field.tag<msg.extensions.from||field.tag>msg.extensions.to){throw new Error(msg.name+' does not declare '+field.tag+' as an extension number');}msg.fields.push(field);});}});});schema.messages.forEach(function(msg){msg.fields.forEach(function(field){var fieldSplit;var messageName;var nestedEnumName;var message;function enumNameIsFieldType(en){return en.name===field.type;}function enumNameIsNestedEnumName(en){return en.name===nestedEnumName;}if(field.options&&field.options.packed==='true'){if(PACKABLE_TYPES.indexOf(field.type)===-1){if(field.type.indexOf('.')===-1){if(msg.enums&&msg.enums.some(enumNameIsFieldType)){return;}}else{fieldSplit=field.type.split('.');if(fieldSplit.length>2){throw new Error('what is this?');}messageName=fieldSplit[0];nestedEnumName=fieldSplit[1];schema.messages.some(function(msg){if(msg.name===messageName){message=msg;return msg;}});if(message&&message.enums&&message.enums.some(enumNameIsNestedEnumName)){return;}}throw new Error('Fields of type '+field.type+' cannot be declared [packed=true]. '+'Only repeated fields of primitive numeric types (types which use '+'the varint, 32-bit, or 64-bit wire types) can be declared "packed". '+'See https://developers.google.com/protocol-buffers/docs/encoding#optional');}}});});return schema;};module.exports=parse;},1674:function(module,__unusedexports,__webpack_require__){"use strict";const waterfall=__webpack_require__(4265);const asyncMap=__webpack_require__(7011);const log=__webpack_require__(746)('ipfs:mfs:mkdir');const exporter=__webpack_require__(7623);const pull=__webpack_require__(418);const filter=__webpack_require__(708);const map=__webpack_require__(569);const collect=__webpack_require__(8342);const CID=__webpack_require__(9339);const{createNode,toMfsPath,toPathComponents,updateMfsRoot,updateTree,FILE_SEPARATOR}=__webpack_require__(7777);const defaultOptions={parents:false,hashAlg:'sha2-256',cidVersion:0,shardSplitThreshold:1000,format:'dag-pb',flush:true};module.exports=context=>{return function mfsMkdir(path,options,callback){if(typeof options==='function'){callback=options;options={};}options=Object.assign({},defaultOptions,options);options.parents=options.p||options.parents;options.cidVersion=options.cidVersion||0;if(!path){return callback(new Error('no path given to Mkdir'));}path=path.trim();if(path===FILE_SEPARATOR){return callback(options.parents?null:new Error(`cannot create directory '${FILE_SEPARATOR}': Already exists`));}log(`Creating ${path}`);const pathComponents=toPathComponents(path);waterfall([cb=>toMfsPath(context,path,cb),({mfsDirectory,mfsPath,root},cb)=>{const toExport=toPathComponents(mfsPath).slice(1);let depth=0;let exported='';pull(exporter(mfsPath,context.ipld,{fullPath:true}),filter(node=>{if(node.name===toExport[depth]){depth++;return true;}return false;}),map(node=>{const currentPath=`${exported}${exported?'/':''}${toExport[node.depth]}`;if(node.type!=='dir'){throw new Error(`cannot access ${currentPath}: Not a directory`);}exported=currentPath;return{cid:new CID(node.hash),name:node.name};}),collect(cb));},(trail,cb)=>{pathComponents.unshift('/');if(trail.length===pathComponents.length){return cb(new Error('file already exists'));}asyncMap(pathComponents.map((part,index)=>({part,index})),({part,index},cb)=>{if(trail[index]){return cb(null,_objectSpread2({name:part},trail[index]));}if(index!==pathComponents.length-1&&!options.parents){return cb(new Error('file does not exist'));}waterfall([done=>createNode(context,'directory',options,done),({cid,node},done)=>{done(null,{cid,size:node.size,name:part});}],cb);},cb);},(trail,cb)=>updateTree(context,trail,options,cb),({cid},cb)=>updateMfsRoot(context,cid,cb)],error=>{if(error&&error.message.includes('file already exists')&&options.parents){error=null;}callback(error);});};};},1686:function(module,__unusedexports,__webpack_require__){"use strict";var objectKeys=Object.keys||function(obj){var keys=[];for(var key in obj){keys.push(key);}return keys;};module.exports=Duplex;var Readable=__webpack_require__(4541);var Writable=__webpack_require__(1217);__webpack_require__(92)(Duplex,Readable);{var keys=objectKeys(Writable.prototype);for(var v=0;v<keys.length;v++){var method=keys[v];if(!Duplex.prototype[method])Duplex.prototype[method]=Writable.prototype[method];}}function Duplex(options){if(!(this instanceof Duplex))return new Duplex(options);Readable.call(this,options);Writable.call(this,options);this.allowHalfOpen=true;if(options){if(options.readable===false)this.readable=false;if(options.writable===false)this.writable=false;if(options.allowHalfOpen===false){this.allowHalfOpen=false;this.once('end',onend);}}}Object.defineProperty(Duplex.prototype,'writableHighWaterMark',{enumerable:false,get:function get(){return this._writableState.highWaterMark;}});Object.defineProperty(Duplex.prototype,'writableBuffer',{enumerable:false,get:function get(){return this._writableState&&this._writableState.getBuffer();}});Object.defineProperty(Duplex.prototype,'writableLength',{enumerable:false,get:function get(){return this._writableState.length;}});function onend(){if(this._writableState.ended)return;process.nextTick(onEndNT,this);}function onEndNT(self){self.end();}Object.defineProperty(Duplex.prototype,'destroyed',{enumerable:false,get:function get(){if(this._readableState===undefined||this._writableState===undefined){return false;}return this._readableState.destroyed&&this._writableState.destroyed;},set:function set(value){if(this._readableState===undefined||this._writableState===undefined){return;}this._readableState.destroyed=value;this._writableState.destroyed=value;}});},1694:function(module){if(typeof Object.create==='function'){module.exports=function inherits(ctor,superCtor){ctor.super_=superCtor;ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:false,writable:true,configurable:true}});};}else{module.exports=function inherits(ctor,superCtor){ctor.super_=superCtor;var TempCtor=function(){};TempCtor.prototype=superCtor.prototype;ctor.prototype=new TempCtor();ctor.prototype.constructor=ctor;};}},1702:function(__unusedmodule,exports,__webpack_require__){"use strict";var assert=__webpack_require__(809);var inherits=__webpack_require__(92);exports.inherits=inherits;function isSurrogatePair(msg,i){if((msg.charCodeAt(i)&0xFC00)!==0xD800){return false;}if(i<0||i+1>=msg.length){return false;}return(msg.charCodeAt(i+1)&0xFC00)===0xDC00;}function toArray(msg,enc){if(Array.isArray(msg))return msg.slice();if(!msg)return[];var res=[];if(typeof msg==='string'){if(!enc){var p=0;for(var i=0;i<msg.length;i++){var c=msg.charCodeAt(i);if(c<128){res[p++]=c;}else if(c<2048){res[p++]=c>>6|192;res[p++]=c&63|128;}else if(isSurrogatePair(msg,i)){c=0x10000+((c&0x03FF)<<10)+(msg.charCodeAt(++i)&0x03FF);res[p++]=c>>18|240;res[p++]=c>>12&63|128;res[p++]=c>>6&63|128;res[p++]=c&63|128;}else{res[p++]=c>>12|224;res[p++]=c>>6&63|128;res[p++]=c&63|128;}}}else if(enc==='hex'){msg=msg.replace(/[^a-z0-9]+/ig,'');if(msg.length%2!==0)msg='0'+msg;for(i=0;i<msg.length;i+=2)res.push(parseInt(msg[i]+msg[i+1],16));}}else{for(i=0;i<msg.length;i++)res[i]=msg[i]|0;}return res;}exports.toArray=toArray;function toHex(msg){var res='';for(var i=0;i<msg.length;i++)res+=zero2(msg[i].toString(16));return res;}exports.toHex=toHex;function htonl(w){var res=w>>>24|w>>>8&0xff00|w<<8&0xff0000|(w&0xff)<<24;return res>>>0;}exports.htonl=htonl;function toHex32(msg,endian){var res='';for(var i=0;i<msg.length;i++){var w=msg[i];if(endian==='little')w=htonl(w);res+=zero8(w.toString(16));}return res;}exports.toHex32=toHex32;function zero2(word){if(word.length===1)return'0'+word;else return word;}exports.zero2=zero2;function zero8(word){if(word.length===7)return'0'+word;else if(word.length===6)return'00'+word;else if(word.length===5)return'000'+word;else if(word.length===4)return'0000'+word;else if(word.length===3)return'00000'+word;else if(word.length===2)return'000000'+word;else if(word.length===1)return'0000000'+word;else return word;}exports.zero8=zero8;function join32(msg,start,end,endian){var len=end-start;assert(len%4===0);var res=new Array(len/4);for(var i=0,k=start;i<res.length;i++,k+=4){var w;if(endian==='big')w=msg[k]<<24|msg[k+1]<<16|msg[k+2]<<8|msg[k+3];else w=msg[k+3]<<24|msg[k+2]<<16|msg[k+1]<<8|msg[k];res[i]=w>>>0;}return res;}exports.join32=join32;function split32(msg,endian){var res=new Array(msg.length*4);for(var i=0,k=0;i<msg.length;i++,k+=4){var m=msg[i];if(endian==='big'){res[k]=m>>>24;res[k+1]=m>>>16&0xff;res[k+2]=m>>>8&0xff;res[k+3]=m&0xff;}else{res[k+3]=m>>>24;res[k+2]=m>>>16&0xff;res[k+1]=m>>>8&0xff;res[k]=m&0xff;}}return res;}exports.split32=split32;function rotr32(w,b){return w>>>b|w<<32-b;}exports.rotr32=rotr32;function rotl32(w,b){return w<<b|w>>>32-b;}exports.rotl32=rotl32;function sum32(a,b){return a+b>>>0;}exports.sum32=sum32;function sum32_3(a,b,c){return a+b+c>>>0;}exports.sum32_3=sum32_3;function sum32_4(a,b,c,d){return a+b+c+d>>>0;}exports.sum32_4=sum32_4;function sum32_5(a,b,c,d,e){return a+b+c+d+e>>>0;}exports.sum32_5=sum32_5;function sum64(buf,pos,ah,al){var bh=buf[pos];var bl=buf[pos+1];var lo=al+bl>>>0;var hi=(lo<al?1:0)+ah+bh;buf[pos]=hi>>>0;buf[pos+1]=lo;}exports.sum64=sum64;function sum64_hi(ah,al,bh,bl){var lo=al+bl>>>0;var hi=(lo<al?1:0)+ah+bh;return hi>>>0;}exports.sum64_hi=sum64_hi;function sum64_lo(ah,al,bh,bl){var lo=al+bl;return lo>>>0;}exports.sum64_lo=sum64_lo;function sum64_4_hi(ah,al,bh,bl,ch,cl,dh,dl){var carry=0;var lo=al;lo=lo+bl>>>0;carry+=lo<al?1:0;lo=lo+cl>>>0;carry+=lo<cl?1:0;lo=lo+dl>>>0;carry+=lo<dl?1:0;var hi=ah+bh+ch+dh+carry;return hi>>>0;}exports.sum64_4_hi=sum64_4_hi;function sum64_4_lo(ah,al,bh,bl,ch,cl,dh,dl){var lo=al+bl+cl+dl;return lo>>>0;}exports.sum64_4_lo=sum64_4_lo;function sum64_5_hi(ah,al,bh,bl,ch,cl,dh,dl,eh,el){var carry=0;var lo=al;lo=lo+bl>>>0;carry+=lo<al?1:0;lo=lo+cl>>>0;carry+=lo<cl?1:0;lo=lo+dl>>>0;carry+=lo<dl?1:0;lo=lo+el>>>0;carry+=lo<el?1:0;var hi=ah+bh+ch+dh+eh+carry;return hi>>>0;}exports.sum64_5_hi=sum64_5_hi;function sum64_5_lo(ah,al,bh,bl,ch,cl,dh,dl,eh,el){var lo=al+bl+cl+dl+el;return lo>>>0;}exports.sum64_5_lo=sum64_5_lo;function rotr64_hi(ah,al,num){var r=al<<32-num|ah>>>num;return r>>>0;}exports.rotr64_hi=rotr64_hi;function rotr64_lo(ah,al,num){var r=ah<<32-num|al>>>num;return r>>>0;}exports.rotr64_lo=rotr64_lo;function shr64_hi(ah,al,num){return ah>>>num;}exports.shr64_hi=shr64_hi;function shr64_lo(ah,al,num){var r=ah<<32-num|al>>>num;return r>>>0;}exports.shr64_lo=shr64_lo;},1709:function(module){"use strict";const isValidUTF8=buf=>{var len=buf.length;var i=0;while(i<len){if(buf[i]<0x80){i++;}else if((buf[i]&0xe0)===0xc0){if(i+1===len||(buf[i+1]&0xc0)!==0x80||(buf[i]&0xfe)===0xc0){return false;}else{i+=2;}}else if((buf[i]&0xf0)===0xe0){if(i+2>=len||(buf[i+1]&0xc0)!==0x80||(buf[i+2]&0xc0)!==0x80||buf[i]===0xe0&&(buf[i+1]&0xe0)===0x80||buf[i]===0xed&&(buf[i+1]&0xe0)===0xa0){return false;}else{i+=3;}}else if((buf[i]&0xf8)===0xf0){if(i+3>=len||(buf[i+1]&0xc0)!==0x80||(buf[i+2]&0xc0)!==0x80||(buf[i+3]&0xc0)!==0x80||buf[i]===0xf0&&(buf[i+1]&0xf0)===0x80||buf[i]===0xf4&&buf[i+1]>0x8f||buf[i]>0xf4){return false;}else{i+=4;}}else{return false;}}return true;};module.exports=isValidUTF8;},1713:function(module,__unusedexports,__webpack_require__){"use strict";const inherits=__webpack_require__(92);const Buffer=__webpack_require__(9423).Buffer;const asn1=__webpack_require__(3771);const base=asn1.base;const der=asn1.constants.der;function DEREncoder(entity){this.enc='der';this.name=entity.name;this.entity=entity;this.tree=new DERNode();this.tree._init(entity.body);}module.exports=DEREncoder;DEREncoder.prototype.encode=function encode(data,reporter){return this.tree._encode(data,reporter).join();};function DERNode(parent){base.Node.call(this,'der',parent);}inherits(DERNode,base.Node);DERNode.prototype._encodeComposite=function encodeComposite(tag,primitive,cls,content){const encodedTag=encodeTag(tag,primitive,cls,this.reporter);if(content.length<0x80){const header=new Buffer(2);header[0]=encodedTag;header[1]=content.length;return this._createEncoderBuffer([header,content]);}let lenOctets=1;for(let i=content.length;i>=0x100;i>>=8)lenOctets++;const header=new Buffer(1+1+lenOctets);header[0]=encodedTag;header[1]=0x80|lenOctets;for(let i=1+lenOctets,j=content.length;j>0;i--,j>>=8)header[i]=j&0xff;return this._createEncoderBuffer([header,content]);};DERNode.prototype._encodeStr=function encodeStr(str,tag){if(tag==='bitstr'){return this._createEncoderBuffer([str.unused|0,str.data]);}else if(tag==='bmpstr'){const buf=new Buffer(str.length*2);for(let i=0;i<str.length;i++){buf.writeUInt16BE(str.charCodeAt(i),i*2);}return this._createEncoderBuffer(buf);}else if(tag==='numstr'){if(!this._isNumstr(str)){return this.reporter.error('Encoding of string type: numstr supports '+'only digits and space');}return this._createEncoderBuffer(str);}else if(tag==='printstr'){if(!this._isPrintstr(str)){return this.reporter.error('Encoding of string type: printstr supports '+'only latin upper and lower case letters, '+'digits, space, apostrophe, left and rigth '+'parenthesis, plus sign, comma, hyphen, '+'dot, slash, colon, equal sign, '+'question mark');}return this._createEncoderBuffer(str);}else if(/str$/.test(tag)){return this._createEncoderBuffer(str);}else if(tag==='objDesc'){return this._createEncoderBuffer(str);}else{return this.reporter.error('Encoding of string type: '+tag+' unsupported');}};DERNode.prototype._encodeObjid=function encodeObjid(id,values,relative){if(typeof id==='string'){if(!values)return this.reporter.error('string objid given, but no values map found');if(!values.hasOwnProperty(id))return this.reporter.error('objid not found in values map');id=values[id].split(/[\s.]+/g);for(let i=0;i<id.length;i++)id[i]|=0;}else if(Array.isArray(id)){id=id.slice();for(let i=0;i<id.length;i++)id[i]|=0;}if(!Array.isArray(id)){return this.reporter.error('objid() should be either array or string, '+'got: '+JSON.stringify(id));}if(!relative){if(id[1]>=40)return this.reporter.error('Second objid identifier OOB');id.splice(0,2,id[0]*40+id[1]);}let size=0;for(let i=0;i<id.length;i++){let ident=id[i];for(size++;ident>=0x80;ident>>=7)size++;}const objid=new Buffer(size);let offset=objid.length-1;for(let i=id.length-1;i>=0;i--){let ident=id[i];objid[offset--]=ident&0x7f;while((ident>>=7)>0)objid[offset--]=0x80|ident&0x7f;}return this._createEncoderBuffer(objid);};function two(num){if(num<10)return'0'+num;else return num;}DERNode.prototype._encodeTime=function encodeTime(time,tag){let str;const date=new Date(time);if(tag==='gentime'){str=[two(date.getUTCFullYear()),two(date.getUTCMonth()+1),two(date.getUTCDate()),two(date.getUTCHours()),two(date.getUTCMinutes()),two(date.getUTCSeconds()),'Z'].join('');}else if(tag==='utctime'){str=[two(date.getUTCFullYear()%100),two(date.getUTCMonth()+1),two(date.getUTCDate()),two(date.getUTCHours()),two(date.getUTCMinutes()),two(date.getUTCSeconds()),'Z'].join('');}else{this.reporter.error('Encoding '+tag+' time is not supported yet');}return this._encodeStr(str,'octstr');};DERNode.prototype._encodeNull=function encodeNull(){return this._createEncoderBuffer('');};DERNode.prototype._encodeInt=function encodeInt(num,values){if(typeof num==='string'){if(!values)return this.reporter.error('String int or enum given, but no values map');if(!values.hasOwnProperty(num)){return this.reporter.error('Values map doesn\'t contain: '+JSON.stringify(num));}num=values[num];}if(typeof num!=='number'&&!Buffer.isBuffer(num)){const numArray=num.toArray();if(!num.sign&&numArray[0]&0x80){numArray.unshift(0);}num=new Buffer(numArray);}if(Buffer.isBuffer(num)){let size=num.length;if(num.length===0)size++;const out=new Buffer(size);num.copy(out);if(num.length===0)out[0]=0;return this._createEncoderBuffer(out);}if(num<0x80)return this._createEncoderBuffer(num);if(num<0x100)return this._createEncoderBuffer([0,num]);let size=1;for(let i=num;i>=0x100;i>>=8)size++;const out=new Array(size);for(let i=out.length-1;i>=0;i--){out[i]=num&0xff;num>>=8;}if(out[0]&0x80){out.unshift(0);}return this._createEncoderBuffer(new Buffer(out));};DERNode.prototype._encodeBool=function encodeBool(value){return this._createEncoderBuffer(value?0xff:0);};DERNode.prototype._use=function use(entity,obj){if(typeof entity==='function')entity=entity(obj);return entity._getEncoder('der').tree;};DERNode.prototype._skipDefault=function skipDefault(dataBuffer,reporter,parent){const state=this._baseState;let i;if(state['default']===null)return false;const data=dataBuffer.join();if(state.defaultBuffer===undefined)state.defaultBuffer=this._encodeValue(state['default'],reporter,parent).join();if(data.length!==state.defaultBuffer.length)return false;for(i=0;i<data.length;i++)if(data[i]!==state.defaultBuffer[i])return false;return true;};function encodeTag(tag,primitive,cls,reporter){let res;if(tag==='seqof')tag='seq';else if(tag==='setof')tag='set';if(der.tagByName.hasOwnProperty(tag))res=der.tagByName[tag];else if(typeof tag==='number'&&(tag|0)===tag)res=tag;else return reporter.error('Unknown tag: '+tag);if(res>=0x1f)return reporter.error('Multi-octet tag encoding unsupported');if(!primitive)res|=0x20;res|=der.tagClassByName[cls||'universal']<<6;return res;}},1729:function(__unusedmodule,exports,__webpack_require__){"use strict";const Hoek=__webpack_require__(2850);const Language=__webpack_require__(6393);const internals={annotations:Symbol('joi-annotations')};internals.stringify=function(value,wrapArrays){const type=typeof value;if(value===null){return'null';}if(type==='string'){return value;}if(value instanceof exports.Err||type==='function'||type==='symbol'){return value.toString();}if(type==='object'){if(Array.isArray(value)){let partial='';for(let i=0;i<value.length;++i){partial=partial+(partial.length?', ':'')+internals.stringify(value[i],wrapArrays);}return wrapArrays?'['+partial+']':partial;}return value.toString();}return JSON.stringify(value);};exports.Err=class{constructor(type,context,state,options,flags,message,template){this.isJoi=true;this.type=type;this.context=context||{};this.context.key=state.path[state.path.length-1];this.context.label=state.key;this.path=state.path;this.options=options;this.flags=flags;this.message=message;this.template=template;const localized=this.options.language;if(this.flags.label){this.context.label=this.flags.label;}else if(localized&&(this.context.label===''||this.context.label===null)){this.context.label=localized.root||Language.errors.root;}}toString(){if(this.message){return this.message;}let format;if(this.template){format=this.template;}const localized=this.options.language;format=format||Hoek.reach(localized,this.type)||Hoek.reach(Language.errors,this.type);if(format===undefined){return`Error code "${this.type}" is not defined, your custom type is missing the correct language definition`;}let wrapArrays=Hoek.reach(localized,'messages.wrapArrays');if(typeof wrapArrays!=='boolean'){wrapArrays=Language.errors.messages.wrapArrays;}if(format===null){const childrenString=internals.stringify(this.context.reason,wrapArrays);if(wrapArrays){return childrenString.slice(1,-1);}return childrenString;}const hasKey=/{{!?label}}/.test(format);const skipKey=format.length>2&&format[0]==='!'&&format[1]==='!';if(skipKey){format=format.slice(2);}if(!hasKey&&!skipKey){const localizedKey=Hoek.reach(localized,'key');if(typeof localizedKey==='string'){format=localizedKey+format;}else{format=Hoek.reach(Language.errors,'key')+format;}}const message=format.replace(/{{(!?)([^}]+)}}/g,($0,isSecure,name)=>{const value=Hoek.reach(this.context,name);const normalized=internals.stringify(value,wrapArrays);return isSecure&&this.options.escapeHtml?Hoek.escapeHtml(normalized):normalized;});this.toString=()=>message;return message;}};exports.create=function(type,context,state,options,flags,message,template){return new exports.Err(type,context,state,options,flags,message,template);};exports.process=function(errors,object){if(!errors){return null;}let message='';const details=[];const processErrors=function(localErrors,parent,overrideMessage){for(let i=0;i<localErrors.length;++i){const item=localErrors[i];if(item instanceof Error){return item;}if(item.flags.error&&typeof item.flags.error!=='function'){if(!item.flags.selfError||!item.context.reason){return item.flags.error;}}let itemMessage;if(parent===undefined){itemMessage=item.toString();message=message+(message?'. ':'')+itemMessage;}if(item.context.reason){const override=processErrors(item.context.reason,item.path,item.type==='override'?item.message:null);if(override){return override;}}else{details.push({message:overrideMessage||itemMessage||item.toString(),path:item.path,type:item.type,context:item.context});}}};const override=processErrors(errors);if(override){return override;}const error=new Error(message);error.isJoi=true;error.name='ValidationError';error.details=details;error._object=object;error.annotate=internals.annotate;return error;};internals.safeStringify=function(obj,spaces){return JSON.stringify(obj,internals.serializer(),spaces);};internals.serializer=function(){const keys=[];const stack=[];const cycleReplacer=(key,value)=>{if(stack[0]===value){return'[Circular ~]';}return'[Circular ~.'+keys.slice(0,stack.indexOf(value)).join('.')+']';};return function(key,value){if(stack.length>0){const thisPos=stack.indexOf(this);if(~thisPos){stack.length=thisPos+1;keys.length=thisPos+1;keys[thisPos]=key;}else{stack.push(this);keys.push(key);}if(~stack.indexOf(value)){value=cycleReplacer.call(this,key,value);}}else{stack.push(value);}if(value){const annotations=value[internals.annotations];if(annotations){if(Array.isArray(value)){const annotated=[];for(let i=0;i<value.length;++i){if(annotations.errors[i]){annotated.push(`_$idx$_${annotations.errors[i].sort().join(', ')}_$end$_`);}annotated.push(value[i]);}value=annotated;}else{const errorKeys=Object.keys(annotations.errors);for(let i=0;i<errorKeys.length;++i){const errorKey=errorKeys[i];value[`${errorKey}_$key$_${annotations.errors[errorKey].sort().join(', ')}_$end$_`]=value[errorKey];value[errorKey]=undefined;}const missingKeys=Object.keys(annotations.missing);for(let i=0;i<missingKeys.length;++i){const missingKey=missingKeys[i];value[`_$miss$_${missingKey}|${annotations.missing[missingKey]}_$end$_`]='__missing__';}}return value;}}if(value===Infinity||value===-Infinity||Number.isNaN(value)||typeof value==='function'||typeof value==='symbol'){return'['+value.toString()+']';}return value;};};internals.annotate=function(stripColorCodes){const redFgEscape=stripColorCodes?'':'\u001b[31m';const redBgEscape=stripColorCodes?'':'\u001b[41m';const endColor=stripColorCodes?'':'\u001b[0m';if(typeof this._object!=='object'){return this.details[0].message;}const obj=Hoek.clone(this._object||{});for(let i=this.details.length-1;i>=0;--i){const pos=i+1;const error=this.details[i];const path=error.path;let ref=obj;for(let j=0;;++j){const seg=path[j];if(ref.isImmutable){ref=ref.clone();}if(j+1<path.length&&ref[seg]&&typeof ref[seg]!=='string'){ref=ref[seg];}else{const refAnnotations=ref[internals.annotations]=ref[internals.annotations]||{errors:{},missing:{}};const value=ref[seg];const cacheKey=seg||error.context.label;if(value!==undefined){refAnnotations.errors[cacheKey]=refAnnotations.errors[cacheKey]||[];refAnnotations.errors[cacheKey].push(pos);}else{refAnnotations.missing[cacheKey]=pos;}break;}}}const replacers={key:/_\$key\$_([, \d]+)_\$end\$_"/g,missing:/"_\$miss\$_([^|]+)\|(\d+)_\$end\$_": "__missing__"/g,arrayIndex:/\s*"_\$idx\$_([, \d]+)_\$end\$_",?\n(.*)/g,specials:/"\[(NaN|Symbol.*|-?Infinity|function.*|\(.*)]"/g};let message=internals.safeStringify(obj,2).replace(replacers.key,($0,$1)=>`" ${redFgEscape}[${$1}]${endColor}`).replace(replacers.missing,($0,$1,$2)=>`${redBgEscape}"${$1}"${endColor}${redFgEscape} [${$2}]: -- missing --${endColor}`).replace(replacers.arrayIndex,($0,$1,$2)=>`\n${$2} ${redFgEscape}[${$1}]${endColor}`).replace(replacers.specials,($0,$1)=>$1);message=`${message}\n${redFgEscape}`;for(let i=0;i<this.details.length;++i){const pos=i+1;message=`${message}\n[${pos}] ${this.details[i].message}`;}message=message+endColor;return message;};},1734:function(module,__unusedexports,__webpack_require__){"use strict";const http=__webpack_require__(3853);const https=__webpack_require__(2307);const{URL}=__webpack_require__(774);const debug=__webpack_require__(746);const setImmediate=__webpack_require__(7368);const log=debug('jsipfs:preload');log.error=debug('jsipfs:preload:error');module.exports=function preload(url,callback){log(url);try{url=new URL(url);}catch(err){return setImmediate(()=>callback(err));}const transport=url.protocol==='https:'?https:http;const req=transport.get({hostname:url.hostname,port:url.port,path:url.pathname+url.search},res=>{if(res.statusCode<200||res.statusCode>=300){res.resume();log.error('failed to preload',url.href,res.statusCode,res.statusMessage);return callback(new Error(`failed to preload ${url}`));}res.on('data',chunk=>log(`data ${chunk}`));res.on('abort',()=>{callback(new Error('request aborted'));});res.on('error',err=>{log.error('response error preloading',url.href,err);callback(err);});res.on('end',()=>{if(!res.aborted)callback();});});req.on('error',err=>{log.error('request error preloading',url.href,err);callback(err);});return{cancel:()=>{req.abort();}};};},1746:function(module){var s=1000;var m=s*60;var h=m*60;var d=h*24;var y=d*365.25;module.exports=function(val,options){options=options||{};var type=typeof val;if(type==='string'&&val.length>0){return parse(val);}else if(type==='number'&&isNaN(val)===false){return options.long?fmtLong(val):fmtShort(val);}throw new Error('val is not a non-empty string or a valid number. val='+JSON.stringify(val));};function parse(str){str=String(str);if(str.length>100){return;}var match=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(str);if(!match){return;}var n=parseFloat(match[1]);var type=(match[2]||'ms').toLowerCase();switch(type){case'years':case'year':case'yrs':case'yr':case'y':return n*y;case'days':case'day':case'd':return n*d;case'hours':case'hour':case'hrs':case'hr':case'h':return n*h;case'minutes':case'minute':case'mins':case'min':case'm':return n*m;case'seconds':case'second':case'secs':case'sec':case's':return n*s;case'milliseconds':case'millisecond':case'msecs':case'msec':case'ms':return n;default:return undefined;}}function fmtShort(ms){if(ms>=d){return Math.round(ms/d)+'d';}if(ms>=h){return Math.round(ms/h)+'h';}if(ms>=m){return Math.round(ms/m)+'m';}if(ms>=s){return Math.round(ms/s)+'s';}return ms+'ms';}function fmtLong(ms){return plural(ms,d,'day')||plural(ms,h,'hour')||plural(ms,m,'minute')||plural(ms,s,'second')||ms+' ms';}function plural(ms,n,name){if(ms<n){return;}if(ms<n*1.5){return Math.floor(ms/n)+' '+name;}return Math.ceil(ms/n)+' '+name+'s';}},1749:function(module,__unusedexports,__webpack_require__){"use strict";const promisify=__webpack_require__(6955);const isIpfs=__webpack_require__(7129);const setImmediate=__webpack_require__(7368);const doUntil=__webpack_require__(4012);const CID=__webpack_require__(9339);const{cidToString}=__webpack_require__(9700);module.exports=self=>{return promisify((name,opts,cb)=>{if(typeof opts==='function'){cb=opts;opts={};}opts=opts||{};if(!isIpfs.path(name)){return setImmediate(()=>cb(new Error('invalid argument')));}if(!isIpfs.ipfsPath(name)){return setImmediate(()=>cb(new Error('resolve non-IPFS names is not implemented')));}const split=name.split('/');const cid=new CID(split[2]);if(split.length===3){return setImmediate(()=>cb(null,`/ipfs/${cidToString(cid,{base:opts.cidBase})}`));}const path=split.slice(3).join('/');resolve(cid,path,(err,cid)=>{if(err)return cb(err);if(!cid)return cb(new Error('found non-link at given path'));cb(null,`/ipfs/${cidToString(cid,{base:opts.cidBase})}`);});});function resolve(cid,path,callback){let value;doUntil(cb=>{self.block.get(cid,(err,block)=>{if(err)return cb(err);const r=self._ipld.resolvers[cid.codec];if(!r){return cb(new Error(`No resolver found for codec "${cid.codec}"`));}r.resolver.resolve(block.data,path,(err,result)=>{if(err)return cb(err);value=result.value;path=result.remainderPath;cb();});});},()=>{const endReached=!path||path==='/';if(endReached){return true;}if(value){cid=new CID(value['/']);}return false;},err=>{if(err)return callback(err);if(value&&value['/'])return callback(null,new CID(value['/']));callback();});}};},1756:function(module,__unusedexports,__webpack_require__){var util=__webpack_require__(649);var AbstractLevelDOWN=__webpack_require__(8324).AbstractLevelDOWN;var DeferredIterator=__webpack_require__(1332);var deferrables='put get del batch'.split(' ');function DeferredLevelDOWN(db){AbstractLevelDOWN.call(this,'');this._db=db;this._operations=[];this._iterators=[];closed(this);}util.inherits(DeferredLevelDOWN,AbstractLevelDOWN);DeferredLevelDOWN.prototype._open=function(options,callback){var self=this;this._db.open(options,function(err){if(err)return callback(err);self._operations.forEach(function(op){self._db[op.method].apply(self._db,op.args);});self._operations=[];self._iterators.forEach(function(it){it.setDb(self._db);});self._iterators=[];open(self);callback();});};DeferredLevelDOWN.prototype._close=function(callback){var self=this;this._db.close(function(err){if(err)return callback(err);closed(self);callback();});};function open(self){deferrables.concat('iterator').forEach(function(m){self['_'+m]=function(){return this._db[m].apply(this._db,arguments);};});if(self._db.approximateSize){self.approximateSize=function(){return this._db.approximateSize.apply(this._db,arguments);};}}function closed(self){deferrables.forEach(function(m){self['_'+m]=function(){this._operations.push({method:m,args:arguments});};});if(typeof self._db.approximateSize==='function'){self.approximateSize=function(){this._operations.push({method:'approximateSize',args:arguments});};}self._iterator=function(options){var it=new DeferredIterator(options);this._iterators.push(it);return it;};}DeferredLevelDOWN.prototype._serializeKey=function(key){return key;};DeferredLevelDOWN.prototype._serializeValue=function(value){return value;};module.exports=DeferredLevelDOWN;module.exports.DeferredIterator=DeferredIterator;},1758:function(module,exports,__webpack_require__){"use strict";const assert=__webpack_require__(3930);const withIs=__webpack_require__(3171);class DAGNode{constructor(data,links,serializedSize){if(serializedSize!==0){assert(serializedSize,'A DAGNode requires it\'s serialized size');}this._data=data||Buffer.alloc(0);this._links=links||[];this._serializedSize=serializedSize;}toJSON(){if(!this._json){this._json=Object.freeze({data:this.data,links:this.links.map(l=>l.toJSON()),size:this.size});}return Object.assign({},this._json);}toString(){return`DAGNode <data: "${this.data.toString('base64')}", links: ${this.links.length}, size: ${this.size}>`;}get data(){return this._data;}set data(data){throw new Error("Can't set property: 'data' is immutable");}get links(){return this._links;}set links(links){throw new Error("Can't set property: 'links' is immutable");}get size(){if(this._size===undefined){this._size=this.links.reduce((sum,l)=>sum+l.size,this._serializedSize);}return this._size;}set size(size){throw new Error("Can't set property: 'size' is immutable");}}exports=module.exports=withIs(DAGNode,{className:'DAGNode',symbolName:'@ipld/js-ipld-dag-pb/dagnode'});exports.create=__webpack_require__(3426);exports.clone=__webpack_require__(7055);exports.addLink=__webpack_require__(2181);exports.rmLink=__webpack_require__(8364);},1764:function(module,__unusedexports,__webpack_require__){"use strict";const through=__webpack_require__(300);const countStreamBytes=callback=>{let bytesRead=0;return through(buffer=>{bytesRead+=buffer.length;return buffer;},()=>{callback(bytesRead);});};module.exports=countStreamBytes;},1776:function(module,exports,__webpack_require__){"use strict";const BlockService=__webpack_require__(4103);const Ipld=__webpack_require__(4630);const PeerId=__webpack_require__(1832);const PeerInfo=__webpack_require__(9265);const crypto=__webpack_require__(318);const isIPFS=__webpack_require__(7129);const multiaddr=__webpack_require__(5920);const multihash=__webpack_require__(8757);const PeerBook=__webpack_require__(5020);const multibase=__webpack_require__(1849);const CID=__webpack_require__(9339);const debug=__webpack_require__(746);const defaultsDeep=__webpack_require__(2500);const EventEmitter=__webpack_require__(4859);const config=__webpack_require__(4287);const boot=__webpack_require__(1428);const components=__webpack_require__(9388);const defaultRepo=__webpack_require__(6067);const preload=__webpack_require__(1355);const mfsPreload=__webpack_require__(7741);const IpldFormats={get'bitcoin-block'(){return __webpack_require__(8759);},get'eth-account-snapshot'(){return __webpack_require__(7891).ethAccountSnapshot;},get'eth-block'(){return __webpack_require__(7891).ethBlock;},get'eth-block-list'(){return __webpack_require__(7891).ethBlockList;},get'eth-state-trie'(){return __webpack_require__(7891).ethStateTrie;},get'eth-storage-trie'(){return __webpack_require__(7891).ethStorageTrie;},get'eth-tx'(){return __webpack_require__(7891).ethTx;},get'eth-tx-trie'(){return __webpack_require__(7891).ethTxTrie;},get'git-raw'(){return __webpack_require__(6687);},get'zcash-block'(){return __webpack_require__(5568);}};class IPFS extends EventEmitter{constructor(options){super();const defaults={init:true,start:true,EXPERIMENTAL:{},preload:{enabled:true,addresses:['/dnsaddr/node0.preload.ipfs.io/https','/dnsaddr/node1.preload.ipfs.io/https']}};options=config.validate(options||{});this._options=defaultsDeep(options,defaults);if(options.init===false){this._options.init=false;}if(!(options.start===false)){this._options.start=true;}if(typeof options.repo==='string'||options.repo===undefined){this._repo=defaultRepo(options.repo);}else{this._repo=options.repo;}this.log=debug('jsipfs');this.log.err=debug('jsipfs:err');this.types={Buffer:Buffer,PeerId:PeerId,PeerInfo:PeerInfo,multiaddr:multiaddr,multibase:multibase,multihash:multihash,CID:CID};this._peerInfoBook=new PeerBook();this._peerInfo=undefined;this._bitswap=undefined;this._blockService=new BlockService(this._repo);this._ipld=new Ipld({blockService:this._blockService,loadFormat:(codec,callback)=>{this.log('Loading IPLD format',codec);if(IpldFormats[codec])return callback(null,IpldFormats[codec]);callback(new Error(`Missing IPLD format "${codec}"`));}});this._preload=preload(this);this._mfsPreload=mfsPreload(this);this._ipns=undefined;this._print=this._options.silent?this.log:console.log;this.init=components.init(this);this.preStart=components.preStart(this);this.start=components.start(this);this.stop=components.stop(this);this.shutdown=this.stop;this.isOnline=components.isOnline(this);Object.assign(this,components.filesRegular(this));this.version=components.version(this);this.id=components.id(this);this.repo=components.repo(this);this.bootstrap=components.bootstrap(this);this.config=components.config(this);this.block=components.block(this);this.object=components.object(this);this.dag=components.dag(this);this.files=components.filesMFS(this);this.libp2p=null;this.swarm=components.swarm(this);this.name=components.name(this);this.bitswap=components.bitswap(this);this.pin=components.pin(this);this.ping=components.ping(this);this.pingPullStream=components.pingPullStream(this);this.pingReadableStream=components.pingReadableStream(this);this.pubsub=components.pubsub(this);this.dht=components.dht(this);this.dns=components.dns(this);this.key=components.key(this);this.stats=components.stats(this);this.resolve=components.resolve(this);if(this._options.EXPERIMENTAL.pubsub){this.log('EXPERIMENTAL pubsub is enabled');}if(this._options.EXPERIMENTAL.ipnsPubsub){if(!this._options.EXPERIMENTAL.pubsub){this.log('EXPERIMENTAL pubsub is enabled to use IPNS pubsub');this._options.EXPERIMENTAL.pubsub=true;}this.log('EXPERIMENTAL IPNS pubsub is enabled');}if(this._options.EXPERIMENTAL.sharding){this.log('EXPERIMENTAL sharding is enabled');}if(this._options.EXPERIMENTAL.dht){this.log('EXPERIMENTAL Kademlia DHT is enabled');}this.state=__webpack_require__(5593)(this);this.util={crypto,isIPFS};boot(this);}}exports=module.exports=IPFS;exports.createNode=options=>{return new IPFS(options);};},1796:function(module,__unusedexports,__webpack_require__){var transports=__webpack_require__(1558);var Emitter=__webpack_require__(3649);var debug=__webpack_require__(3114)('engine.io-client:socket');var index=__webpack_require__(6628);var parser=__webpack_require__(5410);var parseuri=__webpack_require__(1400);var parseqs=__webpack_require__(2887);module.exports=Socket;function Socket(uri,opts){if(!(this instanceof Socket))return new Socket(uri,opts);opts=opts||{};if(uri&&'object'===typeof uri){opts=uri;uri=null;}if(uri){uri=parseuri(uri);opts.hostname=uri.host;opts.secure=uri.protocol==='https'||uri.protocol==='wss';opts.port=uri.port;if(uri.query)opts.query=uri.query;}else if(opts.host){opts.hostname=parseuri(opts.host).host;}this.secure=null!=opts.secure?opts.secure:typeof location!=='undefined'&&'https:'===location.protocol;if(opts.hostname&&!opts.port){opts.port=this.secure?'443':'80';}this.agent=opts.agent||false;this.hostname=opts.hostname||(typeof location!=='undefined'?location.hostname:'localhost');this.port=opts.port||(typeof location!=='undefined'&&location.port?location.port:this.secure?443:80);this.query=opts.query||{};if('string'===typeof this.query)this.query=parseqs.decode(this.query);this.upgrade=false!==opts.upgrade;this.path=(opts.path||'/engine.io').replace(/\/$/,'')+'/';this.forceJSONP=!!opts.forceJSONP;this.jsonp=false!==opts.jsonp;this.forceBase64=!!opts.forceBase64;this.enablesXDR=!!opts.enablesXDR;this.timestampParam=opts.timestampParam||'t';this.timestampRequests=opts.timestampRequests;this.transports=opts.transports||['polling','websocket'];this.transportOptions=opts.transportOptions||{};this.readyState='';this.writeBuffer=[];this.prevBufferLen=0;this.policyPort=opts.policyPort||843;this.rememberUpgrade=opts.rememberUpgrade||false;this.binaryType=null;this.onlyBinaryUpgrades=opts.onlyBinaryUpgrades;this.perMessageDeflate=false!==opts.perMessageDeflate?opts.perMessageDeflate||{}:false;if(true===this.perMessageDeflate)this.perMessageDeflate={};if(this.perMessageDeflate&&null==this.perMessageDeflate.threshold){this.perMessageDeflate.threshold=1024;}this.pfx=opts.pfx||null;this.key=opts.key||null;this.passphrase=opts.passphrase||null;this.cert=opts.cert||null;this.ca=opts.ca||null;this.ciphers=opts.ciphers||null;this.rejectUnauthorized=opts.rejectUnauthorized===undefined?true:opts.rejectUnauthorized;this.forceNode=!!opts.forceNode;this.isReactNative=typeof navigator!=='undefined'&&typeof navigator.product==='string'&&navigator.product.toLowerCase()==='reactnative';if(typeof self==='undefined'||this.isReactNative){if(opts.extraHeaders&&Object.keys(opts.extraHeaders).length>0){this.extraHeaders=opts.extraHeaders;}if(opts.localAddress){this.localAddress=opts.localAddress;}}this.id=null;this.upgrades=null;this.pingInterval=null;this.pingTimeout=null;this.pingIntervalTimer=null;this.pingTimeoutTimer=null;this.open();}Socket.priorWebsocketSuccess=false;Emitter(Socket.prototype);Socket.protocol=parser.protocol;Socket.Socket=Socket;Socket.Transport=__webpack_require__(4910);Socket.transports=__webpack_require__(1558);Socket.parser=__webpack_require__(5410);Socket.prototype.createTransport=function(name){debug('creating transport "%s"',name);var query=clone(this.query);query.EIO=parser.protocol;query.transport=name;var options=this.transportOptions[name]||{};if(this.id)query.sid=this.id;var transport=new transports[name]({query:query,socket:this,agent:options.agent||this.agent,hostname:options.hostname||this.hostname,port:options.port||this.port,secure:options.secure||this.secure,path:options.path||this.path,forceJSONP:options.forceJSONP||this.forceJSONP,jsonp:options.jsonp||this.jsonp,forceBase64:options.forceBase64||this.forceBase64,enablesXDR:options.enablesXDR||this.enablesXDR,timestampRequests:options.timestampRequests||this.timestampRequests,timestampParam:options.timestampParam||this.timestampParam,policyPort:options.policyPort||this.policyPort,pfx:options.pfx||this.pfx,key:options.key||this.key,passphrase:options.passphrase||this.passphrase,cert:options.cert||this.cert,ca:options.ca||this.ca,ciphers:options.ciphers||this.ciphers,rejectUnauthorized:options.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:options.perMessageDeflate||this.perMessageDeflate,extraHeaders:options.extraHeaders||this.extraHeaders,forceNode:options.forceNode||this.forceNode,localAddress:options.localAddress||this.localAddress,requestTimeout:options.requestTimeout||this.requestTimeout,protocols:options.protocols||void 0,isReactNative:this.isReactNative});return transport;};function clone(obj){var o={};for(var i in obj){if(obj.hasOwnProperty(i)){o[i]=obj[i];}}return o;}Socket.prototype.open=function(){var transport;if(this.rememberUpgrade&&Socket.priorWebsocketSuccess&&this.transports.indexOf('websocket')!==-1){transport='websocket';}else if(0===this.transports.length){var self=this;setTimeout(function(){self.emit('error','No transports available');},0);return;}else{transport=this.transports[0];}this.readyState='opening';try{transport=this.createTransport(transport);}catch(e){this.transports.shift();this.open();return;}transport.open();this.setTransport(transport);};Socket.prototype.setTransport=function(transport){debug('setting transport %s',transport.name);var self=this;if(this.transport){debug('clearing existing transport %s',this.transport.name);this.transport.removeAllListeners();}this.transport=transport;transport.on('drain',function(){self.onDrain();}).on('packet',function(packet){self.onPacket(packet);}).on('error',function(e){self.onError(e);}).on('close',function(){self.onClose('transport close');});};Socket.prototype.probe=function(name){debug('probing transport "%s"',name);var transport=this.createTransport(name,{probe:1});var failed=false;var self=this;Socket.priorWebsocketSuccess=false;function onTransportOpen(){if(self.onlyBinaryUpgrades){var upgradeLosesBinary=!this.supportsBinary&&self.transport.supportsBinary;failed=failed||upgradeLosesBinary;}if(failed)return;debug('probe transport "%s" opened',name);transport.send([{type:'ping',data:'probe'}]);transport.once('packet',function(msg){if(failed)return;if('pong'===msg.type&&'probe'===msg.data){debug('probe transport "%s" pong',name);self.upgrading=true;self.emit('upgrading',transport);if(!transport)return;Socket.priorWebsocketSuccess='websocket'===transport.name;debug('pausing current transport "%s"',self.transport.name);self.transport.pause(function(){if(failed)return;if('closed'===self.readyState)return;debug('changing transport and sending upgrade packet');cleanup();self.setTransport(transport);transport.send([{type:'upgrade'}]);self.emit('upgrade',transport);transport=null;self.upgrading=false;self.flush();});}else{debug('probe transport "%s" failed',name);var err=new Error('probe error');err.transport=transport.name;self.emit('upgradeError',err);}});}function freezeTransport(){if(failed)return;failed=true;cleanup();transport.close();transport=null;}function onerror(err){var error=new Error('probe error: '+err);error.transport=transport.name;freezeTransport();debug('probe transport "%s" failed because of error: %s',name,err);self.emit('upgradeError',error);}function onTransportClose(){onerror('transport closed');}function onclose(){onerror('socket closed');}function onupgrade(to){if(transport&&to.name!==transport.name){debug('"%s" works - aborting "%s"',to.name,transport.name);freezeTransport();}}function cleanup(){transport.removeListener('open',onTransportOpen);transport.removeListener('error',onerror);transport.removeListener('close',onTransportClose);self.removeListener('close',onclose);self.removeListener('upgrading',onupgrade);}transport.once('open',onTransportOpen);transport.once('error',onerror);transport.once('close',onTransportClose);this.once('close',onclose);this.once('upgrading',onupgrade);transport.open();};Socket.prototype.onOpen=function(){debug('socket open');this.readyState='open';Socket.priorWebsocketSuccess='websocket'===this.transport.name;this.emit('open');this.flush();if('open'===this.readyState&&this.upgrade&&this.transport.pause){debug('starting upgrade probes');for(var i=0,l=this.upgrades.length;i<l;i++){this.probe(this.upgrades[i]);}}};Socket.prototype.onPacket=function(packet){if('opening'===this.readyState||'open'===this.readyState||'closing'===this.readyState){debug('socket receive: type "%s", data "%s"',packet.type,packet.data);this.emit('packet',packet);this.emit('heartbeat');switch(packet.type){case'open':this.onHandshake(JSON.parse(packet.data));break;case'pong':this.setPing();this.emit('pong');break;case'error':var err=new Error('server error');err.code=packet.data;this.onError(err);break;case'message':this.emit('data',packet.data);this.emit('message',packet.data);break;}}else{debug('packet received with socket readyState "%s"',this.readyState);}};Socket.prototype.onHandshake=function(data){this.emit('handshake',data);this.id=data.sid;this.transport.query.sid=data.sid;this.upgrades=this.filterUpgrades(data.upgrades);this.pingInterval=data.pingInterval;this.pingTimeout=data.pingTimeout;this.onOpen();if('closed'===this.readyState)return;this.setPing();this.removeListener('heartbeat',this.onHeartbeat);this.on('heartbeat',this.onHeartbeat);};Socket.prototype.onHeartbeat=function(timeout){clearTimeout(this.pingTimeoutTimer);var self=this;self.pingTimeoutTimer=setTimeout(function(){if('closed'===self.readyState)return;self.onClose('ping timeout');},timeout||self.pingInterval+self.pingTimeout);};Socket.prototype.setPing=function(){var self=this;clearTimeout(self.pingIntervalTimer);self.pingIntervalTimer=setTimeout(function(){debug('writing ping packet - expecting pong within %sms',self.pingTimeout);self.ping();self.onHeartbeat(self.pingTimeout);},self.pingInterval);};Socket.prototype.ping=function(){var self=this;this.sendPacket('ping',function(){self.emit('ping');});};Socket.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen);this.prevBufferLen=0;if(0===this.writeBuffer.length){this.emit('drain');}else{this.flush();}};Socket.prototype.flush=function(){if('closed'!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){debug('flushing %d packets in socket',this.writeBuffer.length);this.transport.send(this.writeBuffer);this.prevBufferLen=this.writeBuffer.length;this.emit('flush');}};Socket.prototype.write=Socket.prototype.send=function(msg,options,fn){this.sendPacket('message',msg,options,fn);return this;};Socket.prototype.sendPacket=function(type,data,options,fn){if('function'===typeof data){fn=data;data=undefined;}if('function'===typeof options){fn=options;options=null;}if('closing'===this.readyState||'closed'===this.readyState){return;}options=options||{};options.compress=false!==options.compress;var packet={type:type,data:data,options:options};this.emit('packetCreate',packet);this.writeBuffer.push(packet);if(fn)this.once('flush',fn);this.flush();};Socket.prototype.close=function(){if('opening'===this.readyState||'open'===this.readyState){this.readyState='closing';var self=this;if(this.writeBuffer.length){this.once('drain',function(){if(this.upgrading){waitForUpgrade();}else{close();}});}else if(this.upgrading){waitForUpgrade();}else{close();}}function close(){self.onClose('forced close');debug('socket closing - telling transport to close');self.transport.close();}function cleanupAndClose(){self.removeListener('upgrade',cleanupAndClose);self.removeListener('upgradeError',cleanupAndClose);close();}function waitForUpgrade(){self.once('upgrade',cleanupAndClose);self.once('upgradeError',cleanupAndClose);}return this;};Socket.prototype.onError=function(err){debug('socket error %j',err);Socket.priorWebsocketSuccess=false;this.emit('error',err);this.onClose('transport error',err);};Socket.prototype.onClose=function(reason,desc){if('opening'===this.readyState||'open'===this.readyState||'closing'===this.readyState){debug('socket close with reason: "%s"',reason);var self=this;clearTimeout(this.pingIntervalTimer);clearTimeout(this.pingTimeoutTimer);this.transport.removeAllListeners('close');this.transport.close();this.transport.removeAllListeners();this.readyState='closed';this.id=null;this.emit('close',reason,desc);self.writeBuffer=[];self.prevBufferLen=0;}};Socket.prototype.filterUpgrades=function(upgrades){var filteredUpgrades=[];for(var i=0,j=upgrades.length;i<j;i++){if(~index(this.transports,upgrades[i]))filteredUpgrades.push(upgrades[i]);}return filteredUpgrades;};},1809:function(module,exports,__webpack_require__){module=__webpack_require__.nmd(module);var freeGlobal=__webpack_require__(4879);var freeExports=true&&exports&&!exports.nodeType&&exports;var freeModule=freeExports&&"object"=='object'&&module&&!module.nodeType&&module;var moduleExports=freeModule&&freeModule.exports===freeExports;var freeProcess=moduleExports&&freeGlobal.process;var nodeUtil=function(){try{var types=freeModule&&freeModule.require&&freeModule.require('util').types;if(types){return types;}return freeProcess&&freeProcess.binding&&freeProcess.binding('util');}catch(e){}}();module.exports=nodeUtil;},1816:function(module){"use strict";function Queue(options){if(!(this instanceof Queue)){return new Queue(options);}options=options||{};this.concurrency=options.concurrency||Infinity;this.pending=0;this.jobs=[];this.cbs=[];this._done=done.bind(this);}var arrayAddMethods=['push','unshift','splice'];arrayAddMethods.forEach(function(method){Queue.prototype[method]=function(){var methodResult=Array.prototype[method].apply(this.jobs,arguments);this._run();return methodResult;};});Object.defineProperty(Queue.prototype,'length',{get:function(){return this.pending+this.jobs.length;}});Queue.prototype._run=function(){if(this.pending===this.concurrency){return;}if(this.jobs.length){var job=this.jobs.shift();this.pending++;job(this._done);this._run();}if(this.pending===0){while(this.cbs.length!==0){var cb=this.cbs.pop();process.nextTick(cb);}}};Queue.prototype.onDone=function(cb){if(typeof cb==='function'){this.cbs.push(cb);this._run();}};function done(){this.pending--;this._run();}module.exports=Queue;},1817:function(__unusedmodule,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.hardforks=[['chainstart',__webpack_require__(5817)],['homestead',__webpack_require__(5664)],['dao',__webpack_require__(8395)],['tangerineWhistle',__webpack_require__(3284)],['spuriousDragon',__webpack_require__(8509)],['byzantium',__webpack_require__(4727)],['constantinople',__webpack_require__(6740)],['petersburg',__webpack_require__(7837)]];},1832:function(module,exports,__webpack_require__){"use strict";const mh=__webpack_require__(8757);const cryptoKeys=__webpack_require__(9480);const assert=__webpack_require__(3930);const waterfall=__webpack_require__(4265);const withIs=__webpack_require__(3171);class PeerId{constructor(id,privKey,pubKey){assert(Buffer.isBuffer(id),'invalid id provided');if(privKey&&pubKey){assert(privKey.public.bytes.equals(pubKey.bytes),'inconsistent arguments');}this._id=id;this._idB58String=mh.toB58String(this.id);this._privKey=privKey;this._pubKey=pubKey;}get id(){return this._id;}set id(val){throw new Error('Id is immutable');}get privKey(){return this._privKey;}set privKey(privKey){this._privKey=privKey;}get pubKey(){if(this._pubKey){return this._pubKey;}if(this._privKey){return this._privKey.public;}}set pubKey(pubKey){this._pubKey=pubKey;}marshalPubKey(){if(this.pubKey){return cryptoKeys.marshalPublicKey(this.pubKey);}}marshalPrivKey(){if(this.privKey){return cryptoKeys.marshalPrivateKey(this.privKey);}}toPrint(){let pid=this.toB58String();if(pid.startsWith('Qm')){pid=pid.slice(2);}let maxRunes=6;if(pid.length<maxRunes){maxRunes=pid.length;}return'<peer.ID '+pid.substr(0,maxRunes)+'>';}toJSON(){return{id:this.toB58String(),privKey:toB64Opt(this.marshalPrivKey()),pubKey:toB64Opt(this.marshalPubKey())};}toHexString(){return mh.toHexString(this.id);}toBytes(){return this.id;}toB58String(){return this._idB58String;}isEqual(id){if(Buffer.isBuffer(id)){return this.id.equals(id);}else if(id.id){return this.id.equals(id.id);}else{throw new Error('not valid Id');}}isValid(callback){if(this.privKey&&this.privKey.public&&this.privKey.public.bytes&&Buffer.isBuffer(this.pubKey.bytes)&&this.privKey.public.bytes.equals(this.pubKey.bytes)){callback();}else{callback(new Error('Keys not match'));}}}const PeerIdWithIs=withIs(PeerId,{className:'PeerId',symbolName:'@libp2p/js-peer-id/PeerId'});exports=module.exports=PeerIdWithIs;exports.create=function(opts,callback){if(typeof opts==='function'){callback=opts;opts={};}opts=opts||{};opts.bits=opts.bits||2048;waterfall([cb=>cryptoKeys.generateKeyPair('RSA',opts.bits,cb),(privKey,cb)=>privKey.public.hash((err,digest)=>{cb(err,digest,privKey);})],(err,digest,privKey)=>{if(err){return callback(err);}callback(null,new PeerIdWithIs(digest,privKey));});};exports.createFromHexString=function(str){return new PeerIdWithIs(mh.fromHexString(str));};exports.createFromBytes=function(buf){return new PeerIdWithIs(buf);};exports.createFromB58String=function(str){return new PeerIdWithIs(mh.fromB58String(str));};exports.createFromPubKey=function(key,callback){if(typeof callback!=='function'){throw new Error('callback is required');}let pubKey;try{let buf=key;if(typeof buf==='string'){buf=Buffer.from(key,'base64');}if(!Buffer.isBuffer(buf))throw new Error('Supplied key is neither a base64 string nor a buffer');pubKey=cryptoKeys.unmarshalPublicKey(buf);}catch(err){return callback(err);}pubKey.hash((err,digest)=>{if(err){return callback(err);}callback(null,new PeerIdWithIs(digest,null,pubKey));});};exports.createFromPrivKey=function(key,callback){if(typeof callback!=='function'){throw new Error('callback is required');}let buf=key;try{if(typeof buf==='string'){buf=Buffer.from(key,'base64');}if(!Buffer.isBuffer(buf))throw new Error('Supplied key is neither a base64 string nor a buffer');}catch(err){return callback(err);}waterfall([cb=>cryptoKeys.unmarshalPrivateKey(buf,cb),(privKey,cb)=>privKey.public.hash((err,digest)=>{cb(err,digest,privKey);})],(err,digest,privKey)=>{if(err){return callback(err);}callback(null,new PeerIdWithIs(digest,privKey,privKey.public));});};exports.createFromJSON=function(obj,callback){if(typeof callback!=='function'){throw new Error('callback is required');}let id;let rawPrivKey;let rawPubKey;let pub;try{id=mh.fromB58String(obj.id);rawPrivKey=obj.privKey&&Buffer.from(obj.privKey,'base64');rawPubKey=obj.pubKey&&Buffer.from(obj.pubKey,'base64');pub=rawPubKey&&cryptoKeys.unmarshalPublicKey(rawPubKey);}catch(err){return callback(err);}if(rawPrivKey){waterfall([cb=>cryptoKeys.unmarshalPrivateKey(rawPrivKey,cb),(priv,cb)=>priv.public.hash((err,digest)=>{cb(err,digest,priv);}),(privDigest,priv,cb)=>{if(pub){pub.hash((err,pubDigest)=>{cb(err,privDigest,priv,pubDigest);});}else{cb(null,privDigest,priv);}}],(err,privDigest,priv,pubDigest)=>{if(err){return callback(err);}if(pub&&!privDigest.equals(pubDigest)){return callback(new Error('Public and private key do not match'));}if(id&&!privDigest.equals(id)){return callback(new Error('Id and private key do not match'));}callback(null,new PeerIdWithIs(id,priv,pub));});}else{callback(null,new PeerIdWithIs(id,null,pub));}};exports.isPeerId=function(peerId){return Boolean(typeof peerId==='object'&&peerId._id&&peerId._idB58String);};function toB64Opt(val){if(val){return val.toString('base64');}}},1834:function(module,exports,__webpack_require__){"use strict";const util=__webpack_require__(5803);const traverse=__webpack_require__(2706);const CID=__webpack_require__(9339);exports=module.exports;exports.multicodec='dag-cbor';exports.defaultHashAlg='sha2-256';exports.resolve=(binaryBlob,path,callback)=>{if(typeof path==='function'){callback=path;path=undefined;}util.deserialize(binaryBlob,(err,node)=>{if(err){return callback(err);}if(!path||path==='/'){return callback(null,{value:node,remainderPath:''});}const parts=path.split('/');const val=traverse(node).get(parts);if(val!==undefined){return callback(null,{value:val,remainderPath:''});}let value;const len=parts.length;for(let i=0;i<len;i++){const partialPath=parts.shift();if(Array.isArray(node)&&!Buffer.isBuffer(node)){value=node[Number(partialPath)];}if(node[partialPath]){value=node[partialPath];}else{if(!value){return callback(new Error('path not available at root'));}else{parts.unshift(partialPath);return callback(null,{value:value,remainderPath:parts.join('/')});}}node=value;}});};function flattenObject(obj,delimiter){delimiter=delimiter||'/';if(Object.keys(obj).length===0){return[];}return traverse(obj).reduce(function(acc,x){if(CID.isCID(x)){this.update(undefined);}const path=this.path.join(delimiter);if(path!==''){acc.push({path:path,value:x});}return acc;},[]);}exports.tree=(binaryBlob,options,callback)=>{if(typeof options==='function'){callback=options;options=undefined;}options=options||{};util.deserialize(binaryBlob,(err,node)=>{if(err){return callback(err);}const flat=flattenObject(node);const paths=flat.map(el=>el.path);callback(null,paths);});};exports.isLink=(binaryBlob,path,callback)=>{exports.resolve(binaryBlob,path,(err,result)=>{if(err){return callback(err);}if(result.remainderPath.length>0){return callback(new Error('path out of scope'));}if(CID.isCID(result.value)){callback(null,result.value);}else{callback(null,false);}});};},1835:function(module,__unusedexports,__webpack_require__){var forge=__webpack_require__(7938);__webpack_require__(5302);__webpack_require__(8434);__webpack_require__(1214);module.exports=forge.des=forge.des||{};forge.des.startEncrypting=function(key,iv,output,mode){var cipher=_createCipher({key:key,output:output,decrypt:false,mode:mode||(iv===null?'ECB':'CBC')});cipher.start(iv);return cipher;};forge.des.createEncryptionCipher=function(key,mode){return _createCipher({key:key,output:null,decrypt:false,mode:mode});};forge.des.startDecrypting=function(key,iv,output,mode){var cipher=_createCipher({key:key,output:output,decrypt:true,mode:mode||(iv===null?'ECB':'CBC')});cipher.start(iv);return cipher;};forge.des.createDecryptionCipher=function(key,mode){return _createCipher({key:key,output:null,decrypt:true,mode:mode});};forge.des.Algorithm=function(name,mode){var self=this;self.name=name;self.mode=new mode({blockSize:8,cipher:{encrypt:function(inBlock,outBlock){return _updateBlock(self._keys,inBlock,outBlock,false);},decrypt:function(inBlock,outBlock){return _updateBlock(self._keys,inBlock,outBlock,true);}}});self._init=false;};forge.des.Algorithm.prototype.initialize=function(options){if(this._init){return;}var key=forge.util.createBuffer(options.key);if(this.name.indexOf('3DES')===0){if(key.length()!==24){throw new Error('Invalid Triple-DES key size: '+key.length()*8);}}this._keys=_createKeys(key);this._init=true;};registerAlgorithm('DES-ECB',forge.cipher.modes.ecb);registerAlgorithm('DES-CBC',forge.cipher.modes.cbc);registerAlgorithm('DES-CFB',forge.cipher.modes.cfb);registerAlgorithm('DES-OFB',forge.cipher.modes.ofb);registerAlgorithm('DES-CTR',forge.cipher.modes.ctr);registerAlgorithm('3DES-ECB',forge.cipher.modes.ecb);registerAlgorithm('3DES-CBC',forge.cipher.modes.cbc);registerAlgorithm('3DES-CFB',forge.cipher.modes.cfb);registerAlgorithm('3DES-OFB',forge.cipher.modes.ofb);registerAlgorithm('3DES-CTR',forge.cipher.modes.ctr);function registerAlgorithm(name,mode){var factory=function(){return new forge.des.Algorithm(name,mode);};forge.cipher.registerAlgorithm(name,factory);}var spfunction1=[0x1010400,0,0x10000,0x1010404,0x1010004,0x10404,0x4,0x10000,0x400,0x1010400,0x1010404,0x400,0x1000404,0x1010004,0x1000000,0x4,0x404,0x1000400,0x1000400,0x10400,0x10400,0x1010000,0x1010000,0x1000404,0x10004,0x1000004,0x1000004,0x10004,0,0x404,0x10404,0x1000000,0x10000,0x1010404,0x4,0x1010000,0x1010400,0x1000000,0x1000000,0x400,0x1010004,0x10000,0x10400,0x1000004,0x400,0x4,0x1000404,0x10404,0x1010404,0x10004,0x1010000,0x1000404,0x1000004,0x404,0x10404,0x1010400,0x404,0x1000400,0x1000400,0,0x10004,0x10400,0,0x1010004];var spfunction2=[-0x7fef7fe0,-0x7fff8000,0x8000,0x108020,0x100000,0x20,-0x7fefffe0,-0x7fff7fe0,-0x7fffffe0,-0x7fef7fe0,-0x7fef8000,-0x80000000,-0x7fff8000,0x100000,0x20,-0x7fefffe0,0x108000,0x100020,-0x7fff7fe0,0,-0x80000000,0x8000,0x108020,-0x7ff00000,0x100020,-0x7fffffe0,0,0x108000,0x8020,-0x7fef8000,-0x7ff00000,0x8020,0,0x108020,-0x7fefffe0,0x100000,-0x7fff7fe0,-0x7ff00000,-0x7fef8000,0x8000,-0x7ff00000,-0x7fff8000,0x20,-0x7fef7fe0,0x108020,0x20,0x8000,-0x80000000,0x8020,-0x7fef8000,0x100000,-0x7fffffe0,0x100020,-0x7fff7fe0,-0x7fffffe0,0x100020,0x108000,0,-0x7fff8000,0x8020,-0x80000000,-0x7fefffe0,-0x7fef7fe0,0x108000];var spfunction3=[0x208,0x8020200,0,0x8020008,0x8000200,0,0x20208,0x8000200,0x20008,0x8000008,0x8000008,0x20000,0x8020208,0x20008,0x8020000,0x208,0x8000000,0x8,0x8020200,0x200,0x20200,0x8020000,0x8020008,0x20208,0x8000208,0x20200,0x20000,0x8000208,0x8,0x8020208,0x200,0x8000000,0x8020200,0x8000000,0x20008,0x208,0x20000,0x8020200,0x8000200,0,0x200,0x20008,0x8020208,0x8000200,0x8000008,0x200,0,0x8020008,0x8000208,0x20000,0x8000000,0x8020208,0x8,0x20208,0x20200,0x8000008,0x8020000,0x8000208,0x208,0x8020000,0x20208,0x8,0x8020008,0x20200];var spfunction4=[0x802001,0x2081,0x2081,0x80,0x802080,0x800081,0x800001,0x2001,0,0x802000,0x802000,0x802081,0x81,0,0x800080,0x800001,0x1,0x2000,0x800000,0x802001,0x80,0x800000,0x2001,0x2080,0x800081,0x1,0x2080,0x800080,0x2000,0x802080,0x802081,0x81,0x800080,0x800001,0x802000,0x802081,0x81,0,0,0x802000,0x2080,0x800080,0x800081,0x1,0x802001,0x2081,0x2081,0x80,0x802081,0x81,0x1,0x2000,0x800001,0x2001,0x802080,0x800081,0x2001,0x2080,0x800000,0x802001,0x80,0x800000,0x2000,0x802080];var spfunction5=[0x100,0x2080100,0x2080000,0x42000100,0x80000,0x100,0x40000000,0x2080000,0x40080100,0x80000,0x2000100,0x40080100,0x42000100,0x42080000,0x80100,0x40000000,0x2000000,0x40080000,0x40080000,0,0x40000100,0x42080100,0x42080100,0x2000100,0x42080000,0x40000100,0,0x42000000,0x2080100,0x2000000,0x42000000,0x80100,0x80000,0x42000100,0x100,0x2000000,0x40000000,0x2080000,0x42000100,0x40080100,0x2000100,0x40000000,0x42080000,0x2080100,0x40080100,0x100,0x2000000,0x42080000,0x42080100,0x80100,0x42000000,0x42080100,0x2080000,0,0x40080000,0x42000000,0x80100,0x2000100,0x40000100,0x80000,0,0x40080000,0x2080100,0x40000100];var spfunction6=[0x20000010,0x20400000,0x4000,0x20404010,0x20400000,0x10,0x20404010,0x400000,0x20004000,0x404010,0x400000,0x20000010,0x400010,0x20004000,0x20000000,0x4010,0,0x400010,0x20004010,0x4000,0x404000,0x20004010,0x10,0x20400010,0x20400010,0,0x404010,0x20404000,0x4010,0x404000,0x20404000,0x20000000,0x20004000,0x10,0x20400010,0x404000,0x20404010,0x400000,0x4010,0x20000010,0x400000,0x20004000,0x20000000,0x4010,0x20000010,0x20404010,0x404000,0x20400000,0x404010,0x20404000,0,0x20400010,0x10,0x4000,0x20400000,0x404010,0x4000,0x400010,0x20004010,0,0x20404000,0x20000000,0x400010,0x20004010];var spfunction7=[0x200000,0x4200002,0x4000802,0,0x800,0x4000802,0x200802,0x4200800,0x4200802,0x200000,0,0x4000002,0x2,0x4000000,0x4200002,0x802,0x4000800,0x200802,0x200002,0x4000800,0x4000002,0x4200000,0x4200800,0x200002,0x4200000,0x800,0x802,0x4200802,0x200800,0x2,0x4000000,0x200800,0x4000000,0x200800,0x200000,0x4000802,0x4000802,0x4200002,0x4200002,0x2,0x200002,0x4000000,0x4000800,0x200000,0x4200800,0x802,0x200802,0x4200800,0x802,0x4000002,0x4200802,0x4200000,0x200800,0,0x2,0x4200802,0,0x200802,0x4200000,0x800,0x4000002,0x4000800,0x800,0x200002];var spfunction8=[0x10001040,0x1000,0x40000,0x10041040,0x10000000,0x10001040,0x40,0x10000000,0x40040,0x10040000,0x10041040,0x41000,0x10041000,0x41040,0x1000,0x40,0x10040000,0x10000040,0x10001000,0x1040,0x41000,0x40040,0x10040040,0x10041000,0x1040,0,0,0x10040040,0x10000040,0x10001000,0x41040,0x40000,0x41040,0x40000,0x10041000,0x1000,0x40,0x10040040,0x1000,0x41040,0x10001000,0x40,0x10000040,0x10040000,0x10040040,0x10000000,0x40000,0x10001040,0,0x10041040,0x40040,0x10000040,0x10040000,0x10001000,0x10001040,0,0x10041040,0x41000,0x41000,0x1040,0x1040,0x40040,0x10000000,0x10041000];function _createKeys(key){var pc2bytes0=[0,0x4,0x20000000,0x20000004,0x10000,0x10004,0x20010000,0x20010004,0x200,0x204,0x20000200,0x20000204,0x10200,0x10204,0x20010200,0x20010204],pc2bytes1=[0,0x1,0x100000,0x100001,0x4000000,0x4000001,0x4100000,0x4100001,0x100,0x101,0x100100,0x100101,0x4000100,0x4000101,0x4100100,0x4100101],pc2bytes2=[0,0x8,0x800,0x808,0x1000000,0x1000008,0x1000800,0x1000808,0,0x8,0x800,0x808,0x1000000,0x1000008,0x1000800,0x1000808],pc2bytes3=[0,0x200000,0x8000000,0x8200000,0x2000,0x202000,0x8002000,0x8202000,0x20000,0x220000,0x8020000,0x8220000,0x22000,0x222000,0x8022000,0x8222000],pc2bytes4=[0,0x40000,0x10,0x40010,0,0x40000,0x10,0x40010,0x1000,0x41000,0x1010,0x41010,0x1000,0x41000,0x1010,0x41010],pc2bytes5=[0,0x400,0x20,0x420,0,0x400,0x20,0x420,0x2000000,0x2000400,0x2000020,0x2000420,0x2000000,0x2000400,0x2000020,0x2000420],pc2bytes6=[0,0x10000000,0x80000,0x10080000,0x2,0x10000002,0x80002,0x10080002,0,0x10000000,0x80000,0x10080000,0x2,0x10000002,0x80002,0x10080002],pc2bytes7=[0,0x10000,0x800,0x10800,0x20000000,0x20010000,0x20000800,0x20010800,0x20000,0x30000,0x20800,0x30800,0x20020000,0x20030000,0x20020800,0x20030800],pc2bytes8=[0,0x40000,0,0x40000,0x2,0x40002,0x2,0x40002,0x2000000,0x2040000,0x2000000,0x2040000,0x2000002,0x2040002,0x2000002,0x2040002],pc2bytes9=[0,0x10000000,0x8,0x10000008,0,0x10000000,0x8,0x10000008,0x400,0x10000400,0x408,0x10000408,0x400,0x10000400,0x408,0x10000408],pc2bytes10=[0,0x20,0,0x20,0x100000,0x100020,0x100000,0x100020,0x2000,0x2020,0x2000,0x2020,0x102000,0x102020,0x102000,0x102020],pc2bytes11=[0,0x1000000,0x200,0x1000200,0x200000,0x1200000,0x200200,0x1200200,0x4000000,0x5000000,0x4000200,0x5000200,0x4200000,0x5200000,0x4200200,0x5200200],pc2bytes12=[0,0x1000,0x8000000,0x8001000,0x80000,0x81000,0x8080000,0x8081000,0x10,0x1010,0x8000010,0x8001010,0x80010,0x81010,0x8080010,0x8081010],pc2bytes13=[0,0x4,0x100,0x104,0,0x4,0x100,0x104,0x1,0x5,0x101,0x105,0x1,0x5,0x101,0x105];var iterations=key.length()>8?3:1;var keys=[];var shifts=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0];var n=0,tmp;for(var j=0;j<iterations;j++){var left=key.getInt32();var right=key.getInt32();tmp=(left>>>4^right)&0x0f0f0f0f;right^=tmp;left^=tmp<<4;tmp=(right>>>-16^left)&0x0000ffff;left^=tmp;right^=tmp<<-16;tmp=(left>>>2^right)&0x33333333;right^=tmp;left^=tmp<<2;tmp=(right>>>-16^left)&0x0000ffff;left^=tmp;right^=tmp<<-16;tmp=(left>>>1^right)&0x55555555;right^=tmp;left^=tmp<<1;tmp=(right>>>8^left)&0x00ff00ff;left^=tmp;right^=tmp<<8;tmp=(left>>>1^right)&0x55555555;right^=tmp;left^=tmp<<1;tmp=left<<8|right>>>20&0x000000f0;left=right<<24|right<<8&0xff0000|right>>>8&0xff00|right>>>24&0xf0;right=tmp;for(var i=0;i<shifts.length;++i){if(shifts[i]){left=left<<2|left>>>26;right=right<<2|right>>>26;}else{left=left<<1|left>>>27;right=right<<1|right>>>27;}left&=-0xf;right&=-0xf;var lefttmp=pc2bytes0[left>>>28]|pc2bytes1[left>>>24&0xf]|pc2bytes2[left>>>20&0xf]|pc2bytes3[left>>>16&0xf]|pc2bytes4[left>>>12&0xf]|pc2bytes5[left>>>8&0xf]|pc2bytes6[left>>>4&0xf];var righttmp=pc2bytes7[right>>>28]|pc2bytes8[right>>>24&0xf]|pc2bytes9[right>>>20&0xf]|pc2bytes10[right>>>16&0xf]|pc2bytes11[right>>>12&0xf]|pc2bytes12[right>>>8&0xf]|pc2bytes13[right>>>4&0xf];tmp=(righttmp>>>16^lefttmp)&0x0000ffff;keys[n++]=lefttmp^tmp;keys[n++]=righttmp^tmp<<16;}}return keys;}function _updateBlock(keys,input,output,decrypt){var iterations=keys.length===32?3:9;var looping;if(iterations===3){looping=decrypt?[30,-2,-2]:[0,32,2];}else{looping=decrypt?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];}var tmp;var left=input[0];var right=input[1];tmp=(left>>>4^right)&0x0f0f0f0f;right^=tmp;left^=tmp<<4;tmp=(left>>>16^right)&0x0000ffff;right^=tmp;left^=tmp<<16;tmp=(right>>>2^left)&0x33333333;left^=tmp;right^=tmp<<2;tmp=(right>>>8^left)&0x00ff00ff;left^=tmp;right^=tmp<<8;tmp=(left>>>1^right)&0x55555555;right^=tmp;left^=tmp<<1;left=left<<1|left>>>31;right=right<<1|right>>>31;for(var j=0;j<iterations;j+=3){var endloop=looping[j+1];var loopinc=looping[j+2];for(var i=looping[j];i!=endloop;i+=loopinc){var right1=right^keys[i];var right2=(right>>>4|right<<28)^keys[i+1];tmp=left;left=right;right=tmp^(spfunction2[right1>>>24&0x3f]|spfunction4[right1>>>16&0x3f]|spfunction6[right1>>>8&0x3f]|spfunction8[right1&0x3f]|spfunction1[right2>>>24&0x3f]|spfunction3[right2>>>16&0x3f]|spfunction5[right2>>>8&0x3f]|spfunction7[right2&0x3f]);}tmp=left;left=right;right=tmp;}left=left>>>1|left<<31;right=right>>>1|right<<31;tmp=(left>>>1^right)&0x55555555;right^=tmp;left^=tmp<<1;tmp=(right>>>8^left)&0x00ff00ff;left^=tmp;right^=tmp<<8;tmp=(right>>>2^left)&0x33333333;left^=tmp;right^=tmp<<2;tmp=(left>>>16^right)&0x0000ffff;right^=tmp;left^=tmp<<16;tmp=(left>>>4^right)&0x0f0f0f0f;right^=tmp;left^=tmp<<4;output[0]=left;output[1]=right;}function _createCipher(options){options=options||{};var mode=(options.mode||'CBC').toUpperCase();var algorithm='DES-'+mode;var cipher;if(options.decrypt){cipher=forge.cipher.createDecipher(algorithm,options.key);}else{cipher=forge.cipher.createCipher(algorithm,options.key);}var start=cipher.start;cipher.start=function(iv,options){var output=null;if(options instanceof forge.util.ByteBuffer){output=options;options={};}options=options||{};options.output=output;options.iv=iv;start.call(cipher,options);};return cipher;}},1837:function(module){var FUNC_ERROR_TEXT='Expected a function';var HASH_UNDEFINED='__lodash_hash_undefined__';var INFINITY=1/0,MAX_SAFE_INTEGER=9007199254740991;var funcTag='[object Function]',genTag='[object GeneratorFunction]',symbolTag='[object Symbol]';var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/,reLeadingDot=/^\./,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;var reRegExpChar=/[\\^$.*+?()[\]{}|]/g;var reEscapeChar=/\\(\\)?/g;var reIsHostCtor=/^\[object .+?Constructor\]$/;var reIsUint=/^(?:0|[1-9]\d*)$/;var freeGlobal=typeof global=='object'&&global&&global.Object===Object&&global;var freeSelf=typeof self=='object'&&self&&self.Object===Object&&self;var root=freeGlobal||freeSelf||Function('return this')();function getValue(object,key){return object==null?undefined:object[key];}function isHostObject(value){var result=false;if(value!=null&&typeof value.toString!='function'){try{result=!!(value+'');}catch(e){}}return result;}var arrayProto=Array.prototype,funcProto=Function.prototype,objectProto=Object.prototype;var coreJsData=root['__core-js_shared__'];var maskSrcKey=function(){var uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||'');return uid?'Symbol(src)_1.'+uid:'';}();var funcToString=funcProto.toString;var hasOwnProperty=objectProto.hasOwnProperty;var objectToString=objectProto.toString;var reIsNative=RegExp('^'+funcToString.call(hasOwnProperty).replace(reRegExpChar,'\\$&').replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,'$1.*?')+'$');var Symbol=root.Symbol,splice=arrayProto.splice;var Map=getNative(root,'Map'),nativeCreate=getNative(Object,'create');var symbolProto=Symbol?Symbol.prototype:undefined,symbolToString=symbolProto?symbolProto.toString:undefined;function Hash(entries){var index=-1,length=entries?entries.length:0;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1]);}}function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{};}function hashDelete(key){return this.has(key)&&delete this.__data__[key];}function hashGet(key){var data=this.__data__;if(nativeCreate){var result=data[key];return result===HASH_UNDEFINED?undefined:result;}return hasOwnProperty.call(data,key)?data[key]:undefined;}function hashHas(key){var data=this.__data__;return nativeCreate?data[key]!==undefined:hasOwnProperty.call(data,key);}function hashSet(key,value){var data=this.__data__;data[key]=nativeCreate&&value===undefined?HASH_UNDEFINED:value;return this;}Hash.prototype.clear=hashClear;Hash.prototype['delete']=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;function ListCache(entries){var index=-1,length=entries?entries.length:0;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1]);}}function listCacheClear(){this.__data__=[];}function listCacheDelete(key){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){return false;}var lastIndex=data.length-1;if(index==lastIndex){data.pop();}else{splice.call(data,index,1);}return true;}function listCacheGet(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?undefined:data[index][1];}function listCacheHas(key){return assocIndexOf(this.__data__,key)>-1;}function listCacheSet(key,value){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){data.push([key,value]);}else{data[index][1]=value;}return this;}ListCache.prototype.clear=listCacheClear;ListCache.prototype['delete']=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;function MapCache(entries){var index=-1,length=entries?entries.length:0;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1]);}}function mapCacheClear(){this.__data__={'hash':new Hash(),'map':new(Map||ListCache)(),'string':new Hash()};}function mapCacheDelete(key){return getMapData(this,key)['delete'](key);}function mapCacheGet(key){return getMapData(this,key).get(key);}function mapCacheHas(key){return getMapData(this,key).has(key);}function mapCacheSet(key,value){getMapData(this,key).set(key,value);return this;}MapCache.prototype.clear=mapCacheClear;MapCache.prototype['delete']=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;function assignValue(object,key,value){var objValue=object[key];if(!(hasOwnProperty.call(object,key)&&eq(objValue,value))||value===undefined&&!(key in object)){object[key]=value;}}function assocIndexOf(array,key){var length=array.length;while(length--){if(eq(array[length][0],key)){return length;}}return-1;}function baseIsNative(value){if(!isObject(value)||isMasked(value)){return false;}var pattern=isFunction(value)||isHostObject(value)?reIsNative:reIsHostCtor;return pattern.test(toSource(value));}function baseSet(object,path,value,customizer){if(!isObject(object)){return object;}path=isKey(path,object)?[path]:castPath(path);var index=-1,length=path.length,lastIndex=length-1,nested=object;while(nested!=null&&++index<length){var key=toKey(path[index]),newValue=value;if(index!=lastIndex){var objValue=nested[key];newValue=customizer?customizer(objValue,key,nested):undefined;if(newValue===undefined){newValue=isObject(objValue)?objValue:isIndex(path[index+1])?[]:{};}}assignValue(nested,key,newValue);nested=nested[key];}return object;}function baseToString(value){if(typeof value=='string'){return value;}if(isSymbol(value)){return symbolToString?symbolToString.call(value):'';}var result=value+'';return result=='0'&&1/value==-INFINITY?'-0':result;}function castPath(value){return isArray(value)?value:stringToPath(value);}function getMapData(map,key){var data=map.__data__;return isKeyable(key)?data[typeof key=='string'?'string':'hash']:data.map;}function getNative(object,key){var value=getValue(object,key);return baseIsNative(value)?value:undefined;}function isIndex(value,length){length=length==null?MAX_SAFE_INTEGER:length;return!!length&&(typeof value=='number'||reIsUint.test(value))&&value>-1&&value%1==0&&value<length;}function isKey(value,object){if(isArray(value)){return false;}var type=typeof value;if(type=='number'||type=='symbol'||type=='boolean'||value==null||isSymbol(value)){return true;}return reIsPlainProp.test(value)||!reIsDeepProp.test(value)||object!=null&&value in Object(object);}function isKeyable(value){var type=typeof value;return type=='string'||type=='number'||type=='symbol'||type=='boolean'?value!=='__proto__':value===null;}function isMasked(func){return!!maskSrcKey&&maskSrcKey in func;}var stringToPath=memoize(function(string){string=toString(string);var result=[];if(reLeadingDot.test(string)){result.push('');}string.replace(rePropName,function(match,number,quote,string){result.push(quote?string.replace(reEscapeChar,'$1'):number||match);});return result;});function toKey(value){if(typeof value=='string'||isSymbol(value)){return value;}var result=value+'';return result=='0'&&1/value==-INFINITY?'-0':result;}function toSource(func){if(func!=null){try{return funcToString.call(func);}catch(e){}try{return func+'';}catch(e){}}return'';}function memoize(func,resolver){if(typeof func!='function'||resolver&&typeof resolver!='function'){throw new TypeError(FUNC_ERROR_TEXT);}var memoized=function(){var args=arguments,key=resolver?resolver.apply(this,args):args[0],cache=memoized.cache;if(cache.has(key)){return cache.get(key);}var result=func.apply(this,args);memoized.cache=cache.set(key,result);return result;};memoized.cache=new(memoize.Cache||MapCache)();return memoized;}memoize.Cache=MapCache;function eq(value,other){return value===other||value!==value&&other!==other;}var isArray=Array.isArray;function isFunction(value){var tag=isObject(value)?objectToString.call(value):'';return tag==funcTag||tag==genTag;}function isObject(value){var type=typeof value;return!!value&&(type=='object'||type=='function');}function isObjectLike(value){return!!value&&typeof value=='object';}function isSymbol(value){return typeof value=='symbol'||isObjectLike(value)&&objectToString.call(value)==symbolTag;}function toString(value){return value==null?'':baseToString(value);}function set(object,path,value){return object==null?object:baseSet(object,path,value);}module.exports=set;},1840:function(module,__unusedexports,__webpack_require__){"use strict";var Buffer=__webpack_require__(7572).Buffer;var keccakState=__webpack_require__(951);function Keccak(){this.state=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.blockSize=null;this.count=0;this.squeezing=false;}Keccak.prototype.initialize=function(rate,capacity){for(var i=0;i<50;++i)this.state[i]=0;this.blockSize=rate/8;this.count=0;this.squeezing=false;};Keccak.prototype.absorb=function(data){for(var i=0;i<data.length;++i){this.state[~~(this.count/4)]^=data[i]<<8*(this.count%4);this.count+=1;if(this.count===this.blockSize){keccakState.p1600(this.state);this.count=0;}}};Keccak.prototype.absorbLastFewBits=function(bits){this.state[~~(this.count/4)]^=bits<<8*(this.count%4);if((bits&0x80)!==0&&this.count===this.blockSize-1)keccakState.p1600(this.state);this.state[~~((this.blockSize-1)/4)]^=0x80<<8*((this.blockSize-1)%4);keccakState.p1600(this.state);this.count=0;this.squeezing=true;};Keccak.prototype.squeeze=function(length){if(!this.squeezing)this.absorbLastFewBits(0x01);var output=Buffer.alloc(length);for(var i=0;i<length;++i){output[i]=this.state[~~(this.count/4)]>>>8*(this.count%4)&0xff;this.count+=1;if(this.count===this.blockSize){keccakState.p1600(this.state);this.count=0;}}return output;};Keccak.prototype.copy=function(dest){for(var i=0;i<50;++i)dest.state[i]=this.state[i];dest.blockSize=this.blockSize;dest.count=this.count;dest.squeezing=this.squeezing;};module.exports=Keccak;},1846:function(module,__unusedexports,__webpack_require__){var baseGetTag=__webpack_require__(2339),isObjectLike=__webpack_require__(2321);var argsTag='[object Arguments]';function baseIsArguments(value){return isObjectLike(value)&&baseGetTag(value)==argsTag;}module.exports=baseIsArguments;},1847:function(module,__unusedexports,__webpack_require__){"use strict";const unmarshal=__webpack_require__(7959).unmarshal;const{formatCid,toMfsPath,loadNode}=__webpack_require__(7777);const waterfall=__webpack_require__(4265);const pull=__webpack_require__(418);const collect=__webpack_require__(8342);const asyncMap=__webpack_require__(9720);const exporter=__webpack_require__(7623);const CID=__webpack_require__(9339);const log=__webpack_require__(746)('ipfs:mfs:stat');const defaultOptions={hash:false,size:false,withLocal:false,cidBase:'base58btc'};module.exports=context=>{return function mfsStat(path,options,callback){if(typeof options==='function'){callback=options;options={};}options=Object.assign({},defaultOptions,options);log(`Fetching stats for ${path}`);waterfall([cb=>toMfsPath(context,path,cb),({mfsPath,depth},cb)=>{pull(exporter(mfsPath,context.ipld,{maxDepth:depth}),asyncMap((file,cb)=>{if(options.hash){return cb(null,{hash:formatCid(new CID(file.hash),options.cidBase)});}if(options.size){return cb(null,{size:file.size});}loadNode(context,{cid:file.hash},(err,result)=>{if(err){return cb(err);}const{node,cid}=result;const meta=unmarshal(node.data);let blocks=node.links.length;if(meta.type==='file'){blocks=meta.blockSizes.length;}cb(null,{hash:formatCid(cid,options.cidBase),size:meta.fileSize()||0,cumulativeSize:node.size,blocks:blocks,type:meta.type,local:undefined,sizeLocal:undefined,withLocality:false});});}),collect((error,results)=>{if(error){return cb(error);}if(!results.length){return cb(new Error(`${path} does not exist`));}log(`Stats for ${path}`,results[0]);return cb(null,results[0]);}));}],callback);};};},1849:function(module,exports,__webpack_require__){"use strict";const constants=__webpack_require__(5280);exports=module.exports=multibase;exports.encode=encode;exports.decode=decode;exports.isEncoded=isEncoded;exports.names=Object.freeze(Object.keys(constants.names));exports.codes=Object.freeze(Object.keys(constants.codes));const errNotSupported=new Error('Unsupported encoding');function multibase(nameOrCode,buf){if(!buf){throw new Error('requires an encoded buffer');}const base=getBase(nameOrCode);const codeBuf=Buffer.from(base.code);const name=base.name;validEncode(name,buf);return Buffer.concat([codeBuf,buf]);}function encode(nameOrCode,buf){const base=getBase(nameOrCode);const name=base.name;return multibase(name,Buffer.from(base.encode(buf)));}function decode(bufOrString){if(Buffer.isBuffer(bufOrString)){bufOrString=bufOrString.toString();}const code=bufOrString.substring(0,1);bufOrString=bufOrString.substring(1,bufOrString.length);if(typeof bufOrString==='string'){bufOrString=Buffer.from(bufOrString);}const base=getBase(code);return Buffer.from(base.decode(bufOrString.toString()));}function isEncoded(bufOrString){if(Buffer.isBuffer(bufOrString)){bufOrString=bufOrString.toString();}if(Object.prototype.toString.call(bufOrString)!=='[object String]'){return false;}const code=bufOrString.substring(0,1);try{const base=getBase(code);return base.name;}catch(err){return false;}}function validEncode(name,buf){const base=getBase(name);base.decode(buf.toString());}function getBase(nameOrCode){let base;if(constants.names[nameOrCode]){base=constants.names[nameOrCode];}else if(constants.codes[nameOrCode]){base=constants.codes[nameOrCode];}else{throw errNotSupported;}if(!base.isImplemented()){throw new Error('Base '+nameOrCode+' is not implemented yet');}return base;}},1860:function(module,__unusedexports,__webpack_require__){"use strict";const errcode=__webpack_require__(4999);module.exports.dbOpenFailedError=err=>{err=err||new Error('Cannot open database');return errcode(err,'ERR_DB_OPEN_FAILED');};module.exports.dbDeleteFailedError=err=>{err=err||new Error('Delete failed');return errcode(err,'ERR_DB_DELETE_FAILED');};module.exports.dbWriteFailedError=err=>{err=err||new Error('Write failed');return errcode(err,'ERR_DB_WRITE_FAILED');};module.exports.notFoundError=err=>{err=err||new Error('Not Found');return errcode(err,'ERR_NOT_FOUND');};},1863:function(module,__unusedexports,__webpack_require__){if(typeof process==='undefined'||process.type==='renderer'){module.exports=__webpack_require__(4655);}else{module.exports=__webpack_require__(1402);}},1864:function(module){"use strict";var TimeoutError;var timeout=module.exports.timeout=function(promise,timeoutMillis){var error=new TimeoutError(),timeout;return Promise.race([promise,new Promise(function(resolve,reject){timeout=setTimeout(function(){reject(error);},timeoutMillis);})]).then(function(v){clearTimeout(timeout);return v;},function(err){clearTimeout(timeout);throw err;});};TimeoutError=module.exports.TimeoutError=function(){Error.call(this);this.stack=Error().stack;this.message='Timeout';};TimeoutError.prototype=Object.create(Error.prototype);TimeoutError.prototype.name="TimeoutError";},1865:function(module,__unusedexports,__webpack_require__){"use strict";const pull=__webpack_require__(2885);const lp=__webpack_require__(8585);const Message=__webpack_require__(6102);const handlers=__webpack_require__(3365);const utils=__webpack_require__(2869);const c=__webpack_require__(2445);module.exports=dht=>{const log=utils.logger(dht.peerInfo.id,'rpc');const getMessageHandler=handlers(dht);function handleMessage(peer,msg,callback){dht._add(peer,err=>{if(err){log.error('Failed to update the kbucket store');log.error(err);}const handler=getMessageHandler(msg.type);if(!handler){log.error(`no handler found for message type: ${msg.type}`);return callback();}handler(peer,msg,callback);});}return function protocolHandler(protocol,conn){conn.getPeerInfo((err,peer)=>{if(err){log.error('Failed to get peer info');log.error(err);return;}log('from: %s',peer.id.toB58String());pull(conn,lp.decode(),pull.filter(msg=>msg.length<c.maxMessageSize),pull.map(rawMsg=>{let msg;try{msg=Message.deserialize(rawMsg);}catch(err){log.error('failed to read incoming message',err);return;}return msg;}),pull.filter(Boolean),pull.asyncMap((msg,cb)=>handleMessage(peer,msg,cb)),pull.filter(Boolean),pull.map(response=>{let msg;try{msg=response.serialize();}catch(err){log.error('failed to send message',err);return;}return msg;}),pull.filter(Boolean),lp.encode(),conn);});};};},1875:function(module,exports){"use strict";exports=module.exports;exports.PROTOCOL_ID='/multistream/1.0.0';},1906:function(module,__unusedexports,__webpack_require__){"use strict";const parallel=__webpack_require__(4876);const once=__webpack_require__(7957);const debug=__webpack_require__(746);const log=debug('libp2p:switch:transport');const LimitDialer=__webpack_require__(7141);const defaultPerPeerRateLimit=8;const dialTimeout=30*1000;class TransportManager{constructor(_switch){this.switch=_switch;this.dialer=new LimitDialer(defaultPerPeerRateLimit,dialTimeout);}add(key,transport){log('adding %s',key);if(this.switch.transports[key]){throw new Error('There is already a transport with this key');}this.switch.transports[key]=transport;if(!this.switch.transports[key].listeners){this.switch.transports[key].listeners=[];}}remove(key,callback){callback=callback||function(){};if(!this.switch.transports[key]){return callback();}this.close(key,err=>{delete this.switch.transports[key];callback(err);});}removeAll(callback){const tasks=Object.keys(this.switch.transports).map(key=>{return cb=>{this.remove(key,cb);};});parallel(tasks,callback);}dial(key,peerInfo,callback){const transport=this.switch.transports[key];let multiaddrs=peerInfo.multiaddrs.toArray();if(!Array.isArray(multiaddrs)){multiaddrs=[multiaddrs];}multiaddrs=TransportManager.dialables(transport,multiaddrs,this.switch._peerInfo);log('dialing %s',key,multiaddrs.map(m=>m.toString()));this.dialer.dialMany(peerInfo.id,transport,multiaddrs,(err,success)=>{if(err){return callback(err);}peerInfo.connect(success.multiaddr);this.switch._peerBook.put(peerInfo);callback(null,success.conn);});}listen(key,_options,handler,callback){handler=this.switch._connectionHandler(key,handler);const transport=this.switch.transports[key];const multiaddrs=TransportManager.dialables(transport,this.switch._peerInfo.multiaddrs.distinct());if(!transport.listeners){transport.listeners=[];}let freshMultiaddrs=[];const createListeners=multiaddrs.map(ma=>{return cb=>{const done=once(cb);const listener=transport.createListener(handler);listener.once('error',done);listener.listen(ma,err=>{if(err){return done(err);}listener.removeListener('error',done);listener.getAddrs((err,addrs)=>{if(err){return done(err);}freshMultiaddrs=freshMultiaddrs.concat(addrs);transport.listeners.push(listener);done();});});};});parallel(createListeners,err=>{if(err){return callback(err);}this.switch._peerInfo.multiaddrs.replace(multiaddrs,freshMultiaddrs);callback();});}close(key,callback){const transport=this.switch.transports[key];if(!transport){return callback(new Error(`Trying to close non existing transport: ${key}`));}parallel(transport.listeners.map(listener=>{return cb=>{listener.close(cb);};}),callback);}static dialables(transport,multiaddrs,peerInfo){if(!transport||!transport.filter)return[];const transportAddrs=transport.filter(multiaddrs);if(!peerInfo){return transportAddrs;}return transportAddrs.filter(addr=>{return!peerInfo.multiaddrs.toArray().find(pAddr=>{try{addr.decapsulate(pAddr);}catch(err){return false;}return true;});});}}module.exports=TransportManager;},1913:function(module,__unusedexports,__webpack_require__){"use strict";const isPlainObj=__webpack_require__(9854);module.exports=(obj,opts)=>{if(!isPlainObj(obj)){throw new TypeError('Expected a plain object');}opts=opts||{};if(typeof opts==='function'){throw new TypeError('Specify the compare function as an option instead');}const deep=opts.deep;const seenInput=[];const seenOutput=[];const sortKeys=x=>{const seenIndex=seenInput.indexOf(x);if(seenIndex!==-1){return seenOutput[seenIndex];}const ret={};const keys=Object.keys(x).sort(opts.compare);seenInput.push(x);seenOutput.push(ret);for(let i=0;i<keys.length;i++){const key=keys[i];const val=x[key];if(deep&&Array.isArray(val)){const retArr=[];for(let j=0;j<val.length;j++){retArr[j]=isPlainObj(val[j])?sortKeys(val[j]):val[j];}ret[key]=retArr;continue;}ret[key]=deep&&isPlainObj(val)?sortKeys(val):val;}return ret;};return sortKeys(obj);};},1937:function(__unusedmodule,exports,__webpack_require__){"use strict";const Hoek=__webpack_require__(2850);const internals={};exports.create=function(key,options){Hoek.assert(typeof key==='string','Invalid reference key:',key);const settings=Hoek.clone(options);const ref=function(value,validationOptions){return Hoek.reach(ref.isContext?validationOptions.context:value,ref.key,settings);};ref.isContext=key[0]===(settings&&settings.contextPrefix||'$');ref.key=ref.isContext?key.slice(1):key;ref.path=ref.key.split(settings&&settings.separator||'.');ref.depth=ref.path.length;ref.root=ref.path[0];ref.isJoi=true;ref.toString=function(){return(ref.isContext?'context:':'ref:')+ref.key;};return ref;};exports.isRef=function(ref){return typeof ref==='function'&&ref.isJoi;};exports.push=function(array,ref){if(exports.isRef(ref)&&!ref.isContext){array.push(ref.root);}};},1939:function(module){module.exports=require("net");},1948:function(module,__unusedexports,__webpack_require__){"use strict";const waterfall=__webpack_require__(4265);const stat=__webpack_require__(1847);const{FILE_SEPARATOR}=__webpack_require__(7777);const defaultOptions={};module.exports=context=>{return function mfsFlush(path,options,callback){if(typeof options==='function'){callback=options;options={};}if(typeof path==='function'){callback=path;options={};path=FILE_SEPARATOR;}if(!path){path=FILE_SEPARATOR;}options=Object.assign({},defaultOptions,options);waterfall([cb=>stat(context)(path,options,cb),(stats,cb)=>cb()],callback);};};},1953:function(module){module.exports=[["a140","",62],["a180","",32],["a240","",62],["a280","",32],["a2ab","",5],["a2e3",""],["a2ef",""],["a2fd",""],["a340","",62],["a380","",31,""],["a440","",62],["a480","",32],["a4f4","",10],["a540","",62],["a580","",32],["a5f7","",7],["a640","",62],["a680","",32],["a6b9","",7],["a6d9","",6],["a6ec",""],["a6f3",""],["a6f6","",8],["a740","",62],["a780","",32],["a7c2","",14],["a7f2","",12],["a896","",10],["a8bc",""],["a8bf",""],["a8c1",""],["a8ea","",20],["a958",""],["a95b",""],["a95d",""],["a989","",11],["a997","",12],["a9f0","",14],["aaa1","",93],["aba1","",93],["aca1","",93],["ada1","",93],["aea1","",93],["afa1","",93],["d7fa","",4],["f8a1","",93],["f9a1","",93],["faa1","",93],["fba1","",93],["fca1","",93],["fda1","",93],["fe50",""],["fe80","",6,"",93]];},1972:function(module,__unusedexports,__webpack_require__){"use strict";const toStream=__webpack_require__(864);module.exports=function(self){return(ipfsPath,options)=>{return toStream.source(self.lsPullStream(ipfsPath,options));};};},1976:function(module,exports){;(function(root,undefined){'use strict';var library={'version':'3.0.1','x86':{},'x64':{}};function _x86Multiply(m,n){return(m&0xffff)*n+(((m>>>16)*n&0xffff)<<16);}function _x86Rotl(m,n){return m<<n|m>>>32-n;}function _x86Fmix(h){h^=h>>>16;h=_x86Multiply(h,0x85ebca6b);h^=h>>>13;h=_x86Multiply(h,0xc2b2ae35);h^=h>>>16;return h;}function _x64Add(m,n){m=[m[0]>>>16,m[0]&0xffff,m[1]>>>16,m[1]&0xffff];n=[n[0]>>>16,n[0]&0xffff,n[1]>>>16,n[1]&0xffff];var o=[0,0,0,0];o[3]+=m[3]+n[3];o[2]+=o[3]>>>16;o[3]&=0xffff;o[2]+=m[2]+n[2];o[1]+=o[2]>>>16;o[2]&=0xffff;o[1]+=m[1]+n[1];o[0]+=o[1]>>>16;o[1]&=0xffff;o[0]+=m[0]+n[0];o[0]&=0xffff;return[o[0]<<16|o[1],o[2]<<16|o[3]];}function _x64Multiply(m,n){m=[m[0]>>>16,m[0]&0xffff,m[1]>>>16,m[1]&0xffff];n=[n[0]>>>16,n[0]&0xffff,n[1]>>>16,n[1]&0xffff];var o=[0,0,0,0];o[3]+=m[3]*n[3];o[2]+=o[3]>>>16;o[3]&=0xffff;o[2]+=m[2]*n[3];o[1]+=o[2]>>>16;o[2]&=0xffff;o[2]+=m[3]*n[2];o[1]+=o[2]>>>16;o[2]&=0xffff;o[1]+=m[1]*n[3];o[0]+=o[1]>>>16;o[1]&=0xffff;o[1]+=m[2]*n[2];o[0]+=o[1]>>>16;o[1]&=0xffff;o[1]+=m[3]*n[1];o[0]+=o[1]>>>16;o[1]&=0xffff;o[0]+=m[0]*n[3]+m[1]*n[2]+m[2]*n[1]+m[3]*n[0];o[0]&=0xffff;return[o[0]<<16|o[1],o[2]<<16|o[3]];}function _x64Rotl(m,n){n%=64;if(n===32){return[m[1],m[0]];}else if(n<32){return[m[0]<<n|m[1]>>>32-n,m[1]<<n|m[0]>>>32-n];}else{n-=32;return[m[1]<<n|m[0]>>>32-n,m[0]<<n|m[1]>>>32-n];}}function _x64LeftShift(m,n){n%=64;if(n===0){return m;}else if(n<32){return[m[0]<<n|m[1]>>>32-n,m[1]<<n];}else{return[m[1]<<n-32,0];}}function _x64Xor(m,n){return[m[0]^n[0],m[1]^n[1]];}function _x64Fmix(h){h=_x64Xor(h,[0,h[0]>>>1]);h=_x64Multiply(h,[0xff51afd7,0xed558ccd]);h=_x64Xor(h,[0,h[0]>>>1]);h=_x64Multiply(h,[0xc4ceb9fe,0x1a85ec53]);h=_x64Xor(h,[0,h[0]>>>1]);return h;}library.x86.hash32=function(key,seed){key=key||'';seed=seed||0;var remainder=key.length%4;var bytes=key.length-remainder;var h1=seed;var k1=0;var c1=0xcc9e2d51;var c2=0x1b873593;for(var i=0;i<bytes;i=i+4){k1=key.charCodeAt(i)&0xff|(key.charCodeAt(i+1)&0xff)<<8|(key.charCodeAt(i+2)&0xff)<<16|(key.charCodeAt(i+3)&0xff)<<24;k1=_x86Multiply(k1,c1);k1=_x86Rotl(k1,15);k1=_x86Multiply(k1,c2);h1^=k1;h1=_x86Rotl(h1,13);h1=_x86Multiply(h1,5)+0xe6546b64;}k1=0;switch(remainder){case 3:k1^=(key.charCodeAt(i+2)&0xff)<<16;case 2:k1^=(key.charCodeAt(i+1)&0xff)<<8;case 1:k1^=key.charCodeAt(i)&0xff;k1=_x86Multiply(k1,c1);k1=_x86Rotl(k1,15);k1=_x86Multiply(k1,c2);h1^=k1;}h1^=key.length;h1=_x86Fmix(h1);return h1>>>0;};library.x86.hash128=function(key,seed){key=key||'';seed=seed||0;var remainder=key.length%16;var bytes=key.length-remainder;var h1=seed;var h2=seed;var h3=seed;var h4=seed;var k1=0;var k2=0;var k3=0;var k4=0;var c1=0x239b961b;var c2=0xab0e9789;var c3=0x38b34ae5;var c4=0xa1e38b93;for(var i=0;i<bytes;i=i+16){k1=key.charCodeAt(i)&0xff|(key.charCodeAt(i+1)&0xff)<<8|(key.charCodeAt(i+2)&0xff)<<16|(key.charCodeAt(i+3)&0xff)<<24;k2=key.charCodeAt(i+4)&0xff|(key.charCodeAt(i+5)&0xff)<<8|(key.charCodeAt(i+6)&0xff)<<16|(key.charCodeAt(i+7)&0xff)<<24;k3=key.charCodeAt(i+8)&0xff|(key.charCodeAt(i+9)&0xff)<<8|(key.charCodeAt(i+10)&0xff)<<16|(key.charCodeAt(i+11)&0xff)<<24;k4=key.charCodeAt(i+12)&0xff|(key.charCodeAt(i+13)&0xff)<<8|(key.charCodeAt(i+14)&0xff)<<16|(key.charCodeAt(i+15)&0xff)<<24;k1=_x86Multiply(k1,c1);k1=_x86Rotl(k1,15);k1=_x86Multiply(k1,c2);h1^=k1;h1=_x86Rotl(h1,19);h1+=h2;h1=_x86Multiply(h1,5)+0x561ccd1b;k2=_x86Multiply(k2,c2);k2=_x86Rotl(k2,16);k2=_x86Multiply(k2,c3);h2^=k2;h2=_x86Rotl(h2,17);h2+=h3;h2=_x86Multiply(h2,5)+0x0bcaa747;k3=_x86Multiply(k3,c3);k3=_x86Rotl(k3,17);k3=_x86Multiply(k3,c4);h3^=k3;h3=_x86Rotl(h3,15);h3+=h4;h3=_x86Multiply(h3,5)+0x96cd1c35;k4=_x86Multiply(k4,c4);k4=_x86Rotl(k4,18);k4=_x86Multiply(k4,c1);h4^=k4;h4=_x86Rotl(h4,13);h4+=h1;h4=_x86Multiply(h4,5)+0x32ac3b17;}k1=0;k2=0;k3=0;k4=0;switch(remainder){case 15:k4^=key.charCodeAt(i+14)<<16;case 14:k4^=key.charCodeAt(i+13)<<8;case 13:k4^=key.charCodeAt(i+12);k4=_x86Multiply(k4,c4);k4=_x86Rotl(k4,18);k4=_x86Multiply(k4,c1);h4^=k4;case 12:k3^=key.charCodeAt(i+11)<<24;case 11:k3^=key.charCodeAt(i+10)<<16;case 10:k3^=key.charCodeAt(i+9)<<8;case 9:k3^=key.charCodeAt(i+8);k3=_x86Multiply(k3,c3);k3=_x86Rotl(k3,17);k3=_x86Multiply(k3,c4);h3^=k3;case 8:k2^=key.charCodeAt(i+7)<<24;case 7:k2^=key.charCodeAt(i+6)<<16;case 6:k2^=key.charCodeAt(i+5)<<8;case 5:k2^=key.charCodeAt(i+4);k2=_x86Multiply(k2,c2);k2=_x86Rotl(k2,16);k2=_x86Multiply(k2,c3);h2^=k2;case 4:k1^=key.charCodeAt(i+3)<<24;case 3:k1^=key.charCodeAt(i+2)<<16;case 2:k1^=key.charCodeAt(i+1)<<8;case 1:k1^=key.charCodeAt(i);k1=_x86Multiply(k1,c1);k1=_x86Rotl(k1,15);k1=_x86Multiply(k1,c2);h1^=k1;}h1^=key.length;h2^=key.length;h3^=key.length;h4^=key.length;h1+=h2;h1+=h3;h1+=h4;h2+=h1;h3+=h1;h4+=h1;h1=_x86Fmix(h1);h2=_x86Fmix(h2);h3=_x86Fmix(h3);h4=_x86Fmix(h4);h1+=h2;h1+=h3;h1+=h4;h2+=h1;h3+=h1;h4+=h1;return("00000000"+(h1>>>0).toString(16)).slice(-8)+("00000000"+(h2>>>0).toString(16)).slice(-8)+("00000000"+(h3>>>0).toString(16)).slice(-8)+("00000000"+(h4>>>0).toString(16)).slice(-8);};library.x64.hash128=function(key,seed){key=key||'';seed=seed||0;var remainder=key.length%16;var bytes=key.length-remainder;var h1=[0,seed];var h2=[0,seed];var k1=[0,0];var k2=[0,0];var c1=[0x87c37b91,0x114253d5];var c2=[0x4cf5ad43,0x2745937f];for(var i=0;i<bytes;i=i+16){k1=[key.charCodeAt(i+4)&0xff|(key.charCodeAt(i+5)&0xff)<<8|(key.charCodeAt(i+6)&0xff)<<16|(key.charCodeAt(i+7)&0xff)<<24,key.charCodeAt(i)&0xff|(key.charCodeAt(i+1)&0xff)<<8|(key.charCodeAt(i+2)&0xff)<<16|(key.charCodeAt(i+3)&0xff)<<24];k2=[key.charCodeAt(i+12)&0xff|(key.charCodeAt(i+13)&0xff)<<8|(key.charCodeAt(i+14)&0xff)<<16|(key.charCodeAt(i+15)&0xff)<<24,key.charCodeAt(i+8)&0xff|(key.charCodeAt(i+9)&0xff)<<8|(key.charCodeAt(i+10)&0xff)<<16|(key.charCodeAt(i+11)&0xff)<<24];k1=_x64Multiply(k1,c1);k1=_x64Rotl(k1,31);k1=_x64Multiply(k1,c2);h1=_x64Xor(h1,k1);h1=_x64Rotl(h1,27);h1=_x64Add(h1,h2);h1=_x64Add(_x64Multiply(h1,[0,5]),[0,0x52dce729]);k2=_x64Multiply(k2,c2);k2=_x64Rotl(k2,33);k2=_x64Multiply(k2,c1);h2=_x64Xor(h2,k2);h2=_x64Rotl(h2,31);h2=_x64Add(h2,h1);h2=_x64Add(_x64Multiply(h2,[0,5]),[0,0x38495ab5]);}k1=[0,0];k2=[0,0];switch(remainder){case 15:k2=_x64Xor(k2,_x64LeftShift([0,key.charCodeAt(i+14)],48));case 14:k2=_x64Xor(k2,_x64LeftShift([0,key.charCodeAt(i+13)],40));case 13:k2=_x64Xor(k2,_x64LeftShift([0,key.charCodeAt(i+12)],32));case 12:k2=_x64Xor(k2,_x64LeftShift([0,key.charCodeAt(i+11)],24));case 11:k2=_x64Xor(k2,_x64LeftShift([0,key.charCodeAt(i+10)],16));case 10:k2=_x64Xor(k2,_x64LeftShift([0,key.charCodeAt(i+9)],8));case 9:k2=_x64Xor(k2,[0,key.charCodeAt(i+8)]);k2=_x64Multiply(k2,c2);k2=_x64Rotl(k2,33);k2=_x64Multiply(k2,c1);h2=_x64Xor(h2,k2);case 8:k1=_x64Xor(k1,_x64LeftShift([0,key.charCodeAt(i+7)],56));case 7:k1=_x64Xor(k1,_x64LeftShift([0,key.charCodeAt(i+6)],48));case 6:k1=_x64Xor(k1,_x64LeftShift([0,key.charCodeAt(i+5)],40));case 5:k1=_x64Xor(k1,_x64LeftShift([0,key.charCodeAt(i+4)],32));case 4:k1=_x64Xor(k1,_x64LeftShift([0,key.charCodeAt(i+3)],24));case 3:k1=_x64Xor(k1,_x64LeftShift([0,key.charCodeAt(i+2)],16));case 2:k1=_x64Xor(k1,_x64LeftShift([0,key.charCodeAt(i+1)],8));case 1:k1=_x64Xor(k1,[0,key.charCodeAt(i)]);k1=_x64Multiply(k1,c1);k1=_x64Rotl(k1,31);k1=_x64Multiply(k1,c2);h1=_x64Xor(h1,k1);}h1=_x64Xor(h1,[0,key.length]);h2=_x64Xor(h2,[0,key.length]);h1=_x64Add(h1,h2);h2=_x64Add(h2,h1);h1=_x64Fmix(h1);h2=_x64Fmix(h2);h1=_x64Add(h1,h2);h2=_x64Add(h2,h1);return("00000000"+(h1[0]>>>0).toString(16)).slice(-8)+("00000000"+(h1[1]>>>0).toString(16)).slice(-8)+("00000000"+(h2[0]>>>0).toString(16)).slice(-8)+("00000000"+(h2[1]>>>0).toString(16)).slice(-8);};if(true){if(true&&module.exports){exports=module.exports=library;}exports.murmurHash3=library;}else{}})(this);},2008:function(module,__unusedexports,__webpack_require__){"use strict";const Hoek=__webpack_require__(2850);const Any=__webpack_require__(7492);const Cast=__webpack_require__(7622);const Ref=__webpack_require__(1937);const internals={};internals.Alternatives=class extends Any{constructor(){super();this._type='alternatives';this._invalids.remove(null);this._inner.matches=[];}_init(...args){return args.length?this.try(...args):this;}_base(value,state,options){const errors=[];const il=this._inner.matches.length;const baseType=this._baseType;for(let i=0;i<il;++i){const item=this._inner.matches[i];if(!item.schema){const schema=item.peek||item.is;const input=item.is?item.ref(state.reference||state.parent,options):value;const failed=schema._validate(input,null,options,state.parent).errors;if(failed){if(item.otherwise){return item.otherwise._validate(value,state,options);}}else if(item.then){return item.then._validate(value,state,options);}if(i===il-1&&baseType){return baseType._validate(value,state,options);}continue;}const result=item.schema._validate(value,state,options);if(!result.errors){return result;}errors.push(...result.errors);}if(errors.length){return{errors:this.createError('alternatives.child',{reason:errors},state,options)};}return{errors:this.createError('alternatives.base',null,state,options)};}try(...schemas){schemas=Hoek.flatten(schemas);Hoek.assert(schemas.length,'Cannot add other alternatives without at least one schema');const obj=this.clone();for(let i=0;i<schemas.length;++i){const cast=Cast.schema(this._currentJoi,schemas[i]);if(cast._refs.length){obj._refs.push(...cast._refs);}obj._inner.matches.push({schema:cast});}return obj;}when(condition,options){let schemaCondition=false;Hoek.assert(Ref.isRef(condition)||typeof condition==='string'||(schemaCondition=condition instanceof Any),'Invalid condition:',condition);Hoek.assert(options,'Missing options');Hoek.assert(typeof options==='object','Invalid options');if(schemaCondition){Hoek.assert(!options.hasOwnProperty('is'),'"is" can not be used with a schema condition');}else{Hoek.assert(options.hasOwnProperty('is'),'Missing "is" directive');}Hoek.assert(options.then!==undefined||options.otherwise!==undefined,'options must have at least one of "then" or "otherwise"');const obj=this.clone();let is;if(!schemaCondition){is=Cast.schema(this._currentJoi,options.is);if(options.is===null||!(Ref.isRef(options.is)||options.is instanceof Any)){is=is.required();}}const item={ref:schemaCondition?null:Cast.ref(condition),peek:schemaCondition?condition:null,is,then:options.then!==undefined?Cast.schema(this._currentJoi,options.then):undefined,otherwise:options.otherwise!==undefined?Cast.schema(this._currentJoi,options.otherwise):undefined};if(obj._baseType){item.then=item.then&&obj._baseType.concat(item.then);item.otherwise=item.otherwise&&obj._baseType.concat(item.otherwise);}if(!schemaCondition){Ref.push(obj._refs,item.ref);obj._refs.push(...item.is._refs);}if(item.then&&item.then._refs.length){obj._refs.push(...item.then._refs);}if(item.otherwise&&item.otherwise._refs.length){obj._refs.push(...item.otherwise._refs);}obj._inner.matches.push(item);return obj;}label(name){const obj=super.label(name);obj._inner.matches=obj._inner.matches.map(match=>{if(match.schema){return{schema:match.schema.label(name)};}match=Object.assign({},match);if(match.then){match.then=match.then.label(name);}if(match.otherwise){match.otherwise=match.otherwise.label(name);}return match;});return obj;}describe(){const description=super.describe();const alternatives=[];for(let i=0;i<this._inner.matches.length;++i){const item=this._inner.matches[i];if(item.schema){alternatives.push(item.schema.describe());}else{const when=item.is?{ref:item.ref.toString(),is:item.is.describe()}:{peek:item.peek.describe()};if(item.then){when.then=item.then.describe();}if(item.otherwise){when.otherwise=item.otherwise.describe();}alternatives.push(when);}}description.alternatives=alternatives;return description;}};module.exports=new internals.Alternatives();},2018:function(module,__unusedexports,__webpack_require__){"use strict";const stream=__webpack_require__(2817);const varint=__webpack_require__(2572);const duplexify=__webpack_require__(7454);const debug=__webpack_require__(746);const Channel=__webpack_require__(4253);const SIGNAL_FLUSH=Buffer.from([0]);const empty=Buffer.alloc(0);let pool=Buffer.alloc(10*1024);let used=0;class Multiplex extends stream.Duplex{constructor(opts,onchannel){super();if(typeof opts==='function'){onchannel=opts;opts={};}if(!opts){opts={};}if(onchannel){this.on('stream',onchannel);}this.destroyed=false;this.limit=opts.limit||0;if(opts.initiator==null){opts.initiator=true;}this.initiator=opts.initiator;this._corked=0;this._options=opts;this._binaryName=Boolean(opts.binaryName);this._local=[];this._remote=[];this._list=this._local;this._receiving=null;this._chunked=false;this._state=0;this._type=0;this._channel=0;this._missing=0;this._message=null;this.log=debug('mplex:main:'+Math.floor(Math.random()*100000));this.log('construction');let bufSize=100;if(this.limit){bufSize=varint.encodingLength(this.limit);}this._buf=Buffer.alloc(bufSize);this._ptr=0;this._awaitChannelDrains=0;this._onwritedrain=null;this._ondrain=[];this._finished=false;this.once('finish',this._clear);this._nextId=this.initiator?0:1;}_nextStreamId(){let id=this._nextId;this._nextId+=2;return id;}createStream(name,opts){if(this.destroyed){throw new Error('Multiplexer is destroyed');}const id=this._nextStreamId();let channelName=this._name(name||id.toString());const options=Object.assign(this._options,opts);this.log('createStream: %s',id,channelName.toString(),options);const channel=new Channel(channelName,this,options);return this._addChannel(channel,id,this._local);}receiveStream(name,opts){if(this.destroyed){throw new Error('Multiplexer is destroyed');}if(name===undefined||name===null){throw new Error('Name is needed when receiving a stream');}const channelName=this._name(name);this.log('receiveStream: '+channelName.toString());const channel=new Channel(channelName,this,Object.assign(this._options,opts));if(!this._receiving){this._receiving={};}if(this._receiving[channel.name]){throw new Error('You are already receiving this stream');}this._receiving[channel.name]=channel;return channel;}createSharedStream(name,opts){this.log('createSharedStream');return duplexify(this.createStream(name,Object.assign(opts,{lazy:true})),this.receiveStream(name,opts));}_name(name){if(!this._binaryName){return name.toString();}return Buffer.isBuffer(name)?name:Buffer.from(name);}_send(header,data){const len=data?data.length:0;const oldUsed=used;this.log('_send',header,len);varint.encode(header,pool,used);used+=varint.encode.bytes;varint.encode(len,pool,used);used+=varint.encode.bytes;let buf=pool.slice(oldUsed,used);if(pool.length-used<100){pool=Buffer.alloc(10*1024);used=0;}if(data){buf=Buffer.concat([buf,data]);}return this.push(buf);}_addChannel(channel,id,list){this.log('_addChannel',id);list[id]=channel;channel.on('finalize',()=>{this.log('_remove channel',id);list[id]=null;});channel.open(id,list===this._local);return channel;}_writeVarint(data,offset){for(offset;offset<data.length;offset++){if(this._ptr===this._buf.length){return this._lengthError(data);}this._buf[this._ptr++]=data[offset];if(!(data[offset]&0x80)){if(this._state===0){const header=varint.decode(this._buf);this._type=header&7;this._channel=header>>3;this._list=this._type&1?this._local:this._remote;const chunked=this._list.length>this._channel&&this._list[this._channel]&&this._list[this._channel].chunked;this._chunked=Boolean(this._type===1||this._type===2)&&chunked;}else{this._missing=varint.decode(this._buf);if(this.limit&&this._missing>this.limit){return this._lengthError(data);}}this._state++;this._ptr=0;return offset+1;}}return data.length;}_lengthError(data){this.destroy(new Error('Incoming message is too big'));return data.length;}_writeMessage(data,offset){const free=data.length-offset;const missing=this._missing;if(!this._message){if(missing<=free){this._missing=0;this._push(data.slice(offset,offset+missing));return offset+missing;}if(this._chunked){this._missing-=free;this._push(data.slice(offset,data.length));return data.length;}this._message=Buffer.alloc(missing);}data.copy(this._message,this._ptr,offset,offset+missing);if(missing<=free){this._missing=0;this._push(this._message);return offset+missing;}this._missing-=free;this._ptr+=free;return data.length;}_push(data){this.log('_push',data.length);if(!this._missing){this._ptr=0;this._state=0;this._message=null;}if(this._type===0){this.log('open',this._channel);if(this.destroyed||this._finished){return;}let name;if(this._binaryName){name=data;}else{name=data.toString()||this._channel.toString();}this.log('open name',name);let channel;if(this._receiving&&this._receiving[name]){channel=this._receiving[name];delete this._receiving[name];this._addChannel(channel,this._channel,this._list);}else{channel=new Channel(name,this,this._options);this.emit('stream',this._addChannel(channel,this._channel,this._list),channel.name);}return;}const stream=this._list[this._channel];if(!stream){return;}switch(this._type){case 5:case 6:{const error=new Error(data.toString()||'Channel destroyed');stream.local=false;stream.destroy(error);return;}case 3:case 4:{stream.push(null);return;}case 1:case 2:if(!stream.push(data)){this._awaitChannelDrains++;stream._awaitDrain++;}break;default:}}_onchanneldrain(drained){this._awaitChannelDrains-=drained;if(this._awaitChannelDrains){return;}const ondrain=this._onwritedrain;this._onwritedrain=null;if(ondrain){ondrain();}}_write(data,enc,cb){this.log('_write',data.length);if(this._finished){cb();return;}if(this._corked){this._onuncork(this._write.bind(this,data,enc,cb));return;}if(data===SIGNAL_FLUSH){this._finish(cb);return;}let offset=0;while(offset<data.length){if(this._state===2){offset=this._writeMessage(data,offset);}else{offset=this._writeVarint(data,offset);}}if(this._state===2&&!this._missing){this._push(empty);}if(this._awaitChannelDrains){this._onwritedrain=cb;}else{cb();}}_finish(cb){this._onuncork(()=>{if(this._writableState.prefinished===false){this._writableState.prefinished=true;}this.emit('prefinish');this._onuncork(cb);});}cork(){if(++this._corked===1){this.emit('cork');}}uncork(){if(this._corked&&--this._corked===0){this.emit('uncork');}}end(data,enc,cb){this.log('end');if(typeof data==='function'){cb=data;data=undefined;}if(typeof enc==='function'){cb=enc;enc=undefined;}if(data){this.write(data);}if(!this._writableState.ending){this.write(SIGNAL_FLUSH);}return stream.Writable.prototype.end.call(this,cb);}_onuncork(fn){if(this._corked){this.once('uncork',fn);return;}fn();}_read(){while(this._ondrain.length){this._ondrain.shift()();}}_clear(){this.log('_clear');if(this._finished){return;}this._finished=true;const list=this._local.concat(this._remote);this._local=[];this._remote=[];list.forEach(function(stream){if(stream){stream.local=false;stream.destroy(null);}});this.push(null);}finalize(){this._clear();}_destroy(err,callback){this.log('destroy');const list=this._local.concat(this._remote);list.forEach(function(stream){if(stream){stream.destroy(err||new Error('Channel destroyed'));}});this._clear();callback(err);}}module.exports=Multiplex;},2020:function(module,__unusedexports,__webpack_require__){"use strict";var curve=__webpack_require__(8958);var elliptic=__webpack_require__(3459);var BN=__webpack_require__(5584);var inherits=__webpack_require__(92);var Base=curve.base;var assert=elliptic.utils.assert;function ShortCurve(conf){Base.call(this,'short',conf);this.a=new BN(conf.a,16).toRed(this.red);this.b=new BN(conf.b,16).toRed(this.red);this.tinv=this.two.redInvm();this.zeroA=this.a.fromRed().cmpn(0)===0;this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0;this.endo=this._getEndomorphism(conf);this._endoWnafT1=new Array(4);this._endoWnafT2=new Array(4);}inherits(ShortCurve,Base);module.exports=ShortCurve;ShortCurve.prototype._getEndomorphism=function _getEndomorphism(conf){if(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)return;var beta;var lambda;if(conf.beta){beta=new BN(conf.beta,16).toRed(this.red);}else{var betas=this._getEndoRoots(this.p);beta=betas[0].cmp(betas[1])<0?betas[0]:betas[1];beta=beta.toRed(this.red);}if(conf.lambda){lambda=new BN(conf.lambda,16);}else{var lambdas=this._getEndoRoots(this.n);if(this.g.mul(lambdas[0]).x.cmp(this.g.x.redMul(beta))===0){lambda=lambdas[0];}else{lambda=lambdas[1];assert(this.g.mul(lambda).x.cmp(this.g.x.redMul(beta))===0);}}var basis;if(conf.basis){basis=conf.basis.map(function(vec){return{a:new BN(vec.a,16),b:new BN(vec.b,16)};});}else{basis=this._getEndoBasis(lambda);}return{beta:beta,lambda:lambda,basis:basis};};ShortCurve.prototype._getEndoRoots=function _getEndoRoots(num){var red=num===this.p?this.red:BN.mont(num);var tinv=new BN(2).toRed(red).redInvm();var ntinv=tinv.redNeg();var s=new BN(3).toRed(red).redNeg().redSqrt().redMul(tinv);var l1=ntinv.redAdd(s).fromRed();var l2=ntinv.redSub(s).fromRed();return[l1,l2];};ShortCurve.prototype._getEndoBasis=function _getEndoBasis(lambda){var aprxSqrt=this.n.ushrn(Math.floor(this.n.bitLength()/2));var u=lambda;var v=this.n.clone();var x1=new BN(1);var y1=new BN(0);var x2=new BN(0);var y2=new BN(1);var a0;var b0;var a1;var b1;var a2;var b2;var prevR;var i=0;var r;var x;while(u.cmpn(0)!==0){var q=v.div(u);r=v.sub(q.mul(u));x=x2.sub(q.mul(x1));var y=y2.sub(q.mul(y1));if(!a1&&r.cmp(aprxSqrt)<0){a0=prevR.neg();b0=x1;a1=r.neg();b1=x;}else if(a1&&++i===2){break;}prevR=r;v=u;u=r;x2=x1;x1=x;y2=y1;y1=y;}a2=r.neg();b2=x;var len1=a1.sqr().add(b1.sqr());var len2=a2.sqr().add(b2.sqr());if(len2.cmp(len1)>=0){a2=a0;b2=b0;}if(a1.negative){a1=a1.neg();b1=b1.neg();}if(a2.negative){a2=a2.neg();b2=b2.neg();}return[{a:a1,b:b1},{a:a2,b:b2}];};ShortCurve.prototype._endoSplit=function _endoSplit(k){var basis=this.endo.basis;var v1=basis[0];var v2=basis[1];var c1=v2.b.mul(k).divRound(this.n);var c2=v1.b.neg().mul(k).divRound(this.n);var p1=c1.mul(v1.a);var p2=c2.mul(v2.a);var q1=c1.mul(v1.b);var q2=c2.mul(v2.b);var k1=k.sub(p1).sub(p2);var k2=q1.add(q2).neg();return{k1:k1,k2:k2};};ShortCurve.prototype.pointFromX=function pointFromX(x,odd){x=new BN(x,16);if(!x.red)x=x.toRed(this.red);var y2=x.redSqr().redMul(x).redIAdd(x.redMul(this.a)).redIAdd(this.b);var y=y2.redSqrt();if(y.redSqr().redSub(y2).cmp(this.zero)!==0)throw new Error('invalid point');var isOdd=y.fromRed().isOdd();if(odd&&!isOdd||!odd&&isOdd)y=y.redNeg();return this.point(x,y);};ShortCurve.prototype.validate=function validate(point){if(point.inf)return true;var x=point.x;var y=point.y;var ax=this.a.redMul(x);var rhs=x.redSqr().redMul(x).redIAdd(ax).redIAdd(this.b);return y.redSqr().redISub(rhs).cmpn(0)===0;};ShortCurve.prototype._endoWnafMulAdd=function _endoWnafMulAdd(points,coeffs,jacobianResult){var npoints=this._endoWnafT1;var ncoeffs=this._endoWnafT2;for(var i=0;i<points.length;i++){var split=this._endoSplit(coeffs[i]);var p=points[i];var beta=p._getBeta();if(split.k1.negative){split.k1.ineg();p=p.neg(true);}if(split.k2.negative){split.k2.ineg();beta=beta.neg(true);}npoints[i*2]=p;npoints[i*2+1]=beta;ncoeffs[i*2]=split.k1;ncoeffs[i*2+1]=split.k2;}var res=this._wnafMulAdd(1,npoints,ncoeffs,i*2,jacobianResult);for(var j=0;j<i*2;j++){npoints[j]=null;ncoeffs[j]=null;}return res;};function Point(curve,x,y,isRed){Base.BasePoint.call(this,curve,'affine');if(x===null&&y===null){this.x=null;this.y=null;this.inf=true;}else{this.x=new BN(x,16);this.y=new BN(y,16);if(isRed){this.x.forceRed(this.curve.red);this.y.forceRed(this.curve.red);}if(!this.x.red)this.x=this.x.toRed(this.curve.red);if(!this.y.red)this.y=this.y.toRed(this.curve.red);this.inf=false;}}inherits(Point,Base.BasePoint);ShortCurve.prototype.point=function point(x,y,isRed){return new Point(this,x,y,isRed);};ShortCurve.prototype.pointFromJSON=function pointFromJSON(obj,red){return Point.fromJSON(this,obj,red);};Point.prototype._getBeta=function _getBeta(){if(!this.curve.endo)return;var pre=this.precomputed;if(pre&&pre.beta)return pre.beta;var beta=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(pre){var curve=this.curve;var endoMul=function(p){return curve.point(p.x.redMul(curve.endo.beta),p.y);};pre.beta=beta;beta.precomputed={beta:null,naf:pre.naf&&{wnd:pre.naf.wnd,points:pre.naf.points.map(endoMul)},doubles:pre.doubles&&{step:pre.doubles.step,points:pre.doubles.points.map(endoMul)}};}return beta;};Point.prototype.toJSON=function toJSON(){if(!this.precomputed)return[this.x,this.y];return[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}];};Point.fromJSON=function fromJSON(curve,obj,red){if(typeof obj==='string')obj=JSON.parse(obj);var res=curve.point(obj[0],obj[1],red);if(!obj[2])return res;function obj2point(obj){return curve.point(obj[0],obj[1],red);}var pre=obj[2];res.precomputed={beta:null,doubles:pre.doubles&&{step:pre.doubles.step,points:[res].concat(pre.doubles.points.map(obj2point))},naf:pre.naf&&{wnd:pre.naf.wnd,points:[res].concat(pre.naf.points.map(obj2point))}};return res;};Point.prototype.inspect=function inspect(){if(this.isInfinity())return'<EC Point Infinity>';return'<EC Point x: '+this.x.fromRed().toString(16,2)+' y: '+this.y.fromRed().toString(16,2)+'>';};Point.prototype.isInfinity=function isInfinity(){return this.inf;};Point.prototype.add=function add(p){if(this.inf)return p;if(p.inf)return this;if(this.eq(p))return this.dbl();if(this.neg().eq(p))return this.curve.point(null,null);if(this.x.cmp(p.x)===0)return this.curve.point(null,null);var c=this.y.redSub(p.y);if(c.cmpn(0)!==0)c=c.redMul(this.x.redSub(p.x).redInvm());var nx=c.redSqr().redISub(this.x).redISub(p.x);var ny=c.redMul(this.x.redSub(nx)).redISub(this.y);return this.curve.point(nx,ny);};Point.prototype.dbl=function dbl(){if(this.inf)return this;var ys1=this.y.redAdd(this.y);if(ys1.cmpn(0)===0)return this.curve.point(null,null);var a=this.curve.a;var x2=this.x.redSqr();var dyinv=ys1.redInvm();var c=x2.redAdd(x2).redIAdd(x2).redIAdd(a).redMul(dyinv);var nx=c.redSqr().redISub(this.x.redAdd(this.x));var ny=c.redMul(this.x.redSub(nx)).redISub(this.y);return this.curve.point(nx,ny);};Point.prototype.getX=function getX(){return this.x.fromRed();};Point.prototype.getY=function getY(){return this.y.fromRed();};Point.prototype.mul=function mul(k){k=new BN(k,16);if(this._hasDoubles(k))return this.curve._fixedNafMul(this,k);else if(this.curve.endo)return this.curve._endoWnafMulAdd([this],[k]);else return this.curve._wnafMul(this,k);};Point.prototype.mulAdd=function mulAdd(k1,p2,k2){var points=[this,p2];var coeffs=[k1,k2];if(this.curve.endo)return this.curve._endoWnafMulAdd(points,coeffs);else return this.curve._wnafMulAdd(1,points,coeffs,2);};Point.prototype.jmulAdd=function jmulAdd(k1,p2,k2){var points=[this,p2];var coeffs=[k1,k2];if(this.curve.endo)return this.curve._endoWnafMulAdd(points,coeffs,true);else return this.curve._wnafMulAdd(1,points,coeffs,2,true);};Point.prototype.eq=function eq(p){return this===p||this.inf===p.inf&&(this.inf||this.x.cmp(p.x)===0&&this.y.cmp(p.y)===0);};Point.prototype.neg=function neg(_precompute){if(this.inf)return this;var res=this.curve.point(this.x,this.y.redNeg());if(_precompute&&this.precomputed){var pre=this.precomputed;var negate=function(p){return p.neg();};res.precomputed={naf:pre.naf&&{wnd:pre.naf.wnd,points:pre.naf.points.map(negate)},doubles:pre.doubles&&{step:pre.doubles.step,points:pre.doubles.points.map(negate)}};}return res;};Point.prototype.toJ=function toJ(){if(this.inf)return this.curve.jpoint(null,null,null);var res=this.curve.jpoint(this.x,this.y,this.curve.one);return res;};function JPoint(curve,x,y,z){Base.BasePoint.call(this,curve,'jacobian');if(x===null&&y===null&&z===null){this.x=this.curve.one;this.y=this.curve.one;this.z=new BN(0);}else{this.x=new BN(x,16);this.y=new BN(y,16);this.z=new BN(z,16);}if(!this.x.red)this.x=this.x.toRed(this.curve.red);if(!this.y.red)this.y=this.y.toRed(this.curve.red);if(!this.z.red)this.z=this.z.toRed(this.curve.red);this.zOne=this.z===this.curve.one;}inherits(JPoint,Base.BasePoint);ShortCurve.prototype.jpoint=function jpoint(x,y,z){return new JPoint(this,x,y,z);};JPoint.prototype.toP=function toP(){if(this.isInfinity())return this.curve.point(null,null);var zinv=this.z.redInvm();var zinv2=zinv.redSqr();var ax=this.x.redMul(zinv2);var ay=this.y.redMul(zinv2).redMul(zinv);return this.curve.point(ax,ay);};JPoint.prototype.neg=function neg(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z);};JPoint.prototype.add=function add(p){if(this.isInfinity())return p;if(p.isInfinity())return this;var pz2=p.z.redSqr();var z2=this.z.redSqr();var u1=this.x.redMul(pz2);var u2=p.x.redMul(z2);var s1=this.y.redMul(pz2.redMul(p.z));var s2=p.y.redMul(z2.redMul(this.z));var h=u1.redSub(u2);var r=s1.redSub(s2);if(h.cmpn(0)===0){if(r.cmpn(0)!==0)return this.curve.jpoint(null,null,null);else return this.dbl();}var h2=h.redSqr();var h3=h2.redMul(h);var v=u1.redMul(h2);var nx=r.redSqr().redIAdd(h3).redISub(v).redISub(v);var ny=r.redMul(v.redISub(nx)).redISub(s1.redMul(h3));var nz=this.z.redMul(p.z).redMul(h);return this.curve.jpoint(nx,ny,nz);};JPoint.prototype.mixedAdd=function mixedAdd(p){if(this.isInfinity())return p.toJ();if(p.isInfinity())return this;var z2=this.z.redSqr();var u1=this.x;var u2=p.x.redMul(z2);var s1=this.y;var s2=p.y.redMul(z2).redMul(this.z);var h=u1.redSub(u2);var r=s1.redSub(s2);if(h.cmpn(0)===0){if(r.cmpn(0)!==0)return this.curve.jpoint(null,null,null);else return this.dbl();}var h2=h.redSqr();var h3=h2.redMul(h);var v=u1.redMul(h2);var nx=r.redSqr().redIAdd(h3).redISub(v).redISub(v);var ny=r.redMul(v.redISub(nx)).redISub(s1.redMul(h3));var nz=this.z.redMul(h);return this.curve.jpoint(nx,ny,nz);};JPoint.prototype.dblp=function dblp(pow){if(pow===0)return this;if(this.isInfinity())return this;if(!pow)return this.dbl();if(this.curve.zeroA||this.curve.threeA){var r=this;for(var i=0;i<pow;i++)r=r.dbl();return r;}var a=this.curve.a;var tinv=this.curve.tinv;var jx=this.x;var jy=this.y;var jz=this.z;var jz4=jz.redSqr().redSqr();var jyd=jy.redAdd(jy);for(var i=0;i<pow;i++){var jx2=jx.redSqr();var jyd2=jyd.redSqr();var jyd4=jyd2.redSqr();var c=jx2.redAdd(jx2).redIAdd(jx2).redIAdd(a.redMul(jz4));var t1=jx.redMul(jyd2);var nx=c.redSqr().redISub(t1.redAdd(t1));var t2=t1.redISub(nx);var dny=c.redMul(t2);dny=dny.redIAdd(dny).redISub(jyd4);var nz=jyd.redMul(jz);if(i+1<pow)jz4=jz4.redMul(jyd4);jx=nx;jz=nz;jyd=dny;}return this.curve.jpoint(jx,jyd.redMul(tinv),jz);};JPoint.prototype.dbl=function dbl(){if(this.isInfinity())return this;if(this.curve.zeroA)return this._zeroDbl();else if(this.curve.threeA)return this._threeDbl();else return this._dbl();};JPoint.prototype._zeroDbl=function _zeroDbl(){var nx;var ny;var nz;if(this.zOne){var xx=this.x.redSqr();var yy=this.y.redSqr();var yyyy=yy.redSqr();var s=this.x.redAdd(yy).redSqr().redISub(xx).redISub(yyyy);s=s.redIAdd(s);var m=xx.redAdd(xx).redIAdd(xx);var t=m.redSqr().redISub(s).redISub(s);var yyyy8=yyyy.redIAdd(yyyy);yyyy8=yyyy8.redIAdd(yyyy8);yyyy8=yyyy8.redIAdd(yyyy8);nx=t;ny=m.redMul(s.redISub(t)).redISub(yyyy8);nz=this.y.redAdd(this.y);}else{var a=this.x.redSqr();var b=this.y.redSqr();var c=b.redSqr();var d=this.x.redAdd(b).redSqr().redISub(a).redISub(c);d=d.redIAdd(d);var e=a.redAdd(a).redIAdd(a);var f=e.redSqr();var c8=c.redIAdd(c);c8=c8.redIAdd(c8);c8=c8.redIAdd(c8);nx=f.redISub(d).redISub(d);ny=e.redMul(d.redISub(nx)).redISub(c8);nz=this.y.redMul(this.z);nz=nz.redIAdd(nz);}return this.curve.jpoint(nx,ny,nz);};JPoint.prototype._threeDbl=function _threeDbl(){var nx;var ny;var nz;if(this.zOne){var xx=this.x.redSqr();var yy=this.y.redSqr();var yyyy=yy.redSqr();var s=this.x.redAdd(yy).redSqr().redISub(xx).redISub(yyyy);s=s.redIAdd(s);var m=xx.redAdd(xx).redIAdd(xx).redIAdd(this.curve.a);var t=m.redSqr().redISub(s).redISub(s);nx=t;var yyyy8=yyyy.redIAdd(yyyy);yyyy8=yyyy8.redIAdd(yyyy8);yyyy8=yyyy8.redIAdd(yyyy8);ny=m.redMul(s.redISub(t)).redISub(yyyy8);nz=this.y.redAdd(this.y);}else{var delta=this.z.redSqr();var gamma=this.y.redSqr();var beta=this.x.redMul(gamma);var alpha=this.x.redSub(delta).redMul(this.x.redAdd(delta));alpha=alpha.redAdd(alpha).redIAdd(alpha);var beta4=beta.redIAdd(beta);beta4=beta4.redIAdd(beta4);var beta8=beta4.redAdd(beta4);nx=alpha.redSqr().redISub(beta8);nz=this.y.redAdd(this.z).redSqr().redISub(gamma).redISub(delta);var ggamma8=gamma.redSqr();ggamma8=ggamma8.redIAdd(ggamma8);ggamma8=ggamma8.redIAdd(ggamma8);ggamma8=ggamma8.redIAdd(ggamma8);ny=alpha.redMul(beta4.redISub(nx)).redISub(ggamma8);}return this.curve.jpoint(nx,ny,nz);};JPoint.prototype._dbl=function _dbl(){var a=this.curve.a;var jx=this.x;var jy=this.y;var jz=this.z;var jz4=jz.redSqr().redSqr();var jx2=jx.redSqr();var jy2=jy.redSqr();var c=jx2.redAdd(jx2).redIAdd(jx2).redIAdd(a.redMul(jz4));var jxd4=jx.redAdd(jx);jxd4=jxd4.redIAdd(jxd4);var t1=jxd4.redMul(jy2);var nx=c.redSqr().redISub(t1.redAdd(t1));var t2=t1.redISub(nx);var jyd8=jy2.redSqr();jyd8=jyd8.redIAdd(jyd8);jyd8=jyd8.redIAdd(jyd8);jyd8=jyd8.redIAdd(jyd8);var ny=c.redMul(t2).redISub(jyd8);var nz=jy.redAdd(jy).redMul(jz);return this.curve.jpoint(nx,ny,nz);};JPoint.prototype.trpl=function trpl(){if(!this.curve.zeroA)return this.dbl().add(this);var xx=this.x.redSqr();var yy=this.y.redSqr();var zz=this.z.redSqr();var yyyy=yy.redSqr();var m=xx.redAdd(xx).redIAdd(xx);var mm=m.redSqr();var e=this.x.redAdd(yy).redSqr().redISub(xx).redISub(yyyy);e=e.redIAdd(e);e=e.redAdd(e).redIAdd(e);e=e.redISub(mm);var ee=e.redSqr();var t=yyyy.redIAdd(yyyy);t=t.redIAdd(t);t=t.redIAdd(t);t=t.redIAdd(t);var u=m.redIAdd(e).redSqr().redISub(mm).redISub(ee).redISub(t);var yyu4=yy.redMul(u);yyu4=yyu4.redIAdd(yyu4);yyu4=yyu4.redIAdd(yyu4);var nx=this.x.redMul(ee).redISub(yyu4);nx=nx.redIAdd(nx);nx=nx.redIAdd(nx);var ny=this.y.redMul(u.redMul(t.redISub(u)).redISub(e.redMul(ee)));ny=ny.redIAdd(ny);ny=ny.redIAdd(ny);ny=ny.redIAdd(ny);var nz=this.z.redAdd(e).redSqr().redISub(zz).redISub(ee);return this.curve.jpoint(nx,ny,nz);};JPoint.prototype.mul=function mul(k,kbase){k=new BN(k,kbase);return this.curve._wnafMul(this,k);};JPoint.prototype.eq=function eq(p){if(p.type==='affine')return this.eq(p.toJ());if(this===p)return true;var z2=this.z.redSqr();var pz2=p.z.redSqr();if(this.x.redMul(pz2).redISub(p.x.redMul(z2)).cmpn(0)!==0)return false;var z3=z2.redMul(this.z);var pz3=pz2.redMul(p.z);return this.y.redMul(pz3).redISub(p.y.redMul(z3)).cmpn(0)===0;};JPoint.prototype.eqXToP=function eqXToP(x){var zs=this.z.redSqr();var rx=x.toRed(this.curve.red).redMul(zs);if(this.x.cmp(rx)===0)return true;var xc=x.clone();var t=this.curve.redN.redMul(zs);for(;;){xc.iadd(this.curve.n);if(xc.cmp(this.curve.p)>=0)return false;rx.redIAdd(t);if(this.x.cmp(rx)===0)return true;}};JPoint.prototype.inspect=function inspect(){if(this.isInfinity())return'<EC JPoint Infinity>';return'<EC JPoint x: '+this.x.toString(16,2)+' y: '+this.y.toString(16,2)+' z: '+this.z.toString(16,2)+'>';};JPoint.prototype.isInfinity=function isInfinity(){return this.z.cmpn(0)===0;};},2039:function(module,__unusedexports,__webpack_require__){"use strict";var pna=__webpack_require__(88);module.exports=Writable;function WriteReq(chunk,encoding,cb){this.chunk=chunk;this.encoding=encoding;this.callback=cb;this.next=null;}function CorkedRequest(state){var _this=this;this.next=null;this.entry=null;this.finish=function(){onCorkedFinish(_this,state);};}var asyncWrite=!process.browser&&['v0.10','v0.9.'].indexOf(process.version.slice(0,5))>-1?setImmediate:pna.nextTick;var Duplex;Writable.WritableState=WritableState;var util=__webpack_require__(5548);util.inherits=__webpack_require__(92);var internalUtil={deprecate:__webpack_require__(8008)};var Stream=__webpack_require__(3645);var Buffer=__webpack_require__(7572).Buffer;var OurUint8Array=global.Uint8Array||function(){};function _uint8ArrayToBuffer(chunk){return Buffer.from(chunk);}function _isUint8Array(obj){return Buffer.isBuffer(obj)||obj instanceof OurUint8Array;}var destroyImpl=__webpack_require__(5969);util.inherits(Writable,Stream);function nop(){}function WritableState(options,stream){Duplex=Duplex||__webpack_require__(7371);options=options||{};var isDuplex=stream instanceof Duplex;this.objectMode=!!options.objectMode;if(isDuplex)this.objectMode=this.objectMode||!!options.writableObjectMode;var hwm=options.highWaterMark;var writableHwm=options.writableHighWaterMark;var defaultHwm=this.objectMode?16:16*1024;if(hwm||hwm===0)this.highWaterMark=hwm;else if(isDuplex&&(writableHwm||writableHwm===0))this.highWaterMark=writableHwm;else this.highWaterMark=defaultHwm;this.highWaterMark=Math.floor(this.highWaterMark);this.finalCalled=false;this.needDrain=false;this.ending=false;this.ended=false;this.finished=false;this.destroyed=false;var noDecode=options.decodeStrings===false;this.decodeStrings=!noDecode;this.defaultEncoding=options.defaultEncoding||'utf8';this.length=0;this.writing=false;this.corked=0;this.sync=true;this.bufferProcessing=false;this.onwrite=function(er){onwrite(stream,er);};this.writecb=null;this.writelen=0;this.bufferedRequest=null;this.lastBufferedRequest=null;this.pendingcb=0;this.prefinished=false;this.errorEmitted=false;this.bufferedRequestCount=0;this.corkedRequestsFree=new CorkedRequest(this);}WritableState.prototype.getBuffer=function getBuffer(){var current=this.bufferedRequest;var out=[];while(current){out.push(current);current=current.next;}return out;};(function(){try{Object.defineProperty(WritableState.prototype,'buffer',{get:internalUtil.deprecate(function(){return this.getBuffer();},'_writableState.buffer is deprecated. Use _writableState.getBuffer '+'instead.','DEP0003')});}catch(_){}})();var realHasInstance;if(typeof Symbol==='function'&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]==='function'){realHasInstance=Function.prototype[Symbol.hasInstance];Object.defineProperty(Writable,Symbol.hasInstance,{value:function(object){if(realHasInstance.call(this,object))return true;if(this!==Writable)return false;return object&&object._writableState instanceof WritableState;}});}else{realHasInstance=function(object){return object instanceof this;};}function Writable(options){Duplex=Duplex||__webpack_require__(7371);if(!realHasInstance.call(Writable,this)&&!(this instanceof Duplex)){return new Writable(options);}this._writableState=new WritableState(options,this);this.writable=true;if(options){if(typeof options.write==='function')this._write=options.write;if(typeof options.writev==='function')this._writev=options.writev;if(typeof options.destroy==='function')this._destroy=options.destroy;if(typeof options.final==='function')this._final=options.final;}Stream.call(this);}Writable.prototype.pipe=function(){this.emit('error',new Error('Cannot pipe, not readable'));};function writeAfterEnd(stream,cb){var er=new Error('write after end');stream.emit('error',er);pna.nextTick(cb,er);}function validChunk(stream,state,chunk,cb){var valid=true;var er=false;if(chunk===null){er=new TypeError('May not write null values to stream');}else if(typeof chunk!=='string'&&chunk!==undefined&&!state.objectMode){er=new TypeError('Invalid non-string/buffer chunk');}if(er){stream.emit('error',er);pna.nextTick(cb,er);valid=false;}return valid;}Writable.prototype.write=function(chunk,encoding,cb){var state=this._writableState;var ret=false;var isBuf=!state.objectMode&&_isUint8Array(chunk);if(isBuf&&!Buffer.isBuffer(chunk)){chunk=_uint8ArrayToBuffer(chunk);}if(typeof encoding==='function'){cb=encoding;encoding=null;}if(isBuf)encoding='buffer';else if(!encoding)encoding=state.defaultEncoding;if(typeof cb!=='function')cb=nop;if(state.ended)writeAfterEnd(this,cb);else if(isBuf||validChunk(this,state,chunk,cb)){state.pendingcb++;ret=writeOrBuffer(this,state,isBuf,chunk,encoding,cb);}return ret;};Writable.prototype.cork=function(){var state=this._writableState;state.corked++;};Writable.prototype.uncork=function(){var state=this._writableState;if(state.corked){state.corked--;if(!state.writing&&!state.corked&&!state.finished&&!state.bufferProcessing&&state.bufferedRequest)clearBuffer(this,state);}};Writable.prototype.setDefaultEncoding=function setDefaultEncoding(encoding){if(typeof encoding==='string')encoding=encoding.toLowerCase();if(!(['hex','utf8','utf-8','ascii','binary','base64','ucs2','ucs-2','utf16le','utf-16le','raw'].indexOf((encoding+'').toLowerCase())>-1))throw new TypeError('Unknown encoding: '+encoding);this._writableState.defaultEncoding=encoding;return this;};function decodeChunk(state,chunk,encoding){if(!state.objectMode&&state.decodeStrings!==false&&typeof chunk==='string'){chunk=Buffer.from(chunk,encoding);}return chunk;}Object.defineProperty(Writable.prototype,'writableHighWaterMark',{enumerable:false,get:function(){return this._writableState.highWaterMark;}});function writeOrBuffer(stream,state,isBuf,chunk,encoding,cb){if(!isBuf){var newChunk=decodeChunk(state,chunk,encoding);if(chunk!==newChunk){isBuf=true;encoding='buffer';chunk=newChunk;}}var len=state.objectMode?1:chunk.length;state.length+=len;var ret=state.length<state.highWaterMark;if(!ret)state.needDrain=true;if(state.writing||state.corked){var last=state.lastBufferedRequest;state.lastBufferedRequest={chunk:chunk,encoding:encoding,isBuf:isBuf,callback:cb,next:null};if(last){last.next=state.lastBufferedRequest;}else{state.bufferedRequest=state.lastBufferedRequest;}state.bufferedRequestCount+=1;}else{doWrite(stream,state,false,len,chunk,encoding,cb);}return ret;}function doWrite(stream,state,writev,len,chunk,encoding,cb){state.writelen=len;state.writecb=cb;state.writing=true;state.sync=true;if(writev)stream._writev(chunk,state.onwrite);else stream._write(chunk,encoding,state.onwrite);state.sync=false;}function onwriteError(stream,state,sync,er,cb){--state.pendingcb;if(sync){pna.nextTick(cb,er);pna.nextTick(finishMaybe,stream,state);stream._writableState.errorEmitted=true;stream.emit('error',er);}else{cb(er);stream._writableState.errorEmitted=true;stream.emit('error',er);finishMaybe(stream,state);}}function onwriteStateUpdate(state){state.writing=false;state.writecb=null;state.length-=state.writelen;state.writelen=0;}function onwrite(stream,er){var state=stream._writableState;var sync=state.sync;var cb=state.writecb;onwriteStateUpdate(state);if(er)onwriteError(stream,state,sync,er,cb);else{var finished=needFinish(state);if(!finished&&!state.corked&&!state.bufferProcessing&&state.bufferedRequest){clearBuffer(stream,state);}if(sync){asyncWrite(afterWrite,stream,state,finished,cb);}else{afterWrite(stream,state,finished,cb);}}}function afterWrite(stream,state,finished,cb){if(!finished)onwriteDrain(stream,state);state.pendingcb--;cb();finishMaybe(stream,state);}function onwriteDrain(stream,state){if(state.length===0&&state.needDrain){state.needDrain=false;stream.emit('drain');}}function clearBuffer(stream,state){state.bufferProcessing=true;var entry=state.bufferedRequest;if(stream._writev&&entry&&entry.next){var l=state.bufferedRequestCount;var buffer=new Array(l);var holder=state.corkedRequestsFree;holder.entry=entry;var count=0;var allBuffers=true;while(entry){buffer[count]=entry;if(!entry.isBuf)allBuffers=false;entry=entry.next;count+=1;}buffer.allBuffers=allBuffers;doWrite(stream,state,true,state.length,buffer,'',holder.finish);state.pendingcb++;state.lastBufferedRequest=null;if(holder.next){state.corkedRequestsFree=holder.next;holder.next=null;}else{state.corkedRequestsFree=new CorkedRequest(state);}state.bufferedRequestCount=0;}else{while(entry){var chunk=entry.chunk;var encoding=entry.encoding;var cb=entry.callback;var len=state.objectMode?1:chunk.length;doWrite(stream,state,false,len,chunk,encoding,cb);entry=entry.next;state.bufferedRequestCount--;if(state.writing){break;}}if(entry===null)state.lastBufferedRequest=null;}state.bufferedRequest=entry;state.bufferProcessing=false;}Writable.prototype._write=function(chunk,encoding,cb){cb(new Error('_write() is not implemented'));};Writable.prototype._writev=null;Writable.prototype.end=function(chunk,encoding,cb){var state=this._writableState;if(typeof chunk==='function'){cb=chunk;chunk=null;encoding=null;}else if(typeof encoding==='function'){cb=encoding;encoding=null;}if(chunk!==null&&chunk!==undefined)this.write(chunk,encoding);if(state.corked){state.corked=1;this.uncork();}if(!state.ending&&!state.finished)endWritable(this,state,cb);};function needFinish(state){return state.ending&&state.length===0&&state.bufferedRequest===null&&!state.finished&&!state.writing;}function callFinal(stream,state){stream._final(function(err){state.pendingcb--;if(err){stream.emit('error',err);}state.prefinished=true;stream.emit('prefinish');finishMaybe(stream,state);});}function prefinish(stream,state){if(!state.prefinished&&!state.finalCalled){if(typeof stream._final==='function'){state.pendingcb++;state.finalCalled=true;pna.nextTick(callFinal,stream,state);}else{state.prefinished=true;stream.emit('prefinish');}}}function finishMaybe(stream,state){var need=needFinish(state);if(need){prefinish(stream,state);if(state.pendingcb===0){state.finished=true;stream.emit('finish');}}return need;}function endWritable(stream,state,cb){state.ending=true;finishMaybe(stream,state);if(cb){if(state.finished)pna.nextTick(cb);else stream.once('finish',cb);}state.ended=true;stream.writable=false;}function onCorkedFinish(corkReq,state,err){var entry=corkReq.entry;corkReq.entry=null;while(entry){var cb=entry.callback;state.pendingcb--;cb(err);entry=entry.next;}if(state.corkedRequestsFree){state.corkedRequestsFree.next=corkReq;}else{state.corkedRequestsFree=corkReq;}}Object.defineProperty(Writable.prototype,'destroyed',{get:function(){if(this._writableState===undefined){return false;}return this._writableState.destroyed;},set:function(value){if(!this._writableState){return;}this._writableState.destroyed=value;}});Writable.prototype.destroy=destroyImpl.destroy;Writable.prototype._undestroy=destroyImpl.undestroy;Writable.prototype._destroy=function(err,cb){this.end();cb(err);};},2041:function(module){module.exports=require("child_process");},2044:function(module,__unusedexports,__webpack_require__){"use strict";const asyncEachSeries=__webpack_require__(9891);const waterfall=__webpack_require__(4265);const dagPB=__webpack_require__(7421);const UnixFS=__webpack_require__(7959);const DAGLink=dagPB.DAGLink;const DAGNode=dagPB.DAGNode;const Dir=__webpack_require__(145);const persist=__webpack_require__(7730);class DirFlat extends Dir{constructor(props,_options){super(props,_options);this._children={};}put(name,value,callback){this.multihash=undefined;this.size=undefined;this._children[name]=value;process.nextTick(callback);}get(name,callback){process.nextTick(()=>callback(null,this._children[name]));}childCount(){return Object.keys(this._children).length;}directChildrenCount(){return this.childCount();}onlyChild(callback){process.nextTick(()=>callback(null,this._children[Object.keys(this._children)[0]]));}eachChildSeries(iterator,callback){asyncEachSeries(Object.keys(this._children),(key,callback)=>{iterator(key,this._children[key],callback);},callback);}flush(path,ipld,source,callback){const links=Object.keys(this._children).map(key=>{const child=this._children[key];return new DAGLink(key,child.size,child.multihash);});const dir=new UnixFS('directory');waterfall([callback=>DAGNode.create(dir.marshal(),links,callback),(node,callback)=>persist(node,ipld,this._options,callback),({cid,node},callback)=>{this.multihash=cid.buffer;this.size=node.size;const pushable={path:path,multihash:cid.buffer,size:node.size};source.push(pushable);callback(null,node);}],callback);}}module.exports=createDirFlat;function createDirFlat(props,_options){return new DirFlat(props,_options);}},2050:function(module,__unusedexports,__webpack_require__){"use strict";var inherits=__webpack_require__(2915);var $=__webpack_require__(5107);var BufferUtil=__webpack_require__(9657);var Input=__webpack_require__(6047);var Output=__webpack_require__(1143);var Sighash=__webpack_require__(9845);var Script=__webpack_require__(5355);var Signature=__webpack_require__(406);var TransactionSignature=__webpack_require__(6877);function PublicKeyInput(){Input.apply(this,arguments);}inherits(PublicKeyInput,Input);PublicKeyInput.prototype.getSignatures=function(transaction,privateKey,index,sigtype){$.checkState(this.output instanceof Output);sigtype=sigtype||Signature.SIGHASH_ALL;var publicKey=privateKey.toPublicKey();if(publicKey.toString()===this.output.script.getPublicKey().toString('hex')){return[new TransactionSignature({publicKey:publicKey,prevTxId:this.prevTxId,outputIndex:this.outputIndex,inputIndex:index,signature:Sighash.sign(transaction,privateKey,sigtype,index,this.output.script),sigtype:sigtype})];}return[];};PublicKeyInput.prototype.addSignature=function(transaction,signature){$.checkState(this.isValidSignature(transaction,signature),'Signature is invalid');this.setScript(Script.buildPublicKeyIn(signature.signature.toDER(),signature.sigtype));return this;};PublicKeyInput.prototype.clearSignatures=function(){this.setScript(Script.empty());return this;};PublicKeyInput.prototype.isFullySigned=function(){return this.script.isPublicKeyIn();};PublicKeyInput.SCRIPT_MAX_SIZE=73;PublicKeyInput.prototype._estimateSize=function(){return PublicKeyInput.SCRIPT_MAX_SIZE;};module.exports=PublicKeyInput;},2064:function(module,__unusedexports,__webpack_require__){"use strict";const Key=__webpack_require__(759).Key;const debug=__webpack_require__(746);const log=debug('repo:version');const versionKey=new Key('version');module.exports=store=>{return{exists(callback){store.has(versionKey,callback);},get(callback){store.get(versionKey,(err,buf)=>{if(err){return callback(err);}callback(null,parseInt(buf.toString().trim(),10));});},set(version,callback){store.put(versionKey,Buffer.from(String(version)),callback);},check(expected,callback){this.get((err,version)=>{if(err){return callback(err);}log('comparing version: %s and %s',version,expected);const compatibleVersion=version===6&&expected===7||expected===6&&version===7;if(version!==expected&&!compatibleVersion){return callback(new Error(`ipfs repo needs migration: expected version v${expected}, found version v${version}`));}callback();});}};};},2071:function(module){"use strict";module.exports=function base64(alphabet){const padding=alphabet.indexOf('=')>-1;const url=alphabet.indexOf('-')>-1&&alphabet.indexOf('_')>-1;return{encode(input){let output='';if(typeof input==='string'){output=Buffer.from(input).toString('base64');}else{output=input.toString('base64');}if(url){output=output.replace(/\+/g,'-').replace(/\//g,'_');}const pad=output.indexOf('=');if(pad>0&&!padding){output=output.substring(0,pad);}return output;},decode(input){for(let char of input){if(alphabet.indexOf(char)<0){throw new Error('invalid base64 character');}}return Buffer.from(input,'base64');}};};},2089:function(module){var onfield=function(f,result){var prefix=f.repeated?'repeated':f.required?'required':'optional';if(f.type==='map')prefix='map<'+f.map.from+','+f.map.to+'>';if(f.oneof)prefix='';var opts=Object.keys(f.options||{}).map(function(key){return key+' = '+f.options[key];}).join(',');if(opts)opts=' ['+opts+']';result.push((prefix?prefix+' ':'')+(f.map==='map'?'':f.type+' ')+f.name+' = '+f.tag+opts+';');return result;};var onmessage=function(m,result){result.push('message '+m.name+' {');if(!m.enums)m.enums=[];m.enums.forEach(function(e){result.push(onenum(e,[]));});if(!m.messages)m.messages=[];m.messages.forEach(function(m){result.push(onmessage(m,[]));});var oneofs={};if(!m.fields)m.fields=[];m.fields.forEach(function(f){if(f.oneof){if(!oneofs[f.oneof])oneofs[f.oneof]=[];oneofs[f.oneof].push(onfield(f,[]));}else{result.push(onfield(f,[]));}});Object.keys(oneofs).forEach(function(n){oneofs[n].unshift('oneof '+n+' {');oneofs[n].push('}');result.push(oneofs[n]);});result.push('}','');return result;};var onenum=function(e,result){result.push('enum '+e.name+' {');if(!e.options)e.options={};var options=onoption(e.options,[]);if(options.length>1){result.push(options.slice(0,-1));}Object.keys(e.values).map(function(v){var val=onenumvalue(e.values[v]);result.push([v+' = '+val+';']);});result.push('}','');return result;};var onenumvalue=function(v,result){var opts=Object.keys(v.options||{}).map(function(key){return key+' = '+v.options[key];}).join(',');if(opts)opts=' ['+opts+']';var val=v.value+opts;return val;};var onoption=function(o,result){var keys=Object.keys(o);keys.forEach(function(option){var v=o[option];if(~option.indexOf('.'))option='('+option+')';var type=typeof v;if(type==='object'){v=onoptionMap(v,[]);if(v.length)result.push('option '+option+' = {',v,'};');}else{if(type==='string'&&option!=='optimize_for')v='"'+v+'"';result.push('option '+option+' = '+v+';');}});if(keys.length>0){result.push('');}return result;};var onoptionMap=function(o,result){var keys=Object.keys(o);keys.forEach(function(k){var v=o[k];var type=typeof v;if(type==='object'){if(Array.isArray(v)){v.forEach(function(v){v=onoptionMap(v,[]);if(v.length)result.push(k+' {',v,'}');});}else{v=onoptionMap(v,[]);if(v.length)result.push(k+' {',v,'}');}}else{if(type==='string')v='"'+v+'"';result.push(k+': '+v);}});return result;};var onservices=function(s,result){result.push('service '+s.name+' {');if(!s.options)s.options={};onoption(s.options,result);if(!s.methods)s.methods=[];s.methods.forEach(function(m){result.push(onrpc(m,[]));});result.push('}','');return result;};var onrpc=function(rpc,result){var def='rpc '+rpc.name+'(';if(rpc.client_streaming)def+='stream ';def+=rpc.input_type+') returns (';if(rpc.server_streaming)def+='stream ';def+=rpc.output_type+')';if(!rpc.options)rpc.options={};var options=onoption(rpc.options,[]);if(options.length>1){result.push(def+' {',options.slice(0,-1),'}');}else{result.push(def+';');}return result;};var indent=function(lvl){return function(line){if(Array.isArray(line))return line.map(indent(lvl+'  ')).join('\n');return lvl+line;};};module.exports=function(schema){var result=[];result.push('syntax = "proto'+schema.syntax+'";','');if(schema.package)result.push('package '+schema.package+';','');if(!schema.options)schema.options={};onoption(schema.options,result);if(!schema.enums)schema.enums=[];schema.enums.forEach(function(e){onenum(e,result);});if(!schema.messages)schema.messages=[];schema.messages.forEach(function(m){onmessage(m,result);});if(schema.services){schema.services.forEach(function(s){onservices(s,result);});}return result.map(indent('')).join('\n');};},2119:function(module,__unusedexports,__webpack_require__){"use strict";var alphabet=__webpack_require__(5247);var build=__webpack_require__(5953);var isValid=__webpack_require__(4518);var clusterWorkerId=__webpack_require__(1437)||0;function seed(seedValue){alphabet.seed(seedValue);return module.exports;}function worker(workerId){clusterWorkerId=workerId;return module.exports;}function characters(newCharacters){if(newCharacters!==undefined){alphabet.characters(newCharacters);}return alphabet.shuffled();}function generate(){return build(clusterWorkerId);}module.exports=generate;module.exports.generate=generate;module.exports.seed=seed;module.exports.worker=worker;module.exports.characters=characters;module.exports.isValid=isValid;},2122:function(module,__unusedexports,__webpack_require__){"use strict";module.exports=__webpack_require__(5369);},2123:function(module,__unusedexports,__webpack_require__){"use strict";const path=__webpack_require__(5897);const glob=__webpack_require__(7618);const pull=__webpack_require__(2885);const file=__webpack_require__(6893);const CID=__webpack_require__(9339);module.exports=function addDefaultAssets(self,log,callback){const initDocsPath=__dirname+'/init-docs';const index=initDocsPath.lastIndexOf(path.sep);pull(pull.values([initDocsPath]),pull.asyncMap((val,cb)=>glob(path.join(val,'/**/*'),{nodir:true},cb)),pull.flatten(),pull.map(element=>{const addPath=element.substring(index+1);return{path:addPath,content:file(element)};}),self.addPullStream(),pull.through(file=>{if(file.path==='init-docs'){const cid=new CID(file.hash);log('to get started, enter:\n');log(`\tjsipfs cat /ipfs/${cid.toBaseEncodedString()}/readme\n`);}}),pull.collect(err=>{if(err){return callback(err);}callback(null,true);}));};},2125:function(module,__unusedexports,__webpack_require__){module.exports=__webpack_require__(2984).createHmac;},2128:function(__unusedmodule,exports){"use strict";exports.ERR_REPO_NOT_INITIALIZED='ERR_REPO_NOT_INITIALIZED';},2138:function(module,__unusedexports,__webpack_require__){"use strict";const Reporter=__webpack_require__(5490).Reporter;const EncoderBuffer=__webpack_require__(5490).EncoderBuffer;const DecoderBuffer=__webpack_require__(5490).DecoderBuffer;const assert=__webpack_require__(809);const tags=['seq','seqof','set','setof','objid','bool','gentime','utctime','null_','enum','int','objDesc','bitstr','bmpstr','charstr','genstr','graphstr','ia5str','iso646str','numstr','octstr','printstr','t61str','unistr','utf8str','videostr'];const methods=['key','obj','use','optional','explicit','implicit','def','choice','any','contains'].concat(tags);const overrided=['_peekTag','_decodeTag','_use','_decodeStr','_decodeObjid','_decodeTime','_decodeNull','_decodeInt','_decodeBool','_decodeList','_encodeComposite','_encodeStr','_encodeObjid','_encodeTime','_encodeNull','_encodeInt','_encodeBool'];function Node(enc,parent){const state={};this._baseState=state;state.enc=enc;state.parent=parent||null;state.children=null;state.tag=null;state.args=null;state.reverseArgs=null;state.choice=null;state.optional=false;state.any=false;state.obj=false;state.use=null;state.useDecoder=null;state.key=null;state['default']=null;state.explicit=null;state.implicit=null;state.contains=null;if(!state.parent){state.children=[];this._wrap();}}module.exports=Node;const stateProps=['enc','parent','children','tag','args','reverseArgs','choice','optional','any','obj','use','alteredUse','key','default','explicit','implicit','contains'];Node.prototype.clone=function clone(){const state=this._baseState;const cstate={};stateProps.forEach(function(prop){cstate[prop]=state[prop];});const res=new this.constructor(cstate.parent);res._baseState=cstate;return res;};Node.prototype._wrap=function wrap(){const state=this._baseState;methods.forEach(function(method){this[method]=function _wrappedMethod(){const clone=new this.constructor(this);state.children.push(clone);return clone[method].apply(clone,arguments);};},this);};Node.prototype._init=function init(body){const state=this._baseState;assert(state.parent===null);body.call(this);state.children=state.children.filter(function(child){return child._baseState.parent===this;},this);assert.equal(state.children.length,1,'Root node can have only one child');};Node.prototype._useArgs=function useArgs(args){const state=this._baseState;const children=args.filter(function(arg){return arg instanceof this.constructor;},this);args=args.filter(function(arg){return!(arg instanceof this.constructor);},this);if(children.length!==0){assert(state.children===null);state.children=children;children.forEach(function(child){child._baseState.parent=this;},this);}if(args.length!==0){assert(state.args===null);state.args=args;state.reverseArgs=args.map(function(arg){if(typeof arg!=='object'||arg.constructor!==Object)return arg;const res={};Object.keys(arg).forEach(function(key){if(key==(key|0))key|=0;const value=arg[key];res[value]=key;});return res;});}};overrided.forEach(function(method){Node.prototype[method]=function _overrided(){const state=this._baseState;throw new Error(method+' not implemented for encoding: '+state.enc);};});tags.forEach(function(tag){Node.prototype[tag]=function _tagMethod(){const state=this._baseState;const args=Array.prototype.slice.call(arguments);assert(state.tag===null);state.tag=tag;this._useArgs(args);return this;};});Node.prototype.use=function use(item){assert(item);const state=this._baseState;assert(state.use===null);state.use=item;return this;};Node.prototype.optional=function optional(){const state=this._baseState;state.optional=true;return this;};Node.prototype.def=function def(val){const state=this._baseState;assert(state['default']===null);state['default']=val;state.optional=true;return this;};Node.prototype.explicit=function explicit(num){const state=this._baseState;assert(state.explicit===null&&state.implicit===null);state.explicit=num;return this;};Node.prototype.implicit=function implicit(num){const state=this._baseState;assert(state.explicit===null&&state.implicit===null);state.implicit=num;return this;};Node.prototype.obj=function obj(){const state=this._baseState;const args=Array.prototype.slice.call(arguments);state.obj=true;if(args.length!==0)this._useArgs(args);return this;};Node.prototype.key=function key(newKey){const state=this._baseState;assert(state.key===null);state.key=newKey;return this;};Node.prototype.any=function any(){const state=this._baseState;state.any=true;return this;};Node.prototype.choice=function choice(obj){const state=this._baseState;assert(state.choice===null);state.choice=obj;this._useArgs(Object.keys(obj).map(function(key){return obj[key];}));return this;};Node.prototype.contains=function contains(item){const state=this._baseState;assert(state.use===null);state.contains=item;return this;};Node.prototype._decode=function decode(input,options){const state=this._baseState;if(state.parent===null)return input.wrapResult(state.children[0]._decode(input,options));let result=state['default'];let present=true;let prevKey=null;if(state.key!==null)prevKey=input.enterKey(state.key);if(state.optional){let tag=null;if(state.explicit!==null)tag=state.explicit;else if(state.implicit!==null)tag=state.implicit;else if(state.tag!==null)tag=state.tag;if(tag===null&&!state.any){const save=input.save();try{if(state.choice===null)this._decodeGeneric(state.tag,input,options);else this._decodeChoice(input,options);present=true;}catch(e){present=false;}input.restore(save);}else{present=this._peekTag(input,tag,state.any);if(input.isError(present))return present;}}let prevObj;if(state.obj&&present)prevObj=input.enterObject();if(present){if(state.explicit!==null){const explicit=this._decodeTag(input,state.explicit);if(input.isError(explicit))return explicit;input=explicit;}const start=input.offset;if(state.use===null&&state.choice===null){let save;if(state.any)save=input.save();const body=this._decodeTag(input,state.implicit!==null?state.implicit:state.tag,state.any);if(input.isError(body))return body;if(state.any)result=input.raw(save);else input=body;}if(options&&options.track&&state.tag!==null)options.track(input.path(),start,input.length,'tagged');if(options&&options.track&&state.tag!==null)options.track(input.path(),input.offset,input.length,'content');if(state.any){}else if(state.choice===null){result=this._decodeGeneric(state.tag,input,options);}else{result=this._decodeChoice(input,options);}if(input.isError(result))return result;if(!state.any&&state.choice===null&&state.children!==null){state.children.forEach(function decodeChildren(child){child._decode(input,options);});}if(state.contains&&(state.tag==='octstr'||state.tag==='bitstr')){const data=new DecoderBuffer(result);result=this._getUse(state.contains,input._reporterState.obj)._decode(data,options);}}if(state.obj&&present)result=input.leaveObject(prevObj);if(state.key!==null&&(result!==null||present===true))input.leaveKey(prevKey,state.key,result);else if(prevKey!==null)input.exitKey(prevKey);return result;};Node.prototype._decodeGeneric=function decodeGeneric(tag,input,options){const state=this._baseState;if(tag==='seq'||tag==='set')return null;if(tag==='seqof'||tag==='setof')return this._decodeList(input,tag,state.args[0],options);else if(/str$/.test(tag))return this._decodeStr(input,tag,options);else if(tag==='objid'&&state.args)return this._decodeObjid(input,state.args[0],state.args[1],options);else if(tag==='objid')return this._decodeObjid(input,null,null,options);else if(tag==='gentime'||tag==='utctime')return this._decodeTime(input,tag,options);else if(tag==='null_')return this._decodeNull(input,options);else if(tag==='bool')return this._decodeBool(input,options);else if(tag==='objDesc')return this._decodeStr(input,tag,options);else if(tag==='int'||tag==='enum')return this._decodeInt(input,state.args&&state.args[0],options);if(state.use!==null){return this._getUse(state.use,input._reporterState.obj)._decode(input,options);}else{return input.error('unknown tag: '+tag);}};Node.prototype._getUse=function _getUse(entity,obj){const state=this._baseState;state.useDecoder=this._use(entity,obj);assert(state.useDecoder._baseState.parent===null);state.useDecoder=state.useDecoder._baseState.children[0];if(state.implicit!==state.useDecoder._baseState.implicit){state.useDecoder=state.useDecoder.clone();state.useDecoder._baseState.implicit=state.implicit;}return state.useDecoder;};Node.prototype._decodeChoice=function decodeChoice(input,options){const state=this._baseState;let result=null;let match=false;Object.keys(state.choice).some(function(key){const save=input.save();const node=state.choice[key];try{const value=node._decode(input,options);if(input.isError(value))return false;result={type:key,value:value};match=true;}catch(e){input.restore(save);return false;}return true;},this);if(!match)return input.error('Choice not matched');return result;};Node.prototype._createEncoderBuffer=function createEncoderBuffer(data){return new EncoderBuffer(data,this.reporter);};Node.prototype._encode=function encode(data,reporter,parent){const state=this._baseState;if(state['default']!==null&&state['default']===data)return;const result=this._encodeValue(data,reporter,parent);if(result===undefined)return;if(this._skipDefault(result,reporter,parent))return;return result;};Node.prototype._encodeValue=function encode(data,reporter,parent){const state=this._baseState;if(state.parent===null)return state.children[0]._encode(data,reporter||new Reporter());let result=null;this.reporter=reporter;if(state.optional&&data===undefined){if(state['default']!==null)data=state['default'];else return;}let content=null;let primitive=false;if(state.any){result=this._createEncoderBuffer(data);}else if(state.choice){result=this._encodeChoice(data,reporter);}else if(state.contains){content=this._getUse(state.contains,parent)._encode(data,reporter);primitive=true;}else if(state.children){content=state.children.map(function(child){if(child._baseState.tag==='null_')return child._encode(null,reporter,data);if(child._baseState.key===null)return reporter.error('Child should have a key');const prevKey=reporter.enterKey(child._baseState.key);if(typeof data!=='object')return reporter.error('Child expected, but input is not object');const res=child._encode(data[child._baseState.key],reporter,data);reporter.leaveKey(prevKey);return res;},this).filter(function(child){return child;});content=this._createEncoderBuffer(content);}else{if(state.tag==='seqof'||state.tag==='setof'){if(!(state.args&&state.args.length===1))return reporter.error('Too many args for : '+state.tag);if(!Array.isArray(data))return reporter.error('seqof/setof, but data is not Array');const child=this.clone();child._baseState.implicit=null;content=this._createEncoderBuffer(data.map(function(item){const state=this._baseState;return this._getUse(state.args[0],data)._encode(item,reporter);},child));}else if(state.use!==null){result=this._getUse(state.use,parent)._encode(data,reporter);}else{content=this._encodePrimitive(state.tag,data);primitive=true;}}if(!state.any&&state.choice===null){const tag=state.implicit!==null?state.implicit:state.tag;const cls=state.implicit===null?'universal':'context';if(tag===null){if(state.use===null)reporter.error('Tag could be omitted only for .use()');}else{if(state.use===null)result=this._encodeComposite(tag,primitive,cls,content);}}if(state.explicit!==null)result=this._encodeComposite(state.explicit,false,'context',result);return result;};Node.prototype._encodeChoice=function encodeChoice(data,reporter){const state=this._baseState;const node=state.choice[data.type];if(!node){assert(false,data.type+' not found in '+JSON.stringify(Object.keys(state.choice)));}return node._encode(data.value,reporter);};Node.prototype._encodePrimitive=function encodePrimitive(tag,data){const state=this._baseState;if(/str$/.test(tag))return this._encodeStr(data,tag);else if(tag==='objid'&&state.args)return this._encodeObjid(data,state.reverseArgs[0],state.args[1]);else if(tag==='objid')return this._encodeObjid(data,null,null);else if(tag==='gentime'||tag==='utctime')return this._encodeTime(data,tag);else if(tag==='null_')return this._encodeNull();else if(tag==='int'||tag==='enum')return this._encodeInt(data,state.args&&state.reverseArgs[0]);else if(tag==='bool')return this._encodeBool(data);else if(tag==='objDesc')return this._encodeStr(data,tag);else throw new Error('Unsupported tag: '+tag);};Node.prototype._isNumstr=function isNumstr(str){return /^[0-9 ]*$/.test(str);};Node.prototype._isPrintstr=function isPrintstr(str){return /^[A-Za-z0-9 '()+,-./:=?]*$/.test(str);};},2147:function(module){"use strict";module.exports=function drain(op,done){var read,abort;function sink(_read){read=_read;if(abort)return sink.abort();(function next(){var loop=true,cbed=false;while(loop){cbed=false;read(null,function(end,data){cbed=true;if(end=end||abort){loop=false;if(done)done(end===true?null:end);else if(end&&end!==true)throw end;}else if(op&&false===op(data)||abort){loop=false;read(abort||true,done||function(){});}else if(!loop){next();}});if(!cbed){loop=false;return;}}})();}sink.abort=function(err,cb){if('function'==typeof err)cb=err,err=true;abort=err||true;if(read)return read(abort,cb||function(){});};return sink;};},2151:function(module,__unusedexports,__webpack_require__){"use strict";const utils=__webpack_require__(2869);const errcode=__webpack_require__(4999);module.exports=dht=>{const log=utils.logger(dht.peerInfo.id,'rpc:put-value');return function putValue(peer,msg,callback){const key=msg.key;log('key: %b',key);const record=msg.record;if(!record){const errMsg=`Empty record from: ${peer.id.toB58String()}`;log.error(errMsg);return callback(errcode(new Error(errMsg),'ERR_EMPTY_RECORD'));}dht._verifyRecordLocally(record,err=>{if(err){log.error(err.message);return callback(err);}record.timeReceived=new Date();const key=utils.bufferToKey(record.key);dht.datastore.put(key,record.serialize(),err=>{if(err){return callback(err);}callback(null,msg);});});};};},2154:function(module,__unusedexports,__webpack_require__){"use strict";const handshake=__webpack_require__(9346);const pullLP=__webpack_require__(8585);const util=__webpack_require__(4639);const writeEncoded=util.writeEncoded;function select(multicodec,callback,log){const stream=handshake({timeout:60*1000},callback);const shake=stream.handshake;log('writing multicodec: '+multicodec);writeEncoded(shake,Buffer.from(multicodec+'\n'),callback);pullLP.decodeFromReader(shake,(err,data)=>{if(err){return callback(err);}const protocol=data.toString().slice(0,-1);if(protocol!==multicodec){return callback(new Error(`"${multicodec}" not supported`),shake.rest());}log('received ack: '+protocol);callback(null,shake.rest());});return stream;}module.exports=select;},2155:function(module,__unusedexports,__webpack_require__){"use strict";const FSM=__webpack_require__(7032);const EventEmitter=__webpack_require__(4859).EventEmitter;const debug=__webpack_require__(746);const log=debug('libp2p');log.error=debug('libp2p:error');const errCode=__webpack_require__(4999);const each=__webpack_require__(4486);const series=__webpack_require__(7644);const parallel=__webpack_require__(4876);const PeerBook=__webpack_require__(5020);const Switch=__webpack_require__(8568);const Ping=__webpack_require__(9197);const WebSockets=__webpack_require__(7181);const ConnectionManager=__webpack_require__(264);const peerRouting=__webpack_require__(6578);const contentRouting=__webpack_require__(2278);const dht=__webpack_require__(5383);const pubsub=__webpack_require__(7980);const getPeerInfo=__webpack_require__(7335);const validateConfig=__webpack_require__(7304).validate;const notStarted=(action,state)=>{return errCode(new Error(`libp2p cannot ${action} when not started; state is ${state}`),'ERR_NODE_NOT_STARTED');};class Node extends EventEmitter{constructor(_options){super();_options=validateConfig(_options);this.datastore=_options.datastore;this.peerInfo=_options.peerInfo;this.peerBook=_options.peerBook||new PeerBook();this._modules=_options.modules;this._config=_options.config;this._isStarted=false;this._transport=[];this._discovery=[];this._switch=new Switch(this.peerInfo,this.peerBook,_options.switch);this._switch.on('error',(...args)=>this.emit('error',...args));this.stats=this._switch.stats;this.connectionManager=new ConnectionManager(this,_options.connectionManager);if(this._modules.streamMuxer){let muxers=this._modules.streamMuxer;muxers.forEach(muxer=>this._switch.connection.addStreamMuxer(muxer));this._switch.connection.reuse();this._switch.connection.enableCircuitRelay(this._config.relay);this._switch.on('peer-mux-established',peerInfo=>{this.emit('peer:connect',peerInfo);this.peerBook.put(peerInfo);});this._switch.on('peer-mux-closed',peerInfo=>{this.emit('peer:disconnect',peerInfo);});}if(this._modules.connEncryption){let cryptos=this._modules.connEncryption;cryptos.forEach(crypto=>{this._switch.connection.crypto(crypto.tag,crypto.encrypt);});}if(this._modules.connProtector){this._switch.protector=this._modules.connProtector;}else if(process.env.LIBP2P_FORCE_PNET){throw new Error('Private network is enforced, but no protector was provided');}if(this._config.EXPERIMENTAL.dht){const DHT=this._modules.dht;const enabledDiscovery=this._config.dht.enabledDiscovery!==false;this._dht=new DHT(this._switch,{kBucketSize:this._config.dht.kBucketSize,enabledDiscovery,datastore:this.datastore,validators:this._config.dht.validators,selectors:this._config.dht.selectors});}if(this._config.EXPERIMENTAL.pubsub){this.pubsub=pubsub(this);}this.peerRouting=peerRouting(this);this.contentRouting=contentRouting(this);this.dht=dht(this);this._getPeerInfo=getPeerInfo(this);Ping.mount(this._switch);this.state=new FSM('STOPPED',{STOPPED:{start:'STARTING',stop:'STOPPED'},STARTING:{done:'STARTED',abort:'STOPPED',stop:'STOPPING'},STARTED:{stop:'STOPPING',start:'STARTED'},STOPPING:{stop:'STOPPING',done:'STOPPED'}});this.state.on('STARTING',()=>{log('libp2p is starting');this._onStarting();});this.state.on('STOPPING',()=>{log('libp2p is stopping');this._onStopping();});this.state.on('STARTED',()=>{log('libp2p has started');this.emit('start');});this.state.on('STOPPED',()=>{log('libp2p has stopped');this.emit('stop');});this.state.on('error',err=>{log.error(err);this.emit('error',err);});}emit(eventName,...args){if(eventName==='error'&&!this._events.error){log.error(...args);}else{super.emit(eventName,...args);}}start(callback=()=>{}){this.once('start',callback);this.state('start');}stop(callback=()=>{}){this.once('stop',callback);this.state('stop');}isStarted(){return this.state?this.state._state==='STARTED':false;}dial(peer,callback){this.dialProtocol(peer,null,callback);}dialProtocol(peer,protocol,callback){if(!this.isStarted()){return callback(notStarted('dial',this.state._state));}if(typeof protocol==='function'){callback=protocol;protocol=undefined;}this._getPeerInfo(peer,(err,peerInfo)=>{if(err){return callback(err);}this._switch.dial(peerInfo,protocol,(err,conn)=>{if(err){return callback(err);}this.peerBook.put(peerInfo);callback(null,conn);});});}dialFSM(peer,protocol,callback){if(!this.isStarted()){return callback(notStarted('dial',this.state._state));}if(typeof protocol==='function'){callback=protocol;protocol=undefined;}this._getPeerInfo(peer,(err,peerInfo)=>{if(err){return callback(err);}const connFSM=this._switch.dialFSM(peerInfo,protocol,err=>{if(!err){this.peerBook.put(peerInfo);}});callback(null,connFSM);});}hangUp(peer,callback){this._getPeerInfo(peer,(err,peerInfo)=>{if(err){return callback(err);}this._switch.hangUp(peerInfo,callback);});}ping(peer,callback){if(!this.isStarted()){return callback(notStarted('ping',this.state._state));}this._getPeerInfo(peer,(err,peerInfo)=>{if(err){return callback(err);}callback(null,new Ping(this._switch,peerInfo));});}handle(protocol,handlerFunc,matchFunc){this._switch.handle(protocol,handlerFunc,matchFunc);}unhandle(protocol){this._switch.unhandle(protocol);}_onStarting(){if(!this._modules.transport){this.emit('error',new Error('no transports were present'));return this.state('abort');}let ws;const maOld=[];const maNew=[];this.peerInfo.multiaddrs.toArray().forEach(ma=>{if(!ma.getPeerId()){maOld.push(ma);maNew.push(ma.encapsulate('/ipfs/'+this.peerInfo.id.toB58String()));}});this.peerInfo.multiaddrs.replace(maOld,maNew);const multiaddrs=this.peerInfo.multiaddrs.toArray();this._modules.transport.forEach(Transport=>{let t;if(typeof Transport==='function'){t=new Transport();}else{t=Transport;}if(t.filter(multiaddrs).length>0){this._switch.transport.add(t.tag||t[Symbol.toStringTag],t);}else if(WebSockets.isWebSockets(t)){ws=t;}this._transport.push(t);});series([cb=>{this.connectionManager.start();this._switch.start(cb);},cb=>{if(ws){this._switch.transport.add(ws.tag||ws.constructor.name,ws);}if(this._modules.peerDiscovery){each(this._modules.peerDiscovery,(D,_cb)=>{let config={};if(D.tag&&this._config.peerDiscovery&&this._config.peerDiscovery[D.tag]){config=this._config.peerDiscovery[D.tag];}const enabled=config.enabled==null?true:config.enabled;if(enabled){let d;if(typeof D==='function'){d=new D(Object.assign({},config,{peerInfo:this.peerInfo}));}else{d=D;}d.on('peer',peerInfo=>this.emit('peer:discovery',peerInfo));this._discovery.push(d);d.start(_cb);}else{_cb();}},cb);}else{cb();}},cb=>{this._isStarted=true;if(this._dht){this._dht.start(cb);}else{cb();}},cb=>{if(this._floodSub){return this._floodSub.start(cb);}cb();},cb=>{const multiaddrs=this.peerInfo.multiaddrs.toArray();multiaddrs.forEach(multiaddr=>{if(!multiaddr.toString().match(/\/p2p-circuit($|\/)/)&&!this._transport.find(transport=>transport.filter(multiaddr).length>0)){this.peerInfo.multiaddrs.delete(multiaddr);}});cb();}],err=>{if(err){log.error(err);this.emit('error',err);return this.state('stop');}this.state('done');});}_onStopping(){series([cb=>{if(this._modules.peerDiscovery){return parallel(this._discovery.map(d=>{return _cb=>d.stop(()=>{_cb();});}),cb);}cb();},cb=>{if(this._floodSub){return this._floodSub.stop(cb);}cb();},cb=>{if(this._dht){return this._dht.stop(cb);}cb();},cb=>{this.connectionManager.stop();this._switch.stop(cb);},cb=>{this._switch.transport.removeAll(cb);}],err=>{if(err){log.error(err);this.emit('error',err);}this.state('done');});}}module.exports=Node;},2167:function(module,__unusedexports,__webpack_require__){"use strict";const cache=__webpack_require__(8671);const varint=__webpack_require__(2572);const each=__webpack_require__(4486);const pull=__webpack_require__(2885);const CID=__webpack_require__(9339);const PeerId=__webpack_require__(1832);const Key=__webpack_require__(759).Key;const c=__webpack_require__(2445);const utils=__webpack_require__(2869);class Providers{constructor(datastore,self,cacheSize){this.datastore=datastore;this._log=utils.logger(self,'providers');this.cleanupInterval=c.PROVIDERS_CLEANUP_INTERVAL;this.provideValidity=c.PROVIDERS_VALIDITY;this.lruCacheSize=cacheSize||c.PROVIDERS_LRU_CACHE_SIZE;this.providers=cache(this.lruCacheSize);}stop(){if(this._cleaner){clearInterval(this._cleaner);this._cleaner=null;}}_cleanup(){this._getProviderCids((err,cids)=>{if(err){return this._log.error('Failed to get cids',err);}each(cids,(cid,cb)=>{this._getProvidersMap(cid,(err,provs)=>{if(err){return cb(err);}provs.forEach((time,provider)=>{this._log('comparing: %s - %s > %s',Date.now(),time,this.provideValidity);if(Date.now()-time>this.provideValidity){provs.delete(provider);}});if(provs.size===0){return this._deleteProvidersMap(cid,cb);}cb();});},err=>{if(err){return this._log.error('Failed to cleanup',err);}this._log('Cleanup successfull');});});}_getProviderCids(callback){pull(this.datastore.query({prefix:c.PROVIDERS_KEY_PREFIX}),pull.map(entry=>{const parts=entry.key.toString().split('/');if(parts.length!==4){this._log.error('incorrectly formatted provider entry in datastore: %s',entry.key);return;}let decoded;try{decoded=utils.decodeBase32(parts[2]);}catch(err){this._log.error('error decoding base32 provider key: %s',parts[2]);return;}let cid;try{cid=new CID(decoded);}catch(err){this._log.error('error converting key to cid from datastore: %s',err.message);}return cid;}),pull.filter(Boolean),pull.collect(callback));}_getProvidersMap(cid,callback){const provs=this.providers.get(makeProviderKey(cid));if(!provs){return loadProviders(this.datastore,cid,callback);}callback(null,provs);}_deleteProvidersMap(cid,callback){const dsKey=makeProviderKey(cid);this.providers.set(dsKey,null);const batch=this.datastore.batch();pull(this.datastore.query({keysOnly:true,prefix:dsKey}),pull.through(entry=>batch.delete(entry.key)),pull.onEnd(err=>{if(err){return callback(err);}batch.commit(callback);}));}get cleanupInterval(){return this._cleanupInterval;}set cleanupInterval(val){this._cleanupInterval=val;if(this._cleaner){clearInterval(this._cleaner);}this._cleaner=setInterval(()=>this._cleanup(),this.cleanupInterval);}addProvider(cid,provider,callback){this._log('addProvider %s',cid.toBaseEncodedString());const dsKey=makeProviderKey(cid);const provs=this.providers.get(dsKey);const next=(err,provs)=>{if(err){return callback(err);}this._log('loaded %s provs',provs.size);const now=Date.now();provs.set(provider,now);this.providers.set(dsKey,provs);writeProviderEntry(this.datastore,cid,provider,now,callback);};if(!provs){loadProviders(this.datastore,cid,next);}else{next(null,provs);}}getProviders(cid,callback){this._log('getProviders %s',cid.toBaseEncodedString());this._getProvidersMap(cid,(err,provs)=>{if(err){return callback(err);}callback(null,Array.from(provs.keys()));});}}function makeProviderKey(cid){return c.PROVIDERS_KEY_PREFIX+utils.encodeBase32(cid.buffer);}function writeProviderEntry(store,cid,peer,time,callback){const dsKey=[makeProviderKey(cid),'/',utils.encodeBase32(peer.id)].join('');store.put(new Key(dsKey),Buffer.from(varint.encode(time)),callback);}function loadProviders(store,cid,callback){pull(store.query({prefix:makeProviderKey(cid)}),pull.map(entry=>{const parts=entry.key.toString().split('/');const lastPart=parts[parts.length-1];const rawPeerId=utils.decodeBase32(lastPart);return[new PeerId(rawPeerId),readTime(entry.value)];}),pull.collect((err,res)=>{if(err){return callback(err);}return callback(null,new Map(res));}));}function readTime(buf){return varint.decode(buf);}module.exports=Providers;},2181:function(module,__unusedexports,__webpack_require__){"use strict";const dagNodeUtil=__webpack_require__(974);const cloneLinks=dagNodeUtil.cloneLinks;const cloneData=dagNodeUtil.cloneData;const toDAGLink=dagNodeUtil.toDAGLink;const DAGLink=__webpack_require__(7545);const DAGNode=__webpack_require__(1758);const create=__webpack_require__(3426);function asDAGLink(link,callback){if(DAGLink.isDAGLink(link)){return callback(null,link);}if(DAGNode.isDAGNode(link)){return toDAGLink(link,{},callback);}try{callback(null,new DAGLink(link.name,link.size,link.multihash||link.hash||link.cid));}catch(err){return callback(err);}}function addLink(node,link,callback){const links=cloneLinks(node);const data=cloneData(node);asDAGLink(link,(error,link)=>{if(error){return callback(error);}links.push(link);create(data,links,callback);});}module.exports=addLink;},2183:function(module,__unusedexports,__webpack_require__){"use strict";module.exports=PassThrough;var Transform=__webpack_require__(8439);__webpack_require__(92)(PassThrough,Transform);function PassThrough(options){if(!(this instanceof PassThrough))return new PassThrough(options);Transform.call(this,options);}PassThrough.prototype._transform=function(chunk,encoding,cb){cb(null,chunk);};},2193:function(module,__unusedexports,__webpack_require__){(function(nacl){'use strict';var gf=function(init){var i,r=new Float64Array(16);if(init)for(i=0;i<init.length;i++)r[i]=init[i];return r;};var randombytes=function(){throw new Error('no PRNG');};var _0=new Uint8Array(16);var _9=new Uint8Array(32);_9[0]=9;var gf0=gf(),gf1=gf([1]),_121665=gf([0xdb41,1]),D=gf([0x78a3,0x1359,0x4dca,0x75eb,0xd8ab,0x4141,0x0a4d,0x0070,0xe898,0x7779,0x4079,0x8cc7,0xfe73,0x2b6f,0x6cee,0x5203]),D2=gf([0xf159,0x26b2,0x9b94,0xebd6,0xb156,0x8283,0x149a,0x00e0,0xd130,0xeef3,0x80f2,0x198e,0xfce7,0x56df,0xd9dc,0x2406]),X=gf([0xd51a,0x8f25,0x2d60,0xc956,0xa7b2,0x9525,0xc760,0x692c,0xdc5c,0xfdd6,0xe231,0xc0a4,0x53fe,0xcd6e,0x36d3,0x2169]),Y=gf([0x6658,0x6666,0x6666,0x6666,0x6666,0x6666,0x6666,0x6666,0x6666,0x6666,0x6666,0x6666,0x6666,0x6666,0x6666,0x6666]),I=gf([0xa0b0,0x4a0e,0x1b27,0xc4ee,0xe478,0xad2f,0x1806,0x2f43,0xd7a7,0x3dfb,0x0099,0x2b4d,0xdf0b,0x4fc1,0x2480,0x2b83]);function ts64(x,i,h,l){x[i]=h>>24&0xff;x[i+1]=h>>16&0xff;x[i+2]=h>>8&0xff;x[i+3]=h&0xff;x[i+4]=l>>24&0xff;x[i+5]=l>>16&0xff;x[i+6]=l>>8&0xff;x[i+7]=l&0xff;}function vn(x,xi,y,yi,n){var i,d=0;for(i=0;i<n;i++)d|=x[xi+i]^y[yi+i];return(1&d-1>>>8)-1;}function crypto_verify_16(x,xi,y,yi){return vn(x,xi,y,yi,16);}function crypto_verify_32(x,xi,y,yi){return vn(x,xi,y,yi,32);}function core_salsa20(o,p,k,c){var j0=c[0]&0xff|(c[1]&0xff)<<8|(c[2]&0xff)<<16|(c[3]&0xff)<<24,j1=k[0]&0xff|(k[1]&0xff)<<8|(k[2]&0xff)<<16|(k[3]&0xff)<<24,j2=k[4]&0xff|(k[5]&0xff)<<8|(k[6]&0xff)<<16|(k[7]&0xff)<<24,j3=k[8]&0xff|(k[9]&0xff)<<8|(k[10]&0xff)<<16|(k[11]&0xff)<<24,j4=k[12]&0xff|(k[13]&0xff)<<8|(k[14]&0xff)<<16|(k[15]&0xff)<<24,j5=c[4]&0xff|(c[5]&0xff)<<8|(c[6]&0xff)<<16|(c[7]&0xff)<<24,j6=p[0]&0xff|(p[1]&0xff)<<8|(p[2]&0xff)<<16|(p[3]&0xff)<<24,j7=p[4]&0xff|(p[5]&0xff)<<8|(p[6]&0xff)<<16|(p[7]&0xff)<<24,j8=p[8]&0xff|(p[9]&0xff)<<8|(p[10]&0xff)<<16|(p[11]&0xff)<<24,j9=p[12]&0xff|(p[13]&0xff)<<8|(p[14]&0xff)<<16|(p[15]&0xff)<<24,j10=c[8]&0xff|(c[9]&0xff)<<8|(c[10]&0xff)<<16|(c[11]&0xff)<<24,j11=k[16]&0xff|(k[17]&0xff)<<8|(k[18]&0xff)<<16|(k[19]&0xff)<<24,j12=k[20]&0xff|(k[21]&0xff)<<8|(k[22]&0xff)<<16|(k[23]&0xff)<<24,j13=k[24]&0xff|(k[25]&0xff)<<8|(k[26]&0xff)<<16|(k[27]&0xff)<<24,j14=k[28]&0xff|(k[29]&0xff)<<8|(k[30]&0xff)<<16|(k[31]&0xff)<<24,j15=c[12]&0xff|(c[13]&0xff)<<8|(c[14]&0xff)<<16|(c[15]&0xff)<<24;var x0=j0,x1=j1,x2=j2,x3=j3,x4=j4,x5=j5,x6=j6,x7=j7,x8=j8,x9=j9,x10=j10,x11=j11,x12=j12,x13=j13,x14=j14,x15=j15,u;for(var i=0;i<20;i+=2){u=x0+x12|0;x4^=u<<7|u>>>32-7;u=x4+x0|0;x8^=u<<9|u>>>32-9;u=x8+x4|0;x12^=u<<13|u>>>32-13;u=x12+x8|0;x0^=u<<18|u>>>32-18;u=x5+x1|0;x9^=u<<7|u>>>32-7;u=x9+x5|0;x13^=u<<9|u>>>32-9;u=x13+x9|0;x1^=u<<13|u>>>32-13;u=x1+x13|0;x5^=u<<18|u>>>32-18;u=x10+x6|0;x14^=u<<7|u>>>32-7;u=x14+x10|0;x2^=u<<9|u>>>32-9;u=x2+x14|0;x6^=u<<13|u>>>32-13;u=x6+x2|0;x10^=u<<18|u>>>32-18;u=x15+x11|0;x3^=u<<7|u>>>32-7;u=x3+x15|0;x7^=u<<9|u>>>32-9;u=x7+x3|0;x11^=u<<13|u>>>32-13;u=x11+x7|0;x15^=u<<18|u>>>32-18;u=x0+x3|0;x1^=u<<7|u>>>32-7;u=x1+x0|0;x2^=u<<9|u>>>32-9;u=x2+x1|0;x3^=u<<13|u>>>32-13;u=x3+x2|0;x0^=u<<18|u>>>32-18;u=x5+x4|0;x6^=u<<7|u>>>32-7;u=x6+x5|0;x7^=u<<9|u>>>32-9;u=x7+x6|0;x4^=u<<13|u>>>32-13;u=x4+x7|0;x5^=u<<18|u>>>32-18;u=x10+x9|0;x11^=u<<7|u>>>32-7;u=x11+x10|0;x8^=u<<9|u>>>32-9;u=x8+x11|0;x9^=u<<13|u>>>32-13;u=x9+x8|0;x10^=u<<18|u>>>32-18;u=x15+x14|0;x12^=u<<7|u>>>32-7;u=x12+x15|0;x13^=u<<9|u>>>32-9;u=x13+x12|0;x14^=u<<13|u>>>32-13;u=x14+x13|0;x15^=u<<18|u>>>32-18;}x0=x0+j0|0;x1=x1+j1|0;x2=x2+j2|0;x3=x3+j3|0;x4=x4+j4|0;x5=x5+j5|0;x6=x6+j6|0;x7=x7+j7|0;x8=x8+j8|0;x9=x9+j9|0;x10=x10+j10|0;x11=x11+j11|0;x12=x12+j12|0;x13=x13+j13|0;x14=x14+j14|0;x15=x15+j15|0;o[0]=x0>>>0&0xff;o[1]=x0>>>8&0xff;o[2]=x0>>>16&0xff;o[3]=x0>>>24&0xff;o[4]=x1>>>0&0xff;o[5]=x1>>>8&0xff;o[6]=x1>>>16&0xff;o[7]=x1>>>24&0xff;o[8]=x2>>>0&0xff;o[9]=x2>>>8&0xff;o[10]=x2>>>16&0xff;o[11]=x2>>>24&0xff;o[12]=x3>>>0&0xff;o[13]=x3>>>8&0xff;o[14]=x3>>>16&0xff;o[15]=x3>>>24&0xff;o[16]=x4>>>0&0xff;o[17]=x4>>>8&0xff;o[18]=x4>>>16&0xff;o[19]=x4>>>24&0xff;o[20]=x5>>>0&0xff;o[21]=x5>>>8&0xff;o[22]=x5>>>16&0xff;o[23]=x5>>>24&0xff;o[24]=x6>>>0&0xff;o[25]=x6>>>8&0xff;o[26]=x6>>>16&0xff;o[27]=x6>>>24&0xff;o[28]=x7>>>0&0xff;o[29]=x7>>>8&0xff;o[30]=x7>>>16&0xff;o[31]=x7>>>24&0xff;o[32]=x8>>>0&0xff;o[33]=x8>>>8&0xff;o[34]=x8>>>16&0xff;o[35]=x8>>>24&0xff;o[36]=x9>>>0&0xff;o[37]=x9>>>8&0xff;o[38]=x9>>>16&0xff;o[39]=x9>>>24&0xff;o[40]=x10>>>0&0xff;o[41]=x10>>>8&0xff;o[42]=x10>>>16&0xff;o[43]=x10>>>24&0xff;o[44]=x11>>>0&0xff;o[45]=x11>>>8&0xff;o[46]=x11>>>16&0xff;o[47]=x11>>>24&0xff;o[48]=x12>>>0&0xff;o[49]=x12>>>8&0xff;o[50]=x12>>>16&0xff;o[51]=x12>>>24&0xff;o[52]=x13>>>0&0xff;o[53]=x13>>>8&0xff;o[54]=x13>>>16&0xff;o[55]=x13>>>24&0xff;o[56]=x14>>>0&0xff;o[57]=x14>>>8&0xff;o[58]=x14>>>16&0xff;o[59]=x14>>>24&0xff;o[60]=x15>>>0&0xff;o[61]=x15>>>8&0xff;o[62]=x15>>>16&0xff;o[63]=x15>>>24&0xff;}function core_hsalsa20(o,p,k,c){var j0=c[0]&0xff|(c[1]&0xff)<<8|(c[2]&0xff)<<16|(c[3]&0xff)<<24,j1=k[0]&0xff|(k[1]&0xff)<<8|(k[2]&0xff)<<16|(k[3]&0xff)<<24,j2=k[4]&0xff|(k[5]&0xff)<<8|(k[6]&0xff)<<16|(k[7]&0xff)<<24,j3=k[8]&0xff|(k[9]&0xff)<<8|(k[10]&0xff)<<16|(k[11]&0xff)<<24,j4=k[12]&0xff|(k[13]&0xff)<<8|(k[14]&0xff)<<16|(k[15]&0xff)<<24,j5=c[4]&0xff|(c[5]&0xff)<<8|(c[6]&0xff)<<16|(c[7]&0xff)<<24,j6=p[0]&0xff|(p[1]&0xff)<<8|(p[2]&0xff)<<16|(p[3]&0xff)<<24,j7=p[4]&0xff|(p[5]&0xff)<<8|(p[6]&0xff)<<16|(p[7]&0xff)<<24,j8=p[8]&0xff|(p[9]&0xff)<<8|(p[10]&0xff)<<16|(p[11]&0xff)<<24,j9=p[12]&0xff|(p[13]&0xff)<<8|(p[14]&0xff)<<16|(p[15]&0xff)<<24,j10=c[8]&0xff|(c[9]&0xff)<<8|(c[10]&0xff)<<16|(c[11]&0xff)<<24,j11=k[16]&0xff|(k[17]&0xff)<<8|(k[18]&0xff)<<16|(k[19]&0xff)<<24,j12=k[20]&0xff|(k[21]&0xff)<<8|(k[22]&0xff)<<16|(k[23]&0xff)<<24,j13=k[24]&0xff|(k[25]&0xff)<<8|(k[26]&0xff)<<16|(k[27]&0xff)<<24,j14=k[28]&0xff|(k[29]&0xff)<<8|(k[30]&0xff)<<16|(k[31]&0xff)<<24,j15=c[12]&0xff|(c[13]&0xff)<<8|(c[14]&0xff)<<16|(c[15]&0xff)<<24;var x0=j0,x1=j1,x2=j2,x3=j3,x4=j4,x5=j5,x6=j6,x7=j7,x8=j8,x9=j9,x10=j10,x11=j11,x12=j12,x13=j13,x14=j14,x15=j15,u;for(var i=0;i<20;i+=2){u=x0+x12|0;x4^=u<<7|u>>>32-7;u=x4+x0|0;x8^=u<<9|u>>>32-9;u=x8+x4|0;x12^=u<<13|u>>>32-13;u=x12+x8|0;x0^=u<<18|u>>>32-18;u=x5+x1|0;x9^=u<<7|u>>>32-7;u=x9+x5|0;x13^=u<<9|u>>>32-9;u=x13+x9|0;x1^=u<<13|u>>>32-13;u=x1+x13|0;x5^=u<<18|u>>>32-18;u=x10+x6|0;x14^=u<<7|u>>>32-7;u=x14+x10|0;x2^=u<<9|u>>>32-9;u=x2+x14|0;x6^=u<<13|u>>>32-13;u=x6+x2|0;x10^=u<<18|u>>>32-18;u=x15+x11|0;x3^=u<<7|u>>>32-7;u=x3+x15|0;x7^=u<<9|u>>>32-9;u=x7+x3|0;x11^=u<<13|u>>>32-13;u=x11+x7|0;x15^=u<<18|u>>>32-18;u=x0+x3|0;x1^=u<<7|u>>>32-7;u=x1+x0|0;x2^=u<<9|u>>>32-9;u=x2+x1|0;x3^=u<<13|u>>>32-13;u=x3+x2|0;x0^=u<<18|u>>>32-18;u=x5+x4|0;x6^=u<<7|u>>>32-7;u=x6+x5|0;x7^=u<<9|u>>>32-9;u=x7+x6|0;x4^=u<<13|u>>>32-13;u=x4+x7|0;x5^=u<<18|u>>>32-18;u=x10+x9|0;x11^=u<<7|u>>>32-7;u=x11+x10|0;x8^=u<<9|u>>>32-9;u=x8+x11|0;x9^=u<<13|u>>>32-13;u=x9+x8|0;x10^=u<<18|u>>>32-18;u=x15+x14|0;x12^=u<<7|u>>>32-7;u=x12+x15|0;x13^=u<<9|u>>>32-9;u=x13+x12|0;x14^=u<<13|u>>>32-13;u=x14+x13|0;x15^=u<<18|u>>>32-18;}o[0]=x0>>>0&0xff;o[1]=x0>>>8&0xff;o[2]=x0>>>16&0xff;o[3]=x0>>>24&0xff;o[4]=x5>>>0&0xff;o[5]=x5>>>8&0xff;o[6]=x5>>>16&0xff;o[7]=x5>>>24&0xff;o[8]=x10>>>0&0xff;o[9]=x10>>>8&0xff;o[10]=x10>>>16&0xff;o[11]=x10>>>24&0xff;o[12]=x15>>>0&0xff;o[13]=x15>>>8&0xff;o[14]=x15>>>16&0xff;o[15]=x15>>>24&0xff;o[16]=x6>>>0&0xff;o[17]=x6>>>8&0xff;o[18]=x6>>>16&0xff;o[19]=x6>>>24&0xff;o[20]=x7>>>0&0xff;o[21]=x7>>>8&0xff;o[22]=x7>>>16&0xff;o[23]=x7>>>24&0xff;o[24]=x8>>>0&0xff;o[25]=x8>>>8&0xff;o[26]=x8>>>16&0xff;o[27]=x8>>>24&0xff;o[28]=x9>>>0&0xff;o[29]=x9>>>8&0xff;o[30]=x9>>>16&0xff;o[31]=x9>>>24&0xff;}function crypto_core_salsa20(out,inp,k,c){core_salsa20(out,inp,k,c);}function crypto_core_hsalsa20(out,inp,k,c){core_hsalsa20(out,inp,k,c);}var sigma=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function crypto_stream_salsa20_xor(c,cpos,m,mpos,b,n,k){var z=new Uint8Array(16),x=new Uint8Array(64);var u,i;for(i=0;i<16;i++)z[i]=0;for(i=0;i<8;i++)z[i]=n[i];while(b>=64){crypto_core_salsa20(x,z,k,sigma);for(i=0;i<64;i++)c[cpos+i]=m[mpos+i]^x[i];u=1;for(i=8;i<16;i++){u=u+(z[i]&0xff)|0;z[i]=u&0xff;u>>>=8;}b-=64;cpos+=64;mpos+=64;}if(b>0){crypto_core_salsa20(x,z,k,sigma);for(i=0;i<b;i++)c[cpos+i]=m[mpos+i]^x[i];}return 0;}function crypto_stream_salsa20(c,cpos,b,n,k){var z=new Uint8Array(16),x=new Uint8Array(64);var u,i;for(i=0;i<16;i++)z[i]=0;for(i=0;i<8;i++)z[i]=n[i];while(b>=64){crypto_core_salsa20(x,z,k,sigma);for(i=0;i<64;i++)c[cpos+i]=x[i];u=1;for(i=8;i<16;i++){u=u+(z[i]&0xff)|0;z[i]=u&0xff;u>>>=8;}b-=64;cpos+=64;}if(b>0){crypto_core_salsa20(x,z,k,sigma);for(i=0;i<b;i++)c[cpos+i]=x[i];}return 0;}function crypto_stream(c,cpos,d,n,k){var s=new Uint8Array(32);crypto_core_hsalsa20(s,n,k,sigma);var sn=new Uint8Array(8);for(var i=0;i<8;i++)sn[i]=n[i+16];return crypto_stream_salsa20(c,cpos,d,sn,s);}function crypto_stream_xor(c,cpos,m,mpos,d,n,k){var s=new Uint8Array(32);crypto_core_hsalsa20(s,n,k,sigma);var sn=new Uint8Array(8);for(var i=0;i<8;i++)sn[i]=n[i+16];return crypto_stream_salsa20_xor(c,cpos,m,mpos,d,sn,s);}var poly1305=function(key){this.buffer=new Uint8Array(16);this.r=new Uint16Array(10);this.h=new Uint16Array(10);this.pad=new Uint16Array(8);this.leftover=0;this.fin=0;var t0,t1,t2,t3,t4,t5,t6,t7;t0=key[0]&0xff|(key[1]&0xff)<<8;this.r[0]=t0&0x1fff;t1=key[2]&0xff|(key[3]&0xff)<<8;this.r[1]=(t0>>>13|t1<<3)&0x1fff;t2=key[4]&0xff|(key[5]&0xff)<<8;this.r[2]=(t1>>>10|t2<<6)&0x1f03;t3=key[6]&0xff|(key[7]&0xff)<<8;this.r[3]=(t2>>>7|t3<<9)&0x1fff;t4=key[8]&0xff|(key[9]&0xff)<<8;this.r[4]=(t3>>>4|t4<<12)&0x00ff;this.r[5]=t4>>>1&0x1ffe;t5=key[10]&0xff|(key[11]&0xff)<<8;this.r[6]=(t4>>>14|t5<<2)&0x1fff;t6=key[12]&0xff|(key[13]&0xff)<<8;this.r[7]=(t5>>>11|t6<<5)&0x1f81;t7=key[14]&0xff|(key[15]&0xff)<<8;this.r[8]=(t6>>>8|t7<<8)&0x1fff;this.r[9]=t7>>>5&0x007f;this.pad[0]=key[16]&0xff|(key[17]&0xff)<<8;this.pad[1]=key[18]&0xff|(key[19]&0xff)<<8;this.pad[2]=key[20]&0xff|(key[21]&0xff)<<8;this.pad[3]=key[22]&0xff|(key[23]&0xff)<<8;this.pad[4]=key[24]&0xff|(key[25]&0xff)<<8;this.pad[5]=key[26]&0xff|(key[27]&0xff)<<8;this.pad[6]=key[28]&0xff|(key[29]&0xff)<<8;this.pad[7]=key[30]&0xff|(key[31]&0xff)<<8;};poly1305.prototype.blocks=function(m,mpos,bytes){var hibit=this.fin?0:1<<11;var t0,t1,t2,t3,t4,t5,t6,t7,c;var d0,d1,d2,d3,d4,d5,d6,d7,d8,d9;var h0=this.h[0],h1=this.h[1],h2=this.h[2],h3=this.h[3],h4=this.h[4],h5=this.h[5],h6=this.h[6],h7=this.h[7],h8=this.h[8],h9=this.h[9];var r0=this.r[0],r1=this.r[1],r2=this.r[2],r3=this.r[3],r4=this.r[4],r5=this.r[5],r6=this.r[6],r7=this.r[7],r8=this.r[8],r9=this.r[9];while(bytes>=16){t0=m[mpos+0]&0xff|(m[mpos+1]&0xff)<<8;h0+=t0&0x1fff;t1=m[mpos+2]&0xff|(m[mpos+3]&0xff)<<8;h1+=(t0>>>13|t1<<3)&0x1fff;t2=m[mpos+4]&0xff|(m[mpos+5]&0xff)<<8;h2+=(t1>>>10|t2<<6)&0x1fff;t3=m[mpos+6]&0xff|(m[mpos+7]&0xff)<<8;h3+=(t2>>>7|t3<<9)&0x1fff;t4=m[mpos+8]&0xff|(m[mpos+9]&0xff)<<8;h4+=(t3>>>4|t4<<12)&0x1fff;h5+=t4>>>1&0x1fff;t5=m[mpos+10]&0xff|(m[mpos+11]&0xff)<<8;h6+=(t4>>>14|t5<<2)&0x1fff;t6=m[mpos+12]&0xff|(m[mpos+13]&0xff)<<8;h7+=(t5>>>11|t6<<5)&0x1fff;t7=m[mpos+14]&0xff|(m[mpos+15]&0xff)<<8;h8+=(t6>>>8|t7<<8)&0x1fff;h9+=t7>>>5|hibit;c=0;d0=c;d0+=h0*r0;d0+=h1*(5*r9);d0+=h2*(5*r8);d0+=h3*(5*r7);d0+=h4*(5*r6);c=d0>>>13;d0&=0x1fff;d0+=h5*(5*r5);d0+=h6*(5*r4);d0+=h7*(5*r3);d0+=h8*(5*r2);d0+=h9*(5*r1);c+=d0>>>13;d0&=0x1fff;d1=c;d1+=h0*r1;d1+=h1*r0;d1+=h2*(5*r9);d1+=h3*(5*r8);d1+=h4*(5*r7);c=d1>>>13;d1&=0x1fff;d1+=h5*(5*r6);d1+=h6*(5*r5);d1+=h7*(5*r4);d1+=h8*(5*r3);d1+=h9*(5*r2);c+=d1>>>13;d1&=0x1fff;d2=c;d2+=h0*r2;d2+=h1*r1;d2+=h2*r0;d2+=h3*(5*r9);d2+=h4*(5*r8);c=d2>>>13;d2&=0x1fff;d2+=h5*(5*r7);d2+=h6*(5*r6);d2+=h7*(5*r5);d2+=h8*(5*r4);d2+=h9*(5*r3);c+=d2>>>13;d2&=0x1fff;d3=c;d3+=h0*r3;d3+=h1*r2;d3+=h2*r1;d3+=h3*r0;d3+=h4*(5*r9);c=d3>>>13;d3&=0x1fff;d3+=h5*(5*r8);d3+=h6*(5*r7);d3+=h7*(5*r6);d3+=h8*(5*r5);d3+=h9*(5*r4);c+=d3>>>13;d3&=0x1fff;d4=c;d4+=h0*r4;d4+=h1*r3;d4+=h2*r2;d4+=h3*r1;d4+=h4*r0;c=d4>>>13;d4&=0x1fff;d4+=h5*(5*r9);d4+=h6*(5*r8);d4+=h7*(5*r7);d4+=h8*(5*r6);d4+=h9*(5*r5);c+=d4>>>13;d4&=0x1fff;d5=c;d5+=h0*r5;d5+=h1*r4;d5+=h2*r3;d5+=h3*r2;d5+=h4*r1;c=d5>>>13;d5&=0x1fff;d5+=h5*r0;d5+=h6*(5*r9);d5+=h7*(5*r8);d5+=h8*(5*r7);d5+=h9*(5*r6);c+=d5>>>13;d5&=0x1fff;d6=c;d6+=h0*r6;d6+=h1*r5;d6+=h2*r4;d6+=h3*r3;d6+=h4*r2;c=d6>>>13;d6&=0x1fff;d6+=h5*r1;d6+=h6*r0;d6+=h7*(5*r9);d6+=h8*(5*r8);d6+=h9*(5*r7);c+=d6>>>13;d6&=0x1fff;d7=c;d7+=h0*r7;d7+=h1*r6;d7+=h2*r5;d7+=h3*r4;d7+=h4*r3;c=d7>>>13;d7&=0x1fff;d7+=h5*r2;d7+=h6*r1;d7+=h7*r0;d7+=h8*(5*r9);d7+=h9*(5*r8);c+=d7>>>13;d7&=0x1fff;d8=c;d8+=h0*r8;d8+=h1*r7;d8+=h2*r6;d8+=h3*r5;d8+=h4*r4;c=d8>>>13;d8&=0x1fff;d8+=h5*r3;d8+=h6*r2;d8+=h7*r1;d8+=h8*r0;d8+=h9*(5*r9);c+=d8>>>13;d8&=0x1fff;d9=c;d9+=h0*r9;d9+=h1*r8;d9+=h2*r7;d9+=h3*r6;d9+=h4*r5;c=d9>>>13;d9&=0x1fff;d9+=h5*r4;d9+=h6*r3;d9+=h7*r2;d9+=h8*r1;d9+=h9*r0;c+=d9>>>13;d9&=0x1fff;c=(c<<2)+c|0;c=c+d0|0;d0=c&0x1fff;c=c>>>13;d1+=c;h0=d0;h1=d1;h2=d2;h3=d3;h4=d4;h5=d5;h6=d6;h7=d7;h8=d8;h9=d9;mpos+=16;bytes-=16;}this.h[0]=h0;this.h[1]=h1;this.h[2]=h2;this.h[3]=h3;this.h[4]=h4;this.h[5]=h5;this.h[6]=h6;this.h[7]=h7;this.h[8]=h8;this.h[9]=h9;};poly1305.prototype.finish=function(mac,macpos){var g=new Uint16Array(10);var c,mask,f,i;if(this.leftover){i=this.leftover;this.buffer[i++]=1;for(;i<16;i++)this.buffer[i]=0;this.fin=1;this.blocks(this.buffer,0,16);}c=this.h[1]>>>13;this.h[1]&=0x1fff;for(i=2;i<10;i++){this.h[i]+=c;c=this.h[i]>>>13;this.h[i]&=0x1fff;}this.h[0]+=c*5;c=this.h[0]>>>13;this.h[0]&=0x1fff;this.h[1]+=c;c=this.h[1]>>>13;this.h[1]&=0x1fff;this.h[2]+=c;g[0]=this.h[0]+5;c=g[0]>>>13;g[0]&=0x1fff;for(i=1;i<10;i++){g[i]=this.h[i]+c;c=g[i]>>>13;g[i]&=0x1fff;}g[9]-=1<<13;mask=(c^1)-1;for(i=0;i<10;i++)g[i]&=mask;mask=~mask;for(i=0;i<10;i++)this.h[i]=this.h[i]&mask|g[i];this.h[0]=(this.h[0]|this.h[1]<<13)&0xffff;this.h[1]=(this.h[1]>>>3|this.h[2]<<10)&0xffff;this.h[2]=(this.h[2]>>>6|this.h[3]<<7)&0xffff;this.h[3]=(this.h[3]>>>9|this.h[4]<<4)&0xffff;this.h[4]=(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14)&0xffff;this.h[5]=(this.h[6]>>>2|this.h[7]<<11)&0xffff;this.h[6]=(this.h[7]>>>5|this.h[8]<<8)&0xffff;this.h[7]=(this.h[8]>>>8|this.h[9]<<5)&0xffff;f=this.h[0]+this.pad[0];this.h[0]=f&0xffff;for(i=1;i<8;i++){f=(this.h[i]+this.pad[i]|0)+(f>>>16)|0;this.h[i]=f&0xffff;}mac[macpos+0]=this.h[0]>>>0&0xff;mac[macpos+1]=this.h[0]>>>8&0xff;mac[macpos+2]=this.h[1]>>>0&0xff;mac[macpos+3]=this.h[1]>>>8&0xff;mac[macpos+4]=this.h[2]>>>0&0xff;mac[macpos+5]=this.h[2]>>>8&0xff;mac[macpos+6]=this.h[3]>>>0&0xff;mac[macpos+7]=this.h[3]>>>8&0xff;mac[macpos+8]=this.h[4]>>>0&0xff;mac[macpos+9]=this.h[4]>>>8&0xff;mac[macpos+10]=this.h[5]>>>0&0xff;mac[macpos+11]=this.h[5]>>>8&0xff;mac[macpos+12]=this.h[6]>>>0&0xff;mac[macpos+13]=this.h[6]>>>8&0xff;mac[macpos+14]=this.h[7]>>>0&0xff;mac[macpos+15]=this.h[7]>>>8&0xff;};poly1305.prototype.update=function(m,mpos,bytes){var i,want;if(this.leftover){want=16-this.leftover;if(want>bytes)want=bytes;for(i=0;i<want;i++)this.buffer[this.leftover+i]=m[mpos+i];bytes-=want;mpos+=want;this.leftover+=want;if(this.leftover<16)return;this.blocks(this.buffer,0,16);this.leftover=0;}if(bytes>=16){want=bytes-bytes%16;this.blocks(m,mpos,want);mpos+=want;bytes-=want;}if(bytes){for(i=0;i<bytes;i++)this.buffer[this.leftover+i]=m[mpos+i];this.leftover+=bytes;}};function crypto_onetimeauth(out,outpos,m,mpos,n,k){var s=new poly1305(k);s.update(m,mpos,n);s.finish(out,outpos);return 0;}function crypto_onetimeauth_verify(h,hpos,m,mpos,n,k){var x=new Uint8Array(16);crypto_onetimeauth(x,0,m,mpos,n,k);return crypto_verify_16(h,hpos,x,0);}function crypto_secretbox(c,m,d,n,k){var i;if(d<32)return-1;crypto_stream_xor(c,0,m,0,d,n,k);crypto_onetimeauth(c,16,c,32,d-32,c);for(i=0;i<16;i++)c[i]=0;return 0;}function crypto_secretbox_open(m,c,d,n,k){var i;var x=new Uint8Array(32);if(d<32)return-1;crypto_stream(x,0,32,n,k);if(crypto_onetimeauth_verify(c,16,c,32,d-32,x)!==0)return-1;crypto_stream_xor(m,0,c,0,d,n,k);for(i=0;i<32;i++)m[i]=0;return 0;}function set25519(r,a){var i;for(i=0;i<16;i++)r[i]=a[i]|0;}function car25519(o){var i,v,c=1;for(i=0;i<16;i++){v=o[i]+c+65535;c=Math.floor(v/65536);o[i]=v-c*65536;}o[0]+=c-1+37*(c-1);}function sel25519(p,q,b){var t,c=~(b-1);for(var i=0;i<16;i++){t=c&(p[i]^q[i]);p[i]^=t;q[i]^=t;}}function pack25519(o,n){var i,j,b;var m=gf(),t=gf();for(i=0;i<16;i++)t[i]=n[i];car25519(t);car25519(t);car25519(t);for(j=0;j<2;j++){m[0]=t[0]-0xffed;for(i=1;i<15;i++){m[i]=t[i]-0xffff-(m[i-1]>>16&1);m[i-1]&=0xffff;}m[15]=t[15]-0x7fff-(m[14]>>16&1);b=m[15]>>16&1;m[14]&=0xffff;sel25519(t,m,1-b);}for(i=0;i<16;i++){o[2*i]=t[i]&0xff;o[2*i+1]=t[i]>>8;}}function neq25519(a,b){var c=new Uint8Array(32),d=new Uint8Array(32);pack25519(c,a);pack25519(d,b);return crypto_verify_32(c,0,d,0);}function par25519(a){var d=new Uint8Array(32);pack25519(d,a);return d[0]&1;}function unpack25519(o,n){var i;for(i=0;i<16;i++)o[i]=n[2*i]+(n[2*i+1]<<8);o[15]&=0x7fff;}function A(o,a,b){for(var i=0;i<16;i++)o[i]=a[i]+b[i];}function Z(o,a,b){for(var i=0;i<16;i++)o[i]=a[i]-b[i];}function M(o,a,b){var v,c,t0=0,t1=0,t2=0,t3=0,t4=0,t5=0,t6=0,t7=0,t8=0,t9=0,t10=0,t11=0,t12=0,t13=0,t14=0,t15=0,t16=0,t17=0,t18=0,t19=0,t20=0,t21=0,t22=0,t23=0,t24=0,t25=0,t26=0,t27=0,t28=0,t29=0,t30=0,b0=b[0],b1=b[1],b2=b[2],b3=b[3],b4=b[4],b5=b[5],b6=b[6],b7=b[7],b8=b[8],b9=b[9],b10=b[10],b11=b[11],b12=b[12],b13=b[13],b14=b[14],b15=b[15];v=a[0];t0+=v*b0;t1+=v*b1;t2+=v*b2;t3+=v*b3;t4+=v*b4;t5+=v*b5;t6+=v*b6;t7+=v*b7;t8+=v*b8;t9+=v*b9;t10+=v*b10;t11+=v*b11;t12+=v*b12;t13+=v*b13;t14+=v*b14;t15+=v*b15;v=a[1];t1+=v*b0;t2+=v*b1;t3+=v*b2;t4+=v*b3;t5+=v*b4;t6+=v*b5;t7+=v*b6;t8+=v*b7;t9+=v*b8;t10+=v*b9;t11+=v*b10;t12+=v*b11;t13+=v*b12;t14+=v*b13;t15+=v*b14;t16+=v*b15;v=a[2];t2+=v*b0;t3+=v*b1;t4+=v*b2;t5+=v*b3;t6+=v*b4;t7+=v*b5;t8+=v*b6;t9+=v*b7;t10+=v*b8;t11+=v*b9;t12+=v*b10;t13+=v*b11;t14+=v*b12;t15+=v*b13;t16+=v*b14;t17+=v*b15;v=a[3];t3+=v*b0;t4+=v*b1;t5+=v*b2;t6+=v*b3;t7+=v*b4;t8+=v*b5;t9+=v*b6;t10+=v*b7;t11+=v*b8;t12+=v*b9;t13+=v*b10;t14+=v*b11;t15+=v*b12;t16+=v*b13;t17+=v*b14;t18+=v*b15;v=a[4];t4+=v*b0;t5+=v*b1;t6+=v*b2;t7+=v*b3;t8+=v*b4;t9+=v*b5;t10+=v*b6;t11+=v*b7;t12+=v*b8;t13+=v*b9;t14+=v*b10;t15+=v*b11;t16+=v*b12;t17+=v*b13;t18+=v*b14;t19+=v*b15;v=a[5];t5+=v*b0;t6+=v*b1;t7+=v*b2;t8+=v*b3;t9+=v*b4;t10+=v*b5;t11+=v*b6;t12+=v*b7;t13+=v*b8;t14+=v*b9;t15+=v*b10;t16+=v*b11;t17+=v*b12;t18+=v*b13;t19+=v*b14;t20+=v*b15;v=a[6];t6+=v*b0;t7+=v*b1;t8+=v*b2;t9+=v*b3;t10+=v*b4;t11+=v*b5;t12+=v*b6;t13+=v*b7;t14+=v*b8;t15+=v*b9;t16+=v*b10;t17+=v*b11;t18+=v*b12;t19+=v*b13;t20+=v*b14;t21+=v*b15;v=a[7];t7+=v*b0;t8+=v*b1;t9+=v*b2;t10+=v*b3;t11+=v*b4;t12+=v*b5;t13+=v*b6;t14+=v*b7;t15+=v*b8;t16+=v*b9;t17+=v*b10;t18+=v*b11;t19+=v*b12;t20+=v*b13;t21+=v*b14;t22+=v*b15;v=a[8];t8+=v*b0;t9+=v*b1;t10+=v*b2;t11+=v*b3;t12+=v*b4;t13+=v*b5;t14+=v*b6;t15+=v*b7;t16+=v*b8;t17+=v*b9;t18+=v*b10;t19+=v*b11;t20+=v*b12;t21+=v*b13;t22+=v*b14;t23+=v*b15;v=a[9];t9+=v*b0;t10+=v*b1;t11+=v*b2;t12+=v*b3;t13+=v*b4;t14+=v*b5;t15+=v*b6;t16+=v*b7;t17+=v*b8;t18+=v*b9;t19+=v*b10;t20+=v*b11;t21+=v*b12;t22+=v*b13;t23+=v*b14;t24+=v*b15;v=a[10];t10+=v*b0;t11+=v*b1;t12+=v*b2;t13+=v*b3;t14+=v*b4;t15+=v*b5;t16+=v*b6;t17+=v*b7;t18+=v*b8;t19+=v*b9;t20+=v*b10;t21+=v*b11;t22+=v*b12;t23+=v*b13;t24+=v*b14;t25+=v*b15;v=a[11];t11+=v*b0;t12+=v*b1;t13+=v*b2;t14+=v*b3;t15+=v*b4;t16+=v*b5;t17+=v*b6;t18+=v*b7;t19+=v*b8;t20+=v*b9;t21+=v*b10;t22+=v*b11;t23+=v*b12;t24+=v*b13;t25+=v*b14;t26+=v*b15;v=a[12];t12+=v*b0;t13+=v*b1;t14+=v*b2;t15+=v*b3;t16+=v*b4;t17+=v*b5;t18+=v*b6;t19+=v*b7;t20+=v*b8;t21+=v*b9;t22+=v*b10;t23+=v*b11;t24+=v*b12;t25+=v*b13;t26+=v*b14;t27+=v*b15;v=a[13];t13+=v*b0;t14+=v*b1;t15+=v*b2;t16+=v*b3;t17+=v*b4;t18+=v*b5;t19+=v*b6;t20+=v*b7;t21+=v*b8;t22+=v*b9;t23+=v*b10;t24+=v*b11;t25+=v*b12;t26+=v*b13;t27+=v*b14;t28+=v*b15;v=a[14];t14+=v*b0;t15+=v*b1;t16+=v*b2;t17+=v*b3;t18+=v*b4;t19+=v*b5;t20+=v*b6;t21+=v*b7;t22+=v*b8;t23+=v*b9;t24+=v*b10;t25+=v*b11;t26+=v*b12;t27+=v*b13;t28+=v*b14;t29+=v*b15;v=a[15];t15+=v*b0;t16+=v*b1;t17+=v*b2;t18+=v*b3;t19+=v*b4;t20+=v*b5;t21+=v*b6;t22+=v*b7;t23+=v*b8;t24+=v*b9;t25+=v*b10;t26+=v*b11;t27+=v*b12;t28+=v*b13;t29+=v*b14;t30+=v*b15;t0+=38*t16;t1+=38*t17;t2+=38*t18;t3+=38*t19;t4+=38*t20;t5+=38*t21;t6+=38*t22;t7+=38*t23;t8+=38*t24;t9+=38*t25;t10+=38*t26;t11+=38*t27;t12+=38*t28;t13+=38*t29;t14+=38*t30;c=1;v=t0+c+65535;c=Math.floor(v/65536);t0=v-c*65536;v=t1+c+65535;c=Math.floor(v/65536);t1=v-c*65536;v=t2+c+65535;c=Math.floor(v/65536);t2=v-c*65536;v=t3+c+65535;c=Math.floor(v/65536);t3=v-c*65536;v=t4+c+65535;c=Math.floor(v/65536);t4=v-c*65536;v=t5+c+65535;c=Math.floor(v/65536);t5=v-c*65536;v=t6+c+65535;c=Math.floor(v/65536);t6=v-c*65536;v=t7+c+65535;c=Math.floor(v/65536);t7=v-c*65536;v=t8+c+65535;c=Math.floor(v/65536);t8=v-c*65536;v=t9+c+65535;c=Math.floor(v/65536);t9=v-c*65536;v=t10+c+65535;c=Math.floor(v/65536);t10=v-c*65536;v=t11+c+65535;c=Math.floor(v/65536);t11=v-c*65536;v=t12+c+65535;c=Math.floor(v/65536);t12=v-c*65536;v=t13+c+65535;c=Math.floor(v/65536);t13=v-c*65536;v=t14+c+65535;c=Math.floor(v/65536);t14=v-c*65536;v=t15+c+65535;c=Math.floor(v/65536);t15=v-c*65536;t0+=c-1+37*(c-1);c=1;v=t0+c+65535;c=Math.floor(v/65536);t0=v-c*65536;v=t1+c+65535;c=Math.floor(v/65536);t1=v-c*65536;v=t2+c+65535;c=Math.floor(v/65536);t2=v-c*65536;v=t3+c+65535;c=Math.floor(v/65536);t3=v-c*65536;v=t4+c+65535;c=Math.floor(v/65536);t4=v-c*65536;v=t5+c+65535;c=Math.floor(v/65536);t5=v-c*65536;v=t6+c+65535;c=Math.floor(v/65536);t6=v-c*65536;v=t7+c+65535;c=Math.floor(v/65536);t7=v-c*65536;v=t8+c+65535;c=Math.floor(v/65536);t8=v-c*65536;v=t9+c+65535;c=Math.floor(v/65536);t9=v-c*65536;v=t10+c+65535;c=Math.floor(v/65536);t10=v-c*65536;v=t11+c+65535;c=Math.floor(v/65536);t11=v-c*65536;v=t12+c+65535;c=Math.floor(v/65536);t12=v-c*65536;v=t13+c+65535;c=Math.floor(v/65536);t13=v-c*65536;v=t14+c+65535;c=Math.floor(v/65536);t14=v-c*65536;v=t15+c+65535;c=Math.floor(v/65536);t15=v-c*65536;t0+=c-1+37*(c-1);o[0]=t0;o[1]=t1;o[2]=t2;o[3]=t3;o[4]=t4;o[5]=t5;o[6]=t6;o[7]=t7;o[8]=t8;o[9]=t9;o[10]=t10;o[11]=t11;o[12]=t12;o[13]=t13;o[14]=t14;o[15]=t15;}function S(o,a){M(o,a,a);}function inv25519(o,i){var c=gf();var a;for(a=0;a<16;a++)c[a]=i[a];for(a=253;a>=0;a--){S(c,c);if(a!==2&&a!==4)M(c,c,i);}for(a=0;a<16;a++)o[a]=c[a];}function pow2523(o,i){var c=gf();var a;for(a=0;a<16;a++)c[a]=i[a];for(a=250;a>=0;a--){S(c,c);if(a!==1)M(c,c,i);}for(a=0;a<16;a++)o[a]=c[a];}function crypto_scalarmult(q,n,p){var z=new Uint8Array(32);var x=new Float64Array(80),r,i;var a=gf(),b=gf(),c=gf(),d=gf(),e=gf(),f=gf();for(i=0;i<31;i++)z[i]=n[i];z[31]=n[31]&127|64;z[0]&=248;unpack25519(x,p);for(i=0;i<16;i++){b[i]=x[i];d[i]=a[i]=c[i]=0;}a[0]=d[0]=1;for(i=254;i>=0;--i){r=z[i>>>3]>>>(i&7)&1;sel25519(a,b,r);sel25519(c,d,r);A(e,a,c);Z(a,a,c);A(c,b,d);Z(b,b,d);S(d,e);S(f,a);M(a,c,a);M(c,b,e);A(e,a,c);Z(a,a,c);S(b,a);Z(c,d,f);M(a,c,_121665);A(a,a,d);M(c,c,a);M(a,d,f);M(d,b,x);S(b,e);sel25519(a,b,r);sel25519(c,d,r);}for(i=0;i<16;i++){x[i+16]=a[i];x[i+32]=c[i];x[i+48]=b[i];x[i+64]=d[i];}var x32=x.subarray(32);var x16=x.subarray(16);inv25519(x32,x32);M(x16,x16,x32);pack25519(q,x16);return 0;}function crypto_scalarmult_base(q,n){return crypto_scalarmult(q,n,_9);}function crypto_box_keypair(y,x){randombytes(x,32);return crypto_scalarmult_base(y,x);}function crypto_box_beforenm(k,y,x){var s=new Uint8Array(32);crypto_scalarmult(s,x,y);return crypto_core_hsalsa20(k,_0,s,sigma);}var crypto_box_afternm=crypto_secretbox;var crypto_box_open_afternm=crypto_secretbox_open;function crypto_box(c,m,d,n,y,x){var k=new Uint8Array(32);crypto_box_beforenm(k,y,x);return crypto_box_afternm(c,m,d,n,k);}function crypto_box_open(m,c,d,n,y,x){var k=new Uint8Array(32);crypto_box_beforenm(k,y,x);return crypto_box_open_afternm(m,c,d,n,k);}var K=[0x428a2f98,0xd728ae22,0x71374491,0x23ef65cd,0xb5c0fbcf,0xec4d3b2f,0xe9b5dba5,0x8189dbbc,0x3956c25b,0xf348b538,0x59f111f1,0xb605d019,0x923f82a4,0xaf194f9b,0xab1c5ed5,0xda6d8118,0xd807aa98,0xa3030242,0x12835b01,0x45706fbe,0x243185be,0x4ee4b28c,0x550c7dc3,0xd5ffb4e2,0x72be5d74,0xf27b896f,0x80deb1fe,0x3b1696b1,0x9bdc06a7,0x25c71235,0xc19bf174,0xcf692694,0xe49b69c1,0x9ef14ad2,0xefbe4786,0x384f25e3,0x0fc19dc6,0x8b8cd5b5,0x240ca1cc,0x77ac9c65,0x2de92c6f,0x592b0275,0x4a7484aa,0x6ea6e483,0x5cb0a9dc,0xbd41fbd4,0x76f988da,0x831153b5,0x983e5152,0xee66dfab,0xa831c66d,0x2db43210,0xb00327c8,0x98fb213f,0xbf597fc7,0xbeef0ee4,0xc6e00bf3,0x3da88fc2,0xd5a79147,0x930aa725,0x06ca6351,0xe003826f,0x14292967,0x0a0e6e70,0x27b70a85,0x46d22ffc,0x2e1b2138,0x5c26c926,0x4d2c6dfc,0x5ac42aed,0x53380d13,0x9d95b3df,0x650a7354,0x8baf63de,0x766a0abb,0x3c77b2a8,0x81c2c92e,0x47edaee6,0x92722c85,0x1482353b,0xa2bfe8a1,0x4cf10364,0xa81a664b,0xbc423001,0xc24b8b70,0xd0f89791,0xc76c51a3,0x0654be30,0xd192e819,0xd6ef5218,0xd6990624,0x5565a910,0xf40e3585,0x5771202a,0x106aa070,0x32bbd1b8,0x19a4c116,0xb8d2d0c8,0x1e376c08,0x5141ab53,0x2748774c,0xdf8eeb99,0x34b0bcb5,0xe19b48a8,0x391c0cb3,0xc5c95a63,0x4ed8aa4a,0xe3418acb,0x5b9cca4f,0x7763e373,0x682e6ff3,0xd6b2b8a3,0x748f82ee,0x5defb2fc,0x78a5636f,0x43172f60,0x84c87814,0xa1f0ab72,0x8cc70208,0x1a6439ec,0x90befffa,0x23631e28,0xa4506ceb,0xde82bde9,0xbef9a3f7,0xb2c67915,0xc67178f2,0xe372532b,0xca273ece,0xea26619c,0xd186b8c7,0x21c0c207,0xeada7dd6,0xcde0eb1e,0xf57d4f7f,0xee6ed178,0x06f067aa,0x72176fba,0x0a637dc5,0xa2c898a6,0x113f9804,0xbef90dae,0x1b710b35,0x131c471b,0x28db77f5,0x23047d84,0x32caab7b,0x40c72493,0x3c9ebe0a,0x15c9bebc,0x431d67c4,0x9c100d4c,0x4cc5d4be,0xcb3e42b6,0x597f299c,0xfc657e2a,0x5fcb6fab,0x3ad6faec,0x6c44198c,0x4a475817];function crypto_hashblocks_hl(hh,hl,m,n){var wh=new Int32Array(16),wl=new Int32Array(16),bh0,bh1,bh2,bh3,bh4,bh5,bh6,bh7,bl0,bl1,bl2,bl3,bl4,bl5,bl6,bl7,th,tl,i,j,h,l,a,b,c,d;var ah0=hh[0],ah1=hh[1],ah2=hh[2],ah3=hh[3],ah4=hh[4],ah5=hh[5],ah6=hh[6],ah7=hh[7],al0=hl[0],al1=hl[1],al2=hl[2],al3=hl[3],al4=hl[4],al5=hl[5],al6=hl[6],al7=hl[7];var pos=0;while(n>=128){for(i=0;i<16;i++){j=8*i+pos;wh[i]=m[j+0]<<24|m[j+1]<<16|m[j+2]<<8|m[j+3];wl[i]=m[j+4]<<24|m[j+5]<<16|m[j+6]<<8|m[j+7];}for(i=0;i<80;i++){bh0=ah0;bh1=ah1;bh2=ah2;bh3=ah3;bh4=ah4;bh5=ah5;bh6=ah6;bh7=ah7;bl0=al0;bl1=al1;bl2=al2;bl3=al3;bl4=al4;bl5=al5;bl6=al6;bl7=al7;h=ah7;l=al7;a=l&0xffff;b=l>>>16;c=h&0xffff;d=h>>>16;h=(ah4>>>14|al4<<32-14)^(ah4>>>18|al4<<32-18)^(al4>>>41-32|ah4<<32-(41-32));l=(al4>>>14|ah4<<32-14)^(al4>>>18|ah4<<32-18)^(ah4>>>41-32|al4<<32-(41-32));a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;h=ah4&ah5^~ah4&ah6;l=al4&al5^~al4&al6;a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;h=K[i*2];l=K[i*2+1];a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;h=wh[i%16];l=wl[i%16];a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;th=c&0xffff|d<<16;tl=a&0xffff|b<<16;h=th;l=tl;a=l&0xffff;b=l>>>16;c=h&0xffff;d=h>>>16;h=(ah0>>>28|al0<<32-28)^(al0>>>34-32|ah0<<32-(34-32))^(al0>>>39-32|ah0<<32-(39-32));l=(al0>>>28|ah0<<32-28)^(ah0>>>34-32|al0<<32-(34-32))^(ah0>>>39-32|al0<<32-(39-32));a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;h=ah0&ah1^ah0&ah2^ah1&ah2;l=al0&al1^al0&al2^al1&al2;a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;bh7=c&0xffff|d<<16;bl7=a&0xffff|b<<16;h=bh3;l=bl3;a=l&0xffff;b=l>>>16;c=h&0xffff;d=h>>>16;h=th;l=tl;a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;bh3=c&0xffff|d<<16;bl3=a&0xffff|b<<16;ah1=bh0;ah2=bh1;ah3=bh2;ah4=bh3;ah5=bh4;ah6=bh5;ah7=bh6;ah0=bh7;al1=bl0;al2=bl1;al3=bl2;al4=bl3;al5=bl4;al6=bl5;al7=bl6;al0=bl7;if(i%16===15){for(j=0;j<16;j++){h=wh[j];l=wl[j];a=l&0xffff;b=l>>>16;c=h&0xffff;d=h>>>16;h=wh[(j+9)%16];l=wl[(j+9)%16];a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;th=wh[(j+1)%16];tl=wl[(j+1)%16];h=(th>>>1|tl<<32-1)^(th>>>8|tl<<32-8)^th>>>7;l=(tl>>>1|th<<32-1)^(tl>>>8|th<<32-8)^(tl>>>7|th<<32-7);a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;th=wh[(j+14)%16];tl=wl[(j+14)%16];h=(th>>>19|tl<<32-19)^(tl>>>61-32|th<<32-(61-32))^th>>>6;l=(tl>>>19|th<<32-19)^(th>>>61-32|tl<<32-(61-32))^(tl>>>6|th<<32-6);a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;wh[j]=c&0xffff|d<<16;wl[j]=a&0xffff|b<<16;}}}h=ah0;l=al0;a=l&0xffff;b=l>>>16;c=h&0xffff;d=h>>>16;h=hh[0];l=hl[0];a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;hh[0]=ah0=c&0xffff|d<<16;hl[0]=al0=a&0xffff|b<<16;h=ah1;l=al1;a=l&0xffff;b=l>>>16;c=h&0xffff;d=h>>>16;h=hh[1];l=hl[1];a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;hh[1]=ah1=c&0xffff|d<<16;hl[1]=al1=a&0xffff|b<<16;h=ah2;l=al2;a=l&0xffff;b=l>>>16;c=h&0xffff;d=h>>>16;h=hh[2];l=hl[2];a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;hh[2]=ah2=c&0xffff|d<<16;hl[2]=al2=a&0xffff|b<<16;h=ah3;l=al3;a=l&0xffff;b=l>>>16;c=h&0xffff;d=h>>>16;h=hh[3];l=hl[3];a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;hh[3]=ah3=c&0xffff|d<<16;hl[3]=al3=a&0xffff|b<<16;h=ah4;l=al4;a=l&0xffff;b=l>>>16;c=h&0xffff;d=h>>>16;h=hh[4];l=hl[4];a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;hh[4]=ah4=c&0xffff|d<<16;hl[4]=al4=a&0xffff|b<<16;h=ah5;l=al5;a=l&0xffff;b=l>>>16;c=h&0xffff;d=h>>>16;h=hh[5];l=hl[5];a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;hh[5]=ah5=c&0xffff|d<<16;hl[5]=al5=a&0xffff|b<<16;h=ah6;l=al6;a=l&0xffff;b=l>>>16;c=h&0xffff;d=h>>>16;h=hh[6];l=hl[6];a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;hh[6]=ah6=c&0xffff|d<<16;hl[6]=al6=a&0xffff|b<<16;h=ah7;l=al7;a=l&0xffff;b=l>>>16;c=h&0xffff;d=h>>>16;h=hh[7];l=hl[7];a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;hh[7]=ah7=c&0xffff|d<<16;hl[7]=al7=a&0xffff|b<<16;pos+=128;n-=128;}return n;}function crypto_hash(out,m,n){var hh=new Int32Array(8),hl=new Int32Array(8),x=new Uint8Array(256),i,b=n;hh[0]=0x6a09e667;hh[1]=0xbb67ae85;hh[2]=0x3c6ef372;hh[3]=0xa54ff53a;hh[4]=0x510e527f;hh[5]=0x9b05688c;hh[6]=0x1f83d9ab;hh[7]=0x5be0cd19;hl[0]=0xf3bcc908;hl[1]=0x84caa73b;hl[2]=0xfe94f82b;hl[3]=0x5f1d36f1;hl[4]=0xade682d1;hl[5]=0x2b3e6c1f;hl[6]=0xfb41bd6b;hl[7]=0x137e2179;crypto_hashblocks_hl(hh,hl,m,n);n%=128;for(i=0;i<n;i++)x[i]=m[b-n+i];x[n]=128;n=256-128*(n<112?1:0);x[n-9]=0;ts64(x,n-8,b/0x20000000|0,b<<3);crypto_hashblocks_hl(hh,hl,x,n);for(i=0;i<8;i++)ts64(out,8*i,hh[i],hl[i]);return 0;}function add(p,q){var a=gf(),b=gf(),c=gf(),d=gf(),e=gf(),f=gf(),g=gf(),h=gf(),t=gf();Z(a,p[1],p[0]);Z(t,q[1],q[0]);M(a,a,t);A(b,p[0],p[1]);A(t,q[0],q[1]);M(b,b,t);M(c,p[3],q[3]);M(c,c,D2);M(d,p[2],q[2]);A(d,d,d);Z(e,b,a);Z(f,d,c);A(g,d,c);A(h,b,a);M(p[0],e,f);M(p[1],h,g);M(p[2],g,f);M(p[3],e,h);}function cswap(p,q,b){var i;for(i=0;i<4;i++){sel25519(p[i],q[i],b);}}function pack(r,p){var tx=gf(),ty=gf(),zi=gf();inv25519(zi,p[2]);M(tx,p[0],zi);M(ty,p[1],zi);pack25519(r,ty);r[31]^=par25519(tx)<<7;}function scalarmult(p,q,s){var b,i;set25519(p[0],gf0);set25519(p[1],gf1);set25519(p[2],gf1);set25519(p[3],gf0);for(i=255;i>=0;--i){b=s[i/8|0]>>(i&7)&1;cswap(p,q,b);add(q,p);add(p,p);cswap(p,q,b);}}function scalarbase(p,s){var q=[gf(),gf(),gf(),gf()];set25519(q[0],X);set25519(q[1],Y);set25519(q[2],gf1);M(q[3],X,Y);scalarmult(p,q,s);}function crypto_sign_keypair(pk,sk,seeded){var d=new Uint8Array(64);var p=[gf(),gf(),gf(),gf()];var i;if(!seeded)randombytes(sk,32);crypto_hash(d,sk,32);d[0]&=248;d[31]&=127;d[31]|=64;scalarbase(p,d);pack(pk,p);for(i=0;i<32;i++)sk[i+32]=pk[i];return 0;}var L=new Float64Array([0xed,0xd3,0xf5,0x5c,0x1a,0x63,0x12,0x58,0xd6,0x9c,0xf7,0xa2,0xde,0xf9,0xde,0x14,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0x10]);function modL(r,x){var carry,i,j,k;for(i=63;i>=32;--i){carry=0;for(j=i-32,k=i-12;j<k;++j){x[j]+=carry-16*x[i]*L[j-(i-32)];carry=x[j]+128>>8;x[j]-=carry*256;}x[j]+=carry;x[i]=0;}carry=0;for(j=0;j<32;j++){x[j]+=carry-(x[31]>>4)*L[j];carry=x[j]>>8;x[j]&=255;}for(j=0;j<32;j++)x[j]-=carry*L[j];for(i=0;i<32;i++){x[i+1]+=x[i]>>8;r[i]=x[i]&255;}}function reduce(r){var x=new Float64Array(64),i;for(i=0;i<64;i++)x[i]=r[i];for(i=0;i<64;i++)r[i]=0;modL(r,x);}function crypto_sign(sm,m,n,sk){var d=new Uint8Array(64),h=new Uint8Array(64),r=new Uint8Array(64);var i,j,x=new Float64Array(64);var p=[gf(),gf(),gf(),gf()];crypto_hash(d,sk,32);d[0]&=248;d[31]&=127;d[31]|=64;var smlen=n+64;for(i=0;i<n;i++)sm[64+i]=m[i];for(i=0;i<32;i++)sm[32+i]=d[32+i];crypto_hash(r,sm.subarray(32),n+32);reduce(r);scalarbase(p,r);pack(sm,p);for(i=32;i<64;i++)sm[i]=sk[i];crypto_hash(h,sm,n+64);reduce(h);for(i=0;i<64;i++)x[i]=0;for(i=0;i<32;i++)x[i]=r[i];for(i=0;i<32;i++){for(j=0;j<32;j++){x[i+j]+=h[i]*d[j];}}modL(sm.subarray(32),x);return smlen;}function unpackneg(r,p){var t=gf(),chk=gf(),num=gf(),den=gf(),den2=gf(),den4=gf(),den6=gf();set25519(r[2],gf1);unpack25519(r[1],p);S(num,r[1]);M(den,num,D);Z(num,num,r[2]);A(den,r[2],den);S(den2,den);S(den4,den2);M(den6,den4,den2);M(t,den6,num);M(t,t,den);pow2523(t,t);M(t,t,num);M(t,t,den);M(t,t,den);M(r[0],t,den);S(chk,r[0]);M(chk,chk,den);if(neq25519(chk,num))M(r[0],r[0],I);S(chk,r[0]);M(chk,chk,den);if(neq25519(chk,num))return-1;if(par25519(r[0])===p[31]>>7)Z(r[0],gf0,r[0]);M(r[3],r[0],r[1]);return 0;}function crypto_sign_open(m,sm,n,pk){var i,mlen;var t=new Uint8Array(32),h=new Uint8Array(64);var p=[gf(),gf(),gf(),gf()],q=[gf(),gf(),gf(),gf()];mlen=-1;if(n<64)return-1;if(unpackneg(q,pk))return-1;for(i=0;i<n;i++)m[i]=sm[i];for(i=0;i<32;i++)m[i+32]=pk[i];crypto_hash(h,m,n);reduce(h);scalarmult(p,q,h);scalarbase(q,sm.subarray(32));add(p,q);pack(t,p);n-=64;if(crypto_verify_32(sm,0,t,0)){for(i=0;i<n;i++)m[i]=0;return-1;}for(i=0;i<n;i++)m[i]=sm[i+64];mlen=n;return mlen;}var crypto_secretbox_KEYBYTES=32,crypto_secretbox_NONCEBYTES=24,crypto_secretbox_ZEROBYTES=32,crypto_secretbox_BOXZEROBYTES=16,crypto_scalarmult_BYTES=32,crypto_scalarmult_SCALARBYTES=32,crypto_box_PUBLICKEYBYTES=32,crypto_box_SECRETKEYBYTES=32,crypto_box_BEFORENMBYTES=32,crypto_box_NONCEBYTES=crypto_secretbox_NONCEBYTES,crypto_box_ZEROBYTES=crypto_secretbox_ZEROBYTES,crypto_box_BOXZEROBYTES=crypto_secretbox_BOXZEROBYTES,crypto_sign_BYTES=64,crypto_sign_PUBLICKEYBYTES=32,crypto_sign_SECRETKEYBYTES=64,crypto_sign_SEEDBYTES=32,crypto_hash_BYTES=64;nacl.lowlevel={crypto_core_hsalsa20:crypto_core_hsalsa20,crypto_stream_xor:crypto_stream_xor,crypto_stream:crypto_stream,crypto_stream_salsa20_xor:crypto_stream_salsa20_xor,crypto_stream_salsa20:crypto_stream_salsa20,crypto_onetimeauth:crypto_onetimeauth,crypto_onetimeauth_verify:crypto_onetimeauth_verify,crypto_verify_16:crypto_verify_16,crypto_verify_32:crypto_verify_32,crypto_secretbox:crypto_secretbox,crypto_secretbox_open:crypto_secretbox_open,crypto_scalarmult:crypto_scalarmult,crypto_scalarmult_base:crypto_scalarmult_base,crypto_box_beforenm:crypto_box_beforenm,crypto_box_afternm:crypto_box_afternm,crypto_box:crypto_box,crypto_box_open:crypto_box_open,crypto_box_keypair:crypto_box_keypair,crypto_hash:crypto_hash,crypto_sign:crypto_sign,crypto_sign_keypair:crypto_sign_keypair,crypto_sign_open:crypto_sign_open,crypto_secretbox_KEYBYTES:crypto_secretbox_KEYBYTES,crypto_secretbox_NONCEBYTES:crypto_secretbox_NONCEBYTES,crypto_secretbox_ZEROBYTES:crypto_secretbox_ZEROBYTES,crypto_secretbox_BOXZEROBYTES:crypto_secretbox_BOXZEROBYTES,crypto_scalarmult_BYTES:crypto_scalarmult_BYTES,crypto_scalarmult_SCALARBYTES:crypto_scalarmult_SCALARBYTES,crypto_box_PUBLICKEYBYTES:crypto_box_PUBLICKEYBYTES,crypto_box_SECRETKEYBYTES:crypto_box_SECRETKEYBYTES,crypto_box_BEFORENMBYTES:crypto_box_BEFORENMBYTES,crypto_box_NONCEBYTES:crypto_box_NONCEBYTES,crypto_box_ZEROBYTES:crypto_box_ZEROBYTES,crypto_box_BOXZEROBYTES:crypto_box_BOXZEROBYTES,crypto_sign_BYTES:crypto_sign_BYTES,crypto_sign_PUBLICKEYBYTES:crypto_sign_PUBLICKEYBYTES,crypto_sign_SECRETKEYBYTES:crypto_sign_SECRETKEYBYTES,crypto_sign_SEEDBYTES:crypto_sign_SEEDBYTES,crypto_hash_BYTES:crypto_hash_BYTES};function checkLengths(k,n){if(k.length!==crypto_secretbox_KEYBYTES)throw new Error('bad key size');if(n.length!==crypto_secretbox_NONCEBYTES)throw new Error('bad nonce size');}function checkBoxLengths(pk,sk){if(pk.length!==crypto_box_PUBLICKEYBYTES)throw new Error('bad public key size');if(sk.length!==crypto_box_SECRETKEYBYTES)throw new Error('bad secret key size');}function checkArrayTypes(){for(var i=0;i<arguments.length;i++){if(!(arguments[i]instanceof Uint8Array))throw new TypeError('unexpected type, use Uint8Array');}}function cleanup(arr){for(var i=0;i<arr.length;i++)arr[i]=0;}nacl.randomBytes=function(n){var b=new Uint8Array(n);randombytes(b,n);return b;};nacl.secretbox=function(msg,nonce,key){checkArrayTypes(msg,nonce,key);checkLengths(key,nonce);var m=new Uint8Array(crypto_secretbox_ZEROBYTES+msg.length);var c=new Uint8Array(m.length);for(var i=0;i<msg.length;i++)m[i+crypto_secretbox_ZEROBYTES]=msg[i];crypto_secretbox(c,m,m.length,nonce,key);return c.subarray(crypto_secretbox_BOXZEROBYTES);};nacl.secretbox.open=function(box,nonce,key){checkArrayTypes(box,nonce,key);checkLengths(key,nonce);var c=new Uint8Array(crypto_secretbox_BOXZEROBYTES+box.length);var m=new Uint8Array(c.length);for(var i=0;i<box.length;i++)c[i+crypto_secretbox_BOXZEROBYTES]=box[i];if(c.length<32)return null;if(crypto_secretbox_open(m,c,c.length,nonce,key)!==0)return null;return m.subarray(crypto_secretbox_ZEROBYTES);};nacl.secretbox.keyLength=crypto_secretbox_KEYBYTES;nacl.secretbox.nonceLength=crypto_secretbox_NONCEBYTES;nacl.secretbox.overheadLength=crypto_secretbox_BOXZEROBYTES;nacl.scalarMult=function(n,p){checkArrayTypes(n,p);if(n.length!==crypto_scalarmult_SCALARBYTES)throw new Error('bad n size');if(p.length!==crypto_scalarmult_BYTES)throw new Error('bad p size');var q=new Uint8Array(crypto_scalarmult_BYTES);crypto_scalarmult(q,n,p);return q;};nacl.scalarMult.base=function(n){checkArrayTypes(n);if(n.length!==crypto_scalarmult_SCALARBYTES)throw new Error('bad n size');var q=new Uint8Array(crypto_scalarmult_BYTES);crypto_scalarmult_base(q,n);return q;};nacl.scalarMult.scalarLength=crypto_scalarmult_SCALARBYTES;nacl.scalarMult.groupElementLength=crypto_scalarmult_BYTES;nacl.box=function(msg,nonce,publicKey,secretKey){var k=nacl.box.before(publicKey,secretKey);return nacl.secretbox(msg,nonce,k);};nacl.box.before=function(publicKey,secretKey){checkArrayTypes(publicKey,secretKey);checkBoxLengths(publicKey,secretKey);var k=new Uint8Array(crypto_box_BEFORENMBYTES);crypto_box_beforenm(k,publicKey,secretKey);return k;};nacl.box.after=nacl.secretbox;nacl.box.open=function(msg,nonce,publicKey,secretKey){var k=nacl.box.before(publicKey,secretKey);return nacl.secretbox.open(msg,nonce,k);};nacl.box.open.after=nacl.secretbox.open;nacl.box.keyPair=function(){var pk=new Uint8Array(crypto_box_PUBLICKEYBYTES);var sk=new Uint8Array(crypto_box_SECRETKEYBYTES);crypto_box_keypair(pk,sk);return{publicKey:pk,secretKey:sk};};nacl.box.keyPair.fromSecretKey=function(secretKey){checkArrayTypes(secretKey);if(secretKey.length!==crypto_box_SECRETKEYBYTES)throw new Error('bad secret key size');var pk=new Uint8Array(crypto_box_PUBLICKEYBYTES);crypto_scalarmult_base(pk,secretKey);return{publicKey:pk,secretKey:new Uint8Array(secretKey)};};nacl.box.publicKeyLength=crypto_box_PUBLICKEYBYTES;nacl.box.secretKeyLength=crypto_box_SECRETKEYBYTES;nacl.box.sharedKeyLength=crypto_box_BEFORENMBYTES;nacl.box.nonceLength=crypto_box_NONCEBYTES;nacl.box.overheadLength=nacl.secretbox.overheadLength;nacl.sign=function(msg,secretKey){checkArrayTypes(msg,secretKey);if(secretKey.length!==crypto_sign_SECRETKEYBYTES)throw new Error('bad secret key size');var signedMsg=new Uint8Array(crypto_sign_BYTES+msg.length);crypto_sign(signedMsg,msg,msg.length,secretKey);return signedMsg;};nacl.sign.open=function(signedMsg,publicKey){checkArrayTypes(signedMsg,publicKey);if(publicKey.length!==crypto_sign_PUBLICKEYBYTES)throw new Error('bad public key size');var tmp=new Uint8Array(signedMsg.length);var mlen=crypto_sign_open(tmp,signedMsg,signedMsg.length,publicKey);if(mlen<0)return null;var m=new Uint8Array(mlen);for(var i=0;i<m.length;i++)m[i]=tmp[i];return m;};nacl.sign.detached=function(msg,secretKey){var signedMsg=nacl.sign(msg,secretKey);var sig=new Uint8Array(crypto_sign_BYTES);for(var i=0;i<sig.length;i++)sig[i]=signedMsg[i];return sig;};nacl.sign.detached.verify=function(msg,sig,publicKey){checkArrayTypes(msg,sig,publicKey);if(sig.length!==crypto_sign_BYTES)throw new Error('bad signature size');if(publicKey.length!==crypto_sign_PUBLICKEYBYTES)throw new Error('bad public key size');var sm=new Uint8Array(crypto_sign_BYTES+msg.length);var m=new Uint8Array(crypto_sign_BYTES+msg.length);var i;for(i=0;i<crypto_sign_BYTES;i++)sm[i]=sig[i];for(i=0;i<msg.length;i++)sm[i+crypto_sign_BYTES]=msg[i];return crypto_sign_open(m,sm,sm.length,publicKey)>=0;};nacl.sign.keyPair=function(){var pk=new Uint8Array(crypto_sign_PUBLICKEYBYTES);var sk=new Uint8Array(crypto_sign_SECRETKEYBYTES);crypto_sign_keypair(pk,sk);return{publicKey:pk,secretKey:sk};};nacl.sign.keyPair.fromSecretKey=function(secretKey){checkArrayTypes(secretKey);if(secretKey.length!==crypto_sign_SECRETKEYBYTES)throw new Error('bad secret key size');var pk=new Uint8Array(crypto_sign_PUBLICKEYBYTES);for(var i=0;i<pk.length;i++)pk[i]=secretKey[32+i];return{publicKey:pk,secretKey:new Uint8Array(secretKey)};};nacl.sign.keyPair.fromSeed=function(seed){checkArrayTypes(seed);if(seed.length!==crypto_sign_SEEDBYTES)throw new Error('bad seed size');var pk=new Uint8Array(crypto_sign_PUBLICKEYBYTES);var sk=new Uint8Array(crypto_sign_SECRETKEYBYTES);for(var i=0;i<32;i++)sk[i]=seed[i];crypto_sign_keypair(pk,sk,true);return{publicKey:pk,secretKey:sk};};nacl.sign.publicKeyLength=crypto_sign_PUBLICKEYBYTES;nacl.sign.secretKeyLength=crypto_sign_SECRETKEYBYTES;nacl.sign.seedLength=crypto_sign_SEEDBYTES;nacl.sign.signatureLength=crypto_sign_BYTES;nacl.hash=function(msg){checkArrayTypes(msg);var h=new Uint8Array(crypto_hash_BYTES);crypto_hash(h,msg,msg.length);return h;};nacl.hash.hashLength=crypto_hash_BYTES;nacl.verify=function(x,y){checkArrayTypes(x,y);if(x.length===0||y.length===0)return false;if(x.length!==y.length)return false;return vn(x,0,y,0,x.length)===0?true:false;};nacl.setPRNG=function(fn){randombytes=fn;};(function(){var crypto=typeof self!=='undefined'?self.crypto||self.msCrypto:null;if(crypto&&crypto.getRandomValues){var QUOTA=65536;nacl.setPRNG(function(x,n){var i,v=new Uint8Array(n);for(i=0;i<n;i+=QUOTA){crypto.getRandomValues(v.subarray(i,i+Math.min(n-i,QUOTA)));}for(i=0;i<n;i++)x[i]=v[i];cleanup(v);});}else if(true){crypto=__webpack_require__(2984);if(crypto&&crypto.randomBytes){nacl.setPRNG(function(x,n){var i,v=crypto.randomBytes(n);for(i=0;i<n;i++)x[i]=v[i];cleanup(v);});}}})();})(true&&module.exports?module.exports:self.nacl=self.nacl||{});},2213:function(module,__unusedexports,__webpack_require__){"use strict";var pna=__webpack_require__(88);function destroy(err,cb){var _this=this;var readableDestroyed=this._readableState&&this._readableState.destroyed;var writableDestroyed=this._writableState&&this._writableState.destroyed;if(readableDestroyed||writableDestroyed){if(cb){cb(err);}else if(err&&(!this._writableState||!this._writableState.errorEmitted)){pna.nextTick(emitErrorNT,this,err);}return this;}if(this._readableState){this._readableState.destroyed=true;}if(this._writableState){this._writableState.destroyed=true;}this._destroy(err||null,function(err){if(!cb&&err){pna.nextTick(emitErrorNT,_this,err);if(_this._writableState){_this._writableState.errorEmitted=true;}}else if(cb){cb(err);}});return this;}function undestroy(){if(this._readableState){this._readableState.destroyed=false;this._readableState.reading=false;this._readableState.ended=false;this._readableState.endEmitted=false;}if(this._writableState){this._writableState.destroyed=false;this._writableState.ended=false;this._writableState.ending=false;this._writableState.finished=false;this._writableState.errorEmitted=false;}}function emitErrorNT(self,err){self.emit('error',err);}module.exports={destroy:destroy,undestroy:undestroy};},2221:function(module,__unusedexports,__webpack_require__){"use strict";const series=__webpack_require__(7644);const waterfall=__webpack_require__(4265);const{toSources}=__webpack_require__(7777);const cp=__webpack_require__(1641);const rm=__webpack_require__(5352);const defaultOptions={parents:false,recursive:false,flush:true,format:'dag-pb',hashAlg:'sha2-256',shardSplitThreshold:1000};module.exports=context=>{return function mfsMv(){let args=Array.from(arguments);const callback=args.pop();if(Array.isArray(args[0])){args=args[0].concat(args.slice(1));}waterfall([cb=>toSources(context,args,defaultOptions,cb),({sources,options},cb)=>{const cpArgs=sources.map(source=>source.path).concat(options);const rmArgs=sources.slice(0,-1).map(source=>source.path).concat(Object.assign(options,{recursive:true}));series([cb=>cp(context).apply(null,cpArgs.concat(cb)),cb=>rm(context).apply(null,rmArgs.concat(cb))],cb);}],callback);};};},2227:function(module,__unusedexports,__webpack_require__){"use strict";var curve=__webpack_require__(7573);var elliptic=__webpack_require__(5194);var bn=__webpack_require__(2420);var inherits=__webpack_require__(2915);var Base=curve.base;var assert=elliptic.utils.assert;function ShortCurve(conf){Base.call(this,'short',conf);this.a=new bn(conf.a,16).toRed(this.red);this.b=new bn(conf.b,16).toRed(this.red);this.tinv=this.two.redInvm();this.zeroA=this.a.fromRed().cmpn(0)===0;this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0;this.endo=this._getEndomorphism(conf);this._endoWnafT1=new Array(4);this._endoWnafT2=new Array(4);}inherits(ShortCurve,Base);module.exports=ShortCurve;ShortCurve.prototype._getEndomorphism=function _getEndomorphism(conf){if(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)return;var beta;var lambda;if(conf.beta){beta=new bn(conf.beta,16).toRed(this.red);}else{var betas=this._getEndoRoots(this.p);beta=betas[0].cmp(betas[1])<0?betas[0]:betas[1];beta=beta.toRed(this.red);}if(conf.lambda){lambda=new bn(conf.lambda,16);}else{var lambdas=this._getEndoRoots(this.n);if(this.g.mul(lambdas[0]).x.cmp(this.g.x.redMul(beta))===0){lambda=lambdas[0];}else{lambda=lambdas[1];assert(this.g.mul(lambda).x.cmp(this.g.x.redMul(beta))===0);}}var basis;if(conf.basis){basis=conf.basis.map(function(vec){return{a:new bn(vec.a,16),b:new bn(vec.b,16)};});}else{basis=this._getEndoBasis(lambda);}return{beta:beta,lambda:lambda,basis:basis};};ShortCurve.prototype._getEndoRoots=function _getEndoRoots(num){var red=num===this.p?this.red:bn.mont(num);var tinv=new bn(2).toRed(red).redInvm();var ntinv=tinv.redNeg();var s=new bn(3).toRed(red).redNeg().redSqrt().redMul(tinv);var l1=ntinv.redAdd(s).fromRed();var l2=ntinv.redSub(s).fromRed();return[l1,l2];};ShortCurve.prototype._getEndoBasis=function _getEndoBasis(lambda){var aprxSqrt=this.n.shrn(Math.floor(this.n.bitLength()/2));var u=lambda;var v=this.n.clone();var x1=new bn(1);var y1=new bn(0);var x2=new bn(0);var y2=new bn(1);var a0;var b0;var a1;var b1;var a2;var b2;var prevR;var i=0;var r;var x;while(u.cmpn(0)!==0){var q=v.div(u);r=v.sub(q.mul(u));x=x2.sub(q.mul(x1));var y=y2.sub(q.mul(y1));if(!a1&&r.cmp(aprxSqrt)<0){a0=prevR.neg();b0=x1;a1=r.neg();b1=x;}else if(a1&&++i===2){break;}prevR=r;v=u;u=r;x2=x1;x1=x;y2=y1;y1=y;}a2=r.neg();b2=x;var len1=a1.sqr().add(b1.sqr());var len2=a2.sqr().add(b2.sqr());if(len2.cmp(len1)>=0){a2=a0;b2=b0;}if(a1.sign){a1=a1.neg();b1=b1.neg();}if(a2.sign){a2=a2.neg();b2=b2.neg();}return[{a:a1,b:b1},{a:a2,b:b2}];};ShortCurve.prototype._endoSplit=function _endoSplit(k){var basis=this.endo.basis;var v1=basis[0];var v2=basis[1];var c1=v2.b.mul(k).divRound(this.n);var c2=v1.b.neg().mul(k).divRound(this.n);var p1=c1.mul(v1.a);var p2=c2.mul(v2.a);var q1=c1.mul(v1.b);var q2=c2.mul(v2.b);var k1=k.sub(p1).sub(p2);var k2=q1.add(q2).neg();return{k1:k1,k2:k2};};ShortCurve.prototype.pointFromX=function pointFromX(odd,x){x=new bn(x,16);if(!x.red)x=x.toRed(this.red);var y2=x.redSqr().redMul(x).redIAdd(x.redMul(this.a)).redIAdd(this.b);var y=y2.redSqrt();var isOdd=y.fromRed().isOdd();if(odd&&!isOdd||!odd&&isOdd)y=y.redNeg();return this.point(x,y);};ShortCurve.prototype.validate=function validate(point){if(point.inf)return true;var x=point.x;var y=point.y;var ax=this.a.redMul(x);var rhs=x.redSqr().redMul(x).redIAdd(ax).redIAdd(this.b);return y.redSqr().redISub(rhs).cmpn(0)===0;};ShortCurve.prototype._endoWnafMulAdd=function _endoWnafMulAdd(points,coeffs){var npoints=this._endoWnafT1;var ncoeffs=this._endoWnafT2;for(var i=0;i<points.length;i++){var split=this._endoSplit(coeffs[i]);var p=points[i];var beta=p._getBeta();if(split.k1.sign){split.k1.sign=!split.k1.sign;p=p.neg(true);}if(split.k2.sign){split.k2.sign=!split.k2.sign;beta=beta.neg(true);}npoints[i*2]=p;npoints[i*2+1]=beta;ncoeffs[i*2]=split.k1;ncoeffs[i*2+1]=split.k2;}var res=this._wnafMulAdd(1,npoints,ncoeffs,i*2);for(var j=0;j<i*2;j++){npoints[j]=null;ncoeffs[j]=null;}return res;};function Point(curve,x,y,isRed){Base.BasePoint.call(this,curve,'affine');if(x===null&&y===null){this.x=null;this.y=null;this.inf=true;}else{this.x=new bn(x,16);this.y=new bn(y,16);if(isRed){this.x.forceRed(this.curve.red);this.y.forceRed(this.curve.red);}if(!this.x.red)this.x=this.x.toRed(this.curve.red);if(!this.y.red)this.y=this.y.toRed(this.curve.red);this.inf=false;}}inherits(Point,Base.BasePoint);ShortCurve.prototype.point=function point(x,y,isRed){return new Point(this,x,y,isRed);};ShortCurve.prototype.pointFromJSON=function pointFromJSON(obj,red){return Point.fromJSON(this,obj,red);};Point.prototype._getBeta=function _getBeta(){if(!this.curve.endo)return;var pre=this.precomputed;if(pre&&pre.beta)return pre.beta;var beta=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(pre){var curve=this.curve;var endoMul=function(p){return curve.point(p.x.redMul(curve.endo.beta),p.y);};pre.beta=beta;beta.precomputed={beta:null,naf:pre.naf&&{wnd:pre.naf.wnd,points:pre.naf.points.map(endoMul)},doubles:pre.doubles&&{step:pre.doubles.step,points:pre.doubles.points.map(endoMul)}};}return beta;};Point.prototype.toJSON=function toJSON(){if(!this.precomputed)return[this.x,this.y];return[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}];};Point.fromJSON=function fromJSON(curve,obj,red){if(typeof obj==='string')obj=JSON.parse(obj);var res=curve.point(obj[0],obj[1],red);if(!obj[2])return res;function obj2point(obj){return curve.point(obj[0],obj[1],red);}var pre=obj[2];res.precomputed={beta:null,doubles:pre.doubles&&{step:pre.doubles.step,points:[res].concat(pre.doubles.points.map(obj2point))},naf:pre.naf&&{wnd:pre.naf.wnd,points:[res].concat(pre.naf.points.map(obj2point))}};return res;};Point.prototype.inspect=function inspect(){if(this.isInfinity())return'<EC Point Infinity>';return'<EC Point x: '+this.x.fromRed().toString(16,2)+' y: '+this.y.fromRed().toString(16,2)+'>';};Point.prototype.isInfinity=function isInfinity(){return this.inf;};Point.prototype.add=function add(p){if(this.inf)return p;if(p.inf)return this;if(this.eq(p))return this.dbl();if(this.neg().eq(p))return this.curve.point(null,null);if(this.x.cmp(p.x)===0)return this.curve.point(null,null);var c=this.y.redSub(p.y);if(c.cmpn(0)!==0)c=c.redMul(this.x.redSub(p.x).redInvm());var nx=c.redSqr().redISub(this.x).redISub(p.x);var ny=c.redMul(this.x.redSub(nx)).redISub(this.y);return this.curve.point(nx,ny);};Point.prototype.dbl=function dbl(){if(this.inf)return this;var ys1=this.y.redAdd(this.y);if(ys1.cmpn(0)===0)return this.curve.point(null,null);var a=this.curve.a;var x2=this.x.redSqr();var dyinv=ys1.redInvm();var c=x2.redAdd(x2).redIAdd(x2).redIAdd(a).redMul(dyinv);var nx=c.redSqr().redISub(this.x.redAdd(this.x));var ny=c.redMul(this.x.redSub(nx)).redISub(this.y);return this.curve.point(nx,ny);};Point.prototype.getX=function getX(){return this.x.fromRed();};Point.prototype.getY=function getY(){return this.y.fromRed();};Point.prototype.mul=function mul(k){k=new bn(k,16);if(this.precomputed&&this.precomputed.doubles)return this.curve._fixedNafMul(this,k);else if(this.curve.endo)return this.curve._endoWnafMulAdd([this],[k]);else return this.curve._wnafMul(this,k);};Point.prototype.mulAdd=function mulAdd(k1,p2,k2){var points=[this,p2];var coeffs=[k1,k2];if(this.curve.endo)return this.curve._endoWnafMulAdd(points,coeffs);else return this.curve._wnafMulAdd(1,points,coeffs,2);};Point.prototype.eq=function eq(p){return this===p||this.inf===p.inf&&(this.inf||this.x.cmp(p.x)===0&&this.y.cmp(p.y)===0);};Point.prototype.neg=function neg(_precompute){if(this.inf)return this;var res=this.curve.point(this.x,this.y.redNeg());if(_precompute&&this.precomputed){var pre=this.precomputed;var negate=function(p){return p.neg();};res.precomputed={naf:pre.naf&&{wnd:pre.naf.wnd,points:pre.naf.points.map(negate)},doubles:pre.doubles&&{step:pre.doubles.step,points:pre.doubles.points.map(negate)}};}return res;};Point.prototype.toJ=function toJ(){if(this.inf)return this.curve.jpoint(null,null,null);var res=this.curve.jpoint(this.x,this.y,this.curve.one);return res;};function JPoint(curve,x,y,z){Base.BasePoint.call(this,curve,'jacobian');if(x===null&&y===null&&z===null){this.x=this.curve.one;this.y=this.curve.one;this.z=new bn(0);}else{this.x=new bn(x,16);this.y=new bn(y,16);this.z=new bn(z,16);}if(!this.x.red)this.x=this.x.toRed(this.curve.red);if(!this.y.red)this.y=this.y.toRed(this.curve.red);if(!this.z.red)this.z=this.z.toRed(this.curve.red);this.zOne=this.z===this.curve.one;}inherits(JPoint,Base.BasePoint);ShortCurve.prototype.jpoint=function jpoint(x,y,z){return new JPoint(this,x,y,z);};JPoint.prototype.toP=function toP(){if(this.isInfinity())return this.curve.point(null,null);var zinv=this.z.redInvm();var zinv2=zinv.redSqr();var ax=this.x.redMul(zinv2);var ay=this.y.redMul(zinv2).redMul(zinv);return this.curve.point(ax,ay);};JPoint.prototype.neg=function neg(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z);};JPoint.prototype.add=function add(p){if(this.isInfinity())return p;if(p.isInfinity())return this;var pz2=p.z.redSqr();var z2=this.z.redSqr();var u1=this.x.redMul(pz2);var u2=p.x.redMul(z2);var s1=this.y.redMul(pz2.redMul(p.z));var s2=p.y.redMul(z2.redMul(this.z));var h=u1.redSub(u2);var r=s1.redSub(s2);if(h.cmpn(0)===0){if(r.cmpn(0)!==0)return this.curve.jpoint(null,null,null);else return this.dbl();}var h2=h.redSqr();var h3=h2.redMul(h);var v=u1.redMul(h2);var nx=r.redSqr().redIAdd(h3).redISub(v).redISub(v);var ny=r.redMul(v.redISub(nx)).redISub(s1.redMul(h3));var nz=this.z.redMul(p.z).redMul(h);return this.curve.jpoint(nx,ny,nz);};JPoint.prototype.mixedAdd=function mixedAdd(p){if(this.isInfinity())return p.toJ();if(p.isInfinity())return this;var z2=this.z.redSqr();var u1=this.x;var u2=p.x.redMul(z2);var s1=this.y;var s2=p.y.redMul(z2).redMul(this.z);var h=u1.redSub(u2);var r=s1.redSub(s2);if(h.cmpn(0)===0){if(r.cmpn(0)!==0)return this.curve.jpoint(null,null,null);else return this.dbl();}var h2=h.redSqr();var h3=h2.redMul(h);var v=u1.redMul(h2);var nx=r.redSqr().redIAdd(h3).redISub(v).redISub(v);var ny=r.redMul(v.redISub(nx)).redISub(s1.redMul(h3));var nz=this.z.redMul(h);return this.curve.jpoint(nx,ny,nz);};JPoint.prototype.dblp=function dblp(pow){if(pow===0)return this;if(this.isInfinity())return this;if(!pow)return this.dbl();if(this.curve.zeroA||this.curve.threeA){var r=this;for(var i=0;i<pow;i++)r=r.dbl();return r;}var a=this.curve.a;var tinv=this.curve.tinv;var jx=this.x;var jy=this.y;var jz=this.z;var jz4=jz.redSqr().redSqr();var jyd=jy.redAdd(jy);for(var i=0;i<pow;i++){var jx2=jx.redSqr();var jyd2=jyd.redSqr();var jyd4=jyd2.redSqr();var c=jx2.redAdd(jx2).redIAdd(jx2).redIAdd(a.redMul(jz4));var t1=jx.redMul(jyd2);var nx=c.redSqr().redISub(t1.redAdd(t1));var t2=t1.redISub(nx);var dny=c.redMul(t2);dny=dny.redIAdd(dny).redISub(jyd4);var nz=jyd.redMul(jz);if(i+1<pow)jz4=jz4.redMul(jyd4);jx=nx;jz=nz;jyd=dny;}return this.curve.jpoint(jx,jyd.redMul(tinv),jz);};JPoint.prototype.dbl=function dbl(){if(this.isInfinity())return this;if(this.curve.zeroA)return this._zeroDbl();else if(this.curve.threeA)return this._threeDbl();else return this._dbl();};JPoint.prototype._zeroDbl=function _zeroDbl(){var nx;var ny;var nz;if(this.zOne){var xx=this.x.redSqr();var yy=this.y.redSqr();var yyyy=yy.redSqr();var s=this.x.redAdd(yy).redSqr().redISub(xx).redISub(yyyy);s=s.redIAdd(s);var m=xx.redAdd(xx).redIAdd(xx);var t=m.redSqr().redISub(s).redISub(s);var yyyy8=yyyy.redIAdd(yyyy);yyyy8=yyyy8.redIAdd(yyyy8);yyyy8=yyyy8.redIAdd(yyyy8);nx=t;ny=m.redMul(s.redISub(t)).redISub(yyyy8);nz=this.y.redAdd(this.y);}else{var a=this.x.redSqr();var b=this.y.redSqr();var c=b.redSqr();var d=this.x.redAdd(b).redSqr().redISub(a).redISub(c);d=d.redIAdd(d);var e=a.redAdd(a).redIAdd(a);var f=e.redSqr();var c8=c.redIAdd(c);c8=c8.redIAdd(c8);c8=c8.redIAdd(c8);nx=f.redISub(d).redISub(d);ny=e.redMul(d.redISub(nx)).redISub(c8);nz=this.y.redMul(this.z);nz=nz.redIAdd(nz);}return this.curve.jpoint(nx,ny,nz);};JPoint.prototype._threeDbl=function _threeDbl(){var nx;var ny;var nz;if(this.zOne){var xx=this.x.redSqr();var yy=this.y.redSqr();var yyyy=yy.redSqr();var s=this.x.redAdd(yy).redSqr().redISub(xx).redISub(yyyy);s=s.redIAdd(s);var m=xx.redAdd(xx).redIAdd(xx).redIAdd(this.curve.a);var t=m.redSqr().redISub(s).redISub(s);nx=t;var yyyy8=yyyy.redIAdd(yyyy);yyyy8=yyyy8.redIAdd(yyyy8);yyyy8=yyyy8.redIAdd(yyyy8);ny=m.redMul(s.redISub(t)).redISub(yyyy8);nz=this.y.redAdd(this.y);}else{var delta=this.z.redSqr();var gamma=this.y.redSqr();var beta=this.x.redMul(gamma);var alpha=this.x.redSub(delta).redMul(this.x.redAdd(delta));alpha=alpha.redAdd(alpha).redIAdd(alpha);var beta4=beta.redIAdd(beta);beta4=beta4.redIAdd(beta4);var beta8=beta4.redAdd(beta4);nx=alpha.redSqr().redISub(beta8);nz=this.y.redAdd(this.z).redSqr().redISub(gamma).redISub(delta);var ggamma8=gamma.redSqr();ggamma8=ggamma8.redIAdd(ggamma8);ggamma8=ggamma8.redIAdd(ggamma8);ggamma8=ggamma8.redIAdd(ggamma8);ny=alpha.redMul(beta4.redISub(nx)).redISub(ggamma8);}return this.curve.jpoint(nx,ny,nz);};JPoint.prototype._dbl=function _dbl(){var a=this.curve.a;var jx=this.x;var jy=this.y;var jz=this.z;var jz4=jz.redSqr().redSqr();var jx2=jx.redSqr();var jy2=jy.redSqr();var c=jx2.redAdd(jx2).redIAdd(jx2).redIAdd(a.redMul(jz4));var jxd4=jx.redAdd(jx);jxd4=jxd4.redIAdd(jxd4);var t1=jxd4.redMul(jy2);var nx=c.redSqr().redISub(t1.redAdd(t1));var t2=t1.redISub(nx);var jyd8=jy2.redSqr();jyd8=jyd8.redIAdd(jyd8);jyd8=jyd8.redIAdd(jyd8);jyd8=jyd8.redIAdd(jyd8);var ny=c.redMul(t2).redISub(jyd8);var nz=jy.redAdd(jy).redMul(jz);return this.curve.jpoint(nx,ny,nz);};JPoint.prototype.trpl=function trpl(){if(!this.curve.zeroA)return this.dbl().add(this);var xx=this.x.redSqr();var yy=this.y.redSqr();var zz=this.z.redSqr();var yyyy=yy.redSqr();var m=xx.redAdd(xx).redIAdd(xx);var mm=m.redSqr();var e=this.x.redAdd(yy).redSqr().redISub(xx).redISub(yyyy);e=e.redIAdd(e);e=e.redAdd(e).redIAdd(e);e=e.redISub(mm);var ee=e.redSqr();var t=yyyy.redIAdd(yyyy);t=t.redIAdd(t);t=t.redIAdd(t);t=t.redIAdd(t);var u=m.redIAdd(e).redSqr().redISub(mm).redISub(ee).redISub(t);var yyu4=yy.redMul(u);yyu4=yyu4.redIAdd(yyu4);yyu4=yyu4.redIAdd(yyu4);var nx=this.x.redMul(ee).redISub(yyu4);nx=nx.redIAdd(nx);nx=nx.redIAdd(nx);var ny=this.y.redMul(u.redMul(t.redISub(u)).redISub(e.redMul(ee)));ny=ny.redIAdd(ny);ny=ny.redIAdd(ny);ny=ny.redIAdd(ny);var nz=this.z.redAdd(e).redSqr().redISub(zz).redISub(ee);return this.curve.jpoint(nx,ny,nz);};JPoint.prototype.mul=function mul(k,kbase){k=new bn(k,kbase);return this.curve._wnafMul(this,k);};JPoint.prototype.eq=function eq(p){if(p.type==='affine')return this.eq(p.toJ());if(this===p)return true;var z2=this.z.redSqr();var pz2=p.z.redSqr();if(this.x.redMul(pz2).redISub(p.x.redMul(z2)).cmpn(0)!==0)return false;var z3=z2.redMul(this.z);var pz3=pz2.redMul(p.z);return this.y.redMul(pz3).redISub(p.y.redMul(z3)).cmpn(0)===0;};JPoint.prototype.inspect=function inspect(){if(this.isInfinity())return'<EC JPoint Infinity>';return'<EC JPoint x: '+this.x.toString(16,2)+' y: '+this.y.toString(16,2)+' z: '+this.z.toString(16,2)+'>';};JPoint.prototype.isInfinity=function isInfinity(){return this.z.cmpn(0)===0;};},2233:function(module,__unusedexports,__webpack_require__){"use strict";const EventEmitter=__webpack_require__(4859);const pull=__webpack_require__(418);const empty=__webpack_require__(7086);const asyncEach=__webpack_require__(4486);const TimeCache=__webpack_require__(6534);const debug=__webpack_require__(746);const errcode=__webpack_require__(4999);const Peer=__webpack_require__(3905);const message=__webpack_require__(9946);const nextTick=__webpack_require__(7173);class PubsubBaseProtocol extends EventEmitter{constructor(debugName,multicodec,libp2p){super();this.log=debug(debugName);this.log.err=debug(`${debugName}:error`);this.multicodec=multicodec;this.libp2p=libp2p;this.started=false;this.topics=new Map();this.seenCache=new TimeCache();this.peers=new Map();this._dials=new Set();this._onConnection=this._onConnection.bind(this);this._dialPeer=this._dialPeer.bind(this);}_addPeer(peer){const id=peer.info.id.toB58String();let existing=this.peers.get(id);if(!existing){this.log('new peer',id);this.peers.set(id,peer);existing=peer;peer.once('close',()=>this._removePeer(peer));}++existing._references;return existing;}_removePeer(peer){const id=peer.info.id.toB58String();this.log('remove',id,peer._references);if(--peer._references===0){this.log('delete peer',id);this.peers.delete(id);}return peer;}_dialPeer(peerInfo,callback){callback=callback||function noop(){};const idB58Str=peerInfo.id.toB58String();const peer=this.peers.get(idB58Str);if(peer&&peer.isConnected){return nextTick(()=>callback());}if(this._dials.has(idB58Str)){this.log('already dialing %s, ignoring dial attempt',idB58Str);return nextTick(()=>callback());}this._dials.add(idB58Str);this.log('dialing %s',idB58Str);this.libp2p.dialProtocol(peerInfo,this.multicodec,(err,conn)=>{this.log('dial to %s complete',idB58Str);const pubsubStopped=!this._dials.has(idB58Str);this._dials.delete(idB58Str);if(err){this.log.err(err);return callback();}if(pubsubStopped){this.log('pubsub was stopped, not processing dial to %s',idB58Str);return callback();}this._onDial(peerInfo,conn,callback);});}_onDial(peerInfo,conn,callback){const idB58Str=peerInfo.id.toB58String();this.log('connected',idB58Str);const peer=this._addPeer(new Peer(peerInfo));peer.attachConnection(conn);nextTick(()=>callback());}_onConnection(protocol,conn){conn.getPeerInfo((err,peerInfo)=>{if(err){this.log.err('Failed to identify incomming conn',err);return pull(empty(),conn);}const idB58Str=peerInfo.id.toB58String();const peer=this._addPeer(new Peer(peerInfo));this._processConnection(idB58Str,conn,peer);});}_processConnection(idB58Str,conn,peer){throw errcode('_processConnection must be implemented by the subclass','ERR_NOT_IMPLEMENTED');}_onConnectionEnd(idB58Str,peer,err){if(err&&err.message!=='socket hang up'){this.log.err(err);}this.log('connection ended',idB58Str,err?err.message:'');this._removePeer(peer);}publish(topics,messages){throw errcode('publish must be implemented by the subclass','ERR_NOT_IMPLEMENTED');}subscribe(topics){throw errcode('subscribe must be implemented by the subclass','ERR_NOT_IMPLEMENTED');}unsubscribe(topics){throw errcode('unsubscribe must be implemented by the subclass','ERR_NOT_IMPLEMENTED');}start(callback){if(this.started){return nextTick(()=>callback(new Error('already started')));}this.log('starting');this.libp2p.handle(this.multicodec,this._onConnection);this.libp2p.on('peer:connect',this._dialPeer);const peerInfos=Object.values(this.libp2p.peerBook.getAll());asyncEach(peerInfos,(peer,cb)=>this._dialPeer(peer,cb),err=>{nextTick(()=>{this.log('started');this.started=true;callback(err);});});}stop(callback){if(!this.started){return nextTick(()=>callback(new Error('not started yet')));}this.libp2p.unhandle(this.multicodec);this.libp2p.removeListener('peer:connect',this._dialPeer);this._dials=new Set();this.log('stopping');asyncEach(this.peers.values(),(peer,cb)=>peer.close(cb),err=>{if(err){return callback(err);}this.log('stopped');this.peers=new Map();this.started=false;callback();});}}module.exports=PubsubBaseProtocol;module.exports.message=message;},2258:function(module,__unusedexports,__webpack_require__){"use strict";var State=__webpack_require__(562);function isInteger(i){return Number.isFinite(i);}function isFunction(f){return'function'===typeof f;}function maxDelay(fn,delay){if(!delay)return fn;return function(a,cb){var timer=setTimeout(function(){fn(new Error('pull-reader: read exceeded timeout'),cb);},delay);fn(a,function(err,value){clearTimeout(timer);cb(err,value);});};}module.exports=function(timeout){var queue=[],read,readTimed,reading=false;var state=State(),ended,streaming,abort;function drain(){while(queue.length){if(null==queue[0].length&&state.has(1)){queue.shift().cb(null,state.get());}else if(state.has(queue[0].length)){var next=queue.shift();next.cb(null,state.get(next.length));}else if(ended==true&&queue[0].length&&state.length<queue[0].length){var msg='stream ended with:'+state.length+' but wanted:'+queue[0].length;queue.shift().cb(new Error(msg));}else if(ended)queue.shift().cb(ended);else return!!queue.length;}return queue.length||!state.has(1)||abort;}function more(){var d=drain();if(d&&!reading)if(read&&!reading&&!streaming){reading=true;readTimed(null,function(err,data){reading=false;if(err){ended=err;return drain();}state.add(data);more();});}}function reader(_read){if(abort){while(queue.length)queue.shift().cb(abort);return cb&&cb(abort);}readTimed=maxDelay(_read,timeout);read=_read;more();}reader.abort=function(err,cb){abort=err||true;if(read){reading=true;read(abort,function(){while(queue.length)queue.shift().cb(abort);cb&&cb(abort);});}else cb();};reader.read=function(len,_timeout,cb){if(isFunction(_timeout))cb=_timeout,_timeout=timeout;if(isFunction(cb)){queue.push({length:isInteger(len)?len:null,cb:cb});more();}else{streaming=true;return function(abort,cb){if(reading||state.has(1)){if(abort)return read(abort,cb);queue.push({length:null,cb:cb});more();}else maxDelay(read,_timeout)(abort,function(err,data){cb(err,data);});};}};return reader;};},2265:function(__unusedmodule,exports,__webpack_require__){exports.alphasort=alphasort;exports.alphasorti=alphasorti;exports.setopts=setopts;exports.ownProp=ownProp;exports.makeAbs=makeAbs;exports.finish=finish;exports.mark=mark;exports.isIgnored=isIgnored;exports.childrenIgnored=childrenIgnored;function ownProp(obj,field){return Object.prototype.hasOwnProperty.call(obj,field);}var path=__webpack_require__(5897);var minimatch=__webpack_require__(472);var isAbsolute=__webpack_require__(8778);var Minimatch=minimatch.Minimatch;function alphasorti(a,b){return a.toLowerCase().localeCompare(b.toLowerCase());}function alphasort(a,b){return a.localeCompare(b);}function setupIgnores(self,options){self.ignore=options.ignore||[];if(!Array.isArray(self.ignore))self.ignore=[self.ignore];if(self.ignore.length){self.ignore=self.ignore.map(ignoreMap);}}function ignoreMap(pattern){var gmatcher=null;if(pattern.slice(-3)==='/**'){var gpattern=pattern.replace(/(\/\*\*)+$/,'');gmatcher=new Minimatch(gpattern,{dot:true});}return{matcher:new Minimatch(pattern,{dot:true}),gmatcher:gmatcher};}function setopts(self,pattern,options){if(!options)options={};if(options.matchBase&&-1===pattern.indexOf("/")){if(options.noglobstar){throw new Error("base matching requires globstar");}pattern="**/"+pattern;}self.silent=!!options.silent;self.pattern=pattern;self.strict=options.strict!==false;self.realpath=!!options.realpath;self.realpathCache=options.realpathCache||Object.create(null);self.follow=!!options.follow;self.dot=!!options.dot;self.mark=!!options.mark;self.nodir=!!options.nodir;if(self.nodir)self.mark=true;self.sync=!!options.sync;self.nounique=!!options.nounique;self.nonull=!!options.nonull;self.nosort=!!options.nosort;self.nocase=!!options.nocase;self.stat=!!options.stat;self.noprocess=!!options.noprocess;self.absolute=!!options.absolute;self.maxLength=options.maxLength||Infinity;self.cache=options.cache||Object.create(null);self.statCache=options.statCache||Object.create(null);self.symlinks=options.symlinks||Object.create(null);setupIgnores(self,options);self.changedCwd=false;var cwd=process.cwd();if(!ownProp(options,"cwd"))self.cwd=cwd;else{self.cwd=path.resolve(options.cwd);self.changedCwd=self.cwd!==cwd;}self.root=options.root||path.resolve(self.cwd,"/");self.root=path.resolve(self.root);if(process.platform==="win32")self.root=self.root.replace(/\\/g,"/");self.cwdAbs=isAbsolute(self.cwd)?self.cwd:makeAbs(self,self.cwd);if(process.platform==="win32")self.cwdAbs=self.cwdAbs.replace(/\\/g,"/");self.nomount=!!options.nomount;options.nonegate=true;options.nocomment=true;self.minimatch=new Minimatch(pattern,options);self.options=self.minimatch.options;}function finish(self){var nou=self.nounique;var all=nou?[]:Object.create(null);for(var i=0,l=self.matches.length;i<l;i++){var matches=self.matches[i];if(!matches||Object.keys(matches).length===0){if(self.nonull){var literal=self.minimatch.globSet[i];if(nou)all.push(literal);else all[literal]=true;}}else{var m=Object.keys(matches);if(nou)all.push.apply(all,m);else m.forEach(function(m){all[m]=true;});}}if(!nou)all=Object.keys(all);if(!self.nosort)all=all.sort(self.nocase?alphasorti:alphasort);if(self.mark){for(var i=0;i<all.length;i++){all[i]=self._mark(all[i]);}if(self.nodir){all=all.filter(function(e){var notDir=!/\/$/.test(e);var c=self.cache[e]||self.cache[makeAbs(self,e)];if(notDir&&c)notDir=c!=='DIR'&&!Array.isArray(c);return notDir;});}}if(self.ignore.length)all=all.filter(function(m){return!isIgnored(self,m);});self.found=all;}function mark(self,p){var abs=makeAbs(self,p);var c=self.cache[abs];var m=p;if(c){var isDir=c==='DIR'||Array.isArray(c);var slash=p.slice(-1)==='/';if(isDir&&!slash)m+='/';else if(!isDir&&slash)m=m.slice(0,-1);if(m!==p){var mabs=makeAbs(self,m);self.statCache[mabs]=self.statCache[abs];self.cache[mabs]=self.cache[abs];}}return m;}function makeAbs(self,f){var abs=f;if(f.charAt(0)==='/'){abs=path.join(self.root,f);}else if(isAbsolute(f)||f===''){abs=f;}else if(self.changedCwd){abs=path.resolve(self.cwd,f);}else{abs=path.resolve(f);}if(process.platform==='win32')abs=abs.replace(/\\/g,'/');return abs;}function isIgnored(self,path){if(!self.ignore.length)return false;return self.ignore.some(function(item){return item.matcher.match(path)||!!(item.gmatcher&&item.gmatcher.match(path));});}function childrenIgnored(self,path){if(!self.ignore.length)return false;return self.ignore.some(function(item){return!!(item.gmatcher&&item.gmatcher.match(path));});}},2274:function(module,__unusedexports,__webpack_require__){"use strict";const stream=__webpack_require__(6886);const PerMessageDeflate=__webpack_require__(8904);const bufferUtil=__webpack_require__(2811);const validation=__webpack_require__(8984);const constants=__webpack_require__(6198);const GET_INFO=0;const GET_PAYLOAD_LENGTH_16=1;const GET_PAYLOAD_LENGTH_64=2;const GET_MASK=3;const GET_DATA=4;const INFLATING=5;class Receiver extends stream.Writable{constructor(binaryType,extensions,maxPayload){super();this._binaryType=binaryType||constants.BINARY_TYPES[0];this[constants.kWebSocket]=undefined;this._extensions=extensions||{};this._maxPayload=maxPayload|0;this._bufferedBytes=0;this._buffers=[];this._compressed=false;this._payloadLength=0;this._mask=undefined;this._fragmented=0;this._masked=false;this._fin=false;this._opcode=0;this._totalPayloadLength=0;this._messageLength=0;this._fragments=[];this._state=GET_INFO;this._loop=false;}_write(chunk,encoding,cb){if(this._opcode===0x08&&this._state==GET_INFO)return cb();this._bufferedBytes+=chunk.length;this._buffers.push(chunk);this.startLoop(cb);}consume(n){this._bufferedBytes-=n;if(n===this._buffers[0].length)return this._buffers.shift();if(n<this._buffers[0].length){const buf=this._buffers[0];this._buffers[0]=buf.slice(n);return buf.slice(0,n);}const dst=Buffer.allocUnsafe(n);do{const buf=this._buffers[0];if(n>=buf.length){this._buffers.shift().copy(dst,dst.length-n);}else{buf.copy(dst,dst.length-n,0,n);this._buffers[0]=buf.slice(n);}n-=buf.length;}while(n>0);return dst;}startLoop(cb){var err;this._loop=true;do{switch(this._state){case GET_INFO:err=this.getInfo();break;case GET_PAYLOAD_LENGTH_16:err=this.getPayloadLength16();break;case GET_PAYLOAD_LENGTH_64:err=this.getPayloadLength64();break;case GET_MASK:this.getMask();break;case GET_DATA:err=this.getData(cb);break;default:this._loop=false;return;}}while(this._loop);cb(err);}getInfo(){if(this._bufferedBytes<2){this._loop=false;return;}const buf=this.consume(2);if((buf[0]&0x30)!==0x00){this._loop=false;return error(RangeError,'RSV2 and RSV3 must be clear',true,1002);}const compressed=(buf[0]&0x40)===0x40;if(compressed&&!this._extensions[PerMessageDeflate.extensionName]){this._loop=false;return error(RangeError,'RSV1 must be clear',true,1002);}this._fin=(buf[0]&0x80)===0x80;this._opcode=buf[0]&0x0f;this._payloadLength=buf[1]&0x7f;if(this._opcode===0x00){if(compressed){this._loop=false;return error(RangeError,'RSV1 must be clear',true,1002);}if(!this._fragmented){this._loop=false;return error(RangeError,'invalid opcode 0',true,1002);}this._opcode=this._fragmented;}else if(this._opcode===0x01||this._opcode===0x02){if(this._fragmented){this._loop=false;return error(RangeError,`invalid opcode ${this._opcode}`,true,1002);}this._compressed=compressed;}else if(this._opcode>0x07&&this._opcode<0x0b){if(!this._fin){this._loop=false;return error(RangeError,'FIN must be set',true,1002);}if(compressed){this._loop=false;return error(RangeError,'RSV1 must be clear',true,1002);}if(this._payloadLength>0x7d){this._loop=false;return error(RangeError,`invalid payload length ${this._payloadLength}`,true,1002);}}else{this._loop=false;return error(RangeError,`invalid opcode ${this._opcode}`,true,1002);}if(!this._fin&&!this._fragmented)this._fragmented=this._opcode;this._masked=(buf[1]&0x80)===0x80;if(this._payloadLength===126)this._state=GET_PAYLOAD_LENGTH_16;else if(this._payloadLength===127)this._state=GET_PAYLOAD_LENGTH_64;else return this.haveLength();}getPayloadLength16(){if(this._bufferedBytes<2){this._loop=false;return;}this._payloadLength=this.consume(2).readUInt16BE(0);return this.haveLength();}getPayloadLength64(){if(this._bufferedBytes<8){this._loop=false;return;}const buf=this.consume(8);const num=buf.readUInt32BE(0);if(num>Math.pow(2,53-32)-1){this._loop=false;return error(RangeError,'Unsupported WebSocket frame: payload length > 2^53 - 1',false,1009);}this._payloadLength=num*Math.pow(2,32)+buf.readUInt32BE(4);return this.haveLength();}haveLength(){if(this._payloadLength&&this._opcode<0x08){this._totalPayloadLength+=this._payloadLength;if(this._totalPayloadLength>this._maxPayload&&this._maxPayload>0){this._loop=false;return error(RangeError,'Max payload size exceeded',false,1009);}}if(this._masked)this._state=GET_MASK;else this._state=GET_DATA;}getMask(){if(this._bufferedBytes<4){this._loop=false;return;}this._mask=this.consume(4);this._state=GET_DATA;}getData(cb){var data=constants.EMPTY_BUFFER;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength){this._loop=false;return;}data=this.consume(this._payloadLength);if(this._masked)bufferUtil.unmask(data,this._mask);}if(this._opcode>0x07)return this.controlMessage(data);if(this._compressed){this._state=INFLATING;this.decompress(data,cb);return;}if(data.length){this._messageLength=this._totalPayloadLength;this._fragments.push(data);}return this.dataMessage();}decompress(data,cb){const perMessageDeflate=this._extensions[PerMessageDeflate.extensionName];perMessageDeflate.decompress(data,this._fin,(err,buf)=>{if(err)return cb(err);if(buf.length){this._messageLength+=buf.length;if(this._messageLength>this._maxPayload&&this._maxPayload>0){return cb(error(RangeError,'Max payload size exceeded',false,1009));}this._fragments.push(buf);}const er=this.dataMessage();if(er)return cb(er);this.startLoop(cb);});}dataMessage(){if(this._fin){const messageLength=this._messageLength;const fragments=this._fragments;this._totalPayloadLength=0;this._messageLength=0;this._fragmented=0;this._fragments=[];if(this._opcode===2){var data;if(this._binaryType==='nodebuffer'){data=toBuffer(fragments,messageLength);}else if(this._binaryType==='arraybuffer'){data=toArrayBuffer(toBuffer(fragments,messageLength));}else{data=fragments;}this.emit('message',data);}else{const buf=toBuffer(fragments,messageLength);if(!validation.isValidUTF8(buf)){this._loop=false;return error(Error,'invalid UTF-8 sequence',true,1007);}this.emit('message',buf.toString());}}this._state=GET_INFO;}controlMessage(data){if(this._opcode===0x08){this._loop=false;if(data.length===0){this.emit('conclude',1005,'');this.end();}else if(data.length===1){return error(RangeError,'invalid payload length 1',true,1002);}else{const code=data.readUInt16BE(0);if(!validation.isValidStatusCode(code)){return error(RangeError,`invalid status code ${code}`,true,1002);}const buf=data.slice(2);if(!validation.isValidUTF8(buf)){return error(Error,'invalid UTF-8 sequence',true,1007);}this.emit('conclude',code,buf.toString());this.end();}}else if(this._opcode===0x09){this.emit('ping',data);}else{this.emit('pong',data);}this._state=GET_INFO;}}module.exports=Receiver;function error(ErrorCtor,message,prefix,statusCode){const err=new ErrorCtor(prefix?`Invalid WebSocket frame: ${message}`:message);Error.captureStackTrace(err,error);err[constants.kStatusCode]=statusCode;return err;}function toBuffer(fragments,messageLength){if(fragments.length===1)return fragments[0];if(fragments.length>1)return bufferUtil.concat(fragments,messageLength);return constants.EMPTY_BUFFER;}function toArrayBuffer(buf){if(buf.byteLength===buf.buffer.byteLength){return buf.buffer;}return buf.buffer.slice(buf.byteOffset,buf.byteOffset+buf.byteLength);}},2278:function(module,__unusedexports,__webpack_require__){"use strict";const tryEach=__webpack_require__(5519);const parallel=__webpack_require__(4876);const errCode=__webpack_require__(4999);module.exports=node=>{const routers=node._modules.contentRouting||[];if(node._dht){routers.unshift(node._dht);}return{findProviders:(key,options,callback)=>{if(typeof options==='function'){callback=options;options={};}else if(typeof options==='number'){options={maxTimeout:options};}if(!routers.length){return callback(errCode(new Error('No content routers available'),'NO_ROUTERS_AVAILABLE'));}const tasks=routers.map(router=>{return cb=>router.findProviders(key,options,(err,results)=>{if(err){return cb(err);}if(!results||Object.keys(results).length===0){return cb(errCode(new Error('not found'),'NOT_FOUND'),null);}cb(null,results);});});tryEach(tasks,(err,results)=>{if(err&&err.code!=='NOT_FOUND'){return callback(err);}results=results||[];callback(null,results);});},provide:(key,callback)=>{if(!routers.length){return callback(errCode(new Error('No content routers available'),'NO_ROUTERS_AVAILABLE'));}parallel(routers.map(router=>{return cb=>router.provide(key,cb);}),callback);}};};},2296:function(module){function constant(value){return function(){return value;};}module.exports=constant;},2301:function(module,__unusedexports,__webpack_require__){"use strict";const net=__webpack_require__(1939);const toPull=__webpack_require__(4138);const mafmt=__webpack_require__(7511);const withIs=__webpack_require__(3171);const includes=__webpack_require__(5001);const isFunction=__webpack_require__(9955);const Connection=__webpack_require__(378).Connection;const once=__webpack_require__(7957);const debug=__webpack_require__(3116);const log=debug('libp2p:tcp:dial');const createListener=__webpack_require__(2508);function noop(){}class TCP{dial(ma,options,callback){if(isFunction(options)){callback=options;options={};}callback=once(callback||noop);const cOpts=ma.toOptions();log('Connecting to %s %s',cOpts.port,cOpts.host);const rawSocket=net.connect(cOpts);rawSocket.once('timeout',()=>{log('timeout');rawSocket.emit('error',new Error('Timeout'));});rawSocket.once('error',callback);rawSocket.once('connect',()=>{rawSocket.removeListener('error',callback);callback();});const socket=toPull.duplex(rawSocket);const conn=new Connection(socket);conn.getObservedAddrs=callback=>{return callback(null,[ma]);};return conn;}createListener(options,handler){if(isFunction(options)){handler=options;options={};}handler=handler||noop;return createListener(handler);}filter(multiaddrs){if(!Array.isArray(multiaddrs)){multiaddrs=[multiaddrs];}return multiaddrs.filter(ma=>{if(includes(ma.protoNames(),'p2p-circuit')){return false;}if(includes(ma.protoNames(),'ipfs')){ma=ma.decapsulate('ipfs');}return mafmt.TCP.matches(ma);});}}module.exports=withIs(TCP,{className:'TCP',symbolName:'@libp2p/js-libp2p-tcp/tcp'});},2303:function(module,__unusedexports,__webpack_require__){"use strict";const Bucket=__webpack_require__(3915);module.exports=function createHAMT(options){return new Bucket(options);};module.exports.isBucket=Bucket.isBucket;},2306:function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=onlyOnce;function onlyOnce(fn){return function(){if(fn===null)throw new Error("Callback was already called.");var callFn=fn;fn=null;callFn.apply(this,arguments);};}module.exports=exports["default"];},2307:function(module){module.exports=require("https");},2313:function(module,__unusedexports,__webpack_require__){var util=__webpack_require__(649);var EMPTY=0,BODY=1;var BINARYLENGTH=2,BINARYBODY=3;function Receiver(){if(this instanceof Receiver===false){throw new TypeError("Classes can't be function-called");}this.state=EMPTY;this.buffers=[];this.messageEnd=-1;this.spanLength=0;this.dead=false;this.onerror=function(){};this.ontext=function(){};this.onbinary=function(){};this.onclose=function(){};this.onping=function(){};this.onpong=function(){};}module.exports=Receiver;Receiver.prototype.add=function(data){if(this.dead)return;var self=this;function doAdd(){if(self.state===EMPTY){if(data.length==2&&data[0]==0xFF&&data[1]==0x00){self.reset();self.onclose();return;}if(data[0]===0x80){self.messageEnd=0;self.state=BINARYLENGTH;data=data.slice(1);}else{if(data[0]!==0x00){self.error('payload must start with 0x00 byte',true);return;}data=data.slice(1);self.state=BODY;}}if(self.state===BINARYLENGTH){var i=0;while(i<data.length&&data[i]&0x80){self.messageEnd=128*self.messageEnd+(data[i]&0x7f);++i;}if(i<data.length){self.messageEnd=128*self.messageEnd+(data[i]&0x7f);self.state=BINARYBODY;++i;}if(i>0)data=data.slice(i);}if(self.state===BINARYBODY){var dataleft=self.messageEnd-self.spanLength;if(data.length>=dataleft){self.buffers.push(data);self.spanLength+=dataleft;self.messageEnd=dataleft;return self.parse();}self.buffers.push(data);self.spanLength+=data.length;return;}self.buffers.push(data);if((self.messageEnd=bufferIndex(data,0xFF))!=-1){self.spanLength+=self.messageEnd;return self.parse();}else self.spanLength+=data.length;}while(data)data=doAdd();};Receiver.prototype.cleanup=function(){this.dead=true;this.state=EMPTY;this.buffers=[];};Receiver.prototype.parse=function(){var output=new Buffer(this.spanLength);var outputIndex=0;for(var bi=0,bl=this.buffers.length;bi<bl-1;++bi){var buffer=this.buffers[bi];buffer.copy(output,outputIndex);outputIndex+=buffer.length;}var lastBuffer=this.buffers[this.buffers.length-1];if(this.messageEnd>0)lastBuffer.copy(output,outputIndex,0,this.messageEnd);if(this.state!==BODY)--this.messageEnd;var tail=null;if(this.messageEnd<lastBuffer.length-1){tail=lastBuffer.slice(this.messageEnd+1);}this.reset();this.ontext(output.toString('utf8'));return tail;};Receiver.prototype.error=function(reason,terminate){if(this.dead)return;this.reset();if(typeof reason=='string'){this.onerror(new Error(reason),terminate);}else if(reason.constructor==Error){this.onerror(reason,terminate);}else{this.onerror(new Error("An error occured"),terminate);}return this;};Receiver.prototype.reset=function(reason){if(this.dead)return;this.state=EMPTY;this.buffers=[];this.messageEnd=-1;this.spanLength=0;};function bufferIndex(buffer,byte){for(var i=0,l=buffer.length;i<l;++i){if(buffer[i]===byte)return i;}return-1;}},2315:function(module,__unusedexports,__webpack_require__){"use strict";var pna=__webpack_require__(88);module.exports=Readable;var isArray=__webpack_require__(4797);var Duplex;Readable.ReadableState=ReadableState;var EE=__webpack_require__(4859).EventEmitter;var EElistenerCount=function(emitter,type){return emitter.listeners(type).length;};var Stream=__webpack_require__(2422);var Buffer=__webpack_require__(7572).Buffer;var OurUint8Array=global.Uint8Array||function(){};function _uint8ArrayToBuffer(chunk){return Buffer.from(chunk);}function _isUint8Array(obj){return Buffer.isBuffer(obj)||obj instanceof OurUint8Array;}var util=__webpack_require__(5548);util.inherits=__webpack_require__(92);var debugUtil=__webpack_require__(649);var debug=void 0;if(debugUtil&&debugUtil.debuglog){debug=debugUtil.debuglog('stream');}else{debug=function(){};}var BufferList=__webpack_require__(84);var destroyImpl=__webpack_require__(5709);var StringDecoder;util.inherits(Readable,Stream);var kProxyEvents=['error','close','destroy','pause','resume'];function prependListener(emitter,event,fn){if(typeof emitter.prependListener==='function')return emitter.prependListener(event,fn);if(!emitter._events||!emitter._events[event])emitter.on(event,fn);else if(isArray(emitter._events[event]))emitter._events[event].unshift(fn);else emitter._events[event]=[fn,emitter._events[event]];}function ReadableState(options,stream){Duplex=Duplex||__webpack_require__(5427);options=options||{};var isDuplex=stream instanceof Duplex;this.objectMode=!!options.objectMode;if(isDuplex)this.objectMode=this.objectMode||!!options.readableObjectMode;var hwm=options.highWaterMark;var readableHwm=options.readableHighWaterMark;var defaultHwm=this.objectMode?16:16*1024;if(hwm||hwm===0)this.highWaterMark=hwm;else if(isDuplex&&(readableHwm||readableHwm===0))this.highWaterMark=readableHwm;else this.highWaterMark=defaultHwm;this.highWaterMark=Math.floor(this.highWaterMark);this.buffer=new BufferList();this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.ended=false;this.endEmitted=false;this.reading=false;this.sync=true;this.needReadable=false;this.emittedReadable=false;this.readableListening=false;this.resumeScheduled=false;this.destroyed=false;this.defaultEncoding=options.defaultEncoding||'utf8';this.awaitDrain=0;this.readingMore=false;this.decoder=null;this.encoding=null;if(options.encoding){if(!StringDecoder)StringDecoder=__webpack_require__(1235).StringDecoder;this.decoder=new StringDecoder(options.encoding);this.encoding=options.encoding;}}function Readable(options){Duplex=Duplex||__webpack_require__(5427);if(!(this instanceof Readable))return new Readable(options);this._readableState=new ReadableState(options,this);this.readable=true;if(options){if(typeof options.read==='function')this._read=options.read;if(typeof options.destroy==='function')this._destroy=options.destroy;}Stream.call(this);}Object.defineProperty(Readable.prototype,'destroyed',{get:function(){if(this._readableState===undefined){return false;}return this._readableState.destroyed;},set:function(value){if(!this._readableState){return;}this._readableState.destroyed=value;}});Readable.prototype.destroy=destroyImpl.destroy;Readable.prototype._undestroy=destroyImpl.undestroy;Readable.prototype._destroy=function(err,cb){this.push(null);cb(err);};Readable.prototype.push=function(chunk,encoding){var state=this._readableState;var skipChunkCheck;if(!state.objectMode){if(typeof chunk==='string'){encoding=encoding||state.defaultEncoding;if(encoding!==state.encoding){chunk=Buffer.from(chunk,encoding);encoding='';}skipChunkCheck=true;}}else{skipChunkCheck=true;}return readableAddChunk(this,chunk,encoding,false,skipChunkCheck);};Readable.prototype.unshift=function(chunk){return readableAddChunk(this,chunk,null,true,false);};function readableAddChunk(stream,chunk,encoding,addToFront,skipChunkCheck){var state=stream._readableState;if(chunk===null){state.reading=false;onEofChunk(stream,state);}else{var er;if(!skipChunkCheck)er=chunkInvalid(state,chunk);if(er){stream.emit('error',er);}else if(state.objectMode||chunk&&chunk.length>0){if(typeof chunk!=='string'&&!state.objectMode&&Object.getPrototypeOf(chunk)!==Buffer.prototype){chunk=_uint8ArrayToBuffer(chunk);}if(addToFront){if(state.endEmitted)stream.emit('error',new Error('stream.unshift() after end event'));else addChunk(stream,state,chunk,true);}else if(state.ended){stream.emit('error',new Error('stream.push() after EOF'));}else{state.reading=false;if(state.decoder&&!encoding){chunk=state.decoder.write(chunk);if(state.objectMode||chunk.length!==0)addChunk(stream,state,chunk,false);else maybeReadMore(stream,state);}else{addChunk(stream,state,chunk,false);}}}else if(!addToFront){state.reading=false;}}return needMoreData(state);}function addChunk(stream,state,chunk,addToFront){if(state.flowing&&state.length===0&&!state.sync){stream.emit('data',chunk);stream.read(0);}else{state.length+=state.objectMode?1:chunk.length;if(addToFront)state.buffer.unshift(chunk);else state.buffer.push(chunk);if(state.needReadable)emitReadable(stream);}maybeReadMore(stream,state);}function chunkInvalid(state,chunk){var er;if(!_isUint8Array(chunk)&&typeof chunk!=='string'&&chunk!==undefined&&!state.objectMode){er=new TypeError('Invalid non-string/buffer chunk');}return er;}function needMoreData(state){return!state.ended&&(state.needReadable||state.length<state.highWaterMark||state.length===0);}Readable.prototype.isPaused=function(){return this._readableState.flowing===false;};Readable.prototype.setEncoding=function(enc){if(!StringDecoder)StringDecoder=__webpack_require__(1235).StringDecoder;this._readableState.decoder=new StringDecoder(enc);this._readableState.encoding=enc;return this;};var MAX_HWM=0x800000;function computeNewHighWaterMark(n){if(n>=MAX_HWM){n=MAX_HWM;}else{n--;n|=n>>>1;n|=n>>>2;n|=n>>>4;n|=n>>>8;n|=n>>>16;n++;}return n;}function howMuchToRead(n,state){if(n<=0||state.length===0&&state.ended)return 0;if(state.objectMode)return 1;if(n!==n){if(state.flowing&&state.length)return state.buffer.head.data.length;else return state.length;}if(n>state.highWaterMark)state.highWaterMark=computeNewHighWaterMark(n);if(n<=state.length)return n;if(!state.ended){state.needReadable=true;return 0;}return state.length;}Readable.prototype.read=function(n){debug('read',n);n=parseInt(n,10);var state=this._readableState;var nOrig=n;if(n!==0)state.emittedReadable=false;if(n===0&&state.needReadable&&(state.length>=state.highWaterMark||state.ended)){debug('read: emitReadable',state.length,state.ended);if(state.length===0&&state.ended)endReadable(this);else emitReadable(this);return null;}n=howMuchToRead(n,state);if(n===0&&state.ended){if(state.length===0)endReadable(this);return null;}var doRead=state.needReadable;debug('need readable',doRead);if(state.length===0||state.length-n<state.highWaterMark){doRead=true;debug('length less than watermark',doRead);}if(state.ended||state.reading){doRead=false;debug('reading or ended',doRead);}else if(doRead){debug('do read');state.reading=true;state.sync=true;if(state.length===0)state.needReadable=true;this._read(state.highWaterMark);state.sync=false;if(!state.reading)n=howMuchToRead(nOrig,state);}var ret;if(n>0)ret=fromList(n,state);else ret=null;if(ret===null){state.needReadable=true;n=0;}else{state.length-=n;}if(state.length===0){if(!state.ended)state.needReadable=true;if(nOrig!==n&&state.ended)endReadable(this);}if(ret!==null)this.emit('data',ret);return ret;};function onEofChunk(stream,state){if(state.ended)return;if(state.decoder){var chunk=state.decoder.end();if(chunk&&chunk.length){state.buffer.push(chunk);state.length+=state.objectMode?1:chunk.length;}}state.ended=true;emitReadable(stream);}function emitReadable(stream){var state=stream._readableState;state.needReadable=false;if(!state.emittedReadable){debug('emitReadable',state.flowing);state.emittedReadable=true;if(state.sync)pna.nextTick(emitReadable_,stream);else emitReadable_(stream);}}function emitReadable_(stream){debug('emit readable');stream.emit('readable');flow(stream);}function maybeReadMore(stream,state){if(!state.readingMore){state.readingMore=true;pna.nextTick(maybeReadMore_,stream,state);}}function maybeReadMore_(stream,state){var len=state.length;while(!state.reading&&!state.flowing&&!state.ended&&state.length<state.highWaterMark){debug('maybeReadMore read 0');stream.read(0);if(len===state.length)break;else len=state.length;}state.readingMore=false;}Readable.prototype._read=function(n){this.emit('error',new Error('_read() is not implemented'));};Readable.prototype.pipe=function(dest,pipeOpts){var src=this;var state=this._readableState;switch(state.pipesCount){case 0:state.pipes=dest;break;case 1:state.pipes=[state.pipes,dest];break;default:state.pipes.push(dest);break;}state.pipesCount+=1;debug('pipe count=%d opts=%j',state.pipesCount,pipeOpts);var doEnd=(!pipeOpts||pipeOpts.end!==false)&&dest!==process.stdout&&dest!==process.stderr;var endFn=doEnd?onend:unpipe;if(state.endEmitted)pna.nextTick(endFn);else src.once('end',endFn);dest.on('unpipe',onunpipe);function onunpipe(readable,unpipeInfo){debug('onunpipe');if(readable===src){if(unpipeInfo&&unpipeInfo.hasUnpiped===false){unpipeInfo.hasUnpiped=true;cleanup();}}}function onend(){debug('onend');dest.end();}var ondrain=pipeOnDrain(src);dest.on('drain',ondrain);var cleanedUp=false;function cleanup(){debug('cleanup');dest.removeListener('close',onclose);dest.removeListener('finish',onfinish);dest.removeListener('drain',ondrain);dest.removeListener('error',onerror);dest.removeListener('unpipe',onunpipe);src.removeListener('end',onend);src.removeListener('end',unpipe);src.removeListener('data',ondata);cleanedUp=true;if(state.awaitDrain&&(!dest._writableState||dest._writableState.needDrain))ondrain();}var increasedAwaitDrain=false;src.on('data',ondata);function ondata(chunk){debug('ondata');increasedAwaitDrain=false;var ret=dest.write(chunk);if(false===ret&&!increasedAwaitDrain){if((state.pipesCount===1&&state.pipes===dest||state.pipesCount>1&&indexOf(state.pipes,dest)!==-1)&&!cleanedUp){debug('false write response, pause',src._readableState.awaitDrain);src._readableState.awaitDrain++;increasedAwaitDrain=true;}src.pause();}}function onerror(er){debug('onerror',er);unpipe();dest.removeListener('error',onerror);if(EElistenerCount(dest,'error')===0)dest.emit('error',er);}prependListener(dest,'error',onerror);function onclose(){dest.removeListener('finish',onfinish);unpipe();}dest.once('close',onclose);function onfinish(){debug('onfinish');dest.removeListener('close',onclose);unpipe();}dest.once('finish',onfinish);function unpipe(){debug('unpipe');src.unpipe(dest);}dest.emit('pipe',src);if(!state.flowing){debug('pipe resume');src.resume();}return dest;};function pipeOnDrain(src){return function(){var state=src._readableState;debug('pipeOnDrain',state.awaitDrain);if(state.awaitDrain)state.awaitDrain--;if(state.awaitDrain===0&&EElistenerCount(src,'data')){state.flowing=true;flow(src);}};}Readable.prototype.unpipe=function(dest){var state=this._readableState;var unpipeInfo={hasUnpiped:false};if(state.pipesCount===0)return this;if(state.pipesCount===1){if(dest&&dest!==state.pipes)return this;if(!dest)dest=state.pipes;state.pipes=null;state.pipesCount=0;state.flowing=false;if(dest)dest.emit('unpipe',this,unpipeInfo);return this;}if(!dest){var dests=state.pipes;var len=state.pipesCount;state.pipes=null;state.pipesCount=0;state.flowing=false;for(var i=0;i<len;i++){dests[i].emit('unpipe',this,unpipeInfo);}return this;}var index=indexOf(state.pipes,dest);if(index===-1)return this;state.pipes.splice(index,1);state.pipesCount-=1;if(state.pipesCount===1)state.pipes=state.pipes[0];dest.emit('unpipe',this,unpipeInfo);return this;};Readable.prototype.on=function(ev,fn){var res=Stream.prototype.on.call(this,ev,fn);if(ev==='data'){if(this._readableState.flowing!==false)this.resume();}else if(ev==='readable'){var state=this._readableState;if(!state.endEmitted&&!state.readableListening){state.readableListening=state.needReadable=true;state.emittedReadable=false;if(!state.reading){pna.nextTick(nReadingNextTick,this);}else if(state.length){emitReadable(this);}}}return res;};Readable.prototype.addListener=Readable.prototype.on;function nReadingNextTick(self){debug('readable nexttick read 0');self.read(0);}Readable.prototype.resume=function(){var state=this._readableState;if(!state.flowing){debug('resume');state.flowing=true;resume(this,state);}return this;};function resume(stream,state){if(!state.resumeScheduled){state.resumeScheduled=true;pna.nextTick(resume_,stream,state);}}function resume_(stream,state){if(!state.reading){debug('resume read 0');stream.read(0);}state.resumeScheduled=false;state.awaitDrain=0;stream.emit('resume');flow(stream);if(state.flowing&&!state.reading)stream.read(0);}Readable.prototype.pause=function(){debug('call pause flowing=%j',this._readableState.flowing);if(false!==this._readableState.flowing){debug('pause');this._readableState.flowing=false;this.emit('pause');}return this;};function flow(stream){var state=stream._readableState;debug('flow',state.flowing);while(state.flowing&&stream.read()!==null){}}Readable.prototype.wrap=function(stream){var _this=this;var state=this._readableState;var paused=false;stream.on('end',function(){debug('wrapped end');if(state.decoder&&!state.ended){var chunk=state.decoder.end();if(chunk&&chunk.length)_this.push(chunk);}_this.push(null);});stream.on('data',function(chunk){debug('wrapped data');if(state.decoder)chunk=state.decoder.write(chunk);if(state.objectMode&&(chunk===null||chunk===undefined))return;else if(!state.objectMode&&(!chunk||!chunk.length))return;var ret=_this.push(chunk);if(!ret){paused=true;stream.pause();}});for(var i in stream){if(this[i]===undefined&&typeof stream[i]==='function'){this[i]=function(method){return function(){return stream[method].apply(stream,arguments);};}(i);}}for(var n=0;n<kProxyEvents.length;n++){stream.on(kProxyEvents[n],this.emit.bind(this,kProxyEvents[n]));}this._read=function(n){debug('wrapped _read',n);if(paused){paused=false;stream.resume();}};return this;};Object.defineProperty(Readable.prototype,'readableHighWaterMark',{enumerable:false,get:function(){return this._readableState.highWaterMark;}});Readable._fromList=fromList;function fromList(n,state){if(state.length===0)return null;var ret;if(state.objectMode)ret=state.buffer.shift();else if(!n||n>=state.length){if(state.decoder)ret=state.buffer.join('');else if(state.buffer.length===1)ret=state.buffer.head.data;else ret=state.buffer.concat(state.length);state.buffer.clear();}else{ret=fromListPartial(n,state.buffer,state.decoder);}return ret;}function fromListPartial(n,list,hasStrings){var ret;if(n<list.head.data.length){ret=list.head.data.slice(0,n);list.head.data=list.head.data.slice(n);}else if(n===list.head.data.length){ret=list.shift();}else{ret=hasStrings?copyFromBufferString(n,list):copyFromBuffer(n,list);}return ret;}function copyFromBufferString(n,list){var p=list.head;var c=1;var ret=p.data;n-=ret.length;while(p=p.next){var str=p.data;var nb=n>str.length?str.length:n;if(nb===str.length)ret+=str;else ret+=str.slice(0,n);n-=nb;if(n===0){if(nb===str.length){++c;if(p.next)list.head=p.next;else list.head=list.tail=null;}else{list.head=p;p.data=str.slice(nb);}break;}++c;}list.length-=c;return ret;}function copyFromBuffer(n,list){var ret=Buffer.allocUnsafe(n);var p=list.head;var c=1;p.data.copy(ret);n-=p.data.length;while(p=p.next){var buf=p.data;var nb=n>buf.length?buf.length:n;buf.copy(ret,ret.length-n,0,nb);n-=nb;if(n===0){if(nb===buf.length){++c;if(p.next)list.head=p.next;else list.head=list.tail=null;}else{list.head=p;p.data=buf.slice(nb);}break;}++c;}list.length-=c;return ret;}function endReadable(stream){var state=stream._readableState;if(state.length>0)throw new Error('"endReadable()" called on non-empty stream');if(!state.endEmitted){state.ended=true;pna.nextTick(endReadableNT,state,stream);}}function endReadableNT(state,stream){if(!state.endEmitted&&state.length===0){state.endEmitted=true;stream.readable=false;stream.emit('end');}}function indexOf(xs,x){for(var i=0,l=xs.length;i<l;i++){if(xs[i]===x)return i;}return-1;}},2318:function(module,exports,__webpack_require__){var tty=__webpack_require__(8859);var util=__webpack_require__(649);exports=module.exports=__webpack_require__(8046);exports.init=init;exports.log=log;exports.formatArgs=formatArgs;exports.save=save;exports.load=load;exports.useColors=useColors;exports.colors=[6,2,3,4,5,1];exports.inspectOpts=Object.keys(process.env).filter(function(key){return /^debug_/i.test(key);}).reduce(function(obj,key){var prop=key.substring(6).toLowerCase().replace(/_([a-z])/g,function(_,k){return k.toUpperCase();});var val=process.env[key];if(/^(yes|on|true|enabled)$/i.test(val))val=true;else if(/^(no|off|false|disabled)$/i.test(val))val=false;else if(val==='null')val=null;else val=Number(val);obj[prop]=val;return obj;},{});var fd=parseInt(process.env.DEBUG_FD,10)||2;if(1!==fd&&2!==fd){util.deprecate(function(){},'except for stderr(2) and stdout(1), any other usage of DEBUG_FD is deprecated. Override debug.log if you want to use a different log function (https://git.io/debug_fd)')();}var stream=1===fd?process.stdout:2===fd?process.stderr:createWritableStdioStream(fd);function useColors(){return'colors'in exports.inspectOpts?Boolean(exports.inspectOpts.colors):tty.isatty(fd);}exports.formatters.o=function(v){this.inspectOpts.colors=this.useColors;return util.inspect(v,this.inspectOpts).split('\n').map(function(str){return str.trim();}).join(' ');};exports.formatters.O=function(v){this.inspectOpts.colors=this.useColors;return util.inspect(v,this.inspectOpts);};function formatArgs(args){var name=this.namespace;var useColors=this.useColors;if(useColors){var c=this.color;var prefix='  \u001b[3'+c+';1m'+name+' '+'\u001b[0m';args[0]=prefix+args[0].split('\n').join('\n'+prefix);args.push('\u001b[3'+c+'m+'+exports.humanize(this.diff)+'\u001b[0m');}else{args[0]=new Date().toUTCString()+' '+name+' '+args[0];}}function log(){return stream.write(util.format.apply(util,arguments)+'\n');}function save(namespaces){if(null==namespaces){delete process.env.DEBUG;}else{process.env.DEBUG=namespaces;}}function load(){return process.env.DEBUG;}function createWritableStdioStream(fd){var stream;var tty_wrap=process.binding('tty_wrap');switch(tty_wrap.guessHandleType(fd)){case'TTY':stream=new tty.WriteStream(fd);stream._type='tty';if(stream._handle&&stream._handle.unref){stream._handle.unref();}break;case'FILE':var fs=__webpack_require__(662);stream=new fs.SyncWriteStream(fd,{autoClose:false});stream._type='fs';break;case'PIPE':case'TCP':var net=__webpack_require__(1939);stream=new net.Socket({fd:fd,readable:false,writable:true});stream.readable=false;stream.read=null;stream._type='pipe';if(stream._handle&&stream._handle.unref){stream._handle.unref();}break;default:throw new Error('Implement me. Unknown stream file type!');}stream.fd=fd;stream._isStdio=true;return stream;}function init(debug){debug.inspectOpts={};var keys=Object.keys(exports.inspectOpts);for(var i=0;i<keys.length;i++){debug.inspectOpts[keys[i]]=exports.inspectOpts[keys[i]];}}exports.enable(load());},2321:function(module){function isObjectLike(value){return value!=null&&typeof value=='object';}module.exports=isObjectLike;},2323:function(module){module.exports={"_args":[["elliptic@6.4.1","/Users/romuloalves/Projects/tramonto/TramontoOne/nodejs-assets/nodejs-project"]],"_from":"elliptic@6.4.1","_id":"elliptic@6.4.1","_inBundle":false,"_integrity":"sha512-BsXLz5sqX8OHcsh7CqBMztyXARmGQ3LWPtGjJi6DiJHq5C/qvi9P3OqgswKSDftbu8+IoI/QDTAm2fFnQ9SZSQ==","_location":"/elliptic","_phantomChildren":{},"_requested":{"type":"version","registry":true,"raw":"elliptic@6.4.1","name":"elliptic","escapedName":"elliptic","rawSpec":"6.4.1","saveSpec":null,"fetchSpec":"6.4.1"},"_requiredBy":["/secp256k1","/tiny-secp256k1"],"_resolved":"https://registry.npmjs.org/elliptic/-/elliptic-6.4.1.tgz","_spec":"6.4.1","_where":"/Users/romuloalves/Projects/tramonto/TramontoOne/nodejs-assets/nodejs-project","author":{"name":"Fedor Indutny","email":"fedor@indutny.com"},"bugs":{"url":"https://github.com/indutny/elliptic/issues"},"dependencies":{"bn.js":"^4.4.0","brorand":"^1.0.1","hash.js":"^1.0.0","hmac-drbg":"^1.0.0","inherits":"^2.0.1","minimalistic-assert":"^1.0.0","minimalistic-crypto-utils":"^1.0.0"},"description":"EC cryptography","devDependencies":{"brfs":"^1.4.3","coveralls":"^2.11.3","grunt":"^0.4.5","grunt-browserify":"^5.0.0","grunt-cli":"^1.2.0","grunt-contrib-connect":"^1.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^1.0.1","grunt-mocha-istanbul":"^3.0.1","grunt-saucelabs":"^8.6.2","istanbul":"^0.4.2","jscs":"^2.9.0","jshint":"^2.6.0","mocha":"^2.1.0"},"files":["lib"],"homepage":"https://github.com/indutny/elliptic","keywords":["EC","Elliptic","curve","Cryptography"],"license":"MIT","main":"lib/elliptic.js","name":"elliptic","repository":{"type":"git","url":"git+ssh://git@github.com/indutny/elliptic.git"},"scripts":{"jscs":"jscs benchmarks/*.js lib/*.js lib/**/*.js lib/**/**/*.js test/index.js","jshint":"jscs benchmarks/*.js lib/*.js lib/**/*.js lib/**/**/*.js test/index.js","lint":"npm run jscs && npm run jshint","test":"npm run lint && npm run unit","unit":"istanbul test _mocha --reporter=spec test/index.js","version":"grunt dist && git add dist/"},"version":"6.4.1"};},2324:function(module,__unusedexports,__webpack_require__){"use strict";const ethTxResolver=__webpack_require__(4394);const createTrieResolver=__webpack_require__(4269);const ethTxTrieResolver=createTrieResolver('eth-tx-trie',ethTxResolver);module.exports=ethTxTrieResolver;},2327:function(module,__unusedexports,__webpack_require__){"use strict";const leftPad=__webpack_require__(6485);const whilst=__webpack_require__(294);const waterfall=__webpack_require__(4265);const dagPB=__webpack_require__(7421);const UnixFS=__webpack_require__(7959);const DAGLink=dagPB.DAGLink;const DAGNode=dagPB.DAGNode;const multihashing=__webpack_require__(9424);const Dir=__webpack_require__(145);const persist=__webpack_require__(7730);const toPull=__webpack_require__(8985);const pull=__webpack_require__(418);const onEnd=__webpack_require__(4978);const asyncMap=__webpack_require__(9720);const Bucket=__webpack_require__(2303);const hashFn=function(value){return new Promise((resolve,reject)=>{multihashing(value,'murmur3-128',(err,hash)=>{if(err){reject(err);}else{const justHash=hash.slice(2,10);const length=justHash.length;const result=Buffer.alloc(length);for(let i=0;i<length;i++){result[length-i-1]=justHash[i];}resolve(result);}});});};hashFn.code=0x22;const defaultOptions={hashFn:hashFn};class DirSharded extends Dir{constructor(props,_options){const options=Object.assign({},defaultOptions,_options);super(props,options);this._bucket=Bucket(options);}async put(name,value,callback){try{await this._bucket.put(name,value);return callback();}catch(err){return callback(err);}}async get(name,callback){try{return callback(null,(await this._bucket.get(name)));}catch(err){return callback(err);}}childCount(){return this._bucket.leafCount();}directChildrenCount(){return this._bucket.childrenCount();}onlyChild(callback){try{return callback(null,this._bucket.onlyChild());}catch(err){return callback(err);}}eachChildSeries(iterator,callback){pull(toPull(this._bucket.eachLeafSeries()),asyncMap((child,cb)=>{iterator(child.key,child.value,cb);}),onEnd(callback));}flush(path,ipld,source,callback){flush(this._options,this._bucket,path,ipld,source,(err,results)=>{if(err){return callback(err);}else{this.multihash=results.cid.buffer;this.size=results.node.size;}callback(null,results);});}}module.exports=createDirSharded;module.exports.hashFn=hashFn;function createDirSharded(props,_options){return new DirSharded(props,_options);}function flush(options,bucket,path,ipld,source,callback){const children=bucket._children;let index=0;const links=[];whilst(()=>index<children.length,callback=>{const child=children.get(index);if(child){collectChild(child,index,err=>{index++;callback(err);});}else{index++;callback();}},err=>{if(err){callback(err);return;}haveLinks(links,callback);});function collectChild(child,index,callback){const labelPrefix=leftPad(index.toString(16).toUpperCase(),2,'0');if(Bucket.isBucket(child)){flush(options,child,path,ipld,null,(err,{cid,node})=>{if(err){callback(err);return;}links.push(new DAGLink(labelPrefix,node.size,cid));callback();});}else{const value=child.value;const label=labelPrefix+child.key;links.push(new DAGLink(label,value.size,value.multihash));callback();}}function haveLinks(links,callback){const data=Buffer.from(children.bitField().reverse());const dir=new UnixFS('hamt-sharded-directory',data);dir.fanout=bucket.tableSize();dir.hashType=options.hashFn.code;waterfall([cb=>DAGNode.create(dir.marshal(),links,cb),(node,cb)=>persist(node,ipld,options,cb),({cid,node},cb)=>{const pushable={path:path,size:node.size,multihash:cid.buffer};if(source){source.push(pushable);}cb(null,{cid,node});}],callback);}}},2330:function(module,__unusedexports,__webpack_require__){"use strict";function setup(env){createDebug.debug=createDebug;createDebug.default=createDebug;createDebug.coerce=coerce;createDebug.disable=disable;createDebug.enable=enable;createDebug.enabled=enabled;createDebug.humanize=__webpack_require__(9934);Object.keys(env).forEach(function(key){createDebug[key]=env[key];});createDebug.instances=[];createDebug.names=[];createDebug.skips=[];createDebug.formatters={};function selectColor(namespace){var hash=0;for(var i=0;i<namespace.length;i++){hash=(hash<<5)-hash+namespace.charCodeAt(i);hash|=0;}return createDebug.colors[Math.abs(hash)%createDebug.colors.length];}createDebug.selectColor=selectColor;function createDebug(namespace){var prevTime;function debug(){if(!debug.enabled){return;}for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}var self=debug;var curr=Number(new Date());var ms=curr-(prevTime||curr);self.diff=ms;self.prev=prevTime;self.curr=curr;prevTime=curr;args[0]=createDebug.coerce(args[0]);if(typeof args[0]!=='string'){args.unshift('%O');}var index=0;args[0]=args[0].replace(/%([a-zA-Z%])/g,function(match,format){if(match==='%%'){return match;}index++;var formatter=createDebug.formatters[format];if(typeof formatter==='function'){var val=args[index];match=formatter.call(self,val);args.splice(index,1);index--;}return match;});createDebug.formatArgs.call(self,args);var logFn=self.log||createDebug.log;logFn.apply(self,args);}debug.namespace=namespace;debug.enabled=createDebug.enabled(namespace);debug.useColors=createDebug.useColors();debug.color=selectColor(namespace);debug.destroy=destroy;debug.extend=extend;if(typeof createDebug.init==='function'){createDebug.init(debug);}createDebug.instances.push(debug);return debug;}function destroy(){var index=createDebug.instances.indexOf(this);if(index!==-1){createDebug.instances.splice(index,1);return true;}return false;}function extend(namespace,delimiter){return createDebug(this.namespace+(typeof delimiter==='undefined'?':':delimiter)+namespace);}function enable(namespaces){createDebug.save(namespaces);createDebug.names=[];createDebug.skips=[];var i;var split=(typeof namespaces==='string'?namespaces:'').split(/[\s,]+/);var len=split.length;for(i=0;i<len;i++){if(!split[i]){continue;}namespaces=split[i].replace(/\*/g,'.*?');if(namespaces[0]==='-'){createDebug.skips.push(new RegExp('^'+namespaces.substr(1)+'$'));}else{createDebug.names.push(new RegExp('^'+namespaces+'$'));}}for(i=0;i<createDebug.instances.length;i++){var instance=createDebug.instances[i];instance.enabled=createDebug.enabled(instance.namespace);}}function disable(){createDebug.enable('');}function enabled(name){if(name[name.length-1]==='*'){return true;}var i;var len;for(i=0,len=createDebug.skips.length;i<len;i++){if(createDebug.skips[i].test(name)){return false;}}for(i=0,len=createDebug.names.length;i<len;i++){if(createDebug.names[i].test(name)){return true;}}return false;}function coerce(val){if(val instanceof Error){return val.stack||val.message;}return val;}createDebug.enable(createDebug.load());return createDebug;}module.exports=setup;},2339:function(module,__unusedexports,__webpack_require__){var Symbol=__webpack_require__(8326),getRawTag=__webpack_require__(8594),objectToString=__webpack_require__(5610);var nullTag='[object Null]',undefinedTag='[object Undefined]';var symToStringTag=Symbol?Symbol.toStringTag:undefined;function baseGetTag(value){if(value==null){return value===undefined?undefinedTag:nullTag;}return symToStringTag&&symToStringTag in Object(value)?getRawTag(value):objectToString(value);}module.exports=baseGetTag;},2354:function(module,exports,__webpack_require__){"use strict";const multihashes=__webpack_require__(8757);const CID=__webpack_require__(9339);const protobuf=__webpack_require__(817);const fnv1a=__webpack_require__(3435);const varint=__webpack_require__(2572);const{DAGNode,DAGLink}=__webpack_require__(7421);const some=__webpack_require__(2402);const eachOf=__webpack_require__(5066);const pbSchema=__webpack_require__(9539);const emptyKeyHash='QmdfTbBqBPQ7VNxZEYEj14VmRuZBkqFbiwReogJgS1zR1n';const emptyKey=multihashes.fromB58String(emptyKeyHash);const defaultFanout=256;const maxItems=8192;const pb=protobuf(pbSchema);function toB58String(hash){return new CID(hash).toBaseEncodedString();}function readHeader(rootNode){const rootData=rootNode.data;const hdrLength=varint.decode(rootData);const vBytes=varint.decode.bytes;if(vBytes<=0){throw new Error('Invalid Set header length');}if(vBytes+hdrLength>rootData.length){throw new Error('Impossibly large set header length');}const hdrSlice=rootData.slice(vBytes,hdrLength+vBytes);const header=pb.Set.decode(hdrSlice);if(header.version!==1){throw new Error(`Unsupported Set version: ${header.version}`);}if(header.fanout>rootNode.links.length){throw new Error('Impossibly large fanout');}return{header:header,data:rootData.slice(hdrLength+vBytes)};}function hash(seed,key){const buf=Buffer.alloc(4);buf.writeUInt32LE(seed,0);const data=Buffer.concat([buf,Buffer.from(toB58String(key))]);return fnv1a(data.toString('binary'));}exports=module.exports=function(dag){const pinSet={hasDescendant:(root,childhash,callback)=>{const seen={};if(CID.isCID(childhash)||Buffer.isBuffer(childhash)){childhash=toB58String(childhash);}return searchChildren(root,callback);function searchChildren(root,cb){some(root.links,({cid},done)=>{const bs58Link=toB58String(cid);if(bs58Link===childhash){return done(null,true);}if(bs58Link in seen){return done(null,false);}seen[bs58Link]=true;dag.get(cid,'',{preload:false},(err,res)=>{if(err){return done(err);}searchChildren(res.value,done);});},cb);}},storeSet:(keys,callback)=>{const pins=keys.map(key=>{if(typeof key==='string'||Buffer.isBuffer(key)){key=new CID(key);}return{key:key,data:null};});pinSet.storeItems(pins,(err,rootNode)=>{if(err){return callback(err);}dag.put(rootNode,{version:0,format:'dag-pb',hashAlg:'sha2-256',preload:false},(err,cid)=>{if(err){return callback(err,cid);}callback(null,{node:rootNode,cid});});});},storeItems:(items,callback)=>{return storePins(items,0,callback);function storePins(pins,depth,storePinsCb){const pbHeader=pb.Set.encode({version:1,fanout:defaultFanout,seed:depth});const headerBuf=Buffer.concat([Buffer.from(varint.encode(pbHeader.length)),pbHeader]);const fanoutLinks=[];for(let i=0;i<defaultFanout;i++){fanoutLinks.push(new DAGLink('',1,emptyKey));}if(pins.length<=maxItems){const nodes=pins.map(item=>{return{link:new DAGLink('',1,item.key),data:item.data||Buffer.alloc(0)};}).sort((a,b)=>Buffer.compare(a.link.cid.buffer,b.link.cid.buffer));const rootLinks=fanoutLinks.concat(nodes.map(item=>item.link));const rootData=Buffer.concat([headerBuf].concat(nodes.map(item=>item.data)));DAGNode.create(rootData,rootLinks,(err,rootNode)=>{if(err){return storePinsCb(err);}return storePinsCb(null,rootNode);});}else{const bins=pins.reduce((bins,pin)=>{const n=hash(depth,pin.key)%defaultFanout;bins[n]=n in bins?bins[n].concat([pin]):[pin];return bins;},{});eachOf(bins,(bin,idx,eachCb)=>{storePins(bin,depth+1,(err,child)=>storeChild(err,child,idx,eachCb));},err=>{if(err){return storePinsCb(err);}DAGNode.create(headerBuf,fanoutLinks,(err,rootNode)=>{if(err){return storePinsCb(err);}return storePinsCb(null,rootNode);});});}function storeChild(err,child,binIdx,cb){if(err){return cb(err);}const opts={version:0,hashAlg:'sha2-256',format:'dag-pb',preload:false};dag.put(child,opts,(err,cid)=>{if(err){return cb(err);}fanoutLinks[binIdx]=new DAGLink('',child.size,cid);cb(null);});}}},loadSet:(rootNode,name,callback)=>{const link=rootNode.links.find(l=>l.name===name);if(!link){return callback(new Error('No link found with name '+name));}dag.get(link.cid,'',{preload:false},(err,res)=>{if(err){return callback(err);}const keys=[];const step=link=>keys.push(link.cid.buffer);pinSet.walkItems(res.value,step,err=>{if(err){return callback(err);}return callback(null,keys);});});},walkItems:(node,step,callback)=>{let pbh;try{pbh=readHeader(node);}catch(err){return callback(err);}eachOf(node.links,(link,idx,eachCb)=>{if(idx<pbh.header.fanout){const linkHash=link.cid.buffer;if(!emptyKey.equals(linkHash)){return dag.get(linkHash,'',{preload:false},(err,res)=>{if(err){return eachCb(err);}pinSet.walkItems(res.value,step,eachCb);});}}else{step(link,idx,pbh.data);}eachCb(null);},callback);}};return pinSet;};},2371:function(module,__unusedexports,__webpack_require__){const lazy=__webpack_require__(8643);const typef=__webpack_require__(2809);const OPS=__webpack_require__(9710);const ecc=__webpack_require__(6290);const bcrypto=__webpack_require__(5475);const bscript=__webpack_require__(5099);const BITCOIN_NETWORK=__webpack_require__(1215).bitcoin;const bs58check=__webpack_require__(6614);function p2pkh(a,opts){if(!a.address&&!a.hash&&!a.output&&!a.pubkey&&!a.input)throw new TypeError('Not enough data');opts=Object.assign({validate:true},opts||{});typef({network:typef.maybe(typef.Object),address:typef.maybe(typef.String),hash:typef.maybe(typef.BufferN(20)),output:typef.maybe(typef.BufferN(25)),pubkey:typef.maybe(ecc.isPoint),signature:typef.maybe(bscript.isCanonicalScriptSignature),input:typef.maybe(typef.Buffer)},a);const _address=lazy.value(function(){const payload=bs58check.decode(a.address);const version=payload.readUInt8(0);const hash=payload.slice(1);return{version,hash};});const _chunks=lazy.value(function(){return bscript.decompile(a.input);});const network=a.network||BITCOIN_NETWORK;const o={network};lazy.prop(o,'address',function(){if(!o.hash)return;const payload=Buffer.allocUnsafe(21);payload.writeUInt8(network.pubKeyHash,0);o.hash.copy(payload,1);return bs58check.encode(payload);});lazy.prop(o,'hash',function(){if(a.output)return a.output.slice(3,23);if(a.address)return _address().hash;if(a.pubkey||o.pubkey)return bcrypto.hash160(a.pubkey||o.pubkey);});lazy.prop(o,'output',function(){if(!o.hash)return;return bscript.compile([OPS.OP_DUP,OPS.OP_HASH160,o.hash,OPS.OP_EQUALVERIFY,OPS.OP_CHECKSIG]);});lazy.prop(o,'pubkey',function(){if(!a.input)return;return _chunks()[1];});lazy.prop(o,'signature',function(){if(!a.input)return;return _chunks()[0];});lazy.prop(o,'input',function(){if(!a.pubkey)return;if(!a.signature)return;return bscript.compile([a.signature,a.pubkey]);});lazy.prop(o,'witness',function(){if(!o.input)return;return[];});if(opts.validate){let hash;if(a.address){if(_address().version!==network.pubKeyHash)throw new TypeError('Invalid version or Network mismatch');if(_address().hash.length!==20)throw new TypeError('Invalid address');hash=_address().hash;}if(a.hash){if(hash&&!hash.equals(a.hash))throw new TypeError('Hash mismatch');else hash=a.hash;}if(a.output){if(a.output.length!==25||a.output[0]!==OPS.OP_DUP||a.output[1]!==OPS.OP_HASH160||a.output[2]!==0x14||a.output[23]!==OPS.OP_EQUALVERIFY||a.output[24]!==OPS.OP_CHECKSIG)throw new TypeError('Output is invalid');const hash2=a.output.slice(3,23);if(hash&&!hash.equals(hash2))throw new TypeError('Hash mismatch');else hash=hash2;}if(a.pubkey){const pkh=bcrypto.hash160(a.pubkey);if(hash&&!hash.equals(pkh))throw new TypeError('Hash mismatch');else hash=pkh;}if(a.input){const chunks=_chunks();if(chunks.length!==2)throw new TypeError('Input is invalid');if(!bscript.isCanonicalScriptSignature(chunks[0]))throw new TypeError('Input has invalid signature');if(!ecc.isPoint(chunks[1]))throw new TypeError('Input has invalid pubkey');if(a.signature&&!a.signature.equals(chunks[0]))throw new TypeError('Signature mismatch');if(a.pubkey&&!a.pubkey.equals(chunks[1]))throw new TypeError('Pubkey mismatch');const pkh=bcrypto.hash160(chunks[1]);if(hash&&!hash.equals(pkh))throw new TypeError('Hash mismatch');}}return Object.assign(o,a);}module.exports=p2pkh;},2398:function(module,__unusedexports,__webpack_require__){"use strict";module.exports=__webpack_require__(7858);},2402:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createTester=__webpack_require__(476);var _createTester2=_interopRequireDefault(_createTester);var _doParallel=__webpack_require__(5847);var _doParallel2=_interopRequireDefault(_doParallel);var _identity=__webpack_require__(4314);var _identity2=_interopRequireDefault(_identity);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}exports.default=(0,_doParallel2.default)((0,_createTester2.default)(Boolean,_identity2.default));module.exports=exports['default'];},2408:function(module){"use strict";const START_MASKS=[0b11111111,0b11111110,0b11111100,0b11111000,0b11110000,0b11100000,0b11000000,0b10000000];const STOP_MASKS=[0b00000001,0b00000011,0b00000111,0b00001111,0b00011111,0b00111111,0b01111111,0b11111111];module.exports=class ConsumableBuffer{constructor(value){this._value=value;this._currentBytePos=value.length-1;this._currentBitPos=7;}availableBits(){return this._currentBitPos+1+this._currentBytePos*8;}totalBits(){return this._value.length*8;}take(bits){let pendingBits=bits;let result=0;while(pendingBits&&this._haveBits()){const byte=this._value[this._currentBytePos];const availableBits=this._currentBitPos+1;const taking=Math.min(availableBits,pendingBits);const value=byteBitsToInt(byte,availableBits-taking,taking);result=(result<<taking)+value;pendingBits-=taking;this._currentBitPos-=taking;if(this._currentBitPos<0){this._currentBitPos=7;this._currentBytePos--;}}return result;}untake(bits){this._currentBitPos+=bits;while(this._currentBitPos>7){this._currentBitPos-=8;this._currentBytePos+=1;}}_haveBits(){return this._currentBytePos>=0;}};function byteBitsToInt(byte,start,length){const mask=maskFor(start,length);return(byte&mask)>>>start;}function maskFor(start,length){return START_MASKS[start]&STOP_MASKS[Math.min(length+start-1,7)];}},2414:function(__unusedmodule,exports,__webpack_require__){var hash=__webpack_require__(3102);var utils=hash.utils;var rotl32=utils.rotl32;var sum32=utils.sum32;var sum32_3=utils.sum32_3;var sum32_4=utils.sum32_4;var BlockHash=hash.common.BlockHash;function RIPEMD160(){if(!(this instanceof RIPEMD160))return new RIPEMD160();BlockHash.call(this);this.h=[0x67452301,0xefcdab89,0x98badcfe,0x10325476,0xc3d2e1f0];this.endian='little';}utils.inherits(RIPEMD160,BlockHash);exports.ripemd160=RIPEMD160;RIPEMD160.blockSize=512;RIPEMD160.outSize=160;RIPEMD160.hmacStrength=192;RIPEMD160.padLength=64;RIPEMD160.prototype._update=function update(msg,start){var A=this.h[0];var B=this.h[1];var C=this.h[2];var D=this.h[3];var E=this.h[4];var Ah=A;var Bh=B;var Ch=C;var Dh=D;var Eh=E;for(var j=0;j<80;j++){var T=sum32(rotl32(sum32_4(A,f(j,B,C,D),msg[r[j]+start],K(j)),s[j]),E);A=E;E=D;D=rotl32(C,10);C=B;B=T;T=sum32(rotl32(sum32_4(Ah,f(79-j,Bh,Ch,Dh),msg[rh[j]+start],Kh(j)),sh[j]),Eh);Ah=Eh;Eh=Dh;Dh=rotl32(Ch,10);Ch=Bh;Bh=T;}T=sum32_3(this.h[1],C,Dh);this.h[1]=sum32_3(this.h[2],D,Eh);this.h[2]=sum32_3(this.h[3],E,Ah);this.h[3]=sum32_3(this.h[4],A,Bh);this.h[4]=sum32_3(this.h[0],B,Ch);this.h[0]=T;};RIPEMD160.prototype._digest=function digest(enc){if(enc==='hex')return utils.toHex32(this.h,'little');else return utils.split32(this.h,'little');};function f(j,x,y,z){if(j<=15)return x^y^z;else if(j<=31)return x&y|~x&z;else if(j<=47)return(x|~y)^z;else if(j<=63)return x&z|y&~z;else return x^(y|~z);}function K(j){if(j<=15)return 0x00000000;else if(j<=31)return 0x5a827999;else if(j<=47)return 0x6ed9eba1;else if(j<=63)return 0x8f1bbcdc;else return 0xa953fd4e;}function Kh(j){if(j<=15)return 0x50a28be6;else if(j<=31)return 0x5c4dd124;else if(j<=47)return 0x6d703ef3;else if(j<=63)return 0x7a6d76e9;else return 0x00000000;}var r=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13];var rh=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11];var s=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6];var sh=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];},2418:function(module,__unusedexports,__webpack_require__){"use strict";var bufferUtil=__webpack_require__(9657);var assert=__webpack_require__(3930);var BufferWriter=function BufferWriter(obj){if(!(this instanceof BufferWriter))return new BufferWriter(obj);if(obj)this.set(obj);else this.bufs=[];};BufferWriter.prototype.set=function(obj){this.bufs=obj.bufs||this.bufs||[];return this;};BufferWriter.prototype.toBuffer=function(){return this.concat();};BufferWriter.prototype.concat=function(){return Buffer.concat(this.bufs);};BufferWriter.prototype.write=function(buf){assert(bufferUtil.isBuffer(buf));this.bufs.push(buf);return this;};BufferWriter.prototype.writeReverse=function(buf){assert(bufferUtil.isBuffer(buf));this.bufs.push(bufferUtil.reverse(buf));return this;};BufferWriter.prototype.writeUInt8=function(n){var buf=new Buffer(1);buf.writeUInt8(n,0);this.write(buf);return this;};BufferWriter.prototype.writeUInt16BE=function(n){var buf=new Buffer(2);buf.writeUInt16BE(n,0);this.write(buf);return this;};BufferWriter.prototype.writeUInt16LE=function(n){var buf=new Buffer(2);buf.writeUInt16LE(n,0);this.write(buf);return this;};BufferWriter.prototype.writeUInt32BE=function(n){var buf=new Buffer(4);buf.writeUInt32BE(n,0);this.write(buf);return this;};BufferWriter.prototype.writeInt32LE=function(n){var buf=new Buffer(4);buf.writeInt32LE(n,0);this.write(buf);return this;};BufferWriter.prototype.writeUInt32LE=function(n){var buf=new Buffer(4);buf.writeUInt32LE(n,0);this.write(buf);return this;};BufferWriter.prototype.writeUInt64BEBN=function(bn){var buf=bn.toBuffer({size:8});this.write(buf);return this;};BufferWriter.prototype.writeUInt64LEBN=function(bn){var buf=bn.toBuffer({size:8});this.writeReverse(buf);return this;};BufferWriter.prototype.writeVarintNum=function(n){var buf=BufferWriter.varintBufNum(n);this.write(buf);return this;};BufferWriter.prototype.writeVarintBN=function(bn){var buf=BufferWriter.varintBufBN(bn);this.write(buf);return this;};BufferWriter.varintBufNum=function(n){var buf=undefined;if(n<253){buf=new Buffer(1);buf.writeUInt8(n,0);}else if(n<0x10000){buf=new Buffer(1+2);buf.writeUInt8(253,0);buf.writeUInt16LE(n,1);}else if(n<0x100000000){buf=new Buffer(1+4);buf.writeUInt8(254,0);buf.writeUInt32LE(n,1);}else{buf=new Buffer(1+8);buf.writeUInt8(255,0);buf.writeInt32LE(n&-1,1);buf.writeUInt32LE(Math.floor(n/0x100000000),5);}return buf;};BufferWriter.varintBufBN=function(bn){var buf=undefined;var n=bn.toNumber();if(n<253){buf=new Buffer(1);buf.writeUInt8(n,0);}else if(n<0x10000){buf=new Buffer(1+2);buf.writeUInt8(253,0);buf.writeUInt16LE(n,1);}else if(n<0x100000000){buf=new Buffer(1+4);buf.writeUInt8(254,0);buf.writeUInt32LE(n,1);}else{var bw=new BufferWriter();bw.writeUInt8(255);bw.writeUInt64LEBN(bn);var buf=bw.concat();}return buf;};module.exports=BufferWriter;},2420:function(module,__unusedexports,__webpack_require__){module=__webpack_require__.nmd(module);(function(module,exports){'use strict';function assert(val,msg){if(!val)throw new Error(msg||'Assertion failed');}function inherits(ctor,superCtor){ctor.super_=superCtor;var TempCtor=function(){};TempCtor.prototype=superCtor.prototype;ctor.prototype=new TempCtor();ctor.prototype.constructor=ctor;}function BN(number,base,endian){if(number!==null&&typeof number==='object'&&Array.isArray(number.words)){return number;}this.sign=false;this.words=null;this.length=0;this.red=null;if(base==='le'||base==='be'){endian=base;base=10;}if(number!==null)this._init(number||0,base||10,endian||'be');}if(typeof module==='object')module.exports=BN;else exports.BN=BN;BN.BN=BN;BN.wordSize=26;BN.prototype._init=function init(number,base,endian){if(typeof number==='number'){if(number<0){this.sign=true;number=-number;}if(number<0x4000000){this.words=[number&0x3ffffff];this.length=1;}else if(number<0x10000000000000){this.words=[number&0x3ffffff,number/0x4000000&0x3ffffff];this.length=2;}else{assert(number<0x20000000000000);this.words=[number&0x3ffffff,number/0x4000000&0x3ffffff,1];this.length=3;}return;}else if(typeof number==='object'){return this._initArray(number,base,endian);}if(base==='hex')base=16;assert(base===(base|0)&&base>=2&&base<=36);number=number.toString().replace(/\s+/g,'');var start=0;if(number[0]==='-')start++;if(base===16)this._parseHex(number,start);else this._parseBase(number,base,start);if(number[0]==='-')this.sign=true;this.strip();};BN.prototype._initArray=function _initArray(number,base,endian){assert(typeof number.length==='number');if(number.length<=0){this.words=[0];this.length=1;return this;}this.length=Math.ceil(number.length/3);this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var off=0;if(endian==='be'){for(var i=number.length-1,j=0;i>=0;i-=3){var w=number[i]|number[i-1]<<8|number[i-2]<<16;this.words[j]|=w<<off&0x3ffffff;this.words[j+1]=w>>>26-off&0x3ffffff;off+=24;if(off>=26){off-=26;j++;}}}else if(endian==='le'){for(var i=0,j=0;i<number.length;i+=3){var w=number[i]|number[i+1]<<8|number[i+2]<<16;this.words[j]|=w<<off&0x3ffffff;this.words[j+1]=w>>>26-off&0x3ffffff;off+=24;if(off>=26){off-=26;j++;}}}return this.strip();};function parseHex(str,start,end){var r=0;var len=Math.min(str.length,end);for(var i=start;i<len;i++){var c=str.charCodeAt(i)-48;r<<=4;if(c>=49&&c<=54)r|=c-49+0xa;else if(c>=17&&c<=22)r|=c-17+0xa;else r|=c&0xf;}return r;}BN.prototype._parseHex=function _parseHex(number,start){this.length=Math.ceil((number.length-start)/6);this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var off=0;for(var i=number.length-6,j=0;i>=start;i-=6){var w=parseHex(number,i,i+6);this.words[j]|=w<<off&0x3ffffff;this.words[j+1]|=w>>>26-off&0x3fffff;off+=24;if(off>=26){off-=26;j++;}}if(i+6!==start){var w=parseHex(number,start,i+6);this.words[j]|=w<<off&0x3ffffff;this.words[j+1]|=w>>>26-off&0x3fffff;}this.strip();};function parseBase(str,start,end,mul){var r=0;var len=Math.min(str.length,end);for(var i=start;i<len;i++){var c=str.charCodeAt(i)-48;r*=mul;if(c>=49)r+=c-49+0xa;else if(c>=17)r+=c-17+0xa;else r+=c;}return r;}BN.prototype._parseBase=function _parseBase(number,base,start){this.words=[0];this.length=1;for(var limbLen=0,limbPow=1;limbPow<=0x3ffffff;limbPow*=base)limbLen++;limbLen--;limbPow=limbPow/base|0;var total=number.length-start;var mod=total%limbLen;var end=Math.min(total,total-mod)+start;var word=0;for(var i=start;i<end;i+=limbLen){word=parseBase(number,i,i+limbLen,base);this.imuln(limbPow);if(this.words[0]+word<0x4000000)this.words[0]+=word;else this._iaddn(word);}if(mod!==0){var pow=1;var word=parseBase(number,i,number.length,base);for(var i=0;i<mod;i++)pow*=base;this.imuln(pow);if(this.words[0]+word<0x4000000)this.words[0]+=word;else this._iaddn(word);}};BN.prototype.copy=function copy(dest){dest.words=new Array(this.length);for(var i=0;i<this.length;i++)dest.words[i]=this.words[i];dest.length=this.length;dest.sign=this.sign;dest.red=this.red;};BN.prototype.clone=function clone(){var r=new BN(null);this.copy(r);return r;};BN.prototype.strip=function strip(){while(this.length>1&&this.words[this.length-1]===0)this.length--;return this._normSign();};BN.prototype._normSign=function _normSign(){if(this.length===1&&this.words[0]===0)this.sign=false;return this;};BN.prototype.inspect=function inspect(){return(this.red?'<BN-R: ':'<BN: ')+this.toString(16)+'>';};var zeros=['','0','00','000','0000','00000','000000','0000000','00000000','000000000','0000000000','00000000000','000000000000','0000000000000','00000000000000','000000000000000','0000000000000000','00000000000000000','000000000000000000','0000000000000000000','00000000000000000000','000000000000000000000','0000000000000000000000','00000000000000000000000','000000000000000000000000','0000000000000000000000000'];var groupSizes=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5];var groupBases=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,10000000,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64000000,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,24300000,28629151,33554432,39135393,45435424,52521875,60466176];BN.prototype.toString=function toString(base,padding){base=base||10;if(base===16||base==='hex'){var out='';var off=0;var padding=padding|0||1;var carry=0;for(var i=0;i<this.length;i++){var w=this.words[i];var word=((w<<off|carry)&0xffffff).toString(16);carry=w>>>24-off&0xffffff;if(carry!==0||i!==this.length-1)out=zeros[6-word.length]+word+out;else out=word+out;off+=2;if(off>=26){off-=26;i--;}}if(carry!==0)out=carry.toString(16)+out;while(out.length%padding!==0)out='0'+out;if(this.sign)out='-'+out;return out;}else if(base===(base|0)&&base>=2&&base<=36){var groupSize=groupSizes[base];var groupBase=groupBases[base];var out='';var c=this.clone();c.sign=false;while(c.cmpn(0)!==0){var r=c.modn(groupBase).toString(base);c=c.idivn(groupBase);if(c.cmpn(0)!==0)out=zeros[groupSize-r.length]+r+out;else out=r+out;}if(this.cmpn(0)===0)out='0'+out;if(this.sign)out='-'+out;return out;}else{assert(false,'Base should be between 2 and 36');}};BN.prototype.toJSON=function toJSON(){return this.toString(16);};BN.prototype.toArray=function toArray(){this.strip();var res=new Array(this.byteLength());res[0]=0;var q=this.clone();for(var i=0;q.cmpn(0)!==0;i++){var b=q.andln(0xff);q.ishrn(8);res[res.length-i-1]=b;}return res;};if(Math.clz32){BN.prototype._countBits=function _countBits(w){return 32-Math.clz32(w);};}else{BN.prototype._countBits=function _countBits(w){var t=w;var r=0;if(t>=0x1000){r+=13;t>>>=13;}if(t>=0x40){r+=7;t>>>=7;}if(t>=0x8){r+=4;t>>>=4;}if(t>=0x02){r+=2;t>>>=2;}return r+t;};}BN.prototype._zeroBits=function _zeroBits(w){if(w===0)return 26;var t=w;var r=0;if((t&0x1fff)===0){r+=13;t>>>=13;}if((t&0x7f)===0){r+=7;t>>>=7;}if((t&0xf)===0){r+=4;t>>>=4;}if((t&0x3)===0){r+=2;t>>>=2;}if((t&0x1)===0)r++;return r;};BN.prototype.bitLength=function bitLength(){var hi=0;var w=this.words[this.length-1];var hi=this._countBits(w);return(this.length-1)*26+hi;};BN.prototype.zeroBits=function zeroBits(){if(this.cmpn(0)===0)return 0;var r=0;for(var i=0;i<this.length;i++){var b=this._zeroBits(this.words[i]);r+=b;if(b!==26)break;}return r;};BN.prototype.byteLength=function byteLength(){return Math.ceil(this.bitLength()/8);};BN.prototype.neg=function neg(){if(this.cmpn(0)===0)return this.clone();var r=this.clone();r.sign=!this.sign;return r;};BN.prototype.ior=function ior(num){this.sign=this.sign||num.sign;while(this.length<num.length)this.words[this.length++]=0;for(var i=0;i<num.length;i++)this.words[i]=this.words[i]|num.words[i];return this.strip();};BN.prototype.or=function or(num){if(this.length>num.length)return this.clone().ior(num);else return num.clone().ior(this);};BN.prototype.iand=function iand(num){this.sign=this.sign&&num.sign;var b;if(this.length>num.length)b=num;else b=this;for(var i=0;i<b.length;i++)this.words[i]=this.words[i]&num.words[i];this.length=b.length;return this.strip();};BN.prototype.and=function and(num){if(this.length>num.length)return this.clone().iand(num);else return num.clone().iand(this);};BN.prototype.ixor=function ixor(num){this.sign=this.sign||num.sign;var a;var b;if(this.length>num.length){a=this;b=num;}else{a=num;b=this;}for(var i=0;i<b.length;i++)this.words[i]=a.words[i]^b.words[i];if(this!==a)for(;i<a.length;i++)this.words[i]=a.words[i];this.length=a.length;return this.strip();};BN.prototype.xor=function xor(num){if(this.length>num.length)return this.clone().ixor(num);else return num.clone().ixor(this);};BN.prototype.setn=function setn(bit,val){assert(typeof bit==='number'&&bit>=0);var off=bit/26|0;var wbit=bit%26;while(this.length<=off)this.words[this.length++]=0;if(val)this.words[off]=this.words[off]|1<<wbit;else this.words[off]=this.words[off]&~(1<<wbit);return this.strip();};BN.prototype.iadd=function iadd(num){if(this.sign&&!num.sign){this.sign=false;var r=this.isub(num);this.sign=!this.sign;return this._normSign();}else if(!this.sign&&num.sign){num.sign=false;var r=this.isub(num);num.sign=true;return r._normSign();}var a;var b;if(this.length>num.length){a=this;b=num;}else{a=num;b=this;}var carry=0;for(var i=0;i<b.length;i++){var r=a.words[i]+b.words[i]+carry;this.words[i]=r&0x3ffffff;carry=r>>>26;}for(;carry!==0&&i<a.length;i++){var r=a.words[i]+carry;this.words[i]=r&0x3ffffff;carry=r>>>26;}this.length=a.length;if(carry!==0){this.words[this.length]=carry;this.length++;}else if(a!==this){for(;i<a.length;i++)this.words[i]=a.words[i];}return this;};BN.prototype.add=function add(num){if(num.sign&&!this.sign){num.sign=false;var res=this.sub(num);num.sign=true;return res;}else if(!num.sign&&this.sign){this.sign=false;var res=num.sub(this);this.sign=true;return res;}if(this.length>num.length)return this.clone().iadd(num);else return num.clone().iadd(this);};BN.prototype.isub=function isub(num){if(num.sign){num.sign=false;var r=this.iadd(num);num.sign=true;return r._normSign();}else if(this.sign){this.sign=false;this.iadd(num);this.sign=true;return this._normSign();}var cmp=this.cmp(num);if(cmp===0){this.sign=false;this.length=1;this.words[0]=0;return this;}var a;var b;if(cmp>0){a=this;b=num;}else{a=num;b=this;}var carry=0;for(var i=0;i<b.length;i++){var r=a.words[i]-b.words[i]+carry;carry=r>>26;this.words[i]=r&0x3ffffff;}for(;carry!==0&&i<a.length;i++){var r=a.words[i]+carry;carry=r>>26;this.words[i]=r&0x3ffffff;}if(carry===0&&i<a.length&&a!==this)for(;i<a.length;i++)this.words[i]=a.words[i];this.length=Math.max(this.length,i);if(a!==this)this.sign=true;return this.strip();};BN.prototype.sub=function sub(num){return this.clone().isub(num);};BN.prototype._smallMulTo=function _smallMulTo(num,out){out.sign=num.sign!==this.sign;out.length=this.length+num.length;var carry=0;for(var k=0;k<out.length-1;k++){var ncarry=carry>>>26;var rword=carry&0x3ffffff;var maxJ=Math.min(k,num.length-1);for(var j=Math.max(0,k-this.length+1);j<=maxJ;j++){var i=k-j;var a=this.words[i]|0;var b=num.words[j]|0;var r=a*b;var lo=r&0x3ffffff;ncarry=ncarry+(r/0x4000000|0)|0;lo=lo+rword|0;rword=lo&0x3ffffff;ncarry=ncarry+(lo>>>26)|0;}out.words[k]=rword;carry=ncarry;}if(carry!==0){out.words[k]=carry;}else{out.length--;}return out.strip();};BN.prototype._bigMulTo=function _bigMulTo(num,out){out.sign=num.sign!==this.sign;out.length=this.length+num.length;var carry=0;var hncarry=0;for(var k=0;k<out.length-1;k++){var ncarry=hncarry;hncarry=0;var rword=carry&0x3ffffff;var maxJ=Math.min(k,num.length-1);for(var j=Math.max(0,k-this.length+1);j<=maxJ;j++){var i=k-j;var a=this.words[i]|0;var b=num.words[j]|0;var r=a*b;var lo=r&0x3ffffff;ncarry=ncarry+(r/0x4000000|0)|0;lo=lo+rword|0;rword=lo&0x3ffffff;ncarry=ncarry+(lo>>>26)|0;hncarry+=ncarry>>>26;ncarry&=0x3ffffff;}out.words[k]=rword;carry=ncarry;ncarry=hncarry;}if(carry!==0){out.words[k]=carry;}else{out.length--;}return out.strip();};BN.prototype.mulTo=function mulTo(num,out){var res;if(this.length+num.length<63)res=this._smallMulTo(num,out);else res=this._bigMulTo(num,out);return res;};BN.prototype.mul=function mul(num){var out=new BN(null);out.words=new Array(this.length+num.length);return this.mulTo(num,out);};BN.prototype.imul=function imul(num){if(this.cmpn(0)===0||num.cmpn(0)===0){this.words[0]=0;this.length=1;return this;}var tlen=this.length;var nlen=num.length;this.sign=num.sign!==this.sign;this.length=this.length+num.length;this.words[this.length-1]=0;for(var k=this.length-2;k>=0;k--){var carry=0;var rword=0;var maxJ=Math.min(k,nlen-1);for(var j=Math.max(0,k-tlen+1);j<=maxJ;j++){var i=k-j;var a=this.words[i];var b=num.words[j];var r=a*b;var lo=r&0x3ffffff;carry+=r/0x4000000|0;lo+=rword;rword=lo&0x3ffffff;carry+=lo>>>26;}this.words[k]=rword;this.words[k+1]+=carry;carry=0;}var carry=0;for(var i=1;i<this.length;i++){var w=this.words[i]+carry;this.words[i]=w&0x3ffffff;carry=w>>>26;}return this.strip();};BN.prototype.imuln=function imuln(num){assert(typeof num==='number');var carry=0;for(var i=0;i<this.length;i++){var w=this.words[i]*num;var lo=(w&0x3ffffff)+(carry&0x3ffffff);carry>>=26;carry+=w/0x4000000|0;carry+=lo>>>26;this.words[i]=lo&0x3ffffff;}if(carry!==0){this.words[i]=carry;this.length++;}return this;};BN.prototype.sqr=function sqr(){return this.mul(this);};BN.prototype.isqr=function isqr(){return this.mul(this);};BN.prototype.ishln=function ishln(bits){assert(typeof bits==='number'&&bits>=0);var r=bits%26;var s=(bits-r)/26;var carryMask=0x3ffffff>>>26-r<<26-r;if(r!==0){var carry=0;for(var i=0;i<this.length;i++){var newCarry=this.words[i]&carryMask;var c=this.words[i]-newCarry<<r;this.words[i]=c|carry;carry=newCarry>>>26-r;}if(carry){this.words[i]=carry;this.length++;}}if(s!==0){for(var i=this.length-1;i>=0;i--)this.words[i+s]=this.words[i];for(var i=0;i<s;i++)this.words[i]=0;this.length+=s;}return this.strip();};BN.prototype.ishrn=function ishrn(bits,hint,extended){assert(typeof bits==='number'&&bits>=0);var h;if(hint)h=(hint-hint%26)/26;else h=0;var r=bits%26;var s=Math.min((bits-r)/26,this.length);var mask=0x3ffffff^0x3ffffff>>>r<<r;var maskedWords=extended;h-=s;h=Math.max(0,h);if(maskedWords){for(var i=0;i<s;i++)maskedWords.words[i]=this.words[i];maskedWords.length=s;}if(s===0){}else if(this.length>s){this.length-=s;for(var i=0;i<this.length;i++)this.words[i]=this.words[i+s];}else{this.words[0]=0;this.length=1;}var carry=0;for(var i=this.length-1;i>=0&&(carry!==0||i>=h);i--){var word=this.words[i];this.words[i]=carry<<26-r|word>>>r;carry=word&mask;}if(maskedWords&&carry!==0)maskedWords.words[maskedWords.length++]=carry;if(this.length===0){this.words[0]=0;this.length=1;}this.strip();return this;};BN.prototype.shln=function shln(bits){return this.clone().ishln(bits);};BN.prototype.shrn=function shrn(bits){return this.clone().ishrn(bits);};BN.prototype.testn=function testn(bit){assert(typeof bit==='number'&&bit>=0);var r=bit%26;var s=(bit-r)/26;var q=1<<r;if(this.length<=s){return false;}var w=this.words[s];return!!(w&q);};BN.prototype.imaskn=function imaskn(bits){assert(typeof bits==='number'&&bits>=0);var r=bits%26;var s=(bits-r)/26;assert(!this.sign,'imaskn works only with positive numbers');if(r!==0)s++;this.length=Math.min(s,this.length);if(r!==0){var mask=0x3ffffff^0x3ffffff>>>r<<r;this.words[this.length-1]&=mask;}return this.strip();};BN.prototype.maskn=function maskn(bits){return this.clone().imaskn(bits);};BN.prototype.iaddn=function iaddn(num){assert(typeof num==='number');if(num<0)return this.isubn(-num);if(this.sign){if(this.length===1&&this.words[0]<num){this.words[0]=num-this.words[0];this.sign=false;return this;}this.sign=false;this.isubn(num);this.sign=true;return this;}return this._iaddn(num);};BN.prototype._iaddn=function _iaddn(num){this.words[0]+=num;for(var i=0;i<this.length&&this.words[i]>=0x4000000;i++){this.words[i]-=0x4000000;if(i===this.length-1)this.words[i+1]=1;else this.words[i+1]++;}this.length=Math.max(this.length,i+1);return this;};BN.prototype.isubn=function isubn(num){assert(typeof num==='number');if(num<0)return this.iaddn(-num);if(this.sign){this.sign=false;this.iaddn(num);this.sign=true;return this;}this.words[0]-=num;for(var i=0;i<this.length&&this.words[i]<0;i++){this.words[i]+=0x4000000;this.words[i+1]-=1;}return this.strip();};BN.prototype.addn=function addn(num){return this.clone().iaddn(num);};BN.prototype.subn=function subn(num){return this.clone().isubn(num);};BN.prototype.iabs=function iabs(){this.sign=false;return this;};BN.prototype.abs=function abs(){return this.clone().iabs();};BN.prototype._ishlnsubmul=function _ishlnsubmul(num,mul,shift){var len=num.length+shift;var i;if(this.words.length<len){var t=new Array(len);for(var i=0;i<this.length;i++)t[i]=this.words[i];this.words=t;}else{i=this.length;}this.length=Math.max(this.length,len);for(;i<this.length;i++)this.words[i]=0;var carry=0;for(var i=0;i<num.length;i++){var w=this.words[i+shift]+carry;var right=num.words[i]*mul;w-=right&0x3ffffff;carry=(w>>26)-(right/0x4000000|0);this.words[i+shift]=w&0x3ffffff;}for(;i<this.length-shift;i++){var w=this.words[i+shift]+carry;carry=w>>26;this.words[i+shift]=w&0x3ffffff;}if(carry===0)return this.strip();assert(carry===-1);carry=0;for(var i=0;i<this.length;i++){var w=-this.words[i]+carry;carry=w>>26;this.words[i]=w&0x3ffffff;}this.sign=true;return this.strip();};BN.prototype._wordDiv=function _wordDiv(num,mode){var shift=this.length-num.length;var a=this.clone();var b=num;var bhi=b.words[b.length-1];var bhiBits=this._countBits(bhi);shift=26-bhiBits;if(shift!==0){b=b.shln(shift);a.ishln(shift);bhi=b.words[b.length-1];}var m=a.length-b.length;var q;if(mode!=='mod'){q=new BN(null);q.length=m+1;q.words=new Array(q.length);for(var i=0;i<q.length;i++)q.words[i]=0;}var diff=a.clone()._ishlnsubmul(b,1,m);if(!diff.sign){a=diff;if(q)q.words[m]=1;}for(var j=m-1;j>=0;j--){var qj=a.words[b.length+j]*0x4000000+a.words[b.length+j-1];qj=Math.min(qj/bhi|0,0x3ffffff);a._ishlnsubmul(b,qj,j);while(a.sign){qj--;a.sign=false;a._ishlnsubmul(b,1,j);if(a.cmpn(0)!==0)a.sign=!a.sign;}if(q)q.words[j]=qj;}if(q)q.strip();a.strip();if(mode!=='div'&&shift!==0)a.ishrn(shift);return{div:q?q:null,mod:a};};BN.prototype.divmod=function divmod(num,mode){assert(num.cmpn(0)!==0);if(this.sign&&!num.sign){var res=this.neg().divmod(num,mode);var div;var mod;if(mode!=='mod')div=res.div.neg();if(mode!=='div')mod=res.mod.cmpn(0)===0?res.mod:num.sub(res.mod);return{div:div,mod:mod};}else if(!this.sign&&num.sign){var res=this.divmod(num.neg(),mode);var div;if(mode!=='mod')div=res.div.neg();return{div:div,mod:res.mod};}else if(this.sign&&num.sign){return this.neg().divmod(num.neg(),mode);}if(num.length>this.length||this.cmp(num)<0)return{div:new BN(0),mod:this};if(num.length===1){if(mode==='div')return{div:this.divn(num.words[0]),mod:null};else if(mode==='mod')return{div:null,mod:new BN(this.modn(num.words[0]))};return{div:this.divn(num.words[0]),mod:new BN(this.modn(num.words[0]))};}return this._wordDiv(num,mode);};BN.prototype.div=function div(num){return this.divmod(num,'div').div;};BN.prototype.mod=function mod(num){return this.divmod(num,'mod').mod;};BN.prototype.divRound=function divRound(num){var dm=this.divmod(num);if(dm.mod.cmpn(0)===0)return dm.div;var mod=dm.div.sign?dm.mod.isub(num):dm.mod;var half=num.shrn(1);var r2=num.andln(1);var cmp=mod.cmp(half);if(cmp<0||r2===1&&cmp===0)return dm.div;return dm.div.sign?dm.div.isubn(1):dm.div.iaddn(1);};BN.prototype.modn=function modn(num){assert(num<=0x3ffffff);var p=(1<<26)%num;var acc=0;for(var i=this.length-1;i>=0;i--)acc=(p*acc+this.words[i])%num;return acc;};BN.prototype.idivn=function idivn(num){assert(num<=0x3ffffff);var carry=0;for(var i=this.length-1;i>=0;i--){var w=this.words[i]+carry*0x4000000;this.words[i]=w/num|0;carry=w%num;}return this.strip();};BN.prototype.divn=function divn(num){return this.clone().idivn(num);};BN.prototype.egcd=function egcd(p){assert(!p.sign);assert(p.cmpn(0)!==0);var x=this;var y=p.clone();if(x.sign)x=x.mod(p);else x=x.clone();var A=new BN(1);var B=new BN(0);var C=new BN(0);var D=new BN(1);var g=0;while(x.isEven()&&y.isEven()){x.ishrn(1);y.ishrn(1);++g;}var yp=y.clone();var xp=x.clone();while(x.cmpn(0)!==0){while(x.isEven()){x.ishrn(1);if(A.isEven()&&B.isEven()){A.ishrn(1);B.ishrn(1);}else{A.iadd(yp).ishrn(1);B.isub(xp).ishrn(1);}}while(y.isEven()){y.ishrn(1);if(C.isEven()&&D.isEven()){C.ishrn(1);D.ishrn(1);}else{C.iadd(yp).ishrn(1);D.isub(xp).ishrn(1);}}if(x.cmp(y)>=0){x.isub(y);A.isub(C);B.isub(D);}else{y.isub(x);C.isub(A);D.isub(B);}}return{a:C,b:D,gcd:y.ishln(g)};};BN.prototype._invmp=function _invmp(p){assert(!p.sign);assert(p.cmpn(0)!==0);var a=this;var b=p.clone();if(a.sign)a=a.mod(p);else a=a.clone();var x1=new BN(1);var x2=new BN(0);var delta=b.clone();while(a.cmpn(1)>0&&b.cmpn(1)>0){while(a.isEven()){a.ishrn(1);if(x1.isEven())x1.ishrn(1);else x1.iadd(delta).ishrn(1);}while(b.isEven()){b.ishrn(1);if(x2.isEven())x2.ishrn(1);else x2.iadd(delta).ishrn(1);}if(a.cmp(b)>=0){a.isub(b);x1.isub(x2);}else{b.isub(a);x2.isub(x1);}}if(a.cmpn(1)===0)return x1;else return x2;};BN.prototype.gcd=function gcd(num){if(this.cmpn(0)===0)return num.clone();if(num.cmpn(0)===0)return this.clone();var a=this.clone();var b=num.clone();a.sign=false;b.sign=false;for(var shift=0;a.isEven()&&b.isEven();shift++){a.ishrn(1);b.ishrn(1);}do{while(a.isEven())a.ishrn(1);while(b.isEven())b.ishrn(1);var r=a.cmp(b);if(r<0){var t=a;a=b;b=t;}else if(r===0||b.cmpn(1)===0){break;}a.isub(b);}while(true);return b.ishln(shift);};BN.prototype.invm=function invm(num){return this.egcd(num).a.mod(num);};BN.prototype.isEven=function isEven(){return(this.words[0]&1)===0;};BN.prototype.isOdd=function isOdd(){return(this.words[0]&1)===1;};BN.prototype.andln=function andln(num){return this.words[0]&num;};BN.prototype.bincn=function bincn(bit){assert(typeof bit==='number');var r=bit%26;var s=(bit-r)/26;var q=1<<r;if(this.length<=s){for(var i=this.length;i<s+1;i++)this.words[i]=0;this.words[s]|=q;this.length=s+1;return this;}var carry=q;for(var i=s;carry!==0&&i<this.length;i++){var w=this.words[i];w+=carry;carry=w>>>26;w&=0x3ffffff;this.words[i]=w;}if(carry!==0){this.words[i]=carry;this.length++;}return this;};BN.prototype.cmpn=function cmpn(num){var sign=num<0;if(sign)num=-num;if(this.sign&&!sign)return-1;else if(!this.sign&&sign)return 1;num&=0x3ffffff;this.strip();var res;if(this.length>1){res=1;}else{var w=this.words[0];res=w===num?0:w<num?-1:1;}if(this.sign)res=-res;return res;};BN.prototype.cmp=function cmp(num){if(this.sign&&!num.sign)return-1;else if(!this.sign&&num.sign)return 1;var res=this.ucmp(num);if(this.sign)return-res;else return res;};BN.prototype.ucmp=function ucmp(num){if(this.length>num.length)return 1;else if(this.length<num.length)return-1;var res=0;for(var i=this.length-1;i>=0;i--){var a=this.words[i];var b=num.words[i];if(a===b)continue;if(a<b)res=-1;else if(a>b)res=1;break;}return res;};BN.red=function red(num){return new Red(num);};BN.prototype.toRed=function toRed(ctx){assert(!this.red,'Already a number in reduction context');assert(!this.sign,'red works only with positives');return ctx.convertTo(this)._forceRed(ctx);};BN.prototype.fromRed=function fromRed(){assert(this.red,'fromRed works only with numbers in reduction context');return this.red.convertFrom(this);};BN.prototype._forceRed=function _forceRed(ctx){this.red=ctx;return this;};BN.prototype.forceRed=function forceRed(ctx){assert(!this.red,'Already a number in reduction context');return this._forceRed(ctx);};BN.prototype.redAdd=function redAdd(num){assert(this.red,'redAdd works only with red numbers');return this.red.add(this,num);};BN.prototype.redIAdd=function redIAdd(num){assert(this.red,'redIAdd works only with red numbers');return this.red.iadd(this,num);};BN.prototype.redSub=function redSub(num){assert(this.red,'redSub works only with red numbers');return this.red.sub(this,num);};BN.prototype.redISub=function redISub(num){assert(this.red,'redISub works only with red numbers');return this.red.isub(this,num);};BN.prototype.redShl=function redShl(num){assert(this.red,'redShl works only with red numbers');return this.red.shl(this,num);};BN.prototype.redMul=function redMul(num){assert(this.red,'redMul works only with red numbers');this.red._verify2(this,num);return this.red.mul(this,num);};BN.prototype.redIMul=function redIMul(num){assert(this.red,'redMul works only with red numbers');this.red._verify2(this,num);return this.red.imul(this,num);};BN.prototype.redSqr=function redSqr(){assert(this.red,'redSqr works only with red numbers');this.red._verify1(this);return this.red.sqr(this);};BN.prototype.redISqr=function redISqr(){assert(this.red,'redISqr works only with red numbers');this.red._verify1(this);return this.red.isqr(this);};BN.prototype.redSqrt=function redSqrt(){assert(this.red,'redSqrt works only with red numbers');this.red._verify1(this);return this.red.sqrt(this);};BN.prototype.redInvm=function redInvm(){assert(this.red,'redInvm works only with red numbers');this.red._verify1(this);return this.red.invm(this);};BN.prototype.redNeg=function redNeg(){assert(this.red,'redNeg works only with red numbers');this.red._verify1(this);return this.red.neg(this);};BN.prototype.redPow=function redPow(num){assert(this.red&&!num.red,'redPow(normalNum)');this.red._verify1(this);return this.red.pow(this,num);};var primes={k256:null,p224:null,p192:null,p25519:null};function MPrime(name,p){this.name=name;this.p=new BN(p,16);this.n=this.p.bitLength();this.k=new BN(1).ishln(this.n).isub(this.p);this.tmp=this._tmp();}MPrime.prototype._tmp=function _tmp(){var tmp=new BN(null);tmp.words=new Array(Math.ceil(this.n/13));return tmp;};MPrime.prototype.ireduce=function ireduce(num){var r=num;var rlen;do{this.split(r,this.tmp);r=this.imulK(r);r=r.iadd(this.tmp);rlen=r.bitLength();}while(rlen>this.n);var cmp=rlen<this.n?-1:r.ucmp(this.p);if(cmp===0){r.words[0]=0;r.length=1;}else if(cmp>0){r.isub(this.p);}else{r.strip();}return r;};MPrime.prototype.split=function split(input,out){input.ishrn(this.n,0,out);};MPrime.prototype.imulK=function imulK(num){return num.imul(this.k);};function K256(){MPrime.call(this,'k256','ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f');}inherits(K256,MPrime);K256.prototype.split=function split(input,output){var mask=0x3fffff;var outLen=Math.min(input.length,9);for(var i=0;i<outLen;i++)output.words[i]=input.words[i];output.length=outLen;if(input.length<=9){input.words[0]=0;input.length=1;return;}var prev=input.words[9];output.words[output.length++]=prev&mask;for(var i=10;i<input.length;i++){var next=input.words[i];input.words[i-10]=(next&mask)<<4|prev>>>22;prev=next;}input.words[i-10]=prev>>>22;input.length-=9;};K256.prototype.imulK=function imulK(num){num.words[num.length]=0;num.words[num.length+1]=0;num.length+=2;var hi;var lo=0;for(var i=0;i<num.length;i++){var w=num.words[i];hi=w*0x40;lo+=w*0x3d1;hi+=lo/0x4000000|0;lo&=0x3ffffff;num.words[i]=lo;lo=hi;}if(num.words[num.length-1]===0){num.length--;if(num.words[num.length-1]===0)num.length--;}return num;};function P224(){MPrime.call(this,'p224','ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001');}inherits(P224,MPrime);function P192(){MPrime.call(this,'p192','ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff');}inherits(P192,MPrime);function P25519(){MPrime.call(this,'25519','7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed');}inherits(P25519,MPrime);P25519.prototype.imulK=function imulK(num){var carry=0;for(var i=0;i<num.length;i++){var hi=num.words[i]*0x13+carry;var lo=hi&0x3ffffff;hi>>>=26;num.words[i]=lo;carry=hi;}if(carry!==0)num.words[num.length++]=carry;return num;};BN._prime=function prime(name){if(primes[name])return primes[name];var prime;if(name==='k256')prime=new K256();else if(name==='p224')prime=new P224();else if(name==='p192')prime=new P192();else if(name==='p25519')prime=new P25519();else throw new Error('Unknown prime '+name);primes[name]=prime;return prime;};function Red(m){if(typeof m==='string'){var prime=BN._prime(m);this.m=prime.p;this.prime=prime;}else{this.m=m;this.prime=null;}}Red.prototype._verify1=function _verify1(a){assert(!a.sign,'red works only with positives');assert(a.red,'red works only with red numbers');};Red.prototype._verify2=function _verify2(a,b){assert(!a.sign&&!b.sign,'red works only with positives');assert(a.red&&a.red===b.red,'red works only with red numbers');};Red.prototype.imod=function imod(a){if(this.prime)return this.prime.ireduce(a)._forceRed(this);return a.mod(this.m)._forceRed(this);};Red.prototype.neg=function neg(a){var r=a.clone();r.sign=!r.sign;return r.iadd(this.m)._forceRed(this);};Red.prototype.add=function add(a,b){this._verify2(a,b);var res=a.add(b);if(res.cmp(this.m)>=0)res.isub(this.m);return res._forceRed(this);};Red.prototype.iadd=function iadd(a,b){this._verify2(a,b);var res=a.iadd(b);if(res.cmp(this.m)>=0)res.isub(this.m);return res;};Red.prototype.sub=function sub(a,b){this._verify2(a,b);var res=a.sub(b);if(res.cmpn(0)<0)res.iadd(this.m);return res._forceRed(this);};Red.prototype.isub=function isub(a,b){this._verify2(a,b);var res=a.isub(b);if(res.cmpn(0)<0)res.iadd(this.m);return res;};Red.prototype.shl=function shl(a,num){this._verify1(a);return this.imod(a.shln(num));};Red.prototype.imul=function imul(a,b){this._verify2(a,b);return this.imod(a.imul(b));};Red.prototype.mul=function mul(a,b){this._verify2(a,b);return this.imod(a.mul(b));};Red.prototype.isqr=function isqr(a){return this.imul(a,a);};Red.prototype.sqr=function sqr(a){return this.mul(a,a);};Red.prototype.sqrt=function sqrt(a){if(a.cmpn(0)===0)return a.clone();var mod3=this.m.andln(3);assert(mod3%2===1);if(mod3===3){var pow=this.m.add(new BN(1)).ishrn(2);var r=this.pow(a,pow);return r;}var q=this.m.subn(1);var s=0;while(q.cmpn(0)!==0&&q.andln(1)===0){s++;q.ishrn(1);}assert(q.cmpn(0)!==0);var one=new BN(1).toRed(this);var nOne=one.redNeg();var lpow=this.m.subn(1).ishrn(1);var z=this.m.bitLength();z=new BN(2*z*z).toRed(this);while(this.pow(z,lpow).cmp(nOne)!==0)z.redIAdd(nOne);var c=this.pow(z,q);var r=this.pow(a,q.addn(1).ishrn(1));var t=this.pow(a,q);var m=s;while(t.cmp(one)!==0){var tmp=t;for(var i=0;tmp.cmp(one)!==0;i++)tmp=tmp.redSqr();assert(i<m);var b=this.pow(c,new BN(1).ishln(m-i-1));r=r.redMul(b);c=b.redSqr();t=t.redMul(c);m=i;}return r;};Red.prototype.invm=function invm(a){var inv=a._invmp(this.m);if(inv.sign){inv.sign=false;return this.imod(inv).redNeg();}else{return this.imod(inv);}};Red.prototype.pow=function pow(a,num){var w=[];if(num.cmpn(0)===0)return new BN(1);var q=num.clone();while(q.cmpn(0)!==0){w.push(q.andln(1));q.ishrn(1);}var res=a;for(var i=0;i<w.length;i++,res=this.sqr(res))if(w[i]!==0)break;if(++i<w.length){for(var q=this.sqr(res);i<w.length;i++,q=this.sqr(q)){if(w[i]===0)continue;res=this.mul(res,q);}}return res;};Red.prototype.convertTo=function convertTo(num){return num.clone();};Red.prototype.convertFrom=function convertFrom(num){var res=num.clone();res.red=null;return res;};BN.mont=function mont(num){return new Mont(num);};function Mont(m){Red.call(this,m);this.shift=this.m.bitLength();if(this.shift%26!==0)this.shift+=26-this.shift%26;this.r=new BN(1).ishln(this.shift);this.r2=this.imod(this.r.sqr());this.rinv=this.r._invmp(this.m);this.minv=this.rinv.mul(this.r).isubn(1).div(this.m);this.minv.sign=true;this.minv=this.minv.mod(this.r);}inherits(Mont,Red);Mont.prototype.convertTo=function convertTo(num){return this.imod(num.shln(this.shift));};Mont.prototype.convertFrom=function convertFrom(num){var r=this.imod(num.mul(this.rinv));r.red=null;return r;};Mont.prototype.imul=function imul(a,b){if(a.cmpn(0)===0||b.cmpn(0)===0){a.words[0]=0;a.length=1;return a;}var t=a.imul(b);var c=t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);var u=t.isub(c).ishrn(this.shift);var res=u;if(u.cmp(this.m)>=0)res=u.isub(this.m);else if(u.cmpn(0)<0)res=u.iadd(this.m);return res._forceRed(this);};Mont.prototype.mul=function mul(a,b){if(a.cmpn(0)===0||b.cmpn(0)===0)return new BN(0)._forceRed(this);var t=a.mul(b);var c=t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);var u=t.isub(c).ishrn(this.shift);var res=u;if(u.cmp(this.m)>=0)res=u.isub(this.m);else if(u.cmpn(0)<0)res=u.iadd(this.m);return res._forceRed(this);};Mont.prototype.invm=function invm(a){var res=this.imod(a._invmp(this.m).mul(this.r2));return res._forceRed(this);};})(false||module,this);},2422:function(module,__unusedexports,__webpack_require__){module.exports=__webpack_require__(6886);},2423:function(module){"use strict";module.exports=uniqueBy;function uniqueBy(arr,getValue){var unique=[];var found={};if(typeof getValue!=='function'){var key=getValue;getValue=function defaultGetValue(obj){return obj[key];};}arr.forEach(function addUniques(obj){var value=getValue(obj);if(!found[value]){found[value]=true;unique.push(obj);}});return unique;}},2427:function(module,__unusedexports,__webpack_require__){const lazy=__webpack_require__(8643);const typef=__webpack_require__(2809);const OPS=__webpack_require__(9710);const bech32=__webpack_require__(9862);const bcrypto=__webpack_require__(5475);const bscript=__webpack_require__(5099);const BITCOIN_NETWORK=__webpack_require__(1215).bitcoin;const EMPTY_BUFFER=Buffer.alloc(0);function stacksEqual(a,b){if(a.length!==b.length)return false;return a.every(function(x,i){return x.equals(b[i]);});}function p2wsh(a,opts){if(!a.address&&!a.hash&&!a.output&&!a.redeem&&!a.witness)throw new TypeError('Not enough data');opts=Object.assign({validate:true},opts||{});typef({network:typef.maybe(typef.Object),address:typef.maybe(typef.String),hash:typef.maybe(typef.BufferN(32)),output:typef.maybe(typef.BufferN(34)),redeem:typef.maybe({input:typef.maybe(typef.Buffer),network:typef.maybe(typef.Object),output:typef.maybe(typef.Buffer),witness:typef.maybe(typef.arrayOf(typef.Buffer))}),input:typef.maybe(typef.BufferN(0)),witness:typef.maybe(typef.arrayOf(typef.Buffer))},a);const _address=lazy.value(function(){const result=bech32.decode(a.address);const version=result.words.shift();const data=bech32.fromWords(result.words);return{version,prefix:result.prefix,data:Buffer.from(data)};});const _rchunks=lazy.value(function(){return bscript.decompile(a.redeem.input);});let network=a.network;if(!network){network=a.redeem&&a.redeem.network||BITCOIN_NETWORK;}const o={network};lazy.prop(o,'address',function(){if(!o.hash)return;const words=bech32.toWords(o.hash);words.unshift(0x00);return bech32.encode(network.bech32,words);});lazy.prop(o,'hash',function(){if(a.output)return a.output.slice(2);if(a.address)return _address().data;if(o.redeem&&o.redeem.output)return bcrypto.sha256(o.redeem.output);});lazy.prop(o,'output',function(){if(!o.hash)return;return bscript.compile([OPS.OP_0,o.hash]);});lazy.prop(o,'redeem',function(){if(!a.witness)return;return{output:a.witness[a.witness.length-1],input:EMPTY_BUFFER,witness:a.witness.slice(0,-1)};});lazy.prop(o,'input',function(){if(!o.witness)return;return EMPTY_BUFFER;});lazy.prop(o,'witness',function(){if(a.redeem&&a.redeem.input&&a.redeem.input.length>0&&a.redeem.output&&a.redeem.output.length>0){const stack=bscript.toStack(_rchunks());o.redeem=Object.assign({witness:stack},a.redeem);o.redeem.input=EMPTY_BUFFER;return[].concat(stack,a.redeem.output);}if(!a.redeem)return;if(!a.redeem.output)return;if(!a.redeem.witness)return;return[].concat(a.redeem.witness,a.redeem.output);});if(opts.validate){let hash;if(a.address){if(_address().prefix!==network.bech32)throw new TypeError('Invalid prefix or Network mismatch');if(_address().version!==0x00)throw new TypeError('Invalid address version');if(_address().data.length!==32)throw new TypeError('Invalid address data');hash=_address().data;}if(a.hash){if(hash&&!hash.equals(a.hash))throw new TypeError('Hash mismatch');else hash=a.hash;}if(a.output){if(a.output.length!==34||a.output[0]!==OPS.OP_0||a.output[1]!==0x20)throw new TypeError('Output is invalid');const hash2=a.output.slice(2);if(hash&&!hash.equals(hash2))throw new TypeError('Hash mismatch');else hash=hash2;}if(a.redeem){if(a.redeem.network&&a.redeem.network!==network)throw new TypeError('Network mismatch');if(a.redeem.input&&a.redeem.input.length>0&&a.redeem.witness&&a.redeem.witness.length>0)throw new TypeError('Ambiguous witness source');if(a.redeem.output){if(bscript.decompile(a.redeem.output).length===0)throw new TypeError('Redeem.output is invalid');const hash2=bcrypto.sha256(a.redeem.output);if(hash&&!hash.equals(hash2))throw new TypeError('Hash mismatch');else hash=hash2;}if(a.redeem.input&&!bscript.isPushOnly(_rchunks()))throw new TypeError('Non push-only scriptSig');if(a.witness&&a.redeem.witness&&!stacksEqual(a.witness,a.redeem.witness))throw new TypeError('Witness and redeem.witness mismatch');}if(a.witness){if(a.redeem&&a.redeem.output&&!a.redeem.output.equals(a.witness[a.witness.length-1]))throw new TypeError('Witness and redeem.output mismatch');}}return Object.assign(o,a);}module.exports=p2wsh;},2437:function(module,__unusedexports,__webpack_require__){"use strict";var Buffer=__webpack_require__(1173).Buffer;module.exports={utf8:{type:"_internal",bomAware:true},cesu8:{type:"_internal",bomAware:true},unicode11utf8:"utf8",ucs2:{type:"_internal",bomAware:true},utf16le:"ucs2",binary:{type:"_internal"},base64:{type:"_internal"},hex:{type:"_internal"},_internal:InternalCodec};function InternalCodec(codecOptions,iconv){this.enc=codecOptions.encodingName;this.bomAware=codecOptions.bomAware;if(this.enc==="base64")this.encoder=InternalEncoderBase64;else if(this.enc==="cesu8"){this.enc="utf8";this.encoder=InternalEncoderCesu8;if(Buffer.from('eda0bdedb2a9','hex').toString()!==''){this.decoder=InternalDecoderCesu8;this.defaultCharUnicode=iconv.defaultCharUnicode;}}}InternalCodec.prototype.encoder=InternalEncoder;InternalCodec.prototype.decoder=InternalDecoder;var StringDecoder=__webpack_require__(552).StringDecoder;if(!StringDecoder.prototype.end)StringDecoder.prototype.end=function(){};function InternalDecoder(options,codec){StringDecoder.call(this,codec.enc);}InternalDecoder.prototype=StringDecoder.prototype;function InternalEncoder(options,codec){this.enc=codec.enc;}InternalEncoder.prototype.write=function(str){return Buffer.from(str,this.enc);};InternalEncoder.prototype.end=function(){};function InternalEncoderBase64(options,codec){this.prevStr='';}InternalEncoderBase64.prototype.write=function(str){str=this.prevStr+str;var completeQuads=str.length-str.length%4;this.prevStr=str.slice(completeQuads);str=str.slice(0,completeQuads);return Buffer.from(str,"base64");};InternalEncoderBase64.prototype.end=function(){return Buffer.from(this.prevStr,"base64");};function InternalEncoderCesu8(options,codec){}InternalEncoderCesu8.prototype.write=function(str){var buf=Buffer.alloc(str.length*3),bufIdx=0;for(var i=0;i<str.length;i++){var charCode=str.charCodeAt(i);if(charCode<0x80)buf[bufIdx++]=charCode;else if(charCode<0x800){buf[bufIdx++]=0xC0+(charCode>>>6);buf[bufIdx++]=0x80+(charCode&0x3f);}else{buf[bufIdx++]=0xE0+(charCode>>>12);buf[bufIdx++]=0x80+(charCode>>>6&0x3f);buf[bufIdx++]=0x80+(charCode&0x3f);}}return buf.slice(0,bufIdx);};InternalEncoderCesu8.prototype.end=function(){};function InternalDecoderCesu8(options,codec){this.acc=0;this.contBytes=0;this.accBytes=0;this.defaultCharUnicode=codec.defaultCharUnicode;}InternalDecoderCesu8.prototype.write=function(buf){var acc=this.acc,contBytes=this.contBytes,accBytes=this.accBytes,res='';for(var i=0;i<buf.length;i++){var curByte=buf[i];if((curByte&0xC0)!==0x80){if(contBytes>0){res+=this.defaultCharUnicode;contBytes=0;}if(curByte<0x80){res+=String.fromCharCode(curByte);}else if(curByte<0xE0){acc=curByte&0x1F;contBytes=1;accBytes=1;}else if(curByte<0xF0){acc=curByte&0x0F;contBytes=2;accBytes=1;}else{res+=this.defaultCharUnicode;}}else{if(contBytes>0){acc=acc<<6|curByte&0x3f;contBytes--;accBytes++;if(contBytes===0){if(accBytes===2&&acc<0x80&&acc>0)res+=this.defaultCharUnicode;else if(accBytes===3&&acc<0x800)res+=this.defaultCharUnicode;else res+=String.fromCharCode(acc);}}else{res+=this.defaultCharUnicode;}}}this.acc=acc;this.contBytes=contBytes;this.accBytes=accBytes;return res;};InternalDecoderCesu8.prototype.end=function(){var res=0;if(this.contBytes>0)res+=this.defaultCharUnicode;return res;};},2442:function(module,__unusedexports,__webpack_require__){"use strict";var crypto=__webpack_require__(2984);var BufferUtil=__webpack_require__(9657);var $=__webpack_require__(5107);var Hash=module.exports;Hash.sha1=function(buf){$.checkArgument(BufferUtil.isBuffer(buf));return crypto.createHash('sha1').update(buf).digest();};Hash.sha1.blocksize=512;Hash.sha256=function(buf){$.checkArgument(BufferUtil.isBuffer(buf));return crypto.createHash('sha256').update(buf).digest();};Hash.sha256.blocksize=512;Hash.sha256sha256=function(buf){$.checkArgument(BufferUtil.isBuffer(buf));return Hash.sha256(Hash.sha256(buf));};Hash.ripemd160=function(buf){$.checkArgument(BufferUtil.isBuffer(buf));return crypto.createHash('ripemd160').update(buf).digest();};Hash.sha256ripemd160=function(buf){$.checkArgument(BufferUtil.isBuffer(buf));return Hash.ripemd160(Hash.sha256(buf));};Hash.sha512=function(buf){$.checkArgument(BufferUtil.isBuffer(buf));return crypto.createHash('sha512').update(buf).digest();};Hash.sha512.blocksize=1024;Hash.hmac=function(hashf,data,key){$.checkArgument(BufferUtil.isBuffer(data));$.checkArgument(BufferUtil.isBuffer(key));$.checkArgument(hashf.blocksize);var blocksize=hashf.blocksize/8;if(key.length>blocksize){key=hashf(key);}else if(key<blocksize){var fill=new Buffer(blocksize);fill.fill(0);key.copy(fill);key=fill;}var o_key=new Buffer(blocksize);o_key.fill(0x5c);var i_key=new Buffer(blocksize);i_key.fill(0x36);var o_key_pad=new Buffer(blocksize);var i_key_pad=new Buffer(blocksize);for(var i=0;i<blocksize;i++){o_key_pad[i]=o_key[i]^key[i];i_key_pad[i]=i_key[i]^key[i];}return hashf(Buffer.concat([o_key_pad,hashf(Buffer.concat([i_key_pad,data]))]));};Hash.sha256hmac=function(data,key){return Hash.hmac(Hash.sha256,data,key);};Hash.sha512hmac=function(data,key){return Hash.hmac(Hash.sha512,data,key);};},2445:function(__unusedmodule,exports){"use strict";const second=exports.second=1000;const minute=exports.minute=60*second;const hour=exports.hour=60*minute;exports.MAX_RECORD_AGE=36*hour;exports.PROTOCOL_DHT='/ipfs/kad/1.0.0';exports.PROVIDERS_KEY_PREFIX='/providers/';exports.PROVIDERS_LRU_CACHE_SIZE=256;exports.PROVIDERS_VALIDITY=24*hour;exports.PROVIDERS_CLEANUP_INTERVAL=hour;exports.READ_MESSAGE_TIMEOUT=minute;exports.K=20;exports.ALPHA=3;exports.DISJOINT_PATHS=10;exports.maxMessageSize=2<<22;exports.defaultRandomWalk={enabled:true,queriesPerPeriod:1,interval:5*minute,timeout:10*second};},2447:function(__unusedmodule,exports){"use strict";exports.toCallback=doWork=>{return function(input,callback){let res;try{res=doWork(input);}catch(err){process.nextTick(callback,err);return;}process.nextTick(callback,null,res);};};exports.toBuf=(doWork,other)=>input=>{let result=doWork(input,other);return Buffer.from(result,'hex');};exports.fromString=(doWork,other)=>_input=>{const input=Buffer.isBuffer(_input)?_input.toString():_input;return doWork(input,other);};exports.fromNumberTo32BitBuf=(doWork,other)=>input=>{let number=doWork(input,other);const bytes=new Array(4);for(let i=0;i<4;i++){bytes[i]=number&0xff;number=number>>8;}return Buffer.from(bytes);};},2455:function(module,__unusedexports,__webpack_require__){"use strict";module.exports=PassThrough;var Transform=__webpack_require__(3509);var util=__webpack_require__(5548);util.inherits=__webpack_require__(92);util.inherits(PassThrough,Transform);function PassThrough(options){if(!(this instanceof PassThrough))return new PassThrough(options);Transform.call(this,options);}PassThrough.prototype._transform=function(chunk,encoding,cb){cb(null,chunk);};},2456:function(module){function overArg(func,transform){return function(arg){return func(transform(arg));};}module.exports=overArg;},2457:function(__unusedmodule,exports,__webpack_require__){"use strict";const mh=__webpack_require__(9424);const lp=__webpack_require__(8585);const pull=__webpack_require__(418);const values=__webpack_require__(5130);const collect=__webpack_require__(8342);const crypto=__webpack_require__(318);const parallel=__webpack_require__(4876);exports.exchanges=['P-256','P-384','P-521'];exports.ciphers=['AES-256','AES-128'];exports.hashes=['SHA256','SHA512'];exports.theBest=(order,p1,p2)=>{let first;let second;if(order<0){first=p2;second=p1;}else if(order>0){first=p1;second=p2;}else{return p1[0];}for(let firstCandidate of first){for(let secondCandidate of second){if(firstCandidate===secondCandidate){return firstCandidate;}}}throw new Error('No algorithms in common!');};exports.makeMacAndCipher=(target,callback)=>{parallel([cb=>makeMac(target.hashT,target.keys.macKey,cb),cb=>makeCipher(target.cipherT,target.keys.iv,target.keys.cipherKey,cb)],(err,macAndCipher)=>{if(err){return callback(err);}target.mac=macAndCipher[0];target.cipher=macAndCipher[1];callback();});};function makeMac(hash,key,callback){crypto.hmac.create(hash,key,callback);}function makeCipher(cipherType,iv,key,callback){if(cipherType==='AES-128'||cipherType==='AES-256'){return crypto.aes.create(key,iv,callback);}callback(new Error(`unrecognized cipher type: ${cipherType}`));}exports.selectBest=(local,remote,cb)=>{exports.digest(Buffer.concat([remote.pubKeyBytes,local.nonce]),(err,oh1)=>{if(err){return cb(err);}exports.digest(Buffer.concat([local.pubKeyBytes,remote.nonce]),(err,oh2)=>{if(err){return cb(err);}const order=Buffer.compare(oh1,oh2);if(order===0){return cb(new Error('you are trying to talk to yourself'));}cb(null,{curveT:exports.theBest(order,local.exchanges,remote.exchanges),cipherT:exports.theBest(order,local.ciphers,remote.ciphers),hashT:exports.theBest(order,local.hashes,remote.hashes),order});});});};exports.digest=(buf,cb)=>{mh.digest(buf,'sha2-256',buf.length,cb);};exports.write=function write(state,msg,cb){cb=cb||(()=>{});pull(values([msg]),lp.encode({fixed:true,bytes:4}),collect((err,res)=>{if(err){return cb(err);}state.shake.write(res[0]);cb();}));};exports.read=function read(reader,cb){lp.decodeFromReader(reader,{fixed:true,bytes:4},cb);};},2463:function(module,__unusedexports,__webpack_require__){var nativeCreate=__webpack_require__(6119);var HASH_UNDEFINED='__lodash_hash_undefined__';var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function hashGet(key){var data=this.__data__;if(nativeCreate){var result=data[key];return result===HASH_UNDEFINED?undefined:result;}return hasOwnProperty.call(data,key)?data[key]:undefined;}module.exports=hashGet;},2475:function(module,__unusedexports,__webpack_require__){const bscript=__webpack_require__(5099);const types=__webpack_require__(8781);const OPS=__webpack_require__(9710);const OP_INT_BASE=OPS.OP_RESERVED;function check(script,allowIncomplete){const chunks=bscript.decompile(script);if(chunks.length<4)return false;if(chunks[chunks.length-1]!==OPS.OP_CHECKMULTISIG)return false;if(!types.Number(chunks[0]))return false;if(!types.Number(chunks[chunks.length-2]))return false;const m=chunks[0]-OP_INT_BASE;const n=chunks[chunks.length-2]-OP_INT_BASE;if(m<=0)return false;if(n>16)return false;if(m>n)return false;if(n!==chunks.length-3)return false;if(allowIncomplete)return true;const keys=chunks.slice(1,-2);return keys.every(bscript.isCanonicalPubKey);}check.toJSON=function(){return'multi-sig output';};module.exports={check};},2479:function(module,__unusedexports,__webpack_require__){"use strict";var base58=__webpack_require__(4967);var Buffer=__webpack_require__(7572).Buffer;module.exports=function(checksumFn){function encode(payload){var checksum=checksumFn(payload);return base58.encode(Buffer.concat([payload,checksum],payload.length+4));}function decodeRaw(buffer){var payload=buffer.slice(0,-4);var checksum=buffer.slice(-4);var newChecksum=checksumFn(payload);if(checksum[0]^newChecksum[0]|checksum[1]^newChecksum[1]|checksum[2]^newChecksum[2]|checksum[3]^newChecksum[3])return;return payload;}function decodeUnsafe(string){var buffer=base58.decodeUnsafe(string);if(!buffer)return;return decodeRaw(buffer);}function decode(string){var buffer=base58.decode(string);var payload=decodeRaw(buffer,checksumFn);if(!payload)throw new Error('Invalid checksum');return payload;}return{encode:encode,decode:decode,decodeUnsafe:decodeUnsafe};};},2493:function(module){module.exports={"_args":[["elliptic@3.0.3","/Users/romuloalves/Projects/tramonto/TramontoOne/nodejs-assets/nodejs-project"]],"_from":"elliptic@3.0.3","_id":"elliptic@3.0.3","_inBundle":false,"_integrity":"sha1-hlybQgv75VAGuflp+XoNLESWZZU=","_location":"/zcash-bitcore-lib/elliptic","_phantomChildren":{"inherits":"2.0.1"},"_requested":{"type":"version","registry":true,"raw":"elliptic@3.0.3","name":"elliptic","escapedName":"elliptic","rawSpec":"3.0.3","saveSpec":null,"fetchSpec":"3.0.3"},"_requiredBy":["/zcash-bitcore-lib"],"_resolved":"https://registry.npmjs.org/elliptic/-/elliptic-3.0.3.tgz","_spec":"3.0.3","_where":"/Users/romuloalves/Projects/tramonto/TramontoOne/nodejs-assets/nodejs-project","author":{"name":"Fedor Indutny","email":"fedor@indutny.com"},"bugs":{"url":"https://github.com/indutny/elliptic/issues"},"dependencies":{"bn.js":"^2.0.0","brorand":"^1.0.1","hash.js":"^1.0.0","inherits":"^2.0.1"},"description":"EC cryptography","devDependencies":{"browserify":"^3.44.2","jscs":"^1.11.3","jshint":"^2.6.0","mocha":"^2.1.0","uglify-js":"^2.4.13"},"homepage":"https://github.com/indutny/elliptic","keywords":["EC","Elliptic","curve","Cryptography"],"license":"MIT","main":"lib/elliptic.js","name":"elliptic","repository":{"type":"git","url":"git+ssh://git@github.com/indutny/elliptic.git"},"scripts":{"test":"make lint && mocha --reporter=spec test/*-test.js"},"version":"3.0.3"};},2497:function(module,__unusedexports,__webpack_require__){"use strict";const varint=__webpack_require__(2572);module.exports=buf=>{if(!Buffer.isBuffer(buf)){throw new Error('arg needs to be a buffer');}let result=[];while(buf.length>0){const num=varint.decode(buf);result.push(num);buf=buf.slice(varint.decode.bytes);}return result;};},2500:function(module,__unusedexports,__webpack_require__){"use strict";var _=__webpack_require__(8154);module.exports=function(){var output={};_.toArray(arguments).reverse().forEach(function(item){_.mergeWith(output,item,function(objectValue,sourceValue){return _.isArray(sourceValue)?sourceValue:undefined;});});return output;};},2501:function(module,__unusedexports,__webpack_require__){"use strict";const pull=__webpack_require__(418);const values=__webpack_require__(5130);const lp=__webpack_require__(8585);const msg=__webpack_require__(8933);module.exports=(conn,pInfoSelf)=>{conn.getObservedAddrs((err,observedAddrs)=>{if(err){return;}observedAddrs=observedAddrs[0];let publicKey=Buffer.alloc(0);if(pInfoSelf.id.pubKey){publicKey=pInfoSelf.id.pubKey.bytes;}const msgSend=msg.encode({protocolVersion:'ipfs/0.1.0',agentVersion:'na',publicKey:publicKey,listenAddrs:pInfoSelf.multiaddrs.toArray().map(ma=>ma.buffer),observedAddr:observedAddrs?observedAddrs.buffer:Buffer.from('')});pull(values([msgSend]),lp.encode(),conn);});};},2506:function(module){module.exports=[["0","\u0000",127],["8ea1","",62],["a1a1","",9,""],["a2a1",""],["a2ba",""],["a2ca",""],["a2dc",""],["a2f2",""],["a2fe",""],["a3b0","",9],["a3c1","",25],["a3e1","",25],["a4a1","",82],["a5a1","",85],["a6a1","",16,"",6],["a6c1","",16,"",6],["a7a1","",5,"",25],["a7d1","",5,"",25],["a8a1",""],["ada1","",19,"",9],["adc0",""],["addf","",4,""],["b0a1",""],["b1a1",""],["b2a1",""],["b3a1",""],["b4a1",""],["b5a1",""],["b6a1",""],["b7a1",""],["b8a1",""],["b9a1",""],["baa1",""],["bba1",""],["bca1",""],["bda1",""],["bea1",""],["bfa1",""],["c0a1",""],["c1a1",""],["c2a1",""],["c3a1",""],["c4a1",""],["c5a1",""],["c6a1",""],["c7a1",""],["c8a1",""],["c9a1",""],["caa1",""],["cba1",""],["cca1",""],["cda1",""],["cea1",""],["cfa1",""],["d0a1",""],["d1a1",""],["d2a1",""],["d3a1",""],["d4a1",""],["d5a1",""],["d6a1",""],["d7a1",""],["d8a1",""],["d9a1",""],["daa1",""],["dba1",""],["dca1",""],["dda1",""],["dea1",""],["dfa1",""],["e0a1",""],["e1a1",""],["e2a1",""],["e3a1",""],["e4a1",""],["e5a1",""],["e6a1",""],["e7a1",""],["e8a1",""],["e9a1",""],["eaa1",""],["eba1",""],["eca1",""],["eda1",""],["eea1",""],["efa1",""],["f0a1",""],["f1a1",""],["f2a1",""],["f3a1",""],["f4a1",""],["f9a1",""],["faa1",""],["fba1",""],["fca1",""],["fcf1","",9,""],["8fa2af",""],["8fa2c2",""],["8fa2eb",""],["8fa6e1",""],["8fa6e7",""],["8fa6e9",""],["8fa6ec",""],["8fa6f1",""],["8fa7c2","",10,""],["8fa7f2","",10,""],["8fa9a1",""],["8fa9a4",""],["8fa9a6",""],["8fa9a8",""],["8fa9ab",""],["8fa9af",""],["8fa9c1",""],["8faaa1",""],["8faaba",""],["8faba1",""],["8fabbd",""],["8fabc5",""],["8fb0a1",""],["8fb1a1",""],["8fb2a1","",4,""],["8fb3a1",""],["8fb4a1",""],["8fb5a1",""],["8fb6a1","",5,"",4,""],["8fb7a1","",4,""],["8fb8a1",""],["8fb9a1",""],["8fbaa1","",4,""],["8fbba1",""],["8fbca1","",4,""],["8fbda1","",4,""],["8fbea1","",4,""],["8fbfa1",""],["8fc0a1",""],["8fc1a1",""],["8fc2a1",""],["8fc3a1","",4,""],["8fc4a1",""],["8fc5a1",""],["8fc6a1",""],["8fc7a1",""],["8fc8a1",""],["8fc9a1","",4,"",4,""],["8fcaa1",""],["8fcba1",""],["8fcca1","",9,""],["8fcda1","",5,""],["8fcea1","",6,""],["8fcfa1",""],["8fd0a1",""],["8fd1a1",""],["8fd2a1","",5],["8fd3a1",""],["8fd4a1","",4,""],["8fd5a1",""],["8fd6a1",""],["8fd7a1",""],["8fd8a1",""],["8fd9a1","",4,"",6,""],["8fdaa1","",4,""],["8fdba1","",6,""],["8fdca1","",4,""],["8fdda1","",4,""],["8fdea1","",4,""],["8fdfa1",""],["8fe0a1",""],["8fe1a1","",4,""],["8fe2a1",""],["8fe3a1","",5,"",4,""],["8fe4a1","",4,""],["8fe5a1","",4,""],["8fe6a1",""],["8fe7a1",""],["8fe8a1","",4,""],["8fe9a1","",4],["8feaa1","",4,""],["8feba1","",4,""],["8feca1",""],["8feda1","",4,"",4,""]];},2508:function(module,__unusedexports,__webpack_require__){"use strict";const multiaddr=__webpack_require__(3187);const Connection=__webpack_require__(378).Connection;const os=__webpack_require__(4316);const includes=__webpack_require__(5001);const net=__webpack_require__(1939);const toPull=__webpack_require__(4138);const EventEmitter=__webpack_require__(4859).EventEmitter;const debug=__webpack_require__(3116);const log=debug('libp2p:tcp:listen');const getMultiaddr=__webpack_require__(764);const IPFS_CODE=421;const CLOSE_TIMEOUT=2000;function noop(){}module.exports=handler=>{const listener=new EventEmitter();const server=net.createServer(socket=>{socket.on('error',noop);const addr=getMultiaddr(socket);if(!addr){if(socket.remoteAddress===undefined){log('connection closed before p2p connection made');}else{log('error interpreting incoming p2p connection');}return;}log('new connection',addr.toString());const s=toPull.duplex(socket);s.getObservedAddrs=cb=>{cb(null,[addr]);};trackSocket(server,socket);const conn=new Connection(s);handler(conn);listener.emit('connection',conn);});server.on('listening',()=>listener.emit('listening'));server.on('error',err=>listener.emit('error',err));server.on('close',()=>listener.emit('close'));server.__connections={};listener.close=(options,callback)=>{if(typeof options==='function'){callback=options;options={};}callback=callback||noop;options=options||{};const timeout=setTimeout(()=>{log('unable to close graciously, destroying conns');Object.keys(server.__connections).forEach(key=>{log('destroying %s',key);server.__connections[key].destroy();});},options.timeout||CLOSE_TIMEOUT);server.close(callback);server.once('close',()=>{clearTimeout(timeout);});};let ipfsId;let listeningAddr;listener.listen=(ma,callback)=>{listeningAddr=ma;if(includes(ma.protoNames(),'ipfs')){ipfsId=getIpfsId(ma);listeningAddr=ma.decapsulate('ipfs');}const lOpts=listeningAddr.toOptions();log('Listening on %s %s',lOpts.port,lOpts.host);return server.listen(lOpts.port,lOpts.host,callback);};listener.getAddrs=callback=>{const multiaddrs=[];const address=server.address();if(!address){return callback(new Error('Listener is not ready yet'));}if(listeningAddr.toString().indexOf('ip4')!==-1){let m=listeningAddr.decapsulate('tcp');m=m.encapsulate('/tcp/'+address.port);if(ipfsId){m=m.encapsulate('/ipfs/'+ipfsId);}if(m.toString().indexOf('0.0.0.0')!==-1){const netInterfaces=os.networkInterfaces();Object.keys(netInterfaces).forEach(niKey=>{netInterfaces[niKey].forEach(ni=>{if(ni.family==='IPv4'){multiaddrs.push(multiaddr(m.toString().replace('0.0.0.0',ni.address)));}});});}else{multiaddrs.push(m);}}if(address.family==='IPv6'){let ma=multiaddr('/ip6/'+address.address+'/tcp/'+address.port);if(ipfsId){ma=ma.encapsulate('/ipfs/'+ipfsId);}multiaddrs.push(ma);}callback(null,multiaddrs);};return listener;};function getIpfsId(ma){return ma.stringTuples().filter(tuple=>{return tuple[0]===IPFS_CODE;})[0][1];}function trackSocket(server,socket){const key=`${socket.remoteAddress}:${socket.remotePort}`;server.__connections[key]=socket;socket.on('close',()=>{delete server.__connections[key];});}},2511:function(module,__unusedexports,__webpack_require__){"use strict";const inherits=__webpack_require__(92);const DEREncoder=__webpack_require__(1713);function PEMEncoder(entity){DEREncoder.call(this,entity);this.enc='pem';}inherits(PEMEncoder,DEREncoder);module.exports=PEMEncoder;PEMEncoder.prototype.encode=function encode(data,options){const buf=DEREncoder.prototype.encode.call(this,data);const p=buf.toString('base64');const out=['-----BEGIN '+options.label+'-----'];for(let i=0;i<p.length;i+=64)out.push(p.slice(i,i+64));out.push('-----END '+options.label+'-----');return out.join('\n');};},2512:function(module,__unusedexports,__webpack_require__){var util=__webpack_require__(649);function BufferPool(initialSize,growStrategy,shrinkStrategy){if(this instanceof BufferPool===false){throw new TypeError("Classes can't be function-called");}if(typeof initialSize==='function'){shrinkStrategy=growStrategy;growStrategy=initialSize;initialSize=0;}else if(typeof initialSize==='undefined'){initialSize=0;}this._growStrategy=(growStrategy||function(db,size){return db.used+size;}).bind(null,this);this._shrinkStrategy=(shrinkStrategy||function(db){return initialSize;}).bind(null,this);this._buffer=initialSize?new Buffer(initialSize):null;this._offset=0;this._used=0;this._changeFactor=0;this.__defineGetter__('size',function(){return this._buffer==null?0:this._buffer.length;});this.__defineGetter__('used',function(){return this._used;});}BufferPool.prototype.get=function(length){if(this._buffer==null||this._offset+length>this._buffer.length){var newBuf=new Buffer(this._growStrategy(length));this._buffer=newBuf;this._offset=0;}this._used+=length;var buf=this._buffer.slice(this._offset,this._offset+length);this._offset+=length;return buf;};BufferPool.prototype.reset=function(forceNewBuffer){var len=this._shrinkStrategy();if(len<this.size)this._changeFactor-=1;if(forceNewBuffer||this._changeFactor<-2){this._changeFactor=0;this._buffer=len?new Buffer(len):null;}this._offset=0;this._used=0;};module.exports=BufferPool;},2521:function(module,__unusedexports,__webpack_require__){var asn=__webpack_require__(3771);var factor=__webpack_require__(8986);var one=new asn.bignum(1);function urlize(base64){return base64.replace(/\+/g,'-').replace(/\//g,'_').replace(/=/g,'');}function hex2b64url(str){return urlize(Buffer.from(str,'hex').toString('base64'));}function fromPEM(data){var text=data.toString().split(/(\r\n|\r|\n)+/g);text=text.filter(function(line){return line.trim().length!==0;});text=text.slice(1,-1).join('');return Buffer.from(text.replace(/[^\w\d\+\/=]+/g,''),'base64');}var RSAPublicKey=asn.define('RSAPublicKey',function(){this.seq().obj(this.key('n').int(),this.key('e').int());});var AlgorithmIdentifier=asn.define('AlgorithmIdentifier',function(){this.seq().obj(this.key('algorithm').objid(),this.key('parameters').optional().any());});var PublicKeyInfo=asn.define('PublicKeyInfo',function(){this.seq().obj(this.key('algorithm').use(AlgorithmIdentifier),this.key('publicKey').bitstr());});var Version=asn.define('Version',function(){this.int({0:'two-prime',1:'multi'});});var OtherPrimeInfos=asn.define('OtherPrimeInfos',function(){this.seq().obj(this.key('ri').int(),this.key('di').int(),this.key('ti').int());});var RSAPrivateKey=asn.define('RSAPrivateKey',function(){this.seq().obj(this.key('version').use(Version),this.key('n').int(),this.key('e').int(),this.key('d').int(),this.key('p').int(),this.key('q').int(),this.key('dp').int(),this.key('dq').int(),this.key('qi').int(),this.key('other').optional().use(OtherPrimeInfos));});var PrivateKeyInfo=asn.define('PrivateKeyInfo',function(){this.seq().obj(this.key('version').use(Version),this.key('algorithm').use(AlgorithmIdentifier),this.key('privateKey').bitstr());});const RSA_OID='1.2.840.113549.1.1.1';function addExtras(obj,extras){extras=extras||{};Object.keys(extras).forEach(function(key){obj[key]=extras[key];});return obj;}function pad(hex){return hex.length%2===1?'0'+hex:hex;}function decodeRsaPublic(buffer,extras){var key=RSAPublicKey.decode(buffer,'der');var e=pad(key.e.toString(16));var jwk={kty:'RSA',n:bn2base64url(key.n),e:hex2b64url(e)};return addExtras(jwk,extras);}function decodeRsaPrivate(buffer,extras){var key=RSAPrivateKey.decode(buffer,'der');var e=pad(key.e.toString(16));var jwk={kty:'RSA',n:bn2base64url(key.n),e:hex2b64url(e),d:bn2base64url(key.d),p:bn2base64url(key.p),q:bn2base64url(key.q),dp:bn2base64url(key.dp),dq:bn2base64url(key.dq),qi:bn2base64url(key.qi)};return addExtras(jwk,extras);}function decodePublic(buffer,extras){var info=PublicKeyInfo.decode(buffer,'der');return decodeRsaPublic(info.publicKey.data,extras);}function decodePrivate(buffer,extras){var info=PrivateKeyInfo.decode(buffer,'der');return decodeRsaPrivate(info.privateKey.data,extras);}function getDecoder(header){var match=/^-----BEGIN (RSA )?(PUBLIC|PRIVATE) KEY-----$/.exec(header);if(!match){return null;}var isRSA=!!match[1];var isPrivate=match[2]==='PRIVATE';if(isPrivate){return isRSA?decodeRsaPrivate:decodePrivate;}else{return isRSA?decodeRsaPublic:decodePublic;}}function pem2jwk(pem,extras){var text=pem.toString().split(/(\r\n|\r|\n)+/g);text=text.filter(function(line){return line.trim().length!==0;});var decoder=getDecoder(text[0]);text=text.slice(1,-1).join('');return decoder(Buffer.from(text.replace(/[^\w\d\+\/=]+/g,''),'base64'),extras);}function recomputePrimes(jwk){var pq=factor(jwk.e,jwk.d,jwk.n);var p=pq.p;var q=pq.q;var dp=jwk.d.mod(p.sub(one));var dq=jwk.d.mod(q.sub(one));var qi=q.invm(p);return{n:jwk.n,e:jwk.e,d:jwk.d,p:p,q:q,dp:dp,dq:dq,qi:qi};}function parse(jwk){return{n:string2bn(jwk.n),e:string2bn(jwk.e),d:jwk.d&&string2bn(jwk.d),p:jwk.p&&string2bn(jwk.p),q:jwk.q&&string2bn(jwk.q),dp:jwk.dp&&string2bn(jwk.dp),dq:jwk.dq&&string2bn(jwk.dq),qi:jwk.qi&&string2bn(jwk.qi)};}function jwk2pem(json){var jwk=parse(json);var isPrivate=!!jwk.d;var t=isPrivate?'PRIVATE':'PUBLIC';var header='-----BEGIN RSA '+t+' KEY-----\n';var footer='\n-----END RSA '+t+' KEY-----\n';var data=null;if(isPrivate){if(!jwk.p){jwk=recomputePrimes(jwk);}jwk.version='two-prime';data=RSAPrivateKey.encode(jwk,'der');}else{data=RSAPublicKey.encode(jwk,'der');}var body=data.toString('base64').match(/.{1,64}/g).join('\n');return header+body+footer;}function bn2base64url(bn){return hex2b64url(pad(bn.toString(16)));}function base64url2bn(str){return new asn.bignum(Buffer.from(str,'base64'));}function string2bn(str){if(/^[0-9]+$/.test(str)){return new asn.bignum(str,10);}return base64url2bn(str);}module.exports={pem2jwk:pem2jwk,jwk2pem:jwk2pem,BN:asn.bignum};},2531:function(__unusedmodule,exports,__webpack_require__){"use strict";const pull=__webpack_require__(418);const map=__webpack_require__(569);const asyncMap=__webpack_require__(9720);const lp=__webpack_require__(8585);const lpOpts={fixed:true,bytes:4};exports.createBoxStream=(cipher,mac)=>{return pull(ensureBuffer(),asyncMap((chunk,cb)=>{cipher.encrypt(chunk,(err,data)=>{if(err){return cb(err);}mac.digest(data,(err,digest)=>{if(err){return cb(err);}cb(null,Buffer.concat([data,digest]));});});}),lp.encode(lpOpts));};exports.createUnboxStream=(decipher,mac)=>{return pull(ensureBuffer(),lp.decode(lpOpts),asyncMap((chunk,cb)=>{const l=chunk.length;const macSize=mac.length;if(l<macSize){return cb(new Error(`buffer (${l}) shorter than MAC size (${macSize})`));}const mark=l-macSize;const data=chunk.slice(0,mark);const macd=chunk.slice(mark);mac.digest(data,(err,expected)=>{if(err){return cb(err);}if(!macd.equals(expected)){return cb(new Error(`MAC Invalid: ${macd.toString('hex')} != ${expected.toString('hex')}`));}decipher.decrypt(data,(err,decrypted)=>{if(err){return cb(err);}cb(null,decrypted);});});}));};function ensureBuffer(){return map(c=>{if(typeof c==='string'){return Buffer.from(c,'utf-8');}return c;});}},2540:function(__unusedmodule,exports){"use strict";var falseIfInvalid=exports.falseIfInvalid=function(fn){return function(){if(!this.valid){return false;}return fn.apply(this,arguments);};};exports.isInSubnet=falseIfInvalid(function(address){if(this.subnetMask<address.subnetMask){return false;}if(this.mask(address.subnetMask)===address.mask()){return true;}return false;});exports.isCorrect=function(defaultBits){return falseIfInvalid(function(){if(this.addressMinusSuffix!==this.correctForm()){return false;}if(this.subnetMask===defaultBits&&!this.parsedSubnet){return true;}return this.parsedSubnet===String(this.subnetMask);});};},2543:function(__unusedmodule,exports,__webpack_require__){var hash=exports;hash.utils=__webpack_require__(1702);hash.common=__webpack_require__(7874);hash.sha=__webpack_require__(7019);hash.ripemd=__webpack_require__(1438);hash.hmac=__webpack_require__(3076);hash.sha1=hash.sha.sha1;hash.sha256=hash.sha.sha256;hash.sha224=hash.sha.sha224;hash.sha384=hash.sha.sha384;hash.sha512=hash.sha.sha512;hash.ripemd160=hash.ripemd.ripemd160;},2548:function(module,__unusedexports,__webpack_require__){module.exports=__webpack_require__(7593);module.exports.Input=__webpack_require__(4517);module.exports.Output=__webpack_require__(1143);module.exports.UnspentOutput=__webpack_require__(4406);module.exports.Signature=__webpack_require__(6877);module.exports.Sighash=__webpack_require__(9845);},2551:function(module,exports,__webpack_require__){"use strict";var tty=__webpack_require__(8859);var util=__webpack_require__(649);exports.init=init;exports.log=log;exports.formatArgs=formatArgs;exports.save=save;exports.load=load;exports.useColors=useColors;exports.colors=[6,2,3,4,5,1];try{var supportsColor=__webpack_require__(8443);if(supportsColor&&(supportsColor.stderr||supportsColor).level>=2){exports.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221];}}catch(error){}exports.inspectOpts=Object.keys(process.env).filter(function(key){return /^debug_/i.test(key);}).reduce(function(obj,key){var prop=key.substring(6).toLowerCase().replace(/_([a-z])/g,function(_,k){return k.toUpperCase();});var val=process.env[key];if(/^(yes|on|true|enabled)$/i.test(val)){val=true;}else if(/^(no|off|false|disabled)$/i.test(val)){val=false;}else if(val==='null'){val=null;}else{val=Number(val);}obj[prop]=val;return obj;},{});function useColors(){return'colors'in exports.inspectOpts?Boolean(exports.inspectOpts.colors):tty.isatty(process.stderr.fd);}function formatArgs(args){var name=this.namespace,useColors=this.useColors;if(useColors){var c=this.color;var colorCode="\x1B[3"+(c<8?c:'8;5;'+c);var prefix="  ".concat(colorCode,";1m").concat(name," \x1B[0m");args[0]=prefix+args[0].split('\n').join('\n'+prefix);args.push(colorCode+'m+'+module.exports.humanize(this.diff)+"\x1B[0m");}else{args[0]=getDate()+name+' '+args[0];}}function getDate(){if(exports.inspectOpts.hideDate){return'';}return new Date().toISOString()+' ';}function log(){return process.stderr.write(util.format.apply(util,arguments)+'\n');}function save(namespaces){if(namespaces){process.env.DEBUG=namespaces;}else{delete process.env.DEBUG;}}function load(){return process.env.DEBUG;}function init(debug){debug.inspectOpts={};var keys=Object.keys(exports.inspectOpts);for(var i=0;i<keys.length;i++){debug.inspectOpts[keys[i]]=exports.inspectOpts[keys[i]];}}module.exports=__webpack_require__(2330)(exports);var formatters=module.exports.formatters;formatters.o=function(v){this.inspectOpts.colors=this.useColors;return util.inspect(v,this.inspectOpts).replace(/\s*\n\s*/g,' ');};formatters.O=function(v){this.inspectOpts.colors=this.useColors;return util.inspect(v,this.inspectOpts);};},2556:function(module){function verifuint(value,max){if(typeof value!=='number')throw new Error('cannot write a non-number as a number');if(value<0)throw new Error('specified a negative value for writing an unsigned value');if(value>max)throw new Error('RangeError: value out of range');if(Math.floor(value)!==value)throw new Error('value has a fractional component');}function readUInt64LE(buffer,offset){const a=buffer.readUInt32LE(offset);let b=buffer.readUInt32LE(offset+4);b*=0x100000000;verifuint(b+a,0x001fffffffffffff);return b+a;}function writeUInt64LE(buffer,value,offset){verifuint(value,0x001fffffffffffff);buffer.writeInt32LE(value&-1,offset);buffer.writeUInt32LE(Math.floor(value/0x100000000),offset+4);return offset+8;}module.exports={readUInt64LE:readUInt64LE,writeUInt64LE:writeUInt64LE};},2559:function(__unusedmodule,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var chains_1=__webpack_require__(1479);var hardforks_1=__webpack_require__(1817);var Common=function(){function Common(chain,hardfork,supportedHardforks){this._chainParams=this.setChain(chain);this._hardfork=null;this._supportedHardforks=supportedHardforks===undefined?[]:supportedHardforks;if(hardfork){this.setHardfork(hardfork);}}Common.prototype.setChain=function(chain){if(typeof chain==='number'){if(chains_1.chains['names'][chain]){this._chainParams=chains_1.chains[chains_1.chains['names'][chain]];}else{throw new Error("Chain with ID "+chain+" not supported");}}else if(typeof chain==='string'){if(chains_1.chains[chain]){this._chainParams=chains_1.chains[chain];}else{throw new Error("Chain with name "+chain+" not supported");}}else if(typeof chain==='object'){var required=['networkId','genesis','hardforks','bootstrapNodes'];for(var _i=0,required_1=required;_i<required_1.length;_i++){var param=required_1[_i];if(chain[param]===undefined){throw new Error("Missing required chain parameter: "+param);}}this._chainParams=chain;}else{throw new Error('Wrong input format');}return this._chainParams;};Common.prototype.setHardfork=function(hardfork){if(!this._isSupportedHardfork(hardfork)){throw new Error("Hardfork "+hardfork+" not set as supported in supportedHardforks");}var changed=false;for(var _i=0,hardforkChanges_1=hardforks_1.hardforks;_i<hardforkChanges_1.length;_i++){var hfChanges=hardforkChanges_1[_i];if(hfChanges[0]===hardfork){this._hardfork=hardfork;changed=true;}}if(!changed){throw new Error("Hardfork with name "+hardfork+" not supported");}};Common.prototype._chooseHardfork=function(hardfork,onlySupported){onlySupported=onlySupported===undefined?true:onlySupported;if(!hardfork){if(!this._hardfork){throw new Error('Method called with neither a hardfork set nor provided by param');}else{hardfork=this._hardfork;}}else if(onlySupported&&!this._isSupportedHardfork(hardfork)){throw new Error("Hardfork "+hardfork+" not set as supported in supportedHardforks");}return hardfork;};Common.prototype._getHardfork=function(hardfork){var hfs=this.hardforks();for(var _i=0,hfs_1=hfs;_i<hfs_1.length;_i++){var hf=hfs_1[_i];if(hf['name']===hardfork)return hf;}throw new Error("Hardfork "+hardfork+" not defined for chain "+this.chainName());};Common.prototype._isSupportedHardfork=function(hardfork){if(this._supportedHardforks.length>0){for(var _i=0,_a=this._supportedHardforks;_i<_a.length;_i++){var supportedHf=_a[_i];if(hardfork===supportedHf)return true;}}else{return true;}return false;};Common.prototype.param=function(topic,name,hardfork){hardfork=this._chooseHardfork(hardfork);var value;for(var _i=0,hardforkChanges_2=hardforks_1.hardforks;_i<hardforkChanges_2.length;_i++){var hfChanges=hardforkChanges_2[_i];if(!hfChanges[1][topic]){throw new Error("Topic "+topic+" not defined");}if(hfChanges[1][topic][name]!==undefined){value=hfChanges[1][topic][name].v;}if(hfChanges[0]===hardfork)break;}if(value===undefined){throw new Error(topic+" value for "+name+" not found");}return value;};Common.prototype.paramByBlock=function(topic,name,blockNumber){var activeHfs=this.activeHardforks(blockNumber);var hardfork=activeHfs[activeHfs.length-1]['name'];return this.param(topic,name,hardfork);};Common.prototype.hardforkIsActiveOnBlock=function(hardfork,blockNumber,opts){opts=opts!==undefined?opts:{};var onlySupported=opts.onlySupported===undefined?false:opts.onlySupported;hardfork=this._chooseHardfork(hardfork,onlySupported);var hfBlock=this.hardforkBlock(hardfork);if(hfBlock!==null&&blockNumber>=hfBlock)return true;return false;};Common.prototype.activeOnBlock=function(blockNumber,opts){return this.hardforkIsActiveOnBlock(null,blockNumber,opts);};Common.prototype.hardforkGteHardfork=function(hardfork1,hardfork2,opts){opts=opts!==undefined?opts:{};var onlyActive=opts.onlyActive===undefined?false:opts.onlyActive;hardfork1=this._chooseHardfork(hardfork1,opts.onlySupported);var hardforks;if(onlyActive){hardforks=this.activeHardforks(null,opts);}else{hardforks=this.hardforks();}var posHf1=-1,posHf2=-1;var index=0;for(var _i=0,hardforks_2=hardforks;_i<hardforks_2.length;_i++){var hf=hardforks_2[_i];if(hf['name']===hardfork1)posHf1=index;if(hf['name']===hardfork2)posHf2=index;index+=1;}return posHf1>=posHf2;};Common.prototype.gteHardfork=function(hardfork,opts){return this.hardforkGteHardfork(null,hardfork,opts);};Common.prototype.hardforkIsActiveOnChain=function(hardfork,opts){opts=opts!==undefined?opts:{};var onlySupported=opts.onlySupported===undefined?false:opts.onlySupported;hardfork=this._chooseHardfork(hardfork,onlySupported);for(var _i=0,_a=this.hardforks();_i<_a.length;_i++){var hf=_a[_i];if(hf['name']===hardfork&&hf['block']!==null)return true;}return false;};Common.prototype.activeHardforks=function(blockNumber,opts){opts=opts!==undefined?opts:{};var activeHardforks=[];var hfs=this.hardforks();for(var _i=0,hfs_2=hfs;_i<hfs_2.length;_i++){var hf=hfs_2[_i];if(hf['block']===null)continue;if(blockNumber!==undefined&&blockNumber!==null&&blockNumber<hf['block'])break;if(opts.onlySupported&&!this._isSupportedHardfork(hf['name']))continue;activeHardforks.push(hf);}return activeHardforks;};Common.prototype.activeHardfork=function(blockNumber,opts){opts=opts!==undefined?opts:{};var activeHardforks=this.activeHardforks(blockNumber,opts);if(activeHardforks.length>0){return activeHardforks[activeHardforks.length-1]['name'];}else{throw new Error("No (supported) active hardfork found");}};Common.prototype.hardforkBlock=function(hardfork){hardfork=this._chooseHardfork(hardfork,false);return this._getHardfork(hardfork)['block'];};Common.prototype.isHardforkBlock=function(blockNumber,hardfork){hardfork=this._chooseHardfork(hardfork,false);if(this.hardforkBlock(hardfork)===blockNumber){return true;}else{return false;}};Common.prototype.consensus=function(hardfork){hardfork=this._chooseHardfork(hardfork);return this._getHardfork(hardfork)['consensus'];};Common.prototype.finality=function(hardfork){hardfork=this._chooseHardfork(hardfork);return this._getHardfork(hardfork)['finality'];};Common.prototype.genesis=function(){return this._chainParams['genesis'];};Common.prototype.hardforks=function(){return this._chainParams['hardforks'];};Common.prototype.bootstrapNodes=function(){return this._chainParams['bootstrapNodes'];};Common.prototype.hardfork=function(){return this._hardfork;};Common.prototype.chainId=function(){return this._chainParams['chainId'];};Common.prototype.chainName=function(){return chains_1.chains['names'][this.chainId()]||this._chainParams['name'];};Common.prototype.networkId=function(){return this._chainParams['networkId'];};return Common;}();exports.default=Common;},2568:function(__unusedmodule,exports,__webpack_require__){var hash=__webpack_require__(3102);var utils=hash.utils;var assert=utils.assert;function BlockHash(){this.pending=null;this.pendingTotal=0;this.blockSize=this.constructor.blockSize;this.outSize=this.constructor.outSize;this.hmacStrength=this.constructor.hmacStrength;this.padLength=this.constructor.padLength/8;this.endian='big';this._delta8=this.blockSize/8;this._delta32=this.blockSize/32;}exports.BlockHash=BlockHash;BlockHash.prototype.update=function update(msg,enc){msg=utils.toArray(msg,enc);if(!this.pending)this.pending=msg;else this.pending=this.pending.concat(msg);this.pendingTotal+=msg.length;if(this.pending.length>=this._delta8){msg=this.pending;var r=msg.length%this._delta8;this.pending=msg.slice(msg.length-r,msg.length);if(this.pending.length===0)this.pending=null;msg=utils.join32(msg,0,msg.length-r,this.endian);for(var i=0;i<msg.length;i+=this._delta32)this._update(msg,i,i+this._delta32);}return this;};BlockHash.prototype.digest=function digest(enc){this.update(this._pad());assert(this.pending===null);return this._digest(enc);};BlockHash.prototype._pad=function pad(){var len=this.pendingTotal;var bytes=this._delta8;var k=bytes-(len+this.padLength)%bytes;var res=new Array(k+this.padLength);res[0]=0x80;for(var i=1;i<k;i++)res[i]=0;len<<=3;if(this.endian==='big'){for(var t=8;t<this.padLength;t++)res[i++]=0;res[i++]=0;res[i++]=0;res[i++]=0;res[i++]=0;res[i++]=len>>>24&0xff;res[i++]=len>>>16&0xff;res[i++]=len>>>8&0xff;res[i++]=len&0xff;}else{res[i++]=len&0xff;res[i++]=len>>>8&0xff;res[i++]=len>>>16&0xff;res[i++]=len>>>24&0xff;res[i++]=0;res[i++]=0;res[i++]=0;res[i++]=0;for(var t=8;t<this.padLength;t++)res[i++]=0;}return res;};},2572:function(module,__unusedexports,__webpack_require__){module.exports={encode:__webpack_require__(3679),decode:__webpack_require__(3994),encodingLength:__webpack_require__(7464)};},2594:function(module){"use strict";const publicKeySelector=(k,records)=>{return 0;};module.exports=publicKeySelector;},2601:function(module,__unusedexports,__webpack_require__){var isArray=__webpack_require__(1015),isSymbol=__webpack_require__(5578);var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey(value,object){if(isArray(value)){return false;}var type=typeof value;if(type=='number'||type=='symbol'||type=='boolean'||value==null||isSymbol(value)){return true;}return reIsPlainProp.test(value)||!reIsDeepProp.test(value)||object!=null&&value in Object(object);}module.exports=isKey;},2603:function(module,__unusedexports,__webpack_require__){module.exports=__webpack_require__(1796);module.exports.parser=__webpack_require__(5410);},2605:function(module,__unusedexports,__webpack_require__){"use strict";const Ref=__webpack_require__(1937);const internals={};internals.extendedCheckForValue=function(value,insensitive){const valueType=typeof value;if(valueType==='object'){if(value instanceof Date){return item=>{return item instanceof Date&&value.getTime()===item.getTime();};}if(Buffer.isBuffer(value)){return item=>{return Buffer.isBuffer(item)&&value.length===item.length&&value.toString('binary')===item.toString('binary');};}}else if(insensitive&&valueType==='string'){const lowercaseValue=value.toLowerCase();return item=>{return typeof item==='string'&&lowercaseValue===item.toLowerCase();};}return null;};module.exports=class InternalSet{constructor(from){this._set=new Set(from);this._hasRef=false;}add(value,refs){const isRef=Ref.isRef(value);if(!isRef&&this.has(value,null,null,false)){return this;}if(refs!==undefined){Ref.push(refs,value);}this._set.add(value);this._hasRef|=isRef;return this;}merge(add,remove){for(const item of add._set){this.add(item);}for(const item of remove._set){this.remove(item);}return this;}remove(value){this._set.delete(value);return this;}has(value,state,options,insensitive){return!!this.get(value,state,options,insensitive);}get(value,state,options,insensitive){if(!this._set.size){return false;}const hasValue=this._set.has(value);if(hasValue){return{value};}const extendedCheck=internals.extendedCheckForValue(value,insensitive);if(!extendedCheck){if(state&&this._hasRef){for(let item of this._set){if(Ref.isRef(item)){item=[].concat(item(state.reference||state.parent,options));const found=item.indexOf(value);if(found>=0){return{value:item[found]};}}}}return false;}return this._has(value,state,options,extendedCheck);}_has(value,state,options,check){const checkRef=!!(state&&this._hasRef);const isReallyEqual=function(item){if(value===item){return true;}return check(item);};for(let item of this._set){if(checkRef&&Ref.isRef(item)){item=item(state.reference||state.parent,options);if(Array.isArray(item)){const found=item.findIndex(isReallyEqual);if(found>=0){return{value:item[found]};}continue;}}if(isReallyEqual(item)){return{value:item};}}return false;}values(options){if(options&&options.stripUndefined){const values=[];for(const item of this._set){if(item!==undefined){values.push(item);}}return values;}return Array.from(this._set);}slice(){const set=new InternalSet(this._set);set._hasRef=this._hasRef;return set;}concat(source){const set=new InternalSet([...this._set,...source._set]);set._hasRef=!!(this._hasRef|source._hasRef);return set;}};},2606:function(module,__unusedexports,__webpack_require__){const bscript=__webpack_require__(5099);const types=__webpack_require__(8781);const typeforce=__webpack_require__(2809);const p2ms=__webpack_require__(7722);const p2pk=__webpack_require__(9517);const p2pkh=__webpack_require__(8982);function check(chunks,allowIncomplete){typeforce(types.Array,chunks);if(chunks.length<1)return false;const witnessScript=chunks[chunks.length-1];if(!Buffer.isBuffer(witnessScript))return false;const witnessScriptChunks=bscript.decompile(witnessScript);if(!witnessScriptChunks||witnessScriptChunks.length===0)return false;const witnessRawScriptSig=bscript.compile(chunks.slice(0,-1));if(p2pkh.input.check(witnessRawScriptSig)&&p2pkh.output.check(witnessScriptChunks))return true;if(p2ms.input.check(witnessRawScriptSig,allowIncomplete)&&p2ms.output.check(witnessScriptChunks))return true;if(p2pk.input.check(witnessRawScriptSig)&&p2pk.output.check(witnessScriptChunks))return true;return false;}check.toJSON=function(){return'witnessScriptHash input';};module.exports={check};},2614:function(__unusedmodule,exports,__webpack_require__){"use strict";var Buffer=__webpack_require__(1173).Buffer;exports._sbcs=SBCSCodec;function SBCSCodec(codecOptions,iconv){if(!codecOptions)throw new Error("SBCS codec is called without the data.");if(!codecOptions.chars||codecOptions.chars.length!==128&&codecOptions.chars.length!==256)throw new Error("Encoding '"+codecOptions.type+"' has incorrect 'chars' (must be of len 128 or 256)");if(codecOptions.chars.length===128){var asciiString="";for(var i=0;i<128;i++)asciiString+=String.fromCharCode(i);codecOptions.chars=asciiString+codecOptions.chars;}this.decodeBuf=Buffer.from(codecOptions.chars,'ucs2');var encodeBuf=Buffer.alloc(65536,iconv.defaultCharSingleByte.charCodeAt(0));for(var i=0;i<codecOptions.chars.length;i++)encodeBuf[codecOptions.chars.charCodeAt(i)]=i;this.encodeBuf=encodeBuf;}SBCSCodec.prototype.encoder=SBCSEncoder;SBCSCodec.prototype.decoder=SBCSDecoder;function SBCSEncoder(options,codec){this.encodeBuf=codec.encodeBuf;}SBCSEncoder.prototype.write=function(str){var buf=Buffer.alloc(str.length);for(var i=0;i<str.length;i++)buf[i]=this.encodeBuf[str.charCodeAt(i)];return buf;};SBCSEncoder.prototype.end=function(){};function SBCSDecoder(options,codec){this.decodeBuf=codec.decodeBuf;}SBCSDecoder.prototype.write=function(buf){var decodeBuf=this.decodeBuf;var newBuf=Buffer.alloc(buf.length*2);var idx1=0,idx2=0;for(var i=0;i<buf.length;i++){idx1=buf[i]*2;idx2=i*2;newBuf[idx2]=decodeBuf[idx1];newBuf[idx2+1]=decodeBuf[idx1+1];}return newBuf.toString('ucs2');};SBCSDecoder.prototype.end=function(){};},2638:function(__unusedmodule,exports){exports.BITS=128;exports.GROUPS=8;exports.SCOPES={0:'Reserved',1:'Interface local',2:'Link local',4:'Admin local',5:'Site local',8:'Organization local',14:'Global',15:'Reserved'};exports.TYPES={'ff01::1/128':'Multicast (All nodes on this interface)','ff01::2/128':'Multicast (All routers on this interface)','ff02::1/128':'Multicast (All nodes on this link)','ff02::2/128':'Multicast (All routers on this link)','ff05::2/128':'Multicast (All routers in this site)','ff02::5/128':'Multicast (OSPFv3 AllSPF routers)','ff02::6/128':'Multicast (OSPFv3 AllDR routers)','ff02::9/128':'Multicast (RIP routers)','ff02::a/128':'Multicast (EIGRP routers)','ff02::d/128':'Multicast (PIM routers)','ff02::16/128':'Multicast (MLDv2 reports)','ff01::fb/128':'Multicast (mDNSv6)','ff02::fb/128':'Multicast (mDNSv6)','ff05::fb/128':'Multicast (mDNSv6)','ff02::1:2/128':'Multicast (All DHCP servers and relay agents on this link)','ff05::1:2/128':'Multicast (All DHCP servers and relay agents in this site)','ff02::1:3/128':'Multicast (All DHCP servers on this link)','ff05::1:3/128':'Multicast (All DHCP servers in this site)','::/128':'Unspecified','::1/128':'Loopback','ff00::/8':'Multicast','fe80::/10':'Link-local unicast'};exports.RE_BAD_CHARACTERS=/([^0-9a-f:\/%])/ig;exports.RE_BAD_ADDRESS=/([0-9a-f]{5,}|:{3,}|[^:]:$|^:[^:]|\/$)/ig;exports.RE_SUBNET_STRING=/\/\d{1,3}(?=%|$)/;exports.RE_ZONE_STRING=/%.*$/;exports.RE_URL=new RegExp(/^\[{0,1}([0-9a-f:]+)\]{0,1}/);exports.RE_URL_WITH_PORT=new RegExp(/\[([0-9a-f:]+)\]:([0-9]{1,5})/);},2640:function(module,__unusedexports,__webpack_require__){"use strict";module.exports=__webpack_require__(6917)(__webpack_require__(495));},2642:function(module,__unusedexports,__webpack_require__){"use strict";function id(e){return e;}var prop=__webpack_require__(8145);var drain=__webpack_require__(2147);module.exports=function find(test,cb){var ended=false;if(!cb)cb=test,test=id;else test=prop(test)||id;return drain(function(data){if(test(data)){ended=true;cb(null,data);return false;}},function(err){if(ended)return;cb(err===true?null:err,null);});};},2648:function(module,__unusedexports,__webpack_require__){"use strict";const{EventEmitter}=__webpack_require__(4859);const libp2pRecord=__webpack_require__(6091);const MemoryStore=__webpack_require__(759).MemoryDatastore;const waterfall=__webpack_require__(4265);const each=__webpack_require__(4486);const filter=__webpack_require__(7177);const timeout=__webpack_require__(171);const PeerId=__webpack_require__(1832);const PeerInfo=__webpack_require__(9265);const crypto=__webpack_require__(318);const errcode=__webpack_require__(4999);const RoutingTable=__webpack_require__(1587);const utils=__webpack_require__(2869);const c=__webpack_require__(2445);const Query=__webpack_require__(5312);const Network=__webpack_require__(4163);const privateApi=__webpack_require__(6764);const Providers=__webpack_require__(2167);const Message=__webpack_require__(6102);const RandomWalk=__webpack_require__(9717);const assert=__webpack_require__(3930);const defaultsDeep=__webpack_require__(2500);class KadDHT extends EventEmitter{constructor(sw,options){super();assert(sw,'libp2p-kad-dht requires a instance of Switch');options=options||{};options.validators=options.validators||{};options.selectors=options.selectors||{};options.randomWalk=defaultsDeep(options.randomWalk,c.defaultRandomWalk);this.switch=sw;this.kBucketSize=options.kBucketSize||20;this.ncp=options.ncp||6;this.routingTable=new RoutingTable(this.peerInfo.id,this.kBucketSize);this.datastore=options.datastore||new MemoryStore();this.providers=new Providers(this.datastore,this.peerInfo.id);this.validators=_objectSpread2({pk:libp2pRecord.validator.validators.pk},options.validators);this.selectors=_objectSpread2({pk:libp2pRecord.selection.selectors.pk},options.selectors);this.network=new Network(this);this._log=utils.logger(this.peerInfo.id);const pa=privateApi(this);Object.keys(pa).forEach(name=>{this[name]=pa[name];});this.randomWalk=new RandomWalk(this);this.randomWalkEnabled=Boolean(options.randomWalk.enabled);this.randomWalkQueriesPerPeriod=parseInt(options.randomWalk.queriesPerPeriod);this.randomWalkInterval=parseInt(options.randomWalk.interval);this.randomWalkTimeout=parseInt(options.randomWalk.timeout);}get isStarted(){return this._running;}start(callback){this._running=true;this.network.start(err=>{if(err){return callback(err);}this.randomWalkEnabled&&this.randomWalk.start(this.randomWalkQueriesPerPeriod,this.randomWalkInterval,this.randomWalkTimeout);callback();});}stop(callback){this._running=false;this.randomWalk.stop(()=>{this.providers.stop();this.network.stop(callback);});}get peerInfo(){return this.switch._peerInfo;}get peerBook(){return this.switch._peerBook;}put(key,value,options,callback){if(typeof options==='function'){callback=options;options={};}else{options=options||{};}this._log('PutValue %b',key);waterfall([cb=>utils.createPutRecord(key,value,cb),(rec,cb)=>waterfall([cb=>this._putLocal(key,rec,cb),cb=>this.getClosestPeers(key,cb),(peers,cb)=>{options.minPeers=options.minPeers||peers.length;filter(peers,(peer,cb)=>{this._putValueToPeer(key,rec,peer,err=>{if(err){this._log.error('Failed to put to peer (%b): %s',peer.id,err);return cb(null,false);}cb(null,true);});},(err,results)=>{if(err)return cb(err);if(options.minPeers>results.length){const error=errcode(new Error('Failed to put value to enough peers'),'ERR_NOT_ENOUGH_PUT_PEERS');this._log.error(error);return cb(error);}cb();});}],cb)],callback);}get(key,options,callback){if(typeof options==='function'){callback=options;options={};}else{options=options||{};}if(!options.maxTimeout&&!options.timeout){options.timeout=c.minute;}else if(options.maxTimeout&&!options.timeout){options.timeout=options.maxTimeout;}this._get(key,options,callback);}getMany(key,nvals,options,callback){if(typeof options==='function'){callback=options;options={};}else{options=options||{};}if(!options.maxTimeout&&!options.timeout){options.timeout=c.minute;}else if(options.maxTimeout&&!options.timeout){options.timeout=options.maxTimeout;}this._log('getMany %b (%s)',key,nvals);let vals=[];this._getLocal(key,(err,localRec)=>{if(err&&nvals===0){return callback(err);}if(err==null){vals.push({val:localRec.value,from:this.peerInfo.id});}if(nvals<=1){return callback(null,vals);}const paths=[];waterfall([cb=>utils.convertBuffer(key,cb),(id,cb)=>{const rtp=this.routingTable.closestPeers(id,c.ALPHA);this._log('peers in rt: %d',rtp.length);if(rtp.length===0){const errMsg='Failed to lookup key! No peers from routing table!';this._log.error(errMsg);return cb(errcode(new Error(errMsg),'ERR_NO_PEERS_IN_ROUTING_TABLE'));}const query=new Query(this,key,(pathIndex,numPaths)=>{const pathSize=utils.pathSize(nvals-vals.length,numPaths);const pathVals=[];paths.push(pathVals);return(peer,cb)=>{this._getValueOrPeers(peer,key,(err,rec,peers)=>{if(err){if(!(err.code==='ERR_INVALID_RECORD')){return cb(err);}}const res={closerPeers:peers};if(rec&&rec.value||err&&err.code==='ERR_INVALID_RECORD'){pathVals.push({val:rec&&rec.value,from:peer});}if(pathVals.length>=pathSize){res.success=true;}cb(null,res);});};});timeout(cb=>query.run(rtp,cb),options.timeout)(cb);}],err=>{vals=[].concat.apply(vals,paths).slice(0,nvals);if(err&&vals.length===0){return callback(err);}callback(null,vals);});});}getClosestPeers(key,callback){this._log('getClosestPeers to %b',key);utils.convertBuffer(key,(err,id)=>{if(err){return callback(err);}const tablePeers=this.routingTable.closestPeers(id,c.ALPHA);const q=new Query(this,key,()=>{return(peer,callback)=>{waterfall([cb=>this._closerPeersSingle(key,peer,cb),(closer,cb)=>{cb(null,{closerPeers:closer});}],callback);};});q.run(tablePeers,(err,res)=>{if(err){return callback(err);}if(!res||!res.finalSet){return callback(null,[]);}waterfall([cb=>utils.sortClosestPeers(Array.from(res.finalSet),id,cb),(sorted,cb)=>cb(null,sorted.slice(0,c.K))],callback);});});}getPublicKey(peer,callback){this._log('getPublicKey %s',peer.toB58String());let info;if(this.peerBook.has(peer)){info=this.peerBook.get(peer);if(info&&info.id.pubKey){this._log('getPublicKey: found local copy');return callback(null,info.id.pubKey);}}else{info=this.peerBook.put(new PeerInfo(peer));}this._getPublicKeyFromNode(peer,(err,pk)=>{if(!err){info.id=new PeerId(peer.id,null,pk);this.peerBook.put(info);return callback(null,pk);}const pkKey=utils.keyForPublicKey(peer);this.get(pkKey,(err,value)=>{if(err){return callback(err);}const pk=crypto.unmarshalPublicKey(value);info.id=new PeerId(peer,null,pk);this.peerBook.put(info);callback(null,pk);});});}findPeerLocal(peer,callback){this._log('findPeerLocal %s',peer.toB58String());this.routingTable.find(peer,(err,p)=>{if(err){return callback(err);}if(!p||!this.peerBook.has(p)){return callback();}callback(null,this.peerBook.get(p));});}provide(key,callback){this._log('provide: %s',key.toBaseEncodedString());waterfall([cb=>this.providers.addProvider(key,this.peerInfo.id,cb),cb=>this.getClosestPeers(key.buffer,cb),(peers,cb)=>{const msg=new Message(Message.TYPES.ADD_PROVIDER,key.buffer,0);msg.providerPeers=peers.map(p=>new PeerInfo(p));each(peers,(peer,cb)=>{this._log('putProvider %s to %s',key.toBaseEncodedString(),peer.toB58String());this.network.sendMessage(peer,msg,cb);},cb);}],err=>callback(err));}findProviders(key,options,callback){if(typeof options==='function'){callback=options;options={};}else{options=options||{};}if(!options.maxTimeout&&!options.timeout){options.timeout=c.minute;}else if(options.maxTimeout&&!options.timeout){options.timeout=options.maxTimeout;}options.maxNumProviders=options.maxNumProviders||c.K;this._log('findProviders %s',key.toBaseEncodedString());this._findNProviders(key,options.timeout,options.maxNumProviders,callback);}findPeer(id,options,callback){if(typeof options==='function'){callback=options;options={};}else{options=options||{};}if(!options.maxTimeout&&!options.timeout){options.timeout=c.minute;}else if(options.maxTimeout&&!options.timeout){options.timeout=options.maxTimeout;}this._log('findPeer %s',id.toB58String());this.findPeerLocal(id,(err,pi)=>{if(err){return callback(err);}if(pi!=null){this._log('found local');return callback(null,pi);}waterfall([cb=>utils.convertPeerId(id,cb),(key,cb)=>{const peers=this.routingTable.closestPeers(key,c.ALPHA);if(peers.length===0){return cb(errcode(new Error('Peer lookup failed'),'ERR_LOOKUP_FAILED'));}const match=peers.find(p=>p.isEqual(id));if(match&&this.peerBook.has(id)){this._log('found in peerbook');return cb(null,this.peerBook.get(id));}const query=new Query(this,id.id,()=>{return(peer,cb)=>{waterfall([cb=>this._findPeerSingle(peer,id,cb),(msg,cb)=>{const match=msg.closerPeers.find(p=>p.id.isEqual(id));if(match){return cb(null,{peer:match,success:true});}cb(null,{closerPeers:msg.closerPeers});}],cb);};});timeout(cb=>{query.run(peers,cb);},options.timeout)(cb);},(result,cb)=>{let success=false;result.paths.forEach(result=>{if(result.success){success=true;this.peerBook.put(result.peer);}});this._log('findPeer %s: %s',id.toB58String(),success);if(!success){return cb(errcode(new Error('No peer found'),'ERR_NOT_FOUND'));}cb(null,this.peerBook.get(id));}],callback);});}_peerDiscovered(peerInfo){this.emit('peer',peerInfo);}}module.exports=KadDHT;},2652:function(module,__unusedexports,__webpack_require__){var createError=__webpack_require__(4458).create;var LevelUPError=createError('LevelUPError');var NotFoundError=createError('NotFoundError',LevelUPError);NotFoundError.prototype.notFound=true;NotFoundError.prototype.status=404;module.exports={LevelUPError:LevelUPError,InitializationError:createError('InitializationError',LevelUPError),OpenError:createError('OpenError',LevelUPError),ReadError:createError('ReadError',LevelUPError),WriteError:createError('WriteError',LevelUPError),NotFoundError:NotFoundError,EncodingError:createError('EncodingError',LevelUPError)};},2656:function(module){function hashDelete(key){var result=this.has(key)&&delete this.__data__[key];this.size-=result?1:0;return result;}module.exports=hashDelete;},2669:function(module,__unusedexports,__webpack_require__){const Buffer=__webpack_require__(7572).Buffer;const bcrypto=__webpack_require__(5475);const fastMerkleRoot=__webpack_require__(5994);const typeforce=__webpack_require__(2809);const types=__webpack_require__(8781);const varuint=__webpack_require__(5562);const Transaction=__webpack_require__(9583);function Block(){this.version=1;this.prevHash=null;this.merkleRoot=null;this.timestamp=0;this.bits=0;this.nonce=0;}Block.fromBuffer=function(buffer){if(buffer.length<80)throw new Error('Buffer too small (< 80 bytes)');let offset=0;function readSlice(n){offset+=n;return buffer.slice(offset-n,offset);}function readUInt32(){const i=buffer.readUInt32LE(offset);offset+=4;return i;}function readInt32(){const i=buffer.readInt32LE(offset);offset+=4;return i;}const block=new Block();block.version=readInt32();block.prevHash=readSlice(32);block.merkleRoot=readSlice(32);block.timestamp=readUInt32();block.bits=readUInt32();block.nonce=readUInt32();if(buffer.length===80)return block;function readVarInt(){const vi=varuint.decode(buffer,offset);offset+=varuint.decode.bytes;return vi;}function readTransaction(){const tx=Transaction.fromBuffer(buffer.slice(offset),true);offset+=tx.byteLength();return tx;}const nTransactions=readVarInt();block.transactions=[];for(var i=0;i<nTransactions;++i){const tx=readTransaction();block.transactions.push(tx);}return block;};Block.prototype.byteLength=function(headersOnly){if(headersOnly||!this.transactions)return 80;return 80+varuint.encodingLength(this.transactions.length)+this.transactions.reduce(function(a,x){return a+x.byteLength();},0);};Block.fromHex=function(hex){return Block.fromBuffer(Buffer.from(hex,'hex'));};Block.prototype.getHash=function(){return bcrypto.hash256(this.toBuffer(true));};Block.prototype.getId=function(){return this.getHash().reverse().toString('hex');};Block.prototype.getUTCDate=function(){const date=new Date(0);date.setUTCSeconds(this.timestamp);return date;};Block.prototype.toBuffer=function(headersOnly){const buffer=Buffer.allocUnsafe(this.byteLength(headersOnly));let offset=0;function writeSlice(slice){slice.copy(buffer,offset);offset+=slice.length;}function writeInt32(i){buffer.writeInt32LE(i,offset);offset+=4;}function writeUInt32(i){buffer.writeUInt32LE(i,offset);offset+=4;}writeInt32(this.version);writeSlice(this.prevHash);writeSlice(this.merkleRoot);writeUInt32(this.timestamp);writeUInt32(this.bits);writeUInt32(this.nonce);if(headersOnly||!this.transactions)return buffer;varuint.encode(this.transactions.length,buffer,offset);offset+=varuint.encode.bytes;this.transactions.forEach(function(tx){const txSize=tx.byteLength();tx.toBuffer(buffer,offset);offset+=txSize;});return buffer;};Block.prototype.toHex=function(headersOnly){return this.toBuffer(headersOnly).toString('hex');};Block.calculateTarget=function(bits){const exponent=((bits&0xff000000)>>24)-3;const mantissa=bits&0x007fffff;const target=Buffer.alloc(32,0);target.writeUIntBE(mantissa,29-exponent,3);return target;};Block.calculateMerkleRoot=function(transactions){typeforce([{getHash:types.Function}],transactions);if(transactions.length===0)throw TypeError('Cannot compute merkle root for zero transactions');const hashes=transactions.map(function(transaction){return transaction.getHash();});return fastMerkleRoot(hashes,bcrypto.hash256);};Block.prototype.checkMerkleRoot=function(){if(!this.transactions)return false;const actualMerkleRoot=Block.calculateMerkleRoot(this.transactions);return this.merkleRoot.compare(actualMerkleRoot)===0;};Block.prototype.checkProofOfWork=function(){const hash=this.getHash().reverse();const target=Block.calculateTarget(this.bits);return hash.compare(target)<=0;};module.exports=Block;},2673:function(module){module.exports=require("zlib");},2685:function(module,exports,__webpack_require__){exports=module.exports=createDebug.debug=createDebug['default']=createDebug;exports.coerce=coerce;exports.disable=disable;exports.enable=enable;exports.enabled=enabled;exports.humanize=__webpack_require__(9222);exports.instances=[];exports.names=[];exports.skips=[];exports.formatters={};function selectColor(namespace){var hash=0,i;for(i in namespace){hash=(hash<<5)-hash+namespace.charCodeAt(i);hash|=0;}return exports.colors[Math.abs(hash)%exports.colors.length];}function createDebug(namespace){var prevTime;function debug(){if(!debug.enabled)return;var self=debug;var curr=+new Date();var ms=curr-(prevTime||curr);self.diff=ms;self.prev=prevTime;self.curr=curr;prevTime=curr;var args=new Array(arguments.length);for(var i=0;i<args.length;i++){args[i]=arguments[i];}args[0]=exports.coerce(args[0]);if('string'!==typeof args[0]){args.unshift('%O');}var index=0;args[0]=args[0].replace(/%([a-zA-Z%])/g,function(match,format){if(match==='%%')return match;index++;var formatter=exports.formatters[format];if('function'===typeof formatter){var val=args[index];match=formatter.call(self,val);args.splice(index,1);index--;}return match;});exports.formatArgs.call(self,args);var logFn=debug.log||exports.log||console.log.bind(console);logFn.apply(self,args);}debug.namespace=namespace;debug.enabled=exports.enabled(namespace);debug.useColors=exports.useColors();debug.color=selectColor(namespace);debug.destroy=destroy;if('function'===typeof exports.init){exports.init(debug);}exports.instances.push(debug);return debug;}function destroy(){var index=exports.instances.indexOf(this);if(index!==-1){exports.instances.splice(index,1);return true;}else{return false;}}function enable(namespaces){exports.save(namespaces);exports.names=[];exports.skips=[];var i;var split=(typeof namespaces==='string'?namespaces:'').split(/[\s,]+/);var len=split.length;for(i=0;i<len;i++){if(!split[i])continue;namespaces=split[i].replace(/\*/g,'.*?');if(namespaces[0]==='-'){exports.skips.push(new RegExp('^'+namespaces.substr(1)+'$'));}else{exports.names.push(new RegExp('^'+namespaces+'$'));}}for(i=0;i<exports.instances.length;i++){var instance=exports.instances[i];instance.enabled=exports.enabled(instance.namespace);}}function disable(){exports.enable('');}function enabled(name){if(name[name.length-1]==='*'){return true;}var i,len;for(i=0,len=exports.skips.length;i<len;i++){if(exports.skips[i].test(name)){return false;}}for(i=0,len=exports.names.length;i<len;i++){if(exports.names[i].test(name)){return true;}}return false;}function coerce(val){if(val instanceof Error)return val.stack||val.message;return val;}},2697:function(module,__unusedexports,__webpack_require__){var baseToString=__webpack_require__(880);function toString(value){return value==null?'':baseToString(value);}module.exports=toString;},2699:function(module,__unusedexports,__webpack_require__){"use strict";const{exporter}=__webpack_require__(3021);const pull=__webpack_require__(2885);const errCode=__webpack_require__(4999);const{normalizePath}=__webpack_require__(8170);module.exports=function(self){return(ipfsPath,options)=>{options=options||{};if(options.preload!==false){let pathComponents;try{pathComponents=normalizePath(ipfsPath).split('/');}catch(err){return pull.error(errCode(err,'ERR_INVALID_PATH'));}self._preload(pathComponents[0]);}return exporter(ipfsPath,self._ipld,options);};};},2706:function(module){var traverse=module.exports=function(obj){return new Traverse(obj);};function Traverse(obj){this.value=obj;}Traverse.prototype.get=function(ps){var node=this.value;for(var i=0;i<ps.length;i++){var key=ps[i];if(!node||!hasOwnProperty.call(node,key)){node=undefined;break;}node=node[key];}return node;};Traverse.prototype.has=function(ps){var node=this.value;for(var i=0;i<ps.length;i++){var key=ps[i];if(!node||!hasOwnProperty.call(node,key)){return false;}node=node[key];}return true;};Traverse.prototype.set=function(ps,value){var node=this.value;for(var i=0;i<ps.length-1;i++){var key=ps[i];if(!hasOwnProperty.call(node,key))node[key]={};node=node[key];}node[ps[i]]=value;return value;};Traverse.prototype.map=function(cb){return walk(this.value,cb,true);};Traverse.prototype.forEach=function(cb){this.value=walk(this.value,cb,false);return this.value;};Traverse.prototype.reduce=function(cb,init){var skip=arguments.length===1;var acc=skip?this.value:init;this.forEach(function(x){if(!this.isRoot||!skip){acc=cb.call(this,acc,x);}});return acc;};Traverse.prototype.paths=function(){var acc=[];this.forEach(function(x){acc.push(this.path);});return acc;};Traverse.prototype.nodes=function(){var acc=[];this.forEach(function(x){acc.push(this.node);});return acc;};Traverse.prototype.clone=function(){var parents=[],nodes=[];return function clone(src){for(var i=0;i<parents.length;i++){if(parents[i]===src){return nodes[i];}}if(typeof src==='object'&&src!==null){var dst=copy(src);parents.push(src);nodes.push(dst);forEach(objectKeys(src),function(key){dst[key]=clone(src[key]);});parents.pop();nodes.pop();return dst;}else{return src;}}(this.value);};function walk(root,cb,immutable){var path=[];var parents=[];var alive=true;return function walker(node_){var node=immutable?copy(node_):node_;var modifiers={};var keepGoing=true;var state={node:node,node_:node_,path:[].concat(path),parent:parents[parents.length-1],parents:parents,key:path.slice(-1)[0],isRoot:path.length===0,level:path.length,circular:null,update:function(x,stopHere){if(!state.isRoot){state.parent.node[state.key]=x;}state.node=x;if(stopHere)keepGoing=false;},'delete':function(stopHere){delete state.parent.node[state.key];if(stopHere)keepGoing=false;},remove:function(stopHere){if(isArray(state.parent.node)){state.parent.node.splice(state.key,1);}else{delete state.parent.node[state.key];}if(stopHere)keepGoing=false;},keys:null,before:function(f){modifiers.before=f;},after:function(f){modifiers.after=f;},pre:function(f){modifiers.pre=f;},post:function(f){modifiers.post=f;},stop:function(){alive=false;},block:function(){keepGoing=false;}};if(!alive)return state;function updateState(){if(typeof state.node==='object'&&state.node!==null){if(!state.keys||state.node_!==state.node){state.keys=objectKeys(state.node);}state.isLeaf=state.keys.length==0;for(var i=0;i<parents.length;i++){if(parents[i].node_===node_){state.circular=parents[i];break;}}}else{state.isLeaf=true;state.keys=null;}state.notLeaf=!state.isLeaf;state.notRoot=!state.isRoot;}updateState();var ret=cb.call(state,state.node);if(ret!==undefined&&state.update)state.update(ret);if(modifiers.before)modifiers.before.call(state,state.node);if(!keepGoing)return state;if(typeof state.node=='object'&&state.node!==null&&!state.circular){parents.push(state);updateState();forEach(state.keys,function(key,i){path.push(key);if(modifiers.pre)modifiers.pre.call(state,state.node[key],key);var child=walker(state.node[key]);if(immutable&&hasOwnProperty.call(state.node,key)){state.node[key]=child.node;}child.isLast=i==state.keys.length-1;child.isFirst=i==0;if(modifiers.post)modifiers.post.call(state,child);path.pop();});parents.pop();}if(modifiers.after)modifiers.after.call(state,state.node);return state;}(root).node;}function copy(src){if(typeof src==='object'&&src!==null){var dst;if(isArray(src)){dst=[];}else if(isDate(src)){dst=new Date(src.getTime?src.getTime():src);}else if(isRegExp(src)){dst=new RegExp(src);}else if(isError(src)){dst={message:src.message};}else if(isBoolean(src)){dst=new Boolean(src);}else if(isNumber(src)){dst=new Number(src);}else if(isString(src)){dst=new String(src);}else if(Object.create&&Object.getPrototypeOf){dst=Object.create(Object.getPrototypeOf(src));}else if(src.constructor===Object){dst={};}else{var proto=src.constructor&&src.constructor.prototype||src.__proto__||{};var T=function(){};T.prototype=proto;dst=new T();}forEach(objectKeys(src),function(key){dst[key]=src[key];});return dst;}else return src;}var objectKeys=Object.keys||function keys(obj){var res=[];for(var key in obj)res.push(key);return res;};function toS(obj){return Object.prototype.toString.call(obj);}function isDate(obj){return toS(obj)==='[object Date]';}function isRegExp(obj){return toS(obj)==='[object RegExp]';}function isError(obj){return toS(obj)==='[object Error]';}function isBoolean(obj){return toS(obj)==='[object Boolean]';}function isNumber(obj){return toS(obj)==='[object Number]';}function isString(obj){return toS(obj)==='[object String]';}var isArray=Array.isArray||function isArray(xs){return Object.prototype.toString.call(xs)==='[object Array]';};var forEach=function(xs,fn){if(xs.forEach)return xs.forEach(fn);else for(var i=0;i<xs.length;i++){fn(xs[i],i,xs);}};forEach(objectKeys(Traverse.prototype),function(key){traverse[key]=function(obj){var args=[].slice.call(arguments,1);var t=new Traverse(obj);return t[key].apply(t,args);};});var hasOwnProperty=Object.hasOwnProperty||function(obj,key){return key in obj;};},2711:function(module,__unusedexports,__webpack_require__){const util=__webpack_require__(649),AbstractChainedBatch=__webpack_require__(5238).AbstractChainedBatch;function ChainedBatch(db){AbstractChainedBatch.call(this,db);this.binding=db.binding.batch();}ChainedBatch.prototype._put=function(key,value){this.binding.put(key,value);};ChainedBatch.prototype._del=function(key){this.binding.del(key);};ChainedBatch.prototype._clear=function(key){this.binding.clear(key);};ChainedBatch.prototype._write=function(options,callback){this.binding.write(options,callback);};util.inherits(ChainedBatch,AbstractChainedBatch);module.exports=ChainedBatch;},2713:function(module){module.exports={WORKER_REQUEST_READ_LOCK:'lock:worker:request-read',WORKER_RELEASE_READ_LOCK:'lock:worker:release-read',MASTER_GRANT_READ_LOCK:'lock:master:grant-read',WORKER_REQUEST_WRITE_LOCK:'lock:worker:request-write',WORKER_RELEASE_WRITE_LOCK:'lock:worker:release-write',MASTER_GRANT_WRITE_LOCK:'lock:master:grant-write'};},2716:function(module,__unusedexports,__webpack_require__){"use strict";const debug=__webpack_require__(746);const OFFLINE_ERROR=__webpack_require__(5527).OFFLINE_ERROR;const PeerId=__webpack_require__(1832);const pull=__webpack_require__(2885);const Pushable=__webpack_require__(5995);const log=debug('jsipfs:pingPullStream');log.error=debug('jsipfs:pingPullStream:error');module.exports=function pingPullStream(self){return(peerId,opts)=>{if(!self.isOnline()){return pull.error(new Error(OFFLINE_ERROR));}opts=Object.assign({count:10},opts);const source=Pushable();getPeer(self.libp2p,source,peerId,(err,peer)=>{if(err){log.error(err);source.end(err);return;}runPing(self.libp2p,source,opts.count,peer,err=>{if(err){log.error(err);source.push(getPacket({success:false,text:err.toString()}));source.end();}});});return source;};};function getPacket(msg){const basePacket={success:true,time:0,text:''};return Object.assign(basePacket,msg);}function getPeer(libp2pNode,statusStream,peerIdStr,cb){let peerId;try{peerId=PeerId.createFromB58String(peerIdStr);}catch(err){return cb(err);}let peerInfo;try{peerInfo=libp2pNode.peerBook.get(peerId);}catch(err){log('Peer not found in peer book, trying peer routing');statusStream.push(getPacket({text:`Looking up peer ${peerIdStr}`}));return libp2pNode.peerRouting.findPeer(peerId,cb);}cb(null,peerInfo);}function runPing(libp2pNode,statusStream,count,peer,cb){libp2pNode.ping(peer,(err,p)=>{if(err){return cb(err);}let packetCount=0;let totalTime=0;statusStream.push(getPacket({text:`PING ${peer.id.toB58String()}`}));p.on('ping',time=>{statusStream.push(getPacket({time}));totalTime+=time;packetCount++;if(packetCount>=count){const average=totalTime/count;p.stop();statusStream.push(getPacket({text:`Average latency: ${average}ms`}));statusStream.end();}});p.on('error',err=>{log.error(err);p.stop();cb(err);});p.start();});}},2736:function(module,__unusedexports,__webpack_require__){"use strict";const peerId=__webpack_require__(1832);const PeerInfo=__webpack_require__(9265);const multiaddr=__webpack_require__(5920);const waterfall=__webpack_require__(4265);const Keychain=__webpack_require__(2122);const defaultsDeep=__webpack_require__(2500);const NoKeychain=__webpack_require__(9587);module.exports=function preStart(self){return callback=>{self.log('pre-start');const pass=self._options.pass;waterfall([cb=>self._repo.config.get(cb),(config,cb)=>{if(!self._options.config){return cb(null,config);}config=defaultsDeep(self._options.config,config);self.config.replace(config,err=>{if(err){return cb(err);}cb(null,config);});},(config,cb)=>{if(config.Keychain){return cb(null,config);}config.Keychain=Keychain.generateOptions();self.config.set('Keychain',config.Keychain,err=>{self.log('using default keychain options');cb(err,config);});},(config,cb)=>{if(self._keychain){}else if(pass){const keychainOptions=Object.assign({passPhrase:pass},config.Keychain);self._keychain=new Keychain(self._repo.keys,keychainOptions);self.log('keychain constructed');}else{self._keychain=new NoKeychain();self.log('no keychain, use --pass');}cb(null,config);},(config,cb)=>{const privKey=config.Identity.PrivKey;peerId.createFromPrivKey(privKey,(err,id)=>{cb(err,config,id);});},(config,id,cb)=>{if(!pass){return cb(null,config,id);}self._keychain.findKeyByName('self',err=>{if(err){self.log('Creating "self" key');return self._keychain.importPeer('self',id,err=>cb(err,config,id));}cb(null,config,id);});},(config,id,cb)=>{self.log('peer created');self._peerInfo=new PeerInfo(id);if(config.Addresses&&config.Addresses.Swarm){config.Addresses.Swarm.forEach(addr=>{let ma=multiaddr(addr);if(ma.getPeerId()){ma=ma.encapsulate('/ipfs/'+self._peerInfo.id.toB58String());}self._peerInfo.multiaddrs.add(ma);});}cb();},cb=>self.pin._load(cb)],callback);};};},2740:function(module){module.exports=createIsLink;function createIsLink(resolve){return function isLink(block,path,callback){resolve(block,path,(err,result)=>{if(err){return callback(err);}if(result.remainderPath.length>0){return callback(new Error('path out of scope'));}if(typeof result.value==='object'&&result.value['/']){callback(null,result.value);}else{callback(null,false);}});};}},2756:function(module,__unusedexports,__webpack_require__){var fs=__webpack_require__(662);var polyfills=__webpack_require__(5726);var legacy=__webpack_require__(4606);var clone=__webpack_require__(1014);var queue=[];var util=__webpack_require__(649);function noop(){}var debug=noop;if(util.debuglog)debug=util.debuglog('gfs4');else if(/\bgfs4\b/i.test(process.env.NODE_DEBUG||''))debug=function(){var m=util.format.apply(util,arguments);m='GFS4: '+m.split(/\n/).join('\nGFS4: ');console.error(m);};if(/\bgfs4\b/i.test(process.env.NODE_DEBUG||'')){process.on('exit',function(){debug(queue);__webpack_require__(3930).equal(queue.length,0);});}module.exports=patch(clone(fs));if(process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!fs.__patched){module.exports=patch(fs);fs.__patched=true;}module.exports.close=function(fs$close){return function(fd,cb){return fs$close.call(fs,fd,function(err){if(!err)retry();if(typeof cb==='function')cb.apply(this,arguments);});};}(fs.close);module.exports.closeSync=function(fs$closeSync){return function(fd){var rval=fs$closeSync.apply(fs,arguments);retry();return rval;};}(fs.closeSync);if(!/\bgraceful-fs\b/.test(fs.closeSync.toString())){fs.closeSync=module.exports.closeSync;fs.close=module.exports.close;}function patch(fs){polyfills(fs);fs.gracefulify=patch;fs.FileReadStream=ReadStream;fs.FileWriteStream=WriteStream;fs.createReadStream=createReadStream;fs.createWriteStream=createWriteStream;var fs$readFile=fs.readFile;fs.readFile=readFile;function readFile(path,options,cb){if(typeof options==='function')cb=options,options=null;return go$readFile(path,options,cb);function go$readFile(path,options,cb){return fs$readFile(path,options,function(err){if(err&&(err.code==='EMFILE'||err.code==='ENFILE'))enqueue([go$readFile,[path,options,cb]]);else{if(typeof cb==='function')cb.apply(this,arguments);retry();}});}}var fs$writeFile=fs.writeFile;fs.writeFile=writeFile;function writeFile(path,data,options,cb){if(typeof options==='function')cb=options,options=null;return go$writeFile(path,data,options,cb);function go$writeFile(path,data,options,cb){return fs$writeFile(path,data,options,function(err){if(err&&(err.code==='EMFILE'||err.code==='ENFILE'))enqueue([go$writeFile,[path,data,options,cb]]);else{if(typeof cb==='function')cb.apply(this,arguments);retry();}});}}var fs$appendFile=fs.appendFile;if(fs$appendFile)fs.appendFile=appendFile;function appendFile(path,data,options,cb){if(typeof options==='function')cb=options,options=null;return go$appendFile(path,data,options,cb);function go$appendFile(path,data,options,cb){return fs$appendFile(path,data,options,function(err){if(err&&(err.code==='EMFILE'||err.code==='ENFILE'))enqueue([go$appendFile,[path,data,options,cb]]);else{if(typeof cb==='function')cb.apply(this,arguments);retry();}});}}var fs$readdir=fs.readdir;fs.readdir=readdir;function readdir(path,options,cb){var args=[path];if(typeof options!=='function'){args.push(options);}else{cb=options;}args.push(go$readdir$cb);return go$readdir(args);function go$readdir$cb(err,files){if(files&&files.sort)files.sort();if(err&&(err.code==='EMFILE'||err.code==='ENFILE'))enqueue([go$readdir,[args]]);else{if(typeof cb==='function')cb.apply(this,arguments);retry();}}}function go$readdir(args){return fs$readdir.apply(fs,args);}if(process.version.substr(0,4)==='v0.8'){var legStreams=legacy(fs);ReadStream=legStreams.ReadStream;WriteStream=legStreams.WriteStream;}var fs$ReadStream=fs.ReadStream;if(fs$ReadStream){ReadStream.prototype=Object.create(fs$ReadStream.prototype);ReadStream.prototype.open=ReadStream$open;}var fs$WriteStream=fs.WriteStream;if(fs$WriteStream){WriteStream.prototype=Object.create(fs$WriteStream.prototype);WriteStream.prototype.open=WriteStream$open;}fs.ReadStream=ReadStream;fs.WriteStream=WriteStream;function ReadStream(path,options){if(this instanceof ReadStream)return fs$ReadStream.apply(this,arguments),this;else return ReadStream.apply(Object.create(ReadStream.prototype),arguments);}function ReadStream$open(){var that=this;open(that.path,that.flags,that.mode,function(err,fd){if(err){if(that.autoClose)that.destroy();that.emit('error',err);}else{that.fd=fd;that.emit('open',fd);that.read();}});}function WriteStream(path,options){if(this instanceof WriteStream)return fs$WriteStream.apply(this,arguments),this;else return WriteStream.apply(Object.create(WriteStream.prototype),arguments);}function WriteStream$open(){var that=this;open(that.path,that.flags,that.mode,function(err,fd){if(err){that.destroy();that.emit('error',err);}else{that.fd=fd;that.emit('open',fd);}});}function createReadStream(path,options){return new ReadStream(path,options);}function createWriteStream(path,options){return new WriteStream(path,options);}var fs$open=fs.open;fs.open=open;function open(path,flags,mode,cb){if(typeof mode==='function')cb=mode,mode=null;return go$open(path,flags,mode,cb);function go$open(path,flags,mode,cb){return fs$open(path,flags,mode,function(err,fd){if(err&&(err.code==='EMFILE'||err.code==='ENFILE'))enqueue([go$open,[path,flags,mode,cb]]);else{if(typeof cb==='function')cb.apply(this,arguments);retry();}});}}return fs;}function enqueue(elem){debug('ENQUEUE',elem[0].name,elem[1]);queue.push(elem);}function retry(){var elem=queue.shift();if(elem){debug('RETRY',elem[0].name,elem[1]);elem[0].apply(null,elem[1]);}}},2760:function(module,__unusedexports,__webpack_require__){var MapCache=__webpack_require__(1273);var FUNC_ERROR_TEXT='Expected a function';function memoize(func,resolver){if(typeof func!='function'||resolver!=null&&typeof resolver!='function'){throw new TypeError(FUNC_ERROR_TEXT);}var memoized=function(){var args=arguments,key=resolver?resolver.apply(this,args):args[0],cache=memoized.cache;if(cache.has(key)){return cache.get(key);}var result=func.apply(this,args);memoized.cache=cache.set(key,result)||cache;return result;};memoized.cache=new(memoize.Cache||MapCache)();return memoized;}memoize.Cache=MapCache;module.exports=memoize;},2765:function(module){(function(){var Heap,defaultCmp,floor,heapify,heappop,heappush,heappushpop,heapreplace,insort,min,nlargest,nsmallest,updateItem,_siftdown,_siftup;floor=Math.floor,min=Math.min;defaultCmp=function(x,y){if(x<y){return-1;}if(x>y){return 1;}return 0;};insort=function(a,x,lo,hi,cmp){var mid;if(lo==null){lo=0;}if(cmp==null){cmp=defaultCmp;}if(lo<0){throw new Error('lo must be non-negative');}if(hi==null){hi=a.length;}while(lo<hi){mid=floor((lo+hi)/2);if(cmp(x,a[mid])<0){hi=mid;}else{lo=mid+1;}}return[].splice.apply(a,[lo,lo-lo].concat(x)),x;};heappush=function(array,item,cmp){if(cmp==null){cmp=defaultCmp;}array.push(item);return _siftdown(array,0,array.length-1,cmp);};heappop=function(array,cmp){var lastelt,returnitem;if(cmp==null){cmp=defaultCmp;}lastelt=array.pop();if(array.length){returnitem=array[0];array[0]=lastelt;_siftup(array,0,cmp);}else{returnitem=lastelt;}return returnitem;};heapreplace=function(array,item,cmp){var returnitem;if(cmp==null){cmp=defaultCmp;}returnitem=array[0];array[0]=item;_siftup(array,0,cmp);return returnitem;};heappushpop=function(array,item,cmp){var _ref;if(cmp==null){cmp=defaultCmp;}if(array.length&&cmp(array[0],item)<0){_ref=[array[0],item],item=_ref[0],array[0]=_ref[1];_siftup(array,0,cmp);}return item;};heapify=function(array,cmp){var i,_i,_j,_len,_ref,_ref1,_results,_results1;if(cmp==null){cmp=defaultCmp;}_ref1=function(){_results1=[];for(var _j=0,_ref=floor(array.length/2);0<=_ref?_j<_ref:_j>_ref;0<=_ref?_j++:_j--){_results1.push(_j);}return _results1;}.apply(this).reverse();_results=[];for(_i=0,_len=_ref1.length;_i<_len;_i++){i=_ref1[_i];_results.push(_siftup(array,i,cmp));}return _results;};updateItem=function(array,item,cmp){var pos;if(cmp==null){cmp=defaultCmp;}pos=array.indexOf(item);if(pos===-1){return;}_siftdown(array,0,pos,cmp);return _siftup(array,pos,cmp);};nlargest=function(array,n,cmp){var elem,result,_i,_len,_ref;if(cmp==null){cmp=defaultCmp;}result=array.slice(0,n);if(!result.length){return result;}heapify(result,cmp);_ref=array.slice(n);for(_i=0,_len=_ref.length;_i<_len;_i++){elem=_ref[_i];heappushpop(result,elem,cmp);}return result.sort(cmp).reverse();};nsmallest=function(array,n,cmp){var elem,i,los,result,_i,_j,_len,_ref,_ref1,_results;if(cmp==null){cmp=defaultCmp;}if(n*10<=array.length){result=array.slice(0,n).sort(cmp);if(!result.length){return result;}los=result[result.length-1];_ref=array.slice(n);for(_i=0,_len=_ref.length;_i<_len;_i++){elem=_ref[_i];if(cmp(elem,los)<0){insort(result,elem,0,null,cmp);result.pop();los=result[result.length-1];}}return result;}heapify(array,cmp);_results=[];for(i=_j=0,_ref1=min(n,array.length);0<=_ref1?_j<_ref1:_j>_ref1;i=0<=_ref1?++_j:--_j){_results.push(heappop(array,cmp));}return _results;};_siftdown=function(array,startpos,pos,cmp){var newitem,parent,parentpos;if(cmp==null){cmp=defaultCmp;}newitem=array[pos];while(pos>startpos){parentpos=pos-1>>1;parent=array[parentpos];if(cmp(newitem,parent)<0){array[pos]=parent;pos=parentpos;continue;}break;}return array[pos]=newitem;};_siftup=function(array,pos,cmp){var childpos,endpos,newitem,rightpos,startpos;if(cmp==null){cmp=defaultCmp;}endpos=array.length;startpos=pos;newitem=array[pos];childpos=2*pos+1;while(childpos<endpos){rightpos=childpos+1;if(rightpos<endpos&&!(cmp(array[childpos],array[rightpos])<0)){childpos=rightpos;}array[pos]=array[childpos];pos=childpos;childpos=2*pos+1;}array[pos]=newitem;return _siftdown(array,startpos,pos,cmp);};Heap=function(){Heap.push=heappush;Heap.pop=heappop;Heap.replace=heapreplace;Heap.pushpop=heappushpop;Heap.heapify=heapify;Heap.updateItem=updateItem;Heap.nlargest=nlargest;Heap.nsmallest=nsmallest;function Heap(cmp){this.cmp=cmp!=null?cmp:defaultCmp;this.nodes=[];}Heap.prototype.push=function(x){return heappush(this.nodes,x,this.cmp);};Heap.prototype.pop=function(){return heappop(this.nodes,this.cmp);};Heap.prototype.peek=function(){return this.nodes[0];};Heap.prototype.contains=function(x){return this.nodes.indexOf(x)!==-1;};Heap.prototype.replace=function(x){return heapreplace(this.nodes,x,this.cmp);};Heap.prototype.pushpop=function(x){return heappushpop(this.nodes,x,this.cmp);};Heap.prototype.heapify=function(){return heapify(this.nodes,this.cmp);};Heap.prototype.updateItem=function(x){return updateItem(this.nodes,x,this.cmp);};Heap.prototype.clear=function(){return this.nodes=[];};Heap.prototype.empty=function(){return this.nodes.length===0;};Heap.prototype.size=function(){return this.nodes.length;};Heap.prototype.clone=function(){var heap;heap=new Heap();heap.nodes=this.nodes.slice(0);return heap;};Heap.prototype.toArray=function(){return this.nodes.slice(0);};Heap.prototype.insert=Heap.prototype.push;Heap.prototype.top=Heap.prototype.peek;Heap.prototype.front=Heap.prototype.peek;Heap.prototype.has=Heap.prototype.contains;Heap.prototype.copy=Heap.prototype.clone;return Heap;}();(function(root,factory){if(typeof define==='function'&&define.amd){return define([],factory);}else if(true){return module.exports=factory();}else{}})(this,function(){return Heap;});}).call(this);},2789:function(module){module.exports=[["0","\u0000",128],["a1","",62],["8140","",9,""],["8180",""],["81b8",""],["81c8",""],["81da",""],["81f0",""],["81fc",""],["824f","",9],["8260","",25],["8281","",25],["829f","",82],["8340","",62],["8380","",22],["839f","",16,"",6],["83bf","",16,"",6],["8440","",5,"",25],["8470","",5,"",7],["8480","",17],["849f",""],["8740","",19,"",9],["875f",""],["877e",""],["8780","",4,""],["889f",""],["8940",""],["8980",""],["8a40",""],["8a80",""],["8b40",""],["8b80",""],["8c40",""],["8c80",""],["8d40",""],["8d80",""],["8e40",""],["8e80",""],["8f40",""],["8f80",""],["9040",""],["9080",""],["9140",""],["9180",""],["9240",""],["9280",""],["9340",""],["9380",""],["9440",""],["9480",""],["9540",""],["9580",""],["9640",""],["9680",""],["9740",""],["9780",""],["9840",""],["989f",""],["9940",""],["9980",""],["9a40",""],["9a80",""],["9b40",""],["9b80",""],["9c40",""],["9c80",""],["9d40",""],["9d80",""],["9e40",""],["9e80",""],["9f40",""],["9f80",""],["e040",""],["e080",""],["e140",""],["e180",""],["e240",""],["e280",""],["e340",""],["e380",""],["e440",""],["e480",""],["e540",""],["e580",""],["e640",""],["e680",""],["e740",""],["e780",""],["e840",""],["e880",""],["e940",""],["e980",""],["ea40",""],["ea80",""],["ed40",""],["ed80",""],["ee40",""],["ee80",""],["eeef","",9,""],["f040","",62],["f080","",124],["f140","",62],["f180","",124],["f240","",62],["f280","",124],["f340","",62],["f380","",124],["f440","",62],["f480","",124],["f540","",62],["f580","",124],["f640","",62],["f680","",124],["f740","",62],["f780","",124],["f840","",62],["f880","",124],["f940",""],["fa40","",9,"",9,""],["fa80",""],["fb40",""],["fb80",""],["fc40",""]];},2796:function(module,__unusedexports,__webpack_require__){"use strict";const waterfall=__webpack_require__(4265);const CID=__webpack_require__(9339);const log=__webpack_require__(746)('ipfs:mfs:utils:load-node');const loadNode=(context,dagLink,callback)=>{const cid=new CID(dagLink.cid);log(`Loading DAGNode for child ${cid.toBaseEncodedString()}`);waterfall([cb=>context.ipld.get(cid,cb),(result,cb)=>cb(null,{node:result.value,cid})],callback);};module.exports=loadNode;},2797:function(module,__unusedexports,__webpack_require__){"use strict";const lockfile=__webpack_require__(1627);const{toPromise,toSync,toSyncOptions}=__webpack_require__(3528);async function lock(file,options){const release=await toPromise(lockfile.lock)(file,options);return toPromise(release);}function lockSync(file,options){const release=toSync(lockfile.lock)(file,toSyncOptions(options));return toSync(release);}function unlock(file,options){return toPromise(lockfile.unlock)(file,options);}function unlockSync(file,options){return toSync(lockfile.unlock)(file,toSyncOptions(options));}function check(file,options){return toPromise(lockfile.check)(file,options);}function checkSync(file,options){return toSync(lockfile.check)(file,toSyncOptions(options));}module.exports=lock;module.exports.lock=lock;module.exports.unlock=unlock;module.exports.lockSync=lockSync;module.exports.unlockSync=unlockSync;module.exports.check=check;module.exports.checkSync=checkSync;},2802:function(module,__unusedexports,__webpack_require__){"use strict";const Any=__webpack_require__(7492);const Hoek=__webpack_require__(2850);const internals={};internals.Lazy=class extends Any{constructor(){super();this._type='lazy';this._flags.once=true;this._cache=null;}_init(fn,options){return this.set(fn,options);}_base(value,state,options){let schema;if(this._cache){schema=this._cache;}else{const result={value};const lazy=this._flags.lazy;if(!lazy){result.errors=this.createError('lazy.base',null,state,options);return result;}schema=lazy();if(!(schema instanceof Any)){result.errors=this.createError('lazy.schema',{schema},state,options);return result;}if(this._flags.once){this._cache=schema;}}return schema._validate(value,state,options);}set(fn,options){Hoek.assert(typeof fn==='function','You must provide a function as first argument');Hoek.assert(options===undefined||options&&typeof options==='object'&&!Array.isArray(options),`Options must be an object`);if(options){const unknownOptions=Object.keys(options).filter(key=>!['once'].includes(key));Hoek.assert(unknownOptions.length===0,`Options contain unknown keys: ${unknownOptions}`);Hoek.assert(options.once===undefined||typeof options.once==='boolean','Option "once" must be a boolean');}const obj=this.clone();obj._flags.lazy=fn;if(options&&options.once!==obj._flags.once){obj._flags.once=options.once;}return obj;}};module.exports=new internals.Lazy();},2805:function(module,exports,__webpack_require__){exports=module.exports=createDebug.debug=createDebug['default']=createDebug;exports.coerce=coerce;exports.disable=disable;exports.enable=enable;exports.enabled=enabled;exports.humanize=__webpack_require__(5795);exports.instances=[];exports.names=[];exports.skips=[];exports.formatters={};function selectColor(namespace){var hash=0,i;for(i in namespace){hash=(hash<<5)-hash+namespace.charCodeAt(i);hash|=0;}return exports.colors[Math.abs(hash)%exports.colors.length];}function createDebug(namespace){var prevTime;function debug(){if(!debug.enabled)return;var self=debug;var curr=+new Date();var ms=curr-(prevTime||curr);self.diff=ms;self.prev=prevTime;self.curr=curr;prevTime=curr;var args=new Array(arguments.length);for(var i=0;i<args.length;i++){args[i]=arguments[i];}args[0]=exports.coerce(args[0]);if('string'!==typeof args[0]){args.unshift('%O');}var index=0;args[0]=args[0].replace(/%([a-zA-Z%])/g,function(match,format){if(match==='%%')return match;index++;var formatter=exports.formatters[format];if('function'===typeof formatter){var val=args[index];match=formatter.call(self,val);args.splice(index,1);index--;}return match;});exports.formatArgs.call(self,args);var logFn=debug.log||exports.log||console.log.bind(console);logFn.apply(self,args);}debug.namespace=namespace;debug.enabled=exports.enabled(namespace);debug.useColors=exports.useColors();debug.color=selectColor(namespace);debug.destroy=destroy;if('function'===typeof exports.init){exports.init(debug);}exports.instances.push(debug);return debug;}function destroy(){var index=exports.instances.indexOf(this);if(index!==-1){exports.instances.splice(index,1);return true;}else{return false;}}function enable(namespaces){exports.save(namespaces);exports.names=[];exports.skips=[];var i;var split=(typeof namespaces==='string'?namespaces:'').split(/[\s,]+/);var len=split.length;for(i=0;i<len;i++){if(!split[i])continue;namespaces=split[i].replace(/\*/g,'.*?');if(namespaces[0]==='-'){exports.skips.push(new RegExp('^'+namespaces.substr(1)+'$'));}else{exports.names.push(new RegExp('^'+namespaces+'$'));}}for(i=0;i<exports.instances.length;i++){var instance=exports.instances[i];instance.enabled=exports.enabled(instance.namespace);}}function disable(){exports.enable('');}function enabled(name){if(name[name.length-1]==='*'){return true;}var i,len;for(i=0,len=exports.skips.length;i<len;i++){if(exports.skips[i].test(name)){return false;}}for(i=0,len=exports.names.length;i<len;i++){if(exports.names[i].test(name)){return true;}}return false;}function coerce(val){if(val instanceof Error)return val.stack||val.message;return val;}},2807:function(module){"use strict";class Event{constructor(type,target){this.target=target;this.type=type;}}class MessageEvent extends Event{constructor(data,target){super('message',target);this.data=data;}}class CloseEvent extends Event{constructor(code,reason,target){super('close',target);this.wasClean=target._closeFrameReceived&&target._closeFrameSent;this.reason=reason;this.code=code;}}class OpenEvent extends Event{constructor(target){super('open',target);}}class ErrorEvent extends Event{constructor(error,target){super('error',target);this.message=error.message;this.error=error;}}const EventTarget={addEventListener(method,listener){if(typeof listener!=='function')return;function onMessage(data){listener.call(this,new MessageEvent(data,this));}function onClose(code,message){listener.call(this,new CloseEvent(code,message,this));}function onError(error){listener.call(this,new ErrorEvent(error,this));}function onOpen(){listener.call(this,new OpenEvent(this));}if(method==='message'){onMessage._listener=listener;this.on(method,onMessage);}else if(method==='close'){onClose._listener=listener;this.on(method,onClose);}else if(method==='error'){onError._listener=listener;this.on(method,onError);}else if(method==='open'){onOpen._listener=listener;this.on(method,onOpen);}else{this.on(method,listener);}},removeEventListener(method,listener){const listeners=this.listeners(method);for(var i=0;i<listeners.length;i++){if(listeners[i]===listener||listeners[i]._listener===listener){this.removeListener(method,listeners[i]);}}}};module.exports=EventTarget;},2809:function(module,__unusedexports,__webpack_require__){var ERRORS=__webpack_require__(8605);var NATIVE=__webpack_require__(7819);var tfJSON=ERRORS.tfJSON;var TfTypeError=ERRORS.TfTypeError;var TfPropertyTypeError=ERRORS.TfPropertyTypeError;var tfSubError=ERRORS.tfSubError;var getValueTypeName=ERRORS.getValueTypeName;var TYPES={arrayOf:function arrayOf(type,options){type=compile(type);options=options||{};function _arrayOf(array,strict){if(!NATIVE.Array(array))return false;if(NATIVE.Nil(array))return false;if(options.minLength!==undefined&&array.length<options.minLength)return false;if(options.maxLength!==undefined&&array.length>options.maxLength)return false;if(options.length!==undefined&&array.length!==options.length)return false;return array.every(function(value,i){try{return typeforce(type,value,strict);}catch(e){throw tfSubError(e,i);}});}_arrayOf.toJSON=function(){var str='['+tfJSON(type)+']';if(options.length!==undefined){str+='{'+options.length+'}';}else if(options.minLength!==undefined||options.maxLength!==undefined){str+='{'+(options.minLength===undefined?0:options.minLength)+','+(options.maxLength===undefined?Infinity:options.maxLength)+'}';}return str;};return _arrayOf;},maybe:function maybe(type){type=compile(type);function _maybe(value,strict){return NATIVE.Nil(value)||type(value,strict,maybe);}_maybe.toJSON=function(){return'?'+tfJSON(type);};return _maybe;},map:function map(propertyType,propertyKeyType){propertyType=compile(propertyType);if(propertyKeyType)propertyKeyType=compile(propertyKeyType);function _map(value,strict){if(!NATIVE.Object(value))return false;if(NATIVE.Nil(value))return false;for(var propertyName in value){try{if(propertyKeyType){typeforce(propertyKeyType,propertyName,strict);}}catch(e){throw tfSubError(e,propertyName,'key');}try{var propertyValue=value[propertyName];typeforce(propertyType,propertyValue,strict);}catch(e){throw tfSubError(e,propertyName);}}return true;}if(propertyKeyType){_map.toJSON=function(){return'{'+tfJSON(propertyKeyType)+': '+tfJSON(propertyType)+'}';};}else{_map.toJSON=function(){return'{'+tfJSON(propertyType)+'}';};}return _map;},object:function object(uncompiled){var type={};for(var typePropertyName in uncompiled){type[typePropertyName]=compile(uncompiled[typePropertyName]);}function _object(value,strict){if(!NATIVE.Object(value))return false;if(NATIVE.Nil(value))return false;var propertyName;try{for(propertyName in type){var propertyType=type[propertyName];var propertyValue=value[propertyName];typeforce(propertyType,propertyValue,strict);}}catch(e){throw tfSubError(e,propertyName);}if(strict){for(propertyName in value){if(type[propertyName])continue;throw new TfPropertyTypeError(undefined,propertyName);}}return true;}_object.toJSON=function(){return tfJSON(type);};return _object;},anyOf:function anyOf(){var types=[].slice.call(arguments).map(compile);function _anyOf(value,strict){return types.some(function(type){try{return typeforce(type,value,strict);}catch(e){return false;}});}_anyOf.toJSON=function(){return types.map(tfJSON).join('|');};return _anyOf;},allOf:function allOf(){var types=[].slice.call(arguments).map(compile);function _allOf(value,strict){return types.every(function(type){try{return typeforce(type,value,strict);}catch(e){return false;}});}_allOf.toJSON=function(){return types.map(tfJSON).join(' & ');};return _allOf;},quacksLike:function quacksLike(type){function _quacksLike(value){return type===getValueTypeName(value);}_quacksLike.toJSON=function(){return type;};return _quacksLike;},tuple:function tuple(){var types=[].slice.call(arguments).map(compile);function _tuple(values,strict){if(NATIVE.Nil(values))return false;if(NATIVE.Nil(values.length))return false;if(strict&&values.length!==types.length)return false;return types.every(function(type,i){try{return typeforce(type,values[i],strict);}catch(e){throw tfSubError(e,i);}});}_tuple.toJSON=function(){return'('+types.map(tfJSON).join(', ')+')';};return _tuple;},value:function value(expected){function _value(actual){return actual===expected;}_value.toJSON=function(){return expected;};return _value;}};TYPES.oneOf=TYPES.anyOf;function compile(type){if(NATIVE.String(type)){if(type[0]==='?')return TYPES.maybe(type.slice(1));return NATIVE[type]||TYPES.quacksLike(type);}else if(type&&NATIVE.Object(type)){if(NATIVE.Array(type)){if(type.length!==1)throw new TypeError('Expected compile() parameter of type Array of length 1');return TYPES.arrayOf(type[0]);}return TYPES.object(type);}else if(NATIVE.Function(type)){return type;}return TYPES.value(type);}function typeforce(type,value,strict,surrogate){if(NATIVE.Function(type)){if(type(value,strict))return true;throw new TfTypeError(surrogate||type,value);}return typeforce(compile(type),value,strict);}for(var typeName in NATIVE){typeforce[typeName]=NATIVE[typeName];}for(typeName in TYPES){typeforce[typeName]=TYPES[typeName];}var EXTRA=__webpack_require__(4821);for(typeName in EXTRA){typeforce[typeName]=EXTRA[typeName];}typeforce.compile=compile;typeforce.TfTypeError=TfTypeError;typeforce.TfPropertyTypeError=TfPropertyTypeError;module.exports=typeforce;},2811:function(module,__unusedexports,__webpack_require__){"use strict";function concat(list,totalLength){const target=Buffer.allocUnsafe(totalLength);var offset=0;for(var i=0;i<list.length;i++){const buf=list[i];buf.copy(target,offset);offset+=buf.length;}return target;}function _mask(source,mask,output,offset,length){for(var i=0;i<length;i++){output[offset+i]=source[i]^mask[i&3];}}function _unmask(buffer,mask){const length=buffer.length;for(var i=0;i<length;i++){buffer[i]^=mask[i&3];}}try{const bufferUtil=__webpack_require__(1277);const bu=bufferUtil.BufferUtil||bufferUtil;module.exports={mask(source,mask,output,offset,length){if(length<48)_mask(source,mask,output,offset,length);else bu.mask(source,mask,output,offset,length);},unmask(buffer,mask){if(buffer.length<32)_unmask(buffer,mask);else bu.unmask(buffer,mask);},concat};}catch(e){module.exports={concat,mask:_mask,unmask:_unmask};}},2814:function(module,__unusedexports,__webpack_require__){var baseGet=__webpack_require__(858);function get(object,path,defaultValue){var result=object==null?undefined:baseGet(object,path);return result===undefined?defaultValue:result;}module.exports=get;},2817:function(module,exports,__webpack_require__){var Stream=__webpack_require__(6886);if(process.env.READABLE_STREAM==='disable'&&Stream){module.exports=Stream.Readable;Object.assign(module.exports,Stream);module.exports.Stream=Stream;}else{exports=module.exports=__webpack_require__(4541);exports.Stream=Stream||exports;exports.Readable=exports;exports.Writable=__webpack_require__(1217);exports.Duplex=__webpack_require__(1686);exports.Transform=__webpack_require__(8439);exports.PassThrough=__webpack_require__(2183);exports.finished=__webpack_require__(6814);exports.pipeline=__webpack_require__(3594);}},2820:function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(5721);exports.log=log;exports.formatArgs=formatArgs;exports.save=save;exports.load=load;exports.useColors=useColors;exports.storage='undefined'!=typeof chrome&&'undefined'!=typeof chrome.storage?chrome.storage.local:localstorage();exports.colors=['#0000CC','#0000FF','#0033CC','#0033FF','#0066CC','#0066FF','#0099CC','#0099FF','#00CC00','#00CC33','#00CC66','#00CC99','#00CCCC','#00CCFF','#3300CC','#3300FF','#3333CC','#3333FF','#3366CC','#3366FF','#3399CC','#3399FF','#33CC00','#33CC33','#33CC66','#33CC99','#33CCCC','#33CCFF','#6600CC','#6600FF','#6633CC','#6633FF','#66CC00','#66CC33','#9900CC','#9900FF','#9933CC','#9933FF','#99CC00','#99CC33','#CC0000','#CC0033','#CC0066','#CC0099','#CC00CC','#CC00FF','#CC3300','#CC3333','#CC3366','#CC3399','#CC33CC','#CC33FF','#CC6600','#CC6633','#CC9900','#CC9933','#CCCC00','#CCCC33','#FF0000','#FF0033','#FF0066','#FF0099','#FF00CC','#FF00FF','#FF3300','#FF3333','#FF3366','#FF3399','#FF33CC','#FF33FF','#FF6600','#FF6633','#FF9900','#FF9933','#FFCC00','#FFCC33'];function useColors(){if(typeof window!=='undefined'&&window.process&&window.process.type==='renderer'){return true;}if(typeof navigator!=='undefined'&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)){return false;}return typeof document!=='undefined'&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!=='undefined'&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!=='undefined'&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!=='undefined'&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/);}exports.formatters.j=function(v){try{return JSON.stringify(v);}catch(err){return'[UnexpectedJSONParseError]: '+err.message;}};function formatArgs(args){var useColors=this.useColors;args[0]=(useColors?'%c':'')+this.namespace+(useColors?' %c':' ')+args[0]+(useColors?'%c ':' ')+'+'+exports.humanize(this.diff);if(!useColors)return;var c='color: '+this.color;args.splice(1,0,c,'color: inherit');var index=0;var lastC=0;args[0].replace(/%[a-zA-Z%]/g,function(match){if('%%'===match)return;index++;if('%c'===match){lastC=index;}});args.splice(lastC,0,c);}function log(){return'object'===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments);}function save(namespaces){try{if(null==namespaces){exports.storage.removeItem('debug');}else{exports.storage.debug=namespaces;}}catch(e){}}function load(){var r;try{r=exports.storage.debug;}catch(e){}if(!r&&typeof process!=='undefined'&&'env'in process){r=process.env.DEBUG;}return r;}exports.enable(load());function localstorage(){try{return window.localStorage;}catch(e){}}},2825:function(module,__unusedexports,__webpack_require__){var util=__webpack_require__(649),isValidUTF8=__webpack_require__(7438),ErrorCodes=__webpack_require__(4083),BufferPool=__webpack_require__(2512),bufferUtil=__webpack_require__(4855),PerMessageDeflate=__webpack_require__(7505);function Receiver(extensions,maxPayload){if(this instanceof Receiver===false){throw new TypeError("Classes can't be function-called");}if(typeof extensions==='number'){maxPayload=extensions;extensions={};}var fragmentedPoolPrevUsed=-1;this.fragmentedBufferPool=new BufferPool(1024,function(db,length){return db.used+length;},function(db){return fragmentedPoolPrevUsed=fragmentedPoolPrevUsed>=0?Math.ceil((fragmentedPoolPrevUsed+db.used)/2):db.used;});var unfragmentedPoolPrevUsed=-1;this.unfragmentedBufferPool=new BufferPool(1024,function(db,length){return db.used+length;},function(db){return unfragmentedPoolPrevUsed=unfragmentedPoolPrevUsed>=0?Math.ceil((unfragmentedPoolPrevUsed+db.used)/2):db.used;});this.extensions=extensions||{};this.maxPayload=maxPayload||0;this.currentPayloadLength=0;this.state={activeFragmentedOperation:null,lastFragment:false,masked:false,opcode:0,fragmentedOperation:false};this.overflow=[];this.headerBuffer=new Buffer(10);this.expectOffset=0;this.expectBuffer=null;this.expectHandler=null;this.currentMessage=[];this.currentMessageLength=0;this.messageHandlers=[];this.expectHeader(2,this.processPacket);this.dead=false;this.processing=false;this.onerror=function(){};this.ontext=function(){};this.onbinary=function(){};this.onclose=function(){};this.onping=function(){};this.onpong=function(){};}module.exports=Receiver;Receiver.prototype.add=function(data){if(this.dead)return;var dataLength=data.length;if(dataLength==0)return;if(this.expectBuffer==null){this.overflow.push(data);return;}var toRead=Math.min(dataLength,this.expectBuffer.length-this.expectOffset);fastCopy(toRead,data,this.expectBuffer,this.expectOffset);this.expectOffset+=toRead;if(toRead<dataLength){this.overflow.push(data.slice(toRead));}while(this.expectBuffer&&this.expectOffset==this.expectBuffer.length){var bufferForHandler=this.expectBuffer;this.expectBuffer=null;this.expectOffset=0;this.expectHandler.call(this,bufferForHandler);}};Receiver.prototype.cleanup=function(){this.dead=true;this.overflow=null;this.headerBuffer=null;this.expectBuffer=null;this.expectHandler=null;this.unfragmentedBufferPool=null;this.fragmentedBufferPool=null;this.state=null;this.currentMessage=null;this.onerror=null;this.ontext=null;this.onbinary=null;this.onclose=null;this.onping=null;this.onpong=null;};Receiver.prototype.expectHeader=function(length,handler){if(length==0){handler(null);return;}this.expectBuffer=this.headerBuffer.slice(this.expectOffset,this.expectOffset+length);this.expectHandler=handler;var toRead=length;while(toRead>0&&this.overflow.length>0){var fromOverflow=this.overflow.pop();if(toRead<fromOverflow.length)this.overflow.push(fromOverflow.slice(toRead));var read=Math.min(fromOverflow.length,toRead);fastCopy(read,fromOverflow,this.expectBuffer,this.expectOffset);this.expectOffset+=read;toRead-=read;}};Receiver.prototype.expectData=function(length,handler){if(length==0){handler(null);return;}this.expectBuffer=this.allocateFromPool(length,this.state.fragmentedOperation);this.expectHandler=handler;var toRead=length;while(toRead>0&&this.overflow.length>0){var fromOverflow=this.overflow.pop();if(toRead<fromOverflow.length)this.overflow.push(fromOverflow.slice(toRead));var read=Math.min(fromOverflow.length,toRead);fastCopy(read,fromOverflow,this.expectBuffer,this.expectOffset);this.expectOffset+=read;toRead-=read;}};Receiver.prototype.allocateFromPool=function(length,isFragmented){return(isFragmented?this.fragmentedBufferPool:this.unfragmentedBufferPool).get(length);};Receiver.prototype.processPacket=function(data){if(this.extensions[PerMessageDeflate.extensionName]){if((data[0]&0x30)!=0){this.error('reserved fields (2, 3) must be empty',1002);return;}}else{if((data[0]&0x70)!=0){this.error('reserved fields must be empty',1002);return;}}this.state.lastFragment=(data[0]&0x80)==0x80;this.state.masked=(data[1]&0x80)==0x80;var compressed=(data[0]&0x40)==0x40;var opcode=data[0]&0xf;if(opcode===0){if(compressed){this.error('continuation frame cannot have the Per-message Compressed bits',1002);return;}this.state.fragmentedOperation=true;this.state.opcode=this.state.activeFragmentedOperation;if(!(this.state.opcode==1||this.state.opcode==2)){this.error('continuation frame cannot follow current opcode',1002);return;}}else{if(opcode<3&&this.state.activeFragmentedOperation!=null){this.error('data frames after the initial data frame must have opcode 0',1002);return;}if(opcode>=8&&compressed){this.error('control frames cannot have the Per-message Compressed bits',1002);return;}this.state.compressed=compressed;this.state.opcode=opcode;if(this.state.lastFragment===false){this.state.fragmentedOperation=true;this.state.activeFragmentedOperation=opcode;}else this.state.fragmentedOperation=false;}var handler=opcodes[this.state.opcode];if(typeof handler=='undefined')this.error('no handler for opcode '+this.state.opcode,1002);else{handler.start.call(this,data);}};Receiver.prototype.endPacket=function(){if(this.dead)return;if(!this.state.fragmentedOperation)this.unfragmentedBufferPool.reset(true);else if(this.state.lastFragment)this.fragmentedBufferPool.reset(true);this.expectOffset=0;this.expectBuffer=null;this.expectHandler=null;if(this.state.lastFragment&&this.state.opcode===this.state.activeFragmentedOperation){this.state.activeFragmentedOperation=null;}this.currentPayloadLength=0;this.state.lastFragment=false;this.state.opcode=this.state.activeFragmentedOperation!=null?this.state.activeFragmentedOperation:0;this.state.masked=false;this.expectHeader(2,this.processPacket);};Receiver.prototype.reset=function(){if(this.dead)return;this.state={activeFragmentedOperation:null,lastFragment:false,masked:false,opcode:0,fragmentedOperation:false};this.fragmentedBufferPool.reset(true);this.unfragmentedBufferPool.reset(true);this.expectOffset=0;this.expectBuffer=null;this.expectHandler=null;this.overflow=[];this.currentMessage=[];this.currentMessageLength=0;this.messageHandlers=[];this.currentPayloadLength=0;};Receiver.prototype.unmask=function(mask,buf,binary){if(mask!=null&&buf!=null)bufferUtil.unmask(buf,mask);if(binary)return buf;return buf!=null?buf.toString('utf8'):'';};Receiver.prototype.error=function(reason,protocolErrorCode){if(this.dead)return;this.reset();if(typeof reason=='string'){this.onerror(new Error(reason),protocolErrorCode);}else if(reason.constructor==Error){this.onerror(reason,protocolErrorCode);}else{this.onerror(new Error("An error occured"),protocolErrorCode);}return this;};Receiver.prototype.flush=function(){if(this.processing||this.dead)return;var handler=this.messageHandlers.shift();if(!handler)return;this.processing=true;var self=this;handler(function(){self.processing=false;self.flush();});};Receiver.prototype.applyExtensions=function(messageBuffer,fin,compressed,callback){var self=this;if(compressed){this.extensions[PerMessageDeflate.extensionName].decompress(messageBuffer,fin,function(err,buffer){if(self.dead)return;if(err){callback(new Error('invalid compressed data'));return;}callback(null,buffer);});}else{callback(null,messageBuffer);}};Receiver.prototype.maxPayloadExceeded=function(length){if(this.maxPayload===undefined||this.maxPayload===null||this.maxPayload<1){return false;}var fullLength=this.currentPayloadLength+length;if(fullLength<this.maxPayload){this.currentPayloadLength=fullLength;return false;}this.error('payload cannot exceed '+this.maxPayload+' bytes',1009);this.messageBuffer=[];this.cleanup();return true;};function readUInt16BE(start){return(this[start]<<8)+this[start+1];}function readUInt32BE(start){return(this[start]<<24)+(this[start+1]<<16)+(this[start+2]<<8)+this[start+3];}function fastCopy(length,srcBuffer,dstBuffer,dstOffset){switch(length){default:srcBuffer.copy(dstBuffer,dstOffset,0,length);break;case 16:dstBuffer[dstOffset+15]=srcBuffer[15];case 15:dstBuffer[dstOffset+14]=srcBuffer[14];case 14:dstBuffer[dstOffset+13]=srcBuffer[13];case 13:dstBuffer[dstOffset+12]=srcBuffer[12];case 12:dstBuffer[dstOffset+11]=srcBuffer[11];case 11:dstBuffer[dstOffset+10]=srcBuffer[10];case 10:dstBuffer[dstOffset+9]=srcBuffer[9];case 9:dstBuffer[dstOffset+8]=srcBuffer[8];case 8:dstBuffer[dstOffset+7]=srcBuffer[7];case 7:dstBuffer[dstOffset+6]=srcBuffer[6];case 6:dstBuffer[dstOffset+5]=srcBuffer[5];case 5:dstBuffer[dstOffset+4]=srcBuffer[4];case 4:dstBuffer[dstOffset+3]=srcBuffer[3];case 3:dstBuffer[dstOffset+2]=srcBuffer[2];case 2:dstBuffer[dstOffset+1]=srcBuffer[1];case 1:dstBuffer[dstOffset]=srcBuffer[0];}}function clone(obj){var cloned={};for(var k in obj){if(obj.hasOwnProperty(k)){cloned[k]=obj[k];}}return cloned;}var opcodes={'1':{start:function(data){var self=this;var firstLength=data[1]&0x7f;if(firstLength<126){if(self.maxPayloadExceeded(firstLength)){self.error('Maximumpayload exceeded in compressed text message. Aborting...',1009);return;}opcodes['1'].getData.call(self,firstLength);}else if(firstLength==126){self.expectHeader(2,function(data){var length=readUInt16BE.call(data,0);if(self.maxPayloadExceeded(length)){self.error('Maximumpayload exceeded in compressed text message. Aborting...',1009);return;}opcodes['1'].getData.call(self,length);});}else if(firstLength==127){self.expectHeader(8,function(data){if(readUInt32BE.call(data,0)!=0){self.error('packets with length spanning more than 32 bit is currently not supported',1008);return;}var length=readUInt32BE.call(data,4);if(self.maxPayloadExceeded(length)){self.error('Maximumpayload exceeded in compressed text message. Aborting...',1009);return;}opcodes['1'].getData.call(self,readUInt32BE.call(data,4));});}},getData:function(length){var self=this;if(self.state.masked){self.expectHeader(4,function(data){var mask=data;self.expectData(length,function(data){opcodes['1'].finish.call(self,mask,data);});});}else{self.expectData(length,function(data){opcodes['1'].finish.call(self,null,data);});}},finish:function(mask,data){var self=this;var packet=this.unmask(mask,data,true)||new Buffer(0);var state=clone(this.state);this.messageHandlers.push(function(callback){self.applyExtensions(packet,state.lastFragment,state.compressed,function(err,buffer){if(err){if(err.type===1009){return self.error('Maximumpayload exceeded in compressed text message. Aborting...',1009);}return self.error(err.message,1007);}if(buffer!=null){if(self.maxPayload==0||self.maxPayload>0&&self.currentMessageLength+buffer.length<self.maxPayload){self.currentMessage.push(buffer);}else{self.currentMessage=null;self.currentMessage=[];self.currentMessageLength=0;self.error(new Error('Maximum payload exceeded. maxPayload: '+self.maxPayload),1009);return;}self.currentMessageLength+=buffer.length;}if(state.lastFragment){var messageBuffer=Buffer.concat(self.currentMessage);self.currentMessage=[];self.currentMessageLength=0;if(!isValidUTF8(messageBuffer)){self.error('invalid utf8 sequence',1007);return;}self.ontext(messageBuffer.toString('utf8'),{masked:state.masked,buffer:messageBuffer});}callback();});});this.flush();this.endPacket();}},'2':{start:function(data){var self=this;var firstLength=data[1]&0x7f;if(firstLength<126){if(self.maxPayloadExceeded(firstLength)){self.error('Max payload exceeded in compressed text message. Aborting...',1009);return;}opcodes['2'].getData.call(self,firstLength);}else if(firstLength==126){self.expectHeader(2,function(data){var length=readUInt16BE.call(data,0);if(self.maxPayloadExceeded(length)){self.error('Max payload exceeded in compressed text message. Aborting...',1009);return;}opcodes['2'].getData.call(self,length);});}else if(firstLength==127){self.expectHeader(8,function(data){if(readUInt32BE.call(data,0)!=0){self.error('packets with length spanning more than 32 bit is currently not supported',1008);return;}var length=readUInt32BE.call(data,4,true);if(self.maxPayloadExceeded(length)){self.error('Max payload exceeded in compressed text message. Aborting...',1009);return;}opcodes['2'].getData.call(self,length);});}},getData:function(length){var self=this;if(self.state.masked){self.expectHeader(4,function(data){var mask=data;self.expectData(length,function(data){opcodes['2'].finish.call(self,mask,data);});});}else{self.expectData(length,function(data){opcodes['2'].finish.call(self,null,data);});}},finish:function(mask,data){var self=this;var packet=this.unmask(mask,data,true)||new Buffer(0);var state=clone(this.state);this.messageHandlers.push(function(callback){self.applyExtensions(packet,state.lastFragment,state.compressed,function(err,buffer){if(err){if(err.type===1009){return self.error('Max payload exceeded in compressed binary message. Aborting...',1009);}return self.error(err.message,1007);}if(buffer!=null){if(self.maxPayload==0||self.maxPayload>0&&self.currentMessageLength+buffer.length<self.maxPayload){self.currentMessage.push(buffer);}else{self.currentMessage=null;self.currentMessage=[];self.currentMessageLength=0;self.error(new Error('Maximum payload exceeded'),1009);return;}self.currentMessageLength+=buffer.length;}if(state.lastFragment){var messageBuffer=Buffer.concat(self.currentMessage);self.currentMessage=[];self.currentMessageLength=0;self.onbinary(messageBuffer,{masked:state.masked,buffer:messageBuffer});}callback();});});this.flush();this.endPacket();}},'8':{start:function(data){var self=this;if(self.state.lastFragment==false){self.error('fragmented close is not supported',1002);return;}var firstLength=data[1]&0x7f;if(firstLength<126){opcodes['8'].getData.call(self,firstLength);}else{self.error('control frames cannot have more than 125 bytes of data',1002);}},getData:function(length){var self=this;if(self.state.masked){self.expectHeader(4,function(data){var mask=data;self.expectData(length,function(data){opcodes['8'].finish.call(self,mask,data);});});}else{self.expectData(length,function(data){opcodes['8'].finish.call(self,null,data);});}},finish:function(mask,data){var self=this;data=self.unmask(mask,data,true);var state=clone(this.state);this.messageHandlers.push(function(){if(data&&data.length==1){self.error('close packets with data must be at least two bytes long',1002);return;}var code=data&&data.length>1?readUInt16BE.call(data,0):1000;if(!ErrorCodes.isValidErrorCode(code)){self.error('invalid error code',1002);return;}var message='';if(data&&data.length>2){var messageBuffer=data.slice(2);if(!isValidUTF8(messageBuffer)){self.error('invalid utf8 sequence',1007);return;}message=messageBuffer.toString('utf8');}self.onclose(code,message,{masked:state.masked});self.reset();});this.flush();}},'9':{start:function(data){var self=this;if(self.state.lastFragment==false){self.error('fragmented ping is not supported',1002);return;}var firstLength=data[1]&0x7f;if(firstLength<126){opcodes['9'].getData.call(self,firstLength);}else{self.error('control frames cannot have more than 125 bytes of data',1002);}},getData:function(length){var self=this;if(self.state.masked){self.expectHeader(4,function(data){var mask=data;self.expectData(length,function(data){opcodes['9'].finish.call(self,mask,data);});});}else{self.expectData(length,function(data){opcodes['9'].finish.call(self,null,data);});}},finish:function(mask,data){var self=this;data=this.unmask(mask,data,true);var state=clone(this.state);this.messageHandlers.push(function(callback){self.onping(data,{masked:state.masked,binary:true});callback();});this.flush();this.endPacket();}},'10':{start:function(data){var self=this;if(self.state.lastFragment==false){self.error('fragmented pong is not supported',1002);return;}var firstLength=data[1]&0x7f;if(firstLength<126){opcodes['10'].getData.call(self,firstLength);}else{self.error('control frames cannot have more than 125 bytes of data',1002);}},getData:function(length){var self=this;if(this.state.masked){this.expectHeader(4,function(data){var mask=data;self.expectData(length,function(data){opcodes['10'].finish.call(self,mask,data);});});}else{this.expectData(length,function(data){opcodes['10'].finish.call(self,null,data);});}},finish:function(mask,data){var self=this;data=self.unmask(mask,data,true);var state=clone(this.state);this.messageHandlers.push(function(callback){self.onpong(data,{masked:state.masked,binary:true});callback();});this.flush();this.endPacket();}}};},2833:function(module,__unusedexports,__webpack_require__){"use strict";function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==='function'){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable;}));}ownKeys.forEach(function(key){_defineProperty(target,key,source[key]);});}return target;}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}var _require=__webpack_require__(9423),Buffer=_require.Buffer;var _require2=__webpack_require__(649),inspect=_require2.inspect;var custom=inspect&&inspect.custom||'inspect';function copyBuffer(src,target,offset){Buffer.prototype.copy.call(src,target,offset);}module.exports=function(){function BufferList(){this.head=null;this.tail=null;this.length=0;}var _proto=BufferList.prototype;_proto.push=function push(v){var entry={data:v,next:null};if(this.length>0)this.tail.next=entry;else this.head=entry;this.tail=entry;++this.length;};_proto.unshift=function unshift(v){var entry={data:v,next:this.head};if(this.length===0)this.tail=entry;this.head=entry;++this.length;};_proto.shift=function shift(){if(this.length===0)return;var ret=this.head.data;if(this.length===1)this.head=this.tail=null;else this.head=this.head.next;--this.length;return ret;};_proto.clear=function clear(){this.head=this.tail=null;this.length=0;};_proto.join=function join(s){if(this.length===0)return'';var p=this.head;var ret=''+p.data;while(p=p.next){ret+=s+p.data;}return ret;};_proto.concat=function concat(n){if(this.length===0)return Buffer.alloc(0);var ret=Buffer.allocUnsafe(n>>>0);var p=this.head;var i=0;while(p){copyBuffer(p.data,ret,i);i+=p.data.length;p=p.next;}return ret;};_proto.consume=function consume(n,hasStrings){var ret;if(n<this.head.data.length){ret=this.head.data.slice(0,n);this.head.data=this.head.data.slice(n);}else if(n===this.head.data.length){ret=this.shift();}else{ret=hasStrings?this._getString(n):this._getBuffer(n);}return ret;};_proto.first=function first(){return this.head.data;};_proto._getString=function _getString(n){var p=this.head;var c=1;var ret=p.data;n-=ret.length;while(p=p.next){var str=p.data;var nb=n>str.length?str.length:n;if(nb===str.length)ret+=str;else ret+=str.slice(0,n);n-=nb;if(n===0){if(nb===str.length){++c;if(p.next)this.head=p.next;else this.head=this.tail=null;}else{this.head=p;p.data=str.slice(nb);}break;}++c;}this.length-=c;return ret;};_proto._getBuffer=function _getBuffer(n){var ret=Buffer.allocUnsafe(n);var p=this.head;var c=1;p.data.copy(ret);n-=p.data.length;while(p=p.next){var buf=p.data;var nb=n>buf.length?buf.length:n;buf.copy(ret,ret.length-n,0,nb);n-=nb;if(n===0){if(nb===buf.length){++c;if(p.next)this.head=p.next;else this.head=this.tail=null;}else{this.head=p;p.data=buf.slice(nb);}break;}++c;}this.length-=c;return ret;};_proto[custom]=function(_,options){return inspect(this,_objectSpread({},options,{depth:0,customInspect:false}));};return BufferList;}();},2839:function(module,__unusedexports,__webpack_require__){"use strict";const{open,write,close,rename,fsync,unlink}=__webpack_require__(662);const{join,dirname}=__webpack_require__(5897);var counter=0;function id(){return process.pid+'.'+counter++;}function cleanup(dest,err,cb){unlink(dest,function(){cb(err);});}function closeAndCleanup(fd,dest,err,cb){close(fd,cleanup.bind(null,dest,err,cb));}function writeLoop(fd,content,offset,cb){write(fd,content,offset,function(err,bytesWritten){if(err){cb(err);return;}if(bytesWritten!==content.length-offset){writeLoop(fd,content,offset+bytesWritten,cb);}else{cb(null);}});}function openLoop(dest,cb){open(dest,'w',function(err,fd){if(err){if(err.code==='EMFILE'){openLoop(dest,cb);return;}cb(err);return;}cb(null,fd);});}function writeAtomic(path,content,cb){const tmp=join(dirname(path),'.'+id());openLoop(tmp,function(err,fd){if(err){cb(err);return;}writeLoop(fd,content,0,function(err){if(err){closeAndCleanup(fd,tmp,err,cb);return;}fsync(fd,function(err){if(err){closeAndCleanup(fd,tmp,err,cb);return;}close(fd,function(err){if(err){cleanup(tmp,err,cb);return;}rename(tmp,path,err=>{if(err){cleanup(tmp,err,cb);return;}cb(null);});});});});content=null;});}module.exports=writeAtomic;},2841:function(module){"use strict";const SECOND=1000;module.exports={maxProvidersPerRequest:3,providerRequestTimeout:10*SECOND,hasBlockTimeout:15*SECOND,provideTimeout:15*SECOND,kMaxPriority:Math.pow(2,31)-1,rebroadcastDelay:10*SECOND,maxListeners:1000};},2843:function(module,__unusedexports,__webpack_require__){"use strict";var pna=__webpack_require__(88);module.exports=Readable;var isArray=__webpack_require__(4797);var Duplex;Readable.ReadableState=ReadableState;var EE=__webpack_require__(4859).EventEmitter;var EElistenerCount=function(emitter,type){return emitter.listeners(type).length;};var Stream=__webpack_require__(8017);var Buffer=__webpack_require__(7572).Buffer;var OurUint8Array=global.Uint8Array||function(){};function _uint8ArrayToBuffer(chunk){return Buffer.from(chunk);}function _isUint8Array(obj){return Buffer.isBuffer(obj)||obj instanceof OurUint8Array;}var util=__webpack_require__(5548);util.inherits=__webpack_require__(92);var debugUtil=__webpack_require__(649);var debug=void 0;if(debugUtil&&debugUtil.debuglog){debug=debugUtil.debuglog('stream');}else{debug=function(){};}var BufferList=__webpack_require__(3622);var destroyImpl=__webpack_require__(2213);var StringDecoder;util.inherits(Readable,Stream);var kProxyEvents=['error','close','destroy','pause','resume'];function prependListener(emitter,event,fn){if(typeof emitter.prependListener==='function')return emitter.prependListener(event,fn);if(!emitter._events||!emitter._events[event])emitter.on(event,fn);else if(isArray(emitter._events[event]))emitter._events[event].unshift(fn);else emitter._events[event]=[fn,emitter._events[event]];}function ReadableState(options,stream){Duplex=Duplex||__webpack_require__(1283);options=options||{};var isDuplex=stream instanceof Duplex;this.objectMode=!!options.objectMode;if(isDuplex)this.objectMode=this.objectMode||!!options.readableObjectMode;var hwm=options.highWaterMark;var readableHwm=options.readableHighWaterMark;var defaultHwm=this.objectMode?16:16*1024;if(hwm||hwm===0)this.highWaterMark=hwm;else if(isDuplex&&(readableHwm||readableHwm===0))this.highWaterMark=readableHwm;else this.highWaterMark=defaultHwm;this.highWaterMark=Math.floor(this.highWaterMark);this.buffer=new BufferList();this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.ended=false;this.endEmitted=false;this.reading=false;this.sync=true;this.needReadable=false;this.emittedReadable=false;this.readableListening=false;this.resumeScheduled=false;this.destroyed=false;this.defaultEncoding=options.defaultEncoding||'utf8';this.awaitDrain=0;this.readingMore=false;this.decoder=null;this.encoding=null;if(options.encoding){if(!StringDecoder)StringDecoder=__webpack_require__(1235).StringDecoder;this.decoder=new StringDecoder(options.encoding);this.encoding=options.encoding;}}function Readable(options){Duplex=Duplex||__webpack_require__(1283);if(!(this instanceof Readable))return new Readable(options);this._readableState=new ReadableState(options,this);this.readable=true;if(options){if(typeof options.read==='function')this._read=options.read;if(typeof options.destroy==='function')this._destroy=options.destroy;}Stream.call(this);}Object.defineProperty(Readable.prototype,'destroyed',{get:function(){if(this._readableState===undefined){return false;}return this._readableState.destroyed;},set:function(value){if(!this._readableState){return;}this._readableState.destroyed=value;}});Readable.prototype.destroy=destroyImpl.destroy;Readable.prototype._undestroy=destroyImpl.undestroy;Readable.prototype._destroy=function(err,cb){this.push(null);cb(err);};Readable.prototype.push=function(chunk,encoding){var state=this._readableState;var skipChunkCheck;if(!state.objectMode){if(typeof chunk==='string'){encoding=encoding||state.defaultEncoding;if(encoding!==state.encoding){chunk=Buffer.from(chunk,encoding);encoding='';}skipChunkCheck=true;}}else{skipChunkCheck=true;}return readableAddChunk(this,chunk,encoding,false,skipChunkCheck);};Readable.prototype.unshift=function(chunk){return readableAddChunk(this,chunk,null,true,false);};function readableAddChunk(stream,chunk,encoding,addToFront,skipChunkCheck){var state=stream._readableState;if(chunk===null){state.reading=false;onEofChunk(stream,state);}else{var er;if(!skipChunkCheck)er=chunkInvalid(state,chunk);if(er){stream.emit('error',er);}else if(state.objectMode||chunk&&chunk.length>0){if(typeof chunk!=='string'&&!state.objectMode&&Object.getPrototypeOf(chunk)!==Buffer.prototype){chunk=_uint8ArrayToBuffer(chunk);}if(addToFront){if(state.endEmitted)stream.emit('error',new Error('stream.unshift() after end event'));else addChunk(stream,state,chunk,true);}else if(state.ended){stream.emit('error',new Error('stream.push() after EOF'));}else{state.reading=false;if(state.decoder&&!encoding){chunk=state.decoder.write(chunk);if(state.objectMode||chunk.length!==0)addChunk(stream,state,chunk,false);else maybeReadMore(stream,state);}else{addChunk(stream,state,chunk,false);}}}else if(!addToFront){state.reading=false;}}return needMoreData(state);}function addChunk(stream,state,chunk,addToFront){if(state.flowing&&state.length===0&&!state.sync){stream.emit('data',chunk);stream.read(0);}else{state.length+=state.objectMode?1:chunk.length;if(addToFront)state.buffer.unshift(chunk);else state.buffer.push(chunk);if(state.needReadable)emitReadable(stream);}maybeReadMore(stream,state);}function chunkInvalid(state,chunk){var er;if(!_isUint8Array(chunk)&&typeof chunk!=='string'&&chunk!==undefined&&!state.objectMode){er=new TypeError('Invalid non-string/buffer chunk');}return er;}function needMoreData(state){return!state.ended&&(state.needReadable||state.length<state.highWaterMark||state.length===0);}Readable.prototype.isPaused=function(){return this._readableState.flowing===false;};Readable.prototype.setEncoding=function(enc){if(!StringDecoder)StringDecoder=__webpack_require__(1235).StringDecoder;this._readableState.decoder=new StringDecoder(enc);this._readableState.encoding=enc;return this;};var MAX_HWM=0x800000;function computeNewHighWaterMark(n){if(n>=MAX_HWM){n=MAX_HWM;}else{n--;n|=n>>>1;n|=n>>>2;n|=n>>>4;n|=n>>>8;n|=n>>>16;n++;}return n;}function howMuchToRead(n,state){if(n<=0||state.length===0&&state.ended)return 0;if(state.objectMode)return 1;if(n!==n){if(state.flowing&&state.length)return state.buffer.head.data.length;else return state.length;}if(n>state.highWaterMark)state.highWaterMark=computeNewHighWaterMark(n);if(n<=state.length)return n;if(!state.ended){state.needReadable=true;return 0;}return state.length;}Readable.prototype.read=function(n){debug('read',n);n=parseInt(n,10);var state=this._readableState;var nOrig=n;if(n!==0)state.emittedReadable=false;if(n===0&&state.needReadable&&(state.length>=state.highWaterMark||state.ended)){debug('read: emitReadable',state.length,state.ended);if(state.length===0&&state.ended)endReadable(this);else emitReadable(this);return null;}n=howMuchToRead(n,state);if(n===0&&state.ended){if(state.length===0)endReadable(this);return null;}var doRead=state.needReadable;debug('need readable',doRead);if(state.length===0||state.length-n<state.highWaterMark){doRead=true;debug('length less than watermark',doRead);}if(state.ended||state.reading){doRead=false;debug('reading or ended',doRead);}else if(doRead){debug('do read');state.reading=true;state.sync=true;if(state.length===0)state.needReadable=true;this._read(state.highWaterMark);state.sync=false;if(!state.reading)n=howMuchToRead(nOrig,state);}var ret;if(n>0)ret=fromList(n,state);else ret=null;if(ret===null){state.needReadable=true;n=0;}else{state.length-=n;}if(state.length===0){if(!state.ended)state.needReadable=true;if(nOrig!==n&&state.ended)endReadable(this);}if(ret!==null)this.emit('data',ret);return ret;};function onEofChunk(stream,state){if(state.ended)return;if(state.decoder){var chunk=state.decoder.end();if(chunk&&chunk.length){state.buffer.push(chunk);state.length+=state.objectMode?1:chunk.length;}}state.ended=true;emitReadable(stream);}function emitReadable(stream){var state=stream._readableState;state.needReadable=false;if(!state.emittedReadable){debug('emitReadable',state.flowing);state.emittedReadable=true;if(state.sync)pna.nextTick(emitReadable_,stream);else emitReadable_(stream);}}function emitReadable_(stream){debug('emit readable');stream.emit('readable');flow(stream);}function maybeReadMore(stream,state){if(!state.readingMore){state.readingMore=true;pna.nextTick(maybeReadMore_,stream,state);}}function maybeReadMore_(stream,state){var len=state.length;while(!state.reading&&!state.flowing&&!state.ended&&state.length<state.highWaterMark){debug('maybeReadMore read 0');stream.read(0);if(len===state.length)break;else len=state.length;}state.readingMore=false;}Readable.prototype._read=function(n){this.emit('error',new Error('_read() is not implemented'));};Readable.prototype.pipe=function(dest,pipeOpts){var src=this;var state=this._readableState;switch(state.pipesCount){case 0:state.pipes=dest;break;case 1:state.pipes=[state.pipes,dest];break;default:state.pipes.push(dest);break;}state.pipesCount+=1;debug('pipe count=%d opts=%j',state.pipesCount,pipeOpts);var doEnd=(!pipeOpts||pipeOpts.end!==false)&&dest!==process.stdout&&dest!==process.stderr;var endFn=doEnd?onend:unpipe;if(state.endEmitted)pna.nextTick(endFn);else src.once('end',endFn);dest.on('unpipe',onunpipe);function onunpipe(readable,unpipeInfo){debug('onunpipe');if(readable===src){if(unpipeInfo&&unpipeInfo.hasUnpiped===false){unpipeInfo.hasUnpiped=true;cleanup();}}}function onend(){debug('onend');dest.end();}var ondrain=pipeOnDrain(src);dest.on('drain',ondrain);var cleanedUp=false;function cleanup(){debug('cleanup');dest.removeListener('close',onclose);dest.removeListener('finish',onfinish);dest.removeListener('drain',ondrain);dest.removeListener('error',onerror);dest.removeListener('unpipe',onunpipe);src.removeListener('end',onend);src.removeListener('end',unpipe);src.removeListener('data',ondata);cleanedUp=true;if(state.awaitDrain&&(!dest._writableState||dest._writableState.needDrain))ondrain();}var increasedAwaitDrain=false;src.on('data',ondata);function ondata(chunk){debug('ondata');increasedAwaitDrain=false;var ret=dest.write(chunk);if(false===ret&&!increasedAwaitDrain){if((state.pipesCount===1&&state.pipes===dest||state.pipesCount>1&&indexOf(state.pipes,dest)!==-1)&&!cleanedUp){debug('false write response, pause',src._readableState.awaitDrain);src._readableState.awaitDrain++;increasedAwaitDrain=true;}src.pause();}}function onerror(er){debug('onerror',er);unpipe();dest.removeListener('error',onerror);if(EElistenerCount(dest,'error')===0)dest.emit('error',er);}prependListener(dest,'error',onerror);function onclose(){dest.removeListener('finish',onfinish);unpipe();}dest.once('close',onclose);function onfinish(){debug('onfinish');dest.removeListener('close',onclose);unpipe();}dest.once('finish',onfinish);function unpipe(){debug('unpipe');src.unpipe(dest);}dest.emit('pipe',src);if(!state.flowing){debug('pipe resume');src.resume();}return dest;};function pipeOnDrain(src){return function(){var state=src._readableState;debug('pipeOnDrain',state.awaitDrain);if(state.awaitDrain)state.awaitDrain--;if(state.awaitDrain===0&&EElistenerCount(src,'data')){state.flowing=true;flow(src);}};}Readable.prototype.unpipe=function(dest){var state=this._readableState;var unpipeInfo={hasUnpiped:false};if(state.pipesCount===0)return this;if(state.pipesCount===1){if(dest&&dest!==state.pipes)return this;if(!dest)dest=state.pipes;state.pipes=null;state.pipesCount=0;state.flowing=false;if(dest)dest.emit('unpipe',this,unpipeInfo);return this;}if(!dest){var dests=state.pipes;var len=state.pipesCount;state.pipes=null;state.pipesCount=0;state.flowing=false;for(var i=0;i<len;i++){dests[i].emit('unpipe',this,unpipeInfo);}return this;}var index=indexOf(state.pipes,dest);if(index===-1)return this;state.pipes.splice(index,1);state.pipesCount-=1;if(state.pipesCount===1)state.pipes=state.pipes[0];dest.emit('unpipe',this,unpipeInfo);return this;};Readable.prototype.on=function(ev,fn){var res=Stream.prototype.on.call(this,ev,fn);if(ev==='data'){if(this._readableState.flowing!==false)this.resume();}else if(ev==='readable'){var state=this._readableState;if(!state.endEmitted&&!state.readableListening){state.readableListening=state.needReadable=true;state.emittedReadable=false;if(!state.reading){pna.nextTick(nReadingNextTick,this);}else if(state.length){emitReadable(this);}}}return res;};Readable.prototype.addListener=Readable.prototype.on;function nReadingNextTick(self){debug('readable nexttick read 0');self.read(0);}Readable.prototype.resume=function(){var state=this._readableState;if(!state.flowing){debug('resume');state.flowing=true;resume(this,state);}return this;};function resume(stream,state){if(!state.resumeScheduled){state.resumeScheduled=true;pna.nextTick(resume_,stream,state);}}function resume_(stream,state){if(!state.reading){debug('resume read 0');stream.read(0);}state.resumeScheduled=false;state.awaitDrain=0;stream.emit('resume');flow(stream);if(state.flowing&&!state.reading)stream.read(0);}Readable.prototype.pause=function(){debug('call pause flowing=%j',this._readableState.flowing);if(false!==this._readableState.flowing){debug('pause');this._readableState.flowing=false;this.emit('pause');}return this;};function flow(stream){var state=stream._readableState;debug('flow',state.flowing);while(state.flowing&&stream.read()!==null){}}Readable.prototype.wrap=function(stream){var _this=this;var state=this._readableState;var paused=false;stream.on('end',function(){debug('wrapped end');if(state.decoder&&!state.ended){var chunk=state.decoder.end();if(chunk&&chunk.length)_this.push(chunk);}_this.push(null);});stream.on('data',function(chunk){debug('wrapped data');if(state.decoder)chunk=state.decoder.write(chunk);if(state.objectMode&&(chunk===null||chunk===undefined))return;else if(!state.objectMode&&(!chunk||!chunk.length))return;var ret=_this.push(chunk);if(!ret){paused=true;stream.pause();}});for(var i in stream){if(this[i]===undefined&&typeof stream[i]==='function'){this[i]=function(method){return function(){return stream[method].apply(stream,arguments);};}(i);}}for(var n=0;n<kProxyEvents.length;n++){stream.on(kProxyEvents[n],this.emit.bind(this,kProxyEvents[n]));}this._read=function(n){debug('wrapped _read',n);if(paused){paused=false;stream.resume();}};return this;};Object.defineProperty(Readable.prototype,'readableHighWaterMark',{enumerable:false,get:function(){return this._readableState.highWaterMark;}});Readable._fromList=fromList;function fromList(n,state){if(state.length===0)return null;var ret;if(state.objectMode)ret=state.buffer.shift();else if(!n||n>=state.length){if(state.decoder)ret=state.buffer.join('');else if(state.buffer.length===1)ret=state.buffer.head.data;else ret=state.buffer.concat(state.length);state.buffer.clear();}else{ret=fromListPartial(n,state.buffer,state.decoder);}return ret;}function fromListPartial(n,list,hasStrings){var ret;if(n<list.head.data.length){ret=list.head.data.slice(0,n);list.head.data=list.head.data.slice(n);}else if(n===list.head.data.length){ret=list.shift();}else{ret=hasStrings?copyFromBufferString(n,list):copyFromBuffer(n,list);}return ret;}function copyFromBufferString(n,list){var p=list.head;var c=1;var ret=p.data;n-=ret.length;while(p=p.next){var str=p.data;var nb=n>str.length?str.length:n;if(nb===str.length)ret+=str;else ret+=str.slice(0,n);n-=nb;if(n===0){if(nb===str.length){++c;if(p.next)list.head=p.next;else list.head=list.tail=null;}else{list.head=p;p.data=str.slice(nb);}break;}++c;}list.length-=c;return ret;}function copyFromBuffer(n,list){var ret=Buffer.allocUnsafe(n);var p=list.head;var c=1;p.data.copy(ret);n-=p.data.length;while(p=p.next){var buf=p.data;var nb=n>buf.length?buf.length:n;buf.copy(ret,ret.length-n,0,nb);n-=nb;if(n===0){if(nb===buf.length){++c;if(p.next)list.head=p.next;else list.head=list.tail=null;}else{list.head=p;p.data=buf.slice(nb);}break;}++c;}list.length-=c;return ret;}function endReadable(stream){var state=stream._readableState;if(state.length>0)throw new Error('"endReadable()" called on non-empty stream');if(!state.endEmitted){state.ended=true;pna.nextTick(endReadableNT,state,stream);}}function endReadableNT(state,stream){if(!state.endEmitted&&state.length===0){state.endEmitted=true;stream.readable=false;stream.emit('end');}}function indexOf(xs,x){for(var i=0,l=xs.length;i<l;i++){if(xs[i]===x)return i;}return-1;}},2848:function(module,__unusedexports,__webpack_require__){"use strict";const CID=__webpack_require__(9339);const parallel=__webpack_require__(4876);const PeerInfo=__webpack_require__(9265);const errcode=__webpack_require__(4999);const Message=__webpack_require__(6102);const utils=__webpack_require__(2869);module.exports=dht=>{const log=utils.logger(dht.peerInfo.id,'rpc:get-providers');return function getProviders(peer,msg,callback){let cid;try{cid=new CID(msg.key);}catch(err){return callback(errcode(new Error(`Invalid CID: ${err.message}`),'ERR_INVALID_CID'));}log('%s',cid.toBaseEncodedString());const dsKey=utils.bufferToKey(cid.buffer);parallel([cb=>dht.datastore.has(dsKey,(err,exists)=>{if(err){log.error('Failed to check datastore existence',err);return cb(null,false);}cb(null,exists);}),cb=>dht.providers.getProviders(cid,cb),cb=>dht._betterPeersToQuery(msg,peer,cb)],(err,res)=>{if(err){return callback(err);}const has=res[0];const closer=res[2];const providers=res[1].map(p=>{if(dht.peerBook.has(p)){return dht.peerBook.get(p);}return dht.peerBook.put(new PeerInfo(p));});if(has){providers.push(dht.peerInfo);}const response=new Message(msg.type,msg.key,msg.clusterLevel);if(providers.length>0){response.providerPeers=providers;}if(closer.length>0){response.closerPeers=closer;}log('got %s providers %s closerPeers',providers.length,closer.length);callback(null,response);});};};},2850:function(__unusedmodule,exports,__webpack_require__){"use strict";const Assert=__webpack_require__(3930);const Crypto=__webpack_require__(2984);const Path=__webpack_require__(5897);const DeepEqual=__webpack_require__(1144);const Escape=__webpack_require__(4189);const internals={};exports.deepEqual=DeepEqual;exports.clone=function(obj,options={},_seen=null){if(typeof obj!=='object'||obj===null){return obj;}const seen=_seen||new Map();const lookup=seen.get(obj);if(lookup){return lookup;}let newObj;let cloneDeep=false;const isArray=Array.isArray(obj);if(!isArray){if(Buffer.isBuffer(obj)){newObj=Buffer.from(obj);}else if(obj instanceof Date){newObj=new Date(obj.getTime());}else if(obj instanceof RegExp){newObj=new RegExp(obj);}else{const proto=Object.getPrototypeOf(obj);if(proto&&proto.isImmutable){newObj=obj;}else{newObj=Object.create(proto);cloneDeep=true;}}}else{newObj=[];cloneDeep=true;}seen.set(obj,newObj);if(cloneDeep){const keys=internals.keys(obj,options);for(let i=0;i<keys.length;++i){const key=keys[i];if(isArray&&key==='length'){continue;}const descriptor=Object.getOwnPropertyDescriptor(obj,key);if(descriptor&&(descriptor.get||descriptor.set)){Object.defineProperty(newObj,key,descriptor);}else{Object.defineProperty(newObj,key,{enumerable:descriptor?descriptor.enumerable:true,writable:true,configurable:true,value:exports.clone(obj[key],options,seen)});}}if(isArray){newObj.length=obj.length;}}return newObj;};internals.keys=function(obj,options={}){return options.symbols?Reflect.ownKeys(obj):Object.getOwnPropertyNames(obj);};exports.merge=function(target,source,isNullOverride,isMergeArrays){exports.assert(target&&typeof target==='object','Invalid target value: must be an object');exports.assert(source===null||source===undefined||typeof source==='object','Invalid source value: must be null, undefined, or an object');if(!source){return target;}if(Array.isArray(source)){exports.assert(Array.isArray(target),'Cannot merge array onto an object');if(isMergeArrays===false){target.length=0;}for(let i=0;i<source.length;++i){target.push(exports.clone(source[i]));}return target;}const keys=internals.keys(source);for(let i=0;i<keys.length;++i){const key=keys[i];if(key==='__proto__'||!Object.prototype.propertyIsEnumerable.call(source,key)){continue;}const value=source[key];if(value&&typeof value==='object'){if(!target[key]||typeof target[key]!=='object'||Array.isArray(target[key])!==Array.isArray(value)||value instanceof Date||Buffer.isBuffer(value)||value instanceof RegExp){target[key]=exports.clone(value);}else{exports.merge(target[key],value,isNullOverride,isMergeArrays);}}else{if(value!==null&&value!==undefined){target[key]=value;}else if(isNullOverride!==false){target[key]=value;}}}return target;};exports.applyToDefaults=function(defaults,options,isNullOverride){exports.assert(defaults&&typeof defaults==='object','Invalid defaults value: must be an object');exports.assert(!options||options===true||typeof options==='object','Invalid options value: must be true, falsy or an object');if(!options){return null;}const copy=exports.clone(defaults);if(options===true){return copy;}return exports.merge(copy,options,isNullOverride===true,false);};exports.cloneWithShallow=function(source,keys,options){if(!source||typeof source!=='object'){return source;}const storage=internals.store(source,keys);const copy=exports.clone(source,options);internals.restore(copy,source,storage);return copy;};internals.store=function(source,keys){const storage=new Map();for(let i=0;i<keys.length;++i){const key=keys[i];const value=exports.reach(source,key);if(typeof value==='object'||typeof value==='function'){storage.set(key,value);internals.reachSet(source,key,undefined);}}return storage;};internals.restore=function(copy,source,storage){for(const[key,value]of storage){internals.reachSet(copy,key,value);internals.reachSet(source,key,value);}};internals.reachSet=function(obj,key,value){const path=Array.isArray(key)?key:key.split('.');let ref=obj;for(let i=0;i<path.length;++i){const segment=path[i];if(i+1===path.length){ref[segment]=value;}ref=ref[segment];}};exports.applyToDefaultsWithShallow=function(defaults,options,keys){exports.assert(defaults&&typeof defaults==='object','Invalid defaults value: must be an object');exports.assert(!options||options===true||typeof options==='object','Invalid options value: must be true, falsy or an object');exports.assert(keys&&Array.isArray(keys),'Invalid keys');if(!options){return null;}const copy=exports.cloneWithShallow(defaults,keys);if(options===true){return copy;}const storage=internals.store(options,keys);exports.merge(copy,options,false,false);internals.restore(copy,options,storage);return copy;};exports.intersect=function(array1,array2,justFirst){if(!array1||!array2){return justFirst?null:[];}const common=[];const hash=Array.isArray(array1)?new Set(array1):array1;const found=new Set();for(const value of array2){if(internals.has(hash,value)&&!found.has(value)){if(justFirst){return value;}common.push(value);found.add(value);}}return justFirst?null:common;};internals.has=function(ref,key){if(typeof ref.has==='function'){return ref.has(key);}return ref[key]!==undefined;};exports.contain=function(ref,values,options={}){let valuePairs=null;if(typeof ref==='object'&&typeof values==='object'&&!Array.isArray(ref)&&!Array.isArray(values)){valuePairs=values;const symbols=Object.getOwnPropertySymbols(values).filter(Object.prototype.propertyIsEnumerable.bind(values));values=[...Object.keys(values),...symbols];}else{values=[].concat(values);}exports.assert(typeof ref==='string'||typeof ref==='object','Reference must be string or an object');exports.assert(values.length,'Values array cannot be empty');let compare;let compareFlags;if(options.deep){compare=exports.deepEqual;const hasOnly=options.hasOwnProperty('only');const hasPart=options.hasOwnProperty('part');compareFlags={prototype:hasOnly?options.only:hasPart?!options.part:false,part:hasOnly?!options.only:hasPart?options.part:false};}else{compare=(a,b)=>a===b;}let misses=false;const matches=new Array(values.length);for(let i=0;i<matches.length;++i){matches[i]=0;}if(typeof ref==='string'){let pattern='(';for(let i=0;i<values.length;++i){const value=values[i];exports.assert(typeof value==='string','Cannot compare string reference to non-string value');pattern+=(i?'|':'')+exports.escapeRegex(value);}const regex=new RegExp(pattern+')','g');const leftovers=ref.replace(regex,($0,$1)=>{const index=values.indexOf($1);++matches[index];return'';});misses=!!leftovers;}else if(Array.isArray(ref)){const onlyOnce=!!(options.only&&options.once);if(onlyOnce&&ref.length!==values.length){return false;}for(let i=0;i<ref.length;++i){let matched=false;for(let j=0;j<values.length&&matched===false;++j){if(!onlyOnce||matches[j]===0){matched=compare(values[j],ref[i],compareFlags)&&j;}}if(matched!==false){++matches[matched];}else{misses=true;}}}else{const keys=internals.keys(ref,options);for(let i=0;i<keys.length;++i){const key=keys[i];const pos=values.indexOf(key);if(pos!==-1){if(valuePairs&&!compare(valuePairs[key],ref[key],compareFlags)){return false;}++matches[pos];}else{misses=true;}}}if(options.only){if(misses||!options.once){return!misses;}}let result=false;for(let i=0;i<matches.length;++i){result=result||!!matches[i];if(options.once&&matches[i]>1||!options.part&&!matches[i]){return false;}}return result;};exports.flatten=function(array,target){const result=target||[];for(let i=0;i<array.length;++i){if(Array.isArray(array[i])){exports.flatten(array[i],result);}else{result.push(array[i]);}}return result;};exports.reach=function(obj,chain,options){if(chain===false||chain===null||typeof chain==='undefined'){return obj;}options=options||{};if(typeof options==='string'){options={separator:options};}const isChainArray=Array.isArray(chain);exports.assert(!isChainArray||!options.separator,'Separator option no valid for array-based chain');const path=isChainArray?chain:chain.split(options.separator||'.');let ref=obj;for(let i=0;i<path.length;++i){let key=path[i];if(Array.isArray(ref)){const number=Number(key);if(Number.isInteger(number)&&number<0){key=ref.length+number;}}if(!ref||!((typeof ref==='object'||typeof ref==='function')&&key in ref)||typeof ref!=='object'&&options.functions===false){exports.assert(!options.strict||i+1===path.length,'Missing segment',key,'in reach path ',chain);exports.assert(typeof ref==='object'||options.functions===true||typeof ref!=='function','Invalid segment',key,'in reach path ',chain);ref=options.default;break;}ref=ref[key];}return ref;};exports.reachTemplate=function(obj,template,options){return template.replace(/{([^}]+)}/g,($0,chain)=>{const value=exports.reach(obj,chain,options);return value===undefined||value===null?'':value;});};exports.assert=function(condition,...args){if(condition){return;}if(args.length===1&&args[0]instanceof Error){throw args[0];}const msgs=args.filter(arg=>arg!=='').map(arg=>{return typeof arg==='string'?arg:arg instanceof Error?arg.message:exports.stringify(arg);});throw new Assert.AssertionError({message:msgs.join(' ')||'Unknown error',actual:false,expected:true,operator:'==',stackStartFunction:exports.assert});};exports.Bench=function(){this.ts=0;this.reset();};exports.Bench.prototype.reset=function(){this.ts=exports.Bench.now();};exports.Bench.prototype.elapsed=function(){return exports.Bench.now()-this.ts;};exports.Bench.now=function(){const ts=process.hrtime();return ts[0]*1e3+ts[1]/1e6;};exports.escapeRegex=function(string){return string.replace(/[\^\$\.\*\+\-\?\=\!\:\|\\\/\(\)\[\]\{\}\,]/g,'\\$&');};exports.escapeHeaderAttribute=function(attribute){exports.assert(/^[ \w\!#\$%&'\(\)\*\+,\-\.\/\:;<\=>\?@\[\]\^`\{\|\}~\"\\]*$/.test(attribute),'Bad attribute value ('+attribute+')');return attribute.replace(/\\/g,'\\\\').replace(/\"/g,'\\"');};exports.escapeHtml=function(string){return Escape.escapeHtml(string);};exports.escapeJson=function(string){return Escape.escapeJson(string);};exports.once=function(method){if(method._hoekOnce){return method;}let once=false;const wrapped=function(...args){if(!once){once=true;method(...args);}};wrapped._hoekOnce=true;return wrapped;};exports.ignore=function(){};exports.uniqueFilename=function(path,extension){if(extension){extension=extension[0]!=='.'?'.'+extension:extension;}else{extension='';}path=Path.resolve(path);const name=[Date.now(),process.pid,Crypto.randomBytes(8).toString('hex')].join('-')+extension;return Path.join(path,name);};exports.stringify=function(...args){try{return JSON.stringify.apply(null,args);}catch(err){return'[Cannot display object: '+err.message+']';}};exports.wait=function(timeout){return new Promise(resolve=>setTimeout(resolve,timeout));};exports.block=function(){return new Promise(exports.ignore);};},2869:function(__unusedmodule,exports,__webpack_require__){"use strict";const debug=__webpack_require__(746);const multihashing=__webpack_require__(9424);const mh=__webpack_require__(8757);const Key=__webpack_require__(759).Key;const base32=__webpack_require__(7526);const distance=__webpack_require__(3918);const map=__webpack_require__(7011);const Record=__webpack_require__(6091).Record;const setImmediate=__webpack_require__(7368);const PeerId=__webpack_require__(1832);exports.convertBuffer=(buf,callback)=>{multihashing.digest(buf,'sha2-256',callback);};exports.convertPeerId=(peer,callback)=>{multihashing.digest(peer.id,'sha2-256',callback);};exports.bufferToKey=buf=>{return new Key('/'+exports.encodeBase32(buf),false);};exports.keyForPublicKey=peer=>{return Buffer.concat([Buffer.from('/pk/'),peer.id]);};exports.isPublicKeyKey=key=>{return key.slice(0,4).toString()==='/pk/';};exports.fromPublicKeyKey=key=>{return new PeerId(key.slice(4));};exports.now=()=>{return Date.now();};exports.encodeBase32=buf=>{const enc=new base32.Encoder();return enc.write(buf).finalize();};exports.decodeBase32=raw=>{const dec=new base32.Decoder();return Buffer.from(dec.write(raw).finalize());};exports.sortClosestPeers=(peers,target,callback)=>{map(peers,(peer,cb)=>{exports.convertPeerId(peer,(err,id)=>{if(err){return cb(err);}cb(null,{peer:peer,distance:distance(id,target)});});},(err,distances)=>{if(err){return callback(err);}callback(null,distances.sort(exports.xorCompare).map(d=>d.peer));});};exports.xorCompare=(a,b)=>{return distance.compare(a.distance,b.distance);};exports.pathSize=(resultsWanted,numPaths)=>{return Math.ceil(resultsWanted/numPaths);};exports.createPutRecord=(key,value,callback)=>{const timeReceived=new Date();const rec=new Record(key,value,timeReceived);setImmediate(()=>{callback(null,rec.serialize());});};exports.logger=(id,subsystem)=>{const name=['libp2p','dht'];if(subsystem){name.push(subsystem);}if(id){name.push(`${id.toB58String().slice(0,8)}`);}debug.formatters.b=v=>{return mh.toB58String(v);};const logger=debug(name.join(':'));logger.error=debug(name.concat(['error']).join(':'));return logger;};},2880:function(module,__unusedexports,__webpack_require__){"use strict";module.exports={'shiftjis':{type:'_dbcs',table:function(){return __webpack_require__(2789);},encodeAdd:{'\u00a5':0x5C,'\u203E':0x7E},encodeSkipVals:[{from:0xED40,to:0xF940}]},'csshiftjis':'shiftjis','mskanji':'shiftjis','sjis':'shiftjis','windows31j':'shiftjis','ms31j':'shiftjis','xsjis':'shiftjis','windows932':'shiftjis','ms932':'shiftjis','932':'shiftjis','cp932':'shiftjis','eucjp':{type:'_dbcs',table:function(){return __webpack_require__(2506);},encodeAdd:{'\u00a5':0x5C,'\u203E':0x7E}},'gb2312':'cp936','gb231280':'cp936','gb23121980':'cp936','csgb2312':'cp936','csiso58gb231280':'cp936','euccn':'cp936','windows936':'cp936','ms936':'cp936','936':'cp936','cp936':{type:'_dbcs',table:function(){return __webpack_require__(621);}},'gbk':{type:'_dbcs',table:function(){return __webpack_require__(621).concat(__webpack_require__(1953));}},'xgbk':'gbk','isoir58':'gbk','gb18030':{type:'_dbcs',table:function(){return __webpack_require__(621).concat(__webpack_require__(1953));},gb18030:function(){return __webpack_require__(9393);},encodeSkipVals:[0x80],encodeAdd:{'':0xA2E3}},'chinese':'gb18030','windows949':'cp949','ms949':'cp949','949':'cp949','cp949':{type:'_dbcs',table:function(){return __webpack_require__(9519);}},'cseuckr':'cp949','csksc56011987':'cp949','euckr':'cp949','isoir149':'cp949','korean':'cp949','ksc56011987':'cp949','ksc56011989':'cp949','ksc5601':'cp949','windows950':'cp950','ms950':'cp950','950':'cp950','cp950':{type:'_dbcs',table:function(){return __webpack_require__(9723);}},'big5':'big5hkscs','big5hkscs':{type:'_dbcs',table:function(){return __webpack_require__(9723).concat(__webpack_require__(8169));},encodeSkipVals:[0xa2cc]},'cnbig5':'big5hkscs','csbig5':'big5hkscs','xxbig5':'big5hkscs'};},2882:function(module,__unusedexports,__webpack_require__){"use strict";const toStream=__webpack_require__(864);module.exports=function pingReadableStream(self){return(peerId,opts)=>toStream.source(self.pingPullStream(peerId,opts));};},2885:function(module,exports,__webpack_require__){"use strict";var sources=__webpack_require__(3861);var sinks=__webpack_require__(5513);var throughs=__webpack_require__(8435);exports=module.exports=__webpack_require__(418);exports.pull=exports;for(var k in sources)exports[k]=sources[k];for(var k in throughs)exports[k]=throughs[k];for(var k in sinks)exports[k]=sinks[k];},2887:function(__unusedmodule,exports){exports.encode=function(obj){var str='';for(var i in obj){if(obj.hasOwnProperty(i)){if(str.length)str+='&';str+=encodeURIComponent(i)+'='+encodeURIComponent(obj[i]);}}return str;};exports.decode=function(qs){var qry={};var pairs=qs.split('&');for(var i=0,l=pairs.length;i<l;i++){var pair=pairs[i].split('=');qry[decodeURIComponent(pair[0])]=decodeURIComponent(pair[1]);}return qry;};},2888:function(module){function stubFalse(){return false;}module.exports=stubFalse;},2891:function(module,__unusedexports,__webpack_require__){"use strict";var _Object$setPrototypeO;function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}var finished=__webpack_require__(6814);var kLastResolve=Symbol('lastResolve');var kLastReject=Symbol('lastReject');var kError=Symbol('error');var kEnded=Symbol('ended');var kLastPromise=Symbol('lastPromise');var kHandlePromise=Symbol('handlePromise');var kStream=Symbol('stream');function createIterResult(value,done){return{value:value,done:done};}function readAndResolve(iter){var resolve=iter[kLastResolve];if(resolve!==null){var data=iter[kStream].read();if(data!==null){iter[kLastPromise]=null;iter[kLastResolve]=null;iter[kLastReject]=null;resolve(createIterResult(data,false));}}}function onReadable(iter){process.nextTick(readAndResolve,iter);}function wrapForNext(lastPromise,iter){return function(resolve,reject){lastPromise.then(function(){iter[kHandlePromise](resolve,reject);},reject);};}var AsyncIteratorPrototype=Object.getPrototypeOf(function(){});var ReadableStreamAsyncIteratorPrototype=Object.setPrototypeOf((_Object$setPrototypeO={get stream(){return this[kStream];},next:function next(){var _this=this;var error=this[kError];if(error!==null){return Promise.reject(error);}if(this[kEnded]){return Promise.resolve(createIterResult(null,true));}if(this[kStream].destroyed){return new Promise(function(resolve,reject){process.nextTick(function(){if(_this[kError]){reject(_this[kError]);}else{resolve(createIterResult(null,true));}});});}var lastPromise=this[kLastPromise];var promise;if(lastPromise){promise=new Promise(wrapForNext(lastPromise,this));}else{var data=this[kStream].read();if(data!==null){return Promise.resolve(createIterResult(data,false));}promise=new Promise(this[kHandlePromise]);}this[kLastPromise]=promise;return promise;}},_defineProperty(_Object$setPrototypeO,Symbol.asyncIterator,function(){return this;}),_defineProperty(_Object$setPrototypeO,"return",function _return(){var _this2=this;return new Promise(function(resolve,reject){_this2[kStream].destroy(null,function(err){if(err){reject(err);return;}resolve(createIterResult(null,true));});});}),_Object$setPrototypeO),AsyncIteratorPrototype);var createReadableStreamAsyncIterator=function createReadableStreamAsyncIterator(stream){var _Object$create;var iterator=Object.create(ReadableStreamAsyncIteratorPrototype,(_Object$create={},_defineProperty(_Object$create,kStream,{value:stream,writable:true}),_defineProperty(_Object$create,kLastResolve,{value:null,writable:true}),_defineProperty(_Object$create,kLastReject,{value:null,writable:true}),_defineProperty(_Object$create,kError,{value:null,writable:true}),_defineProperty(_Object$create,kEnded,{value:stream._readableState.endEmitted,writable:true}),_defineProperty(_Object$create,kLastPromise,{value:null,writable:true}),_defineProperty(_Object$create,kHandlePromise,{value:function value(resolve,reject){var data=iterator[kStream].read();if(data){iterator[kLastPromise]=null;iterator[kLastResolve]=null;iterator[kLastReject]=null;resolve(createIterResult(data,false));}else{iterator[kLastResolve]=resolve;iterator[kLastReject]=reject;}},writable:true}),_Object$create));finished(stream,function(err){if(err&&err.code!=='ERR_STREAM_PREMATURE_CLOSE'){var reject=iterator[kLastReject];if(reject!==null){iterator[kLastPromise]=null;iterator[kLastResolve]=null;iterator[kLastReject]=null;reject(err);}iterator[kError]=err;return;}var resolve=iterator[kLastResolve];if(resolve!==null){iterator[kLastPromise]=null;iterator[kLastResolve]=null;iterator[kLastReject]=null;resolve(createIterResult(null,true));}iterator[kEnded]=true;});stream.on('readable',onReadable.bind(null,iterator));return iterator;};module.exports=createReadableStreamAsyncIterator;},2898:function(module,__unusedexports,__webpack_require__){"use strict";const BufferList=__webpack_require__(9310);const through=__webpack_require__(6308);module.exports=options=>{let maxSize=typeof options==='number'?options:options.maxChunkSize;let bl=new BufferList();let currentLength=0;let emitted=false;return through(function onData(buffer){bl.append(buffer);currentLength+=buffer.length;while(currentLength>=maxSize){this.queue(bl.slice(0,maxSize));emitted=true;if(maxSize===bl.length){bl=new BufferList();currentLength=0;}else{const newBl=new BufferList();newBl.append(bl.shallowSlice(maxSize));bl=newBl;currentLength-=maxSize;}}},function onEnd(){if(currentLength){this.queue(bl.slice(0,currentLength));emitted=true;}if(!emitted){this.queue(Buffer.alloc(0));}this.queue(null);});};},2904:function(module,__unusedexports,__webpack_require__){"use strict";const debug=__webpack_require__(746);const IncomingConnection=__webpack_require__(1164);const observeConn=__webpack_require__(1179);function listener(_switch){const log=debug(`libp2p:switch:listener`);return(transportKey,handler)=>{return conn=>{const connection=transportKey?observeConn(transportKey,null,conn,_switch.observer):conn;log('received incoming connection');const connFSM=new IncomingConnection({connection,_switch,transportKey});connFSM.once('error',err=>log(err));connFSM.once('private',_conn=>{if(handler){return handler(_conn);}connFSM.encrypt();});connFSM.once('encrypted',()=>connFSM.upgrade());connFSM.protect();};};}module.exports=listener;},2909:function(module,__unusedexports,__webpack_require__){"use strict";const debug=__webpack_require__(746);const promisify=__webpack_require__(6955);const waterfall=__webpack_require__(4265);const parallel=__webpack_require__(4876);const human=__webpack_require__(3595);const crypto=__webpack_require__(318);const errcode=__webpack_require__(4999);const log=debug('jsipfs:name');log.error=debug('jsipfs:name:error');const namePubsub=__webpack_require__(7189);const utils=__webpack_require__(5527);const path=__webpack_require__(4622);const keyLookup=(ipfsNode,kname,callback)=>{if(kname==='self'){return callback(null,ipfsNode._peerInfo.id.privKey);}const pass=ipfsNode._options.pass;waterfall([cb=>ipfsNode._keychain.exportKey(kname,pass,cb),(pem,cb)=>crypto.keys.import(pem,pass,cb)],(err,privateKey)=>{if(err){log.error(err);return callback(errcode(err,'ERR_CANNOT_GET_KEY'));}return callback(null,privateKey);});};module.exports=function name(self){return{publish:promisify((value,options,callback)=>{if(typeof options==='function'){callback=options;options={};}options=options||{};const resolve=!(options.resolve===false);const lifetime=options.lifetime||'24h';const key=options.key||'self';if(!self.isOnline()){const errMsg=utils.OFFLINE_ERROR;log.error(errMsg);return callback(errcode(errMsg,'OFFLINE_ERROR'));}try{value=utils.normalizePath(value);}catch(err){log.error(err);return callback(err);}parallel([cb=>human(lifetime,cb),cb=>keyLookup(self,key,cb),cb=>resolve.toString()==='true'?path.resolvePath(self,value,cb):cb()],(err,results)=>{if(err){log.error(err);return callback(err);}const pubLifetime=results[0].toFixed(6);const privateKey=results[1];self._ipns.publish(privateKey,value,pubLifetime,callback);});}),resolve:promisify((name,options,callback)=>{if(typeof options==='function'){callback=options;options={};}options=options||{};const nocache=options.nocache&&options.nocache.toString()==='true';const recursive=options.recursive&&options.recursive.toString()==='true';const local=self._options.local;if(!self.isOnline()&&!local){const errMsg=utils.OFFLINE_ERROR;log.error(errMsg);return callback(errcode(errMsg,'OFFLINE_ERROR'));}if(local&&nocache){const error='cannot specify both local and nocache';log.error(error);return callback(errcode(new Error(error),'ERR_NOCACHE_AND_LOCAL'));}if(!name){name=self._peerInfo.id.toB58String();}if(!name.startsWith('/ipns/')){name=`/ipns/${name}`;}const resolveOptions={nocache,recursive};self._ipns.resolve(name,resolveOptions,callback);}),pubsub:namePubsub(self)};};},2915:function(module,__unusedexports,__webpack_require__){module.exports=__webpack_require__(649).inherits;},2929:function(module,__unusedexports,__webpack_require__){"use strict";function id(e){return e;}var prop=__webpack_require__(8145);var filter=__webpack_require__(708);module.exports=function unique(field,invert){field=prop(field)||id;var seen={};return filter(function(data){var key=field(data);if(seen[key])return!!invert;else seen[key]=true;return!invert;});};},2956:function(module,exports,__webpack_require__){"use strict";const{Key}=__webpack_require__(759);const{encodeBase32,keyToTopic,topicToKey}=__webpack_require__(7783);const errcode=__webpack_require__(4999);const assert=__webpack_require__(3930);const debug=__webpack_require__(746);const log=debug('datastore-pubsub:publisher');log.error=debug('datastore-pubsub:publisher:error');class DatastorePubsub{constructor(pubsub,datastore,peerId,validator,subscriptionKeyFn){assert.strictEqual(typeof validator,'object','missing validator');assert.strictEqual(typeof validator.validate,'function','missing validate function');assert.strictEqual(typeof validator.select,'function','missing select function');subscriptionKeyFn&&assert.strictEqual(typeof subscriptionKeyFn,'function','invalid subscriptionKeyFn received');this._pubsub=pubsub;this._datastore=datastore;this._peerId=peerId;this._validator=validator;this._handleSubscriptionKeyFn=subscriptionKeyFn;this._onMessage=this._onMessage.bind(this);}put(key,val,callback){if(!Buffer.isBuffer(key)){const errMsg=`datastore key does not have a valid format`;log.error(errMsg);return callback(errcode(new Error(errMsg),'ERR_INVALID_DATASTORE_KEY'));}if(!Buffer.isBuffer(val)){const errMsg=`received value is not a buffer`;log.error(errMsg);return callback(errcode(new Error(errMsg),'ERR_INVALID_VALUE_RECEIVED'));}const stringifiedTopic=keyToTopic(key);log(`publish value for topic ${stringifiedTopic}`);this._pubsub.publish(stringifiedTopic,val,callback);}get(key,callback){if(!Buffer.isBuffer(key)){const errMsg=`datastore key does not have a valid format`;log.error(errMsg);return callback(errcode(new Error(errMsg),'ERR_INVALID_DATASTORE_KEY'));}const stringifiedTopic=keyToTopic(key);this._pubsub.ls((err,res)=>{if(err){return callback(err);}if(res&&Array.isArray(res)&&res.indexOf(stringifiedTopic)>-1){return this._getLocal(key,callback);}this._pubsub.subscribe(stringifiedTopic,this._onMessage,err=>{if(err){const errMsg=`cannot subscribe topic ${stringifiedTopic}`;log.error(errMsg);return callback(errcode(new Error(errMsg),'ERR_SUBSCRIBING_TOPIC'));}log(`subscribed values for key ${stringifiedTopic}`);this._getLocal(key,callback);});});}unsubscribe(key){const stringifiedTopic=keyToTopic(key);this._pubsub.unsubscribe(stringifiedTopic,this._onMessage);}_getLocal(key,callback){const routingKey=new Key('/'+encodeBase32(key),false);this._datastore.get(routingKey,(err,dsVal)=>{if(err){if(err.code!=='ERR_NOT_FOUND'){const errMsg=`unexpected error getting the ipns record for ${routingKey.toString()}`;log.error(errMsg);return callback(errcode(new Error(errMsg),'ERR_UNEXPECTED_ERROR_GETTING_RECORD'));}const errMsg=`local record requested was not found for ${routingKey.toString()}`;log.error(errMsg);return callback(errcode(new Error(errMsg),'ERR_NOT_FOUND'));}if(!Buffer.isBuffer(dsVal)){const errMsg=`found record that we couldn't convert to a value`;log.error(errMsg);return callback(errcode(new Error(errMsg),'ERR_INVALID_RECORD_RECEIVED'));}callback(null,dsVal);});}_onMessage(msg){const{data,from,topicIDs}=msg;let key;try{key=topicToKey(topicIDs[0]);}catch(err){log.error(err);return;}log(`message received for ${key} topic`);if(from===this._peerId.toB58String()){log(`message discarded as it is from the same peer`);return;}if(this._handleSubscriptionKeyFn){this._handleSubscriptionKeyFn(key,(err,res)=>{if(err){log.error('message discarded by the subscriptionKeyFn');return;}this._storeIfSubscriptionIsBetter(res,data);});}else{this._storeIfSubscriptionIsBetter(key,data);}}_storeIfSubscriptionIsBetter(key,data){this._isBetter(key,data,(err,res)=>{if(!err&&res){this._storeRecord(Buffer.from(key),data);}});}_validateRecord(value,peerId,callback){this._validator.validate(value,peerId,callback);}_selectRecord(receivedRecord,currentRecord,callback){this._validator.select(receivedRecord,currentRecord,(err,res)=>{if(err){log.error(err);return callback(err);}callback(null,res===0);});}_isBetter(key,val,callback){this._validateRecord(val,key,(err,valid)=>{if(err||!valid){const errMsg='record received through pubsub is not valid';log.error(errMsg);return callback(errcode(new Error(errMsg),'ERR_NOT_VALID_RECORD'));}const dsKey=new Key(key);this._getLocal(dsKey.toBuffer(),(err,currentRecord)=>{if(err){return callback(null,true);}if(currentRecord.equals(val)){return callback(null,false);}this._selectRecord(val,currentRecord,callback);});});}_storeRecord(key,data){const routingKey=new Key('/'+encodeBase32(key),false);this._datastore.put(routingKey,data,err=>{if(err){log.error(`record for ${key.toString()} could not be stored in the routing`);return;}log(`record for ${key.toString()} was stored in the datastore`);});}open(callback){const errMsg=`open function was not implemented yet`;log.error(errMsg);return callback(errcode(new Error(errMsg),'ERR_NOT_IMPLEMENTED_YET'));}has(key,callback){const errMsg=`has function was not implemented yet`;log.error(errMsg);return callback(errcode(new Error(errMsg),'ERR_NOT_IMPLEMENTED_YET'));}delete(key,callback){const errMsg=`delete function was not implemented yet`;log.error(errMsg);return callback(errcode(new Error(errMsg),'ERR_NOT_IMPLEMENTED_YET'));}close(callback){const errMsg=`close function was not implemented yet`;log.error(errMsg);return callback(errcode(new Error(errMsg),'ERR_NOT_IMPLEMENTED_YET'));}batch(){const errMsg=`batch function was not implemented yet`;log.error(errMsg);throw errcode(new Error(errMsg),'ERR_NOT_IMPLEMENTED_YET');}query(){const errMsg=`query function was not implemented yet`;log.error(errMsg);throw errcode(new Error(errMsg),'ERR_NOT_IMPLEMENTED_YET');}}exports=module.exports=DatastorePubsub;},2961:function(module,__unusedexports,__webpack_require__){const bscript=__webpack_require__(5099);const OPS=__webpack_require__(9710);function partialSignature(value){return value===OPS.OP_0||bscript.isCanonicalScriptSignature(value);}function check(script,allowIncomplete){const chunks=bscript.decompile(script);if(chunks.length<2)return false;if(chunks[0]!==OPS.OP_0)return false;if(allowIncomplete){return chunks.slice(1).every(partialSignature);}return chunks.slice(1).every(bscript.isCanonicalScriptSignature);}check.toJSON=function(){return'multisig input';};module.exports={check};},2964:function(module,__unusedexports,__webpack_require__){"use strict";var bn=__webpack_require__(2420);var elliptic=__webpack_require__(5194);var getNAF=elliptic.utils.getNAF;var getJSF=elliptic.utils.getJSF;var assert=elliptic.utils.assert;function BaseCurve(type,conf){this.type=type;this.p=new bn(conf.p,16);this.red=conf.prime?bn.red(conf.prime):bn.mont(this.p);this.zero=new bn(0).toRed(this.red);this.one=new bn(1).toRed(this.red);this.two=new bn(2).toRed(this.red);this.n=conf.n&&new bn(conf.n,16);this.g=conf.g&&this.pointFromJSON(conf.g,conf.gRed);this._wnafT1=new Array(4);this._wnafT2=new Array(4);this._wnafT3=new Array(4);this._wnafT4=new Array(4);}module.exports=BaseCurve;BaseCurve.prototype.point=function point(){throw new Error('Not implemented');};BaseCurve.prototype.validate=function validate(){throw new Error('Not implemented');};BaseCurve.prototype._fixedNafMul=function _fixedNafMul(p,k){var doubles=p._getDoubles();var naf=getNAF(k,1);var I=(1<<doubles.step+1)-(doubles.step%2===0?2:1);I/=3;var repr=[];for(var j=0;j<naf.length;j+=doubles.step){var nafW=0;for(var k=j+doubles.step-1;k>=j;k--)nafW=(nafW<<1)+naf[k];repr.push(nafW);}var a=this.jpoint(null,null,null);var b=this.jpoint(null,null,null);for(var i=I;i>0;i--){for(var j=0;j<repr.length;j++){var nafW=repr[j];if(nafW===i)b=b.mixedAdd(doubles.points[j]);else if(nafW===-i)b=b.mixedAdd(doubles.points[j].neg());}a=a.add(b);}return a.toP();};BaseCurve.prototype._wnafMul=function _wnafMul(p,k){var w=4;var nafPoints=p._getNAFPoints(w);w=nafPoints.wnd;var wnd=nafPoints.points;var naf=getNAF(k,w);var acc=this.jpoint(null,null,null);for(var i=naf.length-1;i>=0;i--){for(var k=0;i>=0&&naf[i]===0;i--)k++;if(i>=0)k++;acc=acc.dblp(k);if(i<0)break;var z=naf[i];assert(z!==0);if(p.type==='affine'){if(z>0)acc=acc.mixedAdd(wnd[z-1>>1]);else acc=acc.mixedAdd(wnd[-z-1>>1].neg());}else{if(z>0)acc=acc.add(wnd[z-1>>1]);else acc=acc.add(wnd[-z-1>>1].neg());}}return p.type==='affine'?acc.toP():acc;};BaseCurve.prototype._wnafMulAdd=function _wnafMulAdd(defW,points,coeffs,len){var wndWidth=this._wnafT1;var wnd=this._wnafT2;var naf=this._wnafT3;var max=0;for(var i=0;i<len;i++){var p=points[i];var nafPoints=p._getNAFPoints(defW);wndWidth[i]=nafPoints.wnd;wnd[i]=nafPoints.points;}for(var i=len-1;i>=1;i-=2){var a=i-1;var b=i;if(wndWidth[a]!==1||wndWidth[b]!==1){naf[a]=getNAF(coeffs[a],wndWidth[a]);naf[b]=getNAF(coeffs[b],wndWidth[b]);max=Math.max(naf[a].length,max);max=Math.max(naf[b].length,max);continue;}var comb=[points[a],null,null,points[b]];if(points[a].y.cmp(points[b].y)===0){comb[1]=points[a].add(points[b]);comb[2]=points[a].toJ().mixedAdd(points[b].neg());}else if(points[a].y.cmp(points[b].y.redNeg())===0){comb[1]=points[a].toJ().mixedAdd(points[b]);comb[2]=points[a].add(points[b].neg());}else{comb[1]=points[a].toJ().mixedAdd(points[b]);comb[2]=points[a].toJ().mixedAdd(points[b].neg());}var index=[-3,-1,-5,-7,0,7,5,1,3];var jsf=getJSF(coeffs[a],coeffs[b]);max=Math.max(jsf[0].length,max);naf[a]=new Array(max);naf[b]=new Array(max);for(var j=0;j<max;j++){var ja=jsf[0][j]|0;var jb=jsf[1][j]|0;naf[a][j]=index[(ja+1)*3+(jb+1)];naf[b][j]=0;wnd[a]=comb;}}var acc=this.jpoint(null,null,null);var tmp=this._wnafT4;for(var i=max;i>=0;i--){var k=0;while(i>=0){var zero=true;for(var j=0;j<len;j++){tmp[j]=naf[j][i]|0;if(tmp[j]!==0)zero=false;}if(!zero)break;k++;i--;}if(i>=0)k++;acc=acc.dblp(k);if(i<0)break;for(var j=0;j<len;j++){var z=tmp[j];var p;if(z===0)continue;else if(z>0)p=wnd[j][z-1>>1];else if(z<0)p=wnd[j][-z-1>>1].neg();if(p.type==='affine')acc=acc.mixedAdd(p);else acc=acc.add(p);}}for(var i=0;i<len;i++)wnd[i]=null;return acc.toP();};function BasePoint(curve,type){this.curve=curve;this.type=type;this.precomputed=null;}BaseCurve.BasePoint=BasePoint;BasePoint.prototype.validate=function validate(){return this.curve.validate(this);};BasePoint.prototype.precompute=function precompute(power){if(this.precomputed)return this;var precomputed={doubles:null,naf:null,beta:null};precomputed.naf=this._getNAFPoints(8);precomputed.doubles=this._getDoubles(4,power);precomputed.beta=this._getBeta();this.precomputed=precomputed;return this;};BasePoint.prototype._getDoubles=function _getDoubles(step,power){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;var doubles=[this];var acc=this;for(var i=0;i<power;i+=step){for(var j=0;j<step;j++)acc=acc.dbl();doubles.push(acc);}return{step:step,points:doubles};};BasePoint.prototype._getNAFPoints=function _getNAFPoints(wnd){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;var res=[this];var max=(1<<wnd)-1;var dbl=max===1?null:this.dbl();for(var i=1;i<max;i++)res[i]=res[i-1].add(dbl);return{wnd:wnd,points:res};};BasePoint.prototype._getBeta=function _getBeta(){return null;};BasePoint.prototype.dblp=function dblp(k){var r=this;for(var i=0;i<k;i++)r=r.dbl();return r;};},2968:function(module){"use strict";var alphabet='0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_'.split(''),length=64,map={},seed=0,i=0,prev;function encode(num){var encoded='';do{encoded=alphabet[num%length]+encoded;num=Math.floor(num/length);}while(num>0);return encoded;}function decode(str){var decoded=0;for(i=0;i<str.length;i++){decoded=decoded*length+map[str.charAt(i)];}return decoded;}function yeast(){var now=encode(+new Date());if(now!==prev)return seed=0,prev=now;return now+'.'+encode(seed++);}for(;i<length;i++)map[alphabet[i]]=i;yeast.encode=encode;yeast.decode=decode;module.exports=yeast;},2973:function(__unusedmodule,exports){"use strict";var utils=exports;function toArray(msg,enc){if(Array.isArray(msg))return msg.slice();if(!msg)return[];var res=[];if(typeof msg!=='string'){for(var i=0;i<msg.length;i++)res[i]=msg[i]|0;return res;}if(enc==='hex'){msg=msg.replace(/[^a-z0-9]+/ig,'');if(msg.length%2!==0)msg='0'+msg;for(var i=0;i<msg.length;i+=2)res.push(parseInt(msg[i]+msg[i+1],16));}else{for(var i=0;i<msg.length;i++){var c=msg.charCodeAt(i);var hi=c>>8;var lo=c&0xff;if(hi)res.push(hi,lo);else res.push(lo);}}return res;}utils.toArray=toArray;function zero2(word){if(word.length===1)return'0'+word;else return word;}utils.zero2=zero2;function toHex(msg){var res='';for(var i=0;i<msg.length;i++)res+=zero2(msg[i].toString(16));return res;}utils.toHex=toHex;utils.encode=function encode(arr,enc){if(enc==='hex')return toHex(arr);else return arr;};},2984:function(module){module.exports=require("crypto");},2988:function(module){function isObject(value){var type=typeof value;return value!=null&&(type=='object'||type=='function');}module.exports=isObject;},2991:function(module,__unusedexports,__webpack_require__){"use strict";const WantlistEntry=__webpack_require__(668).Entry;const CID=__webpack_require__(9339);const assert=__webpack_require__(3930);module.exports=class BitswapMessageEntry{constructor(cid,priority,cancel){assert(CID.isCID(cid),'needs valid cid');this.entry=new WantlistEntry(cid,priority);this.cancel=Boolean(cancel);}get cid(){return this.entry.cid;}set cid(cid){this.entry.cid=cid;}get priority(){return this.entry.priority;}set priority(val){this.entry.priority=val;}get[Symbol.toStringTag](){const cidStr=this.cid.toBaseEncodedString();return`BitswapMessageEntry ${cidStr} <cancel: ${this.cancel}, priority: ${this.priority}>`;}equals(other){return this.cancel===other.cancel&&this.entry.equals(other.entry);}};},3005:function(module,exports,__webpack_require__){exports=module.exports=createDebug.debug=createDebug['default']=createDebug;exports.coerce=coerce;exports.disable=disable;exports.enable=enable;exports.enabled=enabled;exports.humanize=__webpack_require__(4805);exports.names=[];exports.skips=[];exports.formatters={};var prevTime;function selectColor(namespace){var hash=0,i;for(i in namespace){hash=(hash<<5)-hash+namespace.charCodeAt(i);hash|=0;}return exports.colors[Math.abs(hash)%exports.colors.length];}function createDebug(namespace){function debug(){if(!debug.enabled)return;var self=debug;var curr=+new Date();var ms=curr-(prevTime||curr);self.diff=ms;self.prev=prevTime;self.curr=curr;prevTime=curr;var args=new Array(arguments.length);for(var i=0;i<args.length;i++){args[i]=arguments[i];}args[0]=exports.coerce(args[0]);if('string'!==typeof args[0]){args.unshift('%O');}var index=0;args[0]=args[0].replace(/%([a-zA-Z%])/g,function(match,format){if(match==='%%')return match;index++;var formatter=exports.formatters[format];if('function'===typeof formatter){var val=args[index];match=formatter.call(self,val);args.splice(index,1);index--;}return match;});exports.formatArgs.call(self,args);var logFn=debug.log||exports.log||console.log.bind(console);logFn.apply(self,args);}debug.namespace=namespace;debug.enabled=exports.enabled(namespace);debug.useColors=exports.useColors();debug.color=selectColor(namespace);if('function'===typeof exports.init){exports.init(debug);}return debug;}function enable(namespaces){exports.save(namespaces);exports.names=[];exports.skips=[];var split=(typeof namespaces==='string'?namespaces:'').split(/[\s,]+/);var len=split.length;for(var i=0;i<len;i++){if(!split[i])continue;namespaces=split[i].replace(/\*/g,'.*?');if(namespaces[0]==='-'){exports.skips.push(new RegExp('^'+namespaces.substr(1)+'$'));}else{exports.names.push(new RegExp('^'+namespaces+'$'));}}}function disable(){exports.enable('');}function enabled(name){var i,len;for(i=0,len=exports.skips.length;i<len;i++){if(exports.skips[i].test(name)){return false;}}for(i=0,len=exports.names.length;i<len;i++){if(exports.names[i].test(name)){return true;}}return false;}function coerce(val){if(val instanceof Error)return val.stack||val.message;return val;}},3010:function(module,__unusedexports,__webpack_require__){"use strict";var defined=__webpack_require__(8542).defined;var varint=__webpack_require__(2572);function compileEncode(m,resolve,enc,oneofs,encodingLength){var oneofsKeys=Object.keys(oneofs);var encLength=enc.length;var ints={};for(var i=0;i<encLength;i++){ints[i]={p:varint.encode(m.fields[i].tag<<3|2),h:varint.encode(m.fields[i].tag<<3|enc[i].type)};var field=m.fields[i];m.fields[i].packed=field.repeated&&field.options&&field.options.packed&&field.options.packed!=='false';}function encodeField(buf,offset,h,e,packed,innerVal){var j=0;if(!packed){for(j=0;j<h.length;j++){buf[offset++]=h[j];}}if(e.message){varint.encode(e.encodingLength(innerVal),buf,offset);offset+=varint.encode.bytes;}e.encode(innerVal,buf,offset);return offset+e.encode.bytes;}return function encode(obj,buf,offset){if(offset==null){offset=0;}if(buf==null){buf=Buffer.allocUnsafe(encodingLength(obj));}var oldOffset=offset;var objKeys=Object.keys(obj);var i=0;var match=false;for(i=0;i<oneofsKeys.length;i++){var name=oneofsKeys[i];var prop=oneofs[i];if(objKeys.indexOf(prop)>-1){if(match){throw new Error('only one of the properties defined in oneof '+name+' can be set');}match=true;}}for(i=0;i<encLength;i++){var e=enc[i];var field=m.fields[i];var val=obj[field.name];var j=0;if(!defined(val)){if(field.required){throw new Error(field.name+' is required');}continue;}var p=ints[i].p;var h=ints[i].h;var packed=field.packed;if(field.map){var tmp=Object.keys(val);for(j=0;j<tmp.length;j++){tmp[j]={key:tmp[j],value:val[tmp[j]]};}val=tmp;}if(packed){var packedLen=0;for(j=0;j<val.length;j++){if(!defined(val[j])){continue;}packedLen+=e.encodingLength(val[j]);}if(packedLen){for(j=0;j<h.length;j++){buf[offset++]=p[j];}varint.encode(packedLen,buf,offset);offset+=varint.encode.bytes;}}if(field.repeated){var innerVal;for(j=0;j<val.length;j++){innerVal=val[j];if(!defined(innerVal)){continue;}offset=encodeField(buf,offset,h,e,packed,innerVal);}}else{offset=encodeField(buf,offset,h,e,packed,val);}}encode.bytes=offset-oldOffset;return buf;};}module.exports=compileEncode;},3014:function(__unusedmodule,exports,__webpack_require__){"use strict";var Buffer=__webpack_require__(7572).Buffer;var bip66=__webpack_require__(560);var EC_PRIVKEY_EXPORT_DER_COMPRESSED=Buffer.from([0x30,0x81,0xd3,0x02,0x01,0x01,0x04,0x20,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xa0,0x81,0x85,0x30,0x81,0x82,0x02,0x01,0x01,0x30,0x2c,0x06,0x07,0x2a,0x86,0x48,0xcE,0x3d,0x01,0x01,0x02,0x21,0x00,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xfE,0xff,0xff,0xfc,0x2f,0x30,0x06,0x04,0x01,0x00,0x04,0x01,0x07,0x04,0x21,0x02,0x79,0xbE,0x66,0x7E,0xf9,0xdc,0xbb,0xac,0x55,0xa0,0x62,0x95,0xcE,0x87,0x0b,0x07,0x02,0x9b,0xfc,0xdb,0x2d,0xcE,0x28,0xd9,0x59,0xf2,0x81,0x5b,0x16,0xf8,0x17,0x98,0x02,0x21,0x00,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xfE,0xba,0xaE,0xdc,0xE6,0xaf,0x48,0xa0,0x3b,0xbf,0xd2,0x5E,0x8c,0xd0,0x36,0x41,0x41,0x02,0x01,0x01,0xa1,0x24,0x03,0x22,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00]);var EC_PRIVKEY_EXPORT_DER_UNCOMPRESSED=Buffer.from([0x30,0x82,0x01,0x13,0x02,0x01,0x01,0x04,0x20,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xa0,0x81,0xa5,0x30,0x81,0xa2,0x02,0x01,0x01,0x30,0x2c,0x06,0x07,0x2a,0x86,0x48,0xcE,0x3d,0x01,0x01,0x02,0x21,0x00,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xfE,0xff,0xff,0xfc,0x2f,0x30,0x06,0x04,0x01,0x00,0x04,0x01,0x07,0x04,0x41,0x04,0x79,0xbE,0x66,0x7E,0xf9,0xdc,0xbb,0xac,0x55,0xa0,0x62,0x95,0xcE,0x87,0x0b,0x07,0x02,0x9b,0xfc,0xdb,0x2d,0xcE,0x28,0xd9,0x59,0xf2,0x81,0x5b,0x16,0xf8,0x17,0x98,0x48,0x3a,0xda,0x77,0x26,0xa3,0xc4,0x65,0x5d,0xa4,0xfb,0xfc,0x0E,0x11,0x08,0xa8,0xfd,0x17,0xb4,0x48,0xa6,0x85,0x54,0x19,0x9c,0x47,0xd0,0x8f,0xfb,0x10,0xd4,0xb8,0x02,0x21,0x00,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xfE,0xba,0xaE,0xdc,0xE6,0xaf,0x48,0xa0,0x3b,0xbf,0xd2,0x5E,0x8c,0xd0,0x36,0x41,0x41,0x02,0x01,0x01,0xa1,0x44,0x03,0x42,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00]);exports.privateKeyExport=function(privateKey,publicKey,compressed){var result=Buffer.from(compressed?EC_PRIVKEY_EXPORT_DER_COMPRESSED:EC_PRIVKEY_EXPORT_DER_UNCOMPRESSED);privateKey.copy(result,compressed?8:9);publicKey.copy(result,compressed?181:214);return result;};exports.privateKeyImport=function(privateKey){var length=privateKey.length;var index=0;if(length<index+1||privateKey[index]!==0x30)return;index+=1;if(length<index+1||!(privateKey[index]&0x80))return;var lenb=privateKey[index]&0x7f;index+=1;if(lenb<1||lenb>2)return;if(length<index+lenb)return;var len=privateKey[index+lenb-1]|(lenb>1?privateKey[index+lenb-2]<<8:0);index+=lenb;if(length<index+len)return;if(length<index+3||privateKey[index]!==0x02||privateKey[index+1]!==0x01||privateKey[index+2]!==0x01){return;}index+=3;if(length<index+2||privateKey[index]!==0x04||privateKey[index+1]>0x20||length<index+2+privateKey[index+1]){return;}return privateKey.slice(index+2,index+2+privateKey[index+1]);};exports.signatureExport=function(sigObj){var r=Buffer.concat([Buffer.from([0]),sigObj.r]);for(var lenR=33,posR=0;lenR>1&&r[posR]===0x00&&!(r[posR+1]&0x80);--lenR,++posR);var s=Buffer.concat([Buffer.from([0]),sigObj.s]);for(var lenS=33,posS=0;lenS>1&&s[posS]===0x00&&!(s[posS+1]&0x80);--lenS,++posS);return bip66.encode(r.slice(posR),s.slice(posS));};exports.signatureImport=function(sig){var r=Buffer.alloc(32,0);var s=Buffer.alloc(32,0);try{var sigObj=bip66.decode(sig);if(sigObj.r.length===33&&sigObj.r[0]===0x00)sigObj.r=sigObj.r.slice(1);if(sigObj.r.length>32)throw new Error('R length is too long');if(sigObj.s.length===33&&sigObj.s[0]===0x00)sigObj.s=sigObj.s.slice(1);if(sigObj.s.length>32)throw new Error('S length is too long');}catch(err){return;}sigObj.r.copy(r,32-sigObj.r.length);sigObj.s.copy(s,32-sigObj.s.length);return{r:r,s:s};};exports.signatureImportLax=function(sig){var r=Buffer.alloc(32,0);var s=Buffer.alloc(32,0);var length=sig.length;var index=0;if(sig[index++]!==0x30)return;var lenbyte=sig[index++];if(lenbyte&0x80){index+=lenbyte-0x80;if(index>length)return;}if(sig[index++]!==0x02)return;var rlen=sig[index++];if(rlen&0x80){lenbyte=rlen-0x80;if(index+lenbyte>length)return;for(;lenbyte>0&&sig[index]===0x00;index+=1,lenbyte-=1);for(rlen=0;lenbyte>0;index+=1,lenbyte-=1)rlen=(rlen<<8)+sig[index];}if(rlen>length-index)return;var rindex=index;index+=rlen;if(sig[index++]!==0x02)return;var slen=sig[index++];if(slen&0x80){lenbyte=slen-0x80;if(index+lenbyte>length)return;for(;lenbyte>0&&sig[index]===0x00;index+=1,lenbyte-=1);for(slen=0;lenbyte>0;index+=1,lenbyte-=1)slen=(slen<<8)+sig[index];}if(slen>length-index)return;var sindex=index;index+=slen;for(;rlen>0&&sig[rindex]===0x00;rlen-=1,rindex+=1);if(rlen>32)return;var rvalue=sig.slice(rindex,rindex+rlen);rvalue.copy(r,32-rvalue.length);for(;slen>0&&sig[sindex]===0x00;slen-=1,sindex+=1);if(slen>32)return;var svalue=sig.slice(sindex,sindex+slen);svalue.copy(s,32-svalue.length);return{r:r,s:s};};},3016:function(module,__unusedexports,__webpack_require__){"use strict";const Block=__webpack_require__(6505);const multihashing=__webpack_require__(9424);const CID=__webpack_require__(9339);const waterfall=__webpack_require__(4265);const setImmediate=__webpack_require__(7368);const promisify=__webpack_require__(6955);const errCode=__webpack_require__(4999);module.exports=function block(self){return{get:promisify((cid,options,callback)=>{if(typeof options==='function'){callback=options;options={};}options=options||{};try{cid=cleanCid(cid);}catch(err){return setImmediate(()=>callback(errCode(err,'ERR_INVALID_CID')));}if(options.preload!==false){self._preload(cid);}self._blockService.get(cid,callback);}),put:promisify((block,options,callback)=>{callback=callback||function noop(){};if(typeof options==='function'){callback=options;options={};}options=options||{};if(Array.isArray(block)){return callback(new Error('Array is not supported'));}waterfall([cb=>{if(Block.isBlock(block)){return cb(null,block);}if(options.cid&&CID.isCID(options.cid)){return cb(null,new Block(block,options.cid));}const mhtype=options.mhtype||'sha2-256';const format=options.format||'dag-pb';let cidVersion;if(options.version==null){cidVersion=mhtype==='sha2-256'&&format==='dag-pb'?0:1;}else{cidVersion=options.version;}multihashing(block,mhtype,(err,multihash)=>{if(err){return cb(err);}let cid;try{cid=new CID(cidVersion,format,multihash);}catch(err){return cb(err);}cb(null,new Block(block,cid));});},(block,cb)=>self._blockService.put(block,err=>{if(err){return cb(err);}if(options.preload!==false){self._preload(block.cid);}cb(null,block);})],callback);}),rm:promisify((cid,callback)=>{try{cid=cleanCid(cid);}catch(err){return setImmediate(()=>callback(errCode(err,'ERR_INVALID_CID')));}self._blockService.delete(cid,callback);}),stat:promisify((cid,options,callback)=>{if(typeof options==='function'){callback=options;options={};}options=options||{};try{cid=cleanCid(cid);}catch(err){return setImmediate(()=>callback(errCode(err,'ERR_INVALID_CID')));}if(options.preload!==false){self._preload(cid);}self._blockService.get(cid,(err,block)=>{if(err){return callback(err);}callback(null,{key:cid.toString(),size:block.data.length});});})};};function cleanCid(cid){if(CID.isCID(cid)){return cid;}return new CID(cid);}},3021:function(__unusedmodule,exports,__webpack_require__){"use strict";exports.importer=exports.Importer=__webpack_require__(4062);exports.exporter=exports.Exporter=__webpack_require__(7623);},3024:function(__unusedmodule,exports,__webpack_require__){"use strict";const asn1=__webpack_require__(3771);const util=__webpack_require__(9570);const toBase64=util.toBase64;const toBn=util.toBn;const RSAPrivateKey=asn1.define('RSAPrivateKey',function(){this.seq().obj(this.key('version').int(),this.key('modulus').int(),this.key('publicExponent').int(),this.key('privateExponent').int(),this.key('prime1').int(),this.key('prime2').int(),this.key('exponent1').int(),this.key('exponent2').int(),this.key('coefficient').int());});const AlgorithmIdentifier=asn1.define('AlgorithmIdentifier',function(){this.seq().obj(this.key('algorithm').objid({'1.2.840.113549.1.1.1':'rsa'}),this.key('none').optional().null_(),this.key('curve').optional().objid(),this.key('params').optional().seq().obj(this.key('p').int(),this.key('q').int(),this.key('g').int()));});const PublicKey=asn1.define('RSAPublicKey',function(){this.seq().obj(this.key('algorithm').use(AlgorithmIdentifier),this.key('subjectPublicKey').bitstr());});const RSAPublicKey=asn1.define('RSAPublicKey',function(){this.seq().obj(this.key('modulus').int(),this.key('publicExponent').int());});exports.pkcs1ToJwk=function(bytes){const asn1=RSAPrivateKey.decode(bytes,'der');return{kty:'RSA',n:toBase64(asn1.modulus),e:toBase64(asn1.publicExponent),d:toBase64(asn1.privateExponent),p:toBase64(asn1.prime1),q:toBase64(asn1.prime2),dp:toBase64(asn1.exponent1),dq:toBase64(asn1.exponent2),qi:toBase64(asn1.coefficient),alg:'RS256',kid:'2011-04-29'};};exports.jwkToPkcs1=function(jwk){return RSAPrivateKey.encode({version:0,modulus:toBn(jwk.n),publicExponent:toBn(jwk.e),privateExponent:toBn(jwk.d),prime1:toBn(jwk.p),prime2:toBn(jwk.q),exponent1:toBn(jwk.dp),exponent2:toBn(jwk.dq),coefficient:toBn(jwk.qi)},'der');};exports.pkixToJwk=function(bytes){const ndata=PublicKey.decode(bytes,'der');const asn1=RSAPublicKey.decode(ndata.subjectPublicKey.data,'der');return{kty:'RSA',n:toBase64(asn1.modulus),e:toBase64(asn1.publicExponent),alg:'RS256',kid:'2011-04-29'};};exports.jwkToPkix=function(jwk){return PublicKey.encode({algorithm:{algorithm:'rsa',none:null},subjectPublicKey:{data:RSAPublicKey.encode({modulus:toBn(jwk.n),publicExponent:toBn(jwk.e)},'der')}},'der');};},3037:function(module,exports,__webpack_require__){module=__webpack_require__.nmd(module);var LARGE_ARRAY_SIZE=200;var FUNC_ERROR_TEXT='Expected a function';var HASH_UNDEFINED='__lodash_hash_undefined__';var UNORDERED_COMPARE_FLAG=1,PARTIAL_COMPARE_FLAG=2;var INFINITY=1/0,MAX_SAFE_INTEGER=9007199254740991;var argsTag='[object Arguments]',arrayTag='[object Array]',boolTag='[object Boolean]',dateTag='[object Date]',errorTag='[object Error]',funcTag='[object Function]',genTag='[object GeneratorFunction]',mapTag='[object Map]',numberTag='[object Number]',objectTag='[object Object]',promiseTag='[object Promise]',regexpTag='[object RegExp]',setTag='[object Set]',stringTag='[object String]',symbolTag='[object Symbol]',weakMapTag='[object WeakMap]';var arrayBufferTag='[object ArrayBuffer]',dataViewTag='[object DataView]',float32Tag='[object Float32Array]',float64Tag='[object Float64Array]',int8Tag='[object Int8Array]',int16Tag='[object Int16Array]',int32Tag='[object Int32Array]',uint8Tag='[object Uint8Array]',uint8ClampedTag='[object Uint8ClampedArray]',uint16Tag='[object Uint16Array]',uint32Tag='[object Uint32Array]';var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/,reLeadingDot=/^\./,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;var reRegExpChar=/[\\^$.*+?()[\]{}|]/g;var reEscapeChar=/\\(\\)?/g;var reIsHostCtor=/^\[object .+?Constructor\]$/;var reIsUint=/^(?:0|[1-9]\d*)$/;var typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=true;typedArrayTags[argsTag]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=false;var freeGlobal=typeof global=='object'&&global&&global.Object===Object&&global;var freeSelf=typeof self=='object'&&self&&self.Object===Object&&self;var root=freeGlobal||freeSelf||Function('return this')();var freeExports=true&&exports&&!exports.nodeType&&exports;var freeModule=freeExports&&"object"=='object'&&module&&!module.nodeType&&module;var moduleExports=freeModule&&freeModule.exports===freeExports;var freeProcess=moduleExports&&freeGlobal.process;var nodeUtil=function(){try{return freeProcess&&freeProcess.binding('util');}catch(e){}}();var nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray;function arrayMap(array,iteratee){var index=-1,length=array?array.length:0,result=Array(length);while(++index<length){result[index]=iteratee(array[index],index,array);}return result;}function arraySome(array,predicate){var index=-1,length=array?array.length:0;while(++index<length){if(predicate(array[index],index,array)){return true;}}return false;}function baseProperty(key){return function(object){return object==null?undefined:object[key];};}function baseTimes(n,iteratee){var index=-1,result=Array(n);while(++index<n){result[index]=iteratee(index);}return result;}function baseUnary(func){return function(value){return func(value);};}function getValue(object,key){return object==null?undefined:object[key];}function isHostObject(value){var result=false;if(value!=null&&typeof value.toString!='function'){try{result=!!(value+'');}catch(e){}}return result;}function mapToArray(map){var index=-1,result=Array(map.size);map.forEach(function(value,key){result[++index]=[key,value];});return result;}function overArg(func,transform){return function(arg){return func(transform(arg));};}function setToArray(set){var index=-1,result=Array(set.size);set.forEach(function(value){result[++index]=value;});return result;}var arrayProto=Array.prototype,funcProto=Function.prototype,objectProto=Object.prototype;var coreJsData=root['__core-js_shared__'];var maskSrcKey=function(){var uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||'');return uid?'Symbol(src)_1.'+uid:'';}();var funcToString=funcProto.toString;var hasOwnProperty=objectProto.hasOwnProperty;var objectToString=objectProto.toString;var reIsNative=RegExp('^'+funcToString.call(hasOwnProperty).replace(reRegExpChar,'\\$&').replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,'$1.*?')+'$');var Symbol=root.Symbol,Uint8Array=root.Uint8Array,propertyIsEnumerable=objectProto.propertyIsEnumerable,splice=arrayProto.splice;var nativeKeys=overArg(Object.keys,Object);var DataView=getNative(root,'DataView'),Map=getNative(root,'Map'),Promise=getNative(root,'Promise'),Set=getNative(root,'Set'),WeakMap=getNative(root,'WeakMap'),nativeCreate=getNative(Object,'create');var dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map),promiseCtorString=toSource(Promise),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap);var symbolProto=Symbol?Symbol.prototype:undefined,symbolValueOf=symbolProto?symbolProto.valueOf:undefined,symbolToString=symbolProto?symbolProto.toString:undefined;function Hash(entries){var index=-1,length=entries?entries.length:0;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1]);}}function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{};}function hashDelete(key){return this.has(key)&&delete this.__data__[key];}function hashGet(key){var data=this.__data__;if(nativeCreate){var result=data[key];return result===HASH_UNDEFINED?undefined:result;}return hasOwnProperty.call(data,key)?data[key]:undefined;}function hashHas(key){var data=this.__data__;return nativeCreate?data[key]!==undefined:hasOwnProperty.call(data,key);}function hashSet(key,value){var data=this.__data__;data[key]=nativeCreate&&value===undefined?HASH_UNDEFINED:value;return this;}Hash.prototype.clear=hashClear;Hash.prototype['delete']=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;function ListCache(entries){var index=-1,length=entries?entries.length:0;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1]);}}function listCacheClear(){this.__data__=[];}function listCacheDelete(key){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){return false;}var lastIndex=data.length-1;if(index==lastIndex){data.pop();}else{splice.call(data,index,1);}return true;}function listCacheGet(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?undefined:data[index][1];}function listCacheHas(key){return assocIndexOf(this.__data__,key)>-1;}function listCacheSet(key,value){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){data.push([key,value]);}else{data[index][1]=value;}return this;}ListCache.prototype.clear=listCacheClear;ListCache.prototype['delete']=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;function MapCache(entries){var index=-1,length=entries?entries.length:0;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1]);}}function mapCacheClear(){this.__data__={'hash':new Hash(),'map':new(Map||ListCache)(),'string':new Hash()};}function mapCacheDelete(key){return getMapData(this,key)['delete'](key);}function mapCacheGet(key){return getMapData(this,key).get(key);}function mapCacheHas(key){return getMapData(this,key).has(key);}function mapCacheSet(key,value){getMapData(this,key).set(key,value);return this;}MapCache.prototype.clear=mapCacheClear;MapCache.prototype['delete']=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;function SetCache(values){var index=-1,length=values?values.length:0;this.__data__=new MapCache();while(++index<length){this.add(values[index]);}}function setCacheAdd(value){this.__data__.set(value,HASH_UNDEFINED);return this;}function setCacheHas(value){return this.__data__.has(value);}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd;SetCache.prototype.has=setCacheHas;function Stack(entries){this.__data__=new ListCache(entries);}function stackClear(){this.__data__=new ListCache();}function stackDelete(key){return this.__data__['delete'](key);}function stackGet(key){return this.__data__.get(key);}function stackHas(key){return this.__data__.has(key);}function stackSet(key,value){var cache=this.__data__;if(cache instanceof ListCache){var pairs=cache.__data__;if(!Map||pairs.length<LARGE_ARRAY_SIZE-1){pairs.push([key,value]);return this;}cache=this.__data__=new MapCache(pairs);}cache.set(key,value);return this;}Stack.prototype.clear=stackClear;Stack.prototype['delete']=stackDelete;Stack.prototype.get=stackGet;Stack.prototype.has=stackHas;Stack.prototype.set=stackSet;function arrayLikeKeys(value,inherited){var result=isArray(value)||isArguments(value)?baseTimes(value.length,String):[];var length=result.length,skipIndexes=!!length;for(var key in value){if((inherited||hasOwnProperty.call(value,key))&&!(skipIndexes&&(key=='length'||isIndex(key,length)))){result.push(key);}}return result;}function assocIndexOf(array,key){var length=array.length;while(length--){if(eq(array[length][0],key)){return length;}}return-1;}var baseEach=createBaseEach(baseForOwn);var baseFor=createBaseFor();function baseForOwn(object,iteratee){return object&&baseFor(object,iteratee,keys);}function baseGet(object,path){path=isKey(path,object)?[path]:castPath(path);var index=0,length=path.length;while(object!=null&&index<length){object=object[toKey(path[index++])];}return index&&index==length?object:undefined;}function baseGetTag(value){return objectToString.call(value);}function baseHasIn(object,key){return object!=null&&key in Object(object);}function baseIsEqual(value,other,customizer,bitmask,stack){if(value===other){return true;}if(value==null||other==null||!isObject(value)&&!isObjectLike(other)){return value!==value&&other!==other;}return baseIsEqualDeep(value,other,baseIsEqual,customizer,bitmask,stack);}function baseIsEqualDeep(object,other,equalFunc,customizer,bitmask,stack){var objIsArr=isArray(object),othIsArr=isArray(other),objTag=arrayTag,othTag=arrayTag;if(!objIsArr){objTag=getTag(object);objTag=objTag==argsTag?objectTag:objTag;}if(!othIsArr){othTag=getTag(other);othTag=othTag==argsTag?objectTag:othTag;}var objIsObj=objTag==objectTag&&!isHostObject(object),othIsObj=othTag==objectTag&&!isHostObject(other),isSameTag=objTag==othTag;if(isSameTag&&!objIsObj){stack||(stack=new Stack());return objIsArr||isTypedArray(object)?equalArrays(object,other,equalFunc,customizer,bitmask,stack):equalByTag(object,other,objTag,equalFunc,customizer,bitmask,stack);}if(!(bitmask&PARTIAL_COMPARE_FLAG)){var objIsWrapped=objIsObj&&hasOwnProperty.call(object,'__wrapped__'),othIsWrapped=othIsObj&&hasOwnProperty.call(other,'__wrapped__');if(objIsWrapped||othIsWrapped){var objUnwrapped=objIsWrapped?object.value():object,othUnwrapped=othIsWrapped?other.value():other;stack||(stack=new Stack());return equalFunc(objUnwrapped,othUnwrapped,customizer,bitmask,stack);}}if(!isSameTag){return false;}stack||(stack=new Stack());return equalObjects(object,other,equalFunc,customizer,bitmask,stack);}function baseIsMatch(object,source,matchData,customizer){var index=matchData.length,length=index,noCustomizer=!customizer;if(object==null){return!length;}object=Object(object);while(index--){var data=matchData[index];if(noCustomizer&&data[2]?data[1]!==object[data[0]]:!(data[0]in object)){return false;}}while(++index<length){data=matchData[index];var key=data[0],objValue=object[key],srcValue=data[1];if(noCustomizer&&data[2]){if(objValue===undefined&&!(key in object)){return false;}}else{var stack=new Stack();if(customizer){var result=customizer(objValue,srcValue,key,object,source,stack);}if(!(result===undefined?baseIsEqual(srcValue,objValue,customizer,UNORDERED_COMPARE_FLAG|PARTIAL_COMPARE_FLAG,stack):result)){return false;}}}return true;}function baseIsNative(value){if(!isObject(value)||isMasked(value)){return false;}var pattern=isFunction(value)||isHostObject(value)?reIsNative:reIsHostCtor;return pattern.test(toSource(value));}function baseIsTypedArray(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[objectToString.call(value)];}function baseIteratee(value){if(typeof value=='function'){return value;}if(value==null){return identity;}if(typeof value=='object'){return isArray(value)?baseMatchesProperty(value[0],value[1]):baseMatches(value);}return property(value);}function baseKeys(object){if(!isPrototype(object)){return nativeKeys(object);}var result=[];for(var key in Object(object)){if(hasOwnProperty.call(object,key)&&key!='constructor'){result.push(key);}}return result;}function baseMap(collection,iteratee){var index=-1,result=isArrayLike(collection)?Array(collection.length):[];baseEach(collection,function(value,key,collection){result[++index]=iteratee(value,key,collection);});return result;}function baseMatches(source){var matchData=getMatchData(source);if(matchData.length==1&&matchData[0][2]){return matchesStrictComparable(matchData[0][0],matchData[0][1]);}return function(object){return object===source||baseIsMatch(object,source,matchData);};}function baseMatchesProperty(path,srcValue){if(isKey(path)&&isStrictComparable(srcValue)){return matchesStrictComparable(toKey(path),srcValue);}return function(object){var objValue=get(object,path);return objValue===undefined&&objValue===srcValue?hasIn(object,path):baseIsEqual(srcValue,objValue,undefined,UNORDERED_COMPARE_FLAG|PARTIAL_COMPARE_FLAG);};}function basePropertyDeep(path){return function(object){return baseGet(object,path);};}function baseToString(value){if(typeof value=='string'){return value;}if(isSymbol(value)){return symbolToString?symbolToString.call(value):'';}var result=value+'';return result=='0'&&1/value==-INFINITY?'-0':result;}function castPath(value){return isArray(value)?value:stringToPath(value);}function createBaseEach(eachFunc,fromRight){return function(collection,iteratee){if(collection==null){return collection;}if(!isArrayLike(collection)){return eachFunc(collection,iteratee);}var length=collection.length,index=fromRight?length:-1,iterable=Object(collection);while(fromRight?index--:++index<length){if(iteratee(iterable[index],index,iterable)===false){break;}}return collection;};}function createBaseFor(fromRight){return function(object,iteratee,keysFunc){var index=-1,iterable=Object(object),props=keysFunc(object),length=props.length;while(length--){var key=props[fromRight?length:++index];if(iteratee(iterable[key],key,iterable)===false){break;}}return object;};}function equalArrays(array,other,equalFunc,customizer,bitmask,stack){var isPartial=bitmask&PARTIAL_COMPARE_FLAG,arrLength=array.length,othLength=other.length;if(arrLength!=othLength&&!(isPartial&&othLength>arrLength)){return false;}var stacked=stack.get(array);if(stacked&&stack.get(other)){return stacked==other;}var index=-1,result=true,seen=bitmask&UNORDERED_COMPARE_FLAG?new SetCache():undefined;stack.set(array,other);stack.set(other,array);while(++index<arrLength){var arrValue=array[index],othValue=other[index];if(customizer){var compared=isPartial?customizer(othValue,arrValue,index,other,array,stack):customizer(arrValue,othValue,index,array,other,stack);}if(compared!==undefined){if(compared){continue;}result=false;break;}if(seen){if(!arraySome(other,function(othValue,othIndex){if(!seen.has(othIndex)&&(arrValue===othValue||equalFunc(arrValue,othValue,customizer,bitmask,stack))){return seen.add(othIndex);}})){result=false;break;}}else if(!(arrValue===othValue||equalFunc(arrValue,othValue,customizer,bitmask,stack))){result=false;break;}}stack['delete'](array);stack['delete'](other);return result;}function equalByTag(object,other,tag,equalFunc,customizer,bitmask,stack){switch(tag){case dataViewTag:if(object.byteLength!=other.byteLength||object.byteOffset!=other.byteOffset){return false;}object=object.buffer;other=other.buffer;case arrayBufferTag:if(object.byteLength!=other.byteLength||!equalFunc(new Uint8Array(object),new Uint8Array(other))){return false;}return true;case boolTag:case dateTag:case numberTag:return eq(+object,+other);case errorTag:return object.name==other.name&&object.message==other.message;case regexpTag:case stringTag:return object==other+'';case mapTag:var convert=mapToArray;case setTag:var isPartial=bitmask&PARTIAL_COMPARE_FLAG;convert||(convert=setToArray);if(object.size!=other.size&&!isPartial){return false;}var stacked=stack.get(object);if(stacked){return stacked==other;}bitmask|=UNORDERED_COMPARE_FLAG;stack.set(object,other);var result=equalArrays(convert(object),convert(other),equalFunc,customizer,bitmask,stack);stack['delete'](object);return result;case symbolTag:if(symbolValueOf){return symbolValueOf.call(object)==symbolValueOf.call(other);}}return false;}function equalObjects(object,other,equalFunc,customizer,bitmask,stack){var isPartial=bitmask&PARTIAL_COMPARE_FLAG,objProps=keys(object),objLength=objProps.length,othProps=keys(other),othLength=othProps.length;if(objLength!=othLength&&!isPartial){return false;}var index=objLength;while(index--){var key=objProps[index];if(!(isPartial?key in other:hasOwnProperty.call(other,key))){return false;}}var stacked=stack.get(object);if(stacked&&stack.get(other)){return stacked==other;}var result=true;stack.set(object,other);stack.set(other,object);var skipCtor=isPartial;while(++index<objLength){key=objProps[index];var objValue=object[key],othValue=other[key];if(customizer){var compared=isPartial?customizer(othValue,objValue,key,other,object,stack):customizer(objValue,othValue,key,object,other,stack);}if(!(compared===undefined?objValue===othValue||equalFunc(objValue,othValue,customizer,bitmask,stack):compared)){result=false;break;}skipCtor||(skipCtor=key=='constructor');}if(result&&!skipCtor){var objCtor=object.constructor,othCtor=other.constructor;if(objCtor!=othCtor&&'constructor'in object&&'constructor'in other&&!(typeof objCtor=='function'&&objCtor instanceof objCtor&&typeof othCtor=='function'&&othCtor instanceof othCtor)){result=false;}}stack['delete'](object);stack['delete'](other);return result;}function getMapData(map,key){var data=map.__data__;return isKeyable(key)?data[typeof key=='string'?'string':'hash']:data.map;}function getMatchData(object){var result=keys(object),length=result.length;while(length--){var key=result[length],value=object[key];result[length]=[key,value,isStrictComparable(value)];}return result;}function getNative(object,key){var value=getValue(object,key);return baseIsNative(value)?value:undefined;}var getTag=baseGetTag;if(DataView&&getTag(new DataView(new ArrayBuffer(1)))!=dataViewTag||Map&&getTag(new Map())!=mapTag||Promise&&getTag(Promise.resolve())!=promiseTag||Set&&getTag(new Set())!=setTag||WeakMap&&getTag(new WeakMap())!=weakMapTag){getTag=function(value){var result=objectToString.call(value),Ctor=result==objectTag?value.constructor:undefined,ctorString=Ctor?toSource(Ctor):undefined;if(ctorString){switch(ctorString){case dataViewCtorString:return dataViewTag;case mapCtorString:return mapTag;case promiseCtorString:return promiseTag;case setCtorString:return setTag;case weakMapCtorString:return weakMapTag;}}return result;};}function hasPath(object,path,hasFunc){path=isKey(path,object)?[path]:castPath(path);var result,index=-1,length=path.length;while(++index<length){var key=toKey(path[index]);if(!(result=object!=null&&hasFunc(object,key))){break;}object=object[key];}if(result){return result;}var length=object?object.length:0;return!!length&&isLength(length)&&isIndex(key,length)&&(isArray(object)||isArguments(object));}function isIndex(value,length){length=length==null?MAX_SAFE_INTEGER:length;return!!length&&(typeof value=='number'||reIsUint.test(value))&&value>-1&&value%1==0&&value<length;}function isKey(value,object){if(isArray(value)){return false;}var type=typeof value;if(type=='number'||type=='symbol'||type=='boolean'||value==null||isSymbol(value)){return true;}return reIsPlainProp.test(value)||!reIsDeepProp.test(value)||object!=null&&value in Object(object);}function isKeyable(value){var type=typeof value;return type=='string'||type=='number'||type=='symbol'||type=='boolean'?value!=='__proto__':value===null;}function isMasked(func){return!!maskSrcKey&&maskSrcKey in func;}function isPrototype(value){var Ctor=value&&value.constructor,proto=typeof Ctor=='function'&&Ctor.prototype||objectProto;return value===proto;}function isStrictComparable(value){return value===value&&!isObject(value);}function matchesStrictComparable(key,srcValue){return function(object){if(object==null){return false;}return object[key]===srcValue&&(srcValue!==undefined||key in Object(object));};}var stringToPath=memoize(function(string){string=toString(string);var result=[];if(reLeadingDot.test(string)){result.push('');}string.replace(rePropName,function(match,number,quote,string){result.push(quote?string.replace(reEscapeChar,'$1'):number||match);});return result;});function toKey(value){if(typeof value=='string'||isSymbol(value)){return value;}var result=value+'';return result=='0'&&1/value==-INFINITY?'-0':result;}function toSource(func){if(func!=null){try{return funcToString.call(func);}catch(e){}try{return func+'';}catch(e){}}return'';}function map(collection,iteratee){var func=isArray(collection)?arrayMap:baseMap;return func(collection,baseIteratee(iteratee,3));}function memoize(func,resolver){if(typeof func!='function'||resolver&&typeof resolver!='function'){throw new TypeError(FUNC_ERROR_TEXT);}var memoized=function(){var args=arguments,key=resolver?resolver.apply(this,args):args[0],cache=memoized.cache;if(cache.has(key)){return cache.get(key);}var result=func.apply(this,args);memoized.cache=cache.set(key,result);return result;};memoized.cache=new(memoize.Cache||MapCache)();return memoized;}memoize.Cache=MapCache;function eq(value,other){return value===other||value!==value&&other!==other;}function isArguments(value){return isArrayLikeObject(value)&&hasOwnProperty.call(value,'callee')&&(!propertyIsEnumerable.call(value,'callee')||objectToString.call(value)==argsTag);}var isArray=Array.isArray;function isArrayLike(value){return value!=null&&isLength(value.length)&&!isFunction(value);}function isArrayLikeObject(value){return isObjectLike(value)&&isArrayLike(value);}function isFunction(value){var tag=isObject(value)?objectToString.call(value):'';return tag==funcTag||tag==genTag;}function isLength(value){return typeof value=='number'&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER;}function isObject(value){var type=typeof value;return!!value&&(type=='object'||type=='function');}function isObjectLike(value){return!!value&&typeof value=='object';}function isSymbol(value){return typeof value=='symbol'||isObjectLike(value)&&objectToString.call(value)==symbolTag;}var isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray;function toString(value){return value==null?'':baseToString(value);}function get(object,path,defaultValue){var result=object==null?undefined:baseGet(object,path);return result===undefined?defaultValue:result;}function hasIn(object,path){return object!=null&&hasPath(object,path,baseHasIn);}function keys(object){return isArrayLike(object)?arrayLikeKeys(object):baseKeys(object);}function identity(value){return value;}function property(path){return isKey(path)?baseProperty(toKey(path)):basePropertyDeep(path);}module.exports=map;},3066:function(module,__unusedexports,__webpack_require__){"use strict";const inherits=__webpack_require__(92);const Buffer=__webpack_require__(9423).Buffer;const DERDecoder=__webpack_require__(3159);function PEMDecoder(entity){DERDecoder.call(this,entity);this.enc='pem';}inherits(PEMDecoder,DERDecoder);module.exports=PEMDecoder;PEMDecoder.prototype.decode=function decode(data,options){const lines=data.toString().split(/[\r\n]+/g);const label=options.label.toUpperCase();const re=/^-----(BEGIN|END) ([^-]+)-----$/;let start=-1;let end=-1;for(let i=0;i<lines.length;i++){const match=lines[i].match(re);if(match===null)continue;if(match[2]!==label)continue;if(start===-1){if(match[1]!=='BEGIN')break;start=i;}else{if(match[1]!=='END')break;end=i;break;}}if(start===-1||end===-1)throw new Error('PEM section not found for: '+label);const base64=lines.slice(start+1,end).join('');base64.replace(/[^a-z0-9+/=]+/gi,'');const input=new Buffer(base64,'base64');return DERDecoder.prototype.decode.call(this,input,options);};},3075:function(module){function baseTimes(n,iteratee){var index=-1,result=Array(n);while(++index<n){result[index]=iteratee(index);}return result;}module.exports=baseTimes;},3076:function(module,__unusedexports,__webpack_require__){"use strict";var utils=__webpack_require__(1702);var assert=__webpack_require__(809);function Hmac(hash,key,enc){if(!(this instanceof Hmac))return new Hmac(hash,key,enc);this.Hash=hash;this.blockSize=hash.blockSize/8;this.outSize=hash.outSize/8;this.inner=null;this.outer=null;this._init(utils.toArray(key,enc));}module.exports=Hmac;Hmac.prototype._init=function init(key){if(key.length>this.blockSize)key=new this.Hash().update(key).digest();assert(key.length<=this.blockSize);for(var i=key.length;i<this.blockSize;i++)key.push(0);for(i=0;i<key.length;i++)key[i]^=0x36;this.inner=new this.Hash().update(key);for(i=0;i<key.length;i++)key[i]^=0x6a;this.outer=new this.Hash().update(key);};Hmac.prototype.update=function update(msg,enc){this.inner.update(msg,enc);return this;};Hmac.prototype.digest=function digest(enc){this.outer.update(this.inner.digest());return this.outer.digest(enc);};},3080:function(module){"use strict";module.exports={"437":"cp437","737":"cp737","775":"cp775","850":"cp850","852":"cp852","855":"cp855","856":"cp856","857":"cp857","858":"cp858","860":"cp860","861":"cp861","862":"cp862","863":"cp863","864":"cp864","865":"cp865","866":"cp866","869":"cp869","874":"windows874","922":"cp922","1046":"cp1046","1124":"cp1124","1125":"cp1125","1129":"cp1129","1133":"cp1133","1161":"cp1161","1162":"cp1162","1163":"cp1163","1250":"windows1250","1251":"windows1251","1252":"windows1252","1253":"windows1253","1254":"windows1254","1255":"windows1255","1256":"windows1256","1257":"windows1257","1258":"windows1258","28591":"iso88591","28592":"iso88592","28593":"iso88593","28594":"iso88594","28595":"iso88595","28596":"iso88596","28597":"iso88597","28598":"iso88598","28599":"iso88599","28600":"iso885910","28601":"iso885911","28603":"iso885913","28604":"iso885914","28605":"iso885915","28606":"iso885916","windows874":{"type":"_sbcs","chars":""},"win874":"windows874","cp874":"windows874","windows1250":{"type":"_sbcs","chars":""},"win1250":"windows1250","cp1250":"windows1250","windows1251":{"type":"_sbcs","chars":""},"win1251":"windows1251","cp1251":"windows1251","windows1252":{"type":"_sbcs","chars":""},"win1252":"windows1252","cp1252":"windows1252","windows1253":{"type":"_sbcs","chars":""},"win1253":"windows1253","cp1253":"windows1253","windows1254":{"type":"_sbcs","chars":""},"win1254":"windows1254","cp1254":"windows1254","windows1255":{"type":"_sbcs","chars":""},"win1255":"windows1255","cp1255":"windows1255","windows1256":{"type":"_sbcs","chars":""},"win1256":"windows1256","cp1256":"windows1256","windows1257":{"type":"_sbcs","chars":""},"win1257":"windows1257","cp1257":"windows1257","windows1258":{"type":"_sbcs","chars":""},"win1258":"windows1258","cp1258":"windows1258","iso88591":{"type":"_sbcs","chars":""},"cp28591":"iso88591","iso88592":{"type":"_sbcs","chars":""},"cp28592":"iso88592","iso88593":{"type":"_sbcs","chars":""},"cp28593":"iso88593","iso88594":{"type":"_sbcs","chars":""},"cp28594":"iso88594","iso88595":{"type":"_sbcs","chars":""},"cp28595":"iso88595","iso88596":{"type":"_sbcs","chars":""},"cp28596":"iso88596","iso88597":{"type":"_sbcs","chars":""},"cp28597":"iso88597","iso88598":{"type":"_sbcs","chars":""},"cp28598":"iso88598","iso88599":{"type":"_sbcs","chars":""},"cp28599":"iso88599","iso885910":{"type":"_sbcs","chars":""},"cp28600":"iso885910","iso885911":{"type":"_sbcs","chars":""},"cp28601":"iso885911","iso885913":{"type":"_sbcs","chars":""},"cp28603":"iso885913","iso885914":{"type":"_sbcs","chars":""},"cp28604":"iso885914","iso885915":{"type":"_sbcs","chars":""},"cp28605":"iso885915","iso885916":{"type":"_sbcs","chars":""},"cp28606":"iso885916","cp437":{"type":"_sbcs","chars":""},"ibm437":"cp437","csibm437":"cp437","cp737":{"type":"_sbcs","chars":""},"ibm737":"cp737","csibm737":"cp737","cp775":{"type":"_sbcs","chars":""},"ibm775":"cp775","csibm775":"cp775","cp850":{"type":"_sbcs","chars":""},"ibm850":"cp850","csibm850":"cp850","cp852":{"type":"_sbcs","chars":""},"ibm852":"cp852","csibm852":"cp852","cp855":{"type":"_sbcs","chars":""},"ibm855":"cp855","csibm855":"cp855","cp856":{"type":"_sbcs","chars":""},"ibm856":"cp856","csibm856":"cp856","cp857":{"type":"_sbcs","chars":""},"ibm857":"cp857","csibm857":"cp857","cp858":{"type":"_sbcs","chars":""},"ibm858":"cp858","csibm858":"cp858","cp860":{"type":"_sbcs","chars":""},"ibm860":"cp860","csibm860":"cp860","cp861":{"type":"_sbcs","chars":""},"ibm861":"cp861","csibm861":"cp861","cp862":{"type":"_sbcs","chars":""},"ibm862":"cp862","csibm862":"cp862","cp863":{"type":"_sbcs","chars":""},"ibm863":"cp863","csibm863":"cp863","cp864":{"type":"_sbcs","chars":"\u0000\u0001\u0002\u0003\u0004\u0005\u0006\u0007\b\t\n\u000b\f\r\u000e\u000f\u0010\u0011\u0012\u0013\u0014\u0015\u0016\u0017\u0018\u0019\u001a\u001b\u001c\u001d\u001e\u001f !\"#$&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~"},"ibm864":"cp864","csibm864":"cp864","cp865":{"type":"_sbcs","chars":""},"ibm865":"cp865","csibm865":"cp865","cp866":{"type":"_sbcs","chars":""},"ibm866":"cp866","csibm866":"cp866","cp869":{"type":"_sbcs","chars":""},"ibm869":"cp869","csibm869":"cp869","cp922":{"type":"_sbcs","chars":""},"ibm922":"cp922","csibm922":"cp922","cp1046":{"type":"_sbcs","chars":""},"ibm1046":"cp1046","csibm1046":"cp1046","cp1124":{"type":"_sbcs","chars":""},"ibm1124":"cp1124","csibm1124":"cp1124","cp1125":{"type":"_sbcs","chars":""},"ibm1125":"cp1125","csibm1125":"cp1125","cp1129":{"type":"_sbcs","chars":""},"ibm1129":"cp1129","csibm1129":"cp1129","cp1133":{"type":"_sbcs","chars":""},"ibm1133":"cp1133","csibm1133":"cp1133","cp1161":{"type":"_sbcs","chars":""},"ibm1161":"cp1161","csibm1161":"cp1161","cp1162":{"type":"_sbcs","chars":""},"ibm1162":"cp1162","csibm1162":"cp1162","cp1163":{"type":"_sbcs","chars":""},"ibm1163":"cp1163","csibm1163":"cp1163","maccroatian":{"type":"_sbcs","chars":""},"maccyrillic":{"type":"_sbcs","chars":""},"macgreek":{"type":"_sbcs","chars":""},"maciceland":{"type":"_sbcs","chars":""},"macroman":{"type":"_sbcs","chars":""},"macromania":{"type":"_sbcs","chars":""},"macthai":{"type":"_sbcs","chars":""},"macturkish":{"type":"_sbcs","chars":""},"macukraine":{"type":"_sbcs","chars":""},"koi8r":{"type":"_sbcs","chars":""},"koi8u":{"type":"_sbcs","chars":""},"koi8ru":{"type":"_sbcs","chars":""},"koi8t":{"type":"_sbcs","chars":""},"armscii8":{"type":"_sbcs","chars":")(.,-"},"rk1048":{"type":"_sbcs","chars":""},"tcvn":{"type":"_sbcs","chars":"\u0000\u0003\u0007\b\t\n\u000b\f\r\u000e\u000f\u0010\u0018\u0019\u001a\u001b\u001c\u001d\u001e\u001f !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~"},"georgianacademy":{"type":"_sbcs","chars":""},"georgianps":{"type":"_sbcs","chars":""},"pt154":{"type":"_sbcs","chars":""},"viscii":{"type":"_sbcs","chars":"\u0000\u0001\u0003\u0004\u0007\b\t\n\u000b\f\r\u000e\u000f\u0010\u0011\u0012\u0013\u0015\u0016\u0017\u0018\u001a\u001b\u001c\u001d\u001f !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~"},"iso646cn":{"type":"_sbcs","chars":"\u0000\u0001\u0002\u0003\u0004\u0005\u0006\u0007\b\t\n\u000b\f\r\u000e\u000f\u0010\u0011\u0012\u0013\u0014\u0015\u0016\u0017\u0018\u0019\u001a\u001b\u001c\u001d\u001e\u001f !\"#%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}"},"iso646jp":{"type":"_sbcs","chars":"\u0000\u0001\u0002\u0003\u0004\u0005\u0006\u0007\b\t\n\u000b\f\r\u000e\u000f\u0010\u0011\u0012\u0013\u0014\u0015\u0016\u0017\u0018\u0019\u001a\u001b\u001c\u001d\u001e\u001f !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[]^_`abcdefghijklmnopqrstuvwxyz{|}"},"hproman8":{"type":"_sbcs","chars":""},"macintosh":{"type":"_sbcs","chars":""},"ascii":{"type":"_sbcs","chars":""},"tis620":{"type":"_sbcs","chars":""}};},3092:function(module,__unusedexports,__webpack_require__){"use strict";var drain=__webpack_require__(2147);module.exports=function log(done){return drain(function(data){console.log(data);},done);};},3102:function(__unusedmodule,exports,__webpack_require__){var hash=exports;hash.utils=__webpack_require__(8044);hash.common=__webpack_require__(2568);hash.sha=__webpack_require__(5826);hash.ripemd=__webpack_require__(2414);hash.hmac=__webpack_require__(9866);hash.sha1=hash.sha.sha1;hash.sha256=hash.sha.sha256;hash.sha224=hash.sha.sha224;hash.sha384=hash.sha.sha384;hash.sha512=hash.sha.sha512;hash.ripemd160=hash.ripemd.ripemd160;},3103:function(module,__unusedexports,__webpack_require__){var assert=__webpack_require__(3930);var signals=__webpack_require__(1021);var EE=__webpack_require__(4859);if(typeof EE!=='function'){EE=EE.EventEmitter;}var emitter;if(process.__signal_exit_emitter__){emitter=process.__signal_exit_emitter__;}else{emitter=process.__signal_exit_emitter__=new EE();emitter.count=0;emitter.emitted={};}if(!emitter.infinite){emitter.setMaxListeners(Infinity);emitter.infinite=true;}module.exports=function(cb,opts){assert.equal(typeof cb,'function','a callback must be provided for exit handler');if(loaded===false){load();}var ev='exit';if(opts&&opts.alwaysLast){ev='afterexit';}var remove=function(){emitter.removeListener(ev,cb);if(emitter.listeners('exit').length===0&&emitter.listeners('afterexit').length===0){unload();}};emitter.on(ev,cb);return remove;};module.exports.unload=unload;function unload(){if(!loaded){return;}loaded=false;signals.forEach(function(sig){try{process.removeListener(sig,sigListeners[sig]);}catch(er){}});process.emit=originalProcessEmit;process.reallyExit=originalProcessReallyExit;emitter.count-=1;}function emit(event,code,signal){if(emitter.emitted[event]){return;}emitter.emitted[event]=true;emitter.emit(event,code,signal);}var sigListeners={};signals.forEach(function(sig){sigListeners[sig]=function listener(){var listeners=process.listeners(sig);if(listeners.length===emitter.count){unload();emit('exit',null,sig);emit('afterexit',null,sig);process.kill(process.pid,sig);}};});module.exports.signals=function(){return signals;};module.exports.load=load;var loaded=false;function load(){if(loaded){return;}loaded=true;emitter.count+=1;signals=signals.filter(function(sig){try{process.on(sig,sigListeners[sig]);return true;}catch(er){return false;}});process.emit=processEmit;process.reallyExit=processReallyExit;}var originalProcessReallyExit=process.reallyExit;function processReallyExit(code){process.exitCode=code||0;emit('exit',process.exitCode,null);emit('afterexit',process.exitCode,null);originalProcessReallyExit.call(process,process.exitCode);}var originalProcessEmit=process.emit;function processEmit(ev,arg){if(ev==='exit'){if(arg!==undefined){process.exitCode=arg;}var ret=originalProcessEmit.apply(this,arguments);emit('exit',process.exitCode,null);emit('afterexit',process.exitCode,null);return ret;}else{return originalProcessEmit.apply(this,arguments);}}},3105:function(module){var RFC4648='ABCDEFGHIJKLMNOPQRSTUVWXYZ234567';var RFC4648_HEX='0123456789ABCDEFGHIJKLMNOPQRSTUV';var CROCKFORD='0123456789ABCDEFGHJKMNPQRSTVWXYZ';module.exports=function base32Encode(buffer,variant,options){options=options||{};var alphabet,defaultPadding;switch(variant){case'RFC3548':case'RFC4648':alphabet=RFC4648;defaultPadding=true;break;case'RFC4648-HEX':alphabet=RFC4648_HEX;defaultPadding=true;break;case'Crockford':alphabet=CROCKFORD;defaultPadding=false;break;default:throw new Error('Unknown base32 variant: '+variant);}var padding=options.padding!==undefined?options.padding:defaultPadding;var length=buffer.byteLength;var view=new Uint8Array(buffer);var bits=0;var value=0;var output='';for(var i=0;i<length;i++){value=value<<8|view[i];bits+=8;while(bits>=5){output+=alphabet[value>>>bits-5&31];bits-=5;}}if(bits>0){output+=alphabet[value<<5-bits&31];}if(padding){while(output.length%8!==0){output+='=';}}return output;};},3114:function(module,__unusedexports,__webpack_require__){if(typeof process==='undefined'||process.type==='renderer'){module.exports=__webpack_require__(2820);}else{module.exports=__webpack_require__(757);}},3116:function(module,__unusedexports,__webpack_require__){"use strict";if(typeof process==='undefined'||process.type==='renderer'||process.browser===true||process.__nwjs){module.exports=__webpack_require__(1237);}else{module.exports=__webpack_require__(8283);}},3142:function(module){"use strict";var experimentalWarnings=new Set();function emitExperimentalWarning(feature){if(experimentalWarnings.has(feature))return;var msg=feature+' is an experimental feature. This feature could '+'change at any time';experimentalWarnings.add(feature);process.emitWarning(msg,'ExperimentalWarning');}function noop(){}module.exports.emitExperimentalWarning=process.emitWarning?emitExperimentalWarning:noop;},3159:function(module,__unusedexports,__webpack_require__){"use strict";const inherits=__webpack_require__(92);const asn1=__webpack_require__(3771);const base=asn1.base;const bignum=asn1.bignum;const der=asn1.constants.der;function DERDecoder(entity){this.enc='der';this.name=entity.name;this.entity=entity;this.tree=new DERNode();this.tree._init(entity.body);}module.exports=DERDecoder;DERDecoder.prototype.decode=function decode(data,options){if(!(data instanceof base.DecoderBuffer))data=new base.DecoderBuffer(data,options);return this.tree._decode(data,options);};function DERNode(parent){base.Node.call(this,'der',parent);}inherits(DERNode,base.Node);DERNode.prototype._peekTag=function peekTag(buffer,tag,any){if(buffer.isEmpty())return false;const state=buffer.save();const decodedTag=derDecodeTag(buffer,'Failed to peek tag: "'+tag+'"');if(buffer.isError(decodedTag))return decodedTag;buffer.restore(state);return decodedTag.tag===tag||decodedTag.tagStr===tag||decodedTag.tagStr+'of'===tag||any;};DERNode.prototype._decodeTag=function decodeTag(buffer,tag,any){const decodedTag=derDecodeTag(buffer,'Failed to decode tag of "'+tag+'"');if(buffer.isError(decodedTag))return decodedTag;let len=derDecodeLen(buffer,decodedTag.primitive,'Failed to get length of "'+tag+'"');if(buffer.isError(len))return len;if(!any&&decodedTag.tag!==tag&&decodedTag.tagStr!==tag&&decodedTag.tagStr+'of'!==tag){return buffer.error('Failed to match tag: "'+tag+'"');}if(decodedTag.primitive||len!==null)return buffer.skip(len,'Failed to match body of: "'+tag+'"');const state=buffer.save();const res=this._skipUntilEnd(buffer,'Failed to skip indefinite length body: "'+this.tag+'"');if(buffer.isError(res))return res;len=buffer.offset-state.offset;buffer.restore(state);return buffer.skip(len,'Failed to match body of: "'+tag+'"');};DERNode.prototype._skipUntilEnd=function skipUntilEnd(buffer,fail){for(;;){const tag=derDecodeTag(buffer,fail);if(buffer.isError(tag))return tag;const len=derDecodeLen(buffer,tag.primitive,fail);if(buffer.isError(len))return len;let res;if(tag.primitive||len!==null)res=buffer.skip(len);else res=this._skipUntilEnd(buffer,fail);if(buffer.isError(res))return res;if(tag.tagStr==='end')break;}};DERNode.prototype._decodeList=function decodeList(buffer,tag,decoder,options){const result=[];while(!buffer.isEmpty()){const possibleEnd=this._peekTag(buffer,'end');if(buffer.isError(possibleEnd))return possibleEnd;const res=decoder.decode(buffer,'der',options);if(buffer.isError(res)&&possibleEnd)break;result.push(res);}return result;};DERNode.prototype._decodeStr=function decodeStr(buffer,tag){if(tag==='bitstr'){const unused=buffer.readUInt8();if(buffer.isError(unused))return unused;return{unused:unused,data:buffer.raw()};}else if(tag==='bmpstr'){const raw=buffer.raw();if(raw.length%2===1)return buffer.error('Decoding of string type: bmpstr length mismatch');let str='';for(let i=0;i<raw.length/2;i++){str+=String.fromCharCode(raw.readUInt16BE(i*2));}return str;}else if(tag==='numstr'){const numstr=buffer.raw().toString('ascii');if(!this._isNumstr(numstr)){return buffer.error('Decoding of string type: '+'numstr unsupported characters');}return numstr;}else if(tag==='octstr'){return buffer.raw();}else if(tag==='objDesc'){return buffer.raw();}else if(tag==='printstr'){const printstr=buffer.raw().toString('ascii');if(!this._isPrintstr(printstr)){return buffer.error('Decoding of string type: '+'printstr unsupported characters');}return printstr;}else if(/str$/.test(tag)){return buffer.raw().toString();}else{return buffer.error('Decoding of string type: '+tag+' unsupported');}};DERNode.prototype._decodeObjid=function decodeObjid(buffer,values,relative){let result;const identifiers=[];let ident=0;let subident=0;while(!buffer.isEmpty()){subident=buffer.readUInt8();ident<<=7;ident|=subident&0x7f;if((subident&0x80)===0){identifiers.push(ident);ident=0;}}if(subident&0x80)identifiers.push(ident);const first=identifiers[0]/40|0;const second=identifiers[0]%40;if(relative)result=identifiers;else result=[first,second].concat(identifiers.slice(1));if(values){let tmp=values[result.join(' ')];if(tmp===undefined)tmp=values[result.join('.')];if(tmp!==undefined)result=tmp;}return result;};DERNode.prototype._decodeTime=function decodeTime(buffer,tag){const str=buffer.raw().toString();let year;let mon;let day;let hour;let min;let sec;if(tag==='gentime'){year=str.slice(0,4)|0;mon=str.slice(4,6)|0;day=str.slice(6,8)|0;hour=str.slice(8,10)|0;min=str.slice(10,12)|0;sec=str.slice(12,14)|0;}else if(tag==='utctime'){year=str.slice(0,2)|0;mon=str.slice(2,4)|0;day=str.slice(4,6)|0;hour=str.slice(6,8)|0;min=str.slice(8,10)|0;sec=str.slice(10,12)|0;if(year<70)year=2000+year;else year=1900+year;}else{return buffer.error('Decoding '+tag+' time is not supported yet');}return Date.UTC(year,mon-1,day,hour,min,sec,0);};DERNode.prototype._decodeNull=function decodeNull(){return null;};DERNode.prototype._decodeBool=function decodeBool(buffer){const res=buffer.readUInt8();if(buffer.isError(res))return res;else return res!==0;};DERNode.prototype._decodeInt=function decodeInt(buffer,values){const raw=buffer.raw();let res=new bignum(raw);if(values)res=values[res.toString(10)]||res;return res;};DERNode.prototype._use=function use(entity,obj){if(typeof entity==='function')entity=entity(obj);return entity._getDecoder('der').tree;};function derDecodeTag(buf,fail){let tag=buf.readUInt8(fail);if(buf.isError(tag))return tag;const cls=der.tagClass[tag>>6];const primitive=(tag&0x20)===0;if((tag&0x1f)===0x1f){let oct=tag;tag=0;while((oct&0x80)===0x80){oct=buf.readUInt8(fail);if(buf.isError(oct))return oct;tag<<=7;tag|=oct&0x7f;}}else{tag&=0x1f;}const tagStr=der.tag[tag];return{cls:cls,primitive:primitive,tag:tag,tagStr:tagStr};}function derDecodeLen(buf,primitive,fail){let len=buf.readUInt8(fail);if(buf.isError(len))return len;if(!primitive&&len===0x80)return null;if((len&0x80)===0){return len;}const num=len&0x7f;if(num>4)return buf.error('length octect is too long');len=0;for(let i=0;i<num;i++){len<<=8;const j=buf.readUInt8(fail);if(buf.isError(j))return j;len|=j;}return len;}},3161:function(module,__unusedexports,__webpack_require__){"use strict";const TimeCache=__webpack_require__(6534);const pull=__webpack_require__(2885);const lp=__webpack_require__(8585);const assert=__webpack_require__(3930);const BaseProtocol=__webpack_require__(2233);const{message}=__webpack_require__(2233);const utils=__webpack_require__(8601);const config=__webpack_require__(4097);const multicodec=config.multicodec;const ensureArray=utils.ensureArray;const setImmediate=__webpack_require__(7368);class FloodSub extends BaseProtocol{constructor(libp2p){super('libp2p:floodsub',multicodec,libp2p);this.cache=new TimeCache();this.subscriptions=new Set();}_onDial(peerInfo,conn,callback){super._onDial(peerInfo,conn,err=>{if(err)return callback(err);const idB58Str=peerInfo.id.toB58String();const peer=this.peers.get(idB58Str);if(peer&&peer.isWritable){peer.sendSubscriptions(this.subscriptions);}setImmediate(()=>callback());});}_processConnection(idB58Str,conn,peer){pull(conn,lp.decode(),pull.map(data=>message.rpc.RPC.decode(data)),pull.drain(rpc=>this._onRpc(idB58Str,rpc),err=>this._onConnectionEnd(idB58Str,peer,err)));}_onRpc(idB58Str,rpc){if(!rpc){return;}this.log('rpc from',idB58Str);const subs=rpc.subscriptions;const msgs=rpc.msgs;if(msgs&&msgs.length){this._processRpcMessages(utils.normalizeInRpcMessages(rpc.msgs));}if(subs&&subs.length){const peer=this.peers.get(idB58Str);if(peer){peer.updateSubscriptions(subs);this.emit('floodsub:subscription-change',peer.info,peer.topics,subs);}}}_processRpcMessages(msgs){msgs.forEach(msg=>{const seqno=utils.msgId(msg.from,msg.seqno);if(this.cache.has(seqno)){return;}this.cache.put(seqno);this._emitMessages(msg.topicIDs,[msg]);this._forwardMessages(msg.topicIDs,[msg]);});}_emitMessages(topics,messages){topics.forEach(topic=>{if(!this.subscriptions.has(topic)){return;}messages.forEach(message=>{this.emit(topic,message);});});}_forwardMessages(topics,messages){this.peers.forEach(peer=>{if(!peer.isWritable||!utils.anyMatch(peer.topics,topics)){return;}peer.sendMessages(utils.normalizeOutRpcMessages(messages));this.log('publish msgs on topics',topics,peer.info.id.toB58String());});}stop(callback){super.stop(err=>{if(err)return callback(err);this.subscriptions=new Set();callback();});}publish(topics,messages){assert(this.started,'FloodSub is not started');this.log('publish',topics,messages);topics=ensureArray(topics);messages=ensureArray(messages);const from=this.libp2p.peerInfo.id.toB58String();const buildMessage=msg=>{const seqno=utils.randomSeqno();this.cache.put(utils.msgId(from,seqno));return{from:from,data:msg,seqno:seqno,topicIDs:topics};};const msgObjects=messages.map(buildMessage);this._emitMessages(topics,msgObjects);this._forwardMessages(topics,msgObjects);}subscribe(topics){assert(this.started,'FloodSub is not started');topics=ensureArray(topics);topics.forEach(topic=>this.subscriptions.add(topic));this.peers.forEach(peer=>sendSubscriptionsOnceReady(peer));function sendSubscriptionsOnceReady(peer){if(peer&&peer.isWritable){return peer.sendSubscriptions(topics);}const onConnection=()=>{peer.removeListener('connection',onConnection);sendSubscriptionsOnceReady(peer);};peer.on('connection',onConnection);peer.once('close',()=>peer.removeListener('connection',onConnection));}}unsubscribe(topics){if(!this.started){return;}topics=ensureArray(topics);topics.forEach(topic=>this.subscriptions.delete(topic));this.peers.forEach(peer=>checkIfReady(peer));function checkIfReady(peer){if(peer&&peer.isWritable){peer.sendUnsubscriptions(topics);}else{setImmediate(checkIfReady.bind(peer));}}}}module.exports=FloodSub;},3166:function(module,__unusedexports,__webpack_require__){"use strict";const asyncMap=__webpack_require__(9720);const limitStreamBytes=limit=>{let bytesRead=0;return asyncMap((buffer,cb)=>{if(bytesRead>limit){return cb(true);}if(bytesRead+buffer.length>limit){buffer=buffer.slice(0,limit-bytesRead);}bytesRead=bytesRead+buffer.length;cb(null,buffer);});};module.exports=limitStreamBytes;},3171:function(module){"use strict";function withIs(Class,{className,symbolName}){const symbol=Symbol.for(symbolName);const ClassIsWrapper={[className]:class extends Class{constructor(...args){super(...args);Object.defineProperty(this,symbol,{value:true});}get[Symbol.toStringTag](){return className;}}}[className];ClassIsWrapper[`is${className}`]=obj=>!!(obj&&obj[symbol]);return ClassIsWrapper;}function withIsProto(Class,{className,symbolName,withoutNew}){const symbol=Symbol.for(symbolName);const ClassIsWrapper={[className]:function(...args){if(withoutNew&&!(this instanceof ClassIsWrapper)){return new ClassIsWrapper(...args);}const _this=Class.call(this,...args)||this;if(_this&&!_this[symbol]){Object.defineProperty(_this,symbol,{value:true});}return _this;}}[className];ClassIsWrapper.prototype=Object.create(Class.prototype);ClassIsWrapper.prototype.constructor=ClassIsWrapper;Object.defineProperty(ClassIsWrapper.prototype,Symbol.toStringTag,{get(){return className;}});ClassIsWrapper[`is${className}`]=obj=>!!(obj&&obj[symbol]);return ClassIsWrapper;}module.exports=withIs;module.exports.proto=withIsProto;},3177:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=_eachOfLimit;var _noop=__webpack_require__(5811);var _noop2=_interopRequireDefault(_noop);var _once=__webpack_require__(3925);var _once2=_interopRequireDefault(_once);var _iterator=__webpack_require__(3494);var _iterator2=_interopRequireDefault(_iterator);var _onlyOnce=__webpack_require__(2306);var _onlyOnce2=_interopRequireDefault(_onlyOnce);var _breakLoop=__webpack_require__(3487);var _breakLoop2=_interopRequireDefault(_breakLoop);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _eachOfLimit(limit){return function(obj,iteratee,callback){callback=(0,_once2.default)(callback||_noop2.default);if(limit<=0||!obj){return callback(null);}var nextElem=(0,_iterator2.default)(obj);var done=false;var running=0;var looping=false;function iterateeCallback(err,value){running-=1;if(err){done=true;callback(err);}else if(value===_breakLoop2.default||done&&running<=0){done=true;return callback(null);}else if(!looping){replenish();}}function replenish(){looping=true;while(running<limit&&!done){var elem=nextElem();if(elem===null){done=true;if(running<=0){callback(null);}return;}running+=1;iteratee(elem.value,elem.key,(0,_onlyOnce2.default)(iterateeCallback));}looping=false;}replenish();};}module.exports=exports['default'];},3187:function(module,exports,__webpack_require__){"use strict";const map=__webpack_require__(3037);const extend=__webpack_require__(7756);const codec=__webpack_require__(1365);const protocols=__webpack_require__(7948);const varint=__webpack_require__(2572);const bs58=__webpack_require__(4967);const withIs=__webpack_require__(3171);const NotImplemented=new Error('Sorry, Not Implemented Yet.');const Multiaddr=withIs.proto(function(addr){if(!(this instanceof Multiaddr)){return new Multiaddr(addr);}if(addr==null){addr='';}if(addr instanceof Buffer){this.buffer=codec.fromBuffer(addr);}else if(typeof addr==='string'||addr instanceof String){if(addr.length>0&&addr.charAt(0)!=='/'){throw new Error(`multiaddr "${addr}" must start with a "/"`);}this.buffer=codec.fromString(addr);}else if(addr.buffer&&addr.protos&&addr.protoCodes){this.buffer=codec.fromBuffer(addr.buffer);}else{throw new Error('addr must be a string, Buffer, or another Multiaddr');}},{className:'Multiaddr',symbolName:'@multiformats/js-multiaddr/multiaddr'});Multiaddr.prototype.toString=function toString(){return codec.bufferToString(this.buffer);};Multiaddr.prototype.toOptions=function toOptions(){const opts={};const parsed=this.toString().split('/');opts.family=parsed[1]==='ip4'?'ipv4':'ipv6';opts.host=parsed[2];opts.transport=parsed[3];opts.port=parsed[4];return opts;};Multiaddr.prototype.inspect=function inspect(){return'<Multiaddr '+this.buffer.toString('hex')+' - '+codec.bufferToString(this.buffer)+'>';};Multiaddr.prototype.protos=function protos(){return map(this.protoCodes(),function(code){return extend(protocols(code));});};Multiaddr.prototype.protoCodes=function protoCodes(){const codes=[];const buf=this.buffer;let i=0;while(i<buf.length){const code=varint.decode(buf,i);const n=varint.decode.bytes;const p=protocols(code);const size=codec.sizeForAddr(p,buf.slice(i+n));i+=size+n;codes.push(code);}return codes;};Multiaddr.prototype.protoNames=function protoNames(){return map(this.protos(),function(proto){return proto.name;});};Multiaddr.prototype.tuples=function tuples(){return codec.bufferToTuples(this.buffer);};Multiaddr.prototype.stringTuples=function stringTuples(){const t=codec.bufferToTuples(this.buffer);return codec.tuplesToStringTuples(t);};Multiaddr.prototype.encapsulate=function encapsulate(addr){addr=Multiaddr(addr);return Multiaddr(this.toString()+addr.toString());};Multiaddr.prototype.decapsulate=function decapsulate(addr){addr=addr.toString();const s=this.toString();const i=s.lastIndexOf(addr);if(i<0){throw new Error('Address '+this+' does not contain subaddress: '+addr);}return Multiaddr(s.slice(0,i));};Multiaddr.prototype.getPeerId=function getPeerId(){let b58str=null;try{b58str=this.stringTuples().filter(tuple=>{if(tuple[0]===protocols.names['ipfs'].code){return true;}})[0][1];bs58.decode(b58str);}catch(e){b58str=null;}return b58str;};Multiaddr.prototype.equals=function equals(addr){return this.buffer.equals(addr.buffer);};Multiaddr.prototype.nodeAddress=function nodeAddress(){const codes=this.protoCodes();const names=this.protoNames();const parts=this.toString().split('/').slice(1);if(parts.length<4){throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6}/{address}/{tcp, udp}/{port}".');}else if(codes[0]!==4&&codes[0]!==41&&codes[0]!==54&&codes[0]!==55){throw new Error(`no protocol with name: "'${names[0]}'". Must have a valid family name: "{ip4, ip6, dns4, dns6}".`);}else if(parts[2]!=='tcp'&&parts[2]!=='udp'){throw new Error(`no protocol with name: "'${names[1]}'". Must have a valid transport protocol: "{tcp, udp}".`);}return{family:codes[0]===41||codes[0]===55?6:4,address:parts[1],port:parts[3]};};Multiaddr.fromNodeAddress=function fromNodeAddress(addr,transport){if(!addr)throw new Error('requires node address object');if(!transport)throw new Error('requires transport protocol');const ip=addr.family==='IPv6'?'ip6':'ip4';return Multiaddr('/'+[ip,addr.address,transport,addr.port].join('/'));};Multiaddr.prototype.isThinWaistAddress=function isThinWaistAddress(addr){const protos=(addr||this).protos();if(protos.length!==2){return false;}if(protos[0].code!==4&&protos[0].code!==41){return false;}if(protos[1].code!==6&&protos[1].code!==17){return false;}return true;};Multiaddr.prototype.fromStupidString=function fromStupidString(str){throw NotImplemented;};Multiaddr.protocols=protocols;Multiaddr.isName=function isName(addr){if(!Multiaddr.isMultiaddr(addr)){return false;}return addr.protos().some(proto=>proto.resolvable);};Multiaddr.resolve=function resolve(addr,callback){if(!Multiaddr.isMultiaddr(addr)||!Multiaddr.isName(addr)){return callback(new Error('not a valid name'));}return callback(new Error('not implemented yet'));};exports=module.exports=Multiaddr;},3188:function(module,__unusedexports,__webpack_require__){var listCacheClear=__webpack_require__(8036),listCacheDelete=__webpack_require__(9216),listCacheGet=__webpack_require__(8697),listCacheHas=__webpack_require__(3419),listCacheSet=__webpack_require__(720);function ListCache(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1]);}}ListCache.prototype.clear=listCacheClear;ListCache.prototype['delete']=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;module.exports=ListCache;},3191:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=doWhilst;var _noop=__webpack_require__(5811);var _noop2=_interopRequireDefault(_noop);var _slice=__webpack_require__(3404);var _slice2=_interopRequireDefault(_slice);var _onlyOnce=__webpack_require__(2306);var _onlyOnce2=_interopRequireDefault(_onlyOnce);var _wrapAsync=__webpack_require__(9396);var _wrapAsync2=_interopRequireDefault(_wrapAsync);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function doWhilst(iteratee,test,callback){callback=(0,_onlyOnce2.default)(callback||_noop2.default);var _iteratee=(0,_wrapAsync2.default)(iteratee);var next=function(err){if(err)return callback(err);var args=(0,_slice2.default)(arguments,1);if(test.apply(this,args))return _iteratee(next);callback.apply(null,[null].concat(args));};_iteratee(next);}module.exports=exports['default'];},3203:function(module){module.exports=require("rn-bridge");},3204:function(module){"use strict";module.exports={"10029":"maccenteuro","maccenteuro":{"type":"_sbcs","chars":""},"808":"cp808","ibm808":"cp808","cp808":{"type":"_sbcs","chars":""},"mik":{"type":"_sbcs","chars":""},"ascii8bit":"ascii","usascii":"ascii","ansix34":"ascii","ansix341968":"ascii","ansix341986":"ascii","csascii":"ascii","cp367":"ascii","ibm367":"ascii","isoir6":"ascii","iso646us":"ascii","iso646irv":"ascii","us":"ascii","latin1":"iso88591","latin2":"iso88592","latin3":"iso88593","latin4":"iso88594","latin5":"iso88599","latin6":"iso885910","latin7":"iso885913","latin8":"iso885914","latin9":"iso885915","latin10":"iso885916","csisolatin1":"iso88591","csisolatin2":"iso88592","csisolatin3":"iso88593","csisolatin4":"iso88594","csisolatincyrillic":"iso88595","csisolatinarabic":"iso88596","csisolatingreek":"iso88597","csisolatinhebrew":"iso88598","csisolatin5":"iso88599","csisolatin6":"iso885910","l1":"iso88591","l2":"iso88592","l3":"iso88593","l4":"iso88594","l5":"iso88599","l6":"iso885910","l7":"iso885913","l8":"iso885914","l9":"iso885915","l10":"iso885916","isoir14":"iso646jp","isoir57":"iso646cn","isoir100":"iso88591","isoir101":"iso88592","isoir109":"iso88593","isoir110":"iso88594","isoir144":"iso88595","isoir127":"iso88596","isoir126":"iso88597","isoir138":"iso88598","isoir148":"iso88599","isoir157":"iso885910","isoir166":"tis620","isoir179":"iso885913","isoir199":"iso885914","isoir203":"iso885915","isoir226":"iso885916","cp819":"iso88591","ibm819":"iso88591","cyrillic":"iso88595","arabic":"iso88596","arabic8":"iso88596","ecma114":"iso88596","asmo708":"iso88596","greek":"iso88597","greek8":"iso88597","ecma118":"iso88597","elot928":"iso88597","hebrew":"iso88598","hebrew8":"iso88598","turkish":"iso88599","turkish8":"iso88599","thai":"iso885911","thai8":"iso885911","celtic":"iso885914","celtic8":"iso885914","isoceltic":"iso885914","tis6200":"tis620","tis62025291":"tis620","tis62025330":"tis620","10000":"macroman","10006":"macgreek","10007":"maccyrillic","10079":"maciceland","10081":"macturkish","cspc8codepage437":"cp437","cspc775baltic":"cp775","cspc850multilingual":"cp850","cspcp852":"cp852","cspc862latinhebrew":"cp862","cpgr":"cp869","msee":"cp1250","mscyrl":"cp1251","msansi":"cp1252","msgreek":"cp1253","msturk":"cp1254","mshebr":"cp1255","msarab":"cp1256","winbaltrim":"cp1257","cp20866":"koi8r","20866":"koi8r","ibm878":"koi8r","cskoi8r":"koi8r","cp21866":"koi8u","21866":"koi8u","ibm1168":"koi8u","strk10482002":"rk1048","tcvn5712":"tcvn","tcvn57121":"tcvn","gb198880":"iso646cn","cn":"iso646cn","csiso14jisc6220ro":"iso646jp","jisc62201969ro":"iso646jp","jp":"iso646jp","cshproman8":"hproman8","r8":"hproman8","roman8":"hproman8","xroman8":"hproman8","ibm1051":"hproman8","mac":"macintosh","csmacintosh":"macintosh"};},3215:function(module,__unusedexports,__webpack_require__){"use strict";function Random(){}Random.getRandomBuffer=function(size){if(process.browser)return Random.getRandomBufferBrowser(size);else return Random.getRandomBufferNode(size);};Random.getRandomBufferNode=function(size){var crypto=__webpack_require__(2984);return crypto.randomBytes(size);};Random.getRandomBufferBrowser=function(size){if(!window.crypto&&!window.msCrypto)throw new Error('window.crypto not available');if(window.crypto&&window.crypto.getRandomValues)var crypto=window.crypto;else if(window.msCrypto&&window.msCrypto.getRandomValues)var crypto=window.msCrypto;else throw new Error('window.crypto.getRandomValues not available');var bbuf=new Uint8Array(size);crypto.getRandomValues(bbuf);var buf=new Buffer(bbuf);return buf;};Random.getPseudoRandomBuffer=function(size){var b32=0x100000000;var b=new Buffer(size);var r;for(var i=0;i<=size;i++){var j=Math.floor(i/4);var k=i-j*4;if(k===0){r=Math.random()*b32;b[i]=r&0xff;}else{b[i]=(r=r>>>8)&0xff;}}return b;};module.exports=Random;},3219:function(module,__unusedexports,__webpack_require__){"use strict";var isHexPrefixed=__webpack_require__(4002);var stripHexPrefix=__webpack_require__(4649);function padToEven(value){var a=value;if(typeof a!=='string'){throw new Error('[ethjs-util] while padding to even, value must be string, is currently '+typeof a+', while padToEven.');}if(a.length%2){a='0'+a;}return a;}function intToHex(i){var hex=i.toString(16);return'0x'+hex;}function intToBuffer(i){var hex=intToHex(i);return new Buffer(padToEven(hex.slice(2)),'hex');}function getBinarySize(str){if(typeof str!=='string'){throw new Error('[ethjs-util] while getting binary size, method getBinarySize requires input \'str\' to be type String, got \''+typeof str+'\'.');}return Buffer.byteLength(str,'utf8');}function arrayContainsArray(superset,subset,some){if(Array.isArray(superset)!==true){throw new Error('[ethjs-util] method arrayContainsArray requires input \'superset\' to be an array got type \''+typeof superset+'\'');}if(Array.isArray(subset)!==true){throw new Error('[ethjs-util] method arrayContainsArray requires input \'subset\' to be an array got type \''+typeof subset+'\'');}return subset[Boolean(some)&&'some'||'every'](function(value){return superset.indexOf(value)>=0;});}function toUtf8(hex){var bufferValue=new Buffer(padToEven(stripHexPrefix(hex).replace(/^0+|0+$/g,'')),'hex');return bufferValue.toString('utf8');}function toAscii(hex){var str='';var i=0,l=hex.length;if(hex.substring(0,2)==='0x'){i=2;}for(;i<l;i+=2){var code=parseInt(hex.substr(i,2),16);str+=String.fromCharCode(code);}return str;}function fromUtf8(stringValue){var str=new Buffer(stringValue,'utf8');return'0x'+padToEven(str.toString('hex')).replace(/^0+|0+$/g,'');}function fromAscii(stringValue){var hex='';for(var i=0;i<stringValue.length;i++){var code=stringValue.charCodeAt(i);var n=code.toString(16);hex+=n.length<2?'0'+n:n;}return'0x'+hex;}function getKeys(params,key,allowEmpty){if(!Array.isArray(params)){throw new Error('[ethjs-util] method getKeys expecting type Array as \'params\' input, got \''+typeof params+'\'');}if(typeof key!=='string'){throw new Error('[ethjs-util] method getKeys expecting type String for input \'key\' got \''+typeof key+'\'.');}var result=[];for(var i=0;i<params.length;i++){var value=params[i][key];if(allowEmpty&&!value){value='';}else if(typeof value!=='string'){throw new Error('invalid abi');}result.push(value);}return result;}function isHexString(value,length){if(typeof value!=='string'||!value.match(/^0x[0-9A-Fa-f]*$/)){return false;}if(length&&value.length!==2+2*length){return false;}return true;}module.exports={arrayContainsArray:arrayContainsArray,intToBuffer:intToBuffer,getBinarySize:getBinarySize,isHexPrefixed:isHexPrefixed,stripHexPrefix:stripHexPrefix,padToEven:padToEven,intToHex:intToHex,fromAscii:fromAscii,fromUtf8:fromUtf8,toAscii:toAscii,toUtf8:toUtf8,getKeys:getKeys,isHexString:isHexString};},3232:function(module){function AbstractChainedBatch(db){this._db=db;this._operations=[];this._written=false;}AbstractChainedBatch.prototype._serializeKey=function(key){return this._db._serializeKey(key);};AbstractChainedBatch.prototype._serializeValue=function(value){return this._db._serializeValue(value);};AbstractChainedBatch.prototype._checkWritten=function(){if(this._written){throw new Error('write() already called on this batch');}};AbstractChainedBatch.prototype.put=function(key,value){this._checkWritten();var err=this._db._checkKey(key,'key');if(err){throw err;}key=this._serializeKey(key);value=this._serializeValue(value);this._put(key,value);return this;};AbstractChainedBatch.prototype._put=function(key,value){this._operations.push({type:'put',key:key,value:value});};AbstractChainedBatch.prototype.del=function(key){this._checkWritten();var err=this._db._checkKey(key,'key');if(err){throw err;}key=this._serializeKey(key);this._del(key);return this;};AbstractChainedBatch.prototype._del=function(key){this._operations.push({type:'del',key:key});};AbstractChainedBatch.prototype.clear=function(){this._checkWritten();this._operations=[];this._clear();return this;};AbstractChainedBatch.prototype._clear=function noop(){};AbstractChainedBatch.prototype.write=function(options,callback){this._checkWritten();if(typeof options==='function'){callback=options;}if(typeof callback!=='function'){throw new Error('write() requires a callback argument');}if(typeof options!=='object'){options={};}this._written=true;if(typeof this._write==='function'){return this._write(callback);}if(typeof this._db._batch==='function'){return this._db._batch(this._operations,options,callback);}process.nextTick(callback);};module.exports=AbstractChainedBatch;},3237:function(module){function isKeyable(value){var type=typeof value;return type=='string'||type=='number'||type=='symbol'||type=='boolean'?value!=='__proto__':value===null;}module.exports=isKeyable;},3270:function(module,__unusedexports,__webpack_require__){var WriteError=__webpack_require__(2652).WriteError;var promisify=__webpack_require__(5932);function Batch(levelup){this._levelup=levelup;this.batch=levelup.db.batch();this.ops=[];this.length=0;}Batch.prototype.put=function(key,value){try{this.batch.put(key,value);}catch(e){throw new WriteError(e);}this.ops.push({type:'put',key:key,value:value});this.length++;return this;};Batch.prototype.del=function(key){try{this.batch.del(key);}catch(err){throw new WriteError(err);}this.ops.push({type:'del',key:key});this.length++;return this;};Batch.prototype.clear=function(){try{this.batch.clear();}catch(err){throw new WriteError(err);}this.ops=[];this.length=0;return this;};Batch.prototype.write=function(callback){var levelup=this._levelup;var ops=this.ops;var promise;if(!callback){callback=promisify();promise=callback.promise;}try{this.batch.write(function(err){if(err){return callback(new WriteError(err));}levelup.emit('batch',ops);callback();});}catch(err){throw new WriteError(err);}return promise;};module.exports=Batch;},3271:function(__unusedmodule,exports){"use strict";exports.create=function createBackend(name,path,options){const Ctor=options.storageBackends[name];const backendOptions=Object.assign({},options.storageBackendOptions[name]||{});return new Ctor(path,backendOptions);};},3273:function(module){"use strict";const zeros=(max=Infinity,increment=4096)=>{let i=0;return(end,cb)=>{if(end){return cb&&cb(end);}if(i>=max){const foo=true;return cb(foo);}let nextLength=increment;if(i+nextLength>max){nextLength=max-i;}i+=nextLength;cb(null,Buffer.alloc(nextLength,0));};};module.exports=zeros;},3278:function(module,__unusedexports,__webpack_require__){"use strict";const UnixFS=__webpack_require__(7959);const pull=__webpack_require__(418);const error=__webpack_require__(5619);const filter=__webpack_require__(708);const flatten=__webpack_require__(6549);const map=__webpack_require__(569);const paramap=__webpack_require__(3515);const CID=__webpack_require__(9339);const waterfall=__webpack_require__(4265);const resolvers={directory:__webpack_require__(7430),'hamt-sharded-directory':__webpack_require__(5880),file:__webpack_require__(9972),object:__webpack_require__(8393),raw:__webpack_require__(5540)};module.exports=Object.assign({createResolver:createResolver,typeOf:typeOf},resolvers);function createResolver(dag,options,depth,parent){if(!depth){depth=0;}if(depth>options.maxDepth){return map(identity);}return pull(paramap((item,cb)=>{if(typeof item.depth!=='number'){return error(new Error('no depth'));}if(item.object){return cb(null,resolveItem(null,item.object,item,options));}const cid=new CID(item.multihash);waterfall([done=>dag.get(cid,done),(node,done)=>done(null,resolveItem(cid,node.value,item,options))],cb);}),flatten(),filter(Boolean),filter(node=>node.depth<=options.maxDepth));function resolveItem(cid,node,item,options){return resolve({cid,node,name:item.name,path:item.path,pathRest:item.pathRest,size:item.size,dag,parentNode:item.parent||parent,depth:item.depth,options});}function resolve({cid,node,name,path,pathRest,size,dag,parentNode,depth,options}){let type;try{type=typeOf(node);}catch(err){return error(err);}const nodeResolver=resolvers[type];if(!nodeResolver){return error(new Error('Unkown node type '+type));}const resolveDeep=createResolver(dag,options,depth,node);return nodeResolver(cid,node,name,path,pathRest,resolveDeep,size,dag,parentNode,depth,options);}}function typeOf(node){if(Buffer.isBuffer(node)){return'raw';}else if(Buffer.isBuffer(node.data)){return UnixFS.unmarshal(node.data).type;}else{return'object';}}function identity(o){return o;}},3279:function(module,__unusedexports,__webpack_require__){"use strict";const waterfall=__webpack_require__(4265);const series=__webpack_require__(7644);const parallel=__webpack_require__(4876);const each=__webpack_require__(4486);const _get=__webpack_require__(8256);const assert=__webpack_require__(3930);const path=__webpack_require__(5897);const debug=__webpack_require__(746);const Big=__webpack_require__(4417);const pull=__webpack_require__(2885);const backends=__webpack_require__(3271);const version=__webpack_require__(2064);const config=__webpack_require__(1150);const spec=__webpack_require__(5600);const apiAddr=__webpack_require__(507);const blockstore=__webpack_require__(7914);const defaultOptions=__webpack_require__(6799);const defaultDatastore=__webpack_require__(8387);const ERRORS=__webpack_require__(2128);const log=debug('repo');const noLimit=Number.MAX_SAFE_INTEGER;const lockers={memory:__webpack_require__(4920),fs:__webpack_require__(7306)};const repoVersion=__webpack_require__(8579).repoVersion;class IpfsRepo{constructor(repoPath,options){assert.strictEqual(typeof repoPath,'string','missing repoPath');this.options=buildOptions(options);this.closed=true;this.path=repoPath;this._locker=this._getLocker();this.root=backends.create('root',this.path,this.options);this.version=version(this.root);this.config=config(this.root);this.spec=spec(this.root);this.apiAddr=apiAddr(this.root);}init(config,callback){log('initializing at: %s',this.path);series([cb=>this.root.open(ignoringAlreadyOpened(cb)),cb=>this.config.set(buildConfig(config),cb),cb=>this.spec.set(buildDatastoreSpec(config),cb),cb=>this.version.set(repoVersion,cb)],callback);}open(callback){if(!this.closed){setImmediate(()=>callback(new Error('repo is already open')));return;}log('opening at: %s',this.path);waterfall([cb=>this.root.open(ignoringAlreadyOpened(cb)),cb=>this._isInitialized(cb),cb=>this._openLock(this.path,cb),(lck,cb)=>{log('aquired repo.lock');this.lockfile=lck;cb();},cb=>{log('creating datastore');this.datastore=backends.create('datastore',path.join(this.path,'datastore'),this.options);log('creating blocks');const blocksBaseStore=backends.create('blocks',path.join(this.path,'blocks'),this.options);blockstore(blocksBaseStore,this.options.storageBackendOptions.blocks,cb);},(blocks,cb)=>{this.blocks=blocks;cb();},cb=>{log('creating keystore');this.keys=backends.create('keys',path.join(this.path,'keys'),this.options);cb();},cb=>{this.closed=false;log('all opened');cb();}],err=>{if(err&&this.lockfile){this._closeLock(err2=>{if(!err2){this.lockfile=null;}else{log('error removing lock',err2);}callback(err);});}else{callback(err);}});}_getLocker(){if(typeof this.options.lock==='string'){assert(lockers[this.options.lock],'Unknown lock type: '+this.options.lock);return lockers[this.options.lock];}assert(this.options.lock,'No lock provided');return this.options.lock;}_openLock(path,callback){this._locker.lock(path,(err,lockfile)=>{if(err){return callback(err,null);}assert.strictEqual(typeof lockfile.close,'function','Locks must have a close method');callback(null,lockfile);});}_closeLock(callback){if(this.lockfile){return this.lockfile.close(callback);}callback();}_isInitialized(callback){log('init check');parallel({config:cb=>this.config.exists(cb),spec:cb=>this.spec.exists(cb),version:cb=>this.version.check(repoVersion,cb)},(err,res)=>{log('init',err,res);if(err&&!res.config){return callback(Object.assign(new Error('repo is not initialized yet'),{code:ERRORS.ERR_REPO_NOT_INITIALIZED,path:this.path}));}callback(err);});}close(callback){if(this.closed){return callback(new Error('repo is already closed'));}log('closing at: %s',this.path);series([cb=>this.apiAddr.delete(ignoringNotFound(cb)),cb=>{each([this.blocks,this.keys,this.datastore],(store,callback)=>store.close(callback),cb);},cb=>{log('unlocking');this.closed=true;this._closeLock(cb);},cb=>{this.lockfile=null;cb();}],err=>callback(err));}exists(callback){this.version.exists(callback);}stat(options,callback){if(typeof options==='function'){callback=options;options={};}options=Object.assign({},{human:false},options);parallel({storageMax:cb=>this.config.get('Datastore.StorageMax',(err,max)=>{if(err){cb(null,new Big(noLimit));}else{cb(null,new Big(max));}}),version:cb=>this.version.get(cb),blocks:cb=>this.blocks.query({},(err,list)=>{list=list||[];const count=new Big(list.length);let size=new Big(0);list.forEach(block=>{size=size.plus(block.value.byteLength).plus(block.key._buf.byteLength);});cb(err,{count:count,size:size});}),datastore:cb=>getSize(this.datastore,cb),keys:cb=>getSize(this.keys,cb)},(err,results)=>{if(err)return callback(err);let size=results.blocks.size.plus(results.datastore).plus(results.keys);if(options.human){size=size.div(1048576);}callback(null,{repoPath:this.path,storageMax:results.storageMax,version:results.version,numObjects:results.blocks.count,repoSize:size});});}}function getSize(queryFn,callback){pull(queryFn.query({}),pull.reduce((sum,block)=>{return sum.plus(block.value.byteLength).plus(block.key._buf.byteLength);},new Big(0),callback));}module.exports=IpfsRepo;module.exports.repoVersion=repoVersion;module.exports.errors=ERRORS;function ignoringIf(cond,cb){return err=>{cb(err&&!cond(err)?err:null);};}function ignoringAlreadyOpened(cb){return ignoringIf(err=>err.message==='Already open',cb);}function ignoringNotFound(cb){return ignoringIf(err=>{return err&&(err.code===ERRORS.ERR_REPO_NOT_INITIALIZED||err.message.startsWith('ENOENT'));},cb);}function buildOptions(_options){const options=Object.assign({},defaultOptions,_options);options.storageBackends=Object.assign({},defaultOptions.storageBackends,options.storageBackends);options.storageBackendOptions=Object.assign({},defaultOptions.storageBackendOptions,options.storageBackendOptions);return options;}function buildConfig(_config){_config.datastore=Object.assign({},defaultDatastore,_get(_config,'datastore',{}));return _config;}function buildDatastoreSpec(_config){const spec=Object.assign({},defaultDatastore.Spec,_get(_config,'datastore.Spec',{}));return{type:spec.type,mounts:spec.mounts.map(mounting=>({mountpoint:mounting.mountpoint,type:mounting.child.type,path:mounting.child.path,shardFunc:mounting.child.shardFunc}))};}},3284:function(module){module.exports={"name":"tangerineWhistle","comment":"Hardfork with gas cost changes for IO-heavy operations","eip":{"url":"https://eips.ethereum.org/EIPS/eip-608","status":"Final"},"gasConfig":{},"gasPrices":{"sload":{"v":200,"d":"Once per SLOAD operation"},"call":{"v":700,"d":"Once per CALL operation & message call transaction"}},"vm":{},"pow":{},"casper":{},"sharding":{}};},3285:function(module,__unusedexports,__webpack_require__){"use strict";var curve=__webpack_require__(7573);var bn=__webpack_require__(2420);var inherits=__webpack_require__(2915);var Base=curve.base;function MontCurve(conf){Base.call(this,'mont',conf);this.a=new bn(conf.a,16).toRed(this.red);this.b=new bn(conf.b,16).toRed(this.red);this.i4=new bn(4).toRed(this.red).redInvm();this.two=new bn(2).toRed(this.red);this.a24=this.i4.redMul(this.a.redAdd(this.two));}inherits(MontCurve,Base);module.exports=MontCurve;MontCurve.prototype.validate=function validate(point){var x=point.normalize().x;var x2=x.redSqr();var rhs=x2.redMul(x).redAdd(x2.redMul(this.a)).redAdd(x);var y=rhs.redSqrt();return y.redSqr().cmp(rhs)===0;};function Point(curve,x,z){Base.BasePoint.call(this,curve,'projective');if(x===null&&z===null){this.x=this.curve.one;this.z=this.curve.zero;}else{this.x=new bn(x,16);this.z=new bn(z,16);if(!this.x.red)this.x=this.x.toRed(this.curve.red);if(!this.z.red)this.z=this.z.toRed(this.curve.red);}}inherits(Point,Base.BasePoint);MontCurve.prototype.point=function point(x,z){return new Point(this,x,z);};MontCurve.prototype.pointFromJSON=function pointFromJSON(obj){return Point.fromJSON(this,obj);};Point.prototype.precompute=function precompute(){};Point.fromJSON=function fromJSON(curve,obj){return new Point(curve,obj[0],obj[1]||curve.one);};Point.prototype.inspect=function inspect(){if(this.isInfinity())return'<EC Point Infinity>';return'<EC Point x: '+this.x.fromRed().toString(16,2)+' z: '+this.z.fromRed().toString(16,2)+'>';};Point.prototype.isInfinity=function isInfinity(){return this.z.cmpn(0)===0;};Point.prototype.dbl=function dbl(){var a=this.x.redAdd(this.z);var aa=a.redSqr();var b=this.x.redSub(this.z);var bb=b.redSqr();var c=aa.redSub(bb);var nx=aa.redMul(bb);var nz=c.redMul(bb.redAdd(this.curve.a24.redMul(c)));return this.curve.point(nx,nz);};Point.prototype.add=function add(){throw new Error('Not supported on Montgomery curve');};Point.prototype.diffAdd=function diffAdd(p,diff){var a=this.x.redAdd(this.z);var b=this.x.redSub(this.z);var c=p.x.redAdd(p.z);var d=p.x.redSub(p.z);var da=d.redMul(a);var cb=c.redMul(b);var nx=diff.z.redMul(da.redAdd(cb).redSqr());var nz=diff.x.redMul(da.redISub(cb).redSqr());return this.curve.point(nx,nz);};Point.prototype.mul=function mul(k){var t=k.clone();var a=this;var b=this.curve.point(null,null);var c=this;for(var bits=[];t.cmpn(0)!==0;t.ishrn(1))bits.push(t.andln(1));for(var i=bits.length-1;i>=0;i--){if(bits[i]===0){a=a.diffAdd(b,c);b=b.dbl();}else{b=a.diffAdd(b,c);a=a.dbl();}}return b;};Point.prototype.mulAdd=function mulAdd(){throw new Error('Not supported on Montgomery curve');};Point.prototype.normalize=function normalize(){this.x=this.x.redMul(this.z.redInvm());this.z=this.curve.one;return this;};Point.prototype.getX=function getX(){this.normalize();return this.x.fromRed();};},3299:function(module,__unusedexports,__webpack_require__){"use strict";var BN=__webpack_require__(5584);var elliptic=__webpack_require__(3459);var utils=elliptic.utils;var assert=utils.assert;var cachedProperty=utils.cachedProperty;var parseBytes=utils.parseBytes;function Signature(eddsa,sig){this.eddsa=eddsa;if(typeof sig!=='object')sig=parseBytes(sig);if(Array.isArray(sig)){sig={R:sig.slice(0,eddsa.encodingLength),S:sig.slice(eddsa.encodingLength)};}assert(sig.R&&sig.S,'Signature without R or S');if(eddsa.isPoint(sig.R))this._R=sig.R;if(sig.S instanceof BN)this._S=sig.S;this._Rencoded=Array.isArray(sig.R)?sig.R:sig.Rencoded;this._Sencoded=Array.isArray(sig.S)?sig.S:sig.Sencoded;}cachedProperty(Signature,'S',function S(){return this.eddsa.decodeInt(this.Sencoded());});cachedProperty(Signature,'R',function R(){return this.eddsa.decodePoint(this.Rencoded());});cachedProperty(Signature,'Rencoded',function Rencoded(){return this.eddsa.encodePoint(this.R());});cachedProperty(Signature,'Sencoded',function Sencoded(){return this.eddsa.encodeInt(this.S());});Signature.prototype.toBytes=function toBytes(){return this.Rencoded().concat(this.Sencoded());};Signature.prototype.toHex=function toHex(){return utils.encode(this.toBytes(),'hex').toUpperCase();};module.exports=Signature;},3306:function(module,__unusedexports,__webpack_require__){"use strict";var inherits=__webpack_require__(2915);var $=__webpack_require__(5107);var BufferUtil=__webpack_require__(9657);var Hash=__webpack_require__(2442);var Input=__webpack_require__(6047);var Output=__webpack_require__(1143);var Sighash=__webpack_require__(9845);var Script=__webpack_require__(5355);var Signature=__webpack_require__(406);var TransactionSignature=__webpack_require__(6877);function PublicKeyHashInput(){Input.apply(this,arguments);}inherits(PublicKeyHashInput,Input);PublicKeyHashInput.prototype.getSignatures=function(transaction,privateKey,index,sigtype,hashData){$.checkState(this.output instanceof Output);hashData=hashData||Hash.sha256ripemd160(privateKey.publicKey.toBuffer());sigtype=sigtype||Signature.SIGHASH_ALL;if(BufferUtil.equals(hashData,this.output.script.getPublicKeyHash())){return[new TransactionSignature({publicKey:privateKey.publicKey,prevTxId:this.prevTxId,outputIndex:this.outputIndex,inputIndex:index,signature:Sighash.sign(transaction,privateKey,sigtype,index,this.output.script),sigtype:sigtype})];}return[];};PublicKeyHashInput.prototype.addSignature=function(transaction,signature){$.checkState(this.isValidSignature(transaction,signature),'Signature is invalid');this.setScript(Script.buildPublicKeyHashIn(signature.publicKey,signature.signature.toDER(),signature.sigtype));return this;};PublicKeyHashInput.prototype.clearSignatures=function(){this.setScript(Script.empty());return this;};PublicKeyHashInput.prototype.isFullySigned=function(){return this.script.isPublicKeyHashIn();};PublicKeyHashInput.SCRIPT_MAX_SIZE=73+34;PublicKeyHashInput.prototype._estimateSize=function(){return PublicKeyHashInput.SCRIPT_MAX_SIZE;};module.exports=PublicKeyHashInput;},3307:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _mapLimit=__webpack_require__(8770);var _mapLimit2=_interopRequireDefault(_mapLimit);var _doLimit=__webpack_require__(9817);var _doLimit2=_interopRequireDefault(_doLimit);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}exports.default=(0,_doLimit2.default)(_mapLimit2.default,1);module.exports=exports['default'];},3315:function(module){module.exports=function(random,alphabet,size){var mask=(2<<Math.log(alphabet.length-1)/Math.LN2)-1;var step=Math.ceil(1.6*mask*size/alphabet.length);var id='';while(true){var bytes=random(step);for(var i=0;i<step;i++){var byte=bytes[i]&mask;if(alphabet[byte]){id+=alphabet[byte];if(id.length===size)return id;}}}};},3325:function(module,__unusedexports,__webpack_require__){"use strict";if(typeof process==='undefined'||process.type==='renderer'||process.browser===true||process.__nwjs){module.exports=__webpack_require__(204);}else{module.exports=__webpack_require__(2551);}},3342:function(module,__unusedexports,__webpack_require__){const util=__webpack_require__(649),AbstractLevelDOWN=__webpack_require__(5238).AbstractLevelDOWN,binding=require(__dirname+'//build/Release/leveldown.node').leveldown,ChainedBatch=__webpack_require__(2711),Iterator=__webpack_require__(9498);function LevelDOWN(location){if(!(this instanceof LevelDOWN))return new LevelDOWN(location);AbstractLevelDOWN.call(this,location);this.binding=binding(location);}util.inherits(LevelDOWN,AbstractLevelDOWN);LevelDOWN.prototype._open=function(options,callback){this.binding.open(options,callback);};LevelDOWN.prototype._close=function(callback){this.binding.close(callback);};LevelDOWN.prototype._put=function(key,value,options,callback){this.binding.put(key,value,options,callback);};LevelDOWN.prototype._get=function(key,options,callback){this.binding.get(key,options,callback);};LevelDOWN.prototype._del=function(key,options,callback){this.binding.del(key,options,callback);};LevelDOWN.prototype._chainedBatch=function(){return new ChainedBatch(this);};LevelDOWN.prototype._batch=function(operations,options,callback){return this.binding.batch(operations,options,callback);};LevelDOWN.prototype.approximateSize=function(start,end,callback){if(start==null||end==null||typeof start==='function'||typeof end==='function'){throw new Error('approximateSize() requires valid `start`, `end` and `callback` arguments');}if(typeof callback!=='function'){throw new Error('approximateSize() requires a callback argument');}start=this._serializeKey(start);end=this._serializeKey(end);this.binding.approximateSize(start,end,callback);};LevelDOWN.prototype.compactRange=function(start,end,callback){this.binding.compactRange(start,end,callback);};LevelDOWN.prototype.getProperty=function(property){if(typeof property!='string')throw new Error('getProperty() requires a valid `property` argument');return this.binding.getProperty(property);};LevelDOWN.prototype._iterator=function(options){return new Iterator(this,options);};LevelDOWN.destroy=function(location,callback){if(arguments.length<2)throw new Error('destroy() requires `location` and `callback` arguments');if(typeof location!='string')throw new Error('destroy() requires a location string argument');if(typeof callback!='function')throw new Error('destroy() requires a callback function argument');binding.destroy(location,callback);};LevelDOWN.repair=function(location,callback){if(arguments.length<2)throw new Error('repair() requires `location` and `callback` arguments');if(typeof location!='string')throw new Error('repair() requires a location string argument');if(typeof callback!='function')throw new Error('repair() requires a callback function argument');binding.repair(location,callback);};module.exports=LevelDOWN.default=LevelDOWN;},3360:function(module,__unusedexports,__webpack_require__){"use strict";const waterfall=__webpack_require__(4265);const dagPB=__webpack_require__(7421);const UnixFS=__webpack_require__(7959);const persist=__webpack_require__(7730);const DAGLink=dagPB.DAGLink;const DAGNode=dagPB.DAGNode;module.exports=function reduce(file,ipld,options){return function(leaves,callback){if(leaves.length===1&&leaves[0].single&&options.reduceSingleLeafToSelf){const leaf=leaves[0];return callback(null,{size:leaf.size,leafSize:leaf.leafSize,multihash:leaf.multihash,path:file.path,name:leaf.name});}const f=new UnixFS('file');const links=leaves.map(leaf=>{f.addBlockSize(leaf.leafSize);return new DAGLink(leaf.name,leaf.size,leaf.multihash);});waterfall([cb=>DAGNode.create(f.marshal(),links,cb),(node,cb)=>persist(node,ipld,options,cb)],(error,result)=>{if(error){return callback(error);}callback(null,{size:result.node.size,leafSize:f.fileSize(),multihash:result.cid.buffer,path:file.path,name:''});});};};},3365:function(module,__unusedexports,__webpack_require__){"use strict";const T=__webpack_require__(6102).TYPES;module.exports=dht=>{const handlers={[T.GET_VALUE]:__webpack_require__(1619)(dht),[T.PUT_VALUE]:__webpack_require__(2151)(dht),[T.FIND_NODE]:__webpack_require__(3384)(dht),[T.ADD_PROVIDER]:__webpack_require__(3638)(dht),[T.GET_PROVIDERS]:__webpack_require__(2848)(dht),[T.PING]:__webpack_require__(8668)(dht)};return function getMessageHandler(type){return handlers[type];};};},3368:function(module){"use strict";const codes={};function createErrorType(code,message,Base){if(!Base){Base=Error;}function getMessage(arg1,arg2,arg3){if(typeof message==='string'){return message;}else{return message(arg1,arg2,arg3);}}class NodeError extends Base{constructor(arg1,arg2,arg3){super(getMessage(arg1,arg2,arg3));}}NodeError.prototype.name=Base.name;NodeError.prototype.code=code;codes[code]=NodeError;}function oneOf(expected,thing){if(Array.isArray(expected)){const len=expected.length;expected=expected.map(i=>String(i));if(len>2){return`one of ${thing} ${expected.slice(0,len-1).join(', ')}, or `+expected[len-1];}else if(len===2){return`one of ${thing} ${expected[0]} or ${expected[1]}`;}else{return`of ${thing} ${expected[0]}`;}}else{return`of ${thing} ${String(expected)}`;}}function startsWith(str,search,pos){return str.substr(!pos||pos<0?0:+pos,search.length)===search;}function endsWith(str,search,this_len){if(this_len===undefined||this_len>str.length){this_len=str.length;}return str.substring(this_len-search.length,this_len)===search;}function includes(str,search,start){if(typeof start!=='number'){start=0;}if(start+search.length>str.length){return false;}else{return str.indexOf(search,start)!==-1;}}createErrorType('ERR_INVALID_OPT_VALUE',function(name,value){return'The value "'+value+'" is invalid for option "'+name+'"';},TypeError);createErrorType('ERR_INVALID_ARG_TYPE',function(name,expected,actual){let determiner;if(typeof expected==='string'&&startsWith(expected,'not ')){determiner='must not be';expected=expected.replace(/^not /,'');}else{determiner='must be';}let msg;if(endsWith(name,' argument')){msg=`The ${name} ${determiner} ${oneOf(expected,'type')}`;}else{const type=includes(name,'.')?'property':'argument';msg=`The "${name}" ${type} ${determiner} ${oneOf(expected,'type')}`;}msg+=`. Received type ${typeof actual}`;return msg;},TypeError);createErrorType('ERR_STREAM_PUSH_AFTER_EOF','stream.push() after EOF');createErrorType('ERR_METHOD_NOT_IMPLEMENTED',function(name){return'The '+name+' method is not implemented';});createErrorType('ERR_STREAM_PREMATURE_CLOSE','Premature close');createErrorType('ERR_STREAM_DESTROYED',function(name){return'Cannot call '+name+' after a stream was destroyed';});createErrorType('ERR_MULTIPLE_CALLBACK','Callback called multiple times');createErrorType('ERR_STREAM_CANNOT_PIPE','Cannot pipe, not readable');createErrorType('ERR_STREAM_WRITE_AFTER_END','write after end');createErrorType('ERR_STREAM_NULL_VALUES','May not write null values to stream',TypeError);createErrorType('ERR_UNKNOWN_ENCODING',function(arg){return'Unknown encoding: '+arg;},TypeError);createErrorType('ERR_STREAM_UNSHIFT_AFTER_END_EVENT','stream.unshift() after end event');module.exports.codes=codes;},3380:function(module){function arrayPush(array,values){var index=-1,length=values.length,offset=array.length;while(++index<length){array[offset+index]=values[index];}return array;}module.exports=arrayPush;},3384:function(module,__unusedexports,__webpack_require__){"use strict";const waterfall=__webpack_require__(4265);const Message=__webpack_require__(6102);const utils=__webpack_require__(2869);module.exports=dht=>{const log=utils.logger(dht.peerInfo.id,'rpc:find-node');return function findNode(peer,msg,callback){log('start');waterfall([cb=>{if(msg.key.equals(dht.peerInfo.id.id)){return cb(null,[dht.peerInfo]);}dht._betterPeersToQuery(msg,peer,cb);},(closer,cb)=>{const response=new Message(msg.type,Buffer.alloc(0),msg.clusterLevel);if(closer.length>0){response.closerPeers=closer;}else{log('handle FindNode %s: could not find anything',peer.id.toB58String());}cb(null,response);}],callback);};};},3390:function(module,__unusedexports,__webpack_require__){var baseGetTag=__webpack_require__(2339),isLength=__webpack_require__(4380),isObjectLike=__webpack_require__(2321);var argsTag='[object Arguments]',arrayTag='[object Array]',boolTag='[object Boolean]',dateTag='[object Date]',errorTag='[object Error]',funcTag='[object Function]',mapTag='[object Map]',numberTag='[object Number]',objectTag='[object Object]',regexpTag='[object RegExp]',setTag='[object Set]',stringTag='[object String]',weakMapTag='[object WeakMap]';var arrayBufferTag='[object ArrayBuffer]',dataViewTag='[object DataView]',float32Tag='[object Float32Array]',float64Tag='[object Float64Array]',int8Tag='[object Int8Array]',int16Tag='[object Int16Array]',int32Tag='[object Int32Array]',uint8Tag='[object Uint8Array]',uint8ClampedTag='[object Uint8ClampedArray]',uint16Tag='[object Uint16Array]',uint32Tag='[object Uint32Array]';var typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=true;typedArrayTags[argsTag]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=false;function baseIsTypedArray(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[baseGetTag(value)];}module.exports=baseIsTypedArray;},3403:function(module,__unusedexports,__webpack_require__){var wrappy=__webpack_require__(7925);var reqs=Object.create(null);var once=__webpack_require__(7957);module.exports=wrappy(inflight);function inflight(key,cb){if(reqs[key]){reqs[key].push(cb);return null;}else{reqs[key]=[cb];return makeres(key);}}function makeres(key){return once(function RES(){var cbs=reqs[key];var len=cbs.length;var args=slice(arguments);try{for(var i=0;i<len;i++){cbs[i].apply(null,args);}}finally{if(cbs.length>len){cbs.splice(0,len);process.nextTick(function(){RES.apply(null,args);});}else{delete reqs[key];}}});}function slice(args){var length=args.length;var array=[];for(var i=0;i<length;i++)array[i]=args[i];return array;}},3404:function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=slice;function slice(arrayLike,start){start=start|0;var newLen=Math.max(arrayLike.length-start,0);var newArr=Array(newLen);for(var idx=0;idx<newLen;idx++){newArr[idx]=arrayLike[start+idx];}return newArr;}module.exports=exports["default"];},3412:function(module,exports,__webpack_require__){"use strict";const ipns=__webpack_require__(3843);const crypto=__webpack_require__(318);const PeerId=__webpack_require__(1832);const errcode=__webpack_require__(4999);const debug=__webpack_require__(746);const each=__webpack_require__(4486);const waterfall=__webpack_require__(4265);const log=debug('jsipfs:ipns:republisher');log.error=debug('jsipfs:ipns:republisher:error');const minute=60*1000;const hour=60*minute;const defaultBroadcastInterval=4*hour;const defaultRecordLifetime=24*hour;class IpnsRepublisher{constructor(publisher,datastore,peerInfo,keychain,options){this._publisher=publisher;this._datastore=datastore;this._peerInfo=peerInfo;this._keychain=keychain;this._options=options;this._republishHandle=null;}start(){if(this._republishHandle){const errMsg='already running';log.error(errMsg);throw errcode(new Error(errMsg),'ERR_REPUBLISH_ALREADY_RUNNING');}const republishHandle={_onCancel:null,_timeoutId:null,runPeriodically:(fn,period)=>{republishHandle._timeoutId=setTimeout(()=>{republishHandle._timeoutId=null;fn(nextPeriod=>{if(republishHandle._onCancel){return republishHandle._onCancel();}republishHandle.runPeriodically(fn,nextPeriod||period);});},period);},cancel:cb=>{if(republishHandle._timeoutId){clearTimeout(republishHandle._timeoutId);return cb();}republishHandle._onCancel=cb;}};const{privKey}=this._peerInfo.id;const{pass}=this._options;republishHandle.runPeriodically(done=>{this._republishEntries(privKey,pass,()=>done(defaultBroadcastInterval));},minute);this._republishHandle=republishHandle;}stop(callback){const republishHandle=this._republishHandle;if(!republishHandle){const errMsg='not running';log.error(errMsg);return callback(errcode(new Error(errMsg),'ERR_REPUBLISH_NOT_RUNNING'));}this._republishHandle=null;republishHandle.cancel(callback);}_republishEntries(privateKey,pass,callback){this._republishEntry(privateKey,err=>{if(err){const errMsg='cannot republish entry for the node\'s private key';log.error(errMsg);return;}if(pass){this._keychain.listKeys((err,list)=>{if(err){log.error(err);return;}each(list,(key,cb)=>{waterfall([cb=>this._keychain.exportKey(key.name,pass,cb),(pem,cb)=>crypto.keys.import(pem,pass,cb)],(err,privKey)=>{if(err){log.error(err);return;}this._republishEntry(privKey,cb);});},err=>{if(err){log.error(err);}callback(null);});});}else{callback(null);}});}_republishEntry(privateKey,callback){if(!privateKey||!privateKey.bytes){const errMsg=`one or more of the provided parameters are not defined`;log.error(errMsg);return callback(errcode(new Error(errMsg),'ERR_UNDEFINED_PARAMETER'));}waterfall([cb=>PeerId.createFromPrivKey(privateKey.bytes,cb),(peerId,cb)=>this._getPreviousValue(peerId,cb)],(err,value)=>{if(err){return callback(err.code==='ERR_NO_ENTRY_FOUND'?null:err);}this._publisher.publishWithEOL(privateKey,value,defaultRecordLifetime,callback);});}_getPreviousValue(peerId,callback){if(!PeerId.isPeerId(peerId)){const errMsg=`peerId received is not valid`;log.error(errMsg);return callback(errcode(new Error(errMsg),'ERR_INVALID_PEER_ID'));}this._datastore.get(ipns.getLocalKey(peerId.id),(err,dsVal)=>{if(err&&err.notFound){const errMsg=`no previous entry for record with id: ${peerId.id}`;log.error(errMsg);return callback(errcode(new Error(errMsg),'ERR_NO_ENTRY_FOUND'));}else if(err){return callback(err);}if(!Buffer.isBuffer(dsVal)){const errMsg=`found ipns record that we couldn't process`;log.error(errMsg);return callback(errcode(new Error(errMsg),'ERR_INVALID_IPNS_RECORD'));}let record;try{record=ipns.unmarshal(dsVal);}catch(err){const errMsg=`found ipns record that we couldn't convert to a value`;log.error(errMsg);return callback(errcode(new Error(errMsg),'ERR_INVALID_IPNS_RECORD'));}callback(null,record.value);});}}exports=module.exports=IpnsRepublisher;},3415:function(module,__unusedexports,__webpack_require__){const Buffer=__webpack_require__(7572).Buffer;const baddress=__webpack_require__(5236);const bcrypto=__webpack_require__(5475);const bscript=__webpack_require__(5099);const networks=__webpack_require__(1215);const ops=__webpack_require__(9710);const payments=__webpack_require__(8736);const typeforce=__webpack_require__(2809);const types=__webpack_require__(8781);const classify=__webpack_require__(6071);const SCRIPT_TYPES=classify.types;const ECPair=__webpack_require__(7769);const Transaction=__webpack_require__(9583);function expandInput(scriptSig,witnessStack,type,scriptPubKey){if(scriptSig.length===0&&witnessStack.length===0)return{};if(!type){let ssType=classify.input(scriptSig,true);let wsType=classify.witness(witnessStack,true);if(ssType===SCRIPT_TYPES.NONSTANDARD)ssType=undefined;if(wsType===SCRIPT_TYPES.NONSTANDARD)wsType=undefined;type=ssType||wsType;}switch(type){case SCRIPT_TYPES.P2WPKH:{const{output,pubkey,signature}=payments.p2wpkh({witness:witnessStack});return{prevOutScript:output,prevOutType:SCRIPT_TYPES.P2WPKH,pubkeys:[pubkey],signatures:[signature]};}case SCRIPT_TYPES.P2PKH:{const{output,pubkey,signature}=payments.p2pkh({input:scriptSig});return{prevOutScript:output,prevOutType:SCRIPT_TYPES.P2PKH,pubkeys:[pubkey],signatures:[signature]};}case SCRIPT_TYPES.P2PK:{const{signature}=payments.p2pk({input:scriptSig});return{prevOutType:SCRIPT_TYPES.P2PK,pubkeys:[undefined],signatures:[signature]};}case SCRIPT_TYPES.P2MS:{const{m,pubkeys,signatures}=payments.p2ms({input:scriptSig,output:scriptPubKey},{allowIncomplete:true});return{prevOutType:SCRIPT_TYPES.P2MS,pubkeys:pubkeys,signatures:signatures,maxSignatures:m};}}if(type===SCRIPT_TYPES.P2SH){const{output,redeem}=payments.p2sh({input:scriptSig,witness:witnessStack});const outputType=classify.output(redeem.output);const expanded=expandInput(redeem.input,redeem.witness,outputType,redeem.output);if(!expanded.prevOutType)return{};return{prevOutScript:output,prevOutType:SCRIPT_TYPES.P2SH,redeemScript:redeem.output,redeemScriptType:expanded.prevOutType,witnessScript:expanded.witnessScript,witnessScriptType:expanded.witnessScriptType,pubkeys:expanded.pubkeys,signatures:expanded.signatures};}if(type===SCRIPT_TYPES.P2WSH){const{output,redeem}=payments.p2wsh({input:scriptSig,witness:witnessStack});const outputType=classify.output(redeem.output);let expanded;if(outputType===SCRIPT_TYPES.P2WPKH){expanded=expandInput(redeem.input,redeem.witness,outputType);}else{expanded=expandInput(bscript.compile(redeem.witness),[],outputType,redeem.output);}if(!expanded.prevOutType)return{};return{prevOutScript:output,prevOutType:SCRIPT_TYPES.P2WSH,witnessScript:redeem.output,witnessScriptType:expanded.prevOutType,pubkeys:expanded.pubkeys,signatures:expanded.signatures};}return{prevOutType:SCRIPT_TYPES.NONSTANDARD,prevOutScript:scriptSig};}function fixMultisigOrder(input,transaction,vin){if(input.redeemScriptType!==SCRIPT_TYPES.P2MS||!input.redeemScript)return;if(input.pubkeys.length===input.signatures.length)return;const unmatched=input.signatures.concat();input.signatures=input.pubkeys.map(function(pubKey){const keyPair=ECPair.fromPublicKey(pubKey);let match;unmatched.some(function(signature,i){if(!signature)return false;const parsed=bscript.signature.decode(signature);const hash=transaction.hashForSignature(vin,input.redeemScript,parsed.hashType);if(!keyPair.verify(hash,parsed.signature))return false;unmatched[i]=undefined;match=signature;return true;});return match;});}function expandOutput(script,ourPubKey){typeforce(types.Buffer,script);const type=classify.output(script);switch(type){case SCRIPT_TYPES.P2PKH:{if(!ourPubKey)return{type};const pkh1=payments.p2pkh({output:script}).hash;const pkh2=bcrypto.hash160(ourPubKey);if(!pkh1.equals(pkh2))return{type};return{type,pubkeys:[ourPubKey],signatures:[undefined]};}case SCRIPT_TYPES.P2WPKH:{if(!ourPubKey)return{type};const wpkh1=payments.p2wpkh({output:script}).hash;const wpkh2=bcrypto.hash160(ourPubKey);if(!wpkh1.equals(wpkh2))return{type};return{type,pubkeys:[ourPubKey],signatures:[undefined]};}case SCRIPT_TYPES.P2PK:{const p2pk=payments.p2pk({output:script});return{type,pubkeys:[p2pk.pubkey],signatures:[undefined]};}case SCRIPT_TYPES.P2MS:{const p2ms=payments.p2ms({output:script});return{type,pubkeys:p2ms.pubkeys,signatures:p2ms.pubkeys.map(()=>undefined),maxSignatures:p2ms.m};}}return{type};}function prepareInput(input,ourPubKey,redeemScript,witnessScript){if(redeemScript&&witnessScript){const p2wsh=payments.p2wsh({redeem:{output:witnessScript}});const p2wshAlt=payments.p2wsh({output:redeemScript});const p2sh=payments.p2sh({redeem:{output:redeemScript}});const p2shAlt=payments.p2sh({redeem:p2wsh});if(!p2wsh.hash.equals(p2wshAlt.hash))throw new Error('Witness script inconsistent with prevOutScript');if(!p2sh.hash.equals(p2shAlt.hash))throw new Error('Redeem script inconsistent with prevOutScript');const expanded=expandOutput(p2wsh.redeem.output,ourPubKey);if(!expanded.pubkeys)throw new Error(expanded.type+' not supported as witnessScript ('+bscript.toASM(witnessScript)+')');if(input.signatures&&input.signatures.some(x=>x)){expanded.signatures=input.signatures;}let signScript=witnessScript;if(expanded.type===SCRIPT_TYPES.P2WPKH)throw new Error('P2SH(P2WSH(P2WPKH)) is a consensus failure');return{redeemScript,redeemScriptType:SCRIPT_TYPES.P2WSH,witnessScript,witnessScriptType:expanded.type,prevOutType:SCRIPT_TYPES.P2SH,prevOutScript:p2sh.output,hasWitness:true,signScript,signType:expanded.type,pubkeys:expanded.pubkeys,signatures:expanded.signatures,maxSignatures:expanded.maxSignatures};}if(redeemScript){const p2sh=payments.p2sh({redeem:{output:redeemScript}});if(input.prevOutScript){let p2shAlt;try{p2shAlt=payments.p2sh({output:input.prevOutScript});}catch(e){throw new Error('PrevOutScript must be P2SH');}if(!p2sh.hash.equals(p2shAlt.hash))throw new Error('Redeem script inconsistent with prevOutScript');}const expanded=expandOutput(p2sh.redeem.output,ourPubKey);if(!expanded.pubkeys)throw new Error(expanded.type+' not supported as redeemScript ('+bscript.toASM(redeemScript)+')');if(input.signatures&&input.signatures.some(x=>x)){expanded.signatures=input.signatures;}let signScript=redeemScript;if(expanded.type===SCRIPT_TYPES.P2WPKH){signScript=payments.p2pkh({pubkey:expanded.pubkeys[0]}).output;}return{redeemScript,redeemScriptType:expanded.type,prevOutType:SCRIPT_TYPES.P2SH,prevOutScript:p2sh.output,hasWitness:expanded.type===SCRIPT_TYPES.P2WPKH,signScript,signType:expanded.type,pubkeys:expanded.pubkeys,signatures:expanded.signatures,maxSignatures:expanded.maxSignatures};}if(witnessScript){const p2wsh=payments.p2wsh({redeem:{output:witnessScript}});if(input.prevOutScript){const p2wshAlt=payments.p2wsh({output:input.prevOutScript});if(!p2wsh.hash.equals(p2wshAlt.hash))throw new Error('Witness script inconsistent with prevOutScript');}const expanded=expandOutput(p2wsh.redeem.output,ourPubKey);if(!expanded.pubkeys)throw new Error(expanded.type+' not supported as witnessScript ('+bscript.toASM(witnessScript)+')');if(input.signatures&&input.signatures.some(x=>x)){expanded.signatures=input.signatures;}let signScript=witnessScript;if(expanded.type===SCRIPT_TYPES.P2WPKH)throw new Error('P2WSH(P2WPKH) is a consensus failure');return{witnessScript,witnessScriptType:expanded.type,prevOutType:SCRIPT_TYPES.P2WSH,prevOutScript:p2wsh.output,hasWitness:true,signScript,signType:expanded.type,pubkeys:expanded.pubkeys,signatures:expanded.signatures,maxSignatures:expanded.maxSignatures};}if(input.prevOutType&&input.prevOutScript){if(input.prevOutType===SCRIPT_TYPES.P2SH)throw new Error('PrevOutScript is '+input.prevOutType+', requires redeemScript');if(input.prevOutType===SCRIPT_TYPES.P2WSH)throw new Error('PrevOutScript is '+input.prevOutType+', requires witnessScript');if(!input.prevOutScript)throw new Error('PrevOutScript is missing');const expanded=expandOutput(input.prevOutScript,ourPubKey);if(!expanded.pubkeys)throw new Error(expanded.type+' not supported ('+bscript.toASM(input.prevOutScript)+')');if(input.signatures&&input.signatures.some(x=>x)){expanded.signatures=input.signatures;}let signScript=input.prevOutScript;if(expanded.type===SCRIPT_TYPES.P2WPKH){signScript=payments.p2pkh({pubkey:expanded.pubkeys[0]}).output;}return{prevOutType:expanded.type,prevOutScript:input.prevOutScript,hasWitness:expanded.type===SCRIPT_TYPES.P2WPKH,signScript,signType:expanded.type,pubkeys:expanded.pubkeys,signatures:expanded.signatures,maxSignatures:expanded.maxSignatures};}const prevOutScript=payments.p2pkh({pubkey:ourPubKey}).output;return{prevOutType:SCRIPT_TYPES.P2PKH,prevOutScript:prevOutScript,hasWitness:false,signScript:prevOutScript,signType:SCRIPT_TYPES.P2PKH,pubkeys:[ourPubKey],signatures:[undefined]};}function build(type,input,allowIncomplete){const pubkeys=input.pubkeys||[];let signatures=input.signatures||[];switch(type){case SCRIPT_TYPES.P2PKH:{if(pubkeys.length===0)break;if(signatures.length===0)break;return payments.p2pkh({pubkey:pubkeys[0],signature:signatures[0]});}case SCRIPT_TYPES.P2WPKH:{if(pubkeys.length===0)break;if(signatures.length===0)break;return payments.p2wpkh({pubkey:pubkeys[0],signature:signatures[0]});}case SCRIPT_TYPES.P2PK:{if(pubkeys.length===0)break;if(signatures.length===0)break;return payments.p2pk({signature:signatures[0]});}case SCRIPT_TYPES.P2MS:{const m=input.maxSignatures;if(allowIncomplete){signatures=signatures.map(x=>x||ops.OP_0);}else{signatures=signatures.filter(x=>x);}const validate=!allowIncomplete||m===signatures.length;return payments.p2ms({m,pubkeys,signatures},{allowIncomplete,validate});}case SCRIPT_TYPES.P2SH:{const redeem=build(input.redeemScriptType,input,allowIncomplete);if(!redeem)return;return payments.p2sh({redeem:{output:redeem.output||input.redeemScript,input:redeem.input,witness:redeem.witness}});}case SCRIPT_TYPES.P2WSH:{const redeem=build(input.witnessScriptType,input,allowIncomplete);if(!redeem)return;return payments.p2wsh({redeem:{output:input.witnessScript,input:redeem.input,witness:redeem.witness}});}}}function TransactionBuilder(network,maximumFeeRate){this.__prevTxSet={};this.network=network||networks.bitcoin;this.maximumFeeRate=maximumFeeRate||2500;this.__inputs=[];this.__tx=new Transaction();this.__tx.version=2;}TransactionBuilder.prototype.setLockTime=function(locktime){typeforce(types.UInt32,locktime);if(this.__inputs.some(function(input){if(!input.signatures)return false;return input.signatures.some(function(s){return s;});})){throw new Error('No, this would invalidate signatures');}this.__tx.locktime=locktime;};TransactionBuilder.prototype.setVersion=function(version){typeforce(types.UInt32,version);this.__tx.version=version;};TransactionBuilder.fromTransaction=function(transaction,network){const txb=new TransactionBuilder(network);txb.setVersion(transaction.version);txb.setLockTime(transaction.locktime);transaction.outs.forEach(function(txOut){txb.addOutput(txOut.script,txOut.value);});transaction.ins.forEach(function(txIn){txb.__addInputUnsafe(txIn.hash,txIn.index,{sequence:txIn.sequence,script:txIn.script,witness:txIn.witness});});txb.__inputs.forEach(function(input,i){fixMultisigOrder(input,transaction,i);});return txb;};TransactionBuilder.prototype.addInput=function(txHash,vout,sequence,prevOutScript){if(!this.__canModifyInputs()){throw new Error('No, this would invalidate signatures');}let value;if(typeof txHash==='string'){txHash=Buffer.from(txHash,'hex').reverse();}else if(txHash instanceof Transaction){const txOut=txHash.outs[vout];prevOutScript=txOut.script;value=txOut.value;txHash=txHash.getHash();}return this.__addInputUnsafe(txHash,vout,{sequence:sequence,prevOutScript:prevOutScript,value:value});};TransactionBuilder.prototype.__addInputUnsafe=function(txHash,vout,options){if(Transaction.isCoinbaseHash(txHash)){throw new Error('coinbase inputs not supported');}const prevTxOut=txHash.toString('hex')+':'+vout;if(this.__prevTxSet[prevTxOut]!==undefined)throw new Error('Duplicate TxOut: '+prevTxOut);let input={};if(options.script!==undefined){input=expandInput(options.script,options.witness||[]);}if(options.value!==undefined){input.value=options.value;}if(!input.prevOutScript&&options.prevOutScript){let prevOutType;if(!input.pubkeys&&!input.signatures){const expanded=expandOutput(options.prevOutScript);if(expanded.pubkeys){input.pubkeys=expanded.pubkeys;input.signatures=expanded.signatures;}prevOutType=expanded.type;}input.prevOutScript=options.prevOutScript;input.prevOutType=prevOutType||classify.output(options.prevOutScript);}const vin=this.__tx.addInput(txHash,vout,options.sequence,options.scriptSig);this.__inputs[vin]=input;this.__prevTxSet[prevTxOut]=true;return vin;};TransactionBuilder.prototype.addOutput=function(scriptPubKey,value){if(!this.__canModifyOutputs()){throw new Error('No, this would invalidate signatures');}if(typeof scriptPubKey==='string'){scriptPubKey=baddress.toOutputScript(scriptPubKey,this.network);}return this.__tx.addOutput(scriptPubKey,value);};TransactionBuilder.prototype.build=function(){return this.__build(false);};TransactionBuilder.prototype.buildIncomplete=function(){return this.__build(true);};TransactionBuilder.prototype.__build=function(allowIncomplete){if(!allowIncomplete){if(!this.__tx.ins.length)throw new Error('Transaction has no inputs');if(!this.__tx.outs.length)throw new Error('Transaction has no outputs');}const tx=this.__tx.clone();this.__inputs.forEach(function(input,i){if(!input.prevOutType&&!allowIncomplete)throw new Error('Transaction is not complete');const result=build(input.prevOutType,input,allowIncomplete);if(!result){if(!allowIncomplete&&input.prevOutType===SCRIPT_TYPES.NONSTANDARD)throw new Error('Unknown input type');if(!allowIncomplete)throw new Error('Not enough information');return;}tx.setInputScript(i,result.input);tx.setWitness(i,result.witness);});if(!allowIncomplete){if(this.__overMaximumFees(tx.virtualSize())){throw new Error('Transaction has absurd fees');}}return tx;};function canSign(input){return input.signScript!==undefined&&input.signType!==undefined&&input.pubkeys!==undefined&&input.signatures!==undefined&&input.signatures.length===input.pubkeys.length&&input.pubkeys.length>0&&(input.hasWitness===false||input.value!==undefined);}TransactionBuilder.prototype.sign=function(vin,keyPair,redeemScript,hashType,witnessValue,witnessScript){if(keyPair.network&&keyPair.network!==this.network)throw new TypeError('Inconsistent network');if(!this.__inputs[vin])throw new Error('No input at index: '+vin);hashType=hashType||Transaction.SIGHASH_ALL;if(this.__needsOutputs(hashType))throw new Error('Transaction needs outputs');const input=this.__inputs[vin];if(input.redeemScript!==undefined&&redeemScript&&!input.redeemScript.equals(redeemScript)){throw new Error('Inconsistent redeemScript');}const ourPubKey=keyPair.publicKey||keyPair.getPublicKey();if(!canSign(input)){if(witnessValue!==undefined){if(input.value!==undefined&&input.value!==witnessValue)throw new Error('Input didn\'t match witnessValue');typeforce(types.Satoshi,witnessValue);input.value=witnessValue;}if(!canSign(input)){const prepared=prepareInput(input,ourPubKey,redeemScript,witnessScript);Object.assign(input,prepared);}if(!canSign(input))throw Error(input.prevOutType+' not supported');}let signatureHash;if(input.hasWitness){signatureHash=this.__tx.hashForWitnessV0(vin,input.signScript,input.value,hashType);}else{signatureHash=this.__tx.hashForSignature(vin,input.signScript,hashType);}const signed=input.pubkeys.some(function(pubKey,i){if(!ourPubKey.equals(pubKey))return false;if(input.signatures[i])throw new Error('Signature already exists');if(ourPubKey.length!==33&&input.hasWitness){throw new Error('BIP143 rejects uncompressed public keys in P2WPKH or P2WSH');}const signature=keyPair.sign(signatureHash);input.signatures[i]=bscript.signature.encode(signature,hashType);return true;});if(!signed)throw new Error('Key pair cannot sign for this input');};function signatureHashType(buffer){return buffer.readUInt8(buffer.length-1);}TransactionBuilder.prototype.__canModifyInputs=function(){return this.__inputs.every(function(input){if(!input.signatures)return true;return input.signatures.every(function(signature){if(!signature)return true;const hashType=signatureHashType(signature);return hashType&Transaction.SIGHASH_ANYONECANPAY;});});};TransactionBuilder.prototype.__needsOutputs=function(signingHashType){if(signingHashType===Transaction.SIGHASH_ALL){return this.__tx.outs.length===0;}return this.__tx.outs.length===0&&this.__inputs.some(input=>{if(!input.signatures)return false;return input.signatures.some(signature=>{if(!signature)return false;const hashType=signatureHashType(signature);if(hashType&Transaction.SIGHASH_NONE)return false;return true;});});};TransactionBuilder.prototype.__canModifyOutputs=function(){const nInputs=this.__tx.ins.length;const nOutputs=this.__tx.outs.length;return this.__inputs.every(function(input){if(input.signatures===undefined)return true;return input.signatures.every(function(signature){if(!signature)return true;const hashType=signatureHashType(signature);const hashTypeMod=hashType&0x1f;if(hashTypeMod===Transaction.SIGHASH_NONE)return true;if(hashTypeMod===Transaction.SIGHASH_SINGLE){return nInputs<=nOutputs;}});});};TransactionBuilder.prototype.__overMaximumFees=function(bytes){const incoming=this.__inputs.reduce(function(a,x){return a+(x.value>>>0);},0);const outgoing=this.__tx.outs.reduce(function(a,x){return a+x.value;},0);const fee=incoming-outgoing;const feeRate=fee/bytes;return feeRate>this.maximumFeeRate;};module.exports=TransactionBuilder;},3419:function(module,__unusedexports,__webpack_require__){var assocIndexOf=__webpack_require__(4292);function listCacheHas(key){return assocIndexOf(this.__data__,key)>-1;}module.exports=listCacheHas;},3421:function(module,__unusedexports,__webpack_require__){var crypto=__webpack_require__(2984);module.exports=function nodeRNG(){return crypto.randomBytes(16);};},3426:function(module,__unusedexports,__webpack_require__){"use strict";const sort=__webpack_require__(944);const{serialize}=__webpack_require__(7954);const dagNodeUtil=__webpack_require__(974);const linkSort=dagNodeUtil.linkSort;const DAGNode=__webpack_require__(1758);const DAGLink=__webpack_require__(7545);function create(data,links,callback){if(typeof data==='function'){callback=data;data=undefined;}else if(typeof data==='string'){data=Buffer.from(data);}if(typeof links==='function'){callback=links;links=[];}if(!Buffer.isBuffer(data)){return callback(new Error('Passed \'data\' is not a buffer or a string!'));}links=links.map(link=>{return DAGLink.isDAGLink(link)?link:DAGLink.util.createDagLinkFromB58EncodedHash(link);});links=sort(links,linkSort);serialize({data,links},(err,buffer)=>{if(err){return callback(err);}callback(null,new DAGNode(data,links,buffer.length));});}module.exports=create;},3430:function(module){"use strict";var iconv_package;var Iconv;try{iconv_package='iconv';Iconv=require(iconv_package).Iconv;}catch(E){}module.exports=Iconv;},3431:function(module,__unusedexports,__webpack_require__){"use strict";var pna=__webpack_require__(88);module.exports=Readable;var isArray=__webpack_require__(4797);var Duplex;Readable.ReadableState=ReadableState;var EE=__webpack_require__(4859).EventEmitter;var EElistenerCount=function(emitter,type){return emitter.listeners(type).length;};var Stream=__webpack_require__(3645);var Buffer=__webpack_require__(7572).Buffer;var OurUint8Array=global.Uint8Array||function(){};function _uint8ArrayToBuffer(chunk){return Buffer.from(chunk);}function _isUint8Array(obj){return Buffer.isBuffer(obj)||obj instanceof OurUint8Array;}var util=__webpack_require__(5548);util.inherits=__webpack_require__(92);var debugUtil=__webpack_require__(649);var debug=void 0;if(debugUtil&&debugUtil.debuglog){debug=debugUtil.debuglog('stream');}else{debug=function(){};}var BufferList=__webpack_require__(677);var destroyImpl=__webpack_require__(5969);var StringDecoder;util.inherits(Readable,Stream);var kProxyEvents=['error','close','destroy','pause','resume'];function prependListener(emitter,event,fn){if(typeof emitter.prependListener==='function')return emitter.prependListener(event,fn);if(!emitter._events||!emitter._events[event])emitter.on(event,fn);else if(isArray(emitter._events[event]))emitter._events[event].unshift(fn);else emitter._events[event]=[fn,emitter._events[event]];}function ReadableState(options,stream){Duplex=Duplex||__webpack_require__(7371);options=options||{};var isDuplex=stream instanceof Duplex;this.objectMode=!!options.objectMode;if(isDuplex)this.objectMode=this.objectMode||!!options.readableObjectMode;var hwm=options.highWaterMark;var readableHwm=options.readableHighWaterMark;var defaultHwm=this.objectMode?16:16*1024;if(hwm||hwm===0)this.highWaterMark=hwm;else if(isDuplex&&(readableHwm||readableHwm===0))this.highWaterMark=readableHwm;else this.highWaterMark=defaultHwm;this.highWaterMark=Math.floor(this.highWaterMark);this.buffer=new BufferList();this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.ended=false;this.endEmitted=false;this.reading=false;this.sync=true;this.needReadable=false;this.emittedReadable=false;this.readableListening=false;this.resumeScheduled=false;this.destroyed=false;this.defaultEncoding=options.defaultEncoding||'utf8';this.awaitDrain=0;this.readingMore=false;this.decoder=null;this.encoding=null;if(options.encoding){if(!StringDecoder)StringDecoder=__webpack_require__(1235).StringDecoder;this.decoder=new StringDecoder(options.encoding);this.encoding=options.encoding;}}function Readable(options){Duplex=Duplex||__webpack_require__(7371);if(!(this instanceof Readable))return new Readable(options);this._readableState=new ReadableState(options,this);this.readable=true;if(options){if(typeof options.read==='function')this._read=options.read;if(typeof options.destroy==='function')this._destroy=options.destroy;}Stream.call(this);}Object.defineProperty(Readable.prototype,'destroyed',{get:function(){if(this._readableState===undefined){return false;}return this._readableState.destroyed;},set:function(value){if(!this._readableState){return;}this._readableState.destroyed=value;}});Readable.prototype.destroy=destroyImpl.destroy;Readable.prototype._undestroy=destroyImpl.undestroy;Readable.prototype._destroy=function(err,cb){this.push(null);cb(err);};Readable.prototype.push=function(chunk,encoding){var state=this._readableState;var skipChunkCheck;if(!state.objectMode){if(typeof chunk==='string'){encoding=encoding||state.defaultEncoding;if(encoding!==state.encoding){chunk=Buffer.from(chunk,encoding);encoding='';}skipChunkCheck=true;}}else{skipChunkCheck=true;}return readableAddChunk(this,chunk,encoding,false,skipChunkCheck);};Readable.prototype.unshift=function(chunk){return readableAddChunk(this,chunk,null,true,false);};function readableAddChunk(stream,chunk,encoding,addToFront,skipChunkCheck){var state=stream._readableState;if(chunk===null){state.reading=false;onEofChunk(stream,state);}else{var er;if(!skipChunkCheck)er=chunkInvalid(state,chunk);if(er){stream.emit('error',er);}else if(state.objectMode||chunk&&chunk.length>0){if(typeof chunk!=='string'&&!state.objectMode&&Object.getPrototypeOf(chunk)!==Buffer.prototype){chunk=_uint8ArrayToBuffer(chunk);}if(addToFront){if(state.endEmitted)stream.emit('error',new Error('stream.unshift() after end event'));else addChunk(stream,state,chunk,true);}else if(state.ended){stream.emit('error',new Error('stream.push() after EOF'));}else{state.reading=false;if(state.decoder&&!encoding){chunk=state.decoder.write(chunk);if(state.objectMode||chunk.length!==0)addChunk(stream,state,chunk,false);else maybeReadMore(stream,state);}else{addChunk(stream,state,chunk,false);}}}else if(!addToFront){state.reading=false;}}return needMoreData(state);}function addChunk(stream,state,chunk,addToFront){if(state.flowing&&state.length===0&&!state.sync){stream.emit('data',chunk);stream.read(0);}else{state.length+=state.objectMode?1:chunk.length;if(addToFront)state.buffer.unshift(chunk);else state.buffer.push(chunk);if(state.needReadable)emitReadable(stream);}maybeReadMore(stream,state);}function chunkInvalid(state,chunk){var er;if(!_isUint8Array(chunk)&&typeof chunk!=='string'&&chunk!==undefined&&!state.objectMode){er=new TypeError('Invalid non-string/buffer chunk');}return er;}function needMoreData(state){return!state.ended&&(state.needReadable||state.length<state.highWaterMark||state.length===0);}Readable.prototype.isPaused=function(){return this._readableState.flowing===false;};Readable.prototype.setEncoding=function(enc){if(!StringDecoder)StringDecoder=__webpack_require__(1235).StringDecoder;this._readableState.decoder=new StringDecoder(enc);this._readableState.encoding=enc;return this;};var MAX_HWM=0x800000;function computeNewHighWaterMark(n){if(n>=MAX_HWM){n=MAX_HWM;}else{n--;n|=n>>>1;n|=n>>>2;n|=n>>>4;n|=n>>>8;n|=n>>>16;n++;}return n;}function howMuchToRead(n,state){if(n<=0||state.length===0&&state.ended)return 0;if(state.objectMode)return 1;if(n!==n){if(state.flowing&&state.length)return state.buffer.head.data.length;else return state.length;}if(n>state.highWaterMark)state.highWaterMark=computeNewHighWaterMark(n);if(n<=state.length)return n;if(!state.ended){state.needReadable=true;return 0;}return state.length;}Readable.prototype.read=function(n){debug('read',n);n=parseInt(n,10);var state=this._readableState;var nOrig=n;if(n!==0)state.emittedReadable=false;if(n===0&&state.needReadable&&(state.length>=state.highWaterMark||state.ended)){debug('read: emitReadable',state.length,state.ended);if(state.length===0&&state.ended)endReadable(this);else emitReadable(this);return null;}n=howMuchToRead(n,state);if(n===0&&state.ended){if(state.length===0)endReadable(this);return null;}var doRead=state.needReadable;debug('need readable',doRead);if(state.length===0||state.length-n<state.highWaterMark){doRead=true;debug('length less than watermark',doRead);}if(state.ended||state.reading){doRead=false;debug('reading or ended',doRead);}else if(doRead){debug('do read');state.reading=true;state.sync=true;if(state.length===0)state.needReadable=true;this._read(state.highWaterMark);state.sync=false;if(!state.reading)n=howMuchToRead(nOrig,state);}var ret;if(n>0)ret=fromList(n,state);else ret=null;if(ret===null){state.needReadable=true;n=0;}else{state.length-=n;}if(state.length===0){if(!state.ended)state.needReadable=true;if(nOrig!==n&&state.ended)endReadable(this);}if(ret!==null)this.emit('data',ret);return ret;};function onEofChunk(stream,state){if(state.ended)return;if(state.decoder){var chunk=state.decoder.end();if(chunk&&chunk.length){state.buffer.push(chunk);state.length+=state.objectMode?1:chunk.length;}}state.ended=true;emitReadable(stream);}function emitReadable(stream){var state=stream._readableState;state.needReadable=false;if(!state.emittedReadable){debug('emitReadable',state.flowing);state.emittedReadable=true;if(state.sync)pna.nextTick(emitReadable_,stream);else emitReadable_(stream);}}function emitReadable_(stream){debug('emit readable');stream.emit('readable');flow(stream);}function maybeReadMore(stream,state){if(!state.readingMore){state.readingMore=true;pna.nextTick(maybeReadMore_,stream,state);}}function maybeReadMore_(stream,state){var len=state.length;while(!state.reading&&!state.flowing&&!state.ended&&state.length<state.highWaterMark){debug('maybeReadMore read 0');stream.read(0);if(len===state.length)break;else len=state.length;}state.readingMore=false;}Readable.prototype._read=function(n){this.emit('error',new Error('_read() is not implemented'));};Readable.prototype.pipe=function(dest,pipeOpts){var src=this;var state=this._readableState;switch(state.pipesCount){case 0:state.pipes=dest;break;case 1:state.pipes=[state.pipes,dest];break;default:state.pipes.push(dest);break;}state.pipesCount+=1;debug('pipe count=%d opts=%j',state.pipesCount,pipeOpts);var doEnd=(!pipeOpts||pipeOpts.end!==false)&&dest!==process.stdout&&dest!==process.stderr;var endFn=doEnd?onend:unpipe;if(state.endEmitted)pna.nextTick(endFn);else src.once('end',endFn);dest.on('unpipe',onunpipe);function onunpipe(readable,unpipeInfo){debug('onunpipe');if(readable===src){if(unpipeInfo&&unpipeInfo.hasUnpiped===false){unpipeInfo.hasUnpiped=true;cleanup();}}}function onend(){debug('onend');dest.end();}var ondrain=pipeOnDrain(src);dest.on('drain',ondrain);var cleanedUp=false;function cleanup(){debug('cleanup');dest.removeListener('close',onclose);dest.removeListener('finish',onfinish);dest.removeListener('drain',ondrain);dest.removeListener('error',onerror);dest.removeListener('unpipe',onunpipe);src.removeListener('end',onend);src.removeListener('end',unpipe);src.removeListener('data',ondata);cleanedUp=true;if(state.awaitDrain&&(!dest._writableState||dest._writableState.needDrain))ondrain();}var increasedAwaitDrain=false;src.on('data',ondata);function ondata(chunk){debug('ondata');increasedAwaitDrain=false;var ret=dest.write(chunk);if(false===ret&&!increasedAwaitDrain){if((state.pipesCount===1&&state.pipes===dest||state.pipesCount>1&&indexOf(state.pipes,dest)!==-1)&&!cleanedUp){debug('false write response, pause',src._readableState.awaitDrain);src._readableState.awaitDrain++;increasedAwaitDrain=true;}src.pause();}}function onerror(er){debug('onerror',er);unpipe();dest.removeListener('error',onerror);if(EElistenerCount(dest,'error')===0)dest.emit('error',er);}prependListener(dest,'error',onerror);function onclose(){dest.removeListener('finish',onfinish);unpipe();}dest.once('close',onclose);function onfinish(){debug('onfinish');dest.removeListener('close',onclose);unpipe();}dest.once('finish',onfinish);function unpipe(){debug('unpipe');src.unpipe(dest);}dest.emit('pipe',src);if(!state.flowing){debug('pipe resume');src.resume();}return dest;};function pipeOnDrain(src){return function(){var state=src._readableState;debug('pipeOnDrain',state.awaitDrain);if(state.awaitDrain)state.awaitDrain--;if(state.awaitDrain===0&&EElistenerCount(src,'data')){state.flowing=true;flow(src);}};}Readable.prototype.unpipe=function(dest){var state=this._readableState;var unpipeInfo={hasUnpiped:false};if(state.pipesCount===0)return this;if(state.pipesCount===1){if(dest&&dest!==state.pipes)return this;if(!dest)dest=state.pipes;state.pipes=null;state.pipesCount=0;state.flowing=false;if(dest)dest.emit('unpipe',this,unpipeInfo);return this;}if(!dest){var dests=state.pipes;var len=state.pipesCount;state.pipes=null;state.pipesCount=0;state.flowing=false;for(var i=0;i<len;i++){dests[i].emit('unpipe',this,unpipeInfo);}return this;}var index=indexOf(state.pipes,dest);if(index===-1)return this;state.pipes.splice(index,1);state.pipesCount-=1;if(state.pipesCount===1)state.pipes=state.pipes[0];dest.emit('unpipe',this,unpipeInfo);return this;};Readable.prototype.on=function(ev,fn){var res=Stream.prototype.on.call(this,ev,fn);if(ev==='data'){if(this._readableState.flowing!==false)this.resume();}else if(ev==='readable'){var state=this._readableState;if(!state.endEmitted&&!state.readableListening){state.readableListening=state.needReadable=true;state.emittedReadable=false;if(!state.reading){pna.nextTick(nReadingNextTick,this);}else if(state.length){emitReadable(this);}}}return res;};Readable.prototype.addListener=Readable.prototype.on;function nReadingNextTick(self){debug('readable nexttick read 0');self.read(0);}Readable.prototype.resume=function(){var state=this._readableState;if(!state.flowing){debug('resume');state.flowing=true;resume(this,state);}return this;};function resume(stream,state){if(!state.resumeScheduled){state.resumeScheduled=true;pna.nextTick(resume_,stream,state);}}function resume_(stream,state){if(!state.reading){debug('resume read 0');stream.read(0);}state.resumeScheduled=false;state.awaitDrain=0;stream.emit('resume');flow(stream);if(state.flowing&&!state.reading)stream.read(0);}Readable.prototype.pause=function(){debug('call pause flowing=%j',this._readableState.flowing);if(false!==this._readableState.flowing){debug('pause');this._readableState.flowing=false;this.emit('pause');}return this;};function flow(stream){var state=stream._readableState;debug('flow',state.flowing);while(state.flowing&&stream.read()!==null){}}Readable.prototype.wrap=function(stream){var _this=this;var state=this._readableState;var paused=false;stream.on('end',function(){debug('wrapped end');if(state.decoder&&!state.ended){var chunk=state.decoder.end();if(chunk&&chunk.length)_this.push(chunk);}_this.push(null);});stream.on('data',function(chunk){debug('wrapped data');if(state.decoder)chunk=state.decoder.write(chunk);if(state.objectMode&&(chunk===null||chunk===undefined))return;else if(!state.objectMode&&(!chunk||!chunk.length))return;var ret=_this.push(chunk);if(!ret){paused=true;stream.pause();}});for(var i in stream){if(this[i]===undefined&&typeof stream[i]==='function'){this[i]=function(method){return function(){return stream[method].apply(stream,arguments);};}(i);}}for(var n=0;n<kProxyEvents.length;n++){stream.on(kProxyEvents[n],this.emit.bind(this,kProxyEvents[n]));}this._read=function(n){debug('wrapped _read',n);if(paused){paused=false;stream.resume();}};return this;};Object.defineProperty(Readable.prototype,'readableHighWaterMark',{enumerable:false,get:function(){return this._readableState.highWaterMark;}});Readable._fromList=fromList;function fromList(n,state){if(state.length===0)return null;var ret;if(state.objectMode)ret=state.buffer.shift();else if(!n||n>=state.length){if(state.decoder)ret=state.buffer.join('');else if(state.buffer.length===1)ret=state.buffer.head.data;else ret=state.buffer.concat(state.length);state.buffer.clear();}else{ret=fromListPartial(n,state.buffer,state.decoder);}return ret;}function fromListPartial(n,list,hasStrings){var ret;if(n<list.head.data.length){ret=list.head.data.slice(0,n);list.head.data=list.head.data.slice(n);}else if(n===list.head.data.length){ret=list.shift();}else{ret=hasStrings?copyFromBufferString(n,list):copyFromBuffer(n,list);}return ret;}function copyFromBufferString(n,list){var p=list.head;var c=1;var ret=p.data;n-=ret.length;while(p=p.next){var str=p.data;var nb=n>str.length?str.length:n;if(nb===str.length)ret+=str;else ret+=str.slice(0,n);n-=nb;if(n===0){if(nb===str.length){++c;if(p.next)list.head=p.next;else list.head=list.tail=null;}else{list.head=p;p.data=str.slice(nb);}break;}++c;}list.length-=c;return ret;}function copyFromBuffer(n,list){var ret=Buffer.allocUnsafe(n);var p=list.head;var c=1;p.data.copy(ret);n-=p.data.length;while(p=p.next){var buf=p.data;var nb=n>buf.length?buf.length:n;buf.copy(ret,ret.length-n,0,nb);n-=nb;if(n===0){if(nb===buf.length){++c;if(p.next)list.head=p.next;else list.head=list.tail=null;}else{list.head=p;p.data=buf.slice(nb);}break;}++c;}list.length-=c;return ret;}function endReadable(stream){var state=stream._readableState;if(state.length>0)throw new Error('"endReadable()" called on non-empty stream');if(!state.endEmitted){state.ended=true;pna.nextTick(endReadableNT,state,stream);}}function endReadableNT(state,stream){if(!state.endEmitted&&state.length===0){state.endEmitted=true;stream.readable=false;stream.emit('end');}}function indexOf(xs,x){for(var i=0,l=xs.length;i<l;i++){if(xs[i]===x)return i;}return-1;}},3432:function(module,__unusedexports,__webpack_require__){"use strict";const crypto=__webpack_require__(2984);module.exports={createCipheriv:crypto.createCipheriv,createDecipheriv:crypto.createDecipheriv};},3435:function(module){hash.BASE=0x811c9dc5;function hash(s){var h=hash.BASE;for(var i=0,l=s.length;i<l;i++){h^=s.charCodeAt(i);h+=(h<<1)+(h<<4)+(h<<7)+(h<<8)+(h<<24);}return h>>>0;}module.exports=hash;},3459:function(__unusedmodule,exports,__webpack_require__){"use strict";var elliptic=exports;elliptic.version=__webpack_require__(2323).version;elliptic.utils=__webpack_require__(7276);elliptic.rand=__webpack_require__(7255);elliptic.curve=__webpack_require__(8958);elliptic.curves=__webpack_require__(64);elliptic.ec=__webpack_require__(9276);elliptic.eddsa=__webpack_require__(7279);},3462:function(module,__unusedexports,__webpack_require__){var Source=__webpack_require__(7683);var error=__webpack_require__(5619);var values=__webpack_require__(5130);var collect=__webpack_require__(8342);module.exports=function(compare){var source=Source();var sink=collect(function(err,ary){if(err){return source.resolve(error(err));}source.resolve(values(ary.sort(compare)));});return function(read){sink(read);return source;};};},3472:function(module){var api={};module.exports=api;var _reverseAlphabets={};api.encode=function(input,alphabet,maxline){if(typeof alphabet!=='string'){throw new TypeError('"alphabet" must be a string.');}if(maxline!==undefined&&typeof maxline!=='number'){throw new TypeError('"maxline" must be a number.');}var output='';if(!(input instanceof Uint8Array)){output=_encodeWithByteBuffer(input,alphabet);}else{var i=0;var base=alphabet.length;var first=alphabet.charAt(0);var digits=[0];for(i=0;i<input.length;++i){for(var j=0,carry=input[i];j<digits.length;++j){carry+=digits[j]<<8;digits[j]=carry%base;carry=carry/base|0;}while(carry>0){digits.push(carry%base);carry=carry/base|0;}}for(i=0;input[i]===0&&i<input.length-1;++i){output+=first;}for(i=digits.length-1;i>=0;--i){output+=alphabet[digits[i]];}}if(maxline){var regex=new RegExp('.{1,'+maxline+'}','g');output=output.match(regex).join('\r\n');}return output;};api.decode=function(input,alphabet){if(typeof input!=='string'){throw new TypeError('"input" must be a string.');}if(typeof alphabet!=='string'){throw new TypeError('"alphabet" must be a string.');}var table=_reverseAlphabets[alphabet];if(!table){table=_reverseAlphabets[alphabet]=[];for(var i=0;i<alphabet.length;++i){table[alphabet.charCodeAt(i)]=i;}}input=input.replace(/\s/g,'');var base=alphabet.length;var first=alphabet.charAt(0);var bytes=[0];for(var i=0;i<input.length;i++){var value=table[input.charCodeAt(i)];if(value===undefined){return;}for(var j=0,carry=value;j<bytes.length;++j){carry+=bytes[j]*base;bytes[j]=carry&0xff;carry>>=8;}while(carry>0){bytes.push(carry&0xff);carry>>=8;}}for(var k=0;input[k]===first&&k<input.length-1;++k){bytes.push(0);}if(typeof Buffer!=='undefined'){return Buffer.from(bytes.reverse());}return new Uint8Array(bytes.reverse());};function _encodeWithByteBuffer(input,alphabet){var i=0;var base=alphabet.length;var first=alphabet.charAt(0);var digits=[0];for(i=0;i<input.length();++i){for(var j=0,carry=input.at(i);j<digits.length;++j){carry+=digits[j]<<8;digits[j]=carry%base;carry=carry/base|0;}while(carry>0){digits.push(carry%base);carry=carry/base|0;}}var output='';for(i=0;input.at(i)===0&&i<input.length()-1;++i){output+=first;}for(i=digits.length-1;i>=0;--i){output+=alphabet[digits[i]];}return output;}},3476:function(module){module.exports=require("vm");},3487:function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default={};module.exports=exports["default"];},3494:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=iterator;var _isArrayLike=__webpack_require__(4356);var _isArrayLike2=_interopRequireDefault(_isArrayLike);var _getIterator=__webpack_require__(7116);var _getIterator2=_interopRequireDefault(_getIterator);var _keys=__webpack_require__(8883);var _keys2=_interopRequireDefault(_keys);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function createArrayIterator(coll){var i=-1;var len=coll.length;return function next(){return++i<len?{value:coll[i],key:i}:null;};}function createES2015Iterator(iterator){var i=-1;return function next(){var item=iterator.next();if(item.done)return null;i++;return{value:item.value,key:i};};}function createObjectIterator(obj){var okeys=(0,_keys2.default)(obj);var i=-1;var len=okeys.length;return function next(){var key=okeys[++i];return i<len?{value:obj[key],key:key}:null;};}function iterator(coll){if((0,_isArrayLike2.default)(coll)){return createArrayIterator(coll);}var iterator=(0,_getIterator2.default)(coll);return iterator?createES2015Iterator(iterator):createObjectIterator(coll);}module.exports=exports['default'];},3499:function(__unusedmodule,exports,__webpack_require__){var pathModule=__webpack_require__(5897);var isWindows=process.platform==='win32';var fs=__webpack_require__(662);var DEBUG=process.env.NODE_DEBUG&&/fs/.test(process.env.NODE_DEBUG);function rethrow(){var callback;if(DEBUG){var backtrace=new Error();callback=debugCallback;}else callback=missingCallback;return callback;function debugCallback(err){if(err){backtrace.message=err.message;err=backtrace;missingCallback(err);}}function missingCallback(err){if(err){if(process.throwDeprecation)throw err;else if(!process.noDeprecation){var msg='fs: missing callback '+(err.stack||err.message);if(process.traceDeprecation)console.trace(msg);else console.error(msg);}}}}function maybeCallback(cb){return typeof cb==='function'?cb:rethrow();}var normalize=pathModule.normalize;if(isWindows){var nextPartRe=/(.*?)(?:[\/\\]+|$)/g;}else{var nextPartRe=/(.*?)(?:[\/]+|$)/g;}if(isWindows){var splitRootRe=/^(?:[a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/][^\\\/]+)?[\\\/]*/;}else{var splitRootRe=/^[\/]*/;}exports.realpathSync=function realpathSync(p,cache){p=pathModule.resolve(p);if(cache&&Object.prototype.hasOwnProperty.call(cache,p)){return cache[p];}var original=p,seenLinks={},knownHard={};var pos;var current;var base;var previous;start();function start(){var m=splitRootRe.exec(p);pos=m[0].length;current=m[0];base=m[0];previous='';if(isWindows&&!knownHard[base]){fs.lstatSync(base);knownHard[base]=true;}}while(pos<p.length){nextPartRe.lastIndex=pos;var result=nextPartRe.exec(p);previous=current;current+=result[0];base=previous+result[1];pos=nextPartRe.lastIndex;if(knownHard[base]||cache&&cache[base]===base){continue;}var resolvedLink;if(cache&&Object.prototype.hasOwnProperty.call(cache,base)){resolvedLink=cache[base];}else{var stat=fs.lstatSync(base);if(!stat.isSymbolicLink()){knownHard[base]=true;if(cache)cache[base]=base;continue;}var linkTarget=null;if(!isWindows){var id=stat.dev.toString(32)+':'+stat.ino.toString(32);if(seenLinks.hasOwnProperty(id)){linkTarget=seenLinks[id];}}if(linkTarget===null){fs.statSync(base);linkTarget=fs.readlinkSync(base);}resolvedLink=pathModule.resolve(previous,linkTarget);if(cache)cache[base]=resolvedLink;if(!isWindows)seenLinks[id]=linkTarget;}p=pathModule.resolve(resolvedLink,p.slice(pos));start();}if(cache)cache[original]=p;return p;};exports.realpath=function realpath(p,cache,cb){if(typeof cb!=='function'){cb=maybeCallback(cache);cache=null;}p=pathModule.resolve(p);if(cache&&Object.prototype.hasOwnProperty.call(cache,p)){return process.nextTick(cb.bind(null,null,cache[p]));}var original=p,seenLinks={},knownHard={};var pos;var current;var base;var previous;start();function start(){var m=splitRootRe.exec(p);pos=m[0].length;current=m[0];base=m[0];previous='';if(isWindows&&!knownHard[base]){fs.lstat(base,function(err){if(err)return cb(err);knownHard[base]=true;LOOP();});}else{process.nextTick(LOOP);}}function LOOP(){if(pos>=p.length){if(cache)cache[original]=p;return cb(null,p);}nextPartRe.lastIndex=pos;var result=nextPartRe.exec(p);previous=current;current+=result[0];base=previous+result[1];pos=nextPartRe.lastIndex;if(knownHard[base]||cache&&cache[base]===base){return process.nextTick(LOOP);}if(cache&&Object.prototype.hasOwnProperty.call(cache,base)){return gotResolvedLink(cache[base]);}return fs.lstat(base,gotStat);}function gotStat(err,stat){if(err)return cb(err);if(!stat.isSymbolicLink()){knownHard[base]=true;if(cache)cache[base]=base;return process.nextTick(LOOP);}if(!isWindows){var id=stat.dev.toString(32)+':'+stat.ino.toString(32);if(seenLinks.hasOwnProperty(id)){return gotTarget(null,seenLinks[id],base);}}fs.stat(base,function(err){if(err)return cb(err);fs.readlink(base,function(err,target){if(!isWindows)seenLinks[id]=target;gotTarget(err,target);});});}function gotTarget(err,target,base){if(err)return cb(err);var resolvedLink=pathModule.resolve(previous,target);if(cache)cache[base]=resolvedLink;gotResolvedLink(resolvedLink);}function gotResolvedLink(resolvedLink){p=pathModule.resolve(resolvedLink,p.slice(pos));start();}};},3505:function(module,__unusedexports,__webpack_require__){"use strict";const handshake=__webpack_require__(9346);const deferred=__webpack_require__(5213);class State{constructor(localId,remoteId,timeout,callback){if(typeof timeout==='function'){callback=timeout;timeout=undefined;}this.setup();this.id.local=localId;this.id.remote=remoteId;this.key.local=localId.privKey;this.timeout=timeout||60*1000;callback=callback||(()=>{});this.secure=deferred.duplex();this.stream=handshake({timeout:this.timeout},callback);this.shake=this.stream.handshake;delete this.stream.handshake;}setup(){this.id={local:null,remote:null};this.key={local:null,remote:null};this.shake=null;this.cleanSecrets();}cleanSecrets(){this.shared={};this.ephemeralKey={local:null,remote:null};this.proposal={in:null,out:null};this.proposalEncoded={in:null,out:null};this.protocols={local:null,remote:null};this.exchange={in:null,out:null};}}module.exports=State;},3509:function(module,__unusedexports,__webpack_require__){"use strict";module.exports=Transform;var Duplex=__webpack_require__(7896);var util=__webpack_require__(5548);util.inherits=__webpack_require__(92);util.inherits(Transform,Duplex);function afterTransform(er,data){var ts=this._transformState;ts.transforming=false;var cb=ts.writecb;if(!cb){return this.emit('error',new Error('write callback called multiple times'));}ts.writechunk=null;ts.writecb=null;if(data!=null)this.push(data);cb(er);var rs=this._readableState;rs.reading=false;if(rs.needReadable||rs.length<rs.highWaterMark){this._read(rs.highWaterMark);}}function Transform(options){if(!(this instanceof Transform))return new Transform(options);Duplex.call(this,options);this._transformState={afterTransform:afterTransform.bind(this),needTransform:false,transforming:false,writecb:null,writechunk:null,writeencoding:null};this._readableState.needReadable=true;this._readableState.sync=false;if(options){if(typeof options.transform==='function')this._transform=options.transform;if(typeof options.flush==='function')this._flush=options.flush;}this.on('prefinish',prefinish);}function prefinish(){var _this=this;if(typeof this._flush==='function'){this._flush(function(er,data){done(_this,er,data);});}else{done(this,null,null);}}Transform.prototype.push=function(chunk,encoding){this._transformState.needTransform=false;return Duplex.prototype.push.call(this,chunk,encoding);};Transform.prototype._transform=function(chunk,encoding,cb){throw new Error('_transform() is not implemented');};Transform.prototype._write=function(chunk,encoding,cb){var ts=this._transformState;ts.writecb=cb;ts.writechunk=chunk;ts.writeencoding=encoding;if(!ts.transforming){var rs=this._readableState;if(ts.needTransform||rs.needReadable||rs.length<rs.highWaterMark)this._read(rs.highWaterMark);}};Transform.prototype._read=function(n){var ts=this._transformState;if(ts.writechunk!==null&&ts.writecb&&!ts.transforming){ts.transforming=true;this._transform(ts.writechunk,ts.writeencoding,ts.afterTransform);}else{ts.needTransform=true;}};Transform.prototype._destroy=function(err,cb){var _this2=this;Duplex.prototype._destroy.call(this,err,function(err2){cb(err2);_this2.emit('close');});};function done(stream,er,data){if(er)return stream.emit('error',er);if(data!=null)stream.push(data);if(stream._writableState.length)throw new Error('Calling transform done when ws.length != 0');if(stream._transformState.transforming)throw new Error('Calling transform done when still transforming');return stream.push(null);}},3515:function(module,__unusedexports,__webpack_require__){var looper=__webpack_require__(9546);module.exports=function(map,width,inOrder){inOrder=inOrder===undefined?true:inOrder;var reading=false,abort;return function(read){var i=0,j=0,last=0;var seen=[],started=false,ended=false,_cb,error;function drain(){if(_cb){var cb=_cb;if(error){_cb=null;return cb(error);}if(Object.hasOwnProperty.call(seen,j)){_cb=null;var data=seen[j];delete seen[j];j++;cb(null,data);if(width)start();}else if(j>=last&&ended){_cb=null;cb(ended);}}}var start=looper(function(){started=true;if(ended)return drain();if(reading||width&&i-width>=j)return;reading=true;read(abort,function(end,data){reading=false;if(end){last=i;ended=end;drain();}else{var k=i++;map(data,function(err,data){if(inOrder)seen[k]=data;else seen.push(data);if(err)error=err;drain();});if(!ended)start();}});});return function(_abort,cb){if(_abort)read(ended=abort=_abort,function(err){if(cb)return cb(err);});else{_cb=cb;if(!started)start();drain();}};};};},3518:function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(3005);exports.log=log;exports.formatArgs=formatArgs;exports.save=save;exports.load=load;exports.useColors=useColors;exports.storage='undefined'!=typeof chrome&&'undefined'!=typeof chrome.storage?chrome.storage.local:localstorage();exports.colors=['lightseagreen','forestgreen','goldenrod','dodgerblue','darkorchid','crimson'];function useColors(){if(typeof window!=='undefined'&&window.process&&window.process.type==='renderer'){return true;}return typeof document!=='undefined'&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!=='undefined'&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!=='undefined'&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!=='undefined'&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/);}exports.formatters.j=function(v){try{return JSON.stringify(v);}catch(err){return'[UnexpectedJSONParseError]: '+err.message;}};function formatArgs(args){var useColors=this.useColors;args[0]=(useColors?'%c':'')+this.namespace+(useColors?' %c':' ')+args[0]+(useColors?'%c ':' ')+'+'+exports.humanize(this.diff);if(!useColors)return;var c='color: '+this.color;args.splice(1,0,c,'color: inherit');var index=0;var lastC=0;args[0].replace(/%[a-zA-Z%]/g,function(match){if('%%'===match)return;index++;if('%c'===match){lastC=index;}});args.splice(lastC,0,c);}function log(){return'object'===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments);}function save(namespaces){try{if(null==namespaces){exports.storage.removeItem('debug');}else{exports.storage.debug=namespaces;}}catch(e){}}function load(){var r;try{r=exports.storage.debug;}catch(e){}if(!r&&typeof process!=='undefined'&&'env'in process){r=process.env.DEBUG;}return r;}exports.enable(load());function localstorage(){try{return window.localStorage;}catch(e){}}},3522:function(module,__unusedexports,__webpack_require__){"use strict";const pull=__webpack_require__(418);const collect=__webpack_require__(8342);const readPullStream=__webpack_require__(4321);module.exports=context=>{return function mfsRead(path,options,callback){if(typeof options==='function'){callback=options;options={};}pull(readPullStream(context)(path,options),collect((error,buffers)=>{if(error){return callback(error);}return callback(null,Buffer.concat(buffers));}));};};},3524:function(module,__unusedexports,__webpack_require__){"use strict";const multibase=__webpack_require__(1849);const ipns=__webpack_require__(3843);module.exports={encodeBase32:buf=>{const m=multibase.encode('base32',buf).slice(1);return m.toString().toUpperCase();},validator:{func:(key,record,cb)=>ipns.validator.validate(record,key,cb)},selector:(k,records)=>ipns.validator.select(records[0],records[1])};},3528:function(module,__unusedexports,__webpack_require__){"use strict";const fs=__webpack_require__(2756);function createSyncFs(fs){const methods=['mkdir','realpath','stat','rmdir','utimes'];const newFs=_objectSpread2({},fs);methods.forEach(method=>{newFs[method]=(...args)=>{const callback=args.pop();let ret;try{ret=fs[`${method}Sync`](...args);}catch(err){return callback(err);}callback(null,ret);};});return newFs;}function toPromise(method){return(...args)=>new Promise((resolve,reject)=>{args.push((err,result)=>{if(err){reject(err);}else{resolve(result);}});method(...args);});}function toSync(method){return(...args)=>{let err;let result;args.push((_err,_result)=>{err=_err;result=_result;});method(...args);if(err){throw err;}return result;};}function toSyncOptions(options){options=_objectSpread2({},options);options.fs=createSyncFs(options.fs||fs);if(typeof options.retries==='number'&&options.retries>0||options.retries&&typeof options.retries.retries==='number'&&options.retries.retries>0){throw Object.assign(new Error('Cannot use retries with the sync api'),{code:'ESYNC'});}return options;}module.exports={toPromise,toSync,toSyncOptions};},3532:function(module,__unusedexports,__webpack_require__){"use strict";const randomBytes=__webpack_require__(9752);module.exports=function(number){if(!number||typeof number!=='number'){throw new Error('first argument must be a Number bigger than 0');}return randomBytes(number);};},3567:function(__unusedmodule,exports,__webpack_require__){"use strict";var constants4=__webpack_require__(3897);var helpers=__webpack_require__(3747);var sprintf=__webpack_require__(7586).sprintf;exports.href=function(optionalPort){if(optionalPort===undefined){optionalPort='';}else{optionalPort=sprintf(':%s',optionalPort);}return sprintf('http://[%s]%s/',this.correctForm(),optionalPort);};exports.link=function(options){if(!options){options={};}if(options.className===undefined){options.className='';}if(options.prefix===undefined){options.prefix='/#address=';}if(options.v4===undefined){options.v4=false;}var formFunction=this.correctForm;if(options.v4){formFunction=this.to4in6;}if(options.className){return sprintf('<a href="%1$s%2$s" class="%3$s">%2$s</a>',options.prefix,formFunction.call(this),options.className);}return sprintf('<a href="%1$s%2$s">%2$s</a>',options.prefix,formFunction.call(this));};exports.group=function(){var address4=this.address.match(constants4.RE_ADDRESS);var i;if(address4){var segments=address4[0].split('.');this.address=this.address.replace(constants4.RE_ADDRESS,sprintf('<span class="hover-group group-v4 group-6">%s</span>'+'.'+'<span class="hover-group group-v4 group-7">%s</span>',segments.slice(0,2).join('.'),segments.slice(2,4).join('.')));}if(this.elidedGroups===0){return helpers.simpleGroup(this.address);}var output=[];var halves=this.address.split('::');if(halves[0].length){output.push(helpers.simpleGroup(halves[0]));}else{output.push('');}var classes=['hover-group'];for(i=this.elisionBegin;i<this.elisionBegin+this.elidedGroups;i++){classes.push(sprintf('group-%d',i));}output.push(sprintf('<span class="%s"></span>',classes.join(' ')));if(halves[1].length){output.push(helpers.simpleGroup(halves[1],this.elisionEnd));}else{output.push('');}return output.join(':');};},3583:function(module,__unusedexports,__webpack_require__){"use strict";const{URL}=__webpack_require__(4969);const Bignumber=__webpack_require__(4417);const utils=__webpack_require__(6489);const constants=__webpack_require__(7023);const MT=constants.MT;const NUMBYTES=constants.NUMBYTES;const SHIFT32=constants.SHIFT32;const SYMS=constants.SYMS;const TAG=constants.TAG;const HALF=constants.MT.SIMPLE_FLOAT<<5|constants.NUMBYTES.TWO;const FLOAT=constants.MT.SIMPLE_FLOAT<<5|constants.NUMBYTES.FOUR;const DOUBLE=constants.MT.SIMPLE_FLOAT<<5|constants.NUMBYTES.EIGHT;const TRUE=constants.MT.SIMPLE_FLOAT<<5|constants.SIMPLE.TRUE;const FALSE=constants.MT.SIMPLE_FLOAT<<5|constants.SIMPLE.FALSE;const UNDEFINED=constants.MT.SIMPLE_FLOAT<<5|constants.SIMPLE.UNDEFINED;const NULL=constants.MT.SIMPLE_FLOAT<<5|constants.SIMPLE.NULL;const MAXINT_BN=new Bignumber('0x20000000000000');const BUF_NAN=Buffer.from('f97e00','hex');const BUF_INF_NEG=Buffer.from('f9fc00','hex');const BUF_INF_POS=Buffer.from('f97c00','hex');function toType(obj){return{}.toString.call(obj).slice(8,-1);}class Encoder{constructor(options){options=options||{};this.streaming=typeof options.stream==='function';this.onData=options.stream;this.semanticTypes=[[URL,this._pushUrl],[Bignumber,this._pushBigNumber]];const addTypes=options.genTypes||[];const len=addTypes.length;for(let i=0;i<len;i++){this.addSemanticType(addTypes[i][0],addTypes[i][1]);}this._reset();}addSemanticType(type,fun){const len=this.semanticTypes.length;for(let i=0;i<len;i++){const typ=this.semanticTypes[i][0];if(typ===type){const old=this.semanticTypes[i][1];this.semanticTypes[i][1]=fun;return old;}}this.semanticTypes.push([type,fun]);return null;}push(val){if(!val){return true;}this.result[this.offset]=val;this.resultMethod[this.offset]=0;this.resultLength[this.offset]=val.length;this.offset++;if(this.streaming){this.onData(this.finalize());}return true;}pushWrite(val,method,len){this.result[this.offset]=val;this.resultMethod[this.offset]=method;this.resultLength[this.offset]=len;this.offset++;if(this.streaming){this.onData(this.finalize());}return true;}_pushUInt8(val){return this.pushWrite(val,1,1);}_pushUInt16BE(val){return this.pushWrite(val,2,2);}_pushUInt32BE(val){return this.pushWrite(val,3,4);}_pushDoubleBE(val){return this.pushWrite(val,4,8);}_pushNaN(){return this.push(BUF_NAN);}_pushInfinity(obj){const half=obj<0?BUF_INF_NEG:BUF_INF_POS;return this.push(half);}_pushFloat(obj){const b2=Buffer.allocUnsafe(2);if(utils.writeHalf(b2,obj)){if(utils.parseHalf(b2)===obj){return this._pushUInt8(HALF)&&this.push(b2);}}const b4=Buffer.allocUnsafe(4);b4.writeFloatBE(obj,0);if(b4.readFloatBE(0)===obj){return this._pushUInt8(FLOAT)&&this.push(b4);}return this._pushUInt8(DOUBLE)&&this._pushDoubleBE(obj);}_pushInt(obj,mt,orig){const m=mt<<5;if(obj<24){return this._pushUInt8(m|obj);}if(obj<=0xff){return this._pushUInt8(m|NUMBYTES.ONE)&&this._pushUInt8(obj);}if(obj<=0xffff){return this._pushUInt8(m|NUMBYTES.TWO)&&this._pushUInt16BE(obj);}if(obj<=0xffffffff){return this._pushUInt8(m|NUMBYTES.FOUR)&&this._pushUInt32BE(obj);}if(obj<=Number.MAX_SAFE_INTEGER){return this._pushUInt8(m|NUMBYTES.EIGHT)&&this._pushUInt32BE(Math.floor(obj/SHIFT32))&&this._pushUInt32BE(obj%SHIFT32);}if(mt===MT.NEG_INT){return this._pushFloat(orig);}return this._pushFloat(obj);}_pushIntNum(obj){if(obj<0){return this._pushInt(-obj-1,MT.NEG_INT,obj);}else{return this._pushInt(obj,MT.POS_INT);}}_pushNumber(obj){switch(false){case obj===obj:return this._pushNaN(obj);case isFinite(obj):return this._pushInfinity(obj);case obj%1!==0:return this._pushIntNum(obj);default:return this._pushFloat(obj);}}_pushString(obj){const len=Buffer.byteLength(obj,'utf8');return this._pushInt(len,MT.UTF8_STRING)&&this.pushWrite(obj,5,len);}_pushBoolean(obj){return this._pushUInt8(obj?TRUE:FALSE);}_pushUndefined(obj){return this._pushUInt8(UNDEFINED);}_pushArray(gen,obj){const len=obj.length;if(!gen._pushInt(len,MT.ARRAY)){return false;}for(let j=0;j<len;j++){if(!gen.pushAny(obj[j])){return false;}}return true;}_pushTag(tag){return this._pushInt(tag,MT.TAG);}_pushDate(gen,obj){return gen._pushTag(TAG.DATE_EPOCH)&&gen.pushAny(Math.round(obj/1000));}_pushBuffer(gen,obj){return gen._pushInt(obj.length,MT.BYTE_STRING)&&gen.push(obj);}_pushNoFilter(gen,obj){return gen._pushBuffer(gen,obj.slice());}_pushRegexp(gen,obj){return gen._pushTag(TAG.REGEXP)&&gen.pushAny(obj.source);}_pushSet(gen,obj){if(!gen._pushInt(obj.size,MT.ARRAY)){return false;}for(let x of obj){if(!gen.pushAny(x)){return false;}}return true;}_pushUrl(gen,obj){return gen._pushTag(TAG.URI)&&gen.pushAny(obj.format());}_pushBigint(obj){let tag=TAG.POS_BIGINT;if(obj.isNegative()){obj=obj.negated().minus(1);tag=TAG.NEG_BIGINT;}let str=obj.toString(16);if(str.length%2){str='0'+str;}const buf=Buffer.from(str,'hex');return this._pushTag(tag)&&this._pushBuffer(this,buf);}_pushBigNumber(gen,obj){if(obj.isNaN()){return gen._pushNaN();}if(!obj.isFinite()){return gen._pushInfinity(obj.isNegative()?-Infinity:Infinity);}if(obj.isInteger()){return gen._pushBigint(obj);}if(!(gen._pushTag(TAG.DECIMAL_FRAC)&&gen._pushInt(2,MT.ARRAY))){return false;}const dec=obj.decimalPlaces();const slide=obj.multipliedBy(new Bignumber(10).pow(dec));if(!gen._pushIntNum(-dec)){return false;}if(slide.abs().isLessThan(MAXINT_BN)){return gen._pushIntNum(slide.toNumber());}else{return gen._pushBigint(slide);}}_pushMap(gen,obj){if(!gen._pushInt(obj.size,MT.MAP)){return false;}return this._pushRawMap(obj.size,Array.from(obj));}_pushObject(obj){if(!obj){return this._pushUInt8(NULL);}var len=this.semanticTypes.length;for(var i=0;i<len;i++){if(obj instanceof this.semanticTypes[i][0]){return this.semanticTypes[i][1].call(obj,this,obj);}}var f=obj.encodeCBOR;if(typeof f==='function'){return f.call(obj,this);}var keys=Object.keys(obj);var keyLength=keys.length;if(!this._pushInt(keyLength,MT.MAP)){return false;}return this._pushRawMap(keyLength,keys.map(k=>[k,obj[k]]));}_pushRawMap(len,map){map=map.map(function(a){a[0]=Encoder.encode(a[0]);return a;}).sort(utils.keySorter);for(var j=0;j<len;j++){if(!this.push(map[j][0])){return false;}if(!this.pushAny(map[j][1])){return false;}}return true;}write(obj){return this.pushAny(obj);}pushAny(obj){var typ=toType(obj);switch(typ){case'Number':return this._pushNumber(obj);case'String':return this._pushString(obj);case'Boolean':return this._pushBoolean(obj);case'Object':return this._pushObject(obj);case'Array':return this._pushArray(this,obj);case'Uint8Array':return this._pushBuffer(this,Buffer.isBuffer(obj)?obj:Buffer.from(obj));case'Null':return this._pushUInt8(NULL);case'Undefined':return this._pushUndefined(obj);case'Map':return this._pushMap(this,obj);case'Set':return this._pushSet(this,obj);case'URL':return this._pushUrl(this,obj);case'BigNumber':return this._pushBigNumber(this,obj);case'Date':return this._pushDate(this,obj);case'RegExp':return this._pushRegexp(this,obj);case'Symbol':switch(obj){case SYMS.NULL:return this._pushObject(null);case SYMS.UNDEFINED:return this._pushUndefined(void 0);default:throw new Error('Unknown symbol: '+obj.toString());}default:throw new Error('Unknown type: '+typeof obj+', '+(obj?obj.toString():''));}}finalize(){if(this.offset===0){return null;}var result=this.result;var resultLength=this.resultLength;var resultMethod=this.resultMethod;var offset=this.offset;var size=0;var i=0;for(;i<offset;i++){size+=resultLength[i];}var res=Buffer.allocUnsafe(size);var index=0;var length=0;for(i=0;i<offset;i++){length=resultLength[i];switch(resultMethod[i]){case 0:result[i].copy(res,index);break;case 1:res.writeUInt8(result[i],index,true);break;case 2:res.writeUInt16BE(result[i],index,true);break;case 3:res.writeUInt32BE(result[i],index,true);break;case 4:res.writeDoubleBE(result[i],index,true);break;case 5:res.write(result[i],index,length,'utf8');break;default:throw new Error('unkown method');}index+=length;}var tmp=res;this._reset();return tmp;}_reset(){this.result=[];this.resultMethod=[];this.resultLength=[];this.offset=0;}static encode(o){const enc=new Encoder();const ret=enc.pushAny(o);if(!ret){throw new Error('Failed to encode input');}return enc.finalize();}}module.exports=Encoder;},3594:function(module,__unusedexports,__webpack_require__){"use strict";var eos;function once(callback){var called=false;return function(){if(called)return;called=true;callback.apply(void 0,arguments);};}var _require$codes=__webpack_require__(3368).codes,ERR_MISSING_ARGS=_require$codes.ERR_MISSING_ARGS,ERR_STREAM_DESTROYED=_require$codes.ERR_STREAM_DESTROYED;function noop(err){if(err)throw err;}function isRequest(stream){return stream.setHeader&&typeof stream.abort==='function';}function destroyer(stream,reading,writing,callback){callback=once(callback);var closed=false;stream.on('close',function(){closed=true;});if(eos===undefined)eos=__webpack_require__(6814);eos(stream,{readable:reading,writable:writing},function(err){if(err)return callback(err);closed=true;callback();});var destroyed=false;return function(err){if(closed)return;if(destroyed)return;destroyed=true;if(isRequest(stream))return stream.abort();if(typeof stream.destroy==='function')return stream.destroy();callback(err||new ERR_STREAM_DESTROYED('pipe'));};}function call(fn){fn();}function pipe(from,to){return from.pipe(to);}function popCallback(streams){if(!streams.length)return noop;if(typeof streams[streams.length-1]!=='function')return noop;return streams.pop();}function pipeline(){for(var _len=arguments.length,streams=new Array(_len),_key=0;_key<_len;_key++){streams[_key]=arguments[_key];}var callback=popCallback(streams);if(Array.isArray(streams[0]))streams=streams[0];if(streams.length<2){throw new ERR_MISSING_ARGS('streams');}var error;var destroys=streams.map(function(stream,i){var reading=i<streams.length-1;var writing=i>0;return destroyer(stream,reading,writing,function(err){if(!error)error=err;if(err)destroys.forEach(call);if(reading)return;destroys.forEach(call);callback(error);});});return streams.reduce(pipe);}module.exports=pipeline;},3595:function(module,__unusedexports,__webpack_require__){"use strict";const promisify=__webpack_require__(6955);const whole=/^((\d+(\.\d+)*)(ns|ms|us|s|m|s|h))+$/;const pieces=/((\d+(\.\d+)*)(ns|ms|us|s|m|s|h))/g;const measure=/(ns|ms|us|s|m|s|h)/g;const multipliers={ns:1e-6,us:0.001,'s':0.001,ms:1,s:1000,m:60000,h:3.6e+6};function analyse(time){let unit=time.match(measure)[0];time=time.substring(0,time.length-unit.length);return parseFloat(time)*multipliers[unit];}module.exports=promisify(function(time,callback){if(typeof time!=='string'){return callback(new Error('the first argument must be a string'));}if(!whole.test(time)){return callback(new Error('invalid time'));}callback(null,time.match(pieces).reduce((sum,currentVal)=>{return sum+analyse(currentVal);},0));});},3606:function(module,__unusedexports,__webpack_require__){const bscript=__webpack_require__(5099);const OPS=__webpack_require__(9710);function check(script){const chunks=bscript.decompile(script);return chunks.length===2&&bscript.isCanonicalPubKey(chunks[0])&&chunks[1]===OPS.OP_CHECKSIG;}check.toJSON=function(){return'pubKey output';};module.exports={check};},3607:function(module,__unusedexports,__webpack_require__){"use strict";const EventEmitter=__webpack_require__(4859).EventEmitter;const debug=__webpack_require__(746);const withIs=__webpack_require__(3171);class BaseConnection extends EventEmitter{constructor({_switch,name}){super();this.switch=_switch;this.ourPeerInfo=this.switch._peerInfo;this.log=debug(`libp2p:conn:${name}`);this.log.error=debug(`libp2p:conn:${name}:error`);}close(err){this.log(`closing connection to ${this.theirB58Id}`);if(err&&this._events.error){this.emit('error',err);}this._state('disconnect');}emit(eventName,...args){if(eventName==='error'&&!this._events.error){this.log.error(...args);}else{super.emit(eventName,...args);}}getState(){return this._state._state;}encrypt(){this._state('encrypt');}protect(){this._state('privatize');}upgrade(){this._state('upgrade');}_onDisconnected(){this.log(`disconnected from ${this.theirB58Id}`);this.emit('close');this.removeAllListeners();}_onPrivatized(){this.log(`successfully privatized incoming connection`);this.emit('private',this.conn);}_onPrivatizing(){if(!this.switch.protector){return this._state('done');}this.conn=this.switch.protector.protect(this.conn,err=>{if(err){return this.close(err);}this.log(`successfully privatized conn to ${this.theirB58Id}`);this.conn.setPeerInfo(this.theirPeerInfo);this._state('done');});}}module.exports=withIs(BaseConnection,{className:'BaseConnection',symbolName:'libp2p-switch/BaseConnection'});},3622:function(module,__unusedexports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}var Buffer=__webpack_require__(7572).Buffer;var util=__webpack_require__(649);function copyBuffer(src,target,offset){src.copy(target,offset);}module.exports=function(){function BufferList(){_classCallCheck(this,BufferList);this.head=null;this.tail=null;this.length=0;}BufferList.prototype.push=function push(v){var entry={data:v,next:null};if(this.length>0)this.tail.next=entry;else this.head=entry;this.tail=entry;++this.length;};BufferList.prototype.unshift=function unshift(v){var entry={data:v,next:this.head};if(this.length===0)this.tail=entry;this.head=entry;++this.length;};BufferList.prototype.shift=function shift(){if(this.length===0)return;var ret=this.head.data;if(this.length===1)this.head=this.tail=null;else this.head=this.head.next;--this.length;return ret;};BufferList.prototype.clear=function clear(){this.head=this.tail=null;this.length=0;};BufferList.prototype.join=function join(s){if(this.length===0)return'';var p=this.head;var ret=''+p.data;while(p=p.next){ret+=s+p.data;}return ret;};BufferList.prototype.concat=function concat(n){if(this.length===0)return Buffer.alloc(0);if(this.length===1)return this.head.data;var ret=Buffer.allocUnsafe(n>>>0);var p=this.head;var i=0;while(p){copyBuffer(p.data,ret,i);i+=p.data.length;p=p.next;}return ret;};return BufferList;}();if(util&&util.inspect&&util.inspect.custom){module.exports.prototype[util.inspect.custom]=function(){var obj=util.inspect({length:this.length});return this.constructor.name+' '+obj;};}},3638:function(module,__unusedexports,__webpack_require__){"use strict";const CID=__webpack_require__(9339);const utils=__webpack_require__(2869);const errcode=__webpack_require__(4999);module.exports=dht=>{const log=utils.logger(dht.peerInfo.id,'rpc:add-provider');return function addProvider(peer,msg,callback){log('start');if(!msg.key||msg.key.length===0){return callback(errcode(new Error('Missing key'),'ERR_MISSING_KEY'));}let cid;try{cid=new CID(msg.key);}catch(err){const errMsg=`Invalid CID: ${err.message}`;return callback(errcode(new Error(errMsg),'ERR_INVALID_CID'));}msg.providerPeers.forEach(pi=>{if(!pi.id.isEqual(peer.id)){log('invalid provider peer %s from %s',pi.id.toB58String(),peer.id.toB58String());return;}if(pi.multiaddrs.size<1){log('no valid addresses for provider %s. Ignore',peer.id.toB58String());return;}log('received provider %s for %s (addrs %s)',peer.id.toB58String(),cid.toBaseEncodedString(),pi.multiaddrs.toArray().map(m=>m.toString()));if(!dht._isSelf(pi.id)){dht.peerBook.put(pi);}});dht.providers.addProvider(cid,peer.id,callback);};};},3645:function(module,__unusedexports,__webpack_require__){module.exports=__webpack_require__(6886);},3648:function(module,__unusedexports,__webpack_require__){module.exports=globSync;globSync.GlobSync=GlobSync;var fs=__webpack_require__(662);var rp=__webpack_require__(8761);var minimatch=__webpack_require__(472);var Minimatch=minimatch.Minimatch;var Glob=__webpack_require__(7618).Glob;var util=__webpack_require__(649);var path=__webpack_require__(5897);var assert=__webpack_require__(3930);var isAbsolute=__webpack_require__(8778);var common=__webpack_require__(2265);var alphasort=common.alphasort;var alphasorti=common.alphasorti;var setopts=common.setopts;var ownProp=common.ownProp;var childrenIgnored=common.childrenIgnored;var isIgnored=common.isIgnored;function globSync(pattern,options){if(typeof options==='function'||arguments.length===3)throw new TypeError('callback provided to sync glob\n'+'See: https://github.com/isaacs/node-glob/issues/167');return new GlobSync(pattern,options).found;}function GlobSync(pattern,options){if(!pattern)throw new Error('must provide pattern');if(typeof options==='function'||arguments.length===3)throw new TypeError('callback provided to sync glob\n'+'See: https://github.com/isaacs/node-glob/issues/167');if(!(this instanceof GlobSync))return new GlobSync(pattern,options);setopts(this,pattern,options);if(this.noprocess)return this;var n=this.minimatch.set.length;this.matches=new Array(n);for(var i=0;i<n;i++){this._process(this.minimatch.set[i],i,false);}this._finish();}GlobSync.prototype._finish=function(){assert(this instanceof GlobSync);if(this.realpath){var self=this;this.matches.forEach(function(matchset,index){var set=self.matches[index]=Object.create(null);for(var p in matchset){try{p=self._makeAbs(p);var real=rp.realpathSync(p,self.realpathCache);set[real]=true;}catch(er){if(er.syscall==='stat')set[self._makeAbs(p)]=true;else throw er;}}});}common.finish(this);};GlobSync.prototype._process=function(pattern,index,inGlobStar){assert(this instanceof GlobSync);var n=0;while(typeof pattern[n]==='string'){n++;}var prefix;switch(n){case pattern.length:this._processSimple(pattern.join('/'),index);return;case 0:prefix=null;break;default:prefix=pattern.slice(0,n).join('/');break;}var remain=pattern.slice(n);var read;if(prefix===null)read='.';else if(isAbsolute(prefix)||isAbsolute(pattern.join('/'))){if(!prefix||!isAbsolute(prefix))prefix='/'+prefix;read=prefix;}else read=prefix;var abs=this._makeAbs(read);if(childrenIgnored(this,read))return;var isGlobStar=remain[0]===minimatch.GLOBSTAR;if(isGlobStar)this._processGlobStar(prefix,read,abs,remain,index,inGlobStar);else this._processReaddir(prefix,read,abs,remain,index,inGlobStar);};GlobSync.prototype._processReaddir=function(prefix,read,abs,remain,index,inGlobStar){var entries=this._readdir(abs,inGlobStar);if(!entries)return;var pn=remain[0];var negate=!!this.minimatch.negate;var rawGlob=pn._glob;var dotOk=this.dot||rawGlob.charAt(0)==='.';var matchedEntries=[];for(var i=0;i<entries.length;i++){var e=entries[i];if(e.charAt(0)!=='.'||dotOk){var m;if(negate&&!prefix){m=!e.match(pn);}else{m=e.match(pn);}if(m)matchedEntries.push(e);}}var len=matchedEntries.length;if(len===0)return;if(remain.length===1&&!this.mark&&!this.stat){if(!this.matches[index])this.matches[index]=Object.create(null);for(var i=0;i<len;i++){var e=matchedEntries[i];if(prefix){if(prefix.slice(-1)!=='/')e=prefix+'/'+e;else e=prefix+e;}if(e.charAt(0)==='/'&&!this.nomount){e=path.join(this.root,e);}this._emitMatch(index,e);}return;}remain.shift();for(var i=0;i<len;i++){var e=matchedEntries[i];var newPattern;if(prefix)newPattern=[prefix,e];else newPattern=[e];this._process(newPattern.concat(remain),index,inGlobStar);}};GlobSync.prototype._emitMatch=function(index,e){if(isIgnored(this,e))return;var abs=this._makeAbs(e);if(this.mark)e=this._mark(e);if(this.absolute){e=abs;}if(this.matches[index][e])return;if(this.nodir){var c=this.cache[abs];if(c==='DIR'||Array.isArray(c))return;}this.matches[index][e]=true;if(this.stat)this._stat(e);};GlobSync.prototype._readdirInGlobStar=function(abs){if(this.follow)return this._readdir(abs,false);var entries;var lstat;var stat;try{lstat=fs.lstatSync(abs);}catch(er){if(er.code==='ENOENT'){return null;}}var isSym=lstat&&lstat.isSymbolicLink();this.symlinks[abs]=isSym;if(!isSym&&lstat&&!lstat.isDirectory())this.cache[abs]='FILE';else entries=this._readdir(abs,false);return entries;};GlobSync.prototype._readdir=function(abs,inGlobStar){var entries;if(inGlobStar&&!ownProp(this.symlinks,abs))return this._readdirInGlobStar(abs);if(ownProp(this.cache,abs)){var c=this.cache[abs];if(!c||c==='FILE')return null;if(Array.isArray(c))return c;}try{return this._readdirEntries(abs,fs.readdirSync(abs));}catch(er){this._readdirError(abs,er);return null;}};GlobSync.prototype._readdirEntries=function(abs,entries){if(!this.mark&&!this.stat){for(var i=0;i<entries.length;i++){var e=entries[i];if(abs==='/')e=abs+e;else e=abs+'/'+e;this.cache[e]=true;}}this.cache[abs]=entries;return entries;};GlobSync.prototype._readdirError=function(f,er){switch(er.code){case'ENOTSUP':case'ENOTDIR':var abs=this._makeAbs(f);this.cache[abs]='FILE';if(abs===this.cwdAbs){var error=new Error(er.code+' invalid cwd '+this.cwd);error.path=this.cwd;error.code=er.code;throw error;}break;case'ENOENT':case'ELOOP':case'ENAMETOOLONG':case'UNKNOWN':this.cache[this._makeAbs(f)]=false;break;default:this.cache[this._makeAbs(f)]=false;if(this.strict)throw er;if(!this.silent)console.error('glob error',er);break;}};GlobSync.prototype._processGlobStar=function(prefix,read,abs,remain,index,inGlobStar){var entries=this._readdir(abs,inGlobStar);if(!entries)return;var remainWithoutGlobStar=remain.slice(1);var gspref=prefix?[prefix]:[];var noGlobStar=gspref.concat(remainWithoutGlobStar);this._process(noGlobStar,index,false);var len=entries.length;var isSym=this.symlinks[abs];if(isSym&&inGlobStar)return;for(var i=0;i<len;i++){var e=entries[i];if(e.charAt(0)==='.'&&!this.dot)continue;var instead=gspref.concat(entries[i],remainWithoutGlobStar);this._process(instead,index,true);var below=gspref.concat(entries[i],remain);this._process(below,index,true);}};GlobSync.prototype._processSimple=function(prefix,index){var exists=this._stat(prefix);if(!this.matches[index])this.matches[index]=Object.create(null);if(!exists)return;if(prefix&&isAbsolute(prefix)&&!this.nomount){var trail=/[\/\\]$/.test(prefix);if(prefix.charAt(0)==='/'){prefix=path.join(this.root,prefix);}else{prefix=path.resolve(this.root,prefix);if(trail)prefix+='/';}}if(process.platform==='win32')prefix=prefix.replace(/\\/g,'/');this._emitMatch(index,prefix);};GlobSync.prototype._stat=function(f){var abs=this._makeAbs(f);var needDir=f.slice(-1)==='/';if(f.length>this.maxLength)return false;if(!this.stat&&ownProp(this.cache,abs)){var c=this.cache[abs];if(Array.isArray(c))c='DIR';if(!needDir||c==='DIR')return c;if(needDir&&c==='FILE')return false;}var exists;var stat=this.statCache[abs];if(!stat){var lstat;try{lstat=fs.lstatSync(abs);}catch(er){if(er&&(er.code==='ENOENT'||er.code==='ENOTDIR')){this.statCache[abs]=false;return false;}}if(lstat&&lstat.isSymbolicLink()){try{stat=fs.statSync(abs);}catch(er){stat=lstat;}}else{stat=lstat;}}this.statCache[abs]=stat;var c=true;if(stat)c=stat.isDirectory()?'DIR':'FILE';this.cache[abs]=this.cache[abs]||c;if(needDir&&c==='FILE')return false;return c;};GlobSync.prototype._mark=function(p){return common.mark(this,p);};GlobSync.prototype._makeAbs=function(f){return common.makeAbs(this,f);};},3649:function(module){if(true){module.exports=Emitter;}function Emitter(obj){if(obj)return mixin(obj);};function mixin(obj){for(var key in Emitter.prototype){obj[key]=Emitter.prototype[key];}return obj;}Emitter.prototype.on=Emitter.prototype.addEventListener=function(event,fn){this._callbacks=this._callbacks||{};(this._callbacks['$'+event]=this._callbacks['$'+event]||[]).push(fn);return this;};Emitter.prototype.once=function(event,fn){function on(){this.off(event,on);fn.apply(this,arguments);}on.fn=fn;this.on(event,on);return this;};Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=Emitter.prototype.removeEventListener=function(event,fn){this._callbacks=this._callbacks||{};if(0==arguments.length){this._callbacks={};return this;}var callbacks=this._callbacks['$'+event];if(!callbacks)return this;if(1==arguments.length){delete this._callbacks['$'+event];return this;}var cb;for(var i=0;i<callbacks.length;i++){cb=callbacks[i];if(cb===fn||cb.fn===fn){callbacks.splice(i,1);break;}}return this;};Emitter.prototype.emit=function(event){this._callbacks=this._callbacks||{};var args=[].slice.call(arguments,1),callbacks=this._callbacks['$'+event];if(callbacks){callbacks=callbacks.slice(0);for(var i=0,len=callbacks.length;i<len;++i){callbacks[i].apply(this,args);}}return this;};Emitter.prototype.listeners=function(event){this._callbacks=this._callbacks||{};return this._callbacks['$'+event]||[];};Emitter.prototype.hasListeners=function(event){return!!this.listeners(event).length;};},3664:function(module,__unusedexports,__webpack_require__){var getMapData=__webpack_require__(4749);function mapCacheGet(key){return getMapData(this,key).get(key);}module.exports=mapCacheGet;},3672:function(module,__unusedexports,__webpack_require__){"use strict";var Buffer=__webpack_require__(9423).Buffer;module.exports=function(iconv){var original=undefined;iconv.supportsNodeEncodingsExtension=!(Buffer.from||new Buffer(0)instanceof Uint8Array);iconv.extendNodeEncodings=function extendNodeEncodings(){if(original)return;original={};if(!iconv.supportsNodeEncodingsExtension){console.error("ACTION NEEDED: require('iconv-lite').extendNodeEncodings() is not supported in your version of Node");console.error("See more info at https://github.com/ashtuchkin/iconv-lite/wiki/Node-v4-compatibility");return;}var nodeNativeEncodings={'hex':true,'utf8':true,'utf-8':true,'ascii':true,'binary':true,'base64':true,'ucs2':true,'ucs-2':true,'utf16le':true,'utf-16le':true};Buffer.isNativeEncoding=function(enc){return enc&&nodeNativeEncodings[enc.toLowerCase()];};var SlowBuffer=__webpack_require__(9423).SlowBuffer;original.SlowBufferToString=SlowBuffer.prototype.toString;SlowBuffer.prototype.toString=function(encoding,start,end){encoding=String(encoding||'utf8').toLowerCase();if(Buffer.isNativeEncoding(encoding))return original.SlowBufferToString.call(this,encoding,start,end);if(typeof start=='undefined')start=0;if(typeof end=='undefined')end=this.length;return iconv.decode(this.slice(start,end),encoding);};original.SlowBufferWrite=SlowBuffer.prototype.write;SlowBuffer.prototype.write=function(string,offset,length,encoding){if(isFinite(offset)){if(!isFinite(length)){encoding=length;length=undefined;}}else{var swap=encoding;encoding=offset;offset=length;length=swap;}offset=+offset||0;var remaining=this.length-offset;if(!length){length=remaining;}else{length=+length;if(length>remaining){length=remaining;}}encoding=String(encoding||'utf8').toLowerCase();if(Buffer.isNativeEncoding(encoding))return original.SlowBufferWrite.call(this,string,offset,length,encoding);if(string.length>0&&(length<0||offset<0))throw new RangeError('attempt to write beyond buffer bounds');var buf=iconv.encode(string,encoding);if(buf.length<length)length=buf.length;buf.copy(this,offset,0,length);return length;};original.BufferIsEncoding=Buffer.isEncoding;Buffer.isEncoding=function(encoding){return Buffer.isNativeEncoding(encoding)||iconv.encodingExists(encoding);};original.BufferByteLength=Buffer.byteLength;Buffer.byteLength=SlowBuffer.byteLength=function(str,encoding){encoding=String(encoding||'utf8').toLowerCase();if(Buffer.isNativeEncoding(encoding))return original.BufferByteLength.call(this,str,encoding);return iconv.encode(str,encoding).length;};original.BufferToString=Buffer.prototype.toString;Buffer.prototype.toString=function(encoding,start,end){encoding=String(encoding||'utf8').toLowerCase();if(Buffer.isNativeEncoding(encoding))return original.BufferToString.call(this,encoding,start,end);if(typeof start=='undefined')start=0;if(typeof end=='undefined')end=this.length;return iconv.decode(this.slice(start,end),encoding);};original.BufferWrite=Buffer.prototype.write;Buffer.prototype.write=function(string,offset,length,encoding){var _offset=offset,_length=length,_encoding=encoding;if(isFinite(offset)){if(!isFinite(length)){encoding=length;length=undefined;}}else{var swap=encoding;encoding=offset;offset=length;length=swap;}encoding=String(encoding||'utf8').toLowerCase();if(Buffer.isNativeEncoding(encoding))return original.BufferWrite.call(this,string,_offset,_length,_encoding);offset=+offset||0;var remaining=this.length-offset;if(!length){length=remaining;}else{length=+length;if(length>remaining){length=remaining;}}if(string.length>0&&(length<0||offset<0))throw new RangeError('attempt to write beyond buffer bounds');var buf=iconv.encode(string,encoding);if(buf.length<length)length=buf.length;buf.copy(this,offset,0,length);return length;};if(iconv.supportsStreams){var Readable=__webpack_require__(6886).Readable;original.ReadableSetEncoding=Readable.prototype.setEncoding;Readable.prototype.setEncoding=function setEncoding(enc,options){this._readableState.decoder=iconv.getDecoder(enc,options);this._readableState.encoding=enc;};Readable.prototype.collect=iconv._collect;}};iconv.undoExtendNodeEncodings=function undoExtendNodeEncodings(){if(!iconv.supportsNodeEncodingsExtension)return;if(!original)throw new Error("require('iconv-lite').undoExtendNodeEncodings(): Nothing to undo; extendNodeEncodings() is not called.");delete Buffer.isNativeEncoding;var SlowBuffer=__webpack_require__(9423).SlowBuffer;SlowBuffer.prototype.toString=original.SlowBufferToString;SlowBuffer.prototype.write=original.SlowBufferWrite;Buffer.isEncoding=original.BufferIsEncoding;Buffer.byteLength=original.BufferByteLength;Buffer.prototype.toString=original.BufferToString;Buffer.prototype.write=original.BufferWrite;if(iconv.supportsStreams){var Readable=__webpack_require__(6886).Readable;Readable.prototype.setEncoding=original.ReadableSetEncoding;delete Readable.prototype.collect;}original=undefined;};};},3679:function(module){module.exports=encode;var MSB=0x80,REST=0x7F,MSBALL=~REST,INT=Math.pow(2,31);function encode(num,out,offset){out=out||[];offset=offset||0;var oldOffset=offset;while(num>=INT){out[offset++]=num&0xFF|MSB;num/=128;}while(num&MSBALL){out[offset++]=num&0xFF|MSB;num>>>=7;}out[offset]=num|0;encode.bytes=offset-oldOffset+1;return out;}},3710:function(module,__unusedexports,__webpack_require__){"use strict";const ethAccountSnapshotResolver=__webpack_require__(1300);const createTrieResolver=__webpack_require__(4269);const ethStateTrieResolver=createTrieResolver('eth-state-trie',ethAccountSnapshotResolver);module.exports=ethStateTrieResolver;},3729:function(module,__unusedexports,__webpack_require__){"use strict";const waterfall=__webpack_require__(4265);const DirSharded=__webpack_require__(2327);module.exports=flatToShard;function flatToShard(child,dir,threshold,options,callback){maybeFlatToShardOne(dir,threshold,options,(err,newDir)=>{if(err){callback(err);return;}const parent=newDir.parent;if(parent){waterfall([callback=>{if(newDir!==dir){if(child){child.parent=newDir;}parent.put(newDir.parentKey,newDir,callback);}else{callback();}},callback=>{if(parent){flatToShard(newDir,parent,threshold,options,callback);}else{callback(null,newDir);}}],callback);}else{callback(null,newDir);}});}function maybeFlatToShardOne(dir,threshold,options,callback){if(dir.flat&&dir.directChildrenCount()>=threshold){definitelyShardOne(dir,options,callback);}else{callback(null,dir);}}function definitelyShardOne(oldDir,options,callback){const newDir=DirSharded({root:oldDir.root,dir:true,parent:oldDir.parent,parentKey:oldDir.parentKey,path:oldDir.path,dirty:oldDir.dirty,flat:false},options);oldDir.eachChildSeries((key,value,callback)=>{newDir.put(key,value,callback);},err=>{if(err){callback(err);}else{callback(err,newDir);}});}},3747:function(__unusedmodule,exports,__webpack_require__){"use strict";var sprintf=__webpack_require__(7586).sprintf;var spanAllZeroes=exports.spanAllZeroes=function(s){return s.replace(/(0+)/g,'<span class="zero">$1</span>');};exports.spanAll=function(s,optionalOffset){if(optionalOffset===undefined){optionalOffset=0;}var letters=s.split('');return letters.map(function(n,i){return sprintf('<span class="digit value-%s position-%d">%s</span>',n,i+optionalOffset,spanAllZeroes(n));}).join('');};function spanLeadingZeroesSimple(group){return group.replace(/^(0+)/,'<span class="zero">$1</span>');}exports.spanLeadingZeroes=function(address){var groups=address.split(':');return groups.map(function(g){return spanLeadingZeroesSimple(g);}).join(':');};exports.simpleGroup=function(addressString,offset){var groups=addressString.split(':');if(!offset){offset=0;}return groups.map(function(g,i){if(/group-v4/.test(g)){return g;}return sprintf('<span class="hover-group group-%d">%s</span>',i+offset,spanLeadingZeroesSimple(g));}).join(':');};},3749:function(module,__unusedexports,__webpack_require__){"use strict";const constants=__webpack_require__(7023);const MT=constants.MT;const SIMPLE=constants.SIMPLE;const SYMS=constants.SYMS;class Simple{constructor(value){if(typeof value!=='number'){throw new Error('Invalid Simple type: '+typeof value);}if(value<0||value>255||(value|0)!==value){throw new Error('value must be a small positive integer: '+value);}this.value=value;}toString(){return'simple('+this.value+')';}inspect(){return'simple('+this.value+')';}encodeCBOR(gen){return gen._pushInt(this.value,MT.SIMPLE_FLOAT);}static isSimple(obj){return obj instanceof Simple;}static decode(val,hasParent){if(hasParent==null){hasParent=true;}switch(val){case SIMPLE.FALSE:return false;case SIMPLE.TRUE:return true;case SIMPLE.NULL:if(hasParent){return null;}else{return SYMS.NULL;}case SIMPLE.UNDEFINED:if(hasParent){return void 0;}else{return SYMS.UNDEFINED;}case-1:if(!hasParent){throw new Error('Invalid BREAK');}return SYMS.BREAK;default:return new Simple(val);}}}module.exports=Simple;},3761:function(module,__unusedexports,__webpack_require__){"use strict";const identify=__webpack_require__(6906);const multistream=__webpack_require__(9759);const debug=__webpack_require__(746);const log=debug('libp2p:switch:conn-manager');const once=__webpack_require__(7957);const ConnectionFSM=__webpack_require__(9782);const{msHandle,msSelect,identifyDialer}=__webpack_require__(1114);const Circuit=__webpack_require__(1560);const plaintext=__webpack_require__(7708);class ConnectionManager{constructor(_switch){this.switch=_switch;this.connections={};}add(connection){this.connections[connection.theirB58Id]=this.connections[connection.theirB58Id]||[];if(!this.get(connection)){this.connections[connection.theirB58Id].push(connection);}}get(connection){if(!this.connections[connection.theirB58Id])return null;for(let i=0;i<this.connections[connection.theirB58Id].length;i++){if(this.connections[connection.theirB58Id][i]===connection){return this.connections[connection.theirB58Id][i];}}return null;}getOne(peerId){if(this.connections[peerId]){return this.connections[peerId][0];}return null;}remove(connection){if(!this.connections[connection.theirB58Id])return;for(let i=0;i<this.connections[connection.theirB58Id].length;i++){if(this.connections[connection.theirB58Id][i]===connection){this.connections[connection.theirB58Id].splice(i,1);return;}}}getAll(){let connections=[];for(const conns of Object.values(this.connections)){connections=[...connections,...conns];}return connections;}getAllById(peerId){return this.connections[peerId]||[];}addStreamMuxer(muxer){this.switch.muxers[muxer.multicodec]=muxer;this.switch.handle(muxer.multicodec,(protocol,conn)=>{const muxedConn=muxer.listener(conn);muxedConn.on('stream',this.switch.protocolMuxer(null));if(this.switch.identify){conn.getPeerInfo((err,cryptoPI)=>{if(err||!cryptoPI){log('crypto peerInfo wasnt found');}conn.getPeerInfo=async callback=>{const conn=muxedConn.newStream();const ms=new multistream.Dialer();callback=once(callback);let results;try{await msHandle(ms,conn);const msConn=await msSelect(ms,identify.multicodec);results=await identifyDialer(msConn,cryptoPI);}catch(err){return muxedConn.end(()=>{callback(err,null);});}const{peerInfo,observedAddrs}=results;for(var i=0;i<observedAddrs.length;i++){var addr=observedAddrs[i];this.switch._peerInfo.multiaddrs.addSafe(addr);}if(peerInfo){conn.setPeerInfo(peerInfo);}callback(null,peerInfo);};conn.getPeerInfo((err,peerInfo)=>{if(err){return log('identify not successful');}const b58Str=peerInfo.id.toB58String();const connection=new ConnectionFSM({_switch:this.switch,peerInfo,muxer:muxedConn,conn:conn,type:'inc'});this.switch.connection.add(connection);if(peerInfo.multiaddrs.size>0){peerInfo.connect(peerInfo.multiaddrs.toArray()[0]);}else{peerInfo.connect(`/ipfs/${b58Str}`);}peerInfo=this.switch._peerBook.put(peerInfo);muxedConn.once('close',()=>{connection.close();});this.switch.emit('peer-mux-established',peerInfo);});});}return conn;});}crypto(tag,encrypt){if(!tag&&!encrypt){tag=plaintext.tag;encrypt=plaintext.encrypt;}this.switch.crypto={tag,encrypt};}enableCircuitRelay(config){config=config||{};if(config.enabled){if(!config.hop){Object.assign(config,{hop:{enabled:false,active:false}});}this.switch.transport.add(Circuit.tag,new Circuit(this.switch,config));}}reuse(){this.switch.identify=true;this.switch.handle(identify.multicodec,(protocol,conn)=>{identify.listener(conn,this.switch._peerInfo);});}}module.exports=ConnectionManager;},3771:function(__unusedmodule,exports,__webpack_require__){"use strict";const asn1=exports;asn1.bignum=__webpack_require__(5584);asn1.define=__webpack_require__(4349).define;asn1.base=__webpack_require__(5490);asn1.constants=__webpack_require__(9781);asn1.decoders=__webpack_require__(4089);asn1.encoders=__webpack_require__(9679);},3778:function(module,__unusedexports,__webpack_require__){"use strict";const toPathComponents=__webpack_require__(8551);const exporter=__webpack_require__(7623);const pull=__webpack_require__(418);const filter=__webpack_require__(708);const map=__webpack_require__(569);const collect=__webpack_require__(8342);const log=__webpack_require__(746)('ipfs:mfs:utils:to-trail');const CID=__webpack_require__(9339);const toTrail=(context,path,options,callback)=>{const toExport=toPathComponents(path).slice(1);const finalPath=`/${toExport.slice(1).join('/')}`;let depth=0;log(`Creating trail for path ${path} ${toExport}`);let exported='';pull(exporter(path,context.ipld,{fullPath:true,maxDepth:toExport.length-1}),filter(node=>{log(`Saw node ${node.name} for segment ${toExport[depth]} at depth ${node.depth}`);if(node.name===toExport[depth]){depth++;return true;}return false;}),map(node=>{let currentPath='/';let name=currentPath;if(exported){currentPath=`${exported==='/'?'':exported}/${toExport[node.depth]}`;name=node.name;}exported=currentPath;if(exported!==finalPath&&node.type!=='dir'){throw new Error(`cannot access ${exported}: Not a directory ${finalPath}`);}return{name,cid:new CID(node.hash),size:node.size,type:node.type};}),collect(callback));};module.exports=toTrail;},3789:function(module,__unusedexports,__webpack_require__){"use strict";const defer=__webpack_require__(8164);module.exports=class Connection{constructor(conn,info){this.peerInfo=null;this.conn=defer();if(conn){this.setInnerConn(conn,info);}else if(info){this.info=info;}}get source(){return this.conn.source;}get sink(){return this.conn.sink;}getPeerInfo(callback){if(this.info&&this.info.getPeerInfo){return this.info.getPeerInfo(callback);}if(!this.peerInfo){return callback(new Error('Peer Info not set yet'));}callback(null,this.peerInfo);}setPeerInfo(peerInfo){if(this.info&&this.info.setPeerInfo){return this.info.setPeerInfo(peerInfo);}this.peerInfo=peerInfo;}getObservedAddrs(callback){if(this.info&&this.info.getObservedAddrs){return this.info.getObservedAddrs(callback);}callback(null,[]);}setInnerConn(conn,info){this.conn.resolve(conn);if(info){this.info=info;}else{this.info=conn;}}};},3819:function(module,__unusedexports,__webpack_require__){const Multiaddr=__webpack_require__(5920);const reduceValue=(_,v)=>v;const Reducers={ip4:reduceValue,ip6:(str,content,i,parts)=>parts.length===1&&parts[0].protocol==='ip6'?content:`[${content}]`,tcp:(str,content,i,parts)=>parts.some(p=>['http','https','ws','wss'].includes(p.protocol))?`${str}:${content}`:`tcp://${str}:${content}`,udp:(str,content)=>`udp://${str}:${content}`,dnsaddr:reduceValue,dns4:reduceValue,dns6:reduceValue,ipfs:(str,content)=>`${str}/ipfs/${content}`,p2p:(str,content)=>`${str}/p2p/${content}`,http:str=>`http://${str}`,https:str=>`https://${str}`,ws:str=>`ws://${str}`,wss:str=>`wss://${str}`,'p2p-websocket-star':str=>`${str}/p2p-websocket-star`,'p2p-webrtc-star':str=>`${str}/p2p-webrtc-star`,'p2p-webrtc-direct':str=>`${str}/p2p-webrtc-direct`};module.exports=multiaddr=>Multiaddr(multiaddr).stringTuples().map(tuple=>({protocol:Multiaddr.protocols.codes[tuple[0]].name,content:tuple[1]})).reduce((str,part,i,parts)=>{const reduce=Reducers[part.protocol];if(!reduce)throw new Error(`Unsupported protocol ${part.protocol}`);return reduce(str,part.content,i,parts);},'');},3837:function(__unusedmodule,exports,__webpack_require__){var debug=__webpack_require__(1863)('socket.io-parser');var Emitter=__webpack_require__(3649);var binary=__webpack_require__(4239);var isArray=__webpack_require__(7702);var isBuf=__webpack_require__(8107);exports.protocol=4;exports.types=['CONNECT','DISCONNECT','EVENT','ACK','ERROR','BINARY_EVENT','BINARY_ACK'];exports.CONNECT=0;exports.DISCONNECT=1;exports.EVENT=2;exports.ACK=3;exports.ERROR=4;exports.BINARY_EVENT=5;exports.BINARY_ACK=6;exports.Encoder=Encoder;exports.Decoder=Decoder;function Encoder(){}var ERROR_PACKET=exports.ERROR+'"encode error"';Encoder.prototype.encode=function(obj,callback){debug('encoding packet %j',obj);if(exports.BINARY_EVENT===obj.type||exports.BINARY_ACK===obj.type){encodeAsBinary(obj,callback);}else{var encoding=encodeAsString(obj);callback([encoding]);}};function encodeAsString(obj){var str=''+obj.type;if(exports.BINARY_EVENT===obj.type||exports.BINARY_ACK===obj.type){str+=obj.attachments+'-';}if(obj.nsp&&'/'!==obj.nsp){str+=obj.nsp+',';}if(null!=obj.id){str+=obj.id;}if(null!=obj.data){var payload=tryStringify(obj.data);if(payload!==false){str+=payload;}else{return ERROR_PACKET;}}debug('encoded %j as %s',obj,str);return str;}function tryStringify(str){try{return JSON.stringify(str);}catch(e){return false;}}function encodeAsBinary(obj,callback){function writeEncoding(bloblessData){var deconstruction=binary.deconstructPacket(bloblessData);var pack=encodeAsString(deconstruction.packet);var buffers=deconstruction.buffers;buffers.unshift(pack);callback(buffers);}binary.removeBlobs(obj,writeEncoding);}function Decoder(){this.reconstructor=null;}Emitter(Decoder.prototype);Decoder.prototype.add=function(obj){var packet;if(typeof obj==='string'){packet=decodeString(obj);if(exports.BINARY_EVENT===packet.type||exports.BINARY_ACK===packet.type){this.reconstructor=new BinaryReconstructor(packet);if(this.reconstructor.reconPack.attachments===0){this.emit('decoded',packet);}}else{this.emit('decoded',packet);}}else if(isBuf(obj)||obj.base64){if(!this.reconstructor){throw new Error('got binary data when not reconstructing a packet');}else{packet=this.reconstructor.takeBinaryData(obj);if(packet){this.reconstructor=null;this.emit('decoded',packet);}}}else{throw new Error('Unknown type: '+obj);}};function decodeString(str){var i=0;var p={type:Number(str.charAt(0))};if(null==exports.types[p.type]){return error('unknown packet type '+p.type);}if(exports.BINARY_EVENT===p.type||exports.BINARY_ACK===p.type){var buf='';while(str.charAt(++i)!=='-'){buf+=str.charAt(i);if(i==str.length)break;}if(buf!=Number(buf)||str.charAt(i)!=='-'){throw new Error('Illegal attachments');}p.attachments=Number(buf);}if('/'===str.charAt(i+1)){p.nsp='';while(++i){var c=str.charAt(i);if(','===c)break;p.nsp+=c;if(i===str.length)break;}}else{p.nsp='/';}var next=str.charAt(i+1);if(''!==next&&Number(next)==next){p.id='';while(++i){var c=str.charAt(i);if(null==c||Number(c)!=c){--i;break;}p.id+=str.charAt(i);if(i===str.length)break;}p.id=Number(p.id);}if(str.charAt(++i)){var payload=tryParse(str.substr(i));var isPayloadValid=payload!==false&&(p.type===exports.ERROR||isArray(payload));if(isPayloadValid){p.data=payload;}else{return error('invalid payload');}}debug('decoded %s as %j',str,p);return p;}function tryParse(str){try{return JSON.parse(str);}catch(e){return false;}}Decoder.prototype.destroy=function(){if(this.reconstructor){this.reconstructor.finishedReconstruction();}};function BinaryReconstructor(packet){this.reconPack=packet;this.buffers=[];}BinaryReconstructor.prototype.takeBinaryData=function(binData){this.buffers.push(binData);if(this.buffers.length===this.reconPack.attachments){var packet=binary.reconstructPacket(this.reconPack,this.buffers);this.finishedReconstruction();return packet;}return null;};BinaryReconstructor.prototype.finishedReconstruction=function(){this.reconPack=null;this.buffers=[];};function error(msg){return{type:exports.ERROR,data:'parser error: '+msg};}},3843:function(module,__unusedexports,__webpack_require__){"use strict";const base32Encode=__webpack_require__(3105);const NanoDate=__webpack_require__(9434);const{Key}=__webpack_require__(759);const crypto=__webpack_require__(318);const PeerId=__webpack_require__(1832);const multihash=__webpack_require__(8757);const debug=__webpack_require__(746);const log=debug('jsipns');log.error=debug('jsipns:error');const ipnsEntryProto=__webpack_require__(7538);const{parseRFC3339}=__webpack_require__(968);const ERRORS=__webpack_require__(7388);const ID_MULTIHASH_CODE=multihash.names.id;const namespace='/ipns/';const create=(privateKey,value,seq,lifetime,callback)=>{const isoValidity=new NanoDate(Date.now()+Number(lifetime)).toString();const validityType=ipnsEntryProto.ValidityType.EOL;_create(privateKey,value,seq,isoValidity,validityType,callback);};const createWithExpiration=(privateKey,value,seq,expiration,callback)=>{const validityType=ipnsEntryProto.ValidityType.EOL;_create(privateKey,value,seq,expiration,validityType,callback);};const _create=(privateKey,value,seq,isoValidity,validityType,callback)=>{sign(privateKey,value,validityType,isoValidity,(error,signature)=>{if(error){log.error('record signature creation failed');return callback(Object.assign(new Error('record signature verification failed'),{code:ERRORS.ERR_SIGNATURE_CREATION}));}const entry={value:value,signature:signature,validityType:validityType,validity:isoValidity,sequence:seq};log(`ipns entry for ${value} created`);return callback(null,entry);});};const validate=(publicKey,entry,callback)=>{const{value,validityType,validity}=entry;const dataForSignature=ipnsEntryDataForSig(value,validityType,validity);publicKey.verify(dataForSignature,entry.signature,(err,isValid)=>{if(err||!isValid){log.error('record signature verification failed');return callback(Object.assign(new Error('record signature verification failed'),{code:ERRORS.ERR_SIGNATURE_VERIFICATION}));}if(validityType===ipnsEntryProto.ValidityType.EOL){let validityDate;try{validityDate=parseRFC3339(validity.toString());}catch(e){log.error('unrecognized validity format (not an rfc3339 format)');return callback(Object.assign(new Error('unrecognized validity format (not an rfc3339 format)'),{code:ERRORS.ERR_UNRECOGNIZED_FORMAT}));}if(validityDate<Date.now()){log.error('record has expired');return callback(Object.assign(new Error('record has expired'),{code:ERRORS.ERR_IPNS_EXPIRED_RECORD}));}}else if(validityType){log.error('unrecognized validity type');return callback(Object.assign(new Error('unrecognized validity type'),{code:ERRORS.ERR_UNRECOGNIZED_VALIDITY}));}log(`ipns entry for ${value} is valid`);return callback(null,null);});};const embedPublicKey=(publicKey,entry,callback)=>{if(!publicKey||!publicKey.bytes||!entry){const error='one or more of the provided parameters are not defined';log.error(error);return callback(Object.assign(new Error(error),{code:ERRORS.ERR_UNDEFINED_PARAMETER}));}PeerId.createFromPubKey(publicKey.bytes,(err,peerId)=>{if(err){log.error(err);return callback(Object.assign(new Error(err),{code:ERRORS.ERR_PEER_ID_FROM_PUBLIC_KEY}));}let extractedPublicKey;try{extractedPublicKey=extractPublicKeyFromId(peerId);}catch(err){log.error(err);return callback(Object.assign(new Error(err),{code:ERRORS.ERR_PUBLIC_KEY_FROM_ID}));}if(extractedPublicKey){return callback(null,null);}try{entry.pubKey=crypto.keys.marshalPublicKey(publicKey);}catch(err){log.error(err);return callback(err);}callback(null,entry);});};const extractPublicKey=(peerId,entry,callback)=>{if(!entry||!peerId){const error='one or more of the provided parameters are not defined';log.error(error);return callback(Object.assign(new Error(error),{code:ERRORS.ERR_UNDEFINED_PARAMETER}));}if(entry.pubKey){let pubKey;try{pubKey=crypto.keys.unmarshalPublicKey(entry.pubKey);}catch(err){log.error(err);return callback(err);}return callback(null,pubKey);}callback(null,peerId.pubKey);};const rawStdEncoding=key=>base32Encode(key,'RFC4648',{padding:false});const getLocalKey=key=>new Key(`/ipns/${rawStdEncoding(key)}`);const getIdKeys=pid=>{const pkBuffer=Buffer.from('/pk/');const ipnsBuffer=Buffer.from('/ipns/');return{routingPubKey:new Key(Buffer.concat([pkBuffer,pid])),pkKey:new Key(rawStdEncoding(Buffer.concat([pkBuffer,pid]))),routingKey:new Key(Buffer.concat([ipnsBuffer,pid])),ipnsKey:new Key(rawStdEncoding(Buffer.concat([ipnsBuffer,pid])))};};const sign=(privateKey,value,validityType,validity,callback)=>{const dataForSignature=ipnsEntryDataForSig(value,validityType,validity);privateKey.sign(dataForSignature,(err,signature)=>{if(err){return callback(err);}return callback(null,signature);});};const getValidityType=validityType=>{if(validityType.toString()==='0'){return'EOL';}else{const error=`unrecognized validity type ${validityType.toString()}`;log.error(error);throw Object.assign(new Error(error),{code:ERRORS.ERR_UNRECOGNIZED_VALIDITY});}};const ipnsEntryDataForSig=(value,validityType,validity)=>{const valueBuffer=Buffer.from(value);const validityTypeBuffer=Buffer.from(getValidityType(validityType));const validityBuffer=Buffer.from(validity);return Buffer.concat([valueBuffer,validityBuffer,validityTypeBuffer]);};const extractPublicKeyFromId=peerId=>{const decodedId=multihash.decode(peerId.id);if(decodedId.code!==ID_MULTIHASH_CODE){return null;}return crypto.keys.unmarshalPublicKey(decodedId.digest);};const marshal=ipnsEntryProto.encode;const unmarshal=ipnsEntryProto.decode;const validator={validate:(marshalledData,key,callback)=>{const receivedEntry=unmarshal(marshalledData);const bufferId=key.slice('/ipns/'.length);let peerId;try{peerId=PeerId.createFromBytes(bufferId);}catch(err){return callback(err);}extractPublicKey(peerId,receivedEntry,(err,pubKey)=>{if(err){return callback(err);}validate(pubKey,receivedEntry,err=>{if(err){return callback(err);}callback(null,true);});});},select:(dataA,dataB,callback)=>{const entryA=unmarshal(dataA);const entryB=unmarshal(dataB);const index=entryA.sequence>entryB.sequence?0:1;if(typeof callback!=='function'){return index;}callback(null,index);}};module.exports={create,createWithExpiration,validate,embedPublicKey,extractPublicKey,getLocalKey,getIdKeys,marshal,unmarshal,validator,namespace,namespaceLength:namespace.length};},3850:function(module,exports,__webpack_require__){"use strict";const multiaddr=__webpack_require__(5920);const Id=__webpack_require__(1832);const crypto=__webpack_require__(318);const mafmt=__webpack_require__(7511);function cleanUrlSIO(ma){const protos=ma.protos();const ipProto=protos[0].name;const tcpProto=protos[1].name;const wsProto=protos[2].name;const stringTuples=ma.stringTuples();const tcpPort=stringTuples[1][1];if(tcpProto!=='tcp'||wsProto!=='ws'&&wsProto!=='wss'){throw new Error('invalid multiaddr: '+ma.toString());}let host=stringTuples[0][1];if(ipProto==='ip6'){host='['+host+']';}let proto=wsProto==='wss'?'https':'http';let port=wsProto==='ws'&&tcpPort===80||wsProto==='wss'&&tcpPort===443?'':tcpPort;return proto+'://'+host+(port?':'+port:'');}const types={string:v=>typeof v==='string',object:v=>typeof v==='object',multiaddr:v=>{if(!types.string(v))return;try{multiaddr(v);return true;}catch(e){return false;}},function:v=>typeof v==='function'};function validate(def,data){if(!Array.isArray(data))throw new Error('Data is not an array');def.forEach((type,index)=>{if(!types[type]){console.error('Type %s does not exist',type);throw new Error('Type '+type+' does not exist');}if(!types[type](data[index]))throw new Error('Data at index '+index+' is invalid for type '+type);});}function Protocol(log){if(!log)log=()=>{};const self=this;self.requests={};self.addRequest=(name,def,handle)=>{self.requests[name]={def,handle};};self.handleSocket=socket=>{socket.r={};Object.keys(self.requests).forEach(request=>{const r=self.requests[request];socket.on(request,function(){const data=[...arguments];try{validate(r.def,data);data.unshift(socket);r.handle.apply(null,data);}catch(e){log(e);log('peer %s has sent invalid data for request %s',socket.id||'<server>',request,data);}});});};}function getIdAndValidate(pub,id,cb){Id.createFromPubKey(Buffer.from(pub,'hex'),(err,_id)=>{if(err){return cb(new Error('Crypto error'));}if(_id.toB58String()!==id){return cb(new Error('Id is not matching'));}return cb(null,crypto.keys.unmarshalPublicKey(Buffer.from(pub,'hex')));});}exports=module.exports;exports.cleanUrlSIO=cleanUrlSIO;exports.validate=validate;exports.Protocol=Protocol;exports.getIdAndValidate=getIdAndValidate;exports.validateMa=ma=>mafmt.WebSocketStar.matches(multiaddr(ma));},3853:function(module){module.exports=require("http");},3854:function(module,__unusedexports,__webpack_require__){"use strict";const Decoder=__webpack_require__(8012);const utils=__webpack_require__(6489);class Diagnose extends Decoder{createTag(tagNumber,value){return`${tagNumber}(${value})`;}createInt(val){return super.createInt(val).toString();}createInt32(f,g){return super.createInt32(f,g).toString();}createInt64(f1,f2,g1,g2){return super.createInt64(f1,f2,g1,g2).toString();}createInt32Neg(f,g){return super.createInt32Neg(f,g).toString();}createInt64Neg(f1,f2,g1,g2){return super.createInt64Neg(f1,f2,g1,g2).toString();}createTrue(){return'true';}createFalse(){return'false';}createFloat(val){const fl=super.createFloat(val);if(utils.isNegativeZero(val)){return'-0_1';}return`${fl}_1`;}createFloatSingle(a,b,c,d){const fl=super.createFloatSingle(a,b,c,d);return`${fl}_2`;}createFloatDouble(a,b,c,d,e,f,g,h){const fl=super.createFloatDouble(a,b,c,d,e,f,g,h);return`${fl}_3`;}createByteString(raw,len){const val=raw.join(', ');if(len===-1){return`(_ ${val})`;}return`h'${val}`;}createByteStringFromHeap(start,end){const val=Buffer.from(super.createByteStringFromHeap(start,end)).toString('hex');return`h'${val}'`;}createInfinity(){return'Infinity_1';}createInfinityNeg(){return'-Infinity_1';}createNaN(){return'NaN_1';}createNaNNeg(){return'-NaN_1';}createNull(){return'null';}createUndefined(){return'undefined';}createSimpleUnassigned(val){return`simple(${val})`;}createArray(arr,len){const val=super.createArray(arr,len);if(len===-1){return`[_ ${val.join(', ')}]`;}return`[${val.join(', ')}]`;}createMap(map,len){const val=super.createMap(map);const list=Array.from(val.keys()).reduce(collectObject(val),'');if(len===-1){return`{_ ${list}}`;}return`{${list}}`;}createObject(obj,len){const val=super.createObject(obj);const map=Object.keys(val).reduce(collectObject(val),'');if(len===-1){return`{_ ${map}}`;}return`{${map}}`;}createUtf8String(raw,len){const val=raw.join(', ');if(len===-1){return`(_ ${val})`;}return`"${val}"`;}createUtf8StringFromHeap(start,end){const val=Buffer.from(super.createUtf8StringFromHeap(start,end)).toString('utf8');return`"${val}"`;}static diagnose(input,enc){if(typeof input==='string'){input=Buffer.from(input,enc||'hex');}const dec=new Diagnose();return dec.decodeFirst(input);}}module.exports=Diagnose;function collectObject(val){return(acc,key)=>{if(acc){return`${acc}, ${key}: ${val[key]}`;}return`${key}: ${val[key]}`;};}},3857:function(__unusedmodule,exports,__webpack_require__){"use strict";const inherits=__webpack_require__(92);function Reporter(options){this._reporterState={obj:null,path:[],options:options||{},errors:[]};}exports.Reporter=Reporter;Reporter.prototype.isError=function isError(obj){return obj instanceof ReporterError;};Reporter.prototype.save=function save(){const state=this._reporterState;return{obj:state.obj,pathLen:state.path.length};};Reporter.prototype.restore=function restore(data){const state=this._reporterState;state.obj=data.obj;state.path=state.path.slice(0,data.pathLen);};Reporter.prototype.enterKey=function enterKey(key){return this._reporterState.path.push(key);};Reporter.prototype.exitKey=function exitKey(index){const state=this._reporterState;state.path=state.path.slice(0,index-1);};Reporter.prototype.leaveKey=function leaveKey(index,key,value){const state=this._reporterState;this.exitKey(index);if(state.obj!==null)state.obj[key]=value;};Reporter.prototype.path=function path(){return this._reporterState.path.join('/');};Reporter.prototype.enterObject=function enterObject(){const state=this._reporterState;const prev=state.obj;state.obj={};return prev;};Reporter.prototype.leaveObject=function leaveObject(prev){const state=this._reporterState;const now=state.obj;state.obj=prev;return now;};Reporter.prototype.error=function error(msg){let err;const state=this._reporterState;const inherited=msg instanceof ReporterError;if(inherited){err=msg;}else{err=new ReporterError(state.path.map(function(elem){return'['+JSON.stringify(elem)+']';}).join(''),msg.message||msg,msg.stack);}if(!state.options.partial)throw err;if(!inherited)state.errors.push(err);return err;};Reporter.prototype.wrapResult=function wrapResult(result){const state=this._reporterState;if(!state.options.partial)return result;return{result:this.isError(result)?null:result,errors:state.errors};};function ReporterError(path,msg){this.path=path;this.rethrow(msg);}inherits(ReporterError,Error);ReporterError.prototype.rethrow=function rethrow(msg){this.message=msg+' at: '+(this.path||'(shallow)');if(Error.captureStackTrace)Error.captureStackTrace(this,ReporterError);if(!this.stack){try{throw new Error(this.message);}catch(e){this.stack=e.stack;}}return this;};},3861:function(module,__unusedexports,__webpack_require__){"use strict";module.exports={keys:__webpack_require__(5507),once:__webpack_require__(751),values:__webpack_require__(5130),count:__webpack_require__(7496),infinite:__webpack_require__(9509),empty:__webpack_require__(7086),error:__webpack_require__(5619)};},3864:function(module,__unusedexports,__webpack_require__){"use strict";var BN=__webpack_require__(5584);var elliptic=__webpack_require__(3459);var utils=elliptic.utils;var getNAF=utils.getNAF;var getJSF=utils.getJSF;var assert=utils.assert;function BaseCurve(type,conf){this.type=type;this.p=new BN(conf.p,16);this.red=conf.prime?BN.red(conf.prime):BN.mont(this.p);this.zero=new BN(0).toRed(this.red);this.one=new BN(1).toRed(this.red);this.two=new BN(2).toRed(this.red);this.n=conf.n&&new BN(conf.n,16);this.g=conf.g&&this.pointFromJSON(conf.g,conf.gRed);this._wnafT1=new Array(4);this._wnafT2=new Array(4);this._wnafT3=new Array(4);this._wnafT4=new Array(4);var adjustCount=this.n&&this.p.div(this.n);if(!adjustCount||adjustCount.cmpn(100)>0){this.redN=null;}else{this._maxwellTrick=true;this.redN=this.n.toRed(this.red);}}module.exports=BaseCurve;BaseCurve.prototype.point=function point(){throw new Error('Not implemented');};BaseCurve.prototype.validate=function validate(){throw new Error('Not implemented');};BaseCurve.prototype._fixedNafMul=function _fixedNafMul(p,k){assert(p.precomputed);var doubles=p._getDoubles();var naf=getNAF(k,1);var I=(1<<doubles.step+1)-(doubles.step%2===0?2:1);I/=3;var repr=[];for(var j=0;j<naf.length;j+=doubles.step){var nafW=0;for(var k=j+doubles.step-1;k>=j;k--)nafW=(nafW<<1)+naf[k];repr.push(nafW);}var a=this.jpoint(null,null,null);var b=this.jpoint(null,null,null);for(var i=I;i>0;i--){for(var j=0;j<repr.length;j++){var nafW=repr[j];if(nafW===i)b=b.mixedAdd(doubles.points[j]);else if(nafW===-i)b=b.mixedAdd(doubles.points[j].neg());}a=a.add(b);}return a.toP();};BaseCurve.prototype._wnafMul=function _wnafMul(p,k){var w=4;var nafPoints=p._getNAFPoints(w);w=nafPoints.wnd;var wnd=nafPoints.points;var naf=getNAF(k,w);var acc=this.jpoint(null,null,null);for(var i=naf.length-1;i>=0;i--){for(var k=0;i>=0&&naf[i]===0;i--)k++;if(i>=0)k++;acc=acc.dblp(k);if(i<0)break;var z=naf[i];assert(z!==0);if(p.type==='affine'){if(z>0)acc=acc.mixedAdd(wnd[z-1>>1]);else acc=acc.mixedAdd(wnd[-z-1>>1].neg());}else{if(z>0)acc=acc.add(wnd[z-1>>1]);else acc=acc.add(wnd[-z-1>>1].neg());}}return p.type==='affine'?acc.toP():acc;};BaseCurve.prototype._wnafMulAdd=function _wnafMulAdd(defW,points,coeffs,len,jacobianResult){var wndWidth=this._wnafT1;var wnd=this._wnafT2;var naf=this._wnafT3;var max=0;for(var i=0;i<len;i++){var p=points[i];var nafPoints=p._getNAFPoints(defW);wndWidth[i]=nafPoints.wnd;wnd[i]=nafPoints.points;}for(var i=len-1;i>=1;i-=2){var a=i-1;var b=i;if(wndWidth[a]!==1||wndWidth[b]!==1){naf[a]=getNAF(coeffs[a],wndWidth[a]);naf[b]=getNAF(coeffs[b],wndWidth[b]);max=Math.max(naf[a].length,max);max=Math.max(naf[b].length,max);continue;}var comb=[points[a],null,null,points[b]];if(points[a].y.cmp(points[b].y)===0){comb[1]=points[a].add(points[b]);comb[2]=points[a].toJ().mixedAdd(points[b].neg());}else if(points[a].y.cmp(points[b].y.redNeg())===0){comb[1]=points[a].toJ().mixedAdd(points[b]);comb[2]=points[a].add(points[b].neg());}else{comb[1]=points[a].toJ().mixedAdd(points[b]);comb[2]=points[a].toJ().mixedAdd(points[b].neg());}var index=[-3,-1,-5,-7,0,7,5,1,3];var jsf=getJSF(coeffs[a],coeffs[b]);max=Math.max(jsf[0].length,max);naf[a]=new Array(max);naf[b]=new Array(max);for(var j=0;j<max;j++){var ja=jsf[0][j]|0;var jb=jsf[1][j]|0;naf[a][j]=index[(ja+1)*3+(jb+1)];naf[b][j]=0;wnd[a]=comb;}}var acc=this.jpoint(null,null,null);var tmp=this._wnafT4;for(var i=max;i>=0;i--){var k=0;while(i>=0){var zero=true;for(var j=0;j<len;j++){tmp[j]=naf[j][i]|0;if(tmp[j]!==0)zero=false;}if(!zero)break;k++;i--;}if(i>=0)k++;acc=acc.dblp(k);if(i<0)break;for(var j=0;j<len;j++){var z=tmp[j];var p;if(z===0)continue;else if(z>0)p=wnd[j][z-1>>1];else if(z<0)p=wnd[j][-z-1>>1].neg();if(p.type==='affine')acc=acc.mixedAdd(p);else acc=acc.add(p);}}for(var i=0;i<len;i++)wnd[i]=null;if(jacobianResult)return acc;else return acc.toP();};function BasePoint(curve,type){this.curve=curve;this.type=type;this.precomputed=null;}BaseCurve.BasePoint=BasePoint;BasePoint.prototype.eq=function eq(){throw new Error('Not implemented');};BasePoint.prototype.validate=function validate(){return this.curve.validate(this);};BaseCurve.prototype.decodePoint=function decodePoint(bytes,enc){bytes=utils.toArray(bytes,enc);var len=this.p.byteLength();if((bytes[0]===0x04||bytes[0]===0x06||bytes[0]===0x07)&&bytes.length-1===2*len){if(bytes[0]===0x06)assert(bytes[bytes.length-1]%2===0);else if(bytes[0]===0x07)assert(bytes[bytes.length-1]%2===1);var res=this.point(bytes.slice(1,1+len),bytes.slice(1+len,1+2*len));return res;}else if((bytes[0]===0x02||bytes[0]===0x03)&&bytes.length-1===len){return this.pointFromX(bytes.slice(1,1+len),bytes[0]===0x03);}throw new Error('Unknown point format');};BasePoint.prototype.encodeCompressed=function encodeCompressed(enc){return this.encode(enc,true);};BasePoint.prototype._encode=function _encode(compact){var len=this.curve.p.byteLength();var x=this.getX().toArray('be',len);if(compact)return[this.getY().isEven()?0x02:0x03].concat(x);return[0x04].concat(x,this.getY().toArray('be',len));};BasePoint.prototype.encode=function encode(enc,compact){return utils.encode(this._encode(compact),enc);};BasePoint.prototype.precompute=function precompute(power){if(this.precomputed)return this;var precomputed={doubles:null,naf:null,beta:null};precomputed.naf=this._getNAFPoints(8);precomputed.doubles=this._getDoubles(4,power);precomputed.beta=this._getBeta();this.precomputed=precomputed;return this;};BasePoint.prototype._hasDoubles=function _hasDoubles(k){if(!this.precomputed)return false;var doubles=this.precomputed.doubles;if(!doubles)return false;return doubles.points.length>=Math.ceil((k.bitLength()+1)/doubles.step);};BasePoint.prototype._getDoubles=function _getDoubles(step,power){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;var doubles=[this];var acc=this;for(var i=0;i<power;i+=step){for(var j=0;j<step;j++)acc=acc.dbl();doubles.push(acc);}return{step:step,points:doubles};};BasePoint.prototype._getNAFPoints=function _getNAFPoints(wnd){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;var res=[this];var max=(1<<wnd)-1;var dbl=max===1?null:this.dbl();for(var i=1;i<max;i++)res[i]=res[i-1].add(dbl);return{wnd:wnd,points:res};};BasePoint.prototype._getBeta=function _getBeta(){return null;};BasePoint.prototype.dblp=function dblp(k){var r=this;for(var i=0;i<k;i++)r=r.dbl();return r;};},3878:function(module){var MAX_SAFE_INTEGER=9007199254740991;var reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(value,length){var type=typeof value;length=length==null?MAX_SAFE_INTEGER:length;return!!length&&(type=='number'||type!='symbol'&&reIsUint.test(value))&&value>-1&&value%1==0&&value<length;}module.exports=isIndex;},3894:function(module){module.exports=function Catch(onError){onError=onError||function noop(){};var errd;return function sink(read){return function source(abort,cb){read(abort,function onNext(end,data){if(errd)return cb(true);if(end&&end!==true){var _end=onError(end);if(_end===false)return cb(end);if(_end&&_end!==true){errd=true;return cb(null,_end);}return cb(true);}cb(end,data);});};};};},3897:function(__unusedmodule,exports){exports.BITS=32;exports.GROUPS=4;exports.RE_ADDRESS=/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/g;exports.RE_SUBNET_STRING=/\/\d{1,2}$/;},3901:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _reject=__webpack_require__(8422);var _reject2=_interopRequireDefault(_reject);var _doParallel=__webpack_require__(5847);var _doParallel2=_interopRequireDefault(_doParallel);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}exports.default=(0,_doParallel2.default)(_reject2.default);module.exports=exports['default'];},3903:function(module,__unusedexports,__webpack_require__){"use strict";var Buffer=__webpack_require__(1173).Buffer;var bomHandling=__webpack_require__(5827),iconv=module.exports;iconv.encodings=null;iconv.defaultCharUnicode='';iconv.defaultCharSingleByte='?';iconv.encode=function encode(str,encoding,options){str=""+(str||"");var encoder=iconv.getEncoder(encoding,options);var res=encoder.write(str);var trail=encoder.end();return trail&&trail.length>0?Buffer.concat([res,trail]):res;};iconv.decode=function decode(buf,encoding,options){if(typeof buf==='string'){if(!iconv.skipDecodeWarning){console.error('Iconv-lite warning: decode()-ing strings is deprecated. Refer to https://github.com/ashtuchkin/iconv-lite/wiki/Use-Buffers-when-decoding');iconv.skipDecodeWarning=true;}buf=Buffer.from(""+(buf||""),"binary");}var decoder=iconv.getDecoder(encoding,options);var res=decoder.write(buf);var trail=decoder.end();return trail?res+trail:res;};iconv.encodingExists=function encodingExists(enc){try{iconv.getCodec(enc);return true;}catch(e){return false;}};iconv.toEncoding=iconv.encode;iconv.fromEncoding=iconv.decode;iconv._codecDataCache={};iconv.getCodec=function getCodec(encoding){if(!iconv.encodings)iconv.encodings=__webpack_require__(192);var enc=iconv._canonicalizeEncoding(encoding);var codecOptions={};while(true){var codec=iconv._codecDataCache[enc];if(codec)return codec;var codecDef=iconv.encodings[enc];switch(typeof codecDef){case"string":enc=codecDef;break;case"object":for(var key in codecDef)codecOptions[key]=codecDef[key];if(!codecOptions.encodingName)codecOptions.encodingName=enc;enc=codecDef.type;break;case"function":if(!codecOptions.encodingName)codecOptions.encodingName=enc;codec=new codecDef(codecOptions,iconv);iconv._codecDataCache[codecOptions.encodingName]=codec;return codec;default:throw new Error("Encoding not recognized: '"+encoding+"' (searched as: '"+enc+"')");}}};iconv._canonicalizeEncoding=function(encoding){return(''+encoding).toLowerCase().replace(/:\d{4}$|[^0-9a-z]/g,"");};iconv.getEncoder=function getEncoder(encoding,options){var codec=iconv.getCodec(encoding),encoder=new codec.encoder(options,codec);if(codec.bomAware&&options&&options.addBOM)encoder=new bomHandling.PrependBOM(encoder,options);return encoder;};iconv.getDecoder=function getDecoder(encoding,options){var codec=iconv.getCodec(encoding),decoder=new codec.decoder(options,codec);if(codec.bomAware&&!(options&&options.stripBOM===false))decoder=new bomHandling.StripBOM(decoder,options);return decoder;};var nodeVer=typeof process!=='undefined'&&process.versions&&process.versions.node;if(nodeVer){var nodeVerArr=nodeVer.split(".").map(Number);if(nodeVerArr[0]>0||nodeVerArr[1]>=10){__webpack_require__(4523)(iconv);}__webpack_require__(3672)(iconv);}if(false){}},3905:function(module,__unusedexports,__webpack_require__){"use strict";const lp=__webpack_require__(8585);const Pushable=__webpack_require__(5995);const pull=__webpack_require__(2885);const setImmediate=__webpack_require__(7368);const EventEmitter=__webpack_require__(4859);const rpc=__webpack_require__(9946).rpc.RPC;class Peer extends EventEmitter{constructor(info){super();this.info=info;this.conn=null;this.topics=new Set();this.stream=null;this._references=0;}get isConnected(){return Boolean(this.conn);}get isWritable(){return Boolean(this.stream);}write(msg){if(!this.isWritable){const id=this.info.id.toB58String();throw new Error('No writable connection to '+id);}this.stream.push(msg);}attachConnection(conn){this.conn=conn;this.stream=new Pushable();pull(this.stream,lp.encode(),conn,pull.onEnd(()=>{this.conn=null;this.stream=null;this.emit('close');}));this.emit('connection');}_sendRawSubscriptions(topics,subscribe){if(topics.size===0){return;}const subs=[];topics.forEach(topic=>{subs.push({subscribe:subscribe,topicCID:topic});});this.write(rpc.encode({subscriptions:subs}));}sendSubscriptions(topics){this._sendRawSubscriptions(topics,true);}sendUnsubscriptions(topics){this._sendRawSubscriptions(topics,false);}sendMessages(msgs){this.write(rpc.encode({msgs:msgs}));}updateSubscriptions(changes){changes.forEach(subopt=>{if(subopt.subscribe){this.topics.add(subopt.topicCID);}else{this.topics.delete(subopt.topicCID);}});}close(callback){this._references=1;if(this.stream){this.stream.end();}setImmediate(()=>{this.conn=null;this.stream=null;this.emit('close');callback();});}}module.exports=Peer;},3910:function(module,__unusedexports,__webpack_require__){const bscript=__webpack_require__(5099);const OPS=__webpack_require__(9710);function check(script){const buffer=bscript.compile(script);return buffer.length===34&&buffer[0]===OPS.OP_0&&buffer[1]===0x20;}check.toJSON=function(){return'Witness scriptHash output';};module.exports={check};},3911:function(module,__unusedexports,__webpack_require__){"use strict";const Peer=__webpack_require__(9265);const os=__webpack_require__(4316);const debug=__webpack_require__(746);const log=debug('libp2p:mdns');const Multiaddr=__webpack_require__(5920);const Id=__webpack_require__(1832);const TCP=__webpack_require__(2301);const tcp=new TCP();module.exports={queryLAN:function(mdns,serviceTag,interval){const query=()=>{log('query',serviceTag);mdns.query({questions:[{name:serviceTag,type:'PTR'}]});};query();return setInterval(query,interval);},gotResponse:function(rsp,peerInfo,serviceTag,callback){if(!rsp.answers){return;}const answers={ptr:{},srv:{},txt:{},a:[],aaaa:[]};rsp.answers.forEach(answer=>{switch(answer.type){case'PTR':answers.ptr=answer;break;case'SRV':answers.srv=answer;break;case'TXT':answers.txt=answer;break;case'A':answers.a.push(answer);break;case'AAAA':answers.aaaa.push(answer);break;default:break;}});if(answers.ptr.name!==serviceTag){return;}const b58Id=answers.txt.data[0].toString();const port=answers.srv.data.port;const multiaddrs=[];answers.a.forEach(a=>{multiaddrs.push(new Multiaddr('/ip4/'+a.data+'/tcp/'+port));});answers.aaaa.forEach(a=>{multiaddrs.push(new Multiaddr('/ip6/'+a.data+'/tcp/'+port));});if(peerInfo.id.toB58String()===b58Id){return;}log('peer found -',b58Id);const peerId=Id.createFromB58String(b58Id);Peer.create(peerId,(err,peerFound)=>{if(err){return log('Error creating PeerInfo from new found peer',err);}multiaddrs.forEach(addr=>peerFound.multiaddrs.add(addr));callback(null,peerFound);});},gotQuery:function(qry,mdns,peerInfo,serviceTag,broadcast){if(!broadcast){return;}const multiaddrs=tcp.filter(peerInfo.multiaddrs.toArray());if(multiaddrs.length===0){return;}if(qry.questions[0]&&qry.questions[0].name===serviceTag){const answers=[];answers.push({name:serviceTag,type:'PTR',class:'IN',ttl:120,data:peerInfo.id.toB58String()+'.'+serviceTag});const port=multiaddrs[0].toString().split('/')[4];answers.push({name:peerInfo.id.toB58String()+'.'+serviceTag,type:'SRV',class:'IN',ttl:120,data:{priority:10,weight:1,port:port,target:os.hostname()}});answers.push({name:peerInfo.id.toB58String()+'.'+serviceTag,type:'TXT',class:'IN',ttl:120,data:peerInfo.id.toB58String()});multiaddrs.forEach(ma=>{if(ma.protoNames()[0]==='ip4'){answers.push({name:os.hostname(),type:'A',class:'IN',ttl:120,data:ma.toString().split('/')[2]});return;}if(ma.protoNames()[0]==='ip6'){answers.push({name:os.hostname(),type:'AAAA',class:'IN',ttl:120,data:ma.toString().split('/')[2]});}});log('responding to query');mdns.respond(answers);}}};},3915:function(module,__unusedexports,__webpack_require__){"use strict";const SparseArray=__webpack_require__(5319);const wrapHash=__webpack_require__(6367);const defaultOptions={bits:8};class Bucket{constructor(options,parent,posAtParent){this._options=Object.assign({},defaultOptions,options);this._popCount=0;this._parent=parent;this._posAtParent=posAtParent;if(!this._options.hashFn){throw new Error('please define an options.hashFn');}if(!this._options.hash){this._options.hash=wrapHash(this._options.hashFn);}this._children=new SparseArray();}static isBucket(o){return o instanceof Bucket;}async put(key,value){const place=await this._findNewBucketAndPos(key);await place.bucket._putAt(place,key,value);}async get(key){const child=await this._findChild(key);if(child){return child.value;}}async del(key){const place=await this._findPlace(key);const child=place.bucket._at(place.pos);if(child&&child.key===key){place.bucket._delAt(place.pos);}}leafCount(){return this._children.compactArray().reduce((acc,child)=>{if(child instanceof Bucket){return acc+child.leafCount();}return acc+1;},0);}childrenCount(){return this._children.length;}onlyChild(){return this._children.get(0);}*eachLeafSeries(){const children=this._children.compactArray();for(const child of children){if(child instanceof Bucket){for(const c2 of child.eachLeafSeries()){yield c2;}}else{yield child;}}}serialize(map,reduce){return reduce(this._children.reduce((acc,child,index)=>{if(child){if(child instanceof Bucket){acc.push(child.serialize(map,reduce));}else{acc.push(map(child,index));}}return acc;},[]));}async asyncTransform(asyncMap,asyncReduce){return asyncTransformBucket(this,asyncMap,asyncReduce);}toJSON(){return this.serialize(mapNode,reduceNodes);}prettyPrint(){return JSON.stringify(this.toJSON(),null,'  ');}tableSize(){return Math.pow(2,this._options.bits);}async _findChild(key){const result=await this._findPlace(key);const child=result.bucket._at(result.pos);if(child&&child.key===key){return child;}}async _findPlace(key){const hashValue=this._options.hash(key);const index=await hashValue.take(this._options.bits);const child=this._children.get(index);if(child instanceof Bucket){return child._findPlace(hashValue);}return{bucket:this,pos:index,hash:hashValue};}async _findNewBucketAndPos(key){const place=await this._findPlace(key);const child=place.bucket._at(place.pos);if(child&&child.key!==key){const bucket=new Bucket(this._options,place.bucket,place.pos);place.bucket._putObjectAt(place.pos,bucket);const newPlace=await bucket._findPlace(child.hash);newPlace.bucket._putAt(newPlace,child.key,child.value);return bucket._findNewBucketAndPos(place.hash);}return place;}_putAt(place,key,value){this._putObjectAt(place.pos,{key:key,value:value,hash:place.hash});}_putObjectAt(pos,object){if(!this._children.get(pos)){this._popCount++;}this._children.set(pos,object);}_delAt(pos){if(this._children.get(pos)){this._popCount--;}this._children.unset(pos);this._level();}_level(){if(this._parent&&this._popCount<=1){if(this._popCount===1){const onlyChild=this._children.find(exists);if(!(onlyChild instanceof Bucket)){const hash=onlyChild.hash;hash.untake(this._options.bits);const place={pos:this._posAtParent,hash:hash};this._parent._putAt(place,onlyChild.key,onlyChild.value);}}else{this._parent._delAt(this._posAtParent);}}}_at(index){return this._children.get(index);}}function exists(o){return Boolean(o);}function mapNode(node,index){return node.key;}function reduceNodes(nodes){return nodes;}async function asyncTransformBucket(bucket,asyncMap,asyncReduce){const output=[];for(const child of bucket._children.compactArray()){if(child instanceof Bucket){await asyncTransformBucket(child,asyncMap,asyncReduce);}else{const mappedChildren=await asyncMap(child);output.push({bitField:bucket._children.bitField(),children:mappedChildren});}return asyncReduce(output);}}module.exports=Bucket;},3918:function(module){module.exports=dist;function dist(a,b){if(a.length!==b.length)throw new Error('Inputs should have the same length');var result=new Buffer(a.length);for(var i=0;i<a.length;i++)result[i]=a[i]^b[i];return result;}dist.compare=function compare(a,b){if(a.length!==b.length)throw new Error('Inputs should have the same length');for(var i=0;i<a.length;i++){if(a[i]===b[i])continue;return a[i]<b[i]?-1:1;}return 0;};dist.gt=function gt(a,b){return dist.compare(a,b)===1;};dist.lt=function lt(a,b){return dist.compare(a,b)===-1;};dist.eq=function eq(a,b){return dist.compare(a,b)===0;};},3925:function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=once;function once(fn){return function(){if(fn===null)return;var callFn=fn;fn=null;callFn.apply(this,arguments);};}module.exports=exports["default"];},3930:function(module){module.exports=require("assert");},3965:function(module,__unusedexports,__webpack_require__){var r;module.exports=function rand(len){if(!r)r=new Rand(null);return r.generate(len);};function Rand(rand){this.rand=rand;}module.exports.Rand=Rand;Rand.prototype.generate=function generate(len){return this._rand(len);};if(typeof window==='object'){if(window.crypto&&window.crypto.getRandomValues){Rand.prototype._rand=function _rand(n){var arr=new Uint8Array(n);window.crypto.getRandomValues(arr);return arr;};}else if(window.msCrypto&&window.msCrypto.getRandomValues){Rand.prototype._rand=function _rand(n){var arr=new Uint8Array(n);window.msCrypto.getRandomValues(arr);return arr;};}else{Rand.prototype._rand=function(){throw new Error('Not implemented yet');};}}else{try{var crypto=__webpack_require__(2984);Rand.prototype._rand=function _rand(n){return crypto.randomBytes(n);};}catch(e){Rand.prototype._rand=function _rand(n){var res=new Uint8Array(n);for(var i=0;i<res.length;i++)res[i]=this.rand.getByte();return res;};}}},3967:function(module){"use strict";class Tagged{constructor(tag,value,err){this.tag=tag;this.value=value;this.err=err;if(typeof this.tag!=='number'){throw new Error('Invalid tag type ('+typeof this.tag+')');}if(this.tag<0||(this.tag|0)!==this.tag){throw new Error('Tag must be a positive integer: '+this.tag);}}toString(){return`${this.tag}(${JSON.stringify(this.value)})`;}encodeCBOR(gen){gen._pushTag(this.tag);return gen.pushAny(this.value);}convert(converters){var er,f;f=converters!=null?converters[this.tag]:void 0;if(typeof f!=='function'){f=Tagged['_tag'+this.tag];if(typeof f!=='function'){return this;}}try{return f.call(Tagged,this.value);}catch(error){er=error;this.err=er;return this;}}}module.exports=Tagged;},3979:function(module,__unusedexports,__webpack_require__){var forge=__webpack_require__(7938);__webpack_require__(6321);__webpack_require__(1214);var sha1=module.exports=forge.sha1=forge.sha1||{};forge.md.sha1=forge.md.algorithms.sha1=sha1;sha1.create=function(){if(!_initialized){_init();}var _state=null;var _input=forge.util.createBuffer();var _w=new Array(80);var md={algorithm:'sha1',blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};md.start=function(){md.messageLength=0;md.fullMessageLength=md.messageLength64=[];var int32s=md.messageLengthSize/4;for(var i=0;i<int32s;++i){md.fullMessageLength.push(0);}_input=forge.util.createBuffer();_state={h0:0x67452301,h1:0xEFCDAB89,h2:0x98BADCFE,h3:0x10325476,h4:0xC3D2E1F0};return md;};md.start();md.update=function(msg,encoding){if(encoding==='utf8'){msg=forge.util.encodeUtf8(msg);}var len=msg.length;md.messageLength+=len;len=[len/0x100000000>>>0,len>>>0];for(var i=md.fullMessageLength.length-1;i>=0;--i){md.fullMessageLength[i]+=len[1];len[1]=len[0]+(md.fullMessageLength[i]/0x100000000>>>0);md.fullMessageLength[i]=md.fullMessageLength[i]>>>0;len[0]=len[1]/0x100000000>>>0;}_input.putBytes(msg);_update(_state,_w,_input);if(_input.read>2048||_input.length()===0){_input.compact();}return md;};md.digest=function(){var finalBlock=forge.util.createBuffer();finalBlock.putBytes(_input.bytes());var remaining=md.fullMessageLength[md.fullMessageLength.length-1]+md.messageLengthSize;var overflow=remaining&md.blockLength-1;finalBlock.putBytes(_padding.substr(0,md.blockLength-overflow));var next,carry;var bits=md.fullMessageLength[0]*8;for(var i=0;i<md.fullMessageLength.length-1;++i){next=md.fullMessageLength[i+1]*8;carry=next/0x100000000>>>0;bits+=carry;finalBlock.putInt32(bits>>>0);bits=next>>>0;}finalBlock.putInt32(bits);var s2={h0:_state.h0,h1:_state.h1,h2:_state.h2,h3:_state.h3,h4:_state.h4};_update(s2,_w,finalBlock);var rval=forge.util.createBuffer();rval.putInt32(s2.h0);rval.putInt32(s2.h1);rval.putInt32(s2.h2);rval.putInt32(s2.h3);rval.putInt32(s2.h4);return rval;};return md;};var _padding=null;var _initialized=false;function _init(){_padding=String.fromCharCode(128);_padding+=forge.util.fillString(String.fromCharCode(0x00),64);_initialized=true;}function _update(s,w,bytes){var t,a,b,c,d,e,f,i;var len=bytes.length();while(len>=64){a=s.h0;b=s.h1;c=s.h2;d=s.h3;e=s.h4;for(i=0;i<16;++i){t=bytes.getInt32();w[i]=t;f=d^b&(c^d);t=(a<<5|a>>>27)+f+e+0x5A827999+t;e=d;d=c;c=(b<<30|b>>>2)>>>0;b=a;a=t;}for(;i<20;++i){t=w[i-3]^w[i-8]^w[i-14]^w[i-16];t=t<<1|t>>>31;w[i]=t;f=d^b&(c^d);t=(a<<5|a>>>27)+f+e+0x5A827999+t;e=d;d=c;c=(b<<30|b>>>2)>>>0;b=a;a=t;}for(;i<32;++i){t=w[i-3]^w[i-8]^w[i-14]^w[i-16];t=t<<1|t>>>31;w[i]=t;f=b^c^d;t=(a<<5|a>>>27)+f+e+0x6ED9EBA1+t;e=d;d=c;c=(b<<30|b>>>2)>>>0;b=a;a=t;}for(;i<40;++i){t=w[i-6]^w[i-16]^w[i-28]^w[i-32];t=t<<2|t>>>30;w[i]=t;f=b^c^d;t=(a<<5|a>>>27)+f+e+0x6ED9EBA1+t;e=d;d=c;c=(b<<30|b>>>2)>>>0;b=a;a=t;}for(;i<60;++i){t=w[i-6]^w[i-16]^w[i-28]^w[i-32];t=t<<2|t>>>30;w[i]=t;f=b&c|d&(b^c);t=(a<<5|a>>>27)+f+e+0x8F1BBCDC+t;e=d;d=c;c=(b<<30|b>>>2)>>>0;b=a;a=t;}for(;i<80;++i){t=w[i-6]^w[i-16]^w[i-28]^w[i-32];t=t<<2|t>>>30;w[i]=t;f=b^c^d;t=(a<<5|a>>>27)+f+e+0xCA62C1D6+t;e=d;d=c;c=(b<<30|b>>>2)>>>0;b=a;a=t;}s.h0=s.h0+a|0;s.h1=s.h1+b|0;s.h2=s.h2+c|0;s.h3=s.h3+d|0;s.h4=s.h4+e|0;len-=64;}}},3981:function(module,exports,__webpack_require__){var Stream=__webpack_require__(6886);if(process.env.READABLE_STREAM==='disable'&&Stream){module.exports=Stream;exports=module.exports=Stream.Readable;exports.Readable=Stream.Readable;exports.Writable=Stream.Writable;exports.Duplex=Stream.Duplex;exports.Transform=Stream.Transform;exports.PassThrough=Stream.PassThrough;exports.Stream=Stream;}else{exports=module.exports=__webpack_require__(2843);exports.Stream=Stream||exports;exports.Readable=exports;exports.Writable=__webpack_require__(8909);exports.Duplex=__webpack_require__(1283);exports.Transform=__webpack_require__(6946);exports.PassThrough=__webpack_require__(6797);}},3986:function(module,__unusedexports,__webpack_require__){const EventEmitter=__webpack_require__(4859).EventEmitter;const shortid=__webpack_require__(5299);const{WORKER_REQUEST_READ_LOCK,WORKER_RELEASE_READ_LOCK,MASTER_GRANT_READ_LOCK,WORKER_REQUEST_WRITE_LOCK,WORKER_RELEASE_WRITE_LOCK,MASTER_GRANT_WRITE_LOCK}=__webpack_require__(2713);let cluster;const handleWorkerLockRequest=(emitter,masterEvent,requestType,releaseType,grantType)=>{return(worker,requestEvent)=>{if(requestEvent&&requestEvent.type===requestType){emitter.emit(masterEvent,requestEvent.name,()=>{worker.send({type:grantType,name:requestEvent.name,identifier:requestEvent.identifier});return new Promise(resolve=>{const releaseEventListener=releaseEvent=>{if(releaseEvent&&releaseEvent.type===releaseType&&releaseEvent.identifier===requestEvent.identifier){worker.removeListener('message',releaseEventListener);resolve();}};worker.on('message',releaseEventListener);});});}};};const makeWorkerLockRequest=(name,requestType,grantType,releaseType)=>{return fn=>{const id=shortid.generate();process.send({type:requestType,identifier:id,name});return new Promise((resolve,reject)=>{const listener=event=>{if(event&&event.type===grantType&&event.identifier===id){process.removeListener('message',listener);let error=null;fn().catch(err=>{error=err;}).then(result=>{process.send({type:releaseType,identifier:id,name});if(error){return reject(error);}resolve(result);});}};process.on('message',listener);});};};module.exports=options=>{try{cluster=__webpack_require__(967);if(!Object.keys(cluster).length){return;}}catch(_){return;}if(cluster.isMaster||options.singleProcess){const emitter=new EventEmitter();cluster.on('message',handleWorkerLockRequest(emitter,'requestReadLock',WORKER_REQUEST_READ_LOCK,WORKER_RELEASE_READ_LOCK,MASTER_GRANT_READ_LOCK));cluster.on('message',handleWorkerLockRequest(emitter,'requestWriteLock',WORKER_REQUEST_WRITE_LOCK,WORKER_RELEASE_WRITE_LOCK,MASTER_GRANT_WRITE_LOCK));return emitter;}return{isWorker:true,readLock:(name,options)=>makeWorkerLockRequest(name,WORKER_REQUEST_READ_LOCK,MASTER_GRANT_READ_LOCK,WORKER_RELEASE_READ_LOCK),writeLock:(name,options)=>makeWorkerLockRequest(name,WORKER_REQUEST_WRITE_LOCK,MASTER_GRANT_WRITE_LOCK,WORKER_RELEASE_WRITE_LOCK)};};},3994:function(module){module.exports=read;var MSB=0x80,REST=0x7F;function read(buf,offset){var res=0,offset=offset||0,shift=0,counter=offset,b,l=buf.length;do{if(counter>=l){read.bytes=0;throw new RangeError('Could not decode varint');}b=buf[counter++];res+=shift<28?(b&REST)<<shift:(b&REST)*Math.pow(2,shift);shift+=7;}while(b>=MSB);read.bytes=counter-offset;return res;}},4002:function(module){module.exports=function isHexPrefixed(str){if(typeof str!=='string'){throw new Error("[is-hex-prefixed] value must be type 'string', is currently type "+typeof str+", while checking isHexPrefixed.");}return str.slice(0,2)==='0x';};},4012:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=doUntil;var _doWhilst=__webpack_require__(3191);var _doWhilst2=_interopRequireDefault(_doWhilst);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function doUntil(iteratee,test,callback){(0,_doWhilst2.default)(iteratee,function(){return!test.apply(this,arguments);},callback);}module.exports=exports['default'];},4023:function(module,__unusedexports,__webpack_require__){"use strict";const setImmediate=__webpack_require__(7368);const EE=__webpack_require__(4859).EventEmitter;const Connection=__webpack_require__(378).Connection;const utilsFactory=__webpack_require__(6496);const PeerInfo=__webpack_require__(9265);const proto=__webpack_require__(5546).CircuitRelay;const series=__webpack_require__(7644);const debug=__webpack_require__(746);const log=debug('libp2p:circuit:stop');log.err=debug('libp2p:circuit:error:stop');class Stop extends EE{constructor(swarm){super();this.swarm=swarm;this.utils=utilsFactory(swarm);}handle(msg,sh,callback){callback=callback||(()=>{});series([cb=>this.utils.validateAddrs(msg,sh,proto.Type.STOP,cb),cb=>this.utils.writeResponse(sh,proto.Status.Success,cb)],err=>{if(err){callback();return log(err);}const peerInfo=new PeerInfo(this.utils.peerIdFromId(msg.srcPeer.id));msg.srcPeer.addrs.forEach(addr=>peerInfo.multiaddrs.add(addr));const newConn=new Connection(sh.rest());newConn.setPeerInfo(peerInfo);setImmediate(()=>this.emit('connection',newConn));callback(newConn);});}}module.exports=Stop;},4035:function(__unusedmodule,exports,__webpack_require__){"use strict";const pull=__webpack_require__(2885);const Source=__webpack_require__(7683);const path=__webpack_require__(5897);const os=__webpack_require__(4316);const uuid=__webpack_require__(5292);exports.asyncFilter=function(test){let busy=false;let abortCb;let aborted;return function(read){return function next(abort,cb){if(aborted)return cb(aborted);if(abort){aborted=abort;if(!busy){read(abort,cb);}else{read(abort,()=>{if(busy)abortCb=cb;else cb(abort);});}}else{read(null,(end,data)=>{if(end)cb(end);else if(aborted)cb(aborted);else{busy=true;test(data,(err,valid)=>{busy=false;if(aborted){cb(aborted);abortCb(aborted);}else if(err){next(err,cb);}else if(valid){cb(null,data);}else{next(null,cb);}});}});}};};};exports.asyncSort=function(sorter){const source=Source();const sink=pull.collect((err,ary)=>{if(err){return source.abort(err);}sorter(ary,(err,res)=>{if(err){return source.abort(err);}source.resolve(pull.values(ary));});});return function(read){sink(read);return source;};};exports.replaceStartWith=function(s,r){const matcher=new RegExp('^'+r);return s.replace(matcher,'');};exports.tmpdir=()=>{return path.join(os.tmpdir(),uuid());};},4053:function(module,__unusedexports,__webpack_require__){var Decode=__webpack_require__(552).StringDecoder;module.exports=function(enc){var decoder=new Decode(enc),ended;return function(read){return function(abort,cb){if(ended)return cb(ended);read(abort,function(end,data){ended=end;if(true===end){if(data=decoder.end())cb(null,data);else cb(true);}else if(end&&true!==end)cb(end);else cb(null,decoder.write(data));});};};};},4058:function(module,exports,__webpack_require__){"use strict";const setImmediate=__webpack_require__(7368);const SmartBuffer=__webpack_require__(1190).SmartBuffer;const gitUtil=__webpack_require__(4831);exports=module.exports;exports.serialize=(dagNode,callback)=>{let lines=[];lines.push('tree '+gitUtil.cidToSha(dagNode.tree['/']).toString('hex'));dagNode.parents.forEach(parent=>{lines.push('parent '+gitUtil.cidToSha(parent['/']).toString('hex'));});lines.push('author '+gitUtil.serializePersonLine(dagNode.author));lines.push('committer '+gitUtil.serializePersonLine(dagNode.committer));if(dagNode.encoding){lines.push('encoding '+dagNode.encoding);}if(dagNode.mergetag){dagNode.mergetag.forEach(tag=>{lines.push('mergetag object '+gitUtil.cidToSha(tag.object['/']).toString('hex'));lines.push(tag.text);});}if(dagNode.signature){lines.push('gpgsig -----BEGIN PGP SIGNATURE-----');lines.push(dagNode.signature.text);}lines.push('');lines.push(dagNode.message);let data=lines.join('\n');let outBuf=new SmartBuffer();outBuf.writeString('commit ');outBuf.writeString(data.length.toString());outBuf.writeUInt8(0);outBuf.writeString(data);setImmediate(()=>callback(null,outBuf.toBuffer()));};exports.deserialize=(data,callback)=>{let lines=data.toString().split('\n');let res={gitType:'commit',parents:[]};for(let line=0;line<lines.length;line++){let m=lines[line].match(/^([^ ]+) (.+)$/);if(!m){if(lines[line]!==''){setImmediate(()=>callback(new Error('Invalid commit line '+line)));}res.message=lines.slice(line+1).join('\n');break;}let key=m[1];let value=m[2];switch(key){case'tree':res.tree={'/':gitUtil.shaToCid(Buffer.from(value,'hex'))};break;case'committer':res.committer=gitUtil.parsePersonLine(value);break;case'author':res.author=gitUtil.parsePersonLine(value);break;case'parent':res.parents.push({'/':gitUtil.shaToCid(Buffer.from(value,'hex'))});break;case'gpgsig':{if(value!=='-----BEGIN PGP SIGNATURE-----'){setImmediate(()=>callback(new Error('Invalid commit line '+line)));}res.signature={};let startLine=line;for(;line<lines.length-1;line++){if(lines[line+1][0]!==' '){res.signature.text=lines.slice(startLine+1,line+1).join('\n');break;}}break;}case'mergetag':{let mt=value.match(/^object ([0-9a-f]{40})$/);if(!mt){setImmediate(()=>callback(new Error('Invalid commit line '+line)));}let tag={object:{'/':gitUtil.shaToCid(Buffer.from(mt[1],'hex'))}};let startLine=line;for(;line<lines.length-1;line++){if(lines[line+1][0]!==' '){tag.text=lines.slice(startLine+1,line+1).join('\n');break;}}if(!res.mergetag){res.mergetag=[];}res.mergetag.push(tag);}break;default:res[key]=value;}}setImmediate(()=>callback(null,res));};},4062:function(module,__unusedexports,__webpack_require__){"use strict";module.exports=__webpack_require__(9542);},4068:function(module){"use strict";var has=Object.prototype.hasOwnProperty;var id=0;function Ultron(ee){if(!(this instanceof Ultron))return new Ultron(ee);this.id=id++;this.ee=ee;}Ultron.prototype.on=function on(event,fn,context){fn.__ultron=this.id;this.ee.on(event,fn,context);return this;};Ultron.prototype.once=function once(event,fn,context){fn.__ultron=this.id;this.ee.once(event,fn,context);return this;};Ultron.prototype.remove=function remove(){var args=arguments,event;if(args.length===1&&'string'===typeof args[0]){args=args[0].split(/[, ]+/);}else if(!args.length){args=[];for(event in this.ee._events){if(has.call(this.ee._events,event))args.push(event);}}for(var i=0;i<args.length;i++){var listeners=this.ee.listeners(args[i]);for(var j=0;j<listeners.length;j++){event=listeners[j];if(event.listener){if(event.listener.__ultron!==this.id)continue;delete event.listener.__ultron;}else{if(event.__ultron!==this.id)continue;delete event.__ultron;}this.ee.removeListener(args[i],event);}}return this;};Ultron.prototype.destroy=function destroy(){if(!this.ee)return false;this.remove();this.ee=null;return true;};module.exports=Ultron;},4075:function(module){"use strict";var docsURL='http://bitcore.io/';module.exports=[{name:'InvalidB58Char',message:'Invalid Base58 character: {0} in {1}'},{name:'InvalidB58Checksum',message:'Invalid Base58 checksum for {0}'},{name:'InvalidNetwork',message:'Invalid version for network: got {0}'},{name:'InvalidState',message:'Invalid state: {0}'},{name:'NotImplemented',message:'Function {0} was not implemented yet'},{name:'InvalidNetworkArgument',message:'Invalid network: must be "livenet" or "testnet", got {0}'},{name:'InvalidArgument',message:function(){return'Invalid Argument'+(arguments[0]?': '+arguments[0]:'')+(arguments[1]?' Documentation: '+docsURL+arguments[1]:'');}},{name:'AbstractMethodInvoked',message:'Abstract Method Invocation: {0}'},{name:'InvalidArgumentType',message:function(){return'Invalid Argument for '+arguments[2]+', expected '+arguments[1]+' but got '+typeof arguments[0];}},{name:'Unit',message:'Internal Error on Unit {0}',errors:[{'name':'UnknownCode','message':'Unrecognized unit code: {0}'},{'name':'InvalidRate','message':'Invalid exchange rate: {0}'}]},{name:'Transaction',message:'Internal Error on Transaction {0}',errors:[{name:'Input',message:'Internal Error on Input {0}',errors:[{name:'MissingScript',message:'Need a script to create an input'},{name:'UnsupportedScript',message:'Unsupported input script type: {0}'},{name:'MissingPreviousOutput',message:'No previous output information.'}]},{name:'NeedMoreInfo',message:'{0}'},{name:'InvalidSorting',message:'The sorting function provided did not return the change output as one of the array elements'},{name:'InvalidOutputAmountSum',message:'{0}'},{name:'MissingSignatures',message:'Some inputs have not been fully signed'},{name:'InvalidIndex',message:'Invalid index: {0} is not between 0, {1}'},{name:'UnableToVerifySignature',message:'Unable to verify signature: {0}'},{name:'DustOutputs',message:'Dust amount detected in one output'},{name:'InvalidSatoshis',message:'Output satoshis are invalid'},{name:'FeeError',message:'Internal Error on Fee {0}',errors:[{name:'TooSmall',message:'Fee is too small: {0}'},{name:'TooLarge',message:'Fee is too large: {0}'},{name:'Different',message:'Unspent value is different from specified fee: {0}'}]},{name:'ChangeAddressMissing',message:'Change address is missing'},{name:'BlockHeightTooHigh',message:'Block Height can be at most 2^32 -1'},{name:'NLockTimeOutOfRange',message:'Block Height can only be between 0 and 499 999 999'},{name:'LockTimeTooEarly',message:'Lock Time can\'t be earlier than UNIX date 500 000 000'}]},{name:'Script',message:'Internal Error on Script {0}',errors:[{name:'UnrecognizedAddress',message:'Expected argument {0} to be an address'},{name:'CantDeriveAddress',message:'Can\'t derive address associated with script {0}, needs to be p2pkh in, p2pkh out, p2sh in, or p2sh out.'},{name:'InvalidBuffer',message:'Invalid script buffer: can\'t parse valid script from given buffer {0}'}]},{name:'HDPrivateKey',message:'Internal Error on HDPrivateKey {0}',errors:[{name:'InvalidDerivationArgument',message:'Invalid derivation argument {0}, expected string, or number and boolean'},{name:'InvalidEntropyArgument',message:'Invalid entropy: must be an hexa string or binary buffer, got {0}',errors:[{name:'TooMuchEntropy',message:'Invalid entropy: more than 512 bits is non standard, got "{0}"'},{name:'NotEnoughEntropy',message:'Invalid entropy: at least 128 bits needed, got "{0}"'}]},{name:'InvalidLength',message:'Invalid length for xprivkey string in {0}'},{name:'InvalidPath',message:'Invalid derivation path: {0}'},{name:'UnrecognizedArgument',message:'Invalid argument: creating a HDPrivateKey requires a string, buffer, json or object, got "{0}"'}]},{name:'HDPublicKey',message:'Internal Error on HDPublicKey {0}',errors:[{name:'ArgumentIsPrivateExtended',message:'Argument is an extended private key: {0}'},{name:'InvalidDerivationArgument',message:'Invalid derivation argument: got {0}'},{name:'InvalidLength',message:'Invalid length for xpubkey: got "{0}"'},{name:'InvalidPath',message:'Invalid derivation path, it should look like: "m/1/100", got "{0}"'},{name:'InvalidIndexCantDeriveHardened',message:'Invalid argument: creating a hardened path requires an HDPrivateKey'},{name:'MustSupplyArgument',message:'Must supply an argument to create a HDPublicKey'},{name:'UnrecognizedArgument',message:'Invalid argument for creation, must be string, json, buffer, or object'}]}];},4082:function(module,__unusedexports,__webpack_require__){"use strict";var utils=__webpack_require__(1702);var common=__webpack_require__(7874);var assert=__webpack_require__(809);var rotr64_hi=utils.rotr64_hi;var rotr64_lo=utils.rotr64_lo;var shr64_hi=utils.shr64_hi;var shr64_lo=utils.shr64_lo;var sum64=utils.sum64;var sum64_hi=utils.sum64_hi;var sum64_lo=utils.sum64_lo;var sum64_4_hi=utils.sum64_4_hi;var sum64_4_lo=utils.sum64_4_lo;var sum64_5_hi=utils.sum64_5_hi;var sum64_5_lo=utils.sum64_5_lo;var BlockHash=common.BlockHash;var sha512_K=[0x428a2f98,0xd728ae22,0x71374491,0x23ef65cd,0xb5c0fbcf,0xec4d3b2f,0xe9b5dba5,0x8189dbbc,0x3956c25b,0xf348b538,0x59f111f1,0xb605d019,0x923f82a4,0xaf194f9b,0xab1c5ed5,0xda6d8118,0xd807aa98,0xa3030242,0x12835b01,0x45706fbe,0x243185be,0x4ee4b28c,0x550c7dc3,0xd5ffb4e2,0x72be5d74,0xf27b896f,0x80deb1fe,0x3b1696b1,0x9bdc06a7,0x25c71235,0xc19bf174,0xcf692694,0xe49b69c1,0x9ef14ad2,0xefbe4786,0x384f25e3,0x0fc19dc6,0x8b8cd5b5,0x240ca1cc,0x77ac9c65,0x2de92c6f,0x592b0275,0x4a7484aa,0x6ea6e483,0x5cb0a9dc,0xbd41fbd4,0x76f988da,0x831153b5,0x983e5152,0xee66dfab,0xa831c66d,0x2db43210,0xb00327c8,0x98fb213f,0xbf597fc7,0xbeef0ee4,0xc6e00bf3,0x3da88fc2,0xd5a79147,0x930aa725,0x06ca6351,0xe003826f,0x14292967,0x0a0e6e70,0x27b70a85,0x46d22ffc,0x2e1b2138,0x5c26c926,0x4d2c6dfc,0x5ac42aed,0x53380d13,0x9d95b3df,0x650a7354,0x8baf63de,0x766a0abb,0x3c77b2a8,0x81c2c92e,0x47edaee6,0x92722c85,0x1482353b,0xa2bfe8a1,0x4cf10364,0xa81a664b,0xbc423001,0xc24b8b70,0xd0f89791,0xc76c51a3,0x0654be30,0xd192e819,0xd6ef5218,0xd6990624,0x5565a910,0xf40e3585,0x5771202a,0x106aa070,0x32bbd1b8,0x19a4c116,0xb8d2d0c8,0x1e376c08,0x5141ab53,0x2748774c,0xdf8eeb99,0x34b0bcb5,0xe19b48a8,0x391c0cb3,0xc5c95a63,0x4ed8aa4a,0xe3418acb,0x5b9cca4f,0x7763e373,0x682e6ff3,0xd6b2b8a3,0x748f82ee,0x5defb2fc,0x78a5636f,0x43172f60,0x84c87814,0xa1f0ab72,0x8cc70208,0x1a6439ec,0x90befffa,0x23631e28,0xa4506ceb,0xde82bde9,0xbef9a3f7,0xb2c67915,0xc67178f2,0xe372532b,0xca273ece,0xea26619c,0xd186b8c7,0x21c0c207,0xeada7dd6,0xcde0eb1e,0xf57d4f7f,0xee6ed178,0x06f067aa,0x72176fba,0x0a637dc5,0xa2c898a6,0x113f9804,0xbef90dae,0x1b710b35,0x131c471b,0x28db77f5,0x23047d84,0x32caab7b,0x40c72493,0x3c9ebe0a,0x15c9bebc,0x431d67c4,0x9c100d4c,0x4cc5d4be,0xcb3e42b6,0x597f299c,0xfc657e2a,0x5fcb6fab,0x3ad6faec,0x6c44198c,0x4a475817];function SHA512(){if(!(this instanceof SHA512))return new SHA512();BlockHash.call(this);this.h=[0x6a09e667,0xf3bcc908,0xbb67ae85,0x84caa73b,0x3c6ef372,0xfe94f82b,0xa54ff53a,0x5f1d36f1,0x510e527f,0xade682d1,0x9b05688c,0x2b3e6c1f,0x1f83d9ab,0xfb41bd6b,0x5be0cd19,0x137e2179];this.k=sha512_K;this.W=new Array(160);}utils.inherits(SHA512,BlockHash);module.exports=SHA512;SHA512.blockSize=1024;SHA512.outSize=512;SHA512.hmacStrength=192;SHA512.padLength=128;SHA512.prototype._prepareBlock=function _prepareBlock(msg,start){var W=this.W;for(var i=0;i<32;i++)W[i]=msg[start+i];for(;i<W.length;i+=2){var c0_hi=g1_512_hi(W[i-4],W[i-3]);var c0_lo=g1_512_lo(W[i-4],W[i-3]);var c1_hi=W[i-14];var c1_lo=W[i-13];var c2_hi=g0_512_hi(W[i-30],W[i-29]);var c2_lo=g0_512_lo(W[i-30],W[i-29]);var c3_hi=W[i-32];var c3_lo=W[i-31];W[i]=sum64_4_hi(c0_hi,c0_lo,c1_hi,c1_lo,c2_hi,c2_lo,c3_hi,c3_lo);W[i+1]=sum64_4_lo(c0_hi,c0_lo,c1_hi,c1_lo,c2_hi,c2_lo,c3_hi,c3_lo);}};SHA512.prototype._update=function _update(msg,start){this._prepareBlock(msg,start);var W=this.W;var ah=this.h[0];var al=this.h[1];var bh=this.h[2];var bl=this.h[3];var ch=this.h[4];var cl=this.h[5];var dh=this.h[6];var dl=this.h[7];var eh=this.h[8];var el=this.h[9];var fh=this.h[10];var fl=this.h[11];var gh=this.h[12];var gl=this.h[13];var hh=this.h[14];var hl=this.h[15];assert(this.k.length===W.length);for(var i=0;i<W.length;i+=2){var c0_hi=hh;var c0_lo=hl;var c1_hi=s1_512_hi(eh,el);var c1_lo=s1_512_lo(eh,el);var c2_hi=ch64_hi(eh,el,fh,fl,gh,gl);var c2_lo=ch64_lo(eh,el,fh,fl,gh,gl);var c3_hi=this.k[i];var c3_lo=this.k[i+1];var c4_hi=W[i];var c4_lo=W[i+1];var T1_hi=sum64_5_hi(c0_hi,c0_lo,c1_hi,c1_lo,c2_hi,c2_lo,c3_hi,c3_lo,c4_hi,c4_lo);var T1_lo=sum64_5_lo(c0_hi,c0_lo,c1_hi,c1_lo,c2_hi,c2_lo,c3_hi,c3_lo,c4_hi,c4_lo);c0_hi=s0_512_hi(ah,al);c0_lo=s0_512_lo(ah,al);c1_hi=maj64_hi(ah,al,bh,bl,ch,cl);c1_lo=maj64_lo(ah,al,bh,bl,ch,cl);var T2_hi=sum64_hi(c0_hi,c0_lo,c1_hi,c1_lo);var T2_lo=sum64_lo(c0_hi,c0_lo,c1_hi,c1_lo);hh=gh;hl=gl;gh=fh;gl=fl;fh=eh;fl=el;eh=sum64_hi(dh,dl,T1_hi,T1_lo);el=sum64_lo(dl,dl,T1_hi,T1_lo);dh=ch;dl=cl;ch=bh;cl=bl;bh=ah;bl=al;ah=sum64_hi(T1_hi,T1_lo,T2_hi,T2_lo);al=sum64_lo(T1_hi,T1_lo,T2_hi,T2_lo);}sum64(this.h,0,ah,al);sum64(this.h,2,bh,bl);sum64(this.h,4,ch,cl);sum64(this.h,6,dh,dl);sum64(this.h,8,eh,el);sum64(this.h,10,fh,fl);sum64(this.h,12,gh,gl);sum64(this.h,14,hh,hl);};SHA512.prototype._digest=function digest(enc){if(enc==='hex')return utils.toHex32(this.h,'big');else return utils.split32(this.h,'big');};function ch64_hi(xh,xl,yh,yl,zh){var r=xh&yh^~xh&zh;if(r<0)r+=0x100000000;return r;}function ch64_lo(xh,xl,yh,yl,zh,zl){var r=xl&yl^~xl&zl;if(r<0)r+=0x100000000;return r;}function maj64_hi(xh,xl,yh,yl,zh){var r=xh&yh^xh&zh^yh&zh;if(r<0)r+=0x100000000;return r;}function maj64_lo(xh,xl,yh,yl,zh,zl){var r=xl&yl^xl&zl^yl&zl;if(r<0)r+=0x100000000;return r;}function s0_512_hi(xh,xl){var c0_hi=rotr64_hi(xh,xl,28);var c1_hi=rotr64_hi(xl,xh,2);var c2_hi=rotr64_hi(xl,xh,7);var r=c0_hi^c1_hi^c2_hi;if(r<0)r+=0x100000000;return r;}function s0_512_lo(xh,xl){var c0_lo=rotr64_lo(xh,xl,28);var c1_lo=rotr64_lo(xl,xh,2);var c2_lo=rotr64_lo(xl,xh,7);var r=c0_lo^c1_lo^c2_lo;if(r<0)r+=0x100000000;return r;}function s1_512_hi(xh,xl){var c0_hi=rotr64_hi(xh,xl,14);var c1_hi=rotr64_hi(xh,xl,18);var c2_hi=rotr64_hi(xl,xh,9);var r=c0_hi^c1_hi^c2_hi;if(r<0)r+=0x100000000;return r;}function s1_512_lo(xh,xl){var c0_lo=rotr64_lo(xh,xl,14);var c1_lo=rotr64_lo(xh,xl,18);var c2_lo=rotr64_lo(xl,xh,9);var r=c0_lo^c1_lo^c2_lo;if(r<0)r+=0x100000000;return r;}function g0_512_hi(xh,xl){var c0_hi=rotr64_hi(xh,xl,1);var c1_hi=rotr64_hi(xh,xl,8);var c2_hi=shr64_hi(xh,xl,7);var r=c0_hi^c1_hi^c2_hi;if(r<0)r+=0x100000000;return r;}function g0_512_lo(xh,xl){var c0_lo=rotr64_lo(xh,xl,1);var c1_lo=rotr64_lo(xh,xl,8);var c2_lo=shr64_lo(xh,xl,7);var r=c0_lo^c1_lo^c2_lo;if(r<0)r+=0x100000000;return r;}function g1_512_hi(xh,xl){var c0_hi=rotr64_hi(xh,xl,19);var c1_hi=rotr64_hi(xl,xh,29);var c2_hi=shr64_hi(xh,xl,6);var r=c0_hi^c1_hi^c2_hi;if(r<0)r+=0x100000000;return r;}function g1_512_lo(xh,xl){var c0_lo=rotr64_lo(xh,xl,19);var c1_lo=rotr64_lo(xl,xh,29);var c2_lo=shr64_lo(xh,xl,6);var r=c0_lo^c1_lo^c2_lo;if(r<0)r+=0x100000000;return r;}},4083:function(module){module.exports={isValidErrorCode:function(code){return code>=1000&&code<=1011&&code!=1004&&code!=1005&&code!=1006||code>=3000&&code<=4999;},1000:'normal',1001:'going away',1002:'protocol error',1003:'unsupported data',1004:'reserved',1005:'reserved for extensions',1006:'reserved for extensions',1007:'inconsistent or invalid data',1008:'policy violation',1009:'message too big',1010:'extension handshake missing',1011:'an unexpected condition prevented the request from being fulfilled'};},4086:function(__unusedmodule,exports,__webpack_require__){"use strict";const Hoek=__webpack_require__(2850);const Symbols=__webpack_require__(4678);const internals={};exports.concat=function(target,source){if(!source){return target;}const obj=Object.assign({},target);const language=source.language;Object.assign(obj,source);if(language&&target&&target.language){obj.language=Hoek.applyToDefaults(target.language,language);}if(obj[Symbols.settingsCache]){delete obj[Symbols.settingsCache];}return obj;};},4089:function(__unusedmodule,exports,__webpack_require__){"use strict";const decoders=exports;decoders.der=__webpack_require__(3159);decoders.pem=__webpack_require__(3066);},4097:function(module,__unusedexports,__webpack_require__){"use strict";const debug=__webpack_require__(746);const log=debug('libp2p:floodsub');log.err=debug('libp2p:floodsub:error');module.exports={log:log,multicodec:'/floodsub/1.0.0'};},4103:function(module,__unusedexports,__webpack_require__){"use strict";const asyncMap=__webpack_require__(7011);class BlockService{constructor(ipfsRepo){this._repo=ipfsRepo;this._bitswap=null;}setExchange(bitswap){this._bitswap=bitswap;}unsetExchange(){this._bitswap=null;}hasExchange(){return this._bitswap!=null;}put(block,callback){if(this.hasExchange()){this._bitswap.put(block,callback);}else{this._repo.blocks.put(block,callback);}}putMany(blocks,callback){if(this.hasExchange()){this._bitswap.putMany(blocks,callback);}else{this._repo.blocks.putMany(blocks,callback);}}get(cid,callback){if(this.hasExchange()){this._bitswap.get(cid,callback);}else{this._repo.blocks.get(cid,callback);}}getMany(cids,callback){if(!Array.isArray(cids)){callback(new Error('first arg must be an array of cids'));}else if(this.hasExchange()){this._bitswap.getMany(cids,callback);}else{asyncMap(cids,(cid,cb)=>this._repo.blocks.get(cid,cb),callback);}}delete(cid,callback){this._repo.blocks.delete(cid,callback);}}module.exports=BlockService;},4104:function(module,__unusedexports,__webpack_require__){if(typeof process!=='undefined'&&process.type==='renderer'){module.exports=__webpack_require__(1458);}else{module.exports=__webpack_require__(2318);}},4110:function(module){module.exports={"COMPRESSED_TYPE_INVALID":"compressed should be a boolean","EC_PRIVATE_KEY_TYPE_INVALID":"private key should be a Buffer","EC_PRIVATE_KEY_LENGTH_INVALID":"private key length is invalid","EC_PRIVATE_KEY_RANGE_INVALID":"private key range is invalid","EC_PRIVATE_KEY_TWEAK_ADD_FAIL":"tweak out of range or resulting private key is invalid","EC_PRIVATE_KEY_TWEAK_MUL_FAIL":"tweak out of range","EC_PRIVATE_KEY_EXPORT_DER_FAIL":"couldn't export to DER format","EC_PRIVATE_KEY_IMPORT_DER_FAIL":"couldn't import from DER format","EC_PUBLIC_KEYS_TYPE_INVALID":"public keys should be an Array","EC_PUBLIC_KEYS_LENGTH_INVALID":"public keys Array should have at least 1 element","EC_PUBLIC_KEY_TYPE_INVALID":"public key should be a Buffer","EC_PUBLIC_KEY_LENGTH_INVALID":"public key length is invalid","EC_PUBLIC_KEY_PARSE_FAIL":"the public key could not be parsed or is invalid","EC_PUBLIC_KEY_CREATE_FAIL":"private was invalid, try again","EC_PUBLIC_KEY_TWEAK_ADD_FAIL":"tweak out of range or resulting public key is invalid","EC_PUBLIC_KEY_TWEAK_MUL_FAIL":"tweak out of range","EC_PUBLIC_KEY_COMBINE_FAIL":"the sum of the public keys is not valid","ECDH_FAIL":"scalar was invalid (zero or overflow)","ECDSA_SIGNATURE_TYPE_INVALID":"signature should be a Buffer","ECDSA_SIGNATURE_LENGTH_INVALID":"signature length is invalid","ECDSA_SIGNATURE_PARSE_FAIL":"couldn't parse signature","ECDSA_SIGNATURE_PARSE_DER_FAIL":"couldn't parse DER signature","ECDSA_SIGNATURE_SERIALIZE_DER_FAIL":"couldn't serialize signature to DER format","ECDSA_SIGN_FAIL":"nonce generation function failed or private key is invalid","ECDSA_RECOVER_FAIL":"couldn't recover public key from signature","MSG32_TYPE_INVALID":"message should be a Buffer","MSG32_LENGTH_INVALID":"message length is invalid","OPTIONS_TYPE_INVALID":"options should be an Object","OPTIONS_DATA_TYPE_INVALID":"options.data should be a Buffer","OPTIONS_DATA_LENGTH_INVALID":"options.data length is invalid","OPTIONS_NONCEFN_TYPE_INVALID":"options.noncefn should be a Function","RECOVERY_ID_TYPE_INVALID":"recovery should be a Number","RECOVERY_ID_VALUE_INVALID":"recovery should have value between -1 and 4","TWEAK_TYPE_INVALID":"tweak should be a Buffer","TWEAK_LENGTH_INVALID":"tweak length is invalid"};},4112:function(module){"use strict";function matchExact(myProtocol,senderProtocol,callback){const result=myProtocol===senderProtocol;callback(null,result);}module.exports=matchExact;},4115:function(module){"use strict";module.exports=`message Propose {
  optional bytes rand = 1;
  optional bytes pubkey = 2;
  optional string exchanges = 3;
  optional string ciphers = 4;
  optional string hashes = 5;
}

message Exchange {
  optional bytes epubkey = 1;
  optional bytes signature = 2;
}`;},4126:function(module,__unusedexports,__webpack_require__){"use strict";if(typeof process==='undefined'||process.type==='renderer'||process.browser===true||process.__nwjs){module.exports=__webpack_require__(6510);}else{module.exports=__webpack_require__(7135);}},4131:function(module,__unusedexports,__webpack_require__){const Multiaddr=__webpack_require__(5920);const mafmt=__webpack_require__(7511);module.exports={name:'multiaddr',language:{invalid:'{{message}}',fmt:'must be in {{fmt}} format'},pre(value,state,options){if(value==null){return this.createError('multiaddr.invalid',{v:value,message:'addr must be a string, Buffer, or another Multiaddr'},state,options);}let ma;try{ma=Multiaddr(value);}catch(err){return this.createError('multiaddr.invalid',{v:value,message:err.message},state,options);}return options.convert?ma:value;},rules:Object.keys(mafmt).map(fmt=>({name:fmt,validate(params,value,state,options){return mafmt[fmt].matches(value)?value:this.createError(`multiaddr.fmt`,{v:value,fmt},state,options);}}))};},4138:function(module,exports,__webpack_require__){var pull=__webpack_require__(418);var looper=__webpack_require__(7432);function destroy(stream,cb){function onClose(){cleanup();cb();}function onError(err){cleanup();cb(err);}function cleanup(){stream.removeListener('close',onClose);stream.removeListener('error',onError);}stream.on('close',onClose);stream.on('error',onError);}function destroy(stream){if(!stream.destroy)console.error('warning, stream-to-pull-stream: \n'+'the wrapped node-stream does not implement `destroy`, \n'+'this may cause resource leaks.');else stream.destroy();}function write(read,stream,cb){var ended,closed=false,did;function done(){if(did)return;did=true;cb&&cb(ended===true?null:ended);}function onClose(){if(closed)return;closed=true;cleanup();if(!ended)read(ended=true,done);else done();}function onError(err){cleanup();if(!ended)read(ended=err,done);}function cleanup(){stream.on('finish',onClose);stream.removeListener('close',onClose);stream.removeListener('error',onError);}stream.on('close',onClose);stream.on('finish',onClose);stream.on('error',onError);process.nextTick(function(){looper(function(next){read(null,function(end,data){ended=ended||end;if(end===true)return stream._isStdio?done():stream.end();if(ended=ended||end){destroy(stream);return done(ended);}if(stream._isStdio)stream.write(data,function(){next();});else{var pause=stream.write(data);if(pause===false)stream.once('drain',next);else next();}});});});}function first(emitter,events,handler){function listener(val){events.forEach(function(e){emitter.removeListener(e,listener);});handler(val);}events.forEach(function(e){emitter.on(e,listener);});return emitter;}function read2(stream){var ended=false,waiting=false;var _cb;function read(){var data=stream.read();if(data!==null&&_cb){var cb=_cb;_cb=null;cb(null,data);}}stream.on('readable',function(){waiting=true;_cb&&read();}).on('end',function(){ended=true;_cb&&_cb(ended);}).on('error',function(err){ended=err;_cb&&_cb(ended);});return function(end,cb){_cb=cb;if(ended)cb(ended);else if(waiting)read();};}function read1(stream){var buffer=[],cbs=[],ended,paused=false;var draining;function drain(){while((buffer.length||ended)&&cbs.length)cbs.shift()(buffer.length?null:ended,buffer.shift());if(!buffer.length&&paused){paused=false;stream.resume();}}stream.on('data',function(data){buffer.push(data);drain();if(buffer.length&&stream.pause){paused=true;stream.pause();}});stream.on('end',function(){ended=true;drain();});stream.on('close',function(){ended=true;drain();});stream.on('error',function(err){ended=err;drain();});return function(abort,cb){if(!cb)throw new Error('*must* provide cb');if(abort){function onAbort(){while(cbs.length)cbs.shift()(abort);cb(abort);}if(ended)return onAbort();stream.once('close',onAbort);destroy(stream);}else{cbs.push(cb);drain();}};}var read=read1;var sink=function(stream,cb){return function(read){return write(read,stream,cb);};};var source=function(stream){return read1(stream);};exports=module.exports=function(stream,cb){return stream.writable&&stream.write?stream.readable?function(_read){write(_read,stream,cb);return read1(stream);}:sink(stream,cb):source(stream);};exports.sink=sink;exports.source=source;exports.read=read;exports.read1=read1;exports.read2=read2;exports.duplex=function(stream,cb){return{source:source(stream),sink:sink(stream,cb)};};exports.transform=function(stream){return function(read){var _source=source(stream);sink(stream)(read);return _source;};};},4147:function(module,__unusedexports,__webpack_require__){"use strict";const promisify=__webpack_require__(6955);module.exports=function config(self){return{get:promisify((key,callback)=>{if(typeof key==='function'){callback=key;key=undefined;}return self._repo.config.get(key,callback);}),set:promisify((key,value,callback)=>{self._repo.config.set(key,value,callback);}),replace:promisify((config,callback)=>{self._repo.config.set(config,callback);})};};},4163:function(module,__unusedexports,__webpack_require__){"use strict";const pull=__webpack_require__(2885);const timeout=__webpack_require__(171);const lp=__webpack_require__(8585);const setImmediate=__webpack_require__(7368);const errcode=__webpack_require__(4999);const rpc=__webpack_require__(1865);const c=__webpack_require__(2445);const Message=__webpack_require__(6102);const utils=__webpack_require__(2869);class Network{constructor(self){this.dht=self;this.readMessageTimeout=c.READ_MESSAGE_TIMEOUT;this._log=utils.logger(this.dht.peerInfo.id,'net');this._rpc=rpc(this.dht);this._onPeerConnected=this._onPeerConnected.bind(this);this._running=false;}start(callback){const cb=err=>setImmediate(()=>callback(err));if(this._running){return cb(errcode(new Error('Network is already running'),'ERR_NETWORK_ALREADY_RUNNING'));}if(!this.dht.isStarted){return cb(errcode(new Error('Can not start network'),'ERR_CANNOT_START_NETWORK'));}this._running=true;this.dht.switch.handle(c.PROTOCOL_DHT,this._rpc);this.dht.switch.on('peer-mux-established',this._onPeerConnected);cb();}stop(callback){const cb=err=>setImmediate(()=>callback(err));if(!this.dht.isStarted&&!this.isStarted){return cb(errcode(new Error('Network is already stopped'),'ERR_NETWORK_ALREADY_STOPPED'));}this._running=false;this.dht.switch.removeListener('peer-mux-established',this._onPeerConnected);this.dht.switch.unhandle(c.PROTOCOL_DHT);cb();}get isStarted(){return this._running;}get isConnected(){return this.dht.isStarted&&this.isStarted;}_onPeerConnected(peer){if(!this.isConnected){return this._log.error('Network is offline');}this.dht.switch.dial(peer,c.PROTOCOL_DHT,(err,conn)=>{if(err){return this._log('%s does not support protocol: %s',peer.id.toB58String(),c.PROTOCOL_DHT);}pull(pull.empty(),conn);this.dht._add(peer,err=>{if(err){return this._log.error('Failed to add to the routing table',err);}this.dht._peerDiscovered(peer);this._log('added to the routing table: %s',peer.id.toB58String());});});}sendRequest(to,msg,callback){if(!this.isConnected){return callback(errcode(new Error('Network is offline'),'ERR_NETWORK_OFFLINE'));}this._log('sending to: %s',to.toB58String());this.dht.switch.dial(to,c.PROTOCOL_DHT,(err,conn)=>{if(err){return callback(err);}this._writeReadMessage(conn,msg.serialize(),callback);});}sendMessage(to,msg,callback){if(!this.isConnected){return setImmediate(()=>callback(errcode(new Error('Network is offline'),'ERR_NETWORK_OFFLINE')));}this._log('sending to: %s',to.toB58String());this.dht.switch.dial(to,c.PROTOCOL_DHT,(err,conn)=>{if(err){return callback(err);}this._writeMessage(conn,msg.serialize(),callback);});}_writeReadMessage(conn,msg,callback){timeout(writeReadMessage,this.readMessageTimeout)(conn,msg,callback);}_writeMessage(conn,msg,callback){pull(pull.values([msg]),lp.encode(),conn,pull.onEnd(callback));}}function writeReadMessage(conn,msg,callback){pull(pull.values([msg]),lp.encode(),conn,pull.filter(msg=>msg.length<c.maxMessageSize),lp.decode(),pull.collect((err,res)=>{if(err){return callback(err);}if(res.length===0){return callback(errcode(new Error('No message received'),'ERR_NO_MESSAGE_RECEIVED'));}let response;try{response=Message.deserialize(res[0]);}catch(err){return callback(errcode(err,'ERR_FAILED_DESERIALIZE_RESPONSE'));}callback(null,response);}));}module.exports=Network;},4175:function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=notId;function notId(v){return!v;}module.exports=exports["default"];},4176:function(module){"use strict";module.exports=function isOnline(self){return()=>{return Boolean(self._bitswap&&self.libp2p&&self.libp2p.isStarted());};};},4179:function(module,exports,__webpack_require__){module=__webpack_require__.nmd(module);var LARGE_ARRAY_SIZE=200;var FUNC_ERROR_TEXT='Expected a function';var HASH_UNDEFINED='__lodash_hash_undefined__';var UNORDERED_COMPARE_FLAG=1,PARTIAL_COMPARE_FLAG=2;var INFINITY=1/0,MAX_SAFE_INTEGER=9007199254740991,MAX_INTEGER=1.7976931348623157e+308,NAN=0/0;var argsTag='[object Arguments]',arrayTag='[object Array]',boolTag='[object Boolean]',dateTag='[object Date]',errorTag='[object Error]',funcTag='[object Function]',genTag='[object GeneratorFunction]',mapTag='[object Map]',numberTag='[object Number]',objectTag='[object Object]',promiseTag='[object Promise]',regexpTag='[object RegExp]',setTag='[object Set]',stringTag='[object String]',symbolTag='[object Symbol]',weakMapTag='[object WeakMap]';var arrayBufferTag='[object ArrayBuffer]',dataViewTag='[object DataView]',float32Tag='[object Float32Array]',float64Tag='[object Float64Array]',int8Tag='[object Int8Array]',int16Tag='[object Int16Array]',int32Tag='[object Int32Array]',uint8Tag='[object Uint8Array]',uint8ClampedTag='[object Uint8ClampedArray]',uint16Tag='[object Uint16Array]',uint32Tag='[object Uint32Array]';var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/,reLeadingDot=/^\./,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;var reRegExpChar=/[\\^$.*+?()[\]{}|]/g;var reTrim=/^\s+|\s+$/g;var reEscapeChar=/\\(\\)?/g;var reIsBadHex=/^[-+]0x[0-9a-f]+$/i;var reIsBinary=/^0b[01]+$/i;var reIsHostCtor=/^\[object .+?Constructor\]$/;var reIsOctal=/^0o[0-7]+$/i;var reIsUint=/^(?:0|[1-9]\d*)$/;var typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=true;typedArrayTags[argsTag]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=false;var freeParseInt=parseInt;var freeGlobal=typeof global=='object'&&global&&global.Object===Object&&global;var freeSelf=typeof self=='object'&&self&&self.Object===Object&&self;var root=freeGlobal||freeSelf||Function('return this')();var freeExports=true&&exports&&!exports.nodeType&&exports;var freeModule=freeExports&&"object"=='object'&&module&&!module.nodeType&&module;var moduleExports=freeModule&&freeModule.exports===freeExports;var freeProcess=moduleExports&&freeGlobal.process;var nodeUtil=function(){try{return freeProcess&&freeProcess.binding('util');}catch(e){}}();var nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray;function arraySome(array,predicate){var index=-1,length=array?array.length:0;while(++index<length){if(predicate(array[index],index,array)){return true;}}return false;}function baseFindIndex(array,predicate,fromIndex,fromRight){var length=array.length,index=fromIndex+(fromRight?1:-1);while(fromRight?index--:++index<length){if(predicate(array[index],index,array)){return index;}}return-1;}function baseProperty(key){return function(object){return object==null?undefined:object[key];};}function baseTimes(n,iteratee){var index=-1,result=Array(n);while(++index<n){result[index]=iteratee(index);}return result;}function baseUnary(func){return function(value){return func(value);};}function getValue(object,key){return object==null?undefined:object[key];}function isHostObject(value){var result=false;if(value!=null&&typeof value.toString!='function'){try{result=!!(value+'');}catch(e){}}return result;}function mapToArray(map){var index=-1,result=Array(map.size);map.forEach(function(value,key){result[++index]=[key,value];});return result;}function overArg(func,transform){return function(arg){return func(transform(arg));};}function setToArray(set){var index=-1,result=Array(set.size);set.forEach(function(value){result[++index]=value;});return result;}var arrayProto=Array.prototype,funcProto=Function.prototype,objectProto=Object.prototype;var coreJsData=root['__core-js_shared__'];var maskSrcKey=function(){var uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||'');return uid?'Symbol(src)_1.'+uid:'';}();var funcToString=funcProto.toString;var hasOwnProperty=objectProto.hasOwnProperty;var objectToString=objectProto.toString;var reIsNative=RegExp('^'+funcToString.call(hasOwnProperty).replace(reRegExpChar,'\\$&').replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,'$1.*?')+'$');var Symbol=root.Symbol,Uint8Array=root.Uint8Array,propertyIsEnumerable=objectProto.propertyIsEnumerable,splice=arrayProto.splice;var nativeKeys=overArg(Object.keys,Object),nativeMax=Math.max;var DataView=getNative(root,'DataView'),Map=getNative(root,'Map'),Promise=getNative(root,'Promise'),Set=getNative(root,'Set'),WeakMap=getNative(root,'WeakMap'),nativeCreate=getNative(Object,'create');var dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map),promiseCtorString=toSource(Promise),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap);var symbolProto=Symbol?Symbol.prototype:undefined,symbolValueOf=symbolProto?symbolProto.valueOf:undefined,symbolToString=symbolProto?symbolProto.toString:undefined;function Hash(entries){var index=-1,length=entries?entries.length:0;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1]);}}function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{};}function hashDelete(key){return this.has(key)&&delete this.__data__[key];}function hashGet(key){var data=this.__data__;if(nativeCreate){var result=data[key];return result===HASH_UNDEFINED?undefined:result;}return hasOwnProperty.call(data,key)?data[key]:undefined;}function hashHas(key){var data=this.__data__;return nativeCreate?data[key]!==undefined:hasOwnProperty.call(data,key);}function hashSet(key,value){var data=this.__data__;data[key]=nativeCreate&&value===undefined?HASH_UNDEFINED:value;return this;}Hash.prototype.clear=hashClear;Hash.prototype['delete']=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;function ListCache(entries){var index=-1,length=entries?entries.length:0;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1]);}}function listCacheClear(){this.__data__=[];}function listCacheDelete(key){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){return false;}var lastIndex=data.length-1;if(index==lastIndex){data.pop();}else{splice.call(data,index,1);}return true;}function listCacheGet(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?undefined:data[index][1];}function listCacheHas(key){return assocIndexOf(this.__data__,key)>-1;}function listCacheSet(key,value){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){data.push([key,value]);}else{data[index][1]=value;}return this;}ListCache.prototype.clear=listCacheClear;ListCache.prototype['delete']=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;function MapCache(entries){var index=-1,length=entries?entries.length:0;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1]);}}function mapCacheClear(){this.__data__={'hash':new Hash(),'map':new(Map||ListCache)(),'string':new Hash()};}function mapCacheDelete(key){return getMapData(this,key)['delete'](key);}function mapCacheGet(key){return getMapData(this,key).get(key);}function mapCacheHas(key){return getMapData(this,key).has(key);}function mapCacheSet(key,value){getMapData(this,key).set(key,value);return this;}MapCache.prototype.clear=mapCacheClear;MapCache.prototype['delete']=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;function SetCache(values){var index=-1,length=values?values.length:0;this.__data__=new MapCache();while(++index<length){this.add(values[index]);}}function setCacheAdd(value){this.__data__.set(value,HASH_UNDEFINED);return this;}function setCacheHas(value){return this.__data__.has(value);}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd;SetCache.prototype.has=setCacheHas;function Stack(entries){this.__data__=new ListCache(entries);}function stackClear(){this.__data__=new ListCache();}function stackDelete(key){return this.__data__['delete'](key);}function stackGet(key){return this.__data__.get(key);}function stackHas(key){return this.__data__.has(key);}function stackSet(key,value){var cache=this.__data__;if(cache instanceof ListCache){var pairs=cache.__data__;if(!Map||pairs.length<LARGE_ARRAY_SIZE-1){pairs.push([key,value]);return this;}cache=this.__data__=new MapCache(pairs);}cache.set(key,value);return this;}Stack.prototype.clear=stackClear;Stack.prototype['delete']=stackDelete;Stack.prototype.get=stackGet;Stack.prototype.has=stackHas;Stack.prototype.set=stackSet;function arrayLikeKeys(value,inherited){var result=isArray(value)||isArguments(value)?baseTimes(value.length,String):[];var length=result.length,skipIndexes=!!length;for(var key in value){if((inherited||hasOwnProperty.call(value,key))&&!(skipIndexes&&(key=='length'||isIndex(key,length)))){result.push(key);}}return result;}function assocIndexOf(array,key){var length=array.length;while(length--){if(eq(array[length][0],key)){return length;}}return-1;}function baseGet(object,path){path=isKey(path,object)?[path]:castPath(path);var index=0,length=path.length;while(object!=null&&index<length){object=object[toKey(path[index++])];}return index&&index==length?object:undefined;}function baseGetTag(value){return objectToString.call(value);}function baseHasIn(object,key){return object!=null&&key in Object(object);}function baseIsEqual(value,other,customizer,bitmask,stack){if(value===other){return true;}if(value==null||other==null||!isObject(value)&&!isObjectLike(other)){return value!==value&&other!==other;}return baseIsEqualDeep(value,other,baseIsEqual,customizer,bitmask,stack);}function baseIsEqualDeep(object,other,equalFunc,customizer,bitmask,stack){var objIsArr=isArray(object),othIsArr=isArray(other),objTag=arrayTag,othTag=arrayTag;if(!objIsArr){objTag=getTag(object);objTag=objTag==argsTag?objectTag:objTag;}if(!othIsArr){othTag=getTag(other);othTag=othTag==argsTag?objectTag:othTag;}var objIsObj=objTag==objectTag&&!isHostObject(object),othIsObj=othTag==objectTag&&!isHostObject(other),isSameTag=objTag==othTag;if(isSameTag&&!objIsObj){stack||(stack=new Stack());return objIsArr||isTypedArray(object)?equalArrays(object,other,equalFunc,customizer,bitmask,stack):equalByTag(object,other,objTag,equalFunc,customizer,bitmask,stack);}if(!(bitmask&PARTIAL_COMPARE_FLAG)){var objIsWrapped=objIsObj&&hasOwnProperty.call(object,'__wrapped__'),othIsWrapped=othIsObj&&hasOwnProperty.call(other,'__wrapped__');if(objIsWrapped||othIsWrapped){var objUnwrapped=objIsWrapped?object.value():object,othUnwrapped=othIsWrapped?other.value():other;stack||(stack=new Stack());return equalFunc(objUnwrapped,othUnwrapped,customizer,bitmask,stack);}}if(!isSameTag){return false;}stack||(stack=new Stack());return equalObjects(object,other,equalFunc,customizer,bitmask,stack);}function baseIsMatch(object,source,matchData,customizer){var index=matchData.length,length=index,noCustomizer=!customizer;if(object==null){return!length;}object=Object(object);while(index--){var data=matchData[index];if(noCustomizer&&data[2]?data[1]!==object[data[0]]:!(data[0]in object)){return false;}}while(++index<length){data=matchData[index];var key=data[0],objValue=object[key],srcValue=data[1];if(noCustomizer&&data[2]){if(objValue===undefined&&!(key in object)){return false;}}else{var stack=new Stack();if(customizer){var result=customizer(objValue,srcValue,key,object,source,stack);}if(!(result===undefined?baseIsEqual(srcValue,objValue,customizer,UNORDERED_COMPARE_FLAG|PARTIAL_COMPARE_FLAG,stack):result)){return false;}}}return true;}function baseIsNative(value){if(!isObject(value)||isMasked(value)){return false;}var pattern=isFunction(value)||isHostObject(value)?reIsNative:reIsHostCtor;return pattern.test(toSource(value));}function baseIsTypedArray(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[objectToString.call(value)];}function baseIteratee(value){if(typeof value=='function'){return value;}if(value==null){return identity;}if(typeof value=='object'){return isArray(value)?baseMatchesProperty(value[0],value[1]):baseMatches(value);}return property(value);}function baseKeys(object){if(!isPrototype(object)){return nativeKeys(object);}var result=[];for(var key in Object(object)){if(hasOwnProperty.call(object,key)&&key!='constructor'){result.push(key);}}return result;}function baseMatches(source){var matchData=getMatchData(source);if(matchData.length==1&&matchData[0][2]){return matchesStrictComparable(matchData[0][0],matchData[0][1]);}return function(object){return object===source||baseIsMatch(object,source,matchData);};}function baseMatchesProperty(path,srcValue){if(isKey(path)&&isStrictComparable(srcValue)){return matchesStrictComparable(toKey(path),srcValue);}return function(object){var objValue=get(object,path);return objValue===undefined&&objValue===srcValue?hasIn(object,path):baseIsEqual(srcValue,objValue,undefined,UNORDERED_COMPARE_FLAG|PARTIAL_COMPARE_FLAG);};}function basePropertyDeep(path){return function(object){return baseGet(object,path);};}function baseToString(value){if(typeof value=='string'){return value;}if(isSymbol(value)){return symbolToString?symbolToString.call(value):'';}var result=value+'';return result=='0'&&1/value==-INFINITY?'-0':result;}function castPath(value){return isArray(value)?value:stringToPath(value);}function createFind(findIndexFunc){return function(collection,predicate,fromIndex){var iterable=Object(collection);if(!isArrayLike(collection)){var iteratee=baseIteratee(predicate,3);collection=keys(collection);predicate=function(key){return iteratee(iterable[key],key,iterable);};}var index=findIndexFunc(collection,predicate,fromIndex);return index>-1?iterable[iteratee?collection[index]:index]:undefined;};}function equalArrays(array,other,equalFunc,customizer,bitmask,stack){var isPartial=bitmask&PARTIAL_COMPARE_FLAG,arrLength=array.length,othLength=other.length;if(arrLength!=othLength&&!(isPartial&&othLength>arrLength)){return false;}var stacked=stack.get(array);if(stacked&&stack.get(other)){return stacked==other;}var index=-1,result=true,seen=bitmask&UNORDERED_COMPARE_FLAG?new SetCache():undefined;stack.set(array,other);stack.set(other,array);while(++index<arrLength){var arrValue=array[index],othValue=other[index];if(customizer){var compared=isPartial?customizer(othValue,arrValue,index,other,array,stack):customizer(arrValue,othValue,index,array,other,stack);}if(compared!==undefined){if(compared){continue;}result=false;break;}if(seen){if(!arraySome(other,function(othValue,othIndex){if(!seen.has(othIndex)&&(arrValue===othValue||equalFunc(arrValue,othValue,customizer,bitmask,stack))){return seen.add(othIndex);}})){result=false;break;}}else if(!(arrValue===othValue||equalFunc(arrValue,othValue,customizer,bitmask,stack))){result=false;break;}}stack['delete'](array);stack['delete'](other);return result;}function equalByTag(object,other,tag,equalFunc,customizer,bitmask,stack){switch(tag){case dataViewTag:if(object.byteLength!=other.byteLength||object.byteOffset!=other.byteOffset){return false;}object=object.buffer;other=other.buffer;case arrayBufferTag:if(object.byteLength!=other.byteLength||!equalFunc(new Uint8Array(object),new Uint8Array(other))){return false;}return true;case boolTag:case dateTag:case numberTag:return eq(+object,+other);case errorTag:return object.name==other.name&&object.message==other.message;case regexpTag:case stringTag:return object==other+'';case mapTag:var convert=mapToArray;case setTag:var isPartial=bitmask&PARTIAL_COMPARE_FLAG;convert||(convert=setToArray);if(object.size!=other.size&&!isPartial){return false;}var stacked=stack.get(object);if(stacked){return stacked==other;}bitmask|=UNORDERED_COMPARE_FLAG;stack.set(object,other);var result=equalArrays(convert(object),convert(other),equalFunc,customizer,bitmask,stack);stack['delete'](object);return result;case symbolTag:if(symbolValueOf){return symbolValueOf.call(object)==symbolValueOf.call(other);}}return false;}function equalObjects(object,other,equalFunc,customizer,bitmask,stack){var isPartial=bitmask&PARTIAL_COMPARE_FLAG,objProps=keys(object),objLength=objProps.length,othProps=keys(other),othLength=othProps.length;if(objLength!=othLength&&!isPartial){return false;}var index=objLength;while(index--){var key=objProps[index];if(!(isPartial?key in other:hasOwnProperty.call(other,key))){return false;}}var stacked=stack.get(object);if(stacked&&stack.get(other)){return stacked==other;}var result=true;stack.set(object,other);stack.set(other,object);var skipCtor=isPartial;while(++index<objLength){key=objProps[index];var objValue=object[key],othValue=other[key];if(customizer){var compared=isPartial?customizer(othValue,objValue,key,other,object,stack):customizer(objValue,othValue,key,object,other,stack);}if(!(compared===undefined?objValue===othValue||equalFunc(objValue,othValue,customizer,bitmask,stack):compared)){result=false;break;}skipCtor||(skipCtor=key=='constructor');}if(result&&!skipCtor){var objCtor=object.constructor,othCtor=other.constructor;if(objCtor!=othCtor&&'constructor'in object&&'constructor'in other&&!(typeof objCtor=='function'&&objCtor instanceof objCtor&&typeof othCtor=='function'&&othCtor instanceof othCtor)){result=false;}}stack['delete'](object);stack['delete'](other);return result;}function getMapData(map,key){var data=map.__data__;return isKeyable(key)?data[typeof key=='string'?'string':'hash']:data.map;}function getMatchData(object){var result=keys(object),length=result.length;while(length--){var key=result[length],value=object[key];result[length]=[key,value,isStrictComparable(value)];}return result;}function getNative(object,key){var value=getValue(object,key);return baseIsNative(value)?value:undefined;}var getTag=baseGetTag;if(DataView&&getTag(new DataView(new ArrayBuffer(1)))!=dataViewTag||Map&&getTag(new Map())!=mapTag||Promise&&getTag(Promise.resolve())!=promiseTag||Set&&getTag(new Set())!=setTag||WeakMap&&getTag(new WeakMap())!=weakMapTag){getTag=function(value){var result=objectToString.call(value),Ctor=result==objectTag?value.constructor:undefined,ctorString=Ctor?toSource(Ctor):undefined;if(ctorString){switch(ctorString){case dataViewCtorString:return dataViewTag;case mapCtorString:return mapTag;case promiseCtorString:return promiseTag;case setCtorString:return setTag;case weakMapCtorString:return weakMapTag;}}return result;};}function hasPath(object,path,hasFunc){path=isKey(path,object)?[path]:castPath(path);var result,index=-1,length=path.length;while(++index<length){var key=toKey(path[index]);if(!(result=object!=null&&hasFunc(object,key))){break;}object=object[key];}if(result){return result;}var length=object?object.length:0;return!!length&&isLength(length)&&isIndex(key,length)&&(isArray(object)||isArguments(object));}function isIndex(value,length){length=length==null?MAX_SAFE_INTEGER:length;return!!length&&(typeof value=='number'||reIsUint.test(value))&&value>-1&&value%1==0&&value<length;}function isKey(value,object){if(isArray(value)){return false;}var type=typeof value;if(type=='number'||type=='symbol'||type=='boolean'||value==null||isSymbol(value)){return true;}return reIsPlainProp.test(value)||!reIsDeepProp.test(value)||object!=null&&value in Object(object);}function isKeyable(value){var type=typeof value;return type=='string'||type=='number'||type=='symbol'||type=='boolean'?value!=='__proto__':value===null;}function isMasked(func){return!!maskSrcKey&&maskSrcKey in func;}function isPrototype(value){var Ctor=value&&value.constructor,proto=typeof Ctor=='function'&&Ctor.prototype||objectProto;return value===proto;}function isStrictComparable(value){return value===value&&!isObject(value);}function matchesStrictComparable(key,srcValue){return function(object){if(object==null){return false;}return object[key]===srcValue&&(srcValue!==undefined||key in Object(object));};}var stringToPath=memoize(function(string){string=toString(string);var result=[];if(reLeadingDot.test(string)){result.push('');}string.replace(rePropName,function(match,number,quote,string){result.push(quote?string.replace(reEscapeChar,'$1'):number||match);});return result;});function toKey(value){if(typeof value=='string'||isSymbol(value)){return value;}var result=value+'';return result=='0'&&1/value==-INFINITY?'-0':result;}function toSource(func){if(func!=null){try{return funcToString.call(func);}catch(e){}try{return func+'';}catch(e){}}return'';}function findIndex(array,predicate,fromIndex){var length=array?array.length:0;if(!length){return-1;}var index=fromIndex==null?0:toInteger(fromIndex);if(index<0){index=nativeMax(length+index,0);}return baseFindIndex(array,baseIteratee(predicate,3),index);}var find=createFind(findIndex);function memoize(func,resolver){if(typeof func!='function'||resolver&&typeof resolver!='function'){throw new TypeError(FUNC_ERROR_TEXT);}var memoized=function(){var args=arguments,key=resolver?resolver.apply(this,args):args[0],cache=memoized.cache;if(cache.has(key)){return cache.get(key);}var result=func.apply(this,args);memoized.cache=cache.set(key,result);return result;};memoized.cache=new(memoize.Cache||MapCache)();return memoized;}memoize.Cache=MapCache;function eq(value,other){return value===other||value!==value&&other!==other;}function isArguments(value){return isArrayLikeObject(value)&&hasOwnProperty.call(value,'callee')&&(!propertyIsEnumerable.call(value,'callee')||objectToString.call(value)==argsTag);}var isArray=Array.isArray;function isArrayLike(value){return value!=null&&isLength(value.length)&&!isFunction(value);}function isArrayLikeObject(value){return isObjectLike(value)&&isArrayLike(value);}function isFunction(value){var tag=isObject(value)?objectToString.call(value):'';return tag==funcTag||tag==genTag;}function isLength(value){return typeof value=='number'&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER;}function isObject(value){var type=typeof value;return!!value&&(type=='object'||type=='function');}function isObjectLike(value){return!!value&&typeof value=='object';}function isSymbol(value){return typeof value=='symbol'||isObjectLike(value)&&objectToString.call(value)==symbolTag;}var isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray;function toFinite(value){if(!value){return value===0?value:0;}value=toNumber(value);if(value===INFINITY||value===-INFINITY){var sign=value<0?-1:1;return sign*MAX_INTEGER;}return value===value?value:0;}function toInteger(value){var result=toFinite(value),remainder=result%1;return result===result?remainder?result-remainder:result:0;}function toNumber(value){if(typeof value=='number'){return value;}if(isSymbol(value)){return NAN;}if(isObject(value)){var other=typeof value.valueOf=='function'?value.valueOf():value;value=isObject(other)?other+'':other;}if(typeof value!='string'){return value===0?value:+value;}value=value.replace(reTrim,'');var isBinary=reIsBinary.test(value);return isBinary||reIsOctal.test(value)?freeParseInt(value.slice(2),isBinary?2:8):reIsBadHex.test(value)?NAN:+value;}function toString(value){return value==null?'':baseToString(value);}function get(object,path,defaultValue){var result=object==null?undefined:baseGet(object,path);return result===undefined?defaultValue:result;}function hasIn(object,path){return object!=null&&hasPath(object,path,baseHasIn);}function keys(object){return isArrayLike(object)?arrayLikeKeys(object):baseKeys(object);}function identity(value){return value;}function property(path){return isKey(path)?baseProperty(toKey(path)):basePropertyDeep(path);}module.exports=find;},4180:function(module,__unusedexports,__webpack_require__){var nativeCreate=__webpack_require__(6119);function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{};this.size=0;}module.exports=hashClear;},4184:function(__unusedmodule,exports,__webpack_require__){"use strict";const KeytransformDatastore=__webpack_require__(609);const ShardingDatastore=__webpack_require__(4352);const MountDatastore=__webpack_require__(6299);const TieredDatastore=__webpack_require__(8180);const NamespaceDatastore=__webpack_require__(8032);const shard=__webpack_require__(973);exports.KeytransformDatastore=KeytransformDatastore;exports.ShardingDatastore=ShardingDatastore;exports.MountDatastore=MountDatastore;exports.TieredDatastore=TieredDatastore;exports.NamespaceDatastore=NamespaceDatastore;exports.shard=shard;},4189:function(__unusedmodule,exports){"use strict";const internals={};exports.escapeHtml=function(input){if(!input){return'';}let escaped='';for(let i=0;i<input.length;++i){const charCode=input.charCodeAt(i);if(internals.isSafe(charCode)){escaped+=input[i];}else{escaped+=internals.escapeHtmlChar(charCode);}}return escaped;};exports.escapeJson=function(input){if(!input){return'';}const lessThan=0x3C;const greaterThan=0x3E;const andSymbol=0x26;const lineSeperator=0x2028;let charCode;return input.replace(/[<>&\u2028\u2029]/g,match=>{charCode=match.charCodeAt(0);if(charCode===lessThan){return'\\u003c';}if(charCode===greaterThan){return'\\u003e';}if(charCode===andSymbol){return'\\u0026';}if(charCode===lineSeperator){return'\\u2028';}return'\\u2029';});};internals.escapeHtmlChar=function(charCode){const namedEscape=internals.namedHtml[charCode];if(typeof namedEscape!=='undefined'){return namedEscape;}if(charCode>=256){return'&#'+charCode+';';}const hexValue=Buffer.from(String.fromCharCode(charCode),'ascii').toString('hex');return`&#x${hexValue};`;};internals.isSafe=function(charCode){return typeof internals.safeCharCodes[charCode]!=='undefined';};internals.namedHtml={'38':'&amp;','60':'&lt;','62':'&gt;','34':'&quot;','160':'&nbsp;','162':'&cent;','163':'&pound;','164':'&curren;','169':'&copy;','174':'&reg;'};internals.safeCharCodes=function(){const safe={};for(let i=32;i<123;++i){if(i>=97||i>=65&&i<=90||i>=48&&i<=57||i===32||i===46||i===44||i===45||i===58||i===95){safe[i]=null;}}return safe;}();},4198:function(module,__unusedexports,__webpack_require__){"use strict";const RFC3986=__webpack_require__(839);const internals={Uri:{createUriRegex:function(optionalScheme,allowRelative,relativeOnly,allowQuerySquareBrackets){let scheme=RFC3986.scheme;let prefix;if(relativeOnly){prefix='(?:'+RFC3986.relativeRef+')';}else{if(optionalScheme){scheme='(?:'+optionalScheme+')';}const withScheme='(?:'+scheme+':'+RFC3986.hierPart+')';prefix=allowRelative?'(?:'+withScheme+'|'+RFC3986.relativeRef+')':withScheme;}return new RegExp('^'+prefix+'(?:\\?'+(allowQuerySquareBrackets?RFC3986.queryWithSquareBrackets:RFC3986.query)+')?'+'(?:#'+RFC3986.fragment+')?$');}}};module.exports=internals.Uri;},4203:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=eachLimit;var _eachOfLimit=__webpack_require__(3177);var _eachOfLimit2=_interopRequireDefault(_eachOfLimit);var _withoutIndex=__webpack_require__(124);var _withoutIndex2=_interopRequireDefault(_withoutIndex);var _wrapAsync=__webpack_require__(9396);var _wrapAsync2=_interopRequireDefault(_wrapAsync);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function eachLimit(coll,limit,iteratee,callback){(0,_eachOfLimit2.default)(limit)(coll,(0,_withoutIndex2.default)((0,_wrapAsync2.default)(iteratee)),callback);}module.exports=exports['default'];},4204:function(module,exports){(function(){var dbits;var canary=0xdeadbeefcafe;var j_lm=(canary&0xffffff)==0xefcafe;function BigInteger(a,b,c){if(a!=null)if("number"==typeof a)this.fromNumber(a,b,c);else if(b==null&&"string"!=typeof a)this.fromString(a,256);else this.fromString(a,b);}function nbi(){return new BigInteger(null);}function am1(i,x,w,j,c,n){while(--n>=0){var v=x*this[i++]+w[j]+c;c=Math.floor(v/0x4000000);w[j++]=v&0x3ffffff;}return c;}function am2(i,x,w,j,c,n){var xl=x&0x7fff,xh=x>>15;while(--n>=0){var l=this[i]&0x7fff;var h=this[i++]>>15;var m=xh*l+h*xl;l=xl*l+((m&0x7fff)<<15)+w[j]+(c&0x3fffffff);c=(l>>>30)+(m>>>15)+xh*h+(c>>>30);w[j++]=l&0x3fffffff;}return c;}function am3(i,x,w,j,c,n){var xl=x&0x3fff,xh=x>>14;while(--n>=0){var l=this[i]&0x3fff;var h=this[i++]>>14;var m=xh*l+h*xl;l=xl*l+((m&0x3fff)<<14)+w[j]+c;c=(l>>28)+(m>>14)+xh*h;w[j++]=l&0xfffffff;}return c;}var inBrowser=typeof navigator!=="undefined";if(inBrowser&&j_lm&&navigator.appName=="Microsoft Internet Explorer"){BigInteger.prototype.am=am2;dbits=30;}else if(inBrowser&&j_lm&&navigator.appName!="Netscape"){BigInteger.prototype.am=am1;dbits=26;}else{BigInteger.prototype.am=am3;dbits=28;}BigInteger.prototype.DB=dbits;BigInteger.prototype.DM=(1<<dbits)-1;BigInteger.prototype.DV=1<<dbits;var BI_FP=52;BigInteger.prototype.FV=Math.pow(2,BI_FP);BigInteger.prototype.F1=BI_FP-dbits;BigInteger.prototype.F2=2*dbits-BI_FP;var BI_RM="0123456789abcdefghijklmnopqrstuvwxyz";var BI_RC=new Array();var rr,vv;rr="0".charCodeAt(0);for(vv=0;vv<=9;++vv)BI_RC[rr++]=vv;rr="a".charCodeAt(0);for(vv=10;vv<36;++vv)BI_RC[rr++]=vv;rr="A".charCodeAt(0);for(vv=10;vv<36;++vv)BI_RC[rr++]=vv;function int2char(n){return BI_RM.charAt(n);}function intAt(s,i){var c=BI_RC[s.charCodeAt(i)];return c==null?-1:c;}function bnpCopyTo(r){for(var i=this.t-1;i>=0;--i)r[i]=this[i];r.t=this.t;r.s=this.s;}function bnpFromInt(x){this.t=1;this.s=x<0?-1:0;if(x>0)this[0]=x;else if(x<-1)this[0]=x+this.DV;else this.t=0;}function nbv(i){var r=nbi();r.fromInt(i);return r;}function bnpFromString(s,b){var k;if(b==16)k=4;else if(b==8)k=3;else if(b==256)k=8;else if(b==2)k=1;else if(b==32)k=5;else if(b==4)k=2;else{this.fromRadix(s,b);return;}this.t=0;this.s=0;var i=s.length,mi=false,sh=0;while(--i>=0){var x=k==8?s[i]&0xff:intAt(s,i);if(x<0){if(s.charAt(i)=="-")mi=true;continue;}mi=false;if(sh==0)this[this.t++]=x;else if(sh+k>this.DB){this[this.t-1]|=(x&(1<<this.DB-sh)-1)<<sh;this[this.t++]=x>>this.DB-sh;}else this[this.t-1]|=x<<sh;sh+=k;if(sh>=this.DB)sh-=this.DB;}if(k==8&&(s[0]&0x80)!=0){this.s=-1;if(sh>0)this[this.t-1]|=(1<<this.DB-sh)-1<<sh;}this.clamp();if(mi)BigInteger.ZERO.subTo(this,this);}function bnpClamp(){var c=this.s&this.DM;while(this.t>0&&this[this.t-1]==c)--this.t;}function bnToString(b){if(this.s<0)return"-"+this.negate().toString(b);var k;if(b==16)k=4;else if(b==8)k=3;else if(b==2)k=1;else if(b==32)k=5;else if(b==4)k=2;else return this.toRadix(b);var km=(1<<k)-1,d,m=false,r="",i=this.t;var p=this.DB-i*this.DB%k;if(i-->0){if(p<this.DB&&(d=this[i]>>p)>0){m=true;r=int2char(d);}while(i>=0){if(p<k){d=(this[i]&(1<<p)-1)<<k-p;d|=this[--i]>>(p+=this.DB-k);}else{d=this[i]>>(p-=k)&km;if(p<=0){p+=this.DB;--i;}}if(d>0)m=true;if(m)r+=int2char(d);}}return m?r:"0";}function bnNegate(){var r=nbi();BigInteger.ZERO.subTo(this,r);return r;}function bnAbs(){return this.s<0?this.negate():this;}function bnCompareTo(a){var r=this.s-a.s;if(r!=0)return r;var i=this.t;r=i-a.t;if(r!=0)return this.s<0?-r:r;while(--i>=0)if((r=this[i]-a[i])!=0)return r;return 0;}function nbits(x){var r=1,t;if((t=x>>>16)!=0){x=t;r+=16;}if((t=x>>8)!=0){x=t;r+=8;}if((t=x>>4)!=0){x=t;r+=4;}if((t=x>>2)!=0){x=t;r+=2;}if((t=x>>1)!=0){x=t;r+=1;}return r;}function bnBitLength(){if(this.t<=0)return 0;return this.DB*(this.t-1)+nbits(this[this.t-1]^this.s&this.DM);}function bnpDLShiftTo(n,r){var i;for(i=this.t-1;i>=0;--i)r[i+n]=this[i];for(i=n-1;i>=0;--i)r[i]=0;r.t=this.t+n;r.s=this.s;}function bnpDRShiftTo(n,r){for(var i=n;i<this.t;++i)r[i-n]=this[i];r.t=Math.max(this.t-n,0);r.s=this.s;}function bnpLShiftTo(n,r){var bs=n%this.DB;var cbs=this.DB-bs;var bm=(1<<cbs)-1;var ds=Math.floor(n/this.DB),c=this.s<<bs&this.DM,i;for(i=this.t-1;i>=0;--i){r[i+ds+1]=this[i]>>cbs|c;c=(this[i]&bm)<<bs;}for(i=ds-1;i>=0;--i)r[i]=0;r[ds]=c;r.t=this.t+ds+1;r.s=this.s;r.clamp();}function bnpRShiftTo(n,r){r.s=this.s;var ds=Math.floor(n/this.DB);if(ds>=this.t){r.t=0;return;}var bs=n%this.DB;var cbs=this.DB-bs;var bm=(1<<bs)-1;r[0]=this[ds]>>bs;for(var i=ds+1;i<this.t;++i){r[i-ds-1]|=(this[i]&bm)<<cbs;r[i-ds]=this[i]>>bs;}if(bs>0)r[this.t-ds-1]|=(this.s&bm)<<cbs;r.t=this.t-ds;r.clamp();}function bnpSubTo(a,r){var i=0,c=0,m=Math.min(a.t,this.t);while(i<m){c+=this[i]-a[i];r[i++]=c&this.DM;c>>=this.DB;}if(a.t<this.t){c-=a.s;while(i<this.t){c+=this[i];r[i++]=c&this.DM;c>>=this.DB;}c+=this.s;}else{c+=this.s;while(i<a.t){c-=a[i];r[i++]=c&this.DM;c>>=this.DB;}c-=a.s;}r.s=c<0?-1:0;if(c<-1)r[i++]=this.DV+c;else if(c>0)r[i++]=c;r.t=i;r.clamp();}function bnpMultiplyTo(a,r){var x=this.abs(),y=a.abs();var i=x.t;r.t=i+y.t;while(--i>=0)r[i]=0;for(i=0;i<y.t;++i)r[i+x.t]=x.am(0,y[i],r,i,0,x.t);r.s=0;r.clamp();if(this.s!=a.s)BigInteger.ZERO.subTo(r,r);}function bnpSquareTo(r){var x=this.abs();var i=r.t=2*x.t;while(--i>=0)r[i]=0;for(i=0;i<x.t-1;++i){var c=x.am(i,x[i],r,2*i,0,1);if((r[i+x.t]+=x.am(i+1,2*x[i],r,2*i+1,c,x.t-i-1))>=x.DV){r[i+x.t]-=x.DV;r[i+x.t+1]=1;}}if(r.t>0)r[r.t-1]+=x.am(i,x[i],r,2*i,0,1);r.s=0;r.clamp();}function bnpDivRemTo(m,q,r){var pm=m.abs();if(pm.t<=0)return;var pt=this.abs();if(pt.t<pm.t){if(q!=null)q.fromInt(0);if(r!=null)this.copyTo(r);return;}if(r==null)r=nbi();var y=nbi(),ts=this.s,ms=m.s;var nsh=this.DB-nbits(pm[pm.t-1]);if(nsh>0){pm.lShiftTo(nsh,y);pt.lShiftTo(nsh,r);}else{pm.copyTo(y);pt.copyTo(r);}var ys=y.t;var y0=y[ys-1];if(y0==0)return;var yt=y0*(1<<this.F1)+(ys>1?y[ys-2]>>this.F2:0);var d1=this.FV/yt,d2=(1<<this.F1)/yt,e=1<<this.F2;var i=r.t,j=i-ys,t=q==null?nbi():q;y.dlShiftTo(j,t);if(r.compareTo(t)>=0){r[r.t++]=1;r.subTo(t,r);}BigInteger.ONE.dlShiftTo(ys,t);t.subTo(y,y);while(y.t<ys)y[y.t++]=0;while(--j>=0){var qd=r[--i]==y0?this.DM:Math.floor(r[i]*d1+(r[i-1]+e)*d2);if((r[i]+=y.am(0,qd,r,j,0,ys))<qd){y.dlShiftTo(j,t);r.subTo(t,r);while(r[i]<--qd)r.subTo(t,r);}}if(q!=null){r.drShiftTo(ys,q);if(ts!=ms)BigInteger.ZERO.subTo(q,q);}r.t=ys;r.clamp();if(nsh>0)r.rShiftTo(nsh,r);if(ts<0)BigInteger.ZERO.subTo(r,r);}function bnMod(a){var r=nbi();this.abs().divRemTo(a,null,r);if(this.s<0&&r.compareTo(BigInteger.ZERO)>0)a.subTo(r,r);return r;}function Classic(m){this.m=m;}function cConvert(x){if(x.s<0||x.compareTo(this.m)>=0)return x.mod(this.m);else return x;}function cRevert(x){return x;}function cReduce(x){x.divRemTo(this.m,null,x);}function cMulTo(x,y,r){x.multiplyTo(y,r);this.reduce(r);}function cSqrTo(x,r){x.squareTo(r);this.reduce(r);}Classic.prototype.convert=cConvert;Classic.prototype.revert=cRevert;Classic.prototype.reduce=cReduce;Classic.prototype.mulTo=cMulTo;Classic.prototype.sqrTo=cSqrTo;function bnpInvDigit(){if(this.t<1)return 0;var x=this[0];if((x&1)==0)return 0;var y=x&3;y=y*(2-(x&0xf)*y)&0xf;y=y*(2-(x&0xff)*y)&0xff;y=y*(2-((x&0xffff)*y&0xffff))&0xffff;y=y*(2-x*y%this.DV)%this.DV;return y>0?this.DV-y:-y;}function Montgomery(m){this.m=m;this.mp=m.invDigit();this.mpl=this.mp&0x7fff;this.mph=this.mp>>15;this.um=(1<<m.DB-15)-1;this.mt2=2*m.t;}function montConvert(x){var r=nbi();x.abs().dlShiftTo(this.m.t,r);r.divRemTo(this.m,null,r);if(x.s<0&&r.compareTo(BigInteger.ZERO)>0)this.m.subTo(r,r);return r;}function montRevert(x){var r=nbi();x.copyTo(r);this.reduce(r);return r;}function montReduce(x){while(x.t<=this.mt2)x[x.t++]=0;for(var i=0;i<this.m.t;++i){var j=x[i]&0x7fff;var u0=j*this.mpl+((j*this.mph+(x[i]>>15)*this.mpl&this.um)<<15)&x.DM;j=i+this.m.t;x[j]+=this.m.am(0,u0,x,i,0,this.m.t);while(x[j]>=x.DV){x[j]-=x.DV;x[++j]++;}}x.clamp();x.drShiftTo(this.m.t,x);if(x.compareTo(this.m)>=0)x.subTo(this.m,x);}function montSqrTo(x,r){x.squareTo(r);this.reduce(r);}function montMulTo(x,y,r){x.multiplyTo(y,r);this.reduce(r);}Montgomery.prototype.convert=montConvert;Montgomery.prototype.revert=montRevert;Montgomery.prototype.reduce=montReduce;Montgomery.prototype.mulTo=montMulTo;Montgomery.prototype.sqrTo=montSqrTo;function bnpIsEven(){return(this.t>0?this[0]&1:this.s)==0;}function bnpExp(e,z){if(e>0xffffffff||e<1)return BigInteger.ONE;var r=nbi(),r2=nbi(),g=z.convert(this),i=nbits(e)-1;g.copyTo(r);while(--i>=0){z.sqrTo(r,r2);if((e&1<<i)>0)z.mulTo(r2,g,r);else{var t=r;r=r2;r2=t;}}return z.revert(r);}function bnModPowInt(e,m){var z;if(e<256||m.isEven())z=new Classic(m);else z=new Montgomery(m);return this.exp(e,z);}BigInteger.prototype.copyTo=bnpCopyTo;BigInteger.prototype.fromInt=bnpFromInt;BigInteger.prototype.fromString=bnpFromString;BigInteger.prototype.clamp=bnpClamp;BigInteger.prototype.dlShiftTo=bnpDLShiftTo;BigInteger.prototype.drShiftTo=bnpDRShiftTo;BigInteger.prototype.lShiftTo=bnpLShiftTo;BigInteger.prototype.rShiftTo=bnpRShiftTo;BigInteger.prototype.subTo=bnpSubTo;BigInteger.prototype.multiplyTo=bnpMultiplyTo;BigInteger.prototype.squareTo=bnpSquareTo;BigInteger.prototype.divRemTo=bnpDivRemTo;BigInteger.prototype.invDigit=bnpInvDigit;BigInteger.prototype.isEven=bnpIsEven;BigInteger.prototype.exp=bnpExp;BigInteger.prototype.toString=bnToString;BigInteger.prototype.negate=bnNegate;BigInteger.prototype.abs=bnAbs;BigInteger.prototype.compareTo=bnCompareTo;BigInteger.prototype.bitLength=bnBitLength;BigInteger.prototype.mod=bnMod;BigInteger.prototype.modPowInt=bnModPowInt;BigInteger.ZERO=nbv(0);BigInteger.ONE=nbv(1);function bnClone(){var r=nbi();this.copyTo(r);return r;}function bnIntValue(){if(this.s<0){if(this.t==1)return this[0]-this.DV;else if(this.t==0)return-1;}else if(this.t==1)return this[0];else if(this.t==0)return 0;return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0];}function bnByteValue(){return this.t==0?this.s:this[0]<<24>>24;}function bnShortValue(){return this.t==0?this.s:this[0]<<16>>16;}function bnpChunkSize(r){return Math.floor(Math.LN2*this.DB/Math.log(r));}function bnSigNum(){if(this.s<0)return-1;else if(this.t<=0||this.t==1&&this[0]<=0)return 0;else return 1;}function bnpToRadix(b){if(b==null)b=10;if(this.signum()==0||b<2||b>36)return"0";var cs=this.chunkSize(b);var a=Math.pow(b,cs);var d=nbv(a),y=nbi(),z=nbi(),r="";this.divRemTo(d,y,z);while(y.signum()>0){r=(a+z.intValue()).toString(b).substr(1)+r;y.divRemTo(d,y,z);}return z.intValue().toString(b)+r;}function bnpFromRadix(s,b){this.fromInt(0);if(b==null)b=10;var cs=this.chunkSize(b);var d=Math.pow(b,cs),mi=false,j=0,w=0;for(var i=0;i<s.length;++i){var x=intAt(s,i);if(x<0){if(s.charAt(i)=="-"&&this.signum()==0)mi=true;continue;}w=b*w+x;if(++j>=cs){this.dMultiply(d);this.dAddOffset(w,0);j=0;w=0;}}if(j>0){this.dMultiply(Math.pow(b,j));this.dAddOffset(w,0);}if(mi)BigInteger.ZERO.subTo(this,this);}function bnpFromNumber(a,b,c){if("number"==typeof b){if(a<2)this.fromInt(1);else{this.fromNumber(a,c);if(!this.testBit(a-1))this.bitwiseTo(BigInteger.ONE.shiftLeft(a-1),op_or,this);if(this.isEven())this.dAddOffset(1,0);while(!this.isProbablePrime(b)){this.dAddOffset(2,0);if(this.bitLength()>a)this.subTo(BigInteger.ONE.shiftLeft(a-1),this);}}}else{var x=new Array(),t=a&7;x.length=(a>>3)+1;b.nextBytes(x);if(t>0)x[0]&=(1<<t)-1;else x[0]=0;this.fromString(x,256);}}function bnToByteArray(){var i=this.t,r=new Array();r[0]=this.s;var p=this.DB-i*this.DB%8,d,k=0;if(i-->0){if(p<this.DB&&(d=this[i]>>p)!=(this.s&this.DM)>>p)r[k++]=d|this.s<<this.DB-p;while(i>=0){if(p<8){d=(this[i]&(1<<p)-1)<<8-p;d|=this[--i]>>(p+=this.DB-8);}else{d=this[i]>>(p-=8)&0xff;if(p<=0){p+=this.DB;--i;}}if((d&0x80)!=0)d|=-256;if(k==0&&(this.s&0x80)!=(d&0x80))++k;if(k>0||d!=this.s)r[k++]=d;}}return r;}function bnEquals(a){return this.compareTo(a)==0;}function bnMin(a){return this.compareTo(a)<0?this:a;}function bnMax(a){return this.compareTo(a)>0?this:a;}function bnpBitwiseTo(a,op,r){var i,f,m=Math.min(a.t,this.t);for(i=0;i<m;++i)r[i]=op(this[i],a[i]);if(a.t<this.t){f=a.s&this.DM;for(i=m;i<this.t;++i)r[i]=op(this[i],f);r.t=this.t;}else{f=this.s&this.DM;for(i=m;i<a.t;++i)r[i]=op(f,a[i]);r.t=a.t;}r.s=op(this.s,a.s);r.clamp();}function op_and(x,y){return x&y;}function bnAnd(a){var r=nbi();this.bitwiseTo(a,op_and,r);return r;}function op_or(x,y){return x|y;}function bnOr(a){var r=nbi();this.bitwiseTo(a,op_or,r);return r;}function op_xor(x,y){return x^y;}function bnXor(a){var r=nbi();this.bitwiseTo(a,op_xor,r);return r;}function op_andnot(x,y){return x&~y;}function bnAndNot(a){var r=nbi();this.bitwiseTo(a,op_andnot,r);return r;}function bnNot(){var r=nbi();for(var i=0;i<this.t;++i)r[i]=this.DM&~this[i];r.t=this.t;r.s=~this.s;return r;}function bnShiftLeft(n){var r=nbi();if(n<0)this.rShiftTo(-n,r);else this.lShiftTo(n,r);return r;}function bnShiftRight(n){var r=nbi();if(n<0)this.lShiftTo(-n,r);else this.rShiftTo(n,r);return r;}function lbit(x){if(x==0)return-1;var r=0;if((x&0xffff)==0){x>>=16;r+=16;}if((x&0xff)==0){x>>=8;r+=8;}if((x&0xf)==0){x>>=4;r+=4;}if((x&3)==0){x>>=2;r+=2;}if((x&1)==0)++r;return r;}function bnGetLowestSetBit(){for(var i=0;i<this.t;++i)if(this[i]!=0)return i*this.DB+lbit(this[i]);if(this.s<0)return this.t*this.DB;return-1;}function cbit(x){var r=0;while(x!=0){x&=x-1;++r;}return r;}function bnBitCount(){var r=0,x=this.s&this.DM;for(var i=0;i<this.t;++i)r+=cbit(this[i]^x);return r;}function bnTestBit(n){var j=Math.floor(n/this.DB);if(j>=this.t)return this.s!=0;return(this[j]&1<<n%this.DB)!=0;}function bnpChangeBit(n,op){var r=BigInteger.ONE.shiftLeft(n);this.bitwiseTo(r,op,r);return r;}function bnSetBit(n){return this.changeBit(n,op_or);}function bnClearBit(n){return this.changeBit(n,op_andnot);}function bnFlipBit(n){return this.changeBit(n,op_xor);}function bnpAddTo(a,r){var i=0,c=0,m=Math.min(a.t,this.t);while(i<m){c+=this[i]+a[i];r[i++]=c&this.DM;c>>=this.DB;}if(a.t<this.t){c+=a.s;while(i<this.t){c+=this[i];r[i++]=c&this.DM;c>>=this.DB;}c+=this.s;}else{c+=this.s;while(i<a.t){c+=a[i];r[i++]=c&this.DM;c>>=this.DB;}c+=a.s;}r.s=c<0?-1:0;if(c>0)r[i++]=c;else if(c<-1)r[i++]=this.DV+c;r.t=i;r.clamp();}function bnAdd(a){var r=nbi();this.addTo(a,r);return r;}function bnSubtract(a){var r=nbi();this.subTo(a,r);return r;}function bnMultiply(a){var r=nbi();this.multiplyTo(a,r);return r;}function bnSquare(){var r=nbi();this.squareTo(r);return r;}function bnDivide(a){var r=nbi();this.divRemTo(a,r,null);return r;}function bnRemainder(a){var r=nbi();this.divRemTo(a,null,r);return r;}function bnDivideAndRemainder(a){var q=nbi(),r=nbi();this.divRemTo(a,q,r);return new Array(q,r);}function bnpDMultiply(n){this[this.t]=this.am(0,n-1,this,0,0,this.t);++this.t;this.clamp();}function bnpDAddOffset(n,w){if(n==0)return;while(this.t<=w)this[this.t++]=0;this[w]+=n;while(this[w]>=this.DV){this[w]-=this.DV;if(++w>=this.t)this[this.t++]=0;++this[w];}}function NullExp(){}function nNop(x){return x;}function nMulTo(x,y,r){x.multiplyTo(y,r);}function nSqrTo(x,r){x.squareTo(r);}NullExp.prototype.convert=nNop;NullExp.prototype.revert=nNop;NullExp.prototype.mulTo=nMulTo;NullExp.prototype.sqrTo=nSqrTo;function bnPow(e){return this.exp(e,new NullExp());}function bnpMultiplyLowerTo(a,n,r){var i=Math.min(this.t+a.t,n);r.s=0;r.t=i;while(i>0)r[--i]=0;var j;for(j=r.t-this.t;i<j;++i)r[i+this.t]=this.am(0,a[i],r,i,0,this.t);for(j=Math.min(a.t,n);i<j;++i)this.am(0,a[i],r,i,0,n-i);r.clamp();}function bnpMultiplyUpperTo(a,n,r){--n;var i=r.t=this.t+a.t-n;r.s=0;while(--i>=0)r[i]=0;for(i=Math.max(n-this.t,0);i<a.t;++i)r[this.t+i-n]=this.am(n-i,a[i],r,0,0,this.t+i-n);r.clamp();r.drShiftTo(1,r);}function Barrett(m){this.r2=nbi();this.q3=nbi();BigInteger.ONE.dlShiftTo(2*m.t,this.r2);this.mu=this.r2.divide(m);this.m=m;}function barrettConvert(x){if(x.s<0||x.t>2*this.m.t)return x.mod(this.m);else if(x.compareTo(this.m)<0)return x;else{var r=nbi();x.copyTo(r);this.reduce(r);return r;}}function barrettRevert(x){return x;}function barrettReduce(x){x.drShiftTo(this.m.t-1,this.r2);if(x.t>this.m.t+1){x.t=this.m.t+1;x.clamp();}this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3);this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);while(x.compareTo(this.r2)<0)x.dAddOffset(1,this.m.t+1);x.subTo(this.r2,x);while(x.compareTo(this.m)>=0)x.subTo(this.m,x);}function barrettSqrTo(x,r){x.squareTo(r);this.reduce(r);}function barrettMulTo(x,y,r){x.multiplyTo(y,r);this.reduce(r);}Barrett.prototype.convert=barrettConvert;Barrett.prototype.revert=barrettRevert;Barrett.prototype.reduce=barrettReduce;Barrett.prototype.mulTo=barrettMulTo;Barrett.prototype.sqrTo=barrettSqrTo;function bnModPow(e,m){var i=e.bitLength(),k,r=nbv(1),z;if(i<=0)return r;else if(i<18)k=1;else if(i<48)k=3;else if(i<144)k=4;else if(i<768)k=5;else k=6;if(i<8)z=new Classic(m);else if(m.isEven())z=new Barrett(m);else z=new Montgomery(m);var g=new Array(),n=3,k1=k-1,km=(1<<k)-1;g[1]=z.convert(this);if(k>1){var g2=nbi();z.sqrTo(g[1],g2);while(n<=km){g[n]=nbi();z.mulTo(g2,g[n-2],g[n]);n+=2;}}var j=e.t-1,w,is1=true,r2=nbi(),t;i=nbits(e[j])-1;while(j>=0){if(i>=k1)w=e[j]>>i-k1&km;else{w=(e[j]&(1<<i+1)-1)<<k1-i;if(j>0)w|=e[j-1]>>this.DB+i-k1;}n=k;while((w&1)==0){w>>=1;--n;}if((i-=n)<0){i+=this.DB;--j;}if(is1){g[w].copyTo(r);is1=false;}else{while(n>1){z.sqrTo(r,r2);z.sqrTo(r2,r);n-=2;}if(n>0)z.sqrTo(r,r2);else{t=r;r=r2;r2=t;}z.mulTo(r2,g[w],r);}while(j>=0&&(e[j]&1<<i)==0){z.sqrTo(r,r2);t=r;r=r2;r2=t;if(--i<0){i=this.DB-1;--j;}}}return z.revert(r);}function bnGCD(a){var x=this.s<0?this.negate():this.clone();var y=a.s<0?a.negate():a.clone();if(x.compareTo(y)<0){var t=x;x=y;y=t;}var i=x.getLowestSetBit(),g=y.getLowestSetBit();if(g<0)return x;if(i<g)g=i;if(g>0){x.rShiftTo(g,x);y.rShiftTo(g,y);}while(x.signum()>0){if((i=x.getLowestSetBit())>0)x.rShiftTo(i,x);if((i=y.getLowestSetBit())>0)y.rShiftTo(i,y);if(x.compareTo(y)>=0){x.subTo(y,x);x.rShiftTo(1,x);}else{y.subTo(x,y);y.rShiftTo(1,y);}}if(g>0)y.lShiftTo(g,y);return y;}function bnpModInt(n){if(n<=0)return 0;var d=this.DV%n,r=this.s<0?n-1:0;if(this.t>0)if(d==0)r=this[0]%n;else for(var i=this.t-1;i>=0;--i)r=(d*r+this[i])%n;return r;}function bnModInverse(m){var ac=m.isEven();if(this.isEven()&&ac||m.signum()==0)return BigInteger.ZERO;var u=m.clone(),v=this.clone();var a=nbv(1),b=nbv(0),c=nbv(0),d=nbv(1);while(u.signum()!=0){while(u.isEven()){u.rShiftTo(1,u);if(ac){if(!a.isEven()||!b.isEven()){a.addTo(this,a);b.subTo(m,b);}a.rShiftTo(1,a);}else if(!b.isEven())b.subTo(m,b);b.rShiftTo(1,b);}while(v.isEven()){v.rShiftTo(1,v);if(ac){if(!c.isEven()||!d.isEven()){c.addTo(this,c);d.subTo(m,d);}c.rShiftTo(1,c);}else if(!d.isEven())d.subTo(m,d);d.rShiftTo(1,d);}if(u.compareTo(v)>=0){u.subTo(v,u);if(ac)a.subTo(c,a);b.subTo(d,b);}else{v.subTo(u,v);if(ac)c.subTo(a,c);d.subTo(b,d);}}if(v.compareTo(BigInteger.ONE)!=0)return BigInteger.ZERO;if(d.compareTo(m)>=0)return d.subtract(m);if(d.signum()<0)d.addTo(m,d);else return d;if(d.signum()<0)return d.add(m);else return d;}var lowprimes=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997];var lplim=(1<<26)/lowprimes[lowprimes.length-1];function bnIsProbablePrime(t){var i,x=this.abs();if(x.t==1&&x[0]<=lowprimes[lowprimes.length-1]){for(i=0;i<lowprimes.length;++i)if(x[0]==lowprimes[i])return true;return false;}if(x.isEven())return false;i=1;while(i<lowprimes.length){var m=lowprimes[i],j=i+1;while(j<lowprimes.length&&m<lplim)m*=lowprimes[j++];m=x.modInt(m);while(i<j)if(m%lowprimes[i++]==0)return false;}return x.millerRabin(t);}function bnpMillerRabin(t){var n1=this.subtract(BigInteger.ONE);var k=n1.getLowestSetBit();if(k<=0)return false;var r=n1.shiftRight(k);t=t+1>>1;if(t>lowprimes.length)t=lowprimes.length;var a=nbi();for(var i=0;i<t;++i){a.fromInt(lowprimes[Math.floor(Math.random()*lowprimes.length)]);var y=a.modPow(r,this);if(y.compareTo(BigInteger.ONE)!=0&&y.compareTo(n1)!=0){var j=1;while(j++<k&&y.compareTo(n1)!=0){y=y.modPowInt(2,this);if(y.compareTo(BigInteger.ONE)==0)return false;}if(y.compareTo(n1)!=0)return false;}}return true;}BigInteger.prototype.chunkSize=bnpChunkSize;BigInteger.prototype.toRadix=bnpToRadix;BigInteger.prototype.fromRadix=bnpFromRadix;BigInteger.prototype.fromNumber=bnpFromNumber;BigInteger.prototype.bitwiseTo=bnpBitwiseTo;BigInteger.prototype.changeBit=bnpChangeBit;BigInteger.prototype.addTo=bnpAddTo;BigInteger.prototype.dMultiply=bnpDMultiply;BigInteger.prototype.dAddOffset=bnpDAddOffset;BigInteger.prototype.multiplyLowerTo=bnpMultiplyLowerTo;BigInteger.prototype.multiplyUpperTo=bnpMultiplyUpperTo;BigInteger.prototype.modInt=bnpModInt;BigInteger.prototype.millerRabin=bnpMillerRabin;BigInteger.prototype.clone=bnClone;BigInteger.prototype.intValue=bnIntValue;BigInteger.prototype.byteValue=bnByteValue;BigInteger.prototype.shortValue=bnShortValue;BigInteger.prototype.signum=bnSigNum;BigInteger.prototype.toByteArray=bnToByteArray;BigInteger.prototype.equals=bnEquals;BigInteger.prototype.min=bnMin;BigInteger.prototype.max=bnMax;BigInteger.prototype.and=bnAnd;BigInteger.prototype.or=bnOr;BigInteger.prototype.xor=bnXor;BigInteger.prototype.andNot=bnAndNot;BigInteger.prototype.not=bnNot;BigInteger.prototype.shiftLeft=bnShiftLeft;BigInteger.prototype.shiftRight=bnShiftRight;BigInteger.prototype.getLowestSetBit=bnGetLowestSetBit;BigInteger.prototype.bitCount=bnBitCount;BigInteger.prototype.testBit=bnTestBit;BigInteger.prototype.setBit=bnSetBit;BigInteger.prototype.clearBit=bnClearBit;BigInteger.prototype.flipBit=bnFlipBit;BigInteger.prototype.add=bnAdd;BigInteger.prototype.subtract=bnSubtract;BigInteger.prototype.multiply=bnMultiply;BigInteger.prototype.divide=bnDivide;BigInteger.prototype.remainder=bnRemainder;BigInteger.prototype.divideAndRemainder=bnDivideAndRemainder;BigInteger.prototype.modPow=bnModPow;BigInteger.prototype.modInverse=bnModInverse;BigInteger.prototype.pow=bnPow;BigInteger.prototype.gcd=bnGCD;BigInteger.prototype.isProbablePrime=bnIsProbablePrime;BigInteger.prototype.square=bnSquare;BigInteger.prototype.Barrett=Barrett;var rng_state;var rng_pool;var rng_pptr;function rng_seed_int(x){rng_pool[rng_pptr++]^=x&255;rng_pool[rng_pptr++]^=x>>8&255;rng_pool[rng_pptr++]^=x>>16&255;rng_pool[rng_pptr++]^=x>>24&255;if(rng_pptr>=rng_psize)rng_pptr-=rng_psize;}function rng_seed_time(){rng_seed_int(new Date().getTime());}if(rng_pool==null){rng_pool=new Array();rng_pptr=0;var t;if(typeof window!=="undefined"&&window.crypto){if(window.crypto.getRandomValues){var ua=new Uint8Array(32);window.crypto.getRandomValues(ua);for(t=0;t<32;++t)rng_pool[rng_pptr++]=ua[t];}else if(navigator.appName=="Netscape"&&navigator.appVersion<"5"){var z=window.crypto.random(32);for(t=0;t<z.length;++t)rng_pool[rng_pptr++]=z.charCodeAt(t)&255;}}while(rng_pptr<rng_psize){t=Math.floor(65536*Math.random());rng_pool[rng_pptr++]=t>>>8;rng_pool[rng_pptr++]=t&255;}rng_pptr=0;rng_seed_time();}function rng_get_byte(){if(rng_state==null){rng_seed_time();rng_state=prng_newstate();rng_state.init(rng_pool);for(rng_pptr=0;rng_pptr<rng_pool.length;++rng_pptr)rng_pool[rng_pptr]=0;rng_pptr=0;}return rng_state.next();}function rng_get_bytes(ba){var i;for(i=0;i<ba.length;++i)ba[i]=rng_get_byte();}function SecureRandom(){}SecureRandom.prototype.nextBytes=rng_get_bytes;function Arcfour(){this.i=0;this.j=0;this.S=new Array();}function ARC4init(key){var i,j,t;for(i=0;i<256;++i)this.S[i]=i;j=0;for(i=0;i<256;++i){j=j+this.S[i]+key[i%key.length]&255;t=this.S[i];this.S[i]=this.S[j];this.S[j]=t;}this.i=0;this.j=0;}function ARC4next(){var t;this.i=this.i+1&255;this.j=this.j+this.S[this.i]&255;t=this.S[this.i];this.S[this.i]=this.S[this.j];this.S[this.j]=t;return this.S[t+this.S[this.i]&255];}Arcfour.prototype.init=ARC4init;Arcfour.prototype.next=ARC4next;function prng_newstate(){return new Arcfour();}var rng_psize=256;if(true){exports=module.exports={default:BigInteger,BigInteger:BigInteger,SecureRandom:SecureRandom};}else{}}).call(this);},4216:function(module,__unusedexports,__webpack_require__){"use strict";const multiaddr=__webpack_require__(5920);function ensureMultiaddr(ma){if(multiaddr.isMultiaddr(ma)){return ma;}return multiaddr(ma);}module.exports={ensureMultiaddr:ensureMultiaddr};},4219:function(module,__unusedexports,__webpack_require__){var nativeCreate=__webpack_require__(6119);var HASH_UNDEFINED='__lodash_hash_undefined__';function hashSet(key,value){var data=this.__data__;this.size+=this.has(key)?0:1;data[key]=nativeCreate&&value===undefined?HASH_UNDEFINED:value;return this;}module.exports=hashSet;},4221:function(__unusedmodule,exports,__webpack_require__){"use strict";var common=__webpack_require__(2540);var v6=__webpack_require__(2638);exports.isValid=function(){return this.valid;};exports.isInSubnet=common.isInSubnet;exports.isCorrect=common.isCorrect(v6.BITS);exports.isCanonical=common.falseIfInvalid(function(){return this.addressMinusSuffix===this.canonicalForm();});exports.isLinkLocal=common.falseIfInvalid(function(){if(this.getBitsBase2(0,64)==='1111111010000000000000000000000000000000000000000000000000000000'){return true;}return false;});exports.isMulticast=common.falseIfInvalid(function(){return this.getType()==='Multicast';});exports.is4=common.falseIfInvalid(function(){return this.v4;});exports.isTeredo=common.falseIfInvalid(function(){return this.isInSubnet(new this.constructor('2001::/32'));});exports.is6to4=common.falseIfInvalid(function(){return this.isInSubnet(new this.constructor('2002::/16'));});exports.isLoopback=common.falseIfInvalid(function(){return this.getType()==='Loopback';});},4229:function(module,__unusedexports,__webpack_require__){"use strict";const setImmediate=__webpack_require__(7368);const multihashing=__webpack_require__(9424);const validatePublicKeyRecord=(key,publicKey,callback)=>{const done=err=>setImmediate(()=>callback(err));if(!Buffer.isBuffer(key)){return done(new Error('"key" must be a Buffer'));}if(key.length<3){return done(new Error('invalid public key record'));}const prefix=key.slice(0,4).toString();if(prefix!=='/pk/'){return done(new Error('key was not prefixed with /pk/'));}const keyhash=key.slice(4);multihashing(publicKey,'sha2-256',(err,publicKeyHash)=>{if(err){return done(err);}if(!keyhash.equals(publicKeyHash)){return done(new Error('public key does not match passed in key'));}done();});};module.exports={func:validatePublicKeyRecord,sign:false};},4239:function(__unusedmodule,exports,__webpack_require__){var isArray=__webpack_require__(7702);var isBuf=__webpack_require__(8107);var toString=Object.prototype.toString;var withNativeBlob=typeof Blob==='function'||typeof Blob!=='undefined'&&toString.call(Blob)==='[object BlobConstructor]';var withNativeFile=typeof File==='function'||typeof File!=='undefined'&&toString.call(File)==='[object FileConstructor]';exports.deconstructPacket=function(packet){var buffers=[];var packetData=packet.data;var pack=packet;pack.data=_deconstructPacket(packetData,buffers);pack.attachments=buffers.length;return{packet:pack,buffers:buffers};};function _deconstructPacket(data,buffers){if(!data)return data;if(isBuf(data)){var placeholder={_placeholder:true,num:buffers.length};buffers.push(data);return placeholder;}else if(isArray(data)){var newData=new Array(data.length);for(var i=0;i<data.length;i++){newData[i]=_deconstructPacket(data[i],buffers);}return newData;}else if(typeof data==='object'&&!(data instanceof Date)){var newData={};for(var key in data){newData[key]=_deconstructPacket(data[key],buffers);}return newData;}return data;}exports.reconstructPacket=function(packet,buffers){packet.data=_reconstructPacket(packet.data,buffers);packet.attachments=undefined;return packet;};function _reconstructPacket(data,buffers){if(!data)return data;if(data&&data._placeholder){return buffers[data.num];}else if(isArray(data)){for(var i=0;i<data.length;i++){data[i]=_reconstructPacket(data[i],buffers);}}else if(typeof data==='object'){for(var key in data){data[key]=_reconstructPacket(data[key],buffers);}}return data;}exports.removeBlobs=function(data,callback){function _removeBlobs(obj,curKey,containingObject){if(!obj)return obj;if(withNativeBlob&&obj instanceof Blob||withNativeFile&&obj instanceof File){pendingBlobs++;var fileReader=new FileReader();fileReader.onload=function(){if(containingObject){containingObject[curKey]=this.result;}else{bloblessData=this.result;}if(! --pendingBlobs){callback(bloblessData);}};fileReader.readAsArrayBuffer(obj);}else if(isArray(obj)){for(var i=0;i<obj.length;i++){_removeBlobs(obj[i],i,obj);}}else if(typeof obj==='object'&&!isBuf(obj)){for(var key in obj){_removeBlobs(obj[key],key,obj);}}}var pendingBlobs=0;var bloblessData=data;_removeBlobs(bloblessData);if(!pendingBlobs){callback(bloblessData);}};},4246:function(module,__unusedexports,__webpack_require__){const cidFromEthObj=__webpack_require__(7066);const asyncify=__webpack_require__(7144);module.exports=createUtil;function createUtil(multicodec,EthObjClass){return{deserialize:asyncify(serialized=>new EthObjClass(serialized)),serialize:asyncify(ethObj=>ethObj.serialize()),cid:asyncify((ethObj,options)=>cidFromEthObj(multicodec,ethObj,options))};}},4249:function(module,__unusedexports,__webpack_require__){"use strict";const EventEmitter=__webpack_require__(4859).EventEmitter;const CONSTANTS=__webpack_require__(2841);const logger=__webpack_require__(8047).logger;const unwantEvent=c=>`unwant:${c}`;const blockEvent=c=>`block:${c}`;class Notifications extends EventEmitter{constructor(peerId){super();this.setMaxListeners(CONSTANTS.maxListeners);this._log=logger(peerId,'notif');this._unwantListeners={};this._blockListeners={};}hasBlock(block){const str=`block:${block.cid.buffer.toString()}`;this._log(str);this.emit(str,block);}wantBlock(cid,onBlock,onUnwant){const cidStr=cid.buffer.toString();this._log(`wantBlock:${cidStr}`);this._unwantListeners[cidStr]=()=>{this._log(`manual unwant: ${cidStr}`);this._cleanup(cidStr);onUnwant();};this._blockListeners[cidStr]=block=>{this._cleanup(cidStr);onBlock(block);};this.once(unwantEvent(cidStr),this._unwantListeners[cidStr]);this.once(blockEvent(cidStr),this._blockListeners[cidStr]);}unwantBlock(cid){const str=`unwant:${cid.buffer.toString()}`;this._log(str);this.emit(str);}_cleanup(cidStr){if(this._unwantListeners[cidStr]){this.removeListener(unwantEvent(cidStr),this._unwantListeners[cidStr]);delete this._unwantListeners[cidStr];}if(this._blockListeners[cidStr]){this.removeListener(blockEvent(cidStr),this._blockListeners[cidStr]);delete this._blockListeners[cidStr];}}}module.exports=Notifications;},4253:function(module,__unusedexports,__webpack_require__){"use strict";const stream=__webpack_require__(2817);const debug=__webpack_require__(746);class Channel extends stream.Duplex{constructor(name,plex,opts){const halfOpen=Boolean(opts.halfOpen);super({allowHalfOpen:halfOpen});this.name=name;this.log=debug('mplex:channel:'+this.name.toString());this.channel=0;this.initiator=false;this.chunked=Boolean(opts.chunked);this.halfOpen=halfOpen;this.destroyed=false;this.finalized=false;this.local=true;this._multiplex=plex;this._dataHeader=0;this._opened=false;this._awaitDrain=0;this._lazy=Boolean(opts.lazy);let finished=false;let ended=false;this.log('open, halfOpen: '+this.halfOpen);this.once('end',()=>{this.log('end');this._read();if(this.destroyed){return;}ended=true;if(finished){this._finalize();}else if(!this.halfOpen){this.end();}});this.once('finish',function onfinish(){if(this.destroyed){return;}if(!this._opened){return this.once('open',onfinish);}if(this._lazy&&this.initiator){this._open();}this._multiplex._send(this.channel<<3|(this.initiator?4:3),null);finished=true;if(ended){this._finalize();}});}emit(eventName,...args){if(eventName==='error'&&!this._events.error){this.log('error',...args);}else{super.emit(eventName,...args);}}_destroy(err,callback){this.log('_destroy:'+(this.local?'local':'remote'));if(this.local&&this._opened){if(this._lazy&&this.initiator){this._open();}const msg=err?Buffer.from(err.message):null;try{this._multiplex._send(this.channel<<3|(this.initiator?6:5),msg);}catch(e){}}this._finalize();callback(err);}_finalize(){if(this.finalized){return;}this.finalized=true;this.emit('finalize');}_write(data,enc,cb){this.log('write: ',data.length);if(!this._opened){this.once('open',()=>{this._write(data,enc,cb);});return;}if(this.destroyed){cb();return;}if(this._lazy&&this.initiator){this._open();}const drained=this._multiplex._send(this._dataHeader,data);if(drained){cb();return;}this._multiplex._ondrain.push(cb);}_read(){if(this._awaitDrain){const drained=this._awaitDrain;this._awaitDrain=0;this._multiplex._onchanneldrain(drained);}}_open(){let buf=null;if(Buffer.isBuffer(this.name)){buf=this.name;}else if(this.name!==this.channel.toString()){buf=Buffer.from(this.name);}this._lazy=false;this._multiplex._send(this.channel<<3|0,buf);}open(channel,initiator){this.log('open: '+channel);this.channel=channel;this.initiator=initiator;this._dataHeader=channel<<3|(initiator?2:1);this._opened=true;if(!this._lazy&&this.initiator)this._open();this.emit('open');}}module.exports=Channel;},4254:function(module,__unusedexports,__webpack_require__){module.exports=__webpack_require__(257);module.exports.BlockHeader=__webpack_require__(4951);module.exports.MerkleBlock=__webpack_require__(1002);},4264:function(module,__unusedexports,__webpack_require__){"use strict";const Hoek=__webpack_require__(2850);const ObjectType=__webpack_require__(7834);const Ref=__webpack_require__(1937);const internals={};internals.Func=class extends ObjectType.constructor{constructor(){super();this._flags.func=true;}arity(n){Hoek.assert(Number.isSafeInteger(n)&&n>=0,'n must be a positive integer');return this._test('arity',n,function(value,state,options){if(value.length===n){return value;}return this.createError('function.arity',{n},state,options);});}minArity(n){Hoek.assert(Number.isSafeInteger(n)&&n>0,'n must be a strict positive integer');return this._test('minArity',n,function(value,state,options){if(value.length>=n){return value;}return this.createError('function.minArity',{n},state,options);});}maxArity(n){Hoek.assert(Number.isSafeInteger(n)&&n>=0,'n must be a positive integer');return this._test('maxArity',n,function(value,state,options){if(value.length<=n){return value;}return this.createError('function.maxArity',{n},state,options);});}ref(){return this._test('ref',null,function(value,state,options){if(Ref.isRef(value)){return value;}return this.createError('function.ref',{value},state,options);});}class(){return this._test('class',null,function(value,state,options){if(/^\s*class\s/.test(value.toString())){return value;}return this.createError('function.class',{value},state,options);});}};module.exports=new internals.Func();},4265:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function(tasks,callback){callback=(0,_once2.default)(callback||_noop2.default);if(!(0,_isArray2.default)(tasks))return callback(new Error('First argument to waterfall must be an array of functions'));if(!tasks.length)return callback();var taskIndex=0;function nextTask(args){var task=(0,_wrapAsync2.default)(tasks[taskIndex++]);args.push((0,_onlyOnce2.default)(next));task.apply(null,args);}function next(err){if(err||taskIndex===tasks.length){return callback.apply(null,arguments);}nextTask((0,_slice2.default)(arguments,1));}nextTask([]);};var _isArray=__webpack_require__(1015);var _isArray2=_interopRequireDefault(_isArray);var _noop=__webpack_require__(5811);var _noop2=_interopRequireDefault(_noop);var _once=__webpack_require__(3925);var _once2=_interopRequireDefault(_once);var _slice=__webpack_require__(3404);var _slice2=_interopRequireDefault(_slice);var _onlyOnce=__webpack_require__(2306);var _onlyOnce2=_interopRequireDefault(_onlyOnce);var _wrapAsync=__webpack_require__(9396);var _wrapAsync2=_interopRequireDefault(_wrapAsync);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}module.exports=exports['default'];},4266:function(module,__unusedexports,__webpack_require__){"use strict";var pna=__webpack_require__(88);module.exports=Writable;function WriteReq(chunk,encoding,cb){this.chunk=chunk;this.encoding=encoding;this.callback=cb;this.next=null;}function CorkedRequest(state){var _this=this;this.next=null;this.entry=null;this.finish=function(){onCorkedFinish(_this,state);};}var asyncWrite=!process.browser&&['v0.10','v0.9.'].indexOf(process.version.slice(0,5))>-1?setImmediate:pna.nextTick;var Duplex;Writable.WritableState=WritableState;var util=__webpack_require__(5548);util.inherits=__webpack_require__(92);var internalUtil={deprecate:__webpack_require__(8008)};var Stream=__webpack_require__(9715);var Buffer=__webpack_require__(7572).Buffer;var OurUint8Array=global.Uint8Array||function(){};function _uint8ArrayToBuffer(chunk){return Buffer.from(chunk);}function _isUint8Array(obj){return Buffer.isBuffer(obj)||obj instanceof OurUint8Array;}var destroyImpl=__webpack_require__(5635);util.inherits(Writable,Stream);function nop(){}function WritableState(options,stream){Duplex=Duplex||__webpack_require__(6504);options=options||{};var isDuplex=stream instanceof Duplex;this.objectMode=!!options.objectMode;if(isDuplex)this.objectMode=this.objectMode||!!options.writableObjectMode;var hwm=options.highWaterMark;var writableHwm=options.writableHighWaterMark;var defaultHwm=this.objectMode?16:16*1024;if(hwm||hwm===0)this.highWaterMark=hwm;else if(isDuplex&&(writableHwm||writableHwm===0))this.highWaterMark=writableHwm;else this.highWaterMark=defaultHwm;this.highWaterMark=Math.floor(this.highWaterMark);this.finalCalled=false;this.needDrain=false;this.ending=false;this.ended=false;this.finished=false;this.destroyed=false;var noDecode=options.decodeStrings===false;this.decodeStrings=!noDecode;this.defaultEncoding=options.defaultEncoding||'utf8';this.length=0;this.writing=false;this.corked=0;this.sync=true;this.bufferProcessing=false;this.onwrite=function(er){onwrite(stream,er);};this.writecb=null;this.writelen=0;this.bufferedRequest=null;this.lastBufferedRequest=null;this.pendingcb=0;this.prefinished=false;this.errorEmitted=false;this.bufferedRequestCount=0;this.corkedRequestsFree=new CorkedRequest(this);}WritableState.prototype.getBuffer=function getBuffer(){var current=this.bufferedRequest;var out=[];while(current){out.push(current);current=current.next;}return out;};(function(){try{Object.defineProperty(WritableState.prototype,'buffer',{get:internalUtil.deprecate(function(){return this.getBuffer();},'_writableState.buffer is deprecated. Use _writableState.getBuffer '+'instead.','DEP0003')});}catch(_){}})();var realHasInstance;if(typeof Symbol==='function'&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]==='function'){realHasInstance=Function.prototype[Symbol.hasInstance];Object.defineProperty(Writable,Symbol.hasInstance,{value:function(object){if(realHasInstance.call(this,object))return true;if(this!==Writable)return false;return object&&object._writableState instanceof WritableState;}});}else{realHasInstance=function(object){return object instanceof this;};}function Writable(options){Duplex=Duplex||__webpack_require__(6504);if(!realHasInstance.call(Writable,this)&&!(this instanceof Duplex)){return new Writable(options);}this._writableState=new WritableState(options,this);this.writable=true;if(options){if(typeof options.write==='function')this._write=options.write;if(typeof options.writev==='function')this._writev=options.writev;if(typeof options.destroy==='function')this._destroy=options.destroy;if(typeof options.final==='function')this._final=options.final;}Stream.call(this);}Writable.prototype.pipe=function(){this.emit('error',new Error('Cannot pipe, not readable'));};function writeAfterEnd(stream,cb){var er=new Error('write after end');stream.emit('error',er);pna.nextTick(cb,er);}function validChunk(stream,state,chunk,cb){var valid=true;var er=false;if(chunk===null){er=new TypeError('May not write null values to stream');}else if(typeof chunk!=='string'&&chunk!==undefined&&!state.objectMode){er=new TypeError('Invalid non-string/buffer chunk');}if(er){stream.emit('error',er);pna.nextTick(cb,er);valid=false;}return valid;}Writable.prototype.write=function(chunk,encoding,cb){var state=this._writableState;var ret=false;var isBuf=!state.objectMode&&_isUint8Array(chunk);if(isBuf&&!Buffer.isBuffer(chunk)){chunk=_uint8ArrayToBuffer(chunk);}if(typeof encoding==='function'){cb=encoding;encoding=null;}if(isBuf)encoding='buffer';else if(!encoding)encoding=state.defaultEncoding;if(typeof cb!=='function')cb=nop;if(state.ended)writeAfterEnd(this,cb);else if(isBuf||validChunk(this,state,chunk,cb)){state.pendingcb++;ret=writeOrBuffer(this,state,isBuf,chunk,encoding,cb);}return ret;};Writable.prototype.cork=function(){var state=this._writableState;state.corked++;};Writable.prototype.uncork=function(){var state=this._writableState;if(state.corked){state.corked--;if(!state.writing&&!state.corked&&!state.finished&&!state.bufferProcessing&&state.bufferedRequest)clearBuffer(this,state);}};Writable.prototype.setDefaultEncoding=function setDefaultEncoding(encoding){if(typeof encoding==='string')encoding=encoding.toLowerCase();if(!(['hex','utf8','utf-8','ascii','binary','base64','ucs2','ucs-2','utf16le','utf-16le','raw'].indexOf((encoding+'').toLowerCase())>-1))throw new TypeError('Unknown encoding: '+encoding);this._writableState.defaultEncoding=encoding;return this;};function decodeChunk(state,chunk,encoding){if(!state.objectMode&&state.decodeStrings!==false&&typeof chunk==='string'){chunk=Buffer.from(chunk,encoding);}return chunk;}Object.defineProperty(Writable.prototype,'writableHighWaterMark',{enumerable:false,get:function(){return this._writableState.highWaterMark;}});function writeOrBuffer(stream,state,isBuf,chunk,encoding,cb){if(!isBuf){var newChunk=decodeChunk(state,chunk,encoding);if(chunk!==newChunk){isBuf=true;encoding='buffer';chunk=newChunk;}}var len=state.objectMode?1:chunk.length;state.length+=len;var ret=state.length<state.highWaterMark;if(!ret)state.needDrain=true;if(state.writing||state.corked){var last=state.lastBufferedRequest;state.lastBufferedRequest={chunk:chunk,encoding:encoding,isBuf:isBuf,callback:cb,next:null};if(last){last.next=state.lastBufferedRequest;}else{state.bufferedRequest=state.lastBufferedRequest;}state.bufferedRequestCount+=1;}else{doWrite(stream,state,false,len,chunk,encoding,cb);}return ret;}function doWrite(stream,state,writev,len,chunk,encoding,cb){state.writelen=len;state.writecb=cb;state.writing=true;state.sync=true;if(writev)stream._writev(chunk,state.onwrite);else stream._write(chunk,encoding,state.onwrite);state.sync=false;}function onwriteError(stream,state,sync,er,cb){--state.pendingcb;if(sync){pna.nextTick(cb,er);pna.nextTick(finishMaybe,stream,state);stream._writableState.errorEmitted=true;stream.emit('error',er);}else{cb(er);stream._writableState.errorEmitted=true;stream.emit('error',er);finishMaybe(stream,state);}}function onwriteStateUpdate(state){state.writing=false;state.writecb=null;state.length-=state.writelen;state.writelen=0;}function onwrite(stream,er){var state=stream._writableState;var sync=state.sync;var cb=state.writecb;onwriteStateUpdate(state);if(er)onwriteError(stream,state,sync,er,cb);else{var finished=needFinish(state);if(!finished&&!state.corked&&!state.bufferProcessing&&state.bufferedRequest){clearBuffer(stream,state);}if(sync){asyncWrite(afterWrite,stream,state,finished,cb);}else{afterWrite(stream,state,finished,cb);}}}function afterWrite(stream,state,finished,cb){if(!finished)onwriteDrain(stream,state);state.pendingcb--;cb();finishMaybe(stream,state);}function onwriteDrain(stream,state){if(state.length===0&&state.needDrain){state.needDrain=false;stream.emit('drain');}}function clearBuffer(stream,state){state.bufferProcessing=true;var entry=state.bufferedRequest;if(stream._writev&&entry&&entry.next){var l=state.bufferedRequestCount;var buffer=new Array(l);var holder=state.corkedRequestsFree;holder.entry=entry;var count=0;var allBuffers=true;while(entry){buffer[count]=entry;if(!entry.isBuf)allBuffers=false;entry=entry.next;count+=1;}buffer.allBuffers=allBuffers;doWrite(stream,state,true,state.length,buffer,'',holder.finish);state.pendingcb++;state.lastBufferedRequest=null;if(holder.next){state.corkedRequestsFree=holder.next;holder.next=null;}else{state.corkedRequestsFree=new CorkedRequest(state);}state.bufferedRequestCount=0;}else{while(entry){var chunk=entry.chunk;var encoding=entry.encoding;var cb=entry.callback;var len=state.objectMode?1:chunk.length;doWrite(stream,state,false,len,chunk,encoding,cb);entry=entry.next;state.bufferedRequestCount--;if(state.writing){break;}}if(entry===null)state.lastBufferedRequest=null;}state.bufferedRequest=entry;state.bufferProcessing=false;}Writable.prototype._write=function(chunk,encoding,cb){cb(new Error('_write() is not implemented'));};Writable.prototype._writev=null;Writable.prototype.end=function(chunk,encoding,cb){var state=this._writableState;if(typeof chunk==='function'){cb=chunk;chunk=null;encoding=null;}else if(typeof encoding==='function'){cb=encoding;encoding=null;}if(chunk!==null&&chunk!==undefined)this.write(chunk,encoding);if(state.corked){state.corked=1;this.uncork();}if(!state.ending&&!state.finished)endWritable(this,state,cb);};function needFinish(state){return state.ending&&state.length===0&&state.bufferedRequest===null&&!state.finished&&!state.writing;}function callFinal(stream,state){stream._final(function(err){state.pendingcb--;if(err){stream.emit('error',err);}state.prefinished=true;stream.emit('prefinish');finishMaybe(stream,state);});}function prefinish(stream,state){if(!state.prefinished&&!state.finalCalled){if(typeof stream._final==='function'){state.pendingcb++;state.finalCalled=true;pna.nextTick(callFinal,stream,state);}else{state.prefinished=true;stream.emit('prefinish');}}}function finishMaybe(stream,state){var need=needFinish(state);if(need){prefinish(stream,state);if(state.pendingcb===0){state.finished=true;stream.emit('finish');}}return need;}function endWritable(stream,state,cb){state.ending=true;finishMaybe(stream,state);if(cb){if(state.finished)pna.nextTick(cb);else stream.once('finish',cb);}state.ended=true;stream.writable=false;}function onCorkedFinish(corkReq,state,err){var entry=corkReq.entry;corkReq.entry=null;while(entry){var cb=entry.callback;state.pendingcb--;cb(err);entry=entry.next;}if(state.corkedRequestsFree){state.corkedRequestsFree.next=corkReq;}else{state.corkedRequestsFree=corkReq;}}Object.defineProperty(Writable.prototype,'destroyed',{get:function(){if(this._writableState===undefined){return false;}return this._writableState.destroyed;},set:function(value){if(!this._writableState){return;}this._writableState.destroyed=value;}});Writable.prototype.destroy=destroyImpl.destroy;Writable.prototype._undestroy=destroyImpl.undestroy;Writable.prototype._destroy=function(err,cb){this.end();cb(err);};},4269:function(module,__unusedexports,__webpack_require__){"use strict";const each=__webpack_require__(4486);const waterfall=__webpack_require__(4265);const asyncify=__webpack_require__(7144);const rlp=__webpack_require__(6585);const EthTrieNode=__webpack_require__(4528);const cidFromHash=__webpack_require__(5855);const createResolver=__webpack_require__(7656);const isExternalLink=__webpack_require__(4840);const createUtil=__webpack_require__(4246);const createIsLink=__webpack_require__(2740);const cidFromEthObj=__webpack_require__(7066);module.exports=createTrieResolver;function createTrieResolver(multicodec,leafResolver){const baseTrie=createResolver(multicodec,EthTrieNode,mapFromEthObj);baseTrie.util.deserialize=asyncify(serialized=>{const rawNode=rlp.decode(serialized);const trieNode=new EthTrieNode(rawNode);return trieNode;});return baseTrie;function mapFromEthObj(trieNode,options,callback){mapFromBaseTrie(trieNode,options,(err,basePaths)=>{if(err)return callback(err);if(!leafResolver)return callback(null,basePaths);let paths=basePaths.slice();const leafTerminatingPaths=basePaths.filter(child=>Buffer.isBuffer(child.value));each(leafTerminatingPaths,(child,cb)=>{return waterfall([cb=>leafResolver.util.deserialize(child.value,cb),(ethObj,cb)=>leafResolver.resolver._mapFromEthObject(ethObj,options,cb)],(err,grandChildren)=>{if(err)return cb(err);grandChildren.forEach(grandChild=>{paths.push({path:child.path+'/'+grandChild.path,value:grandChild.value});});cb();});},err=>{if(err)return callback(err);callback(null,paths);});});}function mapFromBaseTrie(trieNode,options,callback){let paths=[];if(trieNode.type==='leaf'){paths.push({path:nibbleToPath(trieNode.getKey()),value:trieNode.getValue()});}each(trieNode.getChildren(),(childData,next)=>{const key=nibbleToPath(childData[0]);const value=childData[1];if(EthTrieNode.isRawNode(value)){const childNode=new EthTrieNode(value);paths.push({path:key,value:childNode});mapFromBaseTrie(childNode,options,(err,subtree)=>{if(err)return next(err);subtree.forEach(path=>{path.path=key+'/'+path.path;});paths=paths.concat(subtree);next();});}else{let link={'/':cidFromHash(multicodec,value).toBaseEncodedString()};paths.push({path:key,value:link});next();}},err=>{if(err)return callback(err);callback(null,paths);});}}function nibbleToPath(data){return data.map(num=>num.toString(16)).join('/');}},4275:function(module,__unusedexports,__webpack_require__){"use strict";const LRU=__webpack_require__(8671);module.exports=maxSize=>{const patched=LRU(maxSize);patched.delete=patched.remove;return patched;};},4287:function(module,__unusedexports,__webpack_require__){"use strict";const Joi=__webpack_require__(463).extend(__webpack_require__(4131));const schema=Joi.object().keys({repo:Joi.alternatives().try(Joi.object(),Joi.string()).allow(null),repoOwner:Joi.boolean().default(true),preload:Joi.object().keys({enabled:Joi.boolean().default(true),addresses:Joi.array().items(Joi.multiaddr().options({convert:false})),interval:Joi.number().integer().default(30*1000)}).allow(null),init:Joi.alternatives().try(Joi.boolean(),Joi.object().keys({bits:Joi.number().integer()})).allow(null),start:Joi.boolean(),local:Joi.boolean(),pass:Joi.string().allow(''),relay:Joi.object().keys({enabled:Joi.boolean(),hop:Joi.object().keys({enabled:Joi.boolean(),active:Joi.boolean()}).allow(null)}).allow(null),EXPERIMENTAL:Joi.object().keys({pubsub:Joi.boolean(),ipnsPubsub:Joi.boolean(),sharding:Joi.boolean(),dht:Joi.boolean()}).allow(null),connectionManager:Joi.object().allow(null),config:Joi.object().keys({Addresses:Joi.object().keys({Swarm:Joi.array().items(Joi.multiaddr().options({convert:false})),API:Joi.multiaddr().options({convert:false}),Gateway:Joi.multiaddr().options({convert:false})}).allow(null),Discovery:Joi.object().keys({MDNS:Joi.object().keys({Enabled:Joi.boolean(),Interval:Joi.number().integer()}).allow(null),webRTCStar:Joi.object().keys({Enabled:Joi.boolean()}).allow(null)}).allow(null),Bootstrap:Joi.array().items(Joi.multiaddr().IPFS().options({convert:false}))}).allow(null),libp2p:Joi.alternatives().try(Joi.func(),Joi.object().keys({modules:Joi.object().allow(null)})).allow(null)}).options({allowUnknown:true});module.exports.validate=config=>Joi.attempt(config,schema);},4292:function(module,__unusedexports,__webpack_require__){var eq=__webpack_require__(4974);function assocIndexOf(array,key){var length=array.length;while(length--){if(eq(array[length][0],key)){return length;}}return-1;}module.exports=assocIndexOf;},4299:function(__unusedmodule,exports,__webpack_require__){"use strict";const varint=__webpack_require__(2572);const Reader=__webpack_require__(2258);const Buffer=__webpack_require__(7572).Buffer;const pushable=__webpack_require__(5995);exports.decode=decode;exports.decodeFromReader=decodeFromReader;const MSB=0x80;const isEndByte=byte=>!(byte&MSB);const MAX_LENGTH=1024*1024*4;function decode(opts){let reader=new Reader();let p=pushable(err=>{reader.abort(err);});return read=>{reader(read);function next(){_decodeFromReader(reader,opts,(err,msg)=>{if(err)return p.end(err);p.push(msg);next();});}next();return p;};}function decodeFromReader(reader,opts,cb){if(typeof opts==='function'){cb=opts;opts={};}_decodeFromReader(reader,opts,function onComplete(err,msg){if(err){if(err===true)return cb(new Error('Unexpected end of input from reader.'));return cb(err);}cb(null,msg);});}function _decodeFromReader(reader,opts,cb){opts=Object.assign({fixed:false,maxLength:MAX_LENGTH},opts||{});if(opts.fixed){readFixedMessage(reader,opts.maxLength,cb);}else{readVarintMessage(reader,opts.maxLength,cb);}}function readFixedMessage(reader,maxLength,cb){reader.read(4,(err,bytes)=>{if(err){return cb(err);}const msgSize=bytes.readInt32BE(0);if(msgSize>maxLength){return cb(new Error('size longer than max permitted length of '+maxLength+'!'));}readMessage(reader,msgSize,cb);});}function readVarintMessage(reader,maxLength,cb){let rawMsgSize=[];if(rawMsgSize.length===0)readByte();function readByte(){reader.read(1,(err,byte)=>{if(err){return cb(err);}rawMsgSize.push(byte);if(byte&&!isEndByte(byte[0])){readByte();return;}const msgSize=varint.decode(Buffer.concat(rawMsgSize));if(msgSize>maxLength){return cb(new Error('size longer than max permitted length of '+maxLength+'!'));}readMessage(reader,msgSize,(err,msg)=>{if(err){return cb(err);}rawMsgSize=[];if(msg.length<msgSize){return cb(new Error('Message length does not match prefix specified length.'));}cb(null,msg);});});}}function readMessage(reader,size,cb){reader.read(size,(err,msg)=>{if(err){return cb(err);}cb(null,msg);});}},4314:function(module){function identity(value){return value;}module.exports=identity;},4315:function(module,__unusedexports,__webpack_require__){"use strict";const promisify=__webpack_require__(6955);const{DAGNode,DAGLink,util}=__webpack_require__(7421);const CID=__webpack_require__(9339);const map=__webpack_require__(7011);const mapSeries=__webpack_require__(3307);const series=__webpack_require__(7644);const parallel=__webpack_require__(4876);const eachLimit=__webpack_require__(4203);const waterfall=__webpack_require__(4265);const detectLimit=__webpack_require__(81);const setImmediate=__webpack_require__(7368);const{Key}=__webpack_require__(759);const errCode=__webpack_require__(4999);const multibase=__webpack_require__(1849);const createPinSet=__webpack_require__(2354);const{resolvePath}=__webpack_require__(5527);const concurrencyLimit=300;const pinDataStoreKey=new Key('/local/pins');function toB58String(hash){return new CID(hash).toBaseEncodedString();}function invalidPinTypeErr(type){const errMsg=`Invalid type '${type}', must be one of {direct, indirect, recursive, all}`;return errCode(new Error(errMsg),'ERR_INVALID_PIN_TYPE');}module.exports=self=>{const repo=self._repo;const dag=self.dag;const pinset=createPinSet(dag);const types={direct:'direct',recursive:'recursive',indirect:'indirect',all:'all'};let directPins=new Set();let recursivePins=new Set();const directKeys=()=>Array.from(directPins).map(key=>new CID(key).buffer);const recursiveKeys=()=>Array.from(recursivePins).map(key=>new CID(key).buffer);function getIndirectKeys(callback){const indirectKeys=new Set();eachLimit(recursiveKeys(),concurrencyLimit,(multihash,cb)=>{dag._getRecursive(multihash,(err,nodes)=>{if(err){return cb(err);}map(nodes,(node,cb)=>util.cid(node,cb),(err,cids)=>{if(err){return cb(err);}cids.map(cids=>cids.toBaseEncodedString()).filter(key=>!recursivePins.has(key)).forEach(key=>indirectKeys.add(key));cb();});});},err=>{if(err){return callback(err);}callback(null,Array.from(indirectKeys));});}function flushPins(callback){let dLink,rLink,root;series([cb=>waterfall([cb=>pinset.storeSet(directKeys(),cb),({node,cid},cb)=>DAGLink.create(types.direct,node.size,cid,cb),(link,cb)=>{dLink=link;cb(null);}],cb),cb=>waterfall([cb=>pinset.storeSet(recursiveKeys(),cb),({node,cid},cb)=>DAGLink.create(types.recursive,node.size,cid,cb),(link,cb)=>{rLink=link;cb(null);}],cb),cb=>DAGNode.create(Buffer.alloc(0),(err,empty)=>{if(err){return cb(err);}dag.put(empty,{version:0,hashAlg:'sha2-256',format:'dag-pb',preload:false},cb);}),cb=>DAGNode.create(Buffer.alloc(0),[dLink,rLink],(err,node)=>{if(err){return cb(err);}root=node;dag.put(root,{version:0,hashAlg:'sha2-256',format:'dag-pb',preload:false},(err,cid)=>{if(!err){root.multihash=cid.buffer;}cb(err);});}),cb=>repo.closed?repo.open(cb):cb(null,null),cb=>repo.datastore.put(pinDataStoreKey,root.multihash,cb)],(err,res)=>{if(err){return callback(err);}self.log(`Flushed pins with root: ${root}`);return callback(null,root);});}const pin={add:promisify((paths,options,callback)=>{if(typeof options==='function'){callback=options;options={};}options=options||{};const recursive=options.recursive==null?true:options.recursive;resolvePath(self.object,paths,(err,mhs)=>{if(err){return callback(err);}map(mhs,(multihash,cb)=>{const key=toB58String(multihash);if(recursive){if(recursivePins.has(key)){return cb(null,key);}dag._getRecursive(key,{preload:options.preload},err=>{if(err){return cb(err);}return cb(null,key);});}else{if(recursivePins.has(key)){return cb(new Error(`${key} already pinned recursively`));}if(directPins.has(key)){return cb(null,key);}dag.get(new CID(multihash),{preload:options.preload},err=>{if(err){return cb(err);}return cb(null,key);});}},(err,results)=>{if(err){return callback(err);}const pinset=recursive?recursivePins:directPins;results.forEach(key=>pinset.add(key));flushPins((err,root)=>{if(err){return callback(err);}callback(null,results.map(hash=>({hash})));});});});}),rm:promisify((paths,options,callback)=>{if(typeof options==='function'){callback=options;}options=options||{};const recursive=options.recursive==null?true:options.recursive;if(options.cidBase&&!multibase.names.includes(options.cidBase)){return setImmediate(()=>{callback(errCode(new Error('invalid multibase'),'ERR_INVALID_MULTIBASE'));});}resolvePath(self.object,paths,(err,mhs)=>{if(err){return callback(err);}map(mhs,(multihash,cb)=>{pin._isPinnedWithType(multihash,types.all,(err,res)=>{if(err){return cb(err);}const{pinned,reason}=res;const key=toB58String(multihash);if(!pinned){return cb(new Error(`${key} is not pinned`));}switch(reason){case types.recursive:if(recursive){return cb(null,key);}else{return cb(new Error(`${key} is pinned recursively`));}case types.direct:return cb(null,key);default:return cb(new Error(`${key} is pinned indirectly under ${reason}`));}});},(err,results)=>{if(err){return callback(err);}results.forEach(key=>{if(recursive&&recursivePins.has(key)){recursivePins.delete(key);}else{directPins.delete(key);}});flushPins((err,root)=>{if(err){return callback(err);}self.log(`Removed pins: ${results}`);callback(null,results.map(hash=>({hash})));});});});}),ls:promisify((paths,options,callback)=>{let type=types.all;if(typeof paths==='function'){callback=paths;options={};paths=null;}if(typeof options==='function'){callback=options;}if(paths&&paths.type){options=paths;paths=null;}options=options||{};if(options.type){if(typeof options.type!=='string'){return setImmediate(()=>callback(invalidPinTypeErr(options.type)));}type=options.type.toLowerCase();}if(!Object.keys(types).includes(type)){return setImmediate(()=>callback(invalidPinTypeErr(type)));}if(paths){waterfall([cb=>resolvePath(self.object,paths,cb),(hashes,cb)=>mapSeries(hashes,(hash,done)=>pin._isPinnedWithType(hash,types.all,done),cb),(results,cb)=>{results=results.filter(result=>result.pinned).map(({key,reason})=>{switch(reason){case types.direct:case types.recursive:return{hash:key,type:reason};default:return{hash:key,type:`${types.indirect} through ${reason}`};}});if(!results.length){return cb(new Error(`Path is not pinned`));}cb(null,results);}],callback);}else{let pins=[];if(type===types.direct||type===types.all){pins=pins.concat(Array.from(directPins).map(hash=>({type:types.direct,hash})));}if(type===types.recursive||type===types.all){pins=pins.concat(Array.from(recursivePins).map(hash=>({type:types.recursive,hash})));}if(type===types.indirect||type===types.all){getIndirectKeys((err,indirects)=>{if(err){return callback(err);}pins=pins.filter(({hash})=>!indirects.includes(hash)||indirects.includes(hash)&&!directPins.has(hash)).concat(indirects.map(hash=>({type:types.indirect,hash})));return callback(null,pins);});}else{callback(null,pins);}}}),_isPinnedWithType:promisify((multihash,type,callback)=>{const key=toB58String(multihash);const{recursive,direct,all}=types;if((type===recursive||type===all)&&recursivePins.has(key)){return callback(null,{key,pinned:true,reason:recursive});}if(type===recursive){return callback(null,{key,pinned:false});}if((type===direct||type===all)&&directPins.has(key)){return callback(null,{key,pinned:true,reason:direct});}if(type===direct){return callback(null,{key,pinned:false});}detectLimit(recursiveKeys().map(key=>new CID(key)),concurrencyLimit,(cid,cb)=>{waterfall([done=>dag.get(cid,'',{preload:false},done),(result,done)=>done(null,result.value),(node,done)=>pinset.hasDescendant(node,key,done)],cb);},(err,cid)=>callback(err,{key,pinned:Boolean(cid),reason:cid}));}),_load:promisify(callback=>{waterfall([cb=>repo.closed?repo.datastore.open(cb):cb(null,null),(_,cb)=>repo.datastore.has(pinDataStoreKey,cb),(has,cb)=>has?cb():cb(new Error('No pins to load')),cb=>repo.datastore.get(pinDataStoreKey,cb),(mh,cb)=>{dag.get(new CID(mh),'',{preload:false},cb);}],(err,pinRoot)=>{if(err){if(err.message==='No pins to load'){self.log('No pins to load');return callback();}else{return callback(err);}}parallel([cb=>pinset.loadSet(pinRoot.value,types.recursive,cb),cb=>pinset.loadSet(pinRoot.value,types.direct,cb)],(err,keys)=>{if(err){return callback(err);}const[rKeys,dKeys]=keys;directPins=new Set(dKeys.map(toB58String));recursivePins=new Set(rKeys.map(toB58String));self.log('Loaded pins from the datastore');return callback(null);});});})};return pin;};},4316:function(module){module.exports=require("os");},4321:function(module,__unusedexports,__webpack_require__){"use strict";const exporter=__webpack_require__(7623);const pull=__webpack_require__(418);const once=__webpack_require__(751);const asyncMap=__webpack_require__(9720);const flatten=__webpack_require__(6549);const filter=__webpack_require__(708);const defer=__webpack_require__(5213);const collect=__webpack_require__(8342);const{toMfsPath}=__webpack_require__(7777);const log=__webpack_require__(746)('ipfs:mfs:read-pull-stream');const defaultOptions={offset:0,length:undefined};module.exports=context=>{return function mfsReadPullStream(path,options={}){options=Object.assign({},defaultOptions,options);options.length=options.length||options.count;log(`Reading ${path}`);const deferred=defer.source();pull(once(path),asyncMap((path,cb)=>toMfsPath(context,path,cb)),asyncMap(({mfsPath,root},cb)=>{log(`Exporting ${mfsPath}`);return pull(exporter(mfsPath,context.ipld,{offset:options.offset,length:options.length}),collect(cb));}),flatten(),filter(),collect((error,files)=>{if(error){return deferred.abort(error);}if(!files||!files.length){return deferred.abort(new Error(`${path} does not exist`));}const file=files[0];if(file.type!=='file'){return deferred.abort(new Error(`${path} was not a file`));}if(!file.content){return deferred.abort(new Error(`Could not load content stream from ${path}`));}log(`Got ${path} content`);deferred.resolve(files[0].content);}));return deferred;};};},4326:function(module,exports,__webpack_require__){"use strict";const{createFromPrivKey}=__webpack_require__(1832);const series=__webpack_require__(7644);const Receptacle=__webpack_require__(432);const errcode=__webpack_require__(4999);const debug=__webpack_require__(746);const log=debug('jsipfs:ipns');log.error=debug('jsipfs:ipns:error');const IpnsPublisher=__webpack_require__(9116);const IpnsRepublisher=__webpack_require__(3412);const IpnsResolver=__webpack_require__(7127);const path=__webpack_require__(4622);const defaultRecordTtl=60*1000;class IPNS{constructor(routing,datastore,peerInfo,keychain,options){this.publisher=new IpnsPublisher(routing,datastore);this.republisher=new IpnsRepublisher(this.publisher,datastore,peerInfo,keychain,options);this.resolver=new IpnsResolver(routing);this.cache=new Receptacle({max:1000});this.routing=routing;}publish(privKey,value,lifetime,callback){series([cb=>createFromPrivKey(privKey.bytes,cb),cb=>this.publisher.publishWithEOL(privKey,value,lifetime,cb)],(err,results)=>{if(err){log.error(err);return callback(err);}log(`IPNS value ${value} was published correctly`);const id=results[0].toB58String();const ttEol=parseFloat(lifetime);const ttl=ttEol<defaultRecordTtl?ttEol:defaultRecordTtl;this.cache.set(id,value,{ttl:ttl});log(`IPNS value ${value} was cached correctly`);callback(null,{name:id,value:value});});}resolve(name,options,callback){if(typeof name!=='string'){const errMsg=`name received is not valid`;log.error(errMsg);return callback(errcode(new Error(errMsg),'ERR_INVALID_NAME'));}if(typeof options==='function'){callback=options;options={};}options=options||{};if(!options.nocache&&!options.recursive){const id=name.split('/')[2];const result=this.cache.get(id);if(result){return callback(null,{path:result});}}this.resolver.resolve(name,options,(err,result)=>{if(err){log.error(err);return callback(err);}log(`IPNS record from ${name} was resolved correctly`);callback(null,{path:result});});}initializeKeyspace(privKey,value,callback){this.publisher.publish(privKey,value,callback);}}exports=module.exports=IPNS;exports.path=path;},4329:function(module){"use strict";module.exports=(flag,argv)=>{argv=argv||process.argv;const prefix=flag.startsWith('-')?'':flag.length===1?'-':'--';const pos=argv.indexOf(prefix+flag);const terminatorPos=argv.indexOf('--');return pos!==-1&&(terminatorPos===-1?true:pos<terminatorPos);};},4339:function(module,__unusedexports,__webpack_require__){var isTypedArray=__webpack_require__(4956).strict;module.exports=function typedarrayToBuffer(arr){if(isTypedArray(arr)){var buf=Buffer.from(arr.buffer);if(arr.byteLength!==arr.buffer.byteLength){buf=buf.slice(arr.byteOffset,arr.byteOffset+arr.byteLength);}return buf;}else{return Buffer.from(arr);}};},4348:function(module,__unusedexports,__webpack_require__){"use strict";const{DAGNode,DAGLink}=__webpack_require__(7421);const waterfall=__webpack_require__(4265);const CID=__webpack_require__(9339);const log=__webpack_require__(746)('ipfs:mfs:core:utils:remove-link');const UnixFS=__webpack_require__(7959);const{generatePath,updateHamtDirectory}=__webpack_require__(8690);const defaultOptions={parent:undefined,parentCid:undefined,name:'',flush:true,cidVersion:0,hashAlg:'sha2-256',codec:'dag-pb',shardSplitThreshold:1000};const removeLink=(context,options,callback)=>{options=Object.assign({},defaultOptions,options);if(!options.parentCid){return callback(new Error('No parent CID passed to removeLink'));}if(!CID.isCID(options.parentCid)){return callback(new Error('Invalid CID passed to addLink'));}if(!options.parent){log('Loading parent node',options.parentCid.toBaseEncodedString());return waterfall([cb=>context.ipld.get(options.parentCid,cb),(result,cb)=>cb(null,result.value),(node,cb)=>removeLink(context,_objectSpread2({},options,{parent:node}),cb)],callback);}if(!options.name){return callback(new Error('No child name passed to removeLink'));}const meta=UnixFS.unmarshal(options.parent.data);if(meta.type==='hamt-sharded-directory'){log(`Removing ${options.name} from sharded directory`);return removeFromShardedDirectory(context,options,callback);}log(`Removing link ${options.name} regular directory`);return removeFromDirectory(context,options,callback);};const removeFromDirectory=(context,options,callback)=>{waterfall([cb=>DAGNode.rmLink(options.parent,options.name,cb),(newParentNode,cb)=>{context.ipld.put(newParentNode,{version:options.cidVersion,format:options.codec,hashAlg:options.hashAlg},(error,cid)=>cb(error,{node:newParentNode,cid}));},(result,cb)=>{log('Updated regular directory',result.cid.toBaseEncodedString());cb(null,result);}],callback);};const removeFromShardedDirectory=(context,options,callback)=>{return waterfall([cb=>generatePath(context,options.name,options.parent,cb),({rootBucket,path},cb)=>{rootBucket.del(options.name).catch(err=>{cb(err);cb=null;}).then(()=>cb&&cb(null,{rootBucket,path}));},({rootBucket,path},cb)=>{updateShard(context,path,{name:options.name,cid:options.cid,size:options.size},options,(err,result={})=>cb(err,_objectSpread2({rootBucket},result)));},({rootBucket,node},cb)=>updateHamtDirectory(context,node.links,rootBucket,options,cb)],callback);};const updateShard=(context,positions,child,options,callback)=>{const{bucket,prefix,node}=positions.pop();const link=node.links.find(link=>link.name.substring(0,2)===prefix);if(!link){return callback(new Error(`No link found with prefix ${prefix} for file ${child.name}`));}return waterfall([cb=>{if(link.name===`${prefix}${child.name}`){log(`Removing existing link ${link.name}`);return waterfall([done=>DAGNode.rmLink(node,link.name,done),(node,done)=>{context.ipld.put(node,{version:options.cidVersion,format:options.codec,hashAlg:options.hashAlg,hashOnly:!options.flush},(error,cid)=>done(error,{node,cid}));},(result,done)=>{bucket.del(child.name).catch(err=>{done(err);done=null;}).then(()=>done&&done(null,result));},(result,done)=>updateHamtDirectory(context,result.node.links,bucket,options,done)],cb);}log(`Descending into sub-shard ${link.name} for ${prefix}${child.name}`);return waterfall([cb=>updateShard(context,positions,child,options,cb),(result,cb)=>{let newName=prefix;if(result.node.links.length===1){log(`Removing subshard for ${prefix}`);result.cid=result.node.links[0].cid;result.node=result.node.links[0];newName=`${prefix}${result.node.name.substring(2)}`;}log(`Updating shard ${prefix} with name ${newName}`);updateShardParent(context,bucket,node,prefix,newName,result.node.size,result.cid,options,cb);}],cb);}],callback);};const updateShardParent=async(context,bucket,parent,oldName,newName,size,cid,options,callback)=>{waterfall([done=>DAGNode.rmLink(parent,oldName,done),(parent,done)=>DAGNode.addLink(parent,new DAGLink(newName,size,cid),done),(parent,done)=>updateHamtDirectory(context,parent.links,bucket,options,done)],callback);};module.exports=removeLink;},4349:function(__unusedmodule,exports,__webpack_require__){"use strict";const asn1=__webpack_require__(3771);const inherits=__webpack_require__(92);const api=exports;api.define=function define(name,body){return new Entity(name,body);};function Entity(name,body){this.name=name;this.body=body;this.decoders={};this.encoders={};}Entity.prototype._createNamed=function createNamed(base){let named;try{named=__webpack_require__(3476).runInThisContext('(function '+this.name+'(entity) {\n'+'  this._initNamed(entity);\n'+'})');}catch(e){named=function(entity){this._initNamed(entity);};}inherits(named,base);named.prototype._initNamed=function initnamed(entity){base.call(this,entity);};return new named(this);};Entity.prototype._getDecoder=function _getDecoder(enc){enc=enc||'der';if(!this.decoders.hasOwnProperty(enc))this.decoders[enc]=this._createNamed(asn1.decoders[enc]);return this.decoders[enc];};Entity.prototype.decode=function decode(data,enc,options){return this._getDecoder(enc).decode(data,options);};Entity.prototype._getEncoder=function _getEncoder(enc){enc=enc||'der';if(!this.encoders.hasOwnProperty(enc))this.encoders[enc]=this._createNamed(asn1.encoders[enc]);return this.encoders[enc];};Entity.prototype.encode=function encode(data,enc,reporter){return this._getEncoder(enc).encode(data,reporter);};},4352:function(module,__unusedexports,__webpack_require__){"use strict";const waterfall=__webpack_require__(4265);const parallel=__webpack_require__(4876);const Key=__webpack_require__(759).Key;const sh=__webpack_require__(973);const KeytransformStore=__webpack_require__(609);const shardKey=new Key(sh.SHARDING_FN);const shardReadmeKey=new Key(sh.README_FN);class ShardingDatastore{constructor(store,shard){this.child=new KeytransformStore(store,{convert:this._convertKey.bind(this),invert:this._invertKey.bind(this)});this.shard=shard;}open(callback){this.child.open(callback);}_convertKey(key){const s=key.toString();if(s===shardKey.toString()||s===shardReadmeKey.toString()){return key;}const parent=new Key(this.shard.fun(s));return parent.child(key);}_invertKey(key){const s=key.toString();if(s===shardKey.toString()||s===shardReadmeKey.toString()){return key;}return Key.withNamespaces(key.list().slice(1));}static createOrOpen(store,shard,callback){ShardingDatastore.create(store,shard,err=>{if(err&&err.message!=='datastore exists'){return callback(err);}ShardingDatastore.open(store,callback);});}static open(store,callback){waterfall([cb=>sh.readShardFun('/',store,cb),(shard,cb)=>{cb(null,new ShardingDatastore(store,shard));}],callback);}static create(store,shard,callback){store.has(shardKey,(err,exists)=>{if(err){return callback(err);}if(!exists){const put=typeof store.putRaw==='function'?store.putRaw.bind(store):store.put.bind(store);return parallel([cb=>put(shardKey,Buffer.from(shard.toString()+'\n'),cb),cb=>put(shardReadmeKey,Buffer.from(sh.readme),cb)],err=>callback(err));}sh.readShardFun('/',store,(err,diskShard)=>{if(err){return callback(err);}const a=(diskShard||'').toString();const b=shard.toString();if(a!==b){return callback(new Error(`specified fun ${b} does not match repo shard fun ${a}`));}callback(new Error('datastore exists'));});});}put(key,val,callback){this.child.put(key,val,callback);}get(key,callback){this.child.get(key,callback);}has(key,callback){this.child.has(key,callback);}delete(key,callback){this.child.delete(key,callback);}batch(){return this.child.batch();}query(q){const tq={keysOnly:q.keysOnly,offset:q.offset,limit:q.limit,filters:[(e,cb)=>cb(null,e.key.toString()!==shardKey.toString()),(e,cb)=>cb(null,e.key.toString()!==shardReadmeKey.toString())]};if(q.prefix!=null){tq.filters.push((e,cb)=>{cb(null,this._invertKey(e.key).toString().startsWith(q.prefix));});}if(q.filters!=null){const filters=q.filters.map(f=>(e,cb)=>{f(Object.assign({},e,{key:this._invertKey(e.key)}),cb);});tq.filters=tq.filters.concat(filters);}if(q.orders!=null){tq.orders=q.orders.map(o=>(res,cb)=>{res.forEach(e=>{e.key=this._invertKey(e.key);});o(res,(err,ordered)=>{if(err){return cb(err);}ordered.forEach(e=>{e.key=this._convertKey(e.key);});cb(null,ordered);});});}return this.child.query(tq);}close(callback){this.child.close(callback);}}module.exports=ShardingDatastore;},4354:function(module,__unusedexports,__webpack_require__){"use strict";try{module.exports=__webpack_require__(8113);}catch(err){if(process.env.DEBUG){console.error('Keccak bindings are not compiled. Pure JS implementation will be used.');}module.exports=__webpack_require__(8565);}},4356:function(module,__unusedexports,__webpack_require__){var isFunction=__webpack_require__(7028),isLength=__webpack_require__(4380);function isArrayLike(value){return value!=null&&isLength(value.length)&&!isFunction(value);}module.exports=isArrayLike;},4367:function(module,__unusedexports,__webpack_require__){var forge=__webpack_require__(7938);__webpack_require__(1214);forge.mgf=forge.mgf||{};var mgf1=module.exports=forge.mgf.mgf1=forge.mgf1=forge.mgf1||{};mgf1.create=function(md){var mgf={generate:function(seed,maskLen){var t=new forge.util.ByteBuffer();var len=Math.ceil(maskLen/md.digestLength);for(var i=0;i<len;i++){var c=new forge.util.ByteBuffer();c.putInt32(i);md.start();md.update(seed+c.getBytes());t.putBuffer(md.digest());}t.truncate(t.length()-maskLen);return t.getBytes();}};return mgf;};},4370:function(module,__unusedexports,__webpack_require__){"use strict";var truncate=__webpack_require__(8143);var illegalRe=/[\/\?<>\\:\*\|":]/g;var controlRe=/[\x00-\x1f\x80-\x9f]/g;var reservedRe=/^\.+$/;var windowsReservedRe=/^(con|prn|aux|nul|com[0-9]|lpt[0-9])(\..*)?$/i;var windowsTrailingRe=/[\. ]+$/;function sanitize(input,replacement){var sanitized=input.replace(illegalRe,replacement).replace(controlRe,replacement).replace(reservedRe,replacement).replace(windowsReservedRe,replacement).replace(windowsTrailingRe,replacement);return truncate(sanitized,255);}module.exports=function(input,options){var replacement=options&&options.replacement||'';var output=sanitize(input,replacement);if(replacement===''){return output;}return sanitize(output,'');};},4379:function(module){module.exports=function abortCb(cb,abort,onAbort){cb(abort);onAbort&&onAbort(abort===true?null:abort);return;};},4380:function(module){var MAX_SAFE_INTEGER=9007199254740991;function isLength(value){return typeof value=='number'&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER;}module.exports=isLength;},4390:function(module,__unusedexports,__webpack_require__){var Buffer=__webpack_require__(7572).Buffer;function isArrayBuffer(obj){return obj instanceof ArrayBuffer||obj!=null&&obj.constructor!=null&&obj.constructor.name==='ArrayBuffer'&&typeof obj.byteLength==='number';}module.exports=function(socket,cb){var buffer=[];var receiver;var ended;var started=false;socket.addEventListener('message',function(evt){var data=evt.data;if(isArrayBuffer(data)){data=Buffer.from(data);}if(receiver){return receiver(null,data);}buffer.push(data);});socket.addEventListener('close',function(evt){if(ended)return;if(receiver){receiver(ended=true);}});socket.addEventListener('error',function(evt){if(ended)return;ended=evt;if(!started){started=true;cb&&cb(evt);}if(receiver){receiver(ended);}});socket.addEventListener('open',function(evt){if(started||ended)return;started=true;});function read(abort,cb){receiver=null;if(ended)return cb(ended);else if(abort){receiver=cb;socket.close();}else if(buffer.length>0)cb(null,buffer.shift());else receiver=cb;};return read;};},4394:function(module,__unusedexports,__webpack_require__){"use strict";const EthTx=__webpack_require__(5367);const createResolver=__webpack_require__(7656);module.exports=createResolver('eth-tx',EthTx,mapFromEthObj);function mapFromEthObj(tx,options,callback){const paths=[];paths.push({path:'nonce',value:tx.nonce});paths.push({path:'gasPrice',value:tx.gasPrice});paths.push({path:'gasLimit',value:tx.gasLimit});paths.push({path:'toAddress',value:tx.to});paths.push({path:'value',value:tx.value});paths.push({path:'data',value:tx.data});paths.push({path:'v',value:tx.v});paths.push({path:'r',value:tx.r});paths.push({path:'s',value:tx.s});paths.push({path:'fromAddress',value:tx.from});paths.push({path:'signature',value:[tx.v,tx.r,tx.s]});paths.push({path:'isContractPublish',value:tx.toCreationAddress()});callback(null,paths);}},4406:function(module,__unusedexports,__webpack_require__){"use strict";var _=__webpack_require__(6064);var $=__webpack_require__(5107);var JSUtil=__webpack_require__(8416);var Script=__webpack_require__(5355);var Address=__webpack_require__(6593);var Unit=__webpack_require__(1045);function UnspentOutput(data){if(!(this instanceof UnspentOutput)){return new UnspentOutput(data);}$.checkArgument(_.isObject(data),'Must provide an object from where to extract data');var address=data.address?new Address(data.address):undefined;var txId=data.txid?data.txid:data.txId;if(!txId||!JSUtil.isHexaString(txId)||txId.length>64){throw new Error('Invalid TXID in object',data);}var outputIndex=_.isUndefined(data.vout)?data.outputIndex:data.vout;if(!_.isNumber(outputIndex)){throw new Error('Invalid outputIndex, received '+outputIndex);}$.checkArgument(!_.isUndefined(data.scriptPubKey)||!_.isUndefined(data.script),'Must provide the scriptPubKey for that output!');var script=new Script(data.scriptPubKey||data.script);$.checkArgument(!_.isUndefined(data.amount)||!_.isUndefined(data.satoshis),'Must provide an amount for the output');var amount=!_.isUndefined(data.amount)?new Unit.fromBTC(data.amount).toSatoshis():data.satoshis;$.checkArgument(_.isNumber(amount),'Amount must be a number');JSUtil.defineImmutable(this,{address:address,txId:txId,outputIndex:outputIndex,script:script,satoshis:amount});}UnspentOutput.prototype.inspect=function(){return'<UnspentOutput: '+this.txId+':'+this.outputIndex+', satoshis: '+this.satoshis+', address: '+this.address+'>';};UnspentOutput.prototype.toString=function(){return this.txId+':'+this.outputIndex;};UnspentOutput.fromObject=function(data){return new UnspentOutput(data);};UnspentOutput.prototype.toObject=UnspentOutput.prototype.toJSON=function toObject(){return{address:this.address?this.address.toString():undefined,txid:this.txId,vout:this.outputIndex,scriptPubKey:this.script.toBuffer().toString('hex'),amount:Unit.fromSatoshis(this.satoshis).toBTC()};};module.exports=UnspentOutput;},4417:function(module){;(function(globalObject){'use strict';var BigNumber,isNumeric=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,hasSymbol=typeof Symbol=='function'&&typeof Symbol.iterator=='symbol',mathceil=Math.ceil,mathfloor=Math.floor,bignumberError='[BigNumber Error] ',tooManyDigits=bignumberError+'Number primitive has more than 15 significant digits: ',BASE=1e14,LOG_BASE=14,MAX_SAFE_INTEGER=0x1fffffffffffff,POWS_TEN=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],SQRT_BASE=1e7,MAX=1E9;function clone(configObject){var div,convertBase,parseNumeric,P=BigNumber.prototype={constructor:BigNumber,toString:null,valueOf:null},ONE=new BigNumber(1),DECIMAL_PLACES=20,ROUNDING_MODE=4,TO_EXP_NEG=-7,TO_EXP_POS=21,MIN_EXP=-1e7,MAX_EXP=1e7,CRYPTO=false,MODULO_MODE=1,POW_PRECISION=0,FORMAT={prefix:'',groupSize:3,secondaryGroupSize:0,groupSeparator:',',decimalSeparator:'.',fractionGroupSize:0,fractionGroupSeparator:'\xA0',suffix:''},ALPHABET='0123456789abcdefghijklmnopqrstuvwxyz';function BigNumber(v,b){var alphabet,c,caseChanged,e,i,isNum,len,str,x=this;if(!(x instanceof BigNumber))return new BigNumber(v,b);if(b==null){if(v&&v._isBigNumber===true){x.s=v.s;if(!v.c||v.e>MAX_EXP){x.c=x.e=null;}else if(v.e<MIN_EXP){x.c=[x.e=0];}else{x.e=v.e;x.c=v.c.slice();}return;}if((isNum=typeof v=='number')&&v*0==0){x.s=1/v<0?(v=-v,-1):1;if(v===~~v){for(e=0,i=v;i>=10;i/=10,e++);if(e>MAX_EXP){x.c=x.e=null;}else{x.e=e;x.c=[v];}return;}str=String(v);}else{if(!isNumeric.test(str=String(v)))return parseNumeric(x,str,isNum);x.s=str.charCodeAt(0)==45?(str=str.slice(1),-1):1;}if((e=str.indexOf('.'))>-1)str=str.replace('.','');if((i=str.search(/e/i))>0){if(e<0)e=i;e+=+str.slice(i+1);str=str.substring(0,i);}else if(e<0){e=str.length;}}else{intCheck(b,2,ALPHABET.length,'Base');if(b==10){x=new BigNumber(v);return round(x,DECIMAL_PLACES+x.e+1,ROUNDING_MODE);}str=String(v);if(isNum=typeof v=='number'){if(v*0!=0)return parseNumeric(x,str,isNum,b);x.s=1/v<0?(str=str.slice(1),-1):1;if(BigNumber.DEBUG&&str.replace(/^0\.0*|\./,'').length>15){throw Error(tooManyDigits+v);}}else{x.s=str.charCodeAt(0)===45?(str=str.slice(1),-1):1;}alphabet=ALPHABET.slice(0,b);e=i=0;for(len=str.length;i<len;i++){if(alphabet.indexOf(c=str.charAt(i))<0){if(c=='.'){if(i>e){e=len;continue;}}else if(!caseChanged){if(str==str.toUpperCase()&&(str=str.toLowerCase())||str==str.toLowerCase()&&(str=str.toUpperCase())){caseChanged=true;i=-1;e=0;continue;}}return parseNumeric(x,String(v),isNum,b);}}isNum=false;str=convertBase(str,b,10,x.s);if((e=str.indexOf('.'))>-1)str=str.replace('.','');else e=str.length;}for(i=0;str.charCodeAt(i)===48;i++);for(len=str.length;str.charCodeAt(--len)===48;);if(str=str.slice(i,++len)){len-=i;if(isNum&&BigNumber.DEBUG&&len>15&&(v>MAX_SAFE_INTEGER||v!==mathfloor(v))){throw Error(tooManyDigits+x.s*v);}if((e=e-i-1)>MAX_EXP){x.c=x.e=null;}else if(e<MIN_EXP){x.c=[x.e=0];}else{x.e=e;x.c=[];i=(e+1)%LOG_BASE;if(e<0)i+=LOG_BASE;if(i<len){if(i)x.c.push(+str.slice(0,i));for(len-=LOG_BASE;i<len;){x.c.push(+str.slice(i,i+=LOG_BASE));}i=LOG_BASE-(str=str.slice(i)).length;}else{i-=len;}for(;i--;str+='0');x.c.push(+str);}}else{x.c=[x.e=0];}}BigNumber.clone=clone;BigNumber.ROUND_UP=0;BigNumber.ROUND_DOWN=1;BigNumber.ROUND_CEIL=2;BigNumber.ROUND_FLOOR=3;BigNumber.ROUND_HALF_UP=4;BigNumber.ROUND_HALF_DOWN=5;BigNumber.ROUND_HALF_EVEN=6;BigNumber.ROUND_HALF_CEIL=7;BigNumber.ROUND_HALF_FLOOR=8;BigNumber.EUCLID=9;BigNumber.config=BigNumber.set=function(obj){var p,v;if(obj!=null){if(typeof obj=='object'){if(obj.hasOwnProperty(p='DECIMAL_PLACES')){v=obj[p];intCheck(v,0,MAX,p);DECIMAL_PLACES=v;}if(obj.hasOwnProperty(p='ROUNDING_MODE')){v=obj[p];intCheck(v,0,8,p);ROUNDING_MODE=v;}if(obj.hasOwnProperty(p='EXPONENTIAL_AT')){v=obj[p];if(v&&v.pop){intCheck(v[0],-MAX,0,p);intCheck(v[1],0,MAX,p);TO_EXP_NEG=v[0];TO_EXP_POS=v[1];}else{intCheck(v,-MAX,MAX,p);TO_EXP_NEG=-(TO_EXP_POS=v<0?-v:v);}}if(obj.hasOwnProperty(p='RANGE')){v=obj[p];if(v&&v.pop){intCheck(v[0],-MAX,-1,p);intCheck(v[1],1,MAX,p);MIN_EXP=v[0];MAX_EXP=v[1];}else{intCheck(v,-MAX,MAX,p);if(v){MIN_EXP=-(MAX_EXP=v<0?-v:v);}else{throw Error(bignumberError+p+' cannot be zero: '+v);}}}if(obj.hasOwnProperty(p='CRYPTO')){v=obj[p];if(v===!!v){if(v){if(typeof crypto!='undefined'&&crypto&&(crypto.getRandomValues||crypto.randomBytes)){CRYPTO=v;}else{CRYPTO=!v;throw Error(bignumberError+'crypto unavailable');}}else{CRYPTO=v;}}else{throw Error(bignumberError+p+' not true or false: '+v);}}if(obj.hasOwnProperty(p='MODULO_MODE')){v=obj[p];intCheck(v,0,9,p);MODULO_MODE=v;}if(obj.hasOwnProperty(p='POW_PRECISION')){v=obj[p];intCheck(v,0,MAX,p);POW_PRECISION=v;}if(obj.hasOwnProperty(p='FORMAT')){v=obj[p];if(typeof v=='object')FORMAT=v;else throw Error(bignumberError+p+' not an object: '+v);}if(obj.hasOwnProperty(p='ALPHABET')){v=obj[p];if(typeof v=='string'&&!/^.$|[+-.\s]|(.).*\1/.test(v)){ALPHABET=v;}else{throw Error(bignumberError+p+' invalid: '+v);}}}else{throw Error(bignumberError+'Object expected: '+obj);}}return{DECIMAL_PLACES:DECIMAL_PLACES,ROUNDING_MODE:ROUNDING_MODE,EXPONENTIAL_AT:[TO_EXP_NEG,TO_EXP_POS],RANGE:[MIN_EXP,MAX_EXP],CRYPTO:CRYPTO,MODULO_MODE:MODULO_MODE,POW_PRECISION:POW_PRECISION,FORMAT:FORMAT,ALPHABET:ALPHABET};};BigNumber.isBigNumber=function(v){if(!v||v._isBigNumber!==true)return false;if(!BigNumber.DEBUG)return true;var i,n,c=v.c,e=v.e,s=v.s;out:if({}.toString.call(c)=='[object Array]'){if((s===1||s===-1)&&e>=-MAX&&e<=MAX&&e===mathfloor(e)){if(c[0]===0){if(e===0&&c.length===1)return true;break out;}i=(e+1)%LOG_BASE;if(i<1)i+=LOG_BASE;if(String(c[0]).length==i){for(i=0;i<c.length;i++){n=c[i];if(n<0||n>=BASE||n!==mathfloor(n))break out;}if(n!==0)return true;}}}else if(c===null&&e===null&&(s===null||s===1||s===-1)){return true;}throw Error(bignumberError+'Invalid BigNumber: '+v);};BigNumber.maximum=BigNumber.max=function(){return maxOrMin(arguments,P.lt);};BigNumber.minimum=BigNumber.min=function(){return maxOrMin(arguments,P.gt);};BigNumber.random=function(){var pow2_53=0x20000000000000;var random53bitInt=Math.random()*pow2_53&0x1fffff?function(){return mathfloor(Math.random()*pow2_53);}:function(){return(Math.random()*0x40000000|0)*0x800000+(Math.random()*0x800000|0);};return function(dp){var a,b,e,k,v,i=0,c=[],rand=new BigNumber(ONE);if(dp==null)dp=DECIMAL_PLACES;else intCheck(dp,0,MAX);k=mathceil(dp/LOG_BASE);if(CRYPTO){if(crypto.getRandomValues){a=crypto.getRandomValues(new Uint32Array(k*=2));for(;i<k;){v=a[i]*0x20000+(a[i+1]>>>11);if(v>=9e15){b=crypto.getRandomValues(new Uint32Array(2));a[i]=b[0];a[i+1]=b[1];}else{c.push(v%1e14);i+=2;}}i=k/2;}else if(crypto.randomBytes){a=crypto.randomBytes(k*=7);for(;i<k;){v=(a[i]&31)*0x1000000000000+a[i+1]*0x10000000000+a[i+2]*0x100000000+a[i+3]*0x1000000+(a[i+4]<<16)+(a[i+5]<<8)+a[i+6];if(v>=9e15){crypto.randomBytes(7).copy(a,i);}else{c.push(v%1e14);i+=7;}}i=k/7;}else{CRYPTO=false;throw Error(bignumberError+'crypto unavailable');}}if(!CRYPTO){for(;i<k;){v=random53bitInt();if(v<9e15)c[i++]=v%1e14;}}k=c[--i];dp%=LOG_BASE;if(k&&dp){v=POWS_TEN[LOG_BASE-dp];c[i]=mathfloor(k/v)*v;}for(;c[i]===0;c.pop(),i--);if(i<0){c=[e=0];}else{for(e=-1;c[0]===0;c.splice(0,1),e-=LOG_BASE);for(i=1,v=c[0];v>=10;v/=10,i++);if(i<LOG_BASE)e-=LOG_BASE-i;}rand.e=e;rand.c=c;return rand;};}();BigNumber.sum=function(){var i=1,args=arguments,sum=new BigNumber(args[0]);for(;i<args.length;)sum=sum.plus(args[i++]);return sum;};convertBase=function(){var decimal='0123456789';function toBaseOut(str,baseIn,baseOut,alphabet){var j,arr=[0],arrL,i=0,len=str.length;for(;i<len;){for(arrL=arr.length;arrL--;arr[arrL]*=baseIn);arr[0]+=alphabet.indexOf(str.charAt(i++));for(j=0;j<arr.length;j++){if(arr[j]>baseOut-1){if(arr[j+1]==null)arr[j+1]=0;arr[j+1]+=arr[j]/baseOut|0;arr[j]%=baseOut;}}}return arr.reverse();}return function(str,baseIn,baseOut,sign,callerIsToString){var alphabet,d,e,k,r,x,xc,y,i=str.indexOf('.'),dp=DECIMAL_PLACES,rm=ROUNDING_MODE;if(i>=0){k=POW_PRECISION;POW_PRECISION=0;str=str.replace('.','');y=new BigNumber(baseIn);x=y.pow(str.length-i);POW_PRECISION=k;y.c=toBaseOut(toFixedPoint(coeffToString(x.c),x.e,'0'),10,baseOut,decimal);y.e=y.c.length;}xc=toBaseOut(str,baseIn,baseOut,callerIsToString?(alphabet=ALPHABET,decimal):(alphabet=decimal,ALPHABET));e=k=xc.length;for(;xc[--k]==0;xc.pop());if(!xc[0])return alphabet.charAt(0);if(i<0){--e;}else{x.c=xc;x.e=e;x.s=sign;x=div(x,y,dp,rm,baseOut);xc=x.c;r=x.r;e=x.e;}d=e+dp+1;i=xc[d];k=baseOut/2;r=r||d<0||xc[d+1]!=null;r=rm<4?(i!=null||r)&&(rm==0||rm==(x.s<0?3:2)):i>k||i==k&&(rm==4||r||rm==6&&xc[d-1]&1||rm==(x.s<0?8:7));if(d<1||!xc[0]){str=r?toFixedPoint(alphabet.charAt(1),-dp,alphabet.charAt(0)):alphabet.charAt(0);}else{xc.length=d;if(r){for(--baseOut;++xc[--d]>baseOut;){xc[d]=0;if(!d){++e;xc=[1].concat(xc);}}}for(k=xc.length;!xc[--k];);for(i=0,str='';i<=k;str+=alphabet.charAt(xc[i++]));str=toFixedPoint(str,e,alphabet.charAt(0));}return str;};}();div=function(){function multiply(x,k,base){var m,temp,xlo,xhi,carry=0,i=x.length,klo=k%SQRT_BASE,khi=k/SQRT_BASE|0;for(x=x.slice();i--;){xlo=x[i]%SQRT_BASE;xhi=x[i]/SQRT_BASE|0;m=khi*xlo+xhi*klo;temp=klo*xlo+m%SQRT_BASE*SQRT_BASE+carry;carry=(temp/base|0)+(m/SQRT_BASE|0)+khi*xhi;x[i]=temp%base;}if(carry)x=[carry].concat(x);return x;}function compare(a,b,aL,bL){var i,cmp;if(aL!=bL){cmp=aL>bL?1:-1;}else{for(i=cmp=0;i<aL;i++){if(a[i]!=b[i]){cmp=a[i]>b[i]?1:-1;break;}}}return cmp;}function subtract(a,b,aL,base){var i=0;for(;aL--;){a[aL]-=i;i=a[aL]<b[aL]?1:0;a[aL]=i*base+a[aL]-b[aL];}for(;!a[0]&&a.length>1;a.splice(0,1));}return function(x,y,dp,rm,base){var cmp,e,i,more,n,prod,prodL,q,qc,rem,remL,rem0,xi,xL,yc0,yL,yz,s=x.s==y.s?1:-1,xc=x.c,yc=y.c;if(!xc||!xc[0]||!yc||!yc[0]){return new BigNumber(!x.s||!y.s||(xc?yc&&xc[0]==yc[0]:!yc)?NaN:xc&&xc[0]==0||!yc?s*0:s/0);}q=new BigNumber(s);qc=q.c=[];e=x.e-y.e;s=dp+e+1;if(!base){base=BASE;e=bitFloor(x.e/LOG_BASE)-bitFloor(y.e/LOG_BASE);s=s/LOG_BASE|0;}for(i=0;yc[i]==(xc[i]||0);i++);if(yc[i]>(xc[i]||0))e--;if(s<0){qc.push(1);more=true;}else{xL=xc.length;yL=yc.length;i=0;s+=2;n=mathfloor(base/(yc[0]+1));if(n>1){yc=multiply(yc,n,base);xc=multiply(xc,n,base);yL=yc.length;xL=xc.length;}xi=yL;rem=xc.slice(0,yL);remL=rem.length;for(;remL<yL;rem[remL++]=0);yz=yc.slice();yz=[0].concat(yz);yc0=yc[0];if(yc[1]>=base/2)yc0++;do{n=0;cmp=compare(yc,rem,yL,remL);if(cmp<0){rem0=rem[0];if(yL!=remL)rem0=rem0*base+(rem[1]||0);n=mathfloor(rem0/yc0);if(n>1){if(n>=base)n=base-1;prod=multiply(yc,n,base);prodL=prod.length;remL=rem.length;while(compare(prod,rem,prodL,remL)==1){n--;subtract(prod,yL<prodL?yz:yc,prodL,base);prodL=prod.length;cmp=1;}}else{if(n==0){cmp=n=1;}prod=yc.slice();prodL=prod.length;}if(prodL<remL)prod=[0].concat(prod);subtract(rem,prod,remL,base);remL=rem.length;if(cmp==-1){while(compare(yc,rem,yL,remL)<1){n++;subtract(rem,yL<remL?yz:yc,remL,base);remL=rem.length;}}}else if(cmp===0){n++;rem=[0];}qc[i++]=n;if(rem[0]){rem[remL++]=xc[xi]||0;}else{rem=[xc[xi]];remL=1;}}while((xi++<xL||rem[0]!=null)&&s--);more=rem[0]!=null;if(!qc[0])qc.splice(0,1);}if(base==BASE){for(i=1,s=qc[0];s>=10;s/=10,i++);round(q,dp+(q.e=i+e*LOG_BASE-1)+1,rm,more);}else{q.e=e;q.r=+more;}return q;};}();function format(n,i,rm,id){var c0,e,ne,len,str;if(rm==null)rm=ROUNDING_MODE;else intCheck(rm,0,8);if(!n.c)return n.toString();c0=n.c[0];ne=n.e;if(i==null){str=coeffToString(n.c);str=id==1||id==2&&(ne<=TO_EXP_NEG||ne>=TO_EXP_POS)?toExponential(str,ne):toFixedPoint(str,ne,'0');}else{n=round(new BigNumber(n),i,rm);e=n.e;str=coeffToString(n.c);len=str.length;if(id==1||id==2&&(i<=e||e<=TO_EXP_NEG)){for(;len<i;str+='0',len++);str=toExponential(str,e);}else{i-=ne;str=toFixedPoint(str,e,'0');if(e+1>len){if(--i>0)for(str+='.';i--;str+='0');}else{i+=e-len;if(i>0){if(e+1==len)str+='.';for(;i--;str+='0');}}}}return n.s<0&&c0?'-'+str:str;}function maxOrMin(args,method){var n,i=1,m=new BigNumber(args[0]);for(;i<args.length;i++){n=new BigNumber(args[i]);if(!n.s){m=n;break;}else if(method.call(m,n)){m=n;}}return m;}function normalise(n,c,e){var i=1,j=c.length;for(;!c[--j];c.pop());for(j=c[0];j>=10;j/=10,i++);if((e=i+e*LOG_BASE-1)>MAX_EXP){n.c=n.e=null;}else if(e<MIN_EXP){n.c=[n.e=0];}else{n.e=e;n.c=c;}return n;}parseNumeric=function(){var basePrefix=/^(-?)0([xbo])(?=\w[\w.]*$)/i,dotAfter=/^([^.]+)\.$/,dotBefore=/^\.([^.]+)$/,isInfinityOrNaN=/^-?(Infinity|NaN)$/,whitespaceOrPlus=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(x,str,isNum,b){var base,s=isNum?str:str.replace(whitespaceOrPlus,'');if(isInfinityOrNaN.test(s)){x.s=isNaN(s)?null:s<0?-1:1;}else{if(!isNum){s=s.replace(basePrefix,function(m,p1,p2){base=(p2=p2.toLowerCase())=='x'?16:p2=='b'?2:8;return!b||b==base?p1:m;});if(b){base=b;s=s.replace(dotAfter,'$1').replace(dotBefore,'0.$1');}if(str!=s)return new BigNumber(s,base);}if(BigNumber.DEBUG){throw Error(bignumberError+'Not a'+(b?' base '+b:'')+' number: '+str);}x.s=null;}x.c=x.e=null;};}();function round(x,sd,rm,r){var d,i,j,k,n,ni,rd,xc=x.c,pows10=POWS_TEN;if(xc){out:{for(d=1,k=xc[0];k>=10;k/=10,d++);i=sd-d;if(i<0){i+=LOG_BASE;j=sd;n=xc[ni=0];rd=n/pows10[d-j-1]%10|0;}else{ni=mathceil((i+1)/LOG_BASE);if(ni>=xc.length){if(r){for(;xc.length<=ni;xc.push(0));n=rd=0;d=1;i%=LOG_BASE;j=i-LOG_BASE+1;}else{break out;}}else{n=k=xc[ni];for(d=1;k>=10;k/=10,d++);i%=LOG_BASE;j=i-LOG_BASE+d;rd=j<0?0:n/pows10[d-j-1]%10|0;}}r=r||sd<0||xc[ni+1]!=null||(j<0?n:n%pows10[d-j-1]);r=rm<4?(rd||r)&&(rm==0||rm==(x.s<0?3:2)):rd>5||rd==5&&(rm==4||r||rm==6&&(i>0?j>0?n/pows10[d-j]:0:xc[ni-1])%10&1||rm==(x.s<0?8:7));if(sd<1||!xc[0]){xc.length=0;if(r){sd-=x.e+1;xc[0]=pows10[(LOG_BASE-sd%LOG_BASE)%LOG_BASE];x.e=-sd||0;}else{xc[0]=x.e=0;}return x;}if(i==0){xc.length=ni;k=1;ni--;}else{xc.length=ni+1;k=pows10[LOG_BASE-i];xc[ni]=j>0?mathfloor(n/pows10[d-j]%pows10[j])*k:0;}if(r){for(;;){if(ni==0){for(i=1,j=xc[0];j>=10;j/=10,i++);j=xc[0]+=k;for(k=1;j>=10;j/=10,k++);if(i!=k){x.e++;if(xc[0]==BASE)xc[0]=1;}break;}else{xc[ni]+=k;if(xc[ni]!=BASE)break;xc[ni--]=0;k=1;}}}for(i=xc.length;xc[--i]===0;xc.pop());}if(x.e>MAX_EXP){x.c=x.e=null;}else if(x.e<MIN_EXP){x.c=[x.e=0];}}return x;}function valueOf(n){var str,e=n.e;if(e===null)return n.toString();str=coeffToString(n.c);str=e<=TO_EXP_NEG||e>=TO_EXP_POS?toExponential(str,e):toFixedPoint(str,e,'0');return n.s<0?'-'+str:str;}P.absoluteValue=P.abs=function(){var x=new BigNumber(this);if(x.s<0)x.s=1;return x;};P.comparedTo=function(y,b){return compare(this,new BigNumber(y,b));};P.decimalPlaces=P.dp=function(dp,rm){var c,n,v,x=this;if(dp!=null){intCheck(dp,0,MAX);if(rm==null)rm=ROUNDING_MODE;else intCheck(rm,0,8);return round(new BigNumber(x),dp+x.e+1,rm);}if(!(c=x.c))return null;n=((v=c.length-1)-bitFloor(this.e/LOG_BASE))*LOG_BASE;if(v=c[v])for(;v%10==0;v/=10,n--);if(n<0)n=0;return n;};P.dividedBy=P.div=function(y,b){return div(this,new BigNumber(y,b),DECIMAL_PLACES,ROUNDING_MODE);};P.dividedToIntegerBy=P.idiv=function(y,b){return div(this,new BigNumber(y,b),0,1);};P.exponentiatedBy=P.pow=function(n,m){var half,isModExp,i,k,more,nIsBig,nIsNeg,nIsOdd,y,x=this;n=new BigNumber(n);if(n.c&&!n.isInteger()){throw Error(bignumberError+'Exponent not an integer: '+valueOf(n));}if(m!=null)m=new BigNumber(m);nIsBig=n.e>14;if(!x.c||!x.c[0]||x.c[0]==1&&!x.e&&x.c.length==1||!n.c||!n.c[0]){y=new BigNumber(Math.pow(+valueOf(x),nIsBig?2-isOdd(n):+valueOf(n)));return m?y.mod(m):y;}nIsNeg=n.s<0;if(m){if(m.c?!m.c[0]:!m.s)return new BigNumber(NaN);isModExp=!nIsNeg&&x.isInteger()&&m.isInteger();if(isModExp)x=x.mod(m);}else if(n.e>9&&(x.e>0||x.e<-1||(x.e==0?x.c[0]>1||nIsBig&&x.c[1]>=24e7:x.c[0]<8e13||nIsBig&&x.c[0]<=9999975e7))){k=x.s<0&&isOdd(n)?-0:0;if(x.e>-1)k=1/k;return new BigNumber(nIsNeg?1/k:k);}else if(POW_PRECISION){k=mathceil(POW_PRECISION/LOG_BASE+2);}if(nIsBig){half=new BigNumber(0.5);if(nIsNeg)n.s=1;nIsOdd=isOdd(n);}else{i=Math.abs(+valueOf(n));nIsOdd=i%2;}y=new BigNumber(ONE);for(;;){if(nIsOdd){y=y.times(x);if(!y.c)break;if(k){if(y.c.length>k)y.c.length=k;}else if(isModExp){y=y.mod(m);}}if(i){i=mathfloor(i/2);if(i===0)break;nIsOdd=i%2;}else{n=n.times(half);round(n,n.e+1,1);if(n.e>14){nIsOdd=isOdd(n);}else{i=+valueOf(n);if(i===0)break;nIsOdd=i%2;}}x=x.times(x);if(k){if(x.c&&x.c.length>k)x.c.length=k;}else if(isModExp){x=x.mod(m);}}if(isModExp)return y;if(nIsNeg)y=ONE.div(y);return m?y.mod(m):k?round(y,POW_PRECISION,ROUNDING_MODE,more):y;};P.integerValue=function(rm){var n=new BigNumber(this);if(rm==null)rm=ROUNDING_MODE;else intCheck(rm,0,8);return round(n,n.e+1,rm);};P.isEqualTo=P.eq=function(y,b){return compare(this,new BigNumber(y,b))===0;};P.isFinite=function(){return!!this.c;};P.isGreaterThan=P.gt=function(y,b){return compare(this,new BigNumber(y,b))>0;};P.isGreaterThanOrEqualTo=P.gte=function(y,b){return(b=compare(this,new BigNumber(y,b)))===1||b===0;};P.isInteger=function(){return!!this.c&&bitFloor(this.e/LOG_BASE)>this.c.length-2;};P.isLessThan=P.lt=function(y,b){return compare(this,new BigNumber(y,b))<0;};P.isLessThanOrEqualTo=P.lte=function(y,b){return(b=compare(this,new BigNumber(y,b)))===-1||b===0;};P.isNaN=function(){return!this.s;};P.isNegative=function(){return this.s<0;};P.isPositive=function(){return this.s>0;};P.isZero=function(){return!!this.c&&this.c[0]==0;};P.minus=function(y,b){var i,j,t,xLTy,x=this,a=x.s;y=new BigNumber(y,b);b=y.s;if(!a||!b)return new BigNumber(NaN);if(a!=b){y.s=-b;return x.plus(y);}var xe=x.e/LOG_BASE,ye=y.e/LOG_BASE,xc=x.c,yc=y.c;if(!xe||!ye){if(!xc||!yc)return xc?(y.s=-b,y):new BigNumber(yc?x:NaN);if(!xc[0]||!yc[0]){return yc[0]?(y.s=-b,y):new BigNumber(xc[0]?x:ROUNDING_MODE==3?-0:0);}}xe=bitFloor(xe);ye=bitFloor(ye);xc=xc.slice();if(a=xe-ye){if(xLTy=a<0){a=-a;t=xc;}else{ye=xe;t=yc;}t.reverse();for(b=a;b--;t.push(0));t.reverse();}else{j=(xLTy=(a=xc.length)<(b=yc.length))?a:b;for(a=b=0;b<j;b++){if(xc[b]!=yc[b]){xLTy=xc[b]<yc[b];break;}}}if(xLTy)t=xc,xc=yc,yc=t,y.s=-y.s;b=(j=yc.length)-(i=xc.length);if(b>0)for(;b--;xc[i++]=0);b=BASE-1;for(;j>a;){if(xc[--j]<yc[j]){for(i=j;i&&!xc[--i];xc[i]=b);--xc[i];xc[j]+=BASE;}xc[j]-=yc[j];}for(;xc[0]==0;xc.splice(0,1),--ye);if(!xc[0]){y.s=ROUNDING_MODE==3?-1:1;y.c=[y.e=0];return y;}return normalise(y,xc,ye);};P.modulo=P.mod=function(y,b){var q,s,x=this;y=new BigNumber(y,b);if(!x.c||!y.s||y.c&&!y.c[0]){return new BigNumber(NaN);}else if(!y.c||x.c&&!x.c[0]){return new BigNumber(x);}if(MODULO_MODE==9){s=y.s;y.s=1;q=div(x,y,0,3);y.s=s;q.s*=s;}else{q=div(x,y,0,MODULO_MODE);}y=x.minus(q.times(y));if(!y.c[0]&&MODULO_MODE==1)y.s=x.s;return y;};P.multipliedBy=P.times=function(y,b){var c,e,i,j,k,m,xcL,xlo,xhi,ycL,ylo,yhi,zc,base,sqrtBase,x=this,xc=x.c,yc=(y=new BigNumber(y,b)).c;if(!xc||!yc||!xc[0]||!yc[0]){if(!x.s||!y.s||xc&&!xc[0]&&!yc||yc&&!yc[0]&&!xc){y.c=y.e=y.s=null;}else{y.s*=x.s;if(!xc||!yc){y.c=y.e=null;}else{y.c=[0];y.e=0;}}return y;}e=bitFloor(x.e/LOG_BASE)+bitFloor(y.e/LOG_BASE);y.s*=x.s;xcL=xc.length;ycL=yc.length;if(xcL<ycL)zc=xc,xc=yc,yc=zc,i=xcL,xcL=ycL,ycL=i;for(i=xcL+ycL,zc=[];i--;zc.push(0));base=BASE;sqrtBase=SQRT_BASE;for(i=ycL;--i>=0;){c=0;ylo=yc[i]%sqrtBase;yhi=yc[i]/sqrtBase|0;for(k=xcL,j=i+k;j>i;){xlo=xc[--k]%sqrtBase;xhi=xc[k]/sqrtBase|0;m=yhi*xlo+xhi*ylo;xlo=ylo*xlo+m%sqrtBase*sqrtBase+zc[j]+c;c=(xlo/base|0)+(m/sqrtBase|0)+yhi*xhi;zc[j--]=xlo%base;}zc[j]=c;}if(c){++e;}else{zc.splice(0,1);}return normalise(y,zc,e);};P.negated=function(){var x=new BigNumber(this);x.s=-x.s||null;return x;};P.plus=function(y,b){var t,x=this,a=x.s;y=new BigNumber(y,b);b=y.s;if(!a||!b)return new BigNumber(NaN);if(a!=b){y.s=-b;return x.minus(y);}var xe=x.e/LOG_BASE,ye=y.e/LOG_BASE,xc=x.c,yc=y.c;if(!xe||!ye){if(!xc||!yc)return new BigNumber(a/0);if(!xc[0]||!yc[0])return yc[0]?y:new BigNumber(xc[0]?x:a*0);}xe=bitFloor(xe);ye=bitFloor(ye);xc=xc.slice();if(a=xe-ye){if(a>0){ye=xe;t=yc;}else{a=-a;t=xc;}t.reverse();for(;a--;t.push(0));t.reverse();}a=xc.length;b=yc.length;if(a-b<0)t=yc,yc=xc,xc=t,b=a;for(a=0;b;){a=(xc[--b]=xc[b]+yc[b]+a)/BASE|0;xc[b]=BASE===xc[b]?0:xc[b]%BASE;}if(a){xc=[a].concat(xc);++ye;}return normalise(y,xc,ye);};P.precision=P.sd=function(sd,rm){var c,n,v,x=this;if(sd!=null&&sd!==!!sd){intCheck(sd,1,MAX);if(rm==null)rm=ROUNDING_MODE;else intCheck(rm,0,8);return round(new BigNumber(x),sd,rm);}if(!(c=x.c))return null;v=c.length-1;n=v*LOG_BASE+1;if(v=c[v]){for(;v%10==0;v/=10,n--);for(v=c[0];v>=10;v/=10,n++);}if(sd&&x.e+1>n)n=x.e+1;return n;};P.shiftedBy=function(k){intCheck(k,-MAX_SAFE_INTEGER,MAX_SAFE_INTEGER);return this.times('1e'+k);};P.squareRoot=P.sqrt=function(){var m,n,r,rep,t,x=this,c=x.c,s=x.s,e=x.e,dp=DECIMAL_PLACES+4,half=new BigNumber('0.5');if(s!==1||!c||!c[0]){return new BigNumber(!s||s<0&&(!c||c[0])?NaN:c?x:1/0);}s=Math.sqrt(+valueOf(x));if(s==0||s==1/0){n=coeffToString(c);if((n.length+e)%2==0)n+='0';s=Math.sqrt(+n);e=bitFloor((e+1)/2)-(e<0||e%2);if(s==1/0){n='1e'+e;}else{n=s.toExponential();n=n.slice(0,n.indexOf('e')+1)+e;}r=new BigNumber(n);}else{r=new BigNumber(s+'');}if(r.c[0]){e=r.e;s=e+dp;if(s<3)s=0;for(;;){t=r;r=half.times(t.plus(div(x,t,dp,1)));if(coeffToString(t.c).slice(0,s)===(n=coeffToString(r.c)).slice(0,s)){if(r.e<e)--s;n=n.slice(s-3,s+1);if(n=='9999'||!rep&&n=='4999'){if(!rep){round(t,t.e+DECIMAL_PLACES+2,0);if(t.times(t).eq(x)){r=t;break;}}dp+=4;s+=4;rep=1;}else{if(!+n||!+n.slice(1)&&n.charAt(0)=='5'){round(r,r.e+DECIMAL_PLACES+2,1);m=!r.times(r).eq(x);}break;}}}}return round(r,r.e+DECIMAL_PLACES+1,ROUNDING_MODE,m);};P.toExponential=function(dp,rm){if(dp!=null){intCheck(dp,0,MAX);dp++;}return format(this,dp,rm,1);};P.toFixed=function(dp,rm){if(dp!=null){intCheck(dp,0,MAX);dp=dp+this.e+1;}return format(this,dp,rm);};P.toFormat=function(dp,rm,format){var str,x=this;if(format==null){if(dp!=null&&rm&&typeof rm=='object'){format=rm;rm=null;}else if(dp&&typeof dp=='object'){format=dp;dp=rm=null;}else{format=FORMAT;}}else if(typeof format!='object'){throw Error(bignumberError+'Argument not an object: '+format);}str=x.toFixed(dp,rm);if(x.c){var i,arr=str.split('.'),g1=+format.groupSize,g2=+format.secondaryGroupSize,groupSeparator=format.groupSeparator||'',intPart=arr[0],fractionPart=arr[1],isNeg=x.s<0,intDigits=isNeg?intPart.slice(1):intPart,len=intDigits.length;if(g2)i=g1,g1=g2,g2=i,len-=i;if(g1>0&&len>0){i=len%g1||g1;intPart=intDigits.substr(0,i);for(;i<len;i+=g1)intPart+=groupSeparator+intDigits.substr(i,g1);if(g2>0)intPart+=groupSeparator+intDigits.slice(i);if(isNeg)intPart='-'+intPart;}str=fractionPart?intPart+(format.decimalSeparator||'')+((g2=+format.fractionGroupSize)?fractionPart.replace(new RegExp('\\d{'+g2+'}\\B','g'),'$&'+(format.fractionGroupSeparator||'')):fractionPart):intPart;}return(format.prefix||'')+str+(format.suffix||'');};P.toFraction=function(md){var d,d0,d1,d2,e,exp,n,n0,n1,q,r,s,x=this,xc=x.c;if(md!=null){n=new BigNumber(md);if(!n.isInteger()&&(n.c||n.s!==1)||n.lt(ONE)){throw Error(bignumberError+'Argument '+(n.isInteger()?'out of range: ':'not an integer: ')+valueOf(n));}}if(!xc)return new BigNumber(x);d=new BigNumber(ONE);n1=d0=new BigNumber(ONE);d1=n0=new BigNumber(ONE);s=coeffToString(xc);e=d.e=s.length-x.e-1;d.c[0]=POWS_TEN[(exp=e%LOG_BASE)<0?LOG_BASE+exp:exp];md=!md||n.comparedTo(d)>0?e>0?d:n1:n;exp=MAX_EXP;MAX_EXP=1/0;n=new BigNumber(s);n0.c[0]=0;for(;;){q=div(n,d,0,1);d2=d0.plus(q.times(d1));if(d2.comparedTo(md)==1)break;d0=d1;d1=d2;n1=n0.plus(q.times(d2=n1));n0=d2;d=n.minus(q.times(d2=d));n=d2;}d2=div(md.minus(d0),d1,0,1);n0=n0.plus(d2.times(n1));d0=d0.plus(d2.times(d1));n0.s=n1.s=x.s;e=e*2;r=div(n1,d1,e,ROUNDING_MODE).minus(x).abs().comparedTo(div(n0,d0,e,ROUNDING_MODE).minus(x).abs())<1?[n1,d1]:[n0,d0];MAX_EXP=exp;return r;};P.toNumber=function(){return+valueOf(this);};P.toPrecision=function(sd,rm){if(sd!=null)intCheck(sd,1,MAX);return format(this,sd,rm,2);};P.toString=function(b){var str,n=this,s=n.s,e=n.e;if(e===null){if(s){str='Infinity';if(s<0)str='-'+str;}else{str='NaN';}}else{if(b==null){str=e<=TO_EXP_NEG||e>=TO_EXP_POS?toExponential(coeffToString(n.c),e):toFixedPoint(coeffToString(n.c),e,'0');}else if(b===10){n=round(new BigNumber(n),DECIMAL_PLACES+e+1,ROUNDING_MODE);str=toFixedPoint(coeffToString(n.c),n.e,'0');}else{intCheck(b,2,ALPHABET.length,'Base');str=convertBase(toFixedPoint(coeffToString(n.c),e,'0'),10,b,s,true);}if(s<0&&n.c[0])str='-'+str;}return str;};P.valueOf=P.toJSON=function(){return valueOf(this);};P._isBigNumber=true;if(hasSymbol){P[Symbol.toStringTag]='BigNumber';P[Symbol.for('nodejs.util.inspect.custom')]=P.valueOf;}if(configObject!=null)BigNumber.set(configObject);return BigNumber;}function bitFloor(n){var i=n|0;return n>0||n===i?i:i-1;}function coeffToString(a){var s,z,i=1,j=a.length,r=a[0]+'';for(;i<j;){s=a[i++]+'';z=LOG_BASE-s.length;for(;z--;s='0'+s);r+=s;}for(j=r.length;r.charCodeAt(--j)===48;);return r.slice(0,j+1||1);}function compare(x,y){var a,b,xc=x.c,yc=y.c,i=x.s,j=y.s,k=x.e,l=y.e;if(!i||!j)return null;a=xc&&!xc[0];b=yc&&!yc[0];if(a||b)return a?b?0:-j:i;if(i!=j)return i;a=i<0;b=k==l;if(!xc||!yc)return b?0:!xc^a?1:-1;if(!b)return k>l^a?1:-1;j=(k=xc.length)<(l=yc.length)?k:l;for(i=0;i<j;i++)if(xc[i]!=yc[i])return xc[i]>yc[i]^a?1:-1;return k==l?0:k>l^a?1:-1;}function intCheck(n,min,max,name){if(n<min||n>max||n!==mathfloor(n)){throw Error(bignumberError+(name||'Argument')+(typeof n=='number'?n<min||n>max?' out of range: ':' not an integer: ':' not a primitive number: ')+String(n));}}function isOdd(n){var k=n.c.length-1;return bitFloor(n.e/LOG_BASE)==k&&n.c[k]%2!=0;}function toExponential(str,e){return(str.length>1?str.charAt(0)+'.'+str.slice(1):str)+(e<0?'e':'e+')+e;}function toFixedPoint(str,e,z){var len,zs;if(e<0){for(zs=z+'.';++e;zs+=z);str=zs+str;}else{len=str.length;if(++e>len){for(zs=z,e-=len;--e;zs+=z);str+=zs;}else if(e<len){str=str.slice(0,e)+'.'+str.slice(e);}}return str;}BigNumber=clone();BigNumber['default']=BigNumber.BigNumber=BigNumber;if(typeof define=='function'&&define.amd){define(function(){return BigNumber;});}else if(true&&module.exports){module.exports=BigNumber;}else{if(!globalObject){globalObject=typeof self!='undefined'&&self?self:window;}globalObject.BigNumber=BigNumber;}})(this);},4429:function(module,__unusedexports,__webpack_require__){var b2b=__webpack_require__(6972);var b2s=__webpack_require__(5646);module.exports={blake2b:b2b.blake2b,blake2bHex:b2b.blake2bHex,blake2bInit:b2b.blake2bInit,blake2bUpdate:b2b.blake2bUpdate,blake2bFinal:b2b.blake2bFinal,blake2s:b2s.blake2s,blake2sHex:b2s.blake2sHex,blake2sInit:b2s.blake2sInit,blake2sUpdate:b2s.blake2sUpdate,blake2sFinal:b2s.blake2sFinal};},4436:function(module,exports,__webpack_require__){"use strict";const{Key}=__webpack_require__(759);const{Record}=__webpack_require__(6091);const{encodeBase32}=__webpack_require__(3524);const errcode=__webpack_require__(4999);const debug=__webpack_require__(746);const log=debug('jsipfs:ipns:offline-datastore');log.error=debug('jsipfs:ipns:offline-datastore:error');class OfflineDatastore{constructor(repo){this._repo=repo;}put(key,value,callback){if(!Buffer.isBuffer(key)){const errMsg=`Offline datastore key must be a buffer`;log.error(errMsg);return callback(errcode(new Error(errMsg),'ERR_INVALID_KEY'));}if(!Buffer.isBuffer(value)){const errMsg=`Offline datastore value must be a buffer`;log.error(errMsg);return callback(errcode(new Error(errMsg),'ERR_INVALID_VALUE'));}let routingKey;try{routingKey=this._routingKey(key);}catch(err){const errMsg=`Not possible to generate the routing key`;log.error(errMsg);return callback(errcode(new Error(errMsg),'ERR_GENERATING_ROUTING_KEY'));}const record=new Record(key,value);this._repo.datastore.put(routingKey,record.serialize(),callback);}get(key,callback){if(!Buffer.isBuffer(key)){const errMsg=`Offline datastore key must be a buffer`;log.error(errMsg);return callback(errcode(new Error(errMsg),'ERR_INVALID_KEY'));}let routingKey;try{routingKey=this._routingKey(key);}catch(err){const errMsg=`Not possible to generate the routing key`;log.error(errMsg);return callback(errcode(new Error(errMsg),'ERR_GENERATING_ROUTING_KEY'));}this._repo.datastore.get(routingKey,(err,res)=>{if(err){return callback(err);}let record;try{record=Record.deserialize(res);}catch(err){log.error(err);return callback(err);}callback(null,record.value);});}_routingKey(key){return new Key('/'+encodeBase32(key),false);}}exports=module.exports=OfflineDatastore;},4442:function(module,__unusedexports,__webpack_require__){module.exports=__webpack_require__(5910);},4445:function(module,__unusedexports,__webpack_require__){var forge=__webpack_require__(7938);__webpack_require__(1617);__webpack_require__(5947);__webpack_require__(1835);__webpack_require__(6321);__webpack_require__(8816);__webpack_require__(1087);__webpack_require__(5105);__webpack_require__(5835);__webpack_require__(9786);__webpack_require__(1214);var asn1=forge.asn1;var pki=module.exports=forge.pki=forge.pki||{};var oids=pki.oids;var _shortNames={};_shortNames['CN']=oids['commonName'];_shortNames['commonName']='CN';_shortNames['C']=oids['countryName'];_shortNames['countryName']='C';_shortNames['L']=oids['localityName'];_shortNames['localityName']='L';_shortNames['ST']=oids['stateOrProvinceName'];_shortNames['stateOrProvinceName']='ST';_shortNames['O']=oids['organizationName'];_shortNames['organizationName']='O';_shortNames['OU']=oids['organizationalUnitName'];_shortNames['organizationalUnitName']='OU';_shortNames['E']=oids['emailAddress'];_shortNames['emailAddress']='E';var publicKeyValidator=forge.pki.rsa.publicKeyValidator;var x509CertificateValidator={name:'Certificate',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:true,value:[{name:'Certificate.TBSCertificate',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:true,captureAsn1:'tbsCertificate',value:[{name:'Certificate.TBSCertificate.version',tagClass:asn1.Class.CONTEXT_SPECIFIC,type:0,constructed:true,optional:true,value:[{name:'Certificate.TBSCertificate.version.integer',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.INTEGER,constructed:false,capture:'certVersion'}]},{name:'Certificate.TBSCertificate.serialNumber',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.INTEGER,constructed:false,capture:'certSerialNumber'},{name:'Certificate.TBSCertificate.signature',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:true,value:[{name:'Certificate.TBSCertificate.signature.algorithm',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.OID,constructed:false,capture:'certinfoSignatureOid'},{name:'Certificate.TBSCertificate.signature.parameters',tagClass:asn1.Class.UNIVERSAL,optional:true,captureAsn1:'certinfoSignatureParams'}]},{name:'Certificate.TBSCertificate.issuer',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:true,captureAsn1:'certIssuer'},{name:'Certificate.TBSCertificate.validity',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:true,value:[{name:'Certificate.TBSCertificate.validity.notBefore (utc)',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.UTCTIME,constructed:false,optional:true,capture:'certValidity1UTCTime'},{name:'Certificate.TBSCertificate.validity.notBefore (generalized)',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.GENERALIZEDTIME,constructed:false,optional:true,capture:'certValidity2GeneralizedTime'},{name:'Certificate.TBSCertificate.validity.notAfter (utc)',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.UTCTIME,constructed:false,optional:true,capture:'certValidity3UTCTime'},{name:'Certificate.TBSCertificate.validity.notAfter (generalized)',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.GENERALIZEDTIME,constructed:false,optional:true,capture:'certValidity4GeneralizedTime'}]},{name:'Certificate.TBSCertificate.subject',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:true,captureAsn1:'certSubject'},publicKeyValidator,{name:'Certificate.TBSCertificate.issuerUniqueID',tagClass:asn1.Class.CONTEXT_SPECIFIC,type:1,constructed:true,optional:true,value:[{name:'Certificate.TBSCertificate.issuerUniqueID.id',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.BITSTRING,constructed:false,captureBitStringValue:'certIssuerUniqueId'}]},{name:'Certificate.TBSCertificate.subjectUniqueID',tagClass:asn1.Class.CONTEXT_SPECIFIC,type:2,constructed:true,optional:true,value:[{name:'Certificate.TBSCertificate.subjectUniqueID.id',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.BITSTRING,constructed:false,captureBitStringValue:'certSubjectUniqueId'}]},{name:'Certificate.TBSCertificate.extensions',tagClass:asn1.Class.CONTEXT_SPECIFIC,type:3,constructed:true,captureAsn1:'certExtensions',optional:true}]},{name:'Certificate.signatureAlgorithm',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:true,value:[{name:'Certificate.signatureAlgorithm.algorithm',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.OID,constructed:false,capture:'certSignatureOid'},{name:'Certificate.TBSCertificate.signature.parameters',tagClass:asn1.Class.UNIVERSAL,optional:true,captureAsn1:'certSignatureParams'}]},{name:'Certificate.signatureValue',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.BITSTRING,constructed:false,captureBitStringValue:'certSignature'}]};var rsassaPssParameterValidator={name:'rsapss',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:true,value:[{name:'rsapss.hashAlgorithm',tagClass:asn1.Class.CONTEXT_SPECIFIC,type:0,constructed:true,value:[{name:'rsapss.hashAlgorithm.AlgorithmIdentifier',tagClass:asn1.Class.UNIVERSAL,type:asn1.Class.SEQUENCE,constructed:true,optional:true,value:[{name:'rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.OID,constructed:false,capture:'hashOid'}]}]},{name:'rsapss.maskGenAlgorithm',tagClass:asn1.Class.CONTEXT_SPECIFIC,type:1,constructed:true,value:[{name:'rsapss.maskGenAlgorithm.AlgorithmIdentifier',tagClass:asn1.Class.UNIVERSAL,type:asn1.Class.SEQUENCE,constructed:true,optional:true,value:[{name:'rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.OID,constructed:false,capture:'maskGenOid'},{name:'rsapss.maskGenAlgorithm.AlgorithmIdentifier.params',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:true,value:[{name:'rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.OID,constructed:false,capture:'maskGenHashOid'}]}]}]},{name:'rsapss.saltLength',tagClass:asn1.Class.CONTEXT_SPECIFIC,type:2,optional:true,value:[{name:'rsapss.saltLength.saltLength',tagClass:asn1.Class.UNIVERSAL,type:asn1.Class.INTEGER,constructed:false,capture:'saltLength'}]},{name:'rsapss.trailerField',tagClass:asn1.Class.CONTEXT_SPECIFIC,type:3,optional:true,value:[{name:'rsapss.trailer.trailer',tagClass:asn1.Class.UNIVERSAL,type:asn1.Class.INTEGER,constructed:false,capture:'trailer'}]}]};var certificationRequestInfoValidator={name:'CertificationRequestInfo',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:true,captureAsn1:'certificationRequestInfo',value:[{name:'CertificationRequestInfo.integer',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.INTEGER,constructed:false,capture:'certificationRequestInfoVersion'},{name:'CertificationRequestInfo.subject',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:true,captureAsn1:'certificationRequestInfoSubject'},publicKeyValidator,{name:'CertificationRequestInfo.attributes',tagClass:asn1.Class.CONTEXT_SPECIFIC,type:0,constructed:true,optional:true,capture:'certificationRequestInfoAttributes',value:[{name:'CertificationRequestInfo.attributes',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:true,value:[{name:'CertificationRequestInfo.attributes.type',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.OID,constructed:false},{name:'CertificationRequestInfo.attributes.value',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SET,constructed:true}]}]}]};var certificationRequestValidator={name:'CertificationRequest',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:true,captureAsn1:'csr',value:[certificationRequestInfoValidator,{name:'CertificationRequest.signatureAlgorithm',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:true,value:[{name:'CertificationRequest.signatureAlgorithm.algorithm',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.OID,constructed:false,capture:'csrSignatureOid'},{name:'CertificationRequest.signatureAlgorithm.parameters',tagClass:asn1.Class.UNIVERSAL,optional:true,captureAsn1:'csrSignatureParams'}]},{name:'CertificationRequest.signature',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.BITSTRING,constructed:false,captureBitStringValue:'csrSignature'}]};pki.RDNAttributesAsArray=function(rdn,md){var rval=[];var set,attr,obj;for(var si=0;si<rdn.value.length;++si){set=rdn.value[si];for(var i=0;i<set.value.length;++i){obj={};attr=set.value[i];obj.type=asn1.derToOid(attr.value[0].value);obj.value=attr.value[1].value;obj.valueTagClass=attr.value[1].type;if(obj.type in oids){obj.name=oids[obj.type];if(obj.name in _shortNames){obj.shortName=_shortNames[obj.name];}}if(md){md.update(obj.type);md.update(obj.value);}rval.push(obj);}}return rval;};pki.CRIAttributesAsArray=function(attributes){var rval=[];for(var si=0;si<attributes.length;++si){var seq=attributes[si];var type=asn1.derToOid(seq.value[0].value);var values=seq.value[1].value;for(var vi=0;vi<values.length;++vi){var obj={};obj.type=type;obj.value=values[vi].value;obj.valueTagClass=values[vi].type;if(obj.type in oids){obj.name=oids[obj.type];if(obj.name in _shortNames){obj.shortName=_shortNames[obj.name];}}if(obj.type===oids.extensionRequest){obj.extensions=[];for(var ei=0;ei<obj.value.length;++ei){obj.extensions.push(pki.certificateExtensionFromAsn1(obj.value[ei]));}}rval.push(obj);}}return rval;};function _getAttribute(obj,options){if(typeof options==='string'){options={shortName:options};}var rval=null;var attr;for(var i=0;rval===null&&i<obj.attributes.length;++i){attr=obj.attributes[i];if(options.type&&options.type===attr.type){rval=attr;}else if(options.name&&options.name===attr.name){rval=attr;}else if(options.shortName&&options.shortName===attr.shortName){rval=attr;}}return rval;}var _readSignatureParameters=function(oid,obj,fillDefaults){var params={};if(oid!==oids['RSASSA-PSS']){return params;}if(fillDefaults){params={hash:{algorithmOid:oids['sha1']},mgf:{algorithmOid:oids['mgf1'],hash:{algorithmOid:oids['sha1']}},saltLength:20};}var capture={};var errors=[];if(!asn1.validate(obj,rsassaPssParameterValidator,capture,errors)){var error=new Error('Cannot read RSASSA-PSS parameter block.');error.errors=errors;throw error;}if(capture.hashOid!==undefined){params.hash=params.hash||{};params.hash.algorithmOid=asn1.derToOid(capture.hashOid);}if(capture.maskGenOid!==undefined){params.mgf=params.mgf||{};params.mgf.algorithmOid=asn1.derToOid(capture.maskGenOid);params.mgf.hash=params.mgf.hash||{};params.mgf.hash.algorithmOid=asn1.derToOid(capture.maskGenHashOid);}if(capture.saltLength!==undefined){params.saltLength=capture.saltLength.charCodeAt(0);}return params;};pki.certificateFromPem=function(pem,computeHash,strict){var msg=forge.pem.decode(pem)[0];if(msg.type!=='CERTIFICATE'&&msg.type!=='X509 CERTIFICATE'&&msg.type!=='TRUSTED CERTIFICATE'){var error=new Error('Could not convert certificate from PEM; PEM header type '+'is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');error.headerType=msg.type;throw error;}if(msg.procType&&msg.procType.type==='ENCRYPTED'){throw new Error('Could not convert certificate from PEM; PEM is encrypted.');}var obj=asn1.fromDer(msg.body,strict);return pki.certificateFromAsn1(obj,computeHash);};pki.certificateToPem=function(cert,maxline){var msg={type:'CERTIFICATE',body:asn1.toDer(pki.certificateToAsn1(cert)).getBytes()};return forge.pem.encode(msg,{maxline:maxline});};pki.publicKeyFromPem=function(pem){var msg=forge.pem.decode(pem)[0];if(msg.type!=='PUBLIC KEY'&&msg.type!=='RSA PUBLIC KEY'){var error=new Error('Could not convert public key from PEM; PEM header '+'type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');error.headerType=msg.type;throw error;}if(msg.procType&&msg.procType.type==='ENCRYPTED'){throw new Error('Could not convert public key from PEM; PEM is encrypted.');}var obj=asn1.fromDer(msg.body);return pki.publicKeyFromAsn1(obj);};pki.publicKeyToPem=function(key,maxline){var msg={type:'PUBLIC KEY',body:asn1.toDer(pki.publicKeyToAsn1(key)).getBytes()};return forge.pem.encode(msg,{maxline:maxline});};pki.publicKeyToRSAPublicKeyPem=function(key,maxline){var msg={type:'RSA PUBLIC KEY',body:asn1.toDer(pki.publicKeyToRSAPublicKey(key)).getBytes()};return forge.pem.encode(msg,{maxline:maxline});};pki.getPublicKeyFingerprint=function(key,options){options=options||{};var md=options.md||forge.md.sha1.create();var type=options.type||'RSAPublicKey';var bytes;switch(type){case'RSAPublicKey':bytes=asn1.toDer(pki.publicKeyToRSAPublicKey(key)).getBytes();break;case'SubjectPublicKeyInfo':bytes=asn1.toDer(pki.publicKeyToAsn1(key)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+options.type+'".');}md.start();md.update(bytes);var digest=md.digest();if(options.encoding==='hex'){var hex=digest.toHex();if(options.delimiter){return hex.match(/.{2}/g).join(options.delimiter);}return hex;}else if(options.encoding==='binary'){return digest.getBytes();}else if(options.encoding){throw new Error('Unknown encoding "'+options.encoding+'".');}return digest;};pki.certificationRequestFromPem=function(pem,computeHash,strict){var msg=forge.pem.decode(pem)[0];if(msg.type!=='CERTIFICATE REQUEST'){var error=new Error('Could not convert certification request from PEM; '+'PEM header type is not "CERTIFICATE REQUEST".');error.headerType=msg.type;throw error;}if(msg.procType&&msg.procType.type==='ENCRYPTED'){throw new Error('Could not convert certification request from PEM; '+'PEM is encrypted.');}var obj=asn1.fromDer(msg.body,strict);return pki.certificationRequestFromAsn1(obj,computeHash);};pki.certificationRequestToPem=function(csr,maxline){var msg={type:'CERTIFICATE REQUEST',body:asn1.toDer(pki.certificationRequestToAsn1(csr)).getBytes()};return forge.pem.encode(msg,{maxline:maxline});};pki.createCertificate=function(){var cert={};cert.version=0x02;cert.serialNumber='00';cert.signatureOid=null;cert.signature=null;cert.siginfo={};cert.siginfo.algorithmOid=null;cert.validity={};cert.validity.notBefore=new Date();cert.validity.notAfter=new Date();cert.issuer={};cert.issuer.getField=function(sn){return _getAttribute(cert.issuer,sn);};cert.issuer.addField=function(attr){_fillMissingFields([attr]);cert.issuer.attributes.push(attr);};cert.issuer.attributes=[];cert.issuer.hash=null;cert.subject={};cert.subject.getField=function(sn){return _getAttribute(cert.subject,sn);};cert.subject.addField=function(attr){_fillMissingFields([attr]);cert.subject.attributes.push(attr);};cert.subject.attributes=[];cert.subject.hash=null;cert.extensions=[];cert.publicKey=null;cert.md=null;cert.setSubject=function(attrs,uniqueId){_fillMissingFields(attrs);cert.subject.attributes=attrs;delete cert.subject.uniqueId;if(uniqueId){cert.subject.uniqueId=uniqueId;}cert.subject.hash=null;};cert.setIssuer=function(attrs,uniqueId){_fillMissingFields(attrs);cert.issuer.attributes=attrs;delete cert.issuer.uniqueId;if(uniqueId){cert.issuer.uniqueId=uniqueId;}cert.issuer.hash=null;};cert.setExtensions=function(exts){for(var i=0;i<exts.length;++i){_fillMissingExtensionFields(exts[i],{cert:cert});}cert.extensions=exts;};cert.getExtension=function(options){if(typeof options==='string'){options={name:options};}var rval=null;var ext;for(var i=0;rval===null&&i<cert.extensions.length;++i){ext=cert.extensions[i];if(options.id&&ext.id===options.id){rval=ext;}else if(options.name&&ext.name===options.name){rval=ext;}}return rval;};cert.sign=function(key,md){cert.md=md||forge.md.sha1.create();var algorithmOid=oids[cert.md.algorithm+'WithRSAEncryption'];if(!algorithmOid){var error=new Error('Could not compute certificate digest. '+'Unknown message digest algorithm OID.');error.algorithm=cert.md.algorithm;throw error;}cert.signatureOid=cert.siginfo.algorithmOid=algorithmOid;cert.tbsCertificate=pki.getTBSCertificate(cert);var bytes=asn1.toDer(cert.tbsCertificate);cert.md.update(bytes.getBytes());cert.signature=key.sign(cert.md);};cert.verify=function(child){var rval=false;if(!cert.issued(child)){var issuer=child.issuer;var subject=cert.subject;var error=new Error('The parent certificate did not issue the given child '+'certificate; the child certificate\'s issuer does not match the '+'parent\'s subject.');error.expectedIssuer=issuer.attributes;error.actualIssuer=subject.attributes;throw error;}var md=child.md;if(md===null){if(child.signatureOid in oids){var oid=oids[child.signatureOid];switch(oid){case'sha1WithRSAEncryption':md=forge.md.sha1.create();break;case'md5WithRSAEncryption':md=forge.md.md5.create();break;case'sha256WithRSAEncryption':md=forge.md.sha256.create();break;case'sha384WithRSAEncryption':md=forge.md.sha384.create();break;case'sha512WithRSAEncryption':md=forge.md.sha512.create();break;case'RSASSA-PSS':md=forge.md.sha256.create();break;}}if(md===null){var error=new Error('Could not compute certificate digest. '+'Unknown signature OID.');error.signatureOid=child.signatureOid;throw error;}var tbsCertificate=child.tbsCertificate||pki.getTBSCertificate(child);var bytes=asn1.toDer(tbsCertificate);md.update(bytes.getBytes());}if(md!==null){var scheme;switch(child.signatureOid){case oids.sha1WithRSAEncryption:scheme=undefined;break;case oids['RSASSA-PSS']:var hash,mgf;hash=oids[child.signatureParameters.mgf.hash.algorithmOid];if(hash===undefined||forge.md[hash]===undefined){var error=new Error('Unsupported MGF hash function.');error.oid=child.signatureParameters.mgf.hash.algorithmOid;error.name=hash;throw error;}mgf=oids[child.signatureParameters.mgf.algorithmOid];if(mgf===undefined||forge.mgf[mgf]===undefined){var error=new Error('Unsupported MGF function.');error.oid=child.signatureParameters.mgf.algorithmOid;error.name=mgf;throw error;}mgf=forge.mgf[mgf].create(forge.md[hash].create());hash=oids[child.signatureParameters.hash.algorithmOid];if(hash===undefined||forge.md[hash]===undefined){throw{message:'Unsupported RSASSA-PSS hash function.',oid:child.signatureParameters.hash.algorithmOid,name:hash};}scheme=forge.pss.create(forge.md[hash].create(),mgf,child.signatureParameters.saltLength);break;}rval=cert.publicKey.verify(md.digest().getBytes(),child.signature,scheme);}return rval;};cert.isIssuer=function(parent){var rval=false;var i=cert.issuer;var s=parent.subject;if(i.hash&&s.hash){rval=i.hash===s.hash;}else if(i.attributes.length===s.attributes.length){rval=true;var iattr,sattr;for(var n=0;rval&&n<i.attributes.length;++n){iattr=i.attributes[n];sattr=s.attributes[n];if(iattr.type!==sattr.type||iattr.value!==sattr.value){rval=false;}}}return rval;};cert.issued=function(child){return child.isIssuer(cert);};cert.generateSubjectKeyIdentifier=function(){return pki.getPublicKeyFingerprint(cert.publicKey,{type:'RSAPublicKey'});};cert.verifySubjectKeyIdentifier=function(){var oid=oids['subjectKeyIdentifier'];for(var i=0;i<cert.extensions.length;++i){var ext=cert.extensions[i];if(ext.id===oid){var ski=cert.generateSubjectKeyIdentifier().getBytes();return forge.util.hexToBytes(ext.subjectKeyIdentifier)===ski;}}return false;};return cert;};pki.certificateFromAsn1=function(obj,computeHash){var capture={};var errors=[];if(!asn1.validate(obj,x509CertificateValidator,capture,errors)){var error=new Error('Cannot read X.509 certificate. '+'ASN.1 object is not an X509v3 Certificate.');error.errors=errors;throw error;}var oid=asn1.derToOid(capture.publicKeyOid);if(oid!==pki.oids.rsaEncryption){throw new Error('Cannot read public key. OID is not RSA.');}var cert=pki.createCertificate();cert.version=capture.certVersion?capture.certVersion.charCodeAt(0):0;var serial=forge.util.createBuffer(capture.certSerialNumber);cert.serialNumber=serial.toHex();cert.signatureOid=forge.asn1.derToOid(capture.certSignatureOid);cert.signatureParameters=_readSignatureParameters(cert.signatureOid,capture.certSignatureParams,true);cert.siginfo.algorithmOid=forge.asn1.derToOid(capture.certinfoSignatureOid);cert.siginfo.parameters=_readSignatureParameters(cert.siginfo.algorithmOid,capture.certinfoSignatureParams,false);cert.signature=capture.certSignature;var validity=[];if(capture.certValidity1UTCTime!==undefined){validity.push(asn1.utcTimeToDate(capture.certValidity1UTCTime));}if(capture.certValidity2GeneralizedTime!==undefined){validity.push(asn1.generalizedTimeToDate(capture.certValidity2GeneralizedTime));}if(capture.certValidity3UTCTime!==undefined){validity.push(asn1.utcTimeToDate(capture.certValidity3UTCTime));}if(capture.certValidity4GeneralizedTime!==undefined){validity.push(asn1.generalizedTimeToDate(capture.certValidity4GeneralizedTime));}if(validity.length>2){throw new Error('Cannot read notBefore/notAfter validity times; more '+'than two times were provided in the certificate.');}if(validity.length<2){throw new Error('Cannot read notBefore/notAfter validity times; they '+'were not provided as either UTCTime or GeneralizedTime.');}cert.validity.notBefore=validity[0];cert.validity.notAfter=validity[1];cert.tbsCertificate=capture.tbsCertificate;if(computeHash){cert.md=null;if(cert.signatureOid in oids){var oid=oids[cert.signatureOid];switch(oid){case'sha1WithRSAEncryption':cert.md=forge.md.sha1.create();break;case'md5WithRSAEncryption':cert.md=forge.md.md5.create();break;case'sha256WithRSAEncryption':cert.md=forge.md.sha256.create();break;case'sha384WithRSAEncryption':cert.md=forge.md.sha384.create();break;case'sha512WithRSAEncryption':cert.md=forge.md.sha512.create();break;case'RSASSA-PSS':cert.md=forge.md.sha256.create();break;}}if(cert.md===null){var error=new Error('Could not compute certificate digest. '+'Unknown signature OID.');error.signatureOid=cert.signatureOid;throw error;}var bytes=asn1.toDer(cert.tbsCertificate);cert.md.update(bytes.getBytes());}var imd=forge.md.sha1.create();cert.issuer.getField=function(sn){return _getAttribute(cert.issuer,sn);};cert.issuer.addField=function(attr){_fillMissingFields([attr]);cert.issuer.attributes.push(attr);};cert.issuer.attributes=pki.RDNAttributesAsArray(capture.certIssuer,imd);if(capture.certIssuerUniqueId){cert.issuer.uniqueId=capture.certIssuerUniqueId;}cert.issuer.hash=imd.digest().toHex();var smd=forge.md.sha1.create();cert.subject.getField=function(sn){return _getAttribute(cert.subject,sn);};cert.subject.addField=function(attr){_fillMissingFields([attr]);cert.subject.attributes.push(attr);};cert.subject.attributes=pki.RDNAttributesAsArray(capture.certSubject,smd);if(capture.certSubjectUniqueId){cert.subject.uniqueId=capture.certSubjectUniqueId;}cert.subject.hash=smd.digest().toHex();if(capture.certExtensions){cert.extensions=pki.certificateExtensionsFromAsn1(capture.certExtensions);}else{cert.extensions=[];}cert.publicKey=pki.publicKeyFromAsn1(capture.subjectPublicKeyInfo);return cert;};pki.certificateExtensionsFromAsn1=function(exts){var rval=[];for(var i=0;i<exts.value.length;++i){var extseq=exts.value[i];for(var ei=0;ei<extseq.value.length;++ei){rval.push(pki.certificateExtensionFromAsn1(extseq.value[ei]));}}return rval;};pki.certificateExtensionFromAsn1=function(ext){var e={};e.id=asn1.derToOid(ext.value[0].value);e.critical=false;if(ext.value[1].type===asn1.Type.BOOLEAN){e.critical=ext.value[1].value.charCodeAt(0)!==0x00;e.value=ext.value[2].value;}else{e.value=ext.value[1].value;}if(e.id in oids){e.name=oids[e.id];if(e.name==='keyUsage'){var ev=asn1.fromDer(e.value);var b2=0x00;var b3=0x00;if(ev.value.length>1){b2=ev.value.charCodeAt(1);b3=ev.value.length>2?ev.value.charCodeAt(2):0;}e.digitalSignature=(b2&0x80)===0x80;e.nonRepudiation=(b2&0x40)===0x40;e.keyEncipherment=(b2&0x20)===0x20;e.dataEncipherment=(b2&0x10)===0x10;e.keyAgreement=(b2&0x08)===0x08;e.keyCertSign=(b2&0x04)===0x04;e.cRLSign=(b2&0x02)===0x02;e.encipherOnly=(b2&0x01)===0x01;e.decipherOnly=(b3&0x80)===0x80;}else if(e.name==='basicConstraints'){var ev=asn1.fromDer(e.value);if(ev.value.length>0&&ev.value[0].type===asn1.Type.BOOLEAN){e.cA=ev.value[0].value.charCodeAt(0)!==0x00;}else{e.cA=false;}var value=null;if(ev.value.length>0&&ev.value[0].type===asn1.Type.INTEGER){value=ev.value[0].value;}else if(ev.value.length>1){value=ev.value[1].value;}if(value!==null){e.pathLenConstraint=asn1.derToInteger(value);}}else if(e.name==='extKeyUsage'){var ev=asn1.fromDer(e.value);for(var vi=0;vi<ev.value.length;++vi){var oid=asn1.derToOid(ev.value[vi].value);if(oid in oids){e[oids[oid]]=true;}else{e[oid]=true;}}}else if(e.name==='nsCertType'){var ev=asn1.fromDer(e.value);var b2=0x00;if(ev.value.length>1){b2=ev.value.charCodeAt(1);}e.client=(b2&0x80)===0x80;e.server=(b2&0x40)===0x40;e.email=(b2&0x20)===0x20;e.objsign=(b2&0x10)===0x10;e.reserved=(b2&0x08)===0x08;e.sslCA=(b2&0x04)===0x04;e.emailCA=(b2&0x02)===0x02;e.objCA=(b2&0x01)===0x01;}else if(e.name==='subjectAltName'||e.name==='issuerAltName'){e.altNames=[];var gn;var ev=asn1.fromDer(e.value);for(var n=0;n<ev.value.length;++n){gn=ev.value[n];var altName={type:gn.type,value:gn.value};e.altNames.push(altName);switch(gn.type){case 1:case 2:case 6:break;case 7:altName.ip=forge.util.bytesToIP(gn.value);break;case 8:altName.oid=asn1.derToOid(gn.value);break;default:}}}else if(e.name==='subjectKeyIdentifier'){var ev=asn1.fromDer(e.value);e.subjectKeyIdentifier=forge.util.bytesToHex(ev.value);}}return e;};pki.certificationRequestFromAsn1=function(obj,computeHash){var capture={};var errors=[];if(!asn1.validate(obj,certificationRequestValidator,capture,errors)){var error=new Error('Cannot read PKCS#10 certificate request. '+'ASN.1 object is not a PKCS#10 CertificationRequest.');error.errors=errors;throw error;}var oid=asn1.derToOid(capture.publicKeyOid);if(oid!==pki.oids.rsaEncryption){throw new Error('Cannot read public key. OID is not RSA.');}var csr=pki.createCertificationRequest();csr.version=capture.csrVersion?capture.csrVersion.charCodeAt(0):0;csr.signatureOid=forge.asn1.derToOid(capture.csrSignatureOid);csr.signatureParameters=_readSignatureParameters(csr.signatureOid,capture.csrSignatureParams,true);csr.siginfo.algorithmOid=forge.asn1.derToOid(capture.csrSignatureOid);csr.siginfo.parameters=_readSignatureParameters(csr.siginfo.algorithmOid,capture.csrSignatureParams,false);csr.signature=capture.csrSignature;csr.certificationRequestInfo=capture.certificationRequestInfo;if(computeHash){csr.md=null;if(csr.signatureOid in oids){var oid=oids[csr.signatureOid];switch(oid){case'sha1WithRSAEncryption':csr.md=forge.md.sha1.create();break;case'md5WithRSAEncryption':csr.md=forge.md.md5.create();break;case'sha256WithRSAEncryption':csr.md=forge.md.sha256.create();break;case'sha384WithRSAEncryption':csr.md=forge.md.sha384.create();break;case'sha512WithRSAEncryption':csr.md=forge.md.sha512.create();break;case'RSASSA-PSS':csr.md=forge.md.sha256.create();break;}}if(csr.md===null){var error=new Error('Could not compute certification request digest. '+'Unknown signature OID.');error.signatureOid=csr.signatureOid;throw error;}var bytes=asn1.toDer(csr.certificationRequestInfo);csr.md.update(bytes.getBytes());}var smd=forge.md.sha1.create();csr.subject.getField=function(sn){return _getAttribute(csr.subject,sn);};csr.subject.addField=function(attr){_fillMissingFields([attr]);csr.subject.attributes.push(attr);};csr.subject.attributes=pki.RDNAttributesAsArray(capture.certificationRequestInfoSubject,smd);csr.subject.hash=smd.digest().toHex();csr.publicKey=pki.publicKeyFromAsn1(capture.subjectPublicKeyInfo);csr.getAttribute=function(sn){return _getAttribute(csr,sn);};csr.addAttribute=function(attr){_fillMissingFields([attr]);csr.attributes.push(attr);};csr.attributes=pki.CRIAttributesAsArray(capture.certificationRequestInfoAttributes||[]);return csr;};pki.createCertificationRequest=function(){var csr={};csr.version=0x00;csr.signatureOid=null;csr.signature=null;csr.siginfo={};csr.siginfo.algorithmOid=null;csr.subject={};csr.subject.getField=function(sn){return _getAttribute(csr.subject,sn);};csr.subject.addField=function(attr){_fillMissingFields([attr]);csr.subject.attributes.push(attr);};csr.subject.attributes=[];csr.subject.hash=null;csr.publicKey=null;csr.attributes=[];csr.getAttribute=function(sn){return _getAttribute(csr,sn);};csr.addAttribute=function(attr){_fillMissingFields([attr]);csr.attributes.push(attr);};csr.md=null;csr.setSubject=function(attrs){_fillMissingFields(attrs);csr.subject.attributes=attrs;csr.subject.hash=null;};csr.setAttributes=function(attrs){_fillMissingFields(attrs);csr.attributes=attrs;};csr.sign=function(key,md){csr.md=md||forge.md.sha1.create();var algorithmOid=oids[csr.md.algorithm+'WithRSAEncryption'];if(!algorithmOid){var error=new Error('Could not compute certification request digest. '+'Unknown message digest algorithm OID.');error.algorithm=csr.md.algorithm;throw error;}csr.signatureOid=csr.siginfo.algorithmOid=algorithmOid;csr.certificationRequestInfo=pki.getCertificationRequestInfo(csr);var bytes=asn1.toDer(csr.certificationRequestInfo);csr.md.update(bytes.getBytes());csr.signature=key.sign(csr.md);};csr.verify=function(){var rval=false;var md=csr.md;if(md===null){if(csr.signatureOid in oids){var oid=oids[csr.signatureOid];switch(oid){case'sha1WithRSAEncryption':md=forge.md.sha1.create();break;case'md5WithRSAEncryption':md=forge.md.md5.create();break;case'sha256WithRSAEncryption':md=forge.md.sha256.create();break;case'sha384WithRSAEncryption':md=forge.md.sha384.create();break;case'sha512WithRSAEncryption':md=forge.md.sha512.create();break;case'RSASSA-PSS':md=forge.md.sha256.create();break;}}if(md===null){var error=new Error('Could not compute certification request digest. '+'Unknown signature OID.');error.signatureOid=csr.signatureOid;throw error;}var cri=csr.certificationRequestInfo||pki.getCertificationRequestInfo(csr);var bytes=asn1.toDer(cri);md.update(bytes.getBytes());}if(md!==null){var scheme;switch(csr.signatureOid){case oids.sha1WithRSAEncryption:break;case oids['RSASSA-PSS']:var hash,mgf;hash=oids[csr.signatureParameters.mgf.hash.algorithmOid];if(hash===undefined||forge.md[hash]===undefined){var error=new Error('Unsupported MGF hash function.');error.oid=csr.signatureParameters.mgf.hash.algorithmOid;error.name=hash;throw error;}mgf=oids[csr.signatureParameters.mgf.algorithmOid];if(mgf===undefined||forge.mgf[mgf]===undefined){var error=new Error('Unsupported MGF function.');error.oid=csr.signatureParameters.mgf.algorithmOid;error.name=mgf;throw error;}mgf=forge.mgf[mgf].create(forge.md[hash].create());hash=oids[csr.signatureParameters.hash.algorithmOid];if(hash===undefined||forge.md[hash]===undefined){var error=new Error('Unsupported RSASSA-PSS hash function.');error.oid=csr.signatureParameters.hash.algorithmOid;error.name=hash;throw error;}scheme=forge.pss.create(forge.md[hash].create(),mgf,csr.signatureParameters.saltLength);break;}rval=csr.publicKey.verify(md.digest().getBytes(),csr.signature,scheme);}return rval;};return csr;};function _dnToAsn1(obj){var rval=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,true,[]);var attr,set;var attrs=obj.attributes;for(var i=0;i<attrs.length;++i){attr=attrs[i];var value=attr.value;var valueTagClass=asn1.Type.PRINTABLESTRING;if('valueTagClass'in attr){valueTagClass=attr.valueTagClass;if(valueTagClass===asn1.Type.UTF8){value=forge.util.encodeUtf8(value);}}set=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SET,true,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,true,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,false,asn1.oidToDer(attr.type).getBytes()),asn1.create(asn1.Class.UNIVERSAL,valueTagClass,false,value)])]);rval.value.push(set);}return rval;}function _getAttributesAsJson(attrs){var rval={};for(var i=0;i<attrs.length;++i){var attr=attrs[i];if(attr.shortName&&(attr.valueTagClass===asn1.Type.UTF8||attr.valueTagClass===asn1.Type.PRINTABLESTRING||attr.valueTagClass===asn1.Type.IA5STRING)){var value=attr.value;if(attr.valueTagClass===asn1.Type.UTF8){value=forge.util.encodeUtf8(attr.value);}if(!(attr.shortName in rval)){rval[attr.shortName]=value;}else if(forge.util.isArray(rval[attr.shortName])){rval[attr.shortName].push(value);}else{rval[attr.shortName]=[rval[attr.shortName],value];}}}return rval;}function _fillMissingFields(attrs){var attr;for(var i=0;i<attrs.length;++i){attr=attrs[i];if(typeof attr.name==='undefined'){if(attr.type&&attr.type in pki.oids){attr.name=pki.oids[attr.type];}else if(attr.shortName&&attr.shortName in _shortNames){attr.name=pki.oids[_shortNames[attr.shortName]];}}if(typeof attr.type==='undefined'){if(attr.name&&attr.name in pki.oids){attr.type=pki.oids[attr.name];}else{var error=new Error('Attribute type not specified.');error.attribute=attr;throw error;}}if(typeof attr.shortName==='undefined'){if(attr.name&&attr.name in _shortNames){attr.shortName=_shortNames[attr.name];}}if(attr.type===oids.extensionRequest){attr.valueConstructed=true;attr.valueTagClass=asn1.Type.SEQUENCE;if(!attr.value&&attr.extensions){attr.value=[];for(var ei=0;ei<attr.extensions.length;++ei){attr.value.push(pki.certificateExtensionToAsn1(_fillMissingExtensionFields(attr.extensions[ei])));}}}if(typeof attr.value==='undefined'){var error=new Error('Attribute value not specified.');error.attribute=attr;throw error;}}}function _fillMissingExtensionFields(e,options){options=options||{};if(typeof e.name==='undefined'){if(e.id&&e.id in pki.oids){e.name=pki.oids[e.id];}}if(typeof e.id==='undefined'){if(e.name&&e.name in pki.oids){e.id=pki.oids[e.name];}else{var error=new Error('Extension ID not specified.');error.extension=e;throw error;}}if(typeof e.value!=='undefined'){return e;}if(e.name==='keyUsage'){var unused=0;var b2=0x00;var b3=0x00;if(e.digitalSignature){b2|=0x80;unused=7;}if(e.nonRepudiation){b2|=0x40;unused=6;}if(e.keyEncipherment){b2|=0x20;unused=5;}if(e.dataEncipherment){b2|=0x10;unused=4;}if(e.keyAgreement){b2|=0x08;unused=3;}if(e.keyCertSign){b2|=0x04;unused=2;}if(e.cRLSign){b2|=0x02;unused=1;}if(e.encipherOnly){b2|=0x01;unused=0;}if(e.decipherOnly){b3|=0x80;unused=7;}var value=String.fromCharCode(unused);if(b3!==0){value+=String.fromCharCode(b2)+String.fromCharCode(b3);}else if(b2!==0){value+=String.fromCharCode(b2);}e.value=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.BITSTRING,false,value);}else if(e.name==='basicConstraints'){e.value=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,true,[]);if(e.cA){e.value.value.push(asn1.create(asn1.Class.UNIVERSAL,asn1.Type.BOOLEAN,false,String.fromCharCode(0xFF)));}if('pathLenConstraint'in e){e.value.value.push(asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,false,asn1.integerToDer(e.pathLenConstraint).getBytes()));}}else if(e.name==='extKeyUsage'){e.value=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,true,[]);var seq=e.value.value;for(var key in e){if(e[key]!==true){continue;}if(key in oids){seq.push(asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,false,asn1.oidToDer(oids[key]).getBytes()));}else if(key.indexOf('.')!==-1){seq.push(asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,false,asn1.oidToDer(key).getBytes()));}}}else if(e.name==='nsCertType'){var unused=0;var b2=0x00;if(e.client){b2|=0x80;unused=7;}if(e.server){b2|=0x40;unused=6;}if(e.email){b2|=0x20;unused=5;}if(e.objsign){b2|=0x10;unused=4;}if(e.reserved){b2|=0x08;unused=3;}if(e.sslCA){b2|=0x04;unused=2;}if(e.emailCA){b2|=0x02;unused=1;}if(e.objCA){b2|=0x01;unused=0;}var value=String.fromCharCode(unused);if(b2!==0){value+=String.fromCharCode(b2);}e.value=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.BITSTRING,false,value);}else if(e.name==='subjectAltName'||e.name==='issuerAltName'){e.value=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,true,[]);var altName;for(var n=0;n<e.altNames.length;++n){altName=e.altNames[n];var value=altName.value;if(altName.type===7&&altName.ip){value=forge.util.bytesFromIP(altName.ip);if(value===null){var error=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');error.extension=e;throw error;}}else if(altName.type===8){if(altName.oid){value=asn1.oidToDer(asn1.oidToDer(altName.oid));}else{value=asn1.oidToDer(value);}}e.value.value.push(asn1.create(asn1.Class.CONTEXT_SPECIFIC,altName.type,false,value));}}else if(e.name==='subjectKeyIdentifier'&&options.cert){var ski=options.cert.generateSubjectKeyIdentifier();e.subjectKeyIdentifier=ski.toHex();e.value=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OCTETSTRING,false,ski.getBytes());}else if(e.name==='authorityKeyIdentifier'&&options.cert){e.value=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,true,[]);var seq=e.value.value;if(e.keyIdentifier){var keyIdentifier=e.keyIdentifier===true?options.cert.generateSubjectKeyIdentifier().getBytes():e.keyIdentifier;seq.push(asn1.create(asn1.Class.CONTEXT_SPECIFIC,0,false,keyIdentifier));}if(e.authorityCertIssuer){var authorityCertIssuer=[asn1.create(asn1.Class.CONTEXT_SPECIFIC,4,true,[_dnToAsn1(e.authorityCertIssuer===true?options.cert.issuer:e.authorityCertIssuer)])];seq.push(asn1.create(asn1.Class.CONTEXT_SPECIFIC,1,true,authorityCertIssuer));}if(e.serialNumber){var serialNumber=forge.util.hexToBytes(e.serialNumber===true?options.cert.serialNumber:e.serialNumber);seq.push(asn1.create(asn1.Class.CONTEXT_SPECIFIC,2,false,serialNumber));}}else if(e.name==='cRLDistributionPoints'){e.value=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,true,[]);var seq=e.value.value;var subSeq=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,true,[]);var fullNameGeneralNames=asn1.create(asn1.Class.CONTEXT_SPECIFIC,0,true,[]);var altName;for(var n=0;n<e.altNames.length;++n){altName=e.altNames[n];var value=altName.value;if(altName.type===7&&altName.ip){value=forge.util.bytesFromIP(altName.ip);if(value===null){var error=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');error.extension=e;throw error;}}else if(altName.type===8){if(altName.oid){value=asn1.oidToDer(asn1.oidToDer(altName.oid));}else{value=asn1.oidToDer(value);}}fullNameGeneralNames.value.push(asn1.create(asn1.Class.CONTEXT_SPECIFIC,altName.type,false,value));}subSeq.value.push(asn1.create(asn1.Class.CONTEXT_SPECIFIC,0,true,[fullNameGeneralNames]));seq.push(subSeq);}if(typeof e.value==='undefined'){var error=new Error('Extension value not specified.');error.extension=e;throw error;}return e;}function _signatureParametersToAsn1(oid,params){switch(oid){case oids['RSASSA-PSS']:var parts=[];if(params.hash.algorithmOid!==undefined){parts.push(asn1.create(asn1.Class.CONTEXT_SPECIFIC,0,true,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,true,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,false,asn1.oidToDer(params.hash.algorithmOid).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.NULL,false,'')])]));}if(params.mgf.algorithmOid!==undefined){parts.push(asn1.create(asn1.Class.CONTEXT_SPECIFIC,1,true,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,true,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,false,asn1.oidToDer(params.mgf.algorithmOid).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,true,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,false,asn1.oidToDer(params.mgf.hash.algorithmOid).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.NULL,false,'')])])]));}if(params.saltLength!==undefined){parts.push(asn1.create(asn1.Class.CONTEXT_SPECIFIC,2,true,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,false,asn1.integerToDer(params.saltLength).getBytes())]));}return asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,true,parts);default:return asn1.create(asn1.Class.UNIVERSAL,asn1.Type.NULL,false,'');}}function _CRIAttributesToAsn1(csr){var rval=asn1.create(asn1.Class.CONTEXT_SPECIFIC,0,true,[]);if(csr.attributes.length===0){return rval;}var attrs=csr.attributes;for(var i=0;i<attrs.length;++i){var attr=attrs[i];var value=attr.value;var valueTagClass=asn1.Type.UTF8;if('valueTagClass'in attr){valueTagClass=attr.valueTagClass;}if(valueTagClass===asn1.Type.UTF8){value=forge.util.encodeUtf8(value);}var valueConstructed=false;if('valueConstructed'in attr){valueConstructed=attr.valueConstructed;}var seq=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,true,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,false,asn1.oidToDer(attr.type).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SET,true,[asn1.create(asn1.Class.UNIVERSAL,valueTagClass,valueConstructed,value)])]);rval.value.push(seq);}return rval;}pki.getTBSCertificate=function(cert){var tbs=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,true,[asn1.create(asn1.Class.CONTEXT_SPECIFIC,0,true,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,false,asn1.integerToDer(cert.version).getBytes())]),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,false,forge.util.hexToBytes(cert.serialNumber)),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,true,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,false,asn1.oidToDer(cert.siginfo.algorithmOid).getBytes()),_signatureParametersToAsn1(cert.siginfo.algorithmOid,cert.siginfo.parameters)]),_dnToAsn1(cert.issuer),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,true,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.UTCTIME,false,asn1.dateToUtcTime(cert.validity.notBefore)),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.UTCTIME,false,asn1.dateToUtcTime(cert.validity.notAfter))]),_dnToAsn1(cert.subject),pki.publicKeyToAsn1(cert.publicKey)]);if(cert.issuer.uniqueId){tbs.value.push(asn1.create(asn1.Class.CONTEXT_SPECIFIC,1,true,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.BITSTRING,false,String.fromCharCode(0x00)+cert.issuer.uniqueId)]));}if(cert.subject.uniqueId){tbs.value.push(asn1.create(asn1.Class.CONTEXT_SPECIFIC,2,true,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.BITSTRING,false,String.fromCharCode(0x00)+cert.subject.uniqueId)]));}if(cert.extensions.length>0){tbs.value.push(pki.certificateExtensionsToAsn1(cert.extensions));}return tbs;};pki.getCertificationRequestInfo=function(csr){var cri=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,true,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,false,asn1.integerToDer(csr.version).getBytes()),_dnToAsn1(csr.subject),pki.publicKeyToAsn1(csr.publicKey),_CRIAttributesToAsn1(csr)]);return cri;};pki.distinguishedNameToAsn1=function(dn){return _dnToAsn1(dn);};pki.certificateToAsn1=function(cert){var tbsCertificate=cert.tbsCertificate||pki.getTBSCertificate(cert);return asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,true,[tbsCertificate,asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,true,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,false,asn1.oidToDer(cert.signatureOid).getBytes()),_signatureParametersToAsn1(cert.signatureOid,cert.signatureParameters)]),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.BITSTRING,false,String.fromCharCode(0x00)+cert.signature)]);};pki.certificateExtensionsToAsn1=function(exts){var rval=asn1.create(asn1.Class.CONTEXT_SPECIFIC,3,true,[]);var seq=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,true,[]);rval.value.push(seq);for(var i=0;i<exts.length;++i){seq.value.push(pki.certificateExtensionToAsn1(exts[i]));}return rval;};pki.certificateExtensionToAsn1=function(ext){var extseq=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,true,[]);extseq.value.push(asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,false,asn1.oidToDer(ext.id).getBytes()));if(ext.critical){extseq.value.push(asn1.create(asn1.Class.UNIVERSAL,asn1.Type.BOOLEAN,false,String.fromCharCode(0xFF)));}var value=ext.value;if(typeof ext.value!=='string'){value=asn1.toDer(value).getBytes();}extseq.value.push(asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OCTETSTRING,false,value));return extseq;};pki.certificationRequestToAsn1=function(csr){var cri=csr.certificationRequestInfo||pki.getCertificationRequestInfo(csr);return asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,true,[cri,asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,true,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,false,asn1.oidToDer(csr.signatureOid).getBytes()),_signatureParametersToAsn1(csr.signatureOid,csr.signatureParameters)]),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.BITSTRING,false,String.fromCharCode(0x00)+csr.signature)]);};pki.createCaStore=function(certs){var caStore={certs:{}};caStore.getIssuer=function(cert){var rval=getBySubject(cert.issuer);return rval;};caStore.addCertificate=function(cert){if(typeof cert==='string'){cert=forge.pki.certificateFromPem(cert);}ensureSubjectHasHash(cert.subject);if(!caStore.hasCertificate(cert)){if(cert.subject.hash in caStore.certs){var tmp=caStore.certs[cert.subject.hash];if(!forge.util.isArray(tmp)){tmp=[tmp];}tmp.push(cert);caStore.certs[cert.subject.hash]=tmp;}else{caStore.certs[cert.subject.hash]=cert;}}};caStore.hasCertificate=function(cert){if(typeof cert==='string'){cert=forge.pki.certificateFromPem(cert);}var match=getBySubject(cert.subject);if(!match){return false;}if(!forge.util.isArray(match)){match=[match];}var der1=asn1.toDer(pki.certificateToAsn1(cert)).getBytes();for(var i=0;i<match.length;++i){var der2=asn1.toDer(pki.certificateToAsn1(match[i])).getBytes();if(der1===der2){return true;}}return false;};caStore.listAllCertificates=function(){var certList=[];for(var hash in caStore.certs){if(caStore.certs.hasOwnProperty(hash)){var value=caStore.certs[hash];if(!forge.util.isArray(value)){certList.push(value);}else{for(var i=0;i<value.length;++i){certList.push(value[i]);}}}}return certList;};caStore.removeCertificate=function(cert){var result;if(typeof cert==='string'){cert=forge.pki.certificateFromPem(cert);}ensureSubjectHasHash(cert.subject);if(!caStore.hasCertificate(cert)){return null;}var match=getBySubject(cert.subject);if(!forge.util.isArray(match)){result=caStore.certs[cert.subject.hash];delete caStore.certs[cert.subject.hash];return result;}var der1=asn1.toDer(pki.certificateToAsn1(cert)).getBytes();for(var i=0;i<match.length;++i){var der2=asn1.toDer(pki.certificateToAsn1(match[i])).getBytes();if(der1===der2){result=match[i];match.splice(i,1);}}if(match.length===0){delete caStore.certs[cert.subject.hash];}return result;};function getBySubject(subject){ensureSubjectHasHash(subject);return caStore.certs[subject.hash]||null;}function ensureSubjectHasHash(subject){if(!subject.hash){var md=forge.md.sha1.create();subject.attributes=pki.RDNAttributesAsArray(_dnToAsn1(subject),md);subject.hash=md.digest().toHex();}}if(certs){for(var i=0;i<certs.length;++i){var cert=certs[i];caStore.addCertificate(cert);}}return caStore;};pki.certificateError={bad_certificate:'forge.pki.BadCertificate',unsupported_certificate:'forge.pki.UnsupportedCertificate',certificate_revoked:'forge.pki.CertificateRevoked',certificate_expired:'forge.pki.CertificateExpired',certificate_unknown:'forge.pki.CertificateUnknown',unknown_ca:'forge.pki.UnknownCertificateAuthority'};pki.verifyCertificateChain=function(caStore,chain,verify){chain=chain.slice(0);var certs=chain.slice(0);var now=new Date();var first=true;var error=null;var depth=0;do{var cert=chain.shift();var parent=null;var selfSigned=false;if(now<cert.validity.notBefore||now>cert.validity.notAfter){error={message:'Certificate is not valid yet or has expired.',error:pki.certificateError.certificate_expired,notBefore:cert.validity.notBefore,notAfter:cert.validity.notAfter,now:now};}if(error===null){parent=chain[0]||caStore.getIssuer(cert);if(parent===null){if(cert.isIssuer(cert)){selfSigned=true;parent=cert;}}if(parent){var parents=parent;if(!forge.util.isArray(parents)){parents=[parents];}var verified=false;while(!verified&&parents.length>0){parent=parents.shift();try{verified=parent.verify(cert);}catch(ex){}}if(!verified){error={message:'Certificate signature is invalid.',error:pki.certificateError.bad_certificate};}}if(error===null&&(!parent||selfSigned)&&!caStore.hasCertificate(cert)){error={message:'Certificate is not trusted.',error:pki.certificateError.unknown_ca};}}if(error===null&&parent&&!cert.isIssuer(parent)){error={message:'Certificate issuer is invalid.',error:pki.certificateError.bad_certificate};}if(error===null){var se={keyUsage:true,basicConstraints:true};for(var i=0;error===null&&i<cert.extensions.length;++i){var ext=cert.extensions[i];if(ext.critical&&!(ext.name in se)){error={message:'Certificate has an unsupported critical extension.',error:pki.certificateError.unsupported_certificate};}}}if(error===null&&(!first||chain.length===0&&(!parent||selfSigned))){var bcExt=cert.getExtension('basicConstraints');var keyUsageExt=cert.getExtension('keyUsage');if(keyUsageExt!==null){if(!keyUsageExt.keyCertSign||bcExt===null){error={message:'Certificate keyUsage or basicConstraints conflict '+'or indicate that the certificate is not a CA. '+'If the certificate is the only one in the chain or '+'isn\'t the first then the certificate must be a '+'valid CA.',error:pki.certificateError.bad_certificate};}}if(error===null&&bcExt!==null&&!bcExt.cA){error={message:'Certificate basicConstraints indicates the certificate '+'is not a CA.',error:pki.certificateError.bad_certificate};}if(error===null&&keyUsageExt!==null&&'pathLenConstraint'in bcExt){var pathLen=depth-1;if(pathLen>bcExt.pathLenConstraint){error={message:'Certificate basicConstraints pathLenConstraint violated.',error:pki.certificateError.bad_certificate};}}}var vfd=error===null?true:error.error;var ret=verify?verify(vfd,depth,certs):vfd;if(ret===true){error=null;}else{if(vfd===true){error={message:'The application rejected the certificate.',error:pki.certificateError.bad_certificate};}if(ret||ret===0){if(typeof ret==='object'&&!forge.util.isArray(ret)){if(ret.message){error.message=ret.message;}if(ret.error){error.error=ret.error;}}else if(typeof ret==='string'){error.error=ret;}}throw error;}first=false;++depth;}while(chain.length>0);return true;};},4458:function(module,__unusedexports,__webpack_require__){var all=module.exports.all=[{errno:-2,code:'ENOENT',description:'no such file or directory'},{errno:-1,code:'UNKNOWN',description:'unknown error'},{errno:0,code:'OK',description:'success'},{errno:1,code:'EOF',description:'end of file'},{errno:2,code:'EADDRINFO',description:'getaddrinfo error'},{errno:3,code:'EACCES',description:'permission denied'},{errno:4,code:'EAGAIN',description:'resource temporarily unavailable'},{errno:5,code:'EADDRINUSE',description:'address already in use'},{errno:6,code:'EADDRNOTAVAIL',description:'address not available'},{errno:7,code:'EAFNOSUPPORT',description:'address family not supported'},{errno:8,code:'EALREADY',description:'connection already in progress'},{errno:9,code:'EBADF',description:'bad file descriptor'},{errno:10,code:'EBUSY',description:'resource busy or locked'},{errno:11,code:'ECONNABORTED',description:'software caused connection abort'},{errno:12,code:'ECONNREFUSED',description:'connection refused'},{errno:13,code:'ECONNRESET',description:'connection reset by peer'},{errno:14,code:'EDESTADDRREQ',description:'destination address required'},{errno:15,code:'EFAULT',description:'bad address in system call argument'},{errno:16,code:'EHOSTUNREACH',description:'host is unreachable'},{errno:17,code:'EINTR',description:'interrupted system call'},{errno:18,code:'EINVAL',description:'invalid argument'},{errno:19,code:'EISCONN',description:'socket is already connected'},{errno:20,code:'EMFILE',description:'too many open files'},{errno:21,code:'EMSGSIZE',description:'message too long'},{errno:22,code:'ENETDOWN',description:'network is down'},{errno:23,code:'ENETUNREACH',description:'network is unreachable'},{errno:24,code:'ENFILE',description:'file table overflow'},{errno:25,code:'ENOBUFS',description:'no buffer space available'},{errno:26,code:'ENOMEM',description:'not enough memory'},{errno:27,code:'ENOTDIR',description:'not a directory'},{errno:28,code:'EISDIR',description:'illegal operation on a directory'},{errno:29,code:'ENONET',description:'machine is not on the network'},{errno:31,code:'ENOTCONN',description:'socket is not connected'},{errno:32,code:'ENOTSOCK',description:'socket operation on non-socket'},{errno:33,code:'ENOTSUP',description:'operation not supported on socket'},{errno:34,code:'ENOENT',description:'no such file or directory'},{errno:35,code:'ENOSYS',description:'function not implemented'},{errno:36,code:'EPIPE',description:'broken pipe'},{errno:37,code:'EPROTO',description:'protocol error'},{errno:38,code:'EPROTONOSUPPORT',description:'protocol not supported'},{errno:39,code:'EPROTOTYPE',description:'protocol wrong type for socket'},{errno:40,code:'ETIMEDOUT',description:'connection timed out'},{errno:41,code:'ECHARSET',description:'invalid Unicode character'},{errno:42,code:'EAIFAMNOSUPPORT',description:'address family for hostname not supported'},{errno:44,code:'EAISERVICE',description:'servname not supported for ai_socktype'},{errno:45,code:'EAISOCKTYPE',description:'ai_socktype not supported'},{errno:46,code:'ESHUTDOWN',description:'cannot send after transport endpoint shutdown'},{errno:47,code:'EEXIST',description:'file already exists'},{errno:48,code:'ESRCH',description:'no such process'},{errno:49,code:'ENAMETOOLONG',description:'name too long'},{errno:50,code:'EPERM',description:'operation not permitted'},{errno:51,code:'ELOOP',description:'too many symbolic links encountered'},{errno:52,code:'EXDEV',description:'cross-device link not permitted'},{errno:53,code:'ENOTEMPTY',description:'directory not empty'},{errno:54,code:'ENOSPC',description:'no space left on device'},{errno:55,code:'EIO',description:'i/o error'},{errno:56,code:'EROFS',description:'read-only file system'},{errno:57,code:'ENODEV',description:'no such device'},{errno:58,code:'ESPIPE',description:'invalid seek'},{errno:59,code:'ECANCELED',description:'operation canceled'}];module.exports.errno={};module.exports.code={};all.forEach(function(error){module.exports.errno[error.errno]=error;module.exports.code[error.code]=error;});module.exports.custom=__webpack_require__(6334)(module.exports);module.exports.create=module.exports.custom.createError;},4462:function(module,__unusedexports,__webpack_require__){"use strict";const series=__webpack_require__(7644);const propose=__webpack_require__(1146);const exchange=__webpack_require__(5298);const finish=__webpack_require__(7807);module.exports=function handshake(state,callback){series([cb=>propose(state,cb),cb=>exchange(state,cb),cb=>finish(state,cb)],err=>{state.cleanSecrets();if(err){if(err===true){err=new Error('Stream ended prematurely');}state.shake.abort(err);}callback(err);});return state.stream;};},4485:function(module){"use strict";module.exports=`// Record represents a dht record that contains a value
// for a key value pair
message Record {
  // The key that references this record
  bytes key = 1;

  // The actual value this record is storing
  bytes value = 2;

  // Note: These fields were removed from the Record message
  // hash of the authors public key
  // optional bytes author = 3;
  // A PKI signature for the key+value+author
  // optional bytes signature = 4;

  // Time the record was received, set by receiver
  optional string timeReceived = 5;
}`;},4486:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=eachLimit;var _eachOf=__webpack_require__(5066);var _eachOf2=_interopRequireDefault(_eachOf);var _withoutIndex=__webpack_require__(124);var _withoutIndex2=_interopRequireDefault(_withoutIndex);var _wrapAsync=__webpack_require__(9396);var _wrapAsync2=_interopRequireDefault(_wrapAsync);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function eachLimit(coll,iteratee,callback){(0,_eachOf2.default)(coll,(0,_withoutIndex2.default)((0,_wrapAsync2.default)(iteratee)),callback);}module.exports=exports['default'];},4513:function(module){module.exports=toArray;function toArray(list,index){var array=[];index=index||0;for(var i=index||0;i<list.length;i++){array[i-index]=list[i];}return array;}},4517:function(module,__unusedexports,__webpack_require__){module.exports=__webpack_require__(6047);module.exports.PublicKey=__webpack_require__(2050);module.exports.PublicKeyHash=__webpack_require__(3306);module.exports.MultiSig=__webpack_require__(8343);module.exports.MultiSigScriptHash=__webpack_require__(9180);},4518:function(module,__unusedexports,__webpack_require__){"use strict";var alphabet=__webpack_require__(5247);function isShortId(id){if(!id||typeof id!=='string'||id.length<6){return false;}var nonAlphabetic=new RegExp('[^'+alphabet.get().replace(/[|\\{}()[\]^$+*?.-]/g,'\\$&')+']');return!nonAlphabetic.test(id);}module.exports=isShortId;},4523:function(module,__unusedexports,__webpack_require__){"use strict";var Buffer=__webpack_require__(9423).Buffer,Transform=__webpack_require__(6886).Transform;module.exports=function(iconv){iconv.encodeStream=function encodeStream(encoding,options){return new IconvLiteEncoderStream(iconv.getEncoder(encoding,options),options);};iconv.decodeStream=function decodeStream(encoding,options){return new IconvLiteDecoderStream(iconv.getDecoder(encoding,options),options);};iconv.supportsStreams=true;iconv.IconvLiteEncoderStream=IconvLiteEncoderStream;iconv.IconvLiteDecoderStream=IconvLiteDecoderStream;iconv._collect=IconvLiteDecoderStream.prototype.collect;};function IconvLiteEncoderStream(conv,options){this.conv=conv;options=options||{};options.decodeStrings=false;Transform.call(this,options);}IconvLiteEncoderStream.prototype=Object.create(Transform.prototype,{constructor:{value:IconvLiteEncoderStream}});IconvLiteEncoderStream.prototype._transform=function(chunk,encoding,done){if(typeof chunk!='string')return done(new Error("Iconv encoding stream needs strings as its input."));try{var res=this.conv.write(chunk);if(res&&res.length)this.push(res);done();}catch(e){done(e);}};IconvLiteEncoderStream.prototype._flush=function(done){try{var res=this.conv.end();if(res&&res.length)this.push(res);done();}catch(e){done(e);}};IconvLiteEncoderStream.prototype.collect=function(cb){var chunks=[];this.on('error',cb);this.on('data',function(chunk){chunks.push(chunk);});this.on('end',function(){cb(null,Buffer.concat(chunks));});return this;};function IconvLiteDecoderStream(conv,options){this.conv=conv;options=options||{};options.encoding=this.encoding='utf8';Transform.call(this,options);}IconvLiteDecoderStream.prototype=Object.create(Transform.prototype,{constructor:{value:IconvLiteDecoderStream}});IconvLiteDecoderStream.prototype._transform=function(chunk,encoding,done){if(!Buffer.isBuffer(chunk))return done(new Error("Iconv decoding stream needs buffers as its input."));try{var res=this.conv.write(chunk);if(res&&res.length)this.push(res,this.encoding);done();}catch(e){done(e);}};IconvLiteDecoderStream.prototype._flush=function(done){try{var res=this.conv.end();if(res&&res.length)this.push(res,this.encoding);done();}catch(e){done(e);}};IconvLiteDecoderStream.prototype.collect=function(cb){var res='';this.on('error',cb);this.on('data',function(chunk){res+=chunk;});this.on('end',function(){cb(null,res);});return this;};},4528:function(module,__unusedexports,__webpack_require__){"use strict";var rlp=__webpack_require__(6585);var ethUtil=__webpack_require__(4784);module.exports=TrieNode;function TrieNode(type,key,value){if(Array.isArray(type)){this.parseNode(type);}else{this.type=type;if(type==='branch'){var values=key;this.raw=Array.apply(null,Array(17));if(values){values.forEach(function(keyVal){this.set.apply(this,keyVal);});}}else{this.raw=Array(2);this.setValue(value);this.setKey(key);}}}TrieNode.isRawNode=isRawNode;TrieNode.addHexPrefix=addHexPrefix;TrieNode.removeHexPrefix=removeHexPrefix;TrieNode.isTerminator=isTerminator;TrieNode.stringToNibbles=stringToNibbles;TrieNode.nibblesToBuffer=nibblesToBuffer;TrieNode.getNodeType=getNodeType;Object.defineProperty(TrieNode.prototype,'value',{get:function get(){return this.getValue();},set:function set(v){this.setValue(v);}});Object.defineProperty(TrieNode.prototype,'key',{get:function get(){return this.getKey();},set:function set(k){this.setKey(k);}});TrieNode.prototype.parseNode=function(rawNode){this.raw=rawNode;this.type=getNodeType(rawNode);};TrieNode.prototype.setValue=function(key,value){if(this.type!=='branch'){this.raw[1]=key;}else{if(arguments.length===1){value=key;key=16;}this.raw[key]=value;}};TrieNode.prototype.getValue=function(key){if(this.type==='branch'){if(arguments.length===0){key=16;}var val=this.raw[key];if(val!==null&&val!==undefined&&val.length!==0){return val;}}else{return this.raw[1];}};TrieNode.prototype.setKey=function(key){if(this.type!=='branch'){if(Buffer.isBuffer(key)){key=stringToNibbles(key);}else{key=key.slice(0);}key=addHexPrefix(key,this.type==='leaf');this.raw[0]=nibblesToBuffer(key);}};TrieNode.prototype.getKey=function(){if(this.type!=='branch'){var key=this.raw[0];key=removeHexPrefix(stringToNibbles(key));return key;}};TrieNode.prototype.serialize=function(){return rlp.encode(this.raw);};TrieNode.prototype.hash=function(){return ethUtil.sha3(this.serialize());};TrieNode.prototype.toString=function(){var out=this.type;out+=': [';this.raw.forEach(function(el){if(Buffer.isBuffer(el)){out+=el.toString('hex')+', ';}else if(el){out+='object, ';}else{out+='empty, ';}});out=out.slice(0,-2);out+=']';return out;};TrieNode.prototype.getChildren=function(){var children=[];switch(this.type){case'leaf':break;case'extention':children.push([this.key,this.getValue()]);break;case'branch':for(var index=0,end=16;index<end;index++){var value=this.getValue(index);if(value){children.push([[index],value]);}}break;}return children;};function addHexPrefix(key,terminator){if(key.length%2){key.unshift(1);}else{key.unshift(0);key.unshift(0);}if(terminator){key[0]+=2;}return key;}function removeHexPrefix(val){if(val[0]%2){val=val.slice(1);}else{val=val.slice(2);}return val;}function isTerminator(key){return key[0]>1;}function stringToNibbles(key){var bkey=new Buffer(key);var nibbles=[];for(var i=0;i<bkey.length;i++){var q=i*2;nibbles[q]=bkey[i]>>4;++q;nibbles[q]=bkey[i]%16;}return nibbles;}function nibblesToBuffer(arr){var buf=new Buffer(arr.length/2);for(var i=0;i<buf.length;i++){var q=i*2;buf[i]=(arr[q]<<4)+arr[++q];}return buf;}function getNodeType(node){if(node.length===17){return'branch';}else if(node.length===2){var key=stringToNibbles(node[0]);if(isTerminator(key)){return'leaf';}return'extention';}}function isRawNode(node){return Array.isArray(node)&&!Buffer.isBuffer(node);}},4537:function(__unusedmodule,exports,__webpack_require__){var util=__webpack_require__(649);exports.parse=parse;exports.format=format;function parse(value){value=value||'';var extensions={};value.split(',').forEach(function(v){var params=v.split(';');var token=params.shift().trim();if(extensions[token]===undefined){extensions[token]=[];}else if(!extensions.hasOwnProperty(token)){return;}var parsedParams={};params.forEach(function(param){var parts=param.trim().split('=');var key=parts[0];var value=parts[1];if(typeof value==='undefined'){value=true;}else{if(value[0]==='"'){value=value.slice(1);}if(value[value.length-1]==='"'){value=value.slice(0,value.length-1);}}if(parsedParams[key]===undefined){parsedParams[key]=[value];}else if(parsedParams.hasOwnProperty(key)){parsedParams[key].push(value);}});extensions[token].push(parsedParams);});return extensions;}function format(value){return Object.keys(value).map(function(token){var paramsList=value[token];if(!util.isArray(paramsList)){paramsList=[paramsList];}return paramsList.map(function(params){return[token].concat(Object.keys(params).map(function(k){var p=params[k];if(!util.isArray(p))p=[p];return p.map(function(v){return v===true?k:k+'='+v;}).join('; ');})).join('; ');}).join(', ');}).join(', ');}},4539:function(module,__unusedexports,__webpack_require__){"use strict";var ERR_INVALID_OPT_VALUE=__webpack_require__(3368).codes.ERR_INVALID_OPT_VALUE;function highWaterMarkFrom(options,isDuplex,duplexKey){return options.highWaterMark!=null?options.highWaterMark:isDuplex?options[duplexKey]:null;}function getHighWaterMark(state,options,duplexKey,isDuplex){var hwm=highWaterMarkFrom(options,isDuplex,duplexKey);if(hwm!=null){if(!(isFinite(hwm)&&Math.floor(hwm)===hwm)||hwm<0){var name=isDuplex?duplexKey:'highWaterMark';throw new ERR_INVALID_OPT_VALUE(name,hwm);}return Math.floor(hwm);}return state.objectMode?16:16*1024;}module.exports={getHighWaterMark:getHighWaterMark};},4541:function(module,__unusedexports,__webpack_require__){"use strict";module.exports=Readable;var Duplex;Readable.ReadableState=ReadableState;var EE=__webpack_require__(4859).EventEmitter;var EElistenerCount=function EElistenerCount(emitter,type){return emitter.listeners(type).length;};var Stream=__webpack_require__(7810);var Buffer=__webpack_require__(9423).Buffer;var OurUint8Array=global.Uint8Array||function(){};function _uint8ArrayToBuffer(chunk){return Buffer.from(chunk);}function _isUint8Array(obj){return Buffer.isBuffer(obj)||obj instanceof OurUint8Array;}var debugUtil=__webpack_require__(649);var debug;if(debugUtil&&debugUtil.debuglog){debug=debugUtil.debuglog('stream');}else{debug=function debug(){};}var BufferList=__webpack_require__(2833);var destroyImpl=__webpack_require__(5106);var _require=__webpack_require__(4539),getHighWaterMark=_require.getHighWaterMark;var _require$codes=__webpack_require__(3368).codes,ERR_INVALID_ARG_TYPE=_require$codes.ERR_INVALID_ARG_TYPE,ERR_STREAM_PUSH_AFTER_EOF=_require$codes.ERR_STREAM_PUSH_AFTER_EOF,ERR_METHOD_NOT_IMPLEMENTED=_require$codes.ERR_METHOD_NOT_IMPLEMENTED,ERR_STREAM_UNSHIFT_AFTER_END_EVENT=_require$codes.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;var _require2=__webpack_require__(3142),emitExperimentalWarning=_require2.emitExperimentalWarning;var StringDecoder;var createReadableStreamAsyncIterator;__webpack_require__(92)(Readable,Stream);var kProxyEvents=['error','close','destroy','pause','resume'];function prependListener(emitter,event,fn){if(typeof emitter.prependListener==='function')return emitter.prependListener(event,fn);if(!emitter._events||!emitter._events[event])emitter.on(event,fn);else if(Array.isArray(emitter._events[event]))emitter._events[event].unshift(fn);else emitter._events[event]=[fn,emitter._events[event]];}function ReadableState(options,stream,isDuplex){Duplex=Duplex||__webpack_require__(1686);options=options||{};if(typeof isDuplex!=='boolean')isDuplex=stream instanceof Duplex;this.objectMode=!!options.objectMode;if(isDuplex)this.objectMode=this.objectMode||!!options.readableObjectMode;this.highWaterMark=getHighWaterMark(this,options,'readableHighWaterMark',isDuplex);this.buffer=new BufferList();this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.ended=false;this.endEmitted=false;this.reading=false;this.sync=true;this.needReadable=false;this.emittedReadable=false;this.readableListening=false;this.resumeScheduled=false;this.paused=true;this.emitClose=options.emitClose!==false;this.destroyed=false;this.defaultEncoding=options.defaultEncoding||'utf8';this.awaitDrain=0;this.readingMore=false;this.decoder=null;this.encoding=null;if(options.encoding){if(!StringDecoder)StringDecoder=__webpack_require__(1235).StringDecoder;this.decoder=new StringDecoder(options.encoding);this.encoding=options.encoding;}}function Readable(options){Duplex=Duplex||__webpack_require__(1686);if(!(this instanceof Readable))return new Readable(options);var isDuplex=this instanceof Duplex;this._readableState=new ReadableState(options,this,isDuplex);this.readable=true;if(options){if(typeof options.read==='function')this._read=options.read;if(typeof options.destroy==='function')this._destroy=options.destroy;}Stream.call(this);}Object.defineProperty(Readable.prototype,'destroyed',{enumerable:false,get:function get(){if(this._readableState===undefined){return false;}return this._readableState.destroyed;},set:function set(value){if(!this._readableState){return;}this._readableState.destroyed=value;}});Readable.prototype.destroy=destroyImpl.destroy;Readable.prototype._undestroy=destroyImpl.undestroy;Readable.prototype._destroy=function(err,cb){cb(err);};Readable.prototype.push=function(chunk,encoding){var state=this._readableState;var skipChunkCheck;if(!state.objectMode){if(typeof chunk==='string'){encoding=encoding||state.defaultEncoding;if(encoding!==state.encoding){chunk=Buffer.from(chunk,encoding);encoding='';}skipChunkCheck=true;}}else{skipChunkCheck=true;}return readableAddChunk(this,chunk,encoding,false,skipChunkCheck);};Readable.prototype.unshift=function(chunk){return readableAddChunk(this,chunk,null,true,false);};function readableAddChunk(stream,chunk,encoding,addToFront,skipChunkCheck){debug('readableAddChunk',chunk);var state=stream._readableState;if(chunk===null){state.reading=false;onEofChunk(stream,state);}else{var er;if(!skipChunkCheck)er=chunkInvalid(state,chunk);if(er){stream.emit('error',er);}else if(state.objectMode||chunk&&chunk.length>0){if(typeof chunk!=='string'&&!state.objectMode&&Object.getPrototypeOf(chunk)!==Buffer.prototype){chunk=_uint8ArrayToBuffer(chunk);}if(addToFront){if(state.endEmitted)stream.emit('error',new ERR_STREAM_UNSHIFT_AFTER_END_EVENT());else addChunk(stream,state,chunk,true);}else if(state.ended){stream.emit('error',new ERR_STREAM_PUSH_AFTER_EOF());}else if(state.destroyed){return false;}else{state.reading=false;if(state.decoder&&!encoding){chunk=state.decoder.write(chunk);if(state.objectMode||chunk.length!==0)addChunk(stream,state,chunk,false);else maybeReadMore(stream,state);}else{addChunk(stream,state,chunk,false);}}}else if(!addToFront){state.reading=false;maybeReadMore(stream,state);}}return!state.ended&&(state.length<state.highWaterMark||state.length===0);}function addChunk(stream,state,chunk,addToFront){if(state.flowing&&state.length===0&&!state.sync){state.awaitDrain=0;stream.emit('data',chunk);}else{state.length+=state.objectMode?1:chunk.length;if(addToFront)state.buffer.unshift(chunk);else state.buffer.push(chunk);if(state.needReadable)emitReadable(stream);}maybeReadMore(stream,state);}function chunkInvalid(state,chunk){var er;if(!_isUint8Array(chunk)&&typeof chunk!=='string'&&chunk!==undefined&&!state.objectMode){er=new ERR_INVALID_ARG_TYPE('chunk',['string','Buffer','Uint8Array'],chunk);}return er;}Readable.prototype.isPaused=function(){return this._readableState.flowing===false;};Readable.prototype.setEncoding=function(enc){if(!StringDecoder)StringDecoder=__webpack_require__(1235).StringDecoder;this._readableState.decoder=new StringDecoder(enc);this._readableState.encoding=this._readableState.decoder.encoding;return this;};var MAX_HWM=0x800000;function computeNewHighWaterMark(n){if(n>=MAX_HWM){n=MAX_HWM;}else{n--;n|=n>>>1;n|=n>>>2;n|=n>>>4;n|=n>>>8;n|=n>>>16;n++;}return n;}function howMuchToRead(n,state){if(n<=0||state.length===0&&state.ended)return 0;if(state.objectMode)return 1;if(n!==n){if(state.flowing&&state.length)return state.buffer.head.data.length;else return state.length;}if(n>state.highWaterMark)state.highWaterMark=computeNewHighWaterMark(n);if(n<=state.length)return n;if(!state.ended){state.needReadable=true;return 0;}return state.length;}Readable.prototype.read=function(n){debug('read',n);n=parseInt(n,10);var state=this._readableState;var nOrig=n;if(n!==0)state.emittedReadable=false;if(n===0&&state.needReadable&&((state.highWaterMark!==0?state.length>=state.highWaterMark:state.length>0)||state.ended)){debug('read: emitReadable',state.length,state.ended);if(state.length===0&&state.ended)endReadable(this);else emitReadable(this);return null;}n=howMuchToRead(n,state);if(n===0&&state.ended){if(state.length===0)endReadable(this);return null;}var doRead=state.needReadable;debug('need readable',doRead);if(state.length===0||state.length-n<state.highWaterMark){doRead=true;debug('length less than watermark',doRead);}if(state.ended||state.reading){doRead=false;debug('reading or ended',doRead);}else if(doRead){debug('do read');state.reading=true;state.sync=true;if(state.length===0)state.needReadable=true;this._read(state.highWaterMark);state.sync=false;if(!state.reading)n=howMuchToRead(nOrig,state);}var ret;if(n>0)ret=fromList(n,state);else ret=null;if(ret===null){state.needReadable=true;n=0;}else{state.length-=n;state.awaitDrain=0;}if(state.length===0){if(!state.ended)state.needReadable=true;if(nOrig!==n&&state.ended)endReadable(this);}if(ret!==null)this.emit('data',ret);return ret;};function onEofChunk(stream,state){if(state.ended)return;if(state.decoder){var chunk=state.decoder.end();if(chunk&&chunk.length){state.buffer.push(chunk);state.length+=state.objectMode?1:chunk.length;}}state.ended=true;if(state.sync){emitReadable(stream);}else{state.needReadable=false;if(!state.emittedReadable){state.emittedReadable=true;emitReadable_(stream);}}}function emitReadable(stream){var state=stream._readableState;state.needReadable=false;if(!state.emittedReadable){debug('emitReadable',state.flowing);state.emittedReadable=true;process.nextTick(emitReadable_,stream);}}function emitReadable_(stream){var state=stream._readableState;debug('emitReadable_',state.destroyed,state.length,state.ended);if(!state.destroyed&&(state.length||state.ended)){stream.emit('readable');}state.needReadable=!state.flowing&&!state.ended&&state.length<=state.highWaterMark;flow(stream);}function maybeReadMore(stream,state){if(!state.readingMore){state.readingMore=true;process.nextTick(maybeReadMore_,stream,state);}}function maybeReadMore_(stream,state){var len=state.length;while(!state.reading&&!state.ended&&state.length<state.highWaterMark){debug('maybeReadMore read 0');stream.read(0);if(len===state.length)break;else len=state.length;}state.readingMore=false;}Readable.prototype._read=function(n){this.emit('error',new ERR_METHOD_NOT_IMPLEMENTED('_read()'));};Readable.prototype.pipe=function(dest,pipeOpts){var src=this;var state=this._readableState;switch(state.pipesCount){case 0:state.pipes=dest;break;case 1:state.pipes=[state.pipes,dest];break;default:state.pipes.push(dest);break;}state.pipesCount+=1;debug('pipe count=%d opts=%j',state.pipesCount,pipeOpts);var doEnd=(!pipeOpts||pipeOpts.end!==false)&&dest!==process.stdout&&dest!==process.stderr;var endFn=doEnd?onend:unpipe;if(state.endEmitted)process.nextTick(endFn);else src.once('end',endFn);dest.on('unpipe',onunpipe);function onunpipe(readable,unpipeInfo){debug('onunpipe');if(readable===src){if(unpipeInfo&&unpipeInfo.hasUnpiped===false){unpipeInfo.hasUnpiped=true;cleanup();}}}function onend(){debug('onend');dest.end();}var ondrain=pipeOnDrain(src);dest.on('drain',ondrain);var cleanedUp=false;function cleanup(){debug('cleanup');dest.removeListener('close',onclose);dest.removeListener('finish',onfinish);dest.removeListener('drain',ondrain);dest.removeListener('error',onerror);dest.removeListener('unpipe',onunpipe);src.removeListener('end',onend);src.removeListener('end',unpipe);src.removeListener('data',ondata);cleanedUp=true;if(state.awaitDrain&&(!dest._writableState||dest._writableState.needDrain))ondrain();}src.on('data',ondata);function ondata(chunk){debug('ondata');var ret=dest.write(chunk);debug('dest.write',ret);if(ret===false){if((state.pipesCount===1&&state.pipes===dest||state.pipesCount>1&&indexOf(state.pipes,dest)!==-1)&&!cleanedUp){debug('false write response, pause',state.awaitDrain);state.awaitDrain++;}src.pause();}}function onerror(er){debug('onerror',er);unpipe();dest.removeListener('error',onerror);if(EElistenerCount(dest,'error')===0)dest.emit('error',er);}prependListener(dest,'error',onerror);function onclose(){dest.removeListener('finish',onfinish);unpipe();}dest.once('close',onclose);function onfinish(){debug('onfinish');dest.removeListener('close',onclose);unpipe();}dest.once('finish',onfinish);function unpipe(){debug('unpipe');src.unpipe(dest);}dest.emit('pipe',src);if(!state.flowing){debug('pipe resume');src.resume();}return dest;};function pipeOnDrain(src){return function pipeOnDrainFunctionResult(){var state=src._readableState;debug('pipeOnDrain',state.awaitDrain);if(state.awaitDrain)state.awaitDrain--;if(state.awaitDrain===0&&EElistenerCount(src,'data')){state.flowing=true;flow(src);}};}Readable.prototype.unpipe=function(dest){var state=this._readableState;var unpipeInfo={hasUnpiped:false};if(state.pipesCount===0)return this;if(state.pipesCount===1){if(dest&&dest!==state.pipes)return this;if(!dest)dest=state.pipes;state.pipes=null;state.pipesCount=0;state.flowing=false;if(dest)dest.emit('unpipe',this,unpipeInfo);return this;}if(!dest){var dests=state.pipes;var len=state.pipesCount;state.pipes=null;state.pipesCount=0;state.flowing=false;for(var i=0;i<len;i++){dests[i].emit('unpipe',this,{hasUnpiped:false});}return this;}var index=indexOf(state.pipes,dest);if(index===-1)return this;state.pipes.splice(index,1);state.pipesCount-=1;if(state.pipesCount===1)state.pipes=state.pipes[0];dest.emit('unpipe',this,unpipeInfo);return this;};Readable.prototype.on=function(ev,fn){var res=Stream.prototype.on.call(this,ev,fn);var state=this._readableState;if(ev==='data'){state.readableListening=this.listenerCount('readable')>0;if(state.flowing!==false)this.resume();}else if(ev==='readable'){if(!state.endEmitted&&!state.readableListening){state.readableListening=state.needReadable=true;state.flowing=false;state.emittedReadable=false;debug('on readable',state.length,state.reading);if(state.length){emitReadable(this);}else if(!state.reading){process.nextTick(nReadingNextTick,this);}}}return res;};Readable.prototype.addListener=Readable.prototype.on;Readable.prototype.removeListener=function(ev,fn){var res=Stream.prototype.removeListener.call(this,ev,fn);if(ev==='readable'){process.nextTick(updateReadableListening,this);}return res;};Readable.prototype.removeAllListeners=function(ev){var res=Stream.prototype.removeAllListeners.apply(this,arguments);if(ev==='readable'||ev===undefined){process.nextTick(updateReadableListening,this);}return res;};function updateReadableListening(self){var state=self._readableState;state.readableListening=self.listenerCount('readable')>0;if(state.resumeScheduled&&!state.paused){state.flowing=true;}else if(self.listenerCount('data')>0){self.resume();}}function nReadingNextTick(self){debug('readable nexttick read 0');self.read(0);}Readable.prototype.resume=function(){var state=this._readableState;if(!state.flowing){debug('resume');state.flowing=!state.readableListening;resume(this,state);}state.paused=false;return this;};function resume(stream,state){if(!state.resumeScheduled){state.resumeScheduled=true;process.nextTick(resume_,stream,state);}}function resume_(stream,state){debug('resume',state.reading);if(!state.reading){stream.read(0);}state.resumeScheduled=false;stream.emit('resume');flow(stream);if(state.flowing&&!state.reading)stream.read(0);}Readable.prototype.pause=function(){debug('call pause flowing=%j',this._readableState.flowing);if(this._readableState.flowing!==false){debug('pause');this._readableState.flowing=false;this.emit('pause');}this._readableState.paused=true;return this;};function flow(stream){var state=stream._readableState;debug('flow',state.flowing);while(state.flowing&&stream.read()!==null){;}}Readable.prototype.wrap=function(stream){var _this=this;var state=this._readableState;var paused=false;stream.on('end',function(){debug('wrapped end');if(state.decoder&&!state.ended){var chunk=state.decoder.end();if(chunk&&chunk.length)_this.push(chunk);}_this.push(null);});stream.on('data',function(chunk){debug('wrapped data');if(state.decoder)chunk=state.decoder.write(chunk);if(state.objectMode&&(chunk===null||chunk===undefined))return;else if(!state.objectMode&&(!chunk||!chunk.length))return;var ret=_this.push(chunk);if(!ret){paused=true;stream.pause();}});for(var i in stream){if(this[i]===undefined&&typeof stream[i]==='function'){this[i]=function methodWrap(method){return function methodWrapReturnFunction(){return stream[method].apply(stream,arguments);};}(i);}}for(var n=0;n<kProxyEvents.length;n++){stream.on(kProxyEvents[n],this.emit.bind(this,kProxyEvents[n]));}this._read=function(n){debug('wrapped _read',n);if(paused){paused=false;stream.resume();}};return this;};if(typeof Symbol==='function'){Readable.prototype[Symbol.asyncIterator]=function(){emitExperimentalWarning('Readable[Symbol.asyncIterator]');if(createReadableStreamAsyncIterator===undefined){createReadableStreamAsyncIterator=__webpack_require__(2891);}return createReadableStreamAsyncIterator(this);};}Object.defineProperty(Readable.prototype,'readableHighWaterMark',{enumerable:false,get:function get(){return this._readableState.highWaterMark;}});Object.defineProperty(Readable.prototype,'readableBuffer',{enumerable:false,get:function get(){return this._readableState&&this._readableState.buffer;}});Object.defineProperty(Readable.prototype,'readableFlowing',{enumerable:false,get:function get(){return this._readableState.flowing;},set:function set(state){if(this._readableState){this._readableState.flowing=state;}}});Readable._fromList=fromList;Object.defineProperty(Readable.prototype,'readableLength',{enumerable:false,get:function get(){return this._readableState.length;}});function fromList(n,state){if(state.length===0)return null;var ret;if(state.objectMode)ret=state.buffer.shift();else if(!n||n>=state.length){if(state.decoder)ret=state.buffer.join('');else if(state.buffer.length===1)ret=state.buffer.first();else ret=state.buffer.concat(state.length);state.buffer.clear();}else{ret=state.buffer.consume(n,state.decoder);}return ret;}function endReadable(stream){var state=stream._readableState;debug('endReadable',state.endEmitted);if(!state.endEmitted){state.ended=true;process.nextTick(endReadableNT,state,stream);}}function endReadableNT(state,stream){debug('endReadableNT',state.endEmitted,state.length);if(!state.endEmitted&&state.length===0){state.endEmitted=true;stream.readable=false;stream.emit('end');}}function indexOf(xs,x){for(var i=0,l=xs.length;i<l;i++){if(xs[i]===x)return i;}return-1;}},4598:function(module,__unusedexports,__webpack_require__){"use strict";var drain=__webpack_require__(2147);module.exports=function reduce(reducer,acc,cb){if(!cb)cb=acc,acc=null;var sink=drain(function(data){acc=reducer(acc,data);},function(err){cb(err,acc);});if(arguments.length===2)return function(source){source(null,function(end,data){if(end)return cb(end===true?null:end);acc=data;sink(source);});};else return sink;};},4603:function(__unusedmodule,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _events=__webpack_require__(4859);var _events2=_interopRequireDefault(_events);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var debug=__webpack_require__(4104)('latency-monitor:VisibilityChangeEmitter');var VisibilityChangeEmitter=function(_EventEmitter){_inherits(VisibilityChangeEmitter,_EventEmitter);function VisibilityChangeEmitter(){_classCallCheck(this,VisibilityChangeEmitter);var _this=_possibleConstructorReturn(this,(VisibilityChangeEmitter.__proto__||Object.getPrototypeOf(VisibilityChangeEmitter)).call(this));if(typeof document==='undefined'){debug('This is not a browser, no "document" found. Stopping.');return _possibleConstructorReturn(_this);}_this._initializeVisibilityVarNames();_this._addVisibilityChangeListener();return _this;}_createClass(VisibilityChangeEmitter,[{key:'_initializeVisibilityVarNames',value:function _initializeVisibilityVarNames(){var hidden=void 0;var visibilityChange=void 0;if(typeof document.hidden!=='undefined'){hidden='hidden';visibilityChange='visibilitychange';}else if(typeof document.mozHidden!=='undefined'){hidden='mozHidden';visibilityChange='mozvisibilitychange';}else if(typeof document.msHidden!=='undefined'){hidden='msHidden';visibilityChange='msvisibilitychange';}else if(typeof document.webkitHidden!=='undefined'){hidden='webkitHidden';visibilityChange='webkitvisibilitychange';}this._hidden=hidden;this._visibilityChange=visibilityChange;}},{key:'_addVisibilityChangeListener',value:function _addVisibilityChangeListener(){if(typeof document.addEventListener==='undefined'||typeof document[this._hidden]==='undefined'){debug('Checking page visibility requires a browser that supports the Page Visibility API.');}else{document.addEventListener(this._visibilityChange,this._handleVisibilityChange.bind(this),false);}}},{key:'isVisible',value:function isVisible(){if(this._hidden===undefined||document[this._hidden]===undefined){return undefined;}return!document[this._hidden];}},{key:'_handleVisibilityChange',value:function _handleVisibilityChange(){var visible=!document[this._hidden];debug(visible?'Page Visible':'Page Hidden');this.emit('visibilityChange',visible);}}]);return VisibilityChangeEmitter;}(_events2.default);exports.default=VisibilityChangeEmitter;},4606:function(module,__unusedexports,__webpack_require__){var Stream=__webpack_require__(6886).Stream;module.exports=legacy;function legacy(fs){return{ReadStream:ReadStream,WriteStream:WriteStream};function ReadStream(path,options){if(!(this instanceof ReadStream))return new ReadStream(path,options);Stream.call(this);var self=this;this.path=path;this.fd=null;this.readable=true;this.paused=false;this.flags='r';this.mode=438;this.bufferSize=64*1024;options=options||{};var keys=Object.keys(options);for(var index=0,length=keys.length;index<length;index++){var key=keys[index];this[key]=options[key];}if(this.encoding)this.setEncoding(this.encoding);if(this.start!==undefined){if('number'!==typeof this.start){throw TypeError('start must be a Number');}if(this.end===undefined){this.end=Infinity;}else if('number'!==typeof this.end){throw TypeError('end must be a Number');}if(this.start>this.end){throw new Error('start must be <= end');}this.pos=this.start;}if(this.fd!==null){process.nextTick(function(){self._read();});return;}fs.open(this.path,this.flags,this.mode,function(err,fd){if(err){self.emit('error',err);self.readable=false;return;}self.fd=fd;self.emit('open',fd);self._read();});}function WriteStream(path,options){if(!(this instanceof WriteStream))return new WriteStream(path,options);Stream.call(this);this.path=path;this.fd=null;this.writable=true;this.flags='w';this.encoding='binary';this.mode=438;this.bytesWritten=0;options=options||{};var keys=Object.keys(options);for(var index=0,length=keys.length;index<length;index++){var key=keys[index];this[key]=options[key];}if(this.start!==undefined){if('number'!==typeof this.start){throw TypeError('start must be a Number');}if(this.start<0){throw new Error('start must be >= zero');}this.pos=this.start;}this.busy=false;this._queue=[];if(this.fd===null){this._open=fs.open;this._queue.push([this._open,this.path,this.flags,this.mode,undefined]);this.flush();}}}},4622:function(module,__unusedexports,__webpack_require__){"use strict";const isIPFS=__webpack_require__(7129);const debug=__webpack_require__(746);const log=debug('jsipfs:ipns:path');log.error=debug('jsipfs:ipns:path:error');const resolvePath=(ipfsNode,name,callback)=>{if(isIPFS.ipnsPath(name)){log(`resolve ipns path ${name}`);return ipfsNode._ipns.resolve(name,callback);}ipfsNode.dag.get(name.substring('/ipfs/'.length),(err,value)=>{if(err){return callback(err);}return callback(null,value);});};module.exports={resolvePath};},4627:function(module,__unusedexports,__webpack_require__){var from2=__webpack_require__(1372);var toBuffer=__webpack_require__(4339);module.exports=function(file,options){options=options||{};var offset=options.offset||0;var chunkSize=options.chunkSize||1024*1024;var fileReader=new FileReader(file);var from=from2(function(size,cb){if(offset>=file.size)return cb(null,null);fileReader.onloadend=function loaded(event){var data=event.target.result;if(data instanceof ArrayBuffer)data=toBuffer(new Uint8Array(event.target.result));cb(null,data);};var end=offset+chunkSize;var slice=file.slice(offset,end);fileReader.readAsArrayBuffer(slice);offset=end;});from.name=file.name;from.size=file.size;from.type=file.type;from.lastModified=file.lastModified;fileReader.onerror=function(err){from.destroy(err);};return from;};},4628:function(module){var slice=[].slice;module.exports=function(obj,fn){if('string'==typeof fn)fn=obj[fn];if('function'!=typeof fn)throw new Error('bind() requires a function');var args=slice.call(arguments,2);return function(){return fn.apply(obj,args.concat(slice.call(arguments)));};};},4630:function(module,__unusedexports,__webpack_require__){"use strict";const Block=__webpack_require__(6505);const pull=__webpack_require__(2885);const CID=__webpack_require__(9339);const doUntil=__webpack_require__(4012);const IPFSRepo=__webpack_require__(3279);const BlockService=__webpack_require__(4103);const joinPath=__webpack_require__(5897).join;const osPathSep=__webpack_require__(5897).sep;const pullDeferSource=__webpack_require__(5213).source;const pullTraverse=__webpack_require__(5097);const map=__webpack_require__(7011);const series=__webpack_require__(7644);const waterfall=__webpack_require__(4265);const MemoryStore=__webpack_require__(759).MemoryDatastore;const mergeOptions=__webpack_require__(5996);const ipldDagCbor=__webpack_require__(1231);const ipldDagPb=__webpack_require__(7421);const ipldRaw=__webpack_require__(7231);function noop(){}class IPLDResolver{constructor(userOptions){const options=mergeOptions(IPLDResolver.defaultOptions,userOptions);if(!options.blockService){throw new Error('Missing blockservice');}this.bs=options.blockService;this.resolvers={};this.support={};this.support.add=(multicodec,resolver,util)=>{if(this.resolvers[multicodec]){throw new Error('Resolver already exists for codec "'+multicodec+'"');}this.resolvers[multicodec]={resolver:resolver,util:util};};this.support.load=options.loadFormat||((codec,callback)=>{callback(new Error(`No resolver found for codec "${codec}"`));});this.support.rm=multicodec=>{if(this.resolvers[multicodec]){delete this.resolvers[multicodec];}};for(const format of options.formats){const{resolver,util}=format;const multicodec=resolver.multicodec;this.support.add(multicodec,resolver,util);}}get(cid,path,options,callback){if(typeof path==='function'){callback=path;path=undefined;}if(typeof options==='function'){callback=options;options={};}if(typeof path==='string'){path=joinPath('/',path).substr(1).split(osPathSep).join('/');}if(path===''||!path){return this._get(cid,(err,node)=>{if(err){return callback(err);}callback(null,{value:node,remainderPath:'',cid});});}let value;doUntil(cb=>{this._getFormat(cid.codec,(err,format)=>{if(err)return cb(err);this.bs.get(cid,(err,block)=>{if(err){return cb(err);}format.resolver.resolve(block.data,path,(err,result)=>{if(err){return cb(err);}value=result.value;path=result.remainderPath;cb();});});});},()=>{const endReached=!path||path===''||path==='/';const isTerminal=value&&!IPLDResolver._maybeCID(value);if(endReached&&isTerminal||options.localResolve){cid=IPLDResolver._maybeCID(value)||cid;return true;}else{value=IPLDResolver._maybeCID(value);if(value){cid=value;}return false;}},(err,results)=>{if(err){return callback(err);}return callback(null,{value:value,remainderPath:path,cid});});}getStream(cid,path,options){const deferred=pullDeferSource();this.get(cid,path,options,(err,result)=>{if(err){return deferred.resolve(pull.error(err));}deferred.resolve(pull.values([result]));});return deferred;}getMany(cids,callback){if(!Array.isArray(cids)){return callback(new Error('Argument must be an array of CIDs'));}this.bs.getMany(cids,(err,blocks)=>{if(err){return callback(err);}map(blocks,(block,mapCallback)=>{this._getFormat(block.cid.codec,(err,format)=>{if(err)return mapCallback(err);format.util.deserialize(block.data,mapCallback);});},callback);});}put(node,options,callback){if(typeof options==='function'){callback=options;return setImmediate(()=>callback(new Error('IPLDResolver.put requires options')));}callback=callback||noop;if(options.cid&&CID.isCID(options.cid)){if(options.onlyHash){return setImmediate(()=>callback(null,options.cid));}return this._put(options.cid,node,callback);}this._getFormat(options.format,(err,format)=>{if(err)return callback(err);format.util.cid(node,options,(err,cid)=>{if(err){return callback(err);}if(options.onlyHash){return callback(null,cid);}this._put(cid,node,callback);});});}treeStream(cid,path,options){if(typeof path==='object'){options=path;path=undefined;}options=options||{};let p;if(!options.recursive){p=pullDeferSource();waterfall([cb=>this._getFormat(cid.codec,cb),(format,cb)=>this.bs.get(cid,(err,block)=>{if(err)return cb(err);cb(null,format,block);}),(format,block,cb)=>format.resolver.tree(block.data,cb)],(err,paths)=>{if(err){p.abort(err);return p;}p.resolve(pull.values(paths));});}if(options.recursive){p=pull(pullTraverse.widthFirst({basePath:null,cid:cid},el=>{if(typeof el==='string'){return pull.empty();}const deferred=pullDeferSource();const cid=el.cid;waterfall([cb=>this._getFormat(cid.codec,cb),(format,cb)=>this.bs.get(cid,(err,block)=>{if(err)return cb(err);cb(null,format,block);}),(format,block,cb)=>format.resolver.tree(block.data,(err,paths)=>{if(err){return cb(err);}map(paths,(p,cb)=>{format.resolver.isLink(block.data,p,(err,link)=>{if(err){return cb(err);}cb(null,{path:p,link:link});});},cb);})],(err,paths)=>{if(err){deferred.abort(err);return deferred;}deferred.resolve(pull.values(paths.map(p=>{const base=el.basePath?el.basePath+'/'+p.path:p.path;if(p.link){return{basePath:base,cid:IPLDResolver._maybeCID(p.link)};}return base;})));});return deferred;}),pull.map(e=>{if(typeof e==='string'){return e;}return e.basePath;}),pull.filter(Boolean));}if(path){return pull(p,pull.map(el=>{if(el.indexOf(path)===0){el=el.slice(path.length+1);return el;}}),pull.filter(Boolean));}return p;}remove(cids,callback){this.bs.delete(cids,callback);}_get(cid,callback){waterfall([cb=>this._getFormat(cid.codec,cb),(format,cb)=>this.bs.get(cid,(err,block)=>{if(err)return cb(err);cb(null,format,block);}),(format,block,cb)=>{format.util.deserialize(block.data,(err,deserialized)=>{if(err){return cb(err);}cb(null,deserialized);});}],callback);}_getFormat(codec,callback){if(this.resolvers[codec]){return callback(null,this.resolvers[codec]);}this.support.load(codec,(err,format)=>{if(err)return callback(err);this.resolvers[codec]=format;callback(null,format);});}_put(cid,node,callback){callback=callback||noop;waterfall([cb=>this._getFormat(cid.codec,cb),(format,cb)=>format.util.serialize(node,cb),(buf,cb)=>this.bs.put(new Block(buf,cid),cb)],err=>{if(err){return callback(err);}callback(null,cid);});}static _maybeCID(link){if(CID.isCID(link)){return link;}if(link&&link['/']!==undefined){return new CID(link['/']);}return null;}}IPLDResolver.defaultOptions={formats:[ipldDagCbor,ipldDagPb,ipldRaw]};IPLDResolver.inMemory=function(callback){const repo=new IPFSRepo('in-memory',{storageBackends:{root:MemoryStore,blocks:MemoryStore,datastore:MemoryStore},lock:'memory'});const blockService=new BlockService(repo);series([cb=>repo.init({},cb),cb=>repo.open(cb)],err=>{if(err){return callback(err);}callback(null,new IPLDResolver({blockService}));});};module.exports=IPLDResolver;},4639:function(module,exports,__webpack_require__){"use strict";const pull=__webpack_require__(418);const values=__webpack_require__(5130);const collect=__webpack_require__(8342);const pullLP=__webpack_require__(8585);const debug=__webpack_require__(746);exports=module.exports;function randomId(){return(~~(Math.random()*1e9)).toString(36);}function encode(msg,callback){pull(values(Buffer.isBuffer(msg)?[msg]:[Buffer.from(msg)]),pullLP.encode(),collect((err,encoded)=>{if(err){return callback(err);}callback(null,encoded[0]);}));}exports.writeEncoded=(writer,msg,callback)=>{encode(msg,(err,msg)=>{if(err){return callback(err);}writer.write(msg);});};function createLogger(type){const rId=randomId();function printer(logger){return msg=>{if(Array.isArray(msg)){msg=msg.join(' ');}logger('(%s) %s',rId,msg);};}const log=printer(debug('mss:'+type));log.error=printer(debug('mss:'+type+':error'));return log;}exports.log={};exports.log.dialer=()=>{return createLogger('dialer\t');};exports.log.listener=()=>{return createLogger('listener\t');};},4649:function(module,__unusedexports,__webpack_require__){var isHexPrefixed=__webpack_require__(4002);module.exports=function stripHexPrefix(str){if(typeof str!=='string'){return str;}return isHexPrefixed(str)?str.slice(2):str;};},4652:function(__unusedmodule,exports){exports.BufferUtil={merge:function(mergedBuffer,buffers){var offset=0;for(var i=0,l=buffers.length;i<l;++i){var buf=buffers[i];buf.copy(mergedBuffer,offset);offset+=buf.length;}},mask:function(source,mask,output,offset,length){var maskNum=mask.readUInt32LE(0,true);var i=0;for(;i<length-3;i+=4){var num=maskNum^source.readUInt32LE(i,true);if(num<0)num=4294967296+num;output.writeUInt32LE(num,offset+i,true);}switch(length%4){case 3:output[offset+i+2]=source[i+2]^mask[2];case 2:output[offset+i+1]=source[i+1]^mask[1];case 1:output[offset+i]=source[i]^mask[0];case 0:;}},unmask:function(data,mask){var maskNum=mask.readUInt32LE(0,true);var length=data.length;var i=0;for(;i<length-3;i+=4){var num=maskNum^data.readUInt32LE(i,true);if(num<0)num=4294967296+num;data.writeUInt32LE(num,i,true);}switch(length%4){case 3:data[i+2]=data[i+2]^mask[2];case 2:data[i+1]=data[i+1]^mask[1];case 1:data[i]=data[i]^mask[0];case 0:;}}};},4653:function(module,__unusedexports,__webpack_require__){var baseIsTypedArray=__webpack_require__(3390),baseUnary=__webpack_require__(1443),nodeUtil=__webpack_require__(1809);var nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray;var isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray;module.exports=isTypedArray;},4655:function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(2685);exports.log=log;exports.formatArgs=formatArgs;exports.save=save;exports.load=load;exports.useColors=useColors;exports.storage='undefined'!=typeof chrome&&'undefined'!=typeof chrome.storage?chrome.storage.local:localstorage();exports.colors=['#0000CC','#0000FF','#0033CC','#0033FF','#0066CC','#0066FF','#0099CC','#0099FF','#00CC00','#00CC33','#00CC66','#00CC99','#00CCCC','#00CCFF','#3300CC','#3300FF','#3333CC','#3333FF','#3366CC','#3366FF','#3399CC','#3399FF','#33CC00','#33CC33','#33CC66','#33CC99','#33CCCC','#33CCFF','#6600CC','#6600FF','#6633CC','#6633FF','#66CC00','#66CC33','#9900CC','#9900FF','#9933CC','#9933FF','#99CC00','#99CC33','#CC0000','#CC0033','#CC0066','#CC0099','#CC00CC','#CC00FF','#CC3300','#CC3333','#CC3366','#CC3399','#CC33CC','#CC33FF','#CC6600','#CC6633','#CC9900','#CC9933','#CCCC00','#CCCC33','#FF0000','#FF0033','#FF0066','#FF0099','#FF00CC','#FF00FF','#FF3300','#FF3333','#FF3366','#FF3399','#FF33CC','#FF33FF','#FF6600','#FF6633','#FF9900','#FF9933','#FFCC00','#FFCC33'];function useColors(){if(typeof window!=='undefined'&&window.process&&window.process.type==='renderer'){return true;}if(typeof navigator!=='undefined'&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)){return false;}return typeof document!=='undefined'&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!=='undefined'&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!=='undefined'&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!=='undefined'&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/);}exports.formatters.j=function(v){try{return JSON.stringify(v);}catch(err){return'[UnexpectedJSONParseError]: '+err.message;}};function formatArgs(args){var useColors=this.useColors;args[0]=(useColors?'%c':'')+this.namespace+(useColors?' %c':' ')+args[0]+(useColors?'%c ':' ')+'+'+exports.humanize(this.diff);if(!useColors)return;var c='color: '+this.color;args.splice(1,0,c,'color: inherit');var index=0;var lastC=0;args[0].replace(/%[a-zA-Z%]/g,function(match){if('%%'===match)return;index++;if('%c'===match){lastC=index;}});args.splice(lastC,0,c);}function log(){return'object'===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments);}function save(namespaces){try{if(null==namespaces){exports.storage.removeItem('debug');}else{exports.storage.debug=namespaces;}}catch(e){}}function load(){var r;try{r=exports.storage.debug;}catch(e){}if(!r&&typeof process!=='undefined'&&'env'in process){r=process.env.DEBUG;}return r;}exports.enable(load());function localstorage(){try{return window.localStorage;}catch(e){}}},4666:function(module,__unusedexports,__webpack_require__){var getMapData=__webpack_require__(4749);function mapCacheDelete(key){var result=getMapData(this,key)['delete'](key);this.size-=result?1:0;return result;}module.exports=mapCacheDelete;},4669:function(module,__unusedexports,__webpack_require__){var memoizeCapped=__webpack_require__(9305);var rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;var reEscapeChar=/\\(\\)?/g;var stringToPath=memoizeCapped(function(string){var result=[];if(string.charCodeAt(0)===46){result.push('');}string.replace(rePropName,function(match,number,quote,subString){result.push(quote?subString.replace(reEscapeChar,'$1'):number||match);});return result;});module.exports=stringToPath;},4676:function(module,__unusedexports,__webpack_require__){"use strict";const series=__webpack_require__(7644);const Bitswap=__webpack_require__(229);const get=__webpack_require__(2814);const setImmediate=__webpack_require__(7368);const promisify=__webpack_require__(6955);const{TieredDatastore}=__webpack_require__(4184);const IPNS=__webpack_require__(4326);const PubsubDatastore=__webpack_require__(856);const OfflineDatastore=__webpack_require__(4436);const createLibp2pBundle=__webpack_require__(9688);module.exports=self=>{return promisify(callback=>{const done=err=>{if(err){setImmediate(()=>self.emit('error',err));return callback(err);}self.state.started();setImmediate(()=>self.emit('start'));callback();};if(self.state.state()!=='stopped'){return done(new Error(`Not able to start from state: ${self.state.state()}`));}self.log('starting');self.state.start();series([cb=>{self._repo.closed?self._repo.open(cb):cb();},cb=>{self._repo.config.get((err,config)=>{if(err)return cb(err);const libp2p=createLibp2pBundle(self,config);libp2p.start(err=>{if(err)return cb(err);self.libp2p=libp2p;cb();});});},cb=>{const ipnsStores=[];let pubsubDs;if(get(self._options,'EXPERIMENTAL.ipnsPubsub',false)){const pubsub=self.libp2p.pubsub;const localDatastore=self._repo.datastore;const peerId=self._peerInfo.id;pubsubDs=new PubsubDatastore(pubsub,localDatastore,peerId);ipnsStores.push(pubsubDs);}if(get(self._options,'EXPERIMENTAL.dht',false)&&!self._options.local){ipnsStores.push(self.libp2p.dht);}else{const offlineDatastore=new OfflineDatastore(self._repo);ipnsStores.push(offlineDatastore);}const routing=new TieredDatastore(ipnsStores);self._ipns=new IPNS(routing,self._repo.datastore,self._peerInfo,self._keychain,self._options);self._bitswap=new Bitswap(self.libp2p,self._repo.blocks,{statsEnabled:true});self._bitswap.start();self._blockService.setExchange(self._bitswap);self._preload.start();self._ipns.republisher.start();self._mfsPreload.start(cb);}],done);});};},4677:function(module,__unusedexports,__webpack_require__){"use strict";var utils=__webpack_require__(1702);var SHA512=__webpack_require__(4082);function SHA384(){if(!(this instanceof SHA384))return new SHA384();SHA512.call(this);this.h=[0xcbbb9d5d,0xc1059ed8,0x629a292a,0x367cd507,0x9159015a,0x3070dd17,0x152fecd8,0xf70e5939,0x67332667,0xffc00b31,0x8eb44a87,0x68581511,0xdb0c2e0d,0x64f98fa7,0x47b5481d,0xbefa4fa4];}utils.inherits(SHA384,SHA512);module.exports=SHA384;SHA384.blockSize=1024;SHA384.outSize=384;SHA384.hmacStrength=192;SHA384.padLength=128;SHA384.prototype._digest=function digest(enc){if(enc==='hex')return utils.toHex32(this.h.slice(0,12),'big');else return utils.split32(this.h.slice(0,12),'big');};},4678:function(module){"use strict";module.exports={settingsCache:Symbol('settingsCache')};},4679:function(module){function AbstractIterator(db){this.db=db;this._ended=false;this._nexting=false;}AbstractIterator.prototype.next=function(callback){var self=this;if(typeof callback!=='function'){throw new Error('next() requires a callback argument');}if(self._ended){process.nextTick(callback,new Error('cannot call next() after end()'));return self;}if(self._nexting){process.nextTick(callback,new Error('cannot call next() before previous next() has completed'));return self;}self._nexting=true;self._next(function(){self._nexting=false;callback.apply(null,arguments);});return self;};AbstractIterator.prototype._next=function(callback){process.nextTick(callback);};AbstractIterator.prototype.end=function(callback){if(typeof callback!=='function'){throw new Error('end() requires a callback argument');}if(this._ended){return process.nextTick(callback,new Error('end() already called on iterator'));}this._ended=true;this._end(callback);};AbstractIterator.prototype._end=function(callback){process.nextTick(callback);};module.exports=AbstractIterator;},4690:function(module){"use strict";function isHighSurrogate(codePoint){return codePoint>=0xd800&&codePoint<=0xdbff;}function isLowSurrogate(codePoint){return codePoint>=0xdc00&&codePoint<=0xdfff;}module.exports=function truncate(getLength,string,byteLength){if(typeof string!=="string"){throw new Error("Input must be string");}var charLength=string.length;var curByteLength=0;var codePoint;var segment;for(var i=0;i<charLength;i+=1){codePoint=string.charCodeAt(i);segment=string[i];if(isHighSurrogate(codePoint)&&isLowSurrogate(string.charCodeAt(i+1))){i+=1;segment+=string[i];}curByteLength+=getLength(segment);if(curByteLength===byteLength){return string.slice(0,i+1);}else if(curByteLength>byteLength){return string.slice(0,i-segment.length+1);}}return string;};},4708:function(module,__unusedexports,__webpack_require__){var baseIsNative=__webpack_require__(1274),getValue=__webpack_require__(4743);function getNative(object,key){var value=getValue(object,key);return baseIsNative(value)?value:undefined;}module.exports=getNative;},4715:function(module,__unusedexports,__webpack_require__){var overArg=__webpack_require__(2456);var nativeKeys=overArg(Object.keys,Object);module.exports=nativeKeys;},4721:function(module,__unusedexports,__webpack_require__){"use strict";var BN=__webpack_require__(6122);var Point=__webpack_require__(9933);var Hash=__webpack_require__(2442);var JSUtil=__webpack_require__(8416);var Network=__webpack_require__(8368);var _=__webpack_require__(6064);var $=__webpack_require__(5107);function PublicKey(data,extra){if(!(this instanceof PublicKey)){return new PublicKey(data,extra);}$.checkArgument(data,'First argument is required, please include public key data.');if(data instanceof PublicKey){return data;}extra=extra||{};var info=this._classifyArgs(data,extra);info.point.validate();JSUtil.defineImmutable(this,{point:info.point,compressed:info.compressed,network:info.network||Network.defaultNetwork});return this;};PublicKey.prototype._classifyArgs=function(data,extra){var info={compressed:_.isUndefined(extra.compressed)||extra.compressed};if(data instanceof Point){info.point=data;}else if(data.x&&data.y){info=PublicKey._transformObject(data);}else if(typeof data==='string'){info=PublicKey._transformDER(new Buffer(data,'hex'));}else if(PublicKey._isBuffer(data)){info=PublicKey._transformDER(data);}else if(PublicKey._isPrivateKey(data)){info=PublicKey._transformPrivateKey(data);}else{throw new TypeError('First argument is an unrecognized data format.');}if(!info.network){info.network=_.isUndefined(extra.network)?undefined:Network.get(extra.network);}return info;};PublicKey._isPrivateKey=function(param){var PrivateKey=__webpack_require__(8322);return param instanceof PrivateKey;};PublicKey._isBuffer=function(param){return param instanceof Buffer||param instanceof Uint8Array;};PublicKey._transformPrivateKey=function(privkey){$.checkArgument(PublicKey._isPrivateKey(privkey),'Must be an instance of PrivateKey');var info={};info.point=Point.getG().mul(privkey.bn);info.compressed=privkey.compressed;info.network=privkey.network;return info;};PublicKey._transformDER=function(buf,strict){$.checkArgument(PublicKey._isBuffer(buf),'Must be a hex buffer of DER encoded public key');var info={};strict=_.isUndefined(strict)?true:strict;var x;var y;var xbuf;var ybuf;if(buf[0]===0x04||!strict&&(buf[0]===0x06||buf[0]===0x07)){xbuf=buf.slice(1,33);ybuf=buf.slice(33,65);if(xbuf.length!==32||ybuf.length!==32||buf.length!==65){throw new TypeError('Length of x and y must be 32 bytes');}x=new BN(xbuf);y=new BN(ybuf);info.point=new Point(x,y);info.compressed=false;}else if(buf[0]===0x03){xbuf=buf.slice(1);x=new BN(xbuf);info=PublicKey._transformX(true,x);info.compressed=true;}else if(buf[0]===0x02){xbuf=buf.slice(1);x=new BN(xbuf);info=PublicKey._transformX(false,x);info.compressed=true;}else{throw new TypeError('Invalid DER format public key');}return info;};PublicKey._transformX=function(odd,x){$.checkArgument(typeof odd==='boolean','Must specify whether y is odd or not (true or false)');var info={};info.point=Point.fromX(odd,x);return info;};PublicKey._transformObject=function(json){var x=new BN(json.x,'hex');var y=new BN(json.y,'hex');var point=new Point(x,y);return new PublicKey(point,{compressed:json.compressed});};PublicKey.fromPrivateKey=function(privkey){$.checkArgument(PublicKey._isPrivateKey(privkey),'Must be an instance of PrivateKey');var info=PublicKey._transformPrivateKey(privkey);return new PublicKey(info.point,{compressed:info.compressed,network:info.network});};PublicKey.fromDER=PublicKey.fromBuffer=function(buf,strict){$.checkArgument(PublicKey._isBuffer(buf),'Must be a hex buffer of DER encoded public key');var info=PublicKey._transformDER(buf,strict);return new PublicKey(info.point,{compressed:info.compressed});};PublicKey.fromPoint=function(point,compressed){$.checkArgument(point instanceof Point,'First argument must be an instance of Point.');return new PublicKey(point,{compressed:compressed});};PublicKey.fromString=function(str,encoding){var buf=new Buffer(str,encoding||'hex');var info=PublicKey._transformDER(buf);return new PublicKey(info.point,{compressed:info.compressed});};PublicKey.fromX=function(odd,x){var info=PublicKey._transformX(odd,x);return new PublicKey(info.point,{compressed:info.compressed});};PublicKey.getValidationError=function(data){var error;try{new PublicKey(data);}catch(e){error=e;}return error;};PublicKey.isValid=function(data){return!PublicKey.getValidationError(data);};PublicKey.prototype.toObject=PublicKey.prototype.toJSON=function toObject(){return{x:this.point.getX().toString('hex',2),y:this.point.getY().toString('hex',2),compressed:this.compressed};};PublicKey.prototype.toBuffer=PublicKey.prototype.toDER=function(){var x=this.point.getX();var y=this.point.getY();var xbuf=x.toBuffer({size:32});var ybuf=y.toBuffer({size:32});var prefix;if(!this.compressed){prefix=new Buffer([0x04]);return Buffer.concat([prefix,xbuf,ybuf]);}else{var odd=ybuf[ybuf.length-1]%2;if(odd){prefix=new Buffer([0x03]);}else{prefix=new Buffer([0x02]);}return Buffer.concat([prefix,xbuf]);}};PublicKey.prototype._getID=function _getID(){return Hash.sha256ripemd160(this.toBuffer());};PublicKey.prototype.toAddress=function(network){var Address=__webpack_require__(6593);return Address.fromPublicKey(this,network||this.network);};PublicKey.prototype.toString=function(){return this.toDER().toString('hex');};PublicKey.prototype.inspect=function(){return'<PublicKey: '+this.toString()+(this.compressed?'':', uncompressed')+'>';};module.exports=PublicKey;},4727:function(module){module.exports={"name":"byzantium","comment":"Hardfork with new precompiles, instructions and other protocol changes","eip":{"url":"https://eips.ethereum.org/EIPS/eip-609","status":"Final"},"gasConfig":{},"gasPrices":{"modexpGquaddivisor":{"v":20,"d":"Gquaddivisor from modexp precompile for gas calculation"},"ecAdd":{"v":500,"d":"Gas costs for curve addition precompile"},"ecMul":{"v":40000,"d":"Gas costs for curve multiplication precompile"},"ecPairing":{"v":100000,"d":"Base gas costs for curve pairing precompile"},"ecPairingWord":{"v":80000,"d":"Gas costs regarding curve pairing precompile input length"}},"vm":{},"pow":{"minerReward":{"v":"3000000000000000000","d":"the amount a miner get rewarded for mining a block"}},"casper":{},"sharding":{}};},4743:function(module){function getValue(object,key){return object==null?undefined:object[key];}module.exports=getValue;},4746:function(module,__unusedexports,__webpack_require__){"use strict";const fs=__webpack_require__(662);const Path=__webpack_require__(5897);const pull=__webpack_require__(2885);const glob=__webpack_require__(7618);const cat=__webpack_require__(6246);const defer=__webpack_require__(5213);const pushable=__webpack_require__(5995);const map=__webpack_require__(7011);const errCode=__webpack_require__(4999);module.exports=(...args)=>{const options=typeof args[args.length-1]==='string'?{}:args.pop();const paths=args;const deferred=defer.source();const globSourceOptions={recursive:options.recursive,glob:{dot:Boolean(options.hidden),ignore:Array.isArray(options.ignore)?options.ignore:[],follow:options.followSymlinks!=null?options.followSymlinks:true}};map(paths,pathAndType,(err,results)=>{if(err)return deferred.abort(err);try{const sources=results.map(res=>toGlobSource(res,globSourceOptions));deferred.resolve(cat(sources));}catch(err){deferred.abort(err);}});return pull(deferred,pull.map(({path,contentPath})=>({path,content:fs.createReadStream(contentPath)})));};function toGlobSource({path,type},options){options=options||{};const baseName=Path.basename(path);if(type==='file'){return pull.values([{path:baseName,contentPath:path}]);}if(type==='dir'&&!options.recursive){throw errCode(new Error(`'${path}' is a directory and recursive option not set`),'ERR_DIR_NON_RECURSIVE',{path});}const globOptions=Object.assign({},options.glob,{cwd:path,nodir:true,realpath:false,absolute:false});const pusher=pushable();glob('**/*',globOptions).on('match',m=>pusher.push(m)).on('end',()=>pusher.end()).on('abort',()=>pusher.end()).on('error',err=>pusher.end(err));return pull(pusher,pull.map(p=>({path:`${baseName}/${toPosix(p)}`,contentPath:Path.join(path,p)})));}function pathAndType(path,cb){fs.stat(path,(err,stat)=>{if(err)return cb(err);cb(null,{path,type:stat.isDirectory()?'dir':'file'});});}const toPosix=path=>path.replace(/\\/g,'/');},4749:function(module,__unusedexports,__webpack_require__){var isKeyable=__webpack_require__(3237);function getMapData(map,key){var data=map.__data__;return isKeyable(key)?data[typeof key=='string'?'string':'hash']:data.map;}module.exports=getMapData;},4770:function(module,__unusedexports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}var Buffer=__webpack_require__(7572).Buffer;var util=__webpack_require__(649);function copyBuffer(src,target,offset){src.copy(target,offset);}module.exports=function(){function BufferList(){_classCallCheck(this,BufferList);this.head=null;this.tail=null;this.length=0;}BufferList.prototype.push=function push(v){var entry={data:v,next:null};if(this.length>0)this.tail.next=entry;else this.head=entry;this.tail=entry;++this.length;};BufferList.prototype.unshift=function unshift(v){var entry={data:v,next:this.head};if(this.length===0)this.tail=entry;this.head=entry;++this.length;};BufferList.prototype.shift=function shift(){if(this.length===0)return;var ret=this.head.data;if(this.length===1)this.head=this.tail=null;else this.head=this.head.next;--this.length;return ret;};BufferList.prototype.clear=function clear(){this.head=this.tail=null;this.length=0;};BufferList.prototype.join=function join(s){if(this.length===0)return'';var p=this.head;var ret=''+p.data;while(p=p.next){ret+=s+p.data;}return ret;};BufferList.prototype.concat=function concat(n){if(this.length===0)return Buffer.alloc(0);if(this.length===1)return this.head.data;var ret=Buffer.allocUnsafe(n>>>0);var p=this.head;var i=0;while(p){copyBuffer(p.data,ret,i);i+=p.data.length;p=p.next;}return ret;};return BufferList;}();if(util&&util.inspect&&util.inspect.custom){module.exports.prototype[util.inspect.custom]=function(){var obj=util.inspect({length:this.length});return this.constructor.name+' '+obj;};}},4784:function(__unusedmodule,exports,__webpack_require__){"use strict";var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj;}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};var createKeccakHash=__webpack_require__(4354);var secp256k1=__webpack_require__(7291);var assert=__webpack_require__(3930);var rlp=__webpack_require__(6585);var BN=__webpack_require__(5584);var createHash=__webpack_require__(980);var Buffer=__webpack_require__(7572).Buffer;Object.assign(exports,__webpack_require__(3219));exports.MAX_INTEGER=new BN('ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff',16);exports.TWO_POW256=new BN('10000000000000000000000000000000000000000000000000000000000000000',16);exports.KECCAK256_NULL_S='c5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470';exports.SHA3_NULL_S=exports.KECCAK256_NULL_S;exports.KECCAK256_NULL=Buffer.from(exports.KECCAK256_NULL_S,'hex');exports.SHA3_NULL=exports.KECCAK256_NULL;exports.KECCAK256_RLP_ARRAY_S='1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347';exports.SHA3_RLP_ARRAY_S=exports.KECCAK256_RLP_ARRAY_S;exports.KECCAK256_RLP_ARRAY=Buffer.from(exports.KECCAK256_RLP_ARRAY_S,'hex');exports.SHA3_RLP_ARRAY=exports.KECCAK256_RLP_ARRAY;exports.KECCAK256_RLP_S='56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421';exports.SHA3_RLP_S=exports.KECCAK256_RLP_S;exports.KECCAK256_RLP=Buffer.from(exports.KECCAK256_RLP_S,'hex');exports.SHA3_RLP=exports.KECCAK256_RLP;exports.BN=BN;exports.rlp=rlp;exports.secp256k1=secp256k1;exports.zeros=function(bytes){return Buffer.allocUnsafe(bytes).fill(0);};exports.zeroAddress=function(){var addressLength=20;var zeroAddress=exports.zeros(addressLength);return exports.bufferToHex(zeroAddress);};exports.setLengthLeft=exports.setLength=function(msg,length,right){var buf=exports.zeros(length);msg=exports.toBuffer(msg);if(right){if(msg.length<length){msg.copy(buf);return buf;}return msg.slice(0,length);}else{if(msg.length<length){msg.copy(buf,length-msg.length);return buf;}return msg.slice(-length);}};exports.setLengthRight=function(msg,length){return exports.setLength(msg,length,true);};exports.unpad=exports.stripZeros=function(a){a=exports.stripHexPrefix(a);var first=a[0];while(a.length>0&&first.toString()==='0'){a=a.slice(1);first=a[0];}return a;};exports.toBuffer=function(v){if(!Buffer.isBuffer(v)){if(Array.isArray(v)){v=Buffer.from(v);}else if(typeof v==='string'){if(exports.isHexString(v)){v=Buffer.from(exports.padToEven(exports.stripHexPrefix(v)),'hex');}else{v=Buffer.from(v);}}else if(typeof v==='number'){v=exports.intToBuffer(v);}else if(v===null||v===undefined){v=Buffer.allocUnsafe(0);}else if(BN.isBN(v)){v=v.toArrayLike(Buffer);}else if(v.toArray){v=Buffer.from(v.toArray());}else{throw new Error('invalid type');}}return v;};exports.bufferToInt=function(buf){return new BN(exports.toBuffer(buf)).toNumber();};exports.bufferToHex=function(buf){buf=exports.toBuffer(buf);return'0x'+buf.toString('hex');};exports.fromSigned=function(num){return new BN(num).fromTwos(256);};exports.toUnsigned=function(num){return Buffer.from(num.toTwos(256).toArray());};exports.keccak=function(a,bits){a=exports.toBuffer(a);if(!bits)bits=256;return createKeccakHash('keccak'+bits).update(a).digest();};exports.keccak256=function(a){return exports.keccak(a);};exports.sha3=exports.keccak;exports.sha256=function(a){a=exports.toBuffer(a);return createHash('sha256').update(a).digest();};exports.ripemd160=function(a,padded){a=exports.toBuffer(a);var hash=createHash('rmd160').update(a).digest();if(padded===true){return exports.setLength(hash,32);}else{return hash;}};exports.rlphash=function(a){return exports.keccak(rlp.encode(a));};exports.isValidPrivate=function(privateKey){return secp256k1.privateKeyVerify(privateKey);};exports.isValidPublic=function(publicKey,sanitize){if(publicKey.length===64){return secp256k1.publicKeyVerify(Buffer.concat([Buffer.from([4]),publicKey]));}if(!sanitize){return false;}return secp256k1.publicKeyVerify(publicKey);};exports.pubToAddress=exports.publicToAddress=function(pubKey,sanitize){pubKey=exports.toBuffer(pubKey);if(sanitize&&pubKey.length!==64){pubKey=secp256k1.publicKeyConvert(pubKey,false).slice(1);}assert(pubKey.length===64);return exports.keccak(pubKey).slice(-20);};var privateToPublic=exports.privateToPublic=function(privateKey){privateKey=exports.toBuffer(privateKey);return secp256k1.publicKeyCreate(privateKey,false).slice(1);};exports.importPublic=function(publicKey){publicKey=exports.toBuffer(publicKey);if(publicKey.length!==64){publicKey=secp256k1.publicKeyConvert(publicKey,false).slice(1);}return publicKey;};exports.ecsign=function(msgHash,privateKey){var sig=secp256k1.sign(msgHash,privateKey);var ret={};ret.r=sig.signature.slice(0,32);ret.s=sig.signature.slice(32,64);ret.v=sig.recovery+27;return ret;};exports.hashPersonalMessage=function(message){var prefix=exports.toBuffer('\x19Ethereum Signed Message:\n'+message.length.toString());return exports.keccak(Buffer.concat([prefix,message]));};exports.ecrecover=function(msgHash,v,r,s){var signature=Buffer.concat([exports.setLength(r,32),exports.setLength(s,32)],64);var recovery=v-27;if(recovery!==0&&recovery!==1){throw new Error('Invalid signature v value');}var senderPubKey=secp256k1.recover(msgHash,signature,recovery);return secp256k1.publicKeyConvert(senderPubKey,false).slice(1);};exports.toRpcSig=function(v,r,s){if(v!==27&&v!==28){throw new Error('Invalid recovery id');}return exports.bufferToHex(Buffer.concat([exports.setLengthLeft(r,32),exports.setLengthLeft(s,32),exports.toBuffer(v-27)]));};exports.fromRpcSig=function(sig){sig=exports.toBuffer(sig);if(sig.length!==65){throw new Error('Invalid signature length');}var v=sig[64];if(v<27){v+=27;}return{v:v,r:sig.slice(0,32),s:sig.slice(32,64)};};exports.privateToAddress=function(privateKey){return exports.publicToAddress(privateToPublic(privateKey));};exports.isValidAddress=function(address){return /^0x[0-9a-fA-F]{40}$/.test(address);};exports.isZeroAddress=function(address){var zeroAddress=exports.zeroAddress();return zeroAddress===exports.addHexPrefix(address);};exports.toChecksumAddress=function(address){address=exports.stripHexPrefix(address).toLowerCase();var hash=exports.keccak(address).toString('hex');var ret='0x';for(var i=0;i<address.length;i++){if(parseInt(hash[i],16)>=8){ret+=address[i].toUpperCase();}else{ret+=address[i];}}return ret;};exports.isValidChecksumAddress=function(address){return exports.isValidAddress(address)&&exports.toChecksumAddress(address)===address;};exports.generateAddress=function(from,nonce){from=exports.toBuffer(from);nonce=new BN(nonce);if(nonce.isZero()){nonce=null;}else{nonce=Buffer.from(nonce.toArray());}return exports.rlphash([from,nonce]).slice(-20);};exports.isPrecompiled=function(address){var a=exports.unpad(address);return a.length===1&&a[0]>=1&&a[0]<=8;};exports.addHexPrefix=function(str){if(typeof str!=='string'){return str;}return exports.isHexPrefixed(str)?str:'0x'+str;};exports.isValidSignature=function(v,r,s,homestead){var SECP256K1_N_DIV_2=new BN('7fffffffffffffffffffffffffffffff5d576e7357a4501ddfe92f46681b20a0',16);var SECP256K1_N=new BN('fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141',16);if(r.length!==32||s.length!==32){return false;}if(v!==27&&v!==28){return false;}r=new BN(r);s=new BN(s);if(r.isZero()||r.gt(SECP256K1_N)||s.isZero()||s.gt(SECP256K1_N)){return false;}if(homestead===false&&new BN(s).cmp(SECP256K1_N_DIV_2)===1){return false;}return true;};exports.baToJSON=function(ba){if(Buffer.isBuffer(ba)){return'0x'+ba.toString('hex');}else if(ba instanceof Array){var array=[];for(var i=0;i<ba.length;i++){array.push(exports.baToJSON(ba[i]));}return array;}};exports.defineProperties=function(self,fields,data){self.raw=[];self._fields=[];self.toJSON=function(label){if(label){var obj={};self._fields.forEach(function(field){obj[field]='0x'+self[field].toString('hex');});return obj;}return exports.baToJSON(this.raw);};self.serialize=function serialize(){return rlp.encode(self.raw);};fields.forEach(function(field,i){self._fields.push(field.name);function getter(){return self.raw[i];}function setter(v){v=exports.toBuffer(v);if(v.toString('hex')==='00'&&!field.allowZero){v=Buffer.allocUnsafe(0);}if(field.allowLess&&field.length){v=exports.stripZeros(v);assert(field.length>=v.length,'The field '+field.name+' must not have more '+field.length+' bytes');}else if(!(field.allowZero&&v.length===0)&&field.length){assert(field.length===v.length,'The field '+field.name+' must have byte length of '+field.length);}self.raw[i]=v;}Object.defineProperty(self,field.name,{enumerable:true,configurable:true,get:getter,set:setter});if(field.default){self[field.name]=field.default;}if(field.alias){Object.defineProperty(self,field.alias,{enumerable:false,configurable:true,set:setter,get:getter});}});if(data){if(typeof data==='string'){data=Buffer.from(exports.stripHexPrefix(data),'hex');}if(Buffer.isBuffer(data)){data=rlp.decode(data);}if(Array.isArray(data)){if(data.length>self._fields.length){throw new Error('wrong number of fields in data');}data.forEach(function(d,i){self[self._fields[i]]=exports.toBuffer(d);});}else if((typeof data==='undefined'?'undefined':_typeof(data))==='object'){var keys=Object.keys(data);fields.forEach(function(field){if(keys.indexOf(field.name)!==-1)self[field.name]=data[field.name];if(keys.indexOf(field.alias)!==-1)self[field.alias]=data[field.alias];});}else{throw new Error('invalid data');}}};},4787:function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=_findGetResult;function _findGetResult(v,x){return x;}module.exports=exports["default"];},4797:function(module){var toString={}.toString;module.exports=Array.isArray||function(arr){return toString.call(arr)=='[object Array]';};},4801:function(module,__unusedexports,__webpack_require__){"use strict";const Connection=__webpack_require__(378).Connection;const multiaddr=__webpack_require__(5920);const os=__webpack_require__(4316);function noop(){}const createServer=__webpack_require__(7301)||noop;module.exports=(options,handler)=>{const listener=createServer(options,socket=>{socket.getObservedAddrs=callback=>{return callback(null,[]);};handler(new Connection(socket));});let listeningMultiaddr;listener._listen=listener.listen;listener.listen=(ma,callback)=>{callback=callback||noop;listeningMultiaddr=ma;if(ma.protoNames().includes('ipfs')){ma=ma.decapsulate('ipfs');}listener._listen(ma.toOptions(),callback);};listener.getAddrs=callback=>{const multiaddrs=[];const address=listener.address();if(!address){return callback(new Error('Listener is not ready yet'));}let ipfsId=listeningMultiaddr.getPeerId();if(listeningMultiaddr.toString().indexOf('ip4')!==-1){let m=listeningMultiaddr.decapsulate('tcp');m=m.encapsulate('/tcp/'+address.port+'/ws');if(listeningMultiaddr.getPeerId()){m=m.encapsulate('/ipfs/'+ipfsId);}if(m.toString().indexOf('0.0.0.0')!==-1){const netInterfaces=os.networkInterfaces();Object.keys(netInterfaces).forEach(niKey=>{netInterfaces[niKey].forEach(ni=>{if(ni.family==='IPv4'){multiaddrs.push(multiaddr(m.toString().replace('0.0.0.0',ni.address)));}});});}else{multiaddrs.push(m);}}callback(null,multiaddrs);};return listener;};},4805:function(module){var s=1000;var m=s*60;var h=m*60;var d=h*24;var y=d*365.25;module.exports=function(val,options){options=options||{};var type=typeof val;if(type==='string'&&val.length>0){return parse(val);}else if(type==='number'&&isNaN(val)===false){return options.long?fmtLong(val):fmtShort(val);}throw new Error('val is not a non-empty string or a valid number. val='+JSON.stringify(val));};function parse(str){str=String(str);if(str.length>100){return;}var match=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(str);if(!match){return;}var n=parseFloat(match[1]);var type=(match[2]||'ms').toLowerCase();switch(type){case'years':case'year':case'yrs':case'yr':case'y':return n*y;case'days':case'day':case'd':return n*d;case'hours':case'hour':case'hrs':case'hr':case'h':return n*h;case'minutes':case'minute':case'mins':case'min':case'm':return n*m;case'seconds':case'second':case'secs':case'sec':case's':return n*s;case'milliseconds':case'millisecond':case'msecs':case'msec':case'ms':return n;default:return undefined;}}function fmtShort(ms){if(ms>=d){return Math.round(ms/d)+'d';}if(ms>=h){return Math.round(ms/h)+'h';}if(ms>=m){return Math.round(ms/m)+'m';}if(ms>=s){return Math.round(ms/s)+'s';}return ms+'ms';}function fmtLong(ms){return plural(ms,d,'day')||plural(ms,h,'hour')||plural(ms,m,'minute')||plural(ms,s,'second')||ms+' ms';}function plural(ms,n,name){if(ms<n){return;}if(ms<n*1.5){return Math.floor(ms/n)+' '+name;}return Math.ceil(ms/n)+' '+name+'s';}},4821:function(module,__unusedexports,__webpack_require__){var NATIVE=__webpack_require__(7819);var ERRORS=__webpack_require__(8605);function _Buffer(value){return Buffer.isBuffer(value);}function Hex(value){return typeof value==='string'&&/^([0-9a-f]{2})+$/i.test(value);}function _LengthN(type,length){var name=type.toJSON();function Length(value){if(!type(value))return false;if(value.length===length)return true;throw ERRORS.tfCustomError(name+'(Length: '+length+')',name+'(Length: '+value.length+')');}Length.toJSON=function(){return name;};return Length;}var _ArrayN=_LengthN.bind(null,NATIVE.Array);var _BufferN=_LengthN.bind(null,_Buffer);var _HexN=_LengthN.bind(null,Hex);var _StringN=_LengthN.bind(null,NATIVE.String);function Range(a,b,f){f=f||NATIVE.Number;function _range(value,strict){return f(value,strict)&&value>a&&value<b;}_range.toJSON=function(){return`${f.toJSON()} between [${a}, ${b}]`;};return _range;}var INT53_MAX=Math.pow(2,53)-1;function Finite(value){return typeof value==='number'&&isFinite(value);}function Int8(value){return value<<24>>24===value;}function Int16(value){return value<<16>>16===value;}function Int32(value){return(value|0)===value;}function Int53(value){return typeof value==='number'&&value>=-INT53_MAX&&value<=INT53_MAX&&Math.floor(value)===value;}function UInt8(value){return(value&0xff)===value;}function UInt16(value){return(value&0xffff)===value;}function UInt32(value){return value>>>0===value;}function UInt53(value){return typeof value==='number'&&value>=0&&value<=INT53_MAX&&Math.floor(value)===value;}var types={ArrayN:_ArrayN,Buffer:_Buffer,BufferN:_BufferN,Finite:Finite,Hex:Hex,HexN:_HexN,Int8:Int8,Int16:Int16,Int32:Int32,Int53:Int53,Range:Range,StringN:_StringN,UInt8:UInt8,UInt16:UInt16,UInt32:UInt32,UInt53:UInt53};for(var typeName in types){types[typeName].toJSON=function(t){return t;}.bind(null,typeName);}module.exports=types;},4831:function(module,exports,__webpack_require__){"use strict";const SmartBuffer=__webpack_require__(1190).SmartBuffer;const multihashes=__webpack_require__(7419);const multicodecs=__webpack_require__(4912);const multihash=__webpack_require__(8757);const CID=__webpack_require__(9339);exports=module.exports;exports.SHA1_LENGTH=multihashes.defaultLengths[multihashes.names.sha1];exports.find=(buf,byte)=>{for(let i=0;i<buf.length;i++){if(buf[i]===byte){return i;}}return-1;};exports.parsePersonLine=line=>{let matched=line.match(/^(([^<]+)\s)?\s?<([^>]+)>\s?(\d+\s[+\-\d]+)?$/);if(matched===null){return null;}return{name:matched[2],email:matched[3],date:matched[4]};};exports.serializePersonLine=node=>{let parts=[];if(node.name){parts.push(node.name);}parts.push('<'+node.email+'>');if(node.date){parts.push(node.date);}return parts.join(' ');};exports.shaToCid=buf=>{let mhashBuf=new SmartBuffer();mhashBuf.writeUInt8(1);mhashBuf.writeBuffer(multicodecs['git-raw']);mhashBuf.writeUInt8(multihashes.names.sha1);mhashBuf.writeUInt8(exports.SHA1_LENGTH);mhashBuf.writeBuffer(buf);return mhashBuf.toBuffer();};exports.cidToSha=cidBuf=>{let mh=multihash.decode(new CID(cidBuf).multihash);if(mh.name!=='sha1'){return null;}return mh.digest;};},4832:function(__unusedmodule,exports,__webpack_require__){"use strict";const crypto=__webpack_require__(2984);const nextTick=__webpack_require__(7173);const curves={'P-256':'prime256v1','P-384':'secp384r1','P-521':'secp521r1'};exports.generateEphmeralKeyPair=function(curve,callback){if(!curves[curve]){return callback(new Error(`Unkown curve: ${curve}`));}const ecdh=crypto.createECDH(curves[curve]);ecdh.generateKeys();nextTick(()=>callback(null,{key:ecdh.getPublicKey(),genSharedKey(theirPub,forcePrivate,cb){if(typeof forcePrivate==='function'){cb=forcePrivate;forcePrivate=null;}if(forcePrivate){ecdh.setPrivateKey(forcePrivate.private);}let secret;try{secret=ecdh.computeSecret(theirPub);}catch(err){return cb(err);}nextTick(()=>cb(null,secret));}}));};},4840:function(module){module.exports=isExternalLink;function isExternalLink(obj){return Boolean(obj['/']);}},4846:function(module,exports,__webpack_require__){"use strict";const setImmediate=__webpack_require__(7368);const SmartBuffer=__webpack_require__(1190).SmartBuffer;const gitUtil=__webpack_require__(4831);exports=module.exports;exports.serialize=(dagNode,callback)=>{let lines=[];lines.push('object '+gitUtil.cidToSha(dagNode.object['/']).toString('hex'));lines.push('type '+dagNode.type);lines.push('tag '+dagNode.tag);if(dagNode.tagger!==null){lines.push('tagger '+gitUtil.serializePersonLine(dagNode.tagger));}lines.push('');lines.push(dagNode.message);let data=lines.join('\n');let outBuf=new SmartBuffer();outBuf.writeString('tag ');outBuf.writeString(data.length.toString());outBuf.writeUInt8(0);outBuf.writeString(data);setImmediate(()=>callback(null,outBuf.toBuffer()));};exports.deserialize=(data,callback)=>{let lines=data.toString().split('\n');let res={gitType:'tag'};for(let line=0;line<lines.length;line++){let m=lines[line].match(/^([^ ]+) (.+)$/);if(m===null){if(lines[line]!==''){setImmediate(()=>callback(new Error('Invalid tag line '+line)));}res.message=lines.slice(line+1).join('\n');break;}let key=m[1];let value=m[2];switch(key){case'object':res.object={'/':gitUtil.shaToCid(Buffer.from(value,'hex'))};break;case'tagger':res.tagger=gitUtil.parsePersonLine(value);break;case'tag':res.tag=value;break;case'type':res.type=value;break;default:res[key]=value;}}setImmediate(()=>callback(null,res));};},4855:function(module,__unusedexports,__webpack_require__){"use strict";var bufferUtil;try{bufferUtil=__webpack_require__(1277);}catch(e){bufferUtil=__webpack_require__(4652);}module.exports=bufferUtil.BufferUtil||bufferUtil;},4857:function(__unusedmodule,exports){"use strict";exports.NOT_STARTED_YET='The libp2p node is not started yet';},4859:function(module){module.exports=require("events");},4863:function(module,__unusedexports,__webpack_require__){function setup(env){createDebug.debug=createDebug;createDebug.default=createDebug;createDebug.coerce=coerce;createDebug.disable=disable;createDebug.enable=enable;createDebug.enabled=enabled;createDebug.humanize=__webpack_require__(9934);Object.keys(env).forEach(key=>{createDebug[key]=env[key];});createDebug.instances=[];createDebug.names=[];createDebug.skips=[];createDebug.formatters={};function selectColor(namespace){let hash=0;for(let i=0;i<namespace.length;i++){hash=(hash<<5)-hash+namespace.charCodeAt(i);hash|=0;}return createDebug.colors[Math.abs(hash)%createDebug.colors.length];}createDebug.selectColor=selectColor;function createDebug(namespace){let prevTime;function debug(...args){if(!debug.enabled){return;}const self=debug;const curr=Number(new Date());const ms=curr-(prevTime||curr);self.diff=ms;self.prev=prevTime;self.curr=curr;prevTime=curr;args[0]=createDebug.coerce(args[0]);if(typeof args[0]!=='string'){args.unshift('%O');}let index=0;args[0]=args[0].replace(/%([a-zA-Z%])/g,(match,format)=>{if(match==='%%'){return match;}index++;const formatter=createDebug.formatters[format];if(typeof formatter==='function'){const val=args[index];match=formatter.call(self,val);args.splice(index,1);index--;}return match;});createDebug.formatArgs.call(self,args);const logFn=self.log||createDebug.log;logFn.apply(self,args);}debug.namespace=namespace;debug.enabled=createDebug.enabled(namespace);debug.useColors=createDebug.useColors();debug.color=selectColor(namespace);debug.destroy=destroy;debug.extend=extend;if(typeof createDebug.init==='function'){createDebug.init(debug);}createDebug.instances.push(debug);return debug;}function destroy(){const index=createDebug.instances.indexOf(this);if(index!==-1){createDebug.instances.splice(index,1);return true;}return false;}function extend(namespace,delimiter){const newDebug=createDebug(this.namespace+(typeof delimiter==='undefined'?':':delimiter)+namespace);newDebug.log=this.log;return newDebug;}function enable(namespaces){createDebug.save(namespaces);createDebug.names=[];createDebug.skips=[];let i;const split=(typeof namespaces==='string'?namespaces:'').split(/[\s,]+/);const len=split.length;for(i=0;i<len;i++){if(!split[i]){continue;}namespaces=split[i].replace(/\*/g,'.*?');if(namespaces[0]==='-'){createDebug.skips.push(new RegExp('^'+namespaces.substr(1)+'$'));}else{createDebug.names.push(new RegExp('^'+namespaces+'$'));}}for(i=0;i<createDebug.instances.length;i++){const instance=createDebug.instances[i];instance.enabled=createDebug.enabled(instance.namespace);}}function disable(){const namespaces=[...createDebug.names.map(toNamespace),...createDebug.skips.map(toNamespace).map(namespace=>'-'+namespace)].join(',');createDebug.enable('');return namespaces;}function enabled(name){if(name[name.length-1]==='*'){return true;}let i;let len;for(i=0,len=createDebug.skips.length;i<len;i++){if(createDebug.skips[i].test(name)){return false;}}for(i=0,len=createDebug.names.length;i<len;i++){if(createDebug.names[i].test(name)){return true;}}return false;}function toNamespace(regexp){return regexp.toString().substring(2,regexp.toString().length-2).replace(/\.\*\?$/,'*');}function coerce(val){if(val instanceof Error){return val.stack||val.message;}return val;}createDebug.enable(createDebug.load());return createDebug;}module.exports=setup;},4876:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=parallelLimit;var _eachOf=__webpack_require__(5066);var _eachOf2=_interopRequireDefault(_eachOf);var _parallel=__webpack_require__(177);var _parallel2=_interopRequireDefault(_parallel);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function parallelLimit(tasks,callback){(0,_parallel2.default)(_eachOf2.default,tasks,callback);}module.exports=exports['default'];},4879:function(module){var freeGlobal=typeof global=='object'&&global&&global.Object===Object&&global;module.exports=freeGlobal;},4903:function(module,__unusedexports,__webpack_require__){"use strict";var _=__webpack_require__(6064);var URL=__webpack_require__(774);var Address=__webpack_require__(6593);var Unit=__webpack_require__(1045);var URI=function(data,knownParams){if(!(this instanceof URI)){return new URI(data,knownParams);}this.extras={};this.knownParams=knownParams||[];this.address=this.network=this.amount=this.message=null;if(typeof data==='string'){var params=URI.parse(data);if(params.amount){params.amount=this._parseAmount(params.amount);}this._fromObject(params);}else if(typeof data==='object'){this._fromObject(data);}else{throw new TypeError('Unrecognized data format.');}};URI.fromString=function fromString(str){if(typeof str!=='string'){throw new TypeError('Expected a string');}return new URI(str);};URI.fromObject=function fromObject(json){return new URI(json);};URI.isValid=function(arg,knownParams){try{new URI(arg,knownParams);}catch(err){return false;}return true;};URI.parse=function(uri){var info=URL.parse(uri,true);if(info.protocol!=='zcash:'){throw new TypeError('Invalid zcash URI');}var group=/[^:]*:\/?\/?([^?]*)/.exec(uri);info.query.address=group&&group[1]||undefined;return info.query;};URI.Members=['address','amount','message','label','r'];URI.prototype._fromObject=function(obj){if(!Address.isValid(obj.address)){throw new TypeError('Invalid zcash address');}this.address=new Address(obj.address);this.network=this.address.network;this.amount=obj.amount;for(var key in obj){if(key==='address'||key==='amount'){continue;}if(/^req-/.exec(key)&&this.knownParams.indexOf(key)===-1){throw Error('Unknown required argument '+key);}var destination=URI.Members.indexOf(key)>-1?this:this.extras;destination[key]=obj[key];}};URI.prototype._parseAmount=function(amount){amount=Number(amount);if(isNaN(amount)){throw new TypeError('Invalid amount');}return Unit.fromBTC(amount).toSatoshis();};URI.prototype.toObject=URI.prototype.toJSON=function toObject(){var json={};for(var i=0;i<URI.Members.length;i++){var m=URI.Members[i];if(this.hasOwnProperty(m)&&typeof this[m]!=='undefined'){json[m]=this[m].toString();}}_.extend(json,this.extras);return json;};URI.prototype.toString=function(){var query={};if(this.amount){query.amount=Unit.fromSatoshis(this.amount).toBTC();}if(this.message){query.message=this.message;}if(this.label){query.label=this.label;}if(this.r){query.r=this.r;}_.extend(query,this.extras);return URL.format({protocol:'zcash:',host:this.address,query:query});};URI.prototype.inspect=function(){return'<URI: '+this.toString()+'>';};module.exports=URI;},4906:function(module,__unusedexports,__webpack_require__){var stream=__webpack_require__(4991);var util=__webpack_require__(649);var rabin=require(__dirname+'//build/Release/rabin.node');var BufferList=__webpack_require__(9836);var debug=__webpack_require__(5254)('rabin');module.exports=Rabin;function Rabin(opts){if(!(this instanceof Rabin))return new Rabin(opts);if(!opts)opts={};stream.Duplex.call(this);this._readableState.highWaterMark=16;this._readableState.objectMode=true;this.destroyed=false;var avgBits=+opts.bits||12;var min=+opts.min||8*1024;var max=+opts.max||32*1024;this.rabin=rabin.rabin();this.rabin.configure(avgBits,min,max);this.nextCb=null;this.buffers=new BufferList();this.pending=[];this.on('finish',this._finish);}util.inherits(Rabin,stream.Duplex);Rabin.prototype._finish=function(){if(this.destroyed)return;if(this.buffers.length)this.push(this.buffers.slice(0,this.buffers.length));this.push(null);};Rabin.prototype._writev=function(batch,cb){if(this.destroyed)return cb();for(var i=0;i<batch.length;i++){this.buffers.append(batch[i].chunk);this.pending.push(batch[i].chunk);}this._process(cb);};Rabin.prototype._read=function(size){var nextCb=this.nextCb;if(nextCb){this.nextCb=null;nextCb();}};Rabin.prototype._write=function(data,enc,cb){if(this.destroyed)return cb();this.buffers.append(data);this.pending.push(data);this._process(cb);};Rabin.prototype._process=function(cb){var drained=true;var sizes=[];this.rabin.fingerprint(this.pending,sizes);this.pending=[];debug('chunks',sizes);for(var i=0;i<sizes.length;i++){var size=sizes[i];var buf=this.buffers.slice(0,size);this.buffers.consume(size);drained=this.push(buf);}if(drained)cb();else this.nextCb=cb;};Rabin.prototype.destroy=function(err){if(this.destroyed)return;this.destroyed=true;if(err)this.emit('error',err);this.emit('close');};},4910:function(module,__unusedexports,__webpack_require__){var parser=__webpack_require__(5410);var Emitter=__webpack_require__(3649);module.exports=Transport;function Transport(opts){this.path=opts.path;this.hostname=opts.hostname;this.port=opts.port;this.secure=opts.secure;this.query=opts.query;this.timestampParam=opts.timestampParam;this.timestampRequests=opts.timestampRequests;this.readyState='';this.agent=opts.agent||false;this.socket=opts.socket;this.enablesXDR=opts.enablesXDR;this.pfx=opts.pfx;this.key=opts.key;this.passphrase=opts.passphrase;this.cert=opts.cert;this.ca=opts.ca;this.ciphers=opts.ciphers;this.rejectUnauthorized=opts.rejectUnauthorized;this.forceNode=opts.forceNode;this.isReactNative=opts.isReactNative;this.extraHeaders=opts.extraHeaders;this.localAddress=opts.localAddress;}Emitter(Transport.prototype);Transport.prototype.onError=function(msg,desc){var err=new Error(msg);err.type='TransportError';err.description=desc;this.emit('error',err);return this;};Transport.prototype.open=function(){if('closed'===this.readyState||''===this.readyState){this.readyState='opening';this.doOpen();}return this;};Transport.prototype.close=function(){if('opening'===this.readyState||'open'===this.readyState){this.doClose();this.onClose();}return this;};Transport.prototype.send=function(packets){if('open'===this.readyState){this.write(packets);}else{throw new Error('Transport not open');}};Transport.prototype.onOpen=function(){this.readyState='open';this.writable=true;this.emit('open');};Transport.prototype.onData=function(data){var packet=parser.decodePacket(data,this.socket.binaryType);this.onPacket(packet);};Transport.prototype.onPacket=function(packet){this.emit('packet',packet);};Transport.prototype.onClose=function(){this.readyState='closed';this.emit('close');};},4912:function(__unusedmodule,exports){"use strict";exports['raw']=Buffer.from('55','hex');exports['cbor']=Buffer.from('51','hex');exports['protobuf']=Buffer.from('50','hex');exports['rlp']=Buffer.from('60','hex');exports['bencode']=Buffer.from('63','hex');exports['multicodec']=Buffer.from('30','hex');exports['multihash']=Buffer.from('31','hex');exports['multiaddr']=Buffer.from('32','hex');exports['multibase']=Buffer.from('33','hex');exports['identity']=Buffer.from('00','hex');exports['md4']=Buffer.from('d4','hex');exports['md5']=Buffer.from('d5','hex');exports['sha1']=Buffer.from('11','hex');exports['sha2-256']=Buffer.from('12','hex');exports['sha2-512']=Buffer.from('13','hex');exports['dbl-sha2-256']=Buffer.from('56','hex');exports['sha3-224']=Buffer.from('17','hex');exports['sha3-256']=Buffer.from('16','hex');exports['sha3-384']=Buffer.from('15','hex');exports['sha3-512']=Buffer.from('14','hex');exports['shake-128']=Buffer.from('18','hex');exports['shake-256']=Buffer.from('19','hex');exports['keccak-224']=Buffer.from('1a','hex');exports['keccak-256']=Buffer.from('1b','hex');exports['keccak-384']=Buffer.from('1c','hex');exports['keccak-512']=Buffer.from('1d','hex');exports['murmur3-128']=Buffer.from('22','hex');exports['murmur3-32']=Buffer.from('23','hex');exports['x11']=Buffer.from('1100','hex');exports['blake2b-8']=Buffer.from('b201','hex');exports['blake2b-16']=Buffer.from('b202','hex');exports['blake2b-24']=Buffer.from('b203','hex');exports['blake2b-32']=Buffer.from('b204','hex');exports['blake2b-40']=Buffer.from('b205','hex');exports['blake2b-48']=Buffer.from('b206','hex');exports['blake2b-56']=Buffer.from('b207','hex');exports['blake2b-64']=Buffer.from('b208','hex');exports['blake2b-72']=Buffer.from('b209','hex');exports['blake2b-80']=Buffer.from('b20a','hex');exports['blake2b-88']=Buffer.from('b20b','hex');exports['blake2b-96']=Buffer.from('b20c','hex');exports['blake2b-104']=Buffer.from('b20d','hex');exports['blake2b-112']=Buffer.from('b20e','hex');exports['blake2b-120']=Buffer.from('b20f','hex');exports['blake2b-128']=Buffer.from('b210','hex');exports['blake2b-136']=Buffer.from('b211','hex');exports['blake2b-144']=Buffer.from('b212','hex');exports['blake2b-152']=Buffer.from('b213','hex');exports['blake2b-160']=Buffer.from('b214','hex');exports['blake2b-168']=Buffer.from('b215','hex');exports['blake2b-176']=Buffer.from('b216','hex');exports['blake2b-184']=Buffer.from('b217','hex');exports['blake2b-192']=Buffer.from('b218','hex');exports['blake2b-200']=Buffer.from('b219','hex');exports['blake2b-208']=Buffer.from('b21a','hex');exports['blake2b-216']=Buffer.from('b21b','hex');exports['blake2b-224']=Buffer.from('b21c','hex');exports['blake2b-232']=Buffer.from('b21d','hex');exports['blake2b-240']=Buffer.from('b21e','hex');exports['blake2b-248']=Buffer.from('b21f','hex');exports['blake2b-256']=Buffer.from('b220','hex');exports['blake2b-264']=Buffer.from('b221','hex');exports['blake2b-272']=Buffer.from('b222','hex');exports['blake2b-280']=Buffer.from('b223','hex');exports['blake2b-288']=Buffer.from('b224','hex');exports['blake2b-296']=Buffer.from('b225','hex');exports['blake2b-304']=Buffer.from('b226','hex');exports['blake2b-312']=Buffer.from('b227','hex');exports['blake2b-320']=Buffer.from('b228','hex');exports['blake2b-328']=Buffer.from('b229','hex');exports['blake2b-336']=Buffer.from('b22a','hex');exports['blake2b-344']=Buffer.from('b22b','hex');exports['blake2b-352']=Buffer.from('b22c','hex');exports['blake2b-360']=Buffer.from('b22d','hex');exports['blake2b-368']=Buffer.from('b22e','hex');exports['blake2b-376']=Buffer.from('b22f','hex');exports['blake2b-384']=Buffer.from('b230','hex');exports['blake2b-392']=Buffer.from('b231','hex');exports['blake2b-400']=Buffer.from('b232','hex');exports['blake2b-408']=Buffer.from('b233','hex');exports['blake2b-416']=Buffer.from('b234','hex');exports['blake2b-424']=Buffer.from('b235','hex');exports['blake2b-432']=Buffer.from('b236','hex');exports['blake2b-440']=Buffer.from('b237','hex');exports['blake2b-448']=Buffer.from('b238','hex');exports['blake2b-456']=Buffer.from('b239','hex');exports['blake2b-464']=Buffer.from('b23a','hex');exports['blake2b-472']=Buffer.from('b23b','hex');exports['blake2b-480']=Buffer.from('b23c','hex');exports['blake2b-488']=Buffer.from('b23d','hex');exports['blake2b-496']=Buffer.from('b23e','hex');exports['blake2b-504']=Buffer.from('b23f','hex');exports['blake2b-512']=Buffer.from('b240','hex');exports['blake2s-8']=Buffer.from('b241','hex');exports['blake2s-16']=Buffer.from('b242','hex');exports['blake2s-24']=Buffer.from('b243','hex');exports['blake2s-32']=Buffer.from('b244','hex');exports['blake2s-40']=Buffer.from('b245','hex');exports['blake2s-48']=Buffer.from('b246','hex');exports['blake2s-56']=Buffer.from('b247','hex');exports['blake2s-64']=Buffer.from('b248','hex');exports['blake2s-72']=Buffer.from('b249','hex');exports['blake2s-80']=Buffer.from('b24a','hex');exports['blake2s-88']=Buffer.from('b24b','hex');exports['blake2s-96']=Buffer.from('b24c','hex');exports['blake2s-104']=Buffer.from('b24d','hex');exports['blake2s-112']=Buffer.from('b24e','hex');exports['blake2s-120']=Buffer.from('b24f','hex');exports['blake2s-128']=Buffer.from('b250','hex');exports['blake2s-136']=Buffer.from('b251','hex');exports['blake2s-144']=Buffer.from('b252','hex');exports['blake2s-152']=Buffer.from('b253','hex');exports['blake2s-160']=Buffer.from('b254','hex');exports['blake2s-168']=Buffer.from('b255','hex');exports['blake2s-176']=Buffer.from('b256','hex');exports['blake2s-184']=Buffer.from('b257','hex');exports['blake2s-192']=Buffer.from('b258','hex');exports['blake2s-200']=Buffer.from('b259','hex');exports['blake2s-208']=Buffer.from('b25a','hex');exports['blake2s-216']=Buffer.from('b25b','hex');exports['blake2s-224']=Buffer.from('b25c','hex');exports['blake2s-232']=Buffer.from('b25d','hex');exports['blake2s-240']=Buffer.from('b25e','hex');exports['blake2s-248']=Buffer.from('b25f','hex');exports['blake2s-256']=Buffer.from('b260','hex');exports['skein256-8']=Buffer.from('b301','hex');exports['skein256-16']=Buffer.from('b302','hex');exports['skein256-24']=Buffer.from('b303','hex');exports['skein256-32']=Buffer.from('b304','hex');exports['skein256-40']=Buffer.from('b305','hex');exports['skein256-48']=Buffer.from('b306','hex');exports['skein256-56']=Buffer.from('b307','hex');exports['skein256-64']=Buffer.from('b308','hex');exports['skein256-72']=Buffer.from('b309','hex');exports['skein256-80']=Buffer.from('b30a','hex');exports['skein256-88']=Buffer.from('b30b','hex');exports['skein256-96']=Buffer.from('b30c','hex');exports['skein256-104']=Buffer.from('b30d','hex');exports['skein256-112']=Buffer.from('b30e','hex');exports['skein256-120']=Buffer.from('b30f','hex');exports['skein256-128']=Buffer.from('b310','hex');exports['skein256-136']=Buffer.from('b311','hex');exports['skein256-144']=Buffer.from('b312','hex');exports['skein256-152']=Buffer.from('b313','hex');exports['skein256-160']=Buffer.from('b314','hex');exports['skein256-168']=Buffer.from('b315','hex');exports['skein256-176']=Buffer.from('b316','hex');exports['skein256-184']=Buffer.from('b317','hex');exports['skein256-192']=Buffer.from('b318','hex');exports['skein256-200']=Buffer.from('b319','hex');exports['skein256-208']=Buffer.from('b31a','hex');exports['skein256-216']=Buffer.from('b31b','hex');exports['skein256-224']=Buffer.from('b31c','hex');exports['skein256-232']=Buffer.from('b31d','hex');exports['skein256-240']=Buffer.from('b31e','hex');exports['skein256-248']=Buffer.from('b31f','hex');exports['skein256-256']=Buffer.from('b320','hex');exports['skein512-8']=Buffer.from('b321','hex');exports['skein512-16']=Buffer.from('b322','hex');exports['skein512-24']=Buffer.from('b323','hex');exports['skein512-32']=Buffer.from('b324','hex');exports['skein512-40']=Buffer.from('b325','hex');exports['skein512-48']=Buffer.from('b326','hex');exports['skein512-56']=Buffer.from('b327','hex');exports['skein512-64']=Buffer.from('b328','hex');exports['skein512-72']=Buffer.from('b329','hex');exports['skein512-80']=Buffer.from('b32a','hex');exports['skein512-88']=Buffer.from('b32b','hex');exports['skein512-96']=Buffer.from('b32c','hex');exports['skein512-104']=Buffer.from('b32d','hex');exports['skein512-112']=Buffer.from('b32e','hex');exports['skein512-120']=Buffer.from('b32f','hex');exports['skein512-128']=Buffer.from('b330','hex');exports['skein512-136']=Buffer.from('b331','hex');exports['skein512-144']=Buffer.from('b332','hex');exports['skein512-152']=Buffer.from('b333','hex');exports['skein512-160']=Buffer.from('b334','hex');exports['skein512-168']=Buffer.from('b335','hex');exports['skein512-176']=Buffer.from('b336','hex');exports['skein512-184']=Buffer.from('b337','hex');exports['skein512-192']=Buffer.from('b338','hex');exports['skein512-200']=Buffer.from('b339','hex');exports['skein512-208']=Buffer.from('b33a','hex');exports['skein512-216']=Buffer.from('b33b','hex');exports['skein512-224']=Buffer.from('b33c','hex');exports['skein512-232']=Buffer.from('b33d','hex');exports['skein512-240']=Buffer.from('b33e','hex');exports['skein512-248']=Buffer.from('b33f','hex');exports['skein512-256']=Buffer.from('b340','hex');exports['skein512-264']=Buffer.from('b341','hex');exports['skein512-272']=Buffer.from('b342','hex');exports['skein512-280']=Buffer.from('b343','hex');exports['skein512-288']=Buffer.from('b344','hex');exports['skein512-296']=Buffer.from('b345','hex');exports['skein512-304']=Buffer.from('b346','hex');exports['skein512-312']=Buffer.from('b347','hex');exports['skein512-320']=Buffer.from('b348','hex');exports['skein512-328']=Buffer.from('b349','hex');exports['skein512-336']=Buffer.from('b34a','hex');exports['skein512-344']=Buffer.from('b34b','hex');exports['skein512-352']=Buffer.from('b34c','hex');exports['skein512-360']=Buffer.from('b34d','hex');exports['skein512-368']=Buffer.from('b34e','hex');exports['skein512-376']=Buffer.from('b34f','hex');exports['skein512-384']=Buffer.from('b350','hex');exports['skein512-392']=Buffer.from('b351','hex');exports['skein512-400']=Buffer.from('b352','hex');exports['skein512-408']=Buffer.from('b353','hex');exports['skein512-416']=Buffer.from('b354','hex');exports['skein512-424']=Buffer.from('b355','hex');exports['skein512-432']=Buffer.from('b356','hex');exports['skein512-440']=Buffer.from('b357','hex');exports['skein512-448']=Buffer.from('b358','hex');exports['skein512-456']=Buffer.from('b359','hex');exports['skein512-464']=Buffer.from('b35a','hex');exports['skein512-472']=Buffer.from('b35b','hex');exports['skein512-480']=Buffer.from('b35c','hex');exports['skein512-488']=Buffer.from('b35d','hex');exports['skein512-496']=Buffer.from('b35e','hex');exports['skein512-504']=Buffer.from('b35f','hex');exports['skein512-512']=Buffer.from('b360','hex');exports['skein1024-8']=Buffer.from('b361','hex');exports['skein1024-16']=Buffer.from('b362','hex');exports['skein1024-24']=Buffer.from('b363','hex');exports['skein1024-32']=Buffer.from('b364','hex');exports['skein1024-40']=Buffer.from('b365','hex');exports['skein1024-48']=Buffer.from('b366','hex');exports['skein1024-56']=Buffer.from('b367','hex');exports['skein1024-64']=Buffer.from('b368','hex');exports['skein1024-72']=Buffer.from('b369','hex');exports['skein1024-80']=Buffer.from('b36a','hex');exports['skein1024-88']=Buffer.from('b36b','hex');exports['skein1024-96']=Buffer.from('b36c','hex');exports['skein1024-104']=Buffer.from('b36d','hex');exports['skein1024-112']=Buffer.from('b36e','hex');exports['skein1024-120']=Buffer.from('b36f','hex');exports['skein1024-128']=Buffer.from('b370','hex');exports['skein1024-136']=Buffer.from('b371','hex');exports['skein1024-144']=Buffer.from('b372','hex');exports['skein1024-152']=Buffer.from('b373','hex');exports['skein1024-160']=Buffer.from('b374','hex');exports['skein1024-168']=Buffer.from('b375','hex');exports['skein1024-176']=Buffer.from('b376','hex');exports['skein1024-184']=Buffer.from('b377','hex');exports['skein1024-192']=Buffer.from('b378','hex');exports['skein1024-200']=Buffer.from('b379','hex');exports['skein1024-208']=Buffer.from('b37a','hex');exports['skein1024-216']=Buffer.from('b37b','hex');exports['skein1024-224']=Buffer.from('b37c','hex');exports['skein1024-232']=Buffer.from('b37d','hex');exports['skein1024-240']=Buffer.from('b37e','hex');exports['skein1024-248']=Buffer.from('b37f','hex');exports['skein1024-256']=Buffer.from('b380','hex');exports['skein1024-264']=Buffer.from('b381','hex');exports['skein1024-272']=Buffer.from('b382','hex');exports['skein1024-280']=Buffer.from('b383','hex');exports['skein1024-288']=Buffer.from('b384','hex');exports['skein1024-296']=Buffer.from('b385','hex');exports['skein1024-304']=Buffer.from('b386','hex');exports['skein1024-312']=Buffer.from('b387','hex');exports['skein1024-320']=Buffer.from('b388','hex');exports['skein1024-328']=Buffer.from('b389','hex');exports['skein1024-336']=Buffer.from('b38a','hex');exports['skein1024-344']=Buffer.from('b38b','hex');exports['skein1024-352']=Buffer.from('b38c','hex');exports['skein1024-360']=Buffer.from('b38d','hex');exports['skein1024-368']=Buffer.from('b38e','hex');exports['skein1024-376']=Buffer.from('b38f','hex');exports['skein1024-384']=Buffer.from('b390','hex');exports['skein1024-392']=Buffer.from('b391','hex');exports['skein1024-400']=Buffer.from('b392','hex');exports['skein1024-408']=Buffer.from('b393','hex');exports['skein1024-416']=Buffer.from('b394','hex');exports['skein1024-424']=Buffer.from('b395','hex');exports['skein1024-432']=Buffer.from('b396','hex');exports['skein1024-440']=Buffer.from('b397','hex');exports['skein1024-448']=Buffer.from('b398','hex');exports['skein1024-456']=Buffer.from('b399','hex');exports['skein1024-464']=Buffer.from('b39a','hex');exports['skein1024-472']=Buffer.from('b39b','hex');exports['skein1024-480']=Buffer.from('b39c','hex');exports['skein1024-488']=Buffer.from('b39d','hex');exports['skein1024-496']=Buffer.from('b39e','hex');exports['skein1024-504']=Buffer.from('b39f','hex');exports['skein1024-512']=Buffer.from('b3a0','hex');exports['skein1024-520']=Buffer.from('b3a1','hex');exports['skein1024-528']=Buffer.from('b3a2','hex');exports['skein1024-536']=Buffer.from('b3a3','hex');exports['skein1024-544']=Buffer.from('b3a4','hex');exports['skein1024-552']=Buffer.from('b3a5','hex');exports['skein1024-560']=Buffer.from('b3a6','hex');exports['skein1024-568']=Buffer.from('b3a7','hex');exports['skein1024-576']=Buffer.from('b3a8','hex');exports['skein1024-584']=Buffer.from('b3a9','hex');exports['skein1024-592']=Buffer.from('b3aa','hex');exports['skein1024-600']=Buffer.from('b3ab','hex');exports['skein1024-608']=Buffer.from('b3ac','hex');exports['skein1024-616']=Buffer.from('b3ad','hex');exports['skein1024-624']=Buffer.from('b3ae','hex');exports['skein1024-632']=Buffer.from('b3af','hex');exports['skein1024-640']=Buffer.from('b3b0','hex');exports['skein1024-648']=Buffer.from('b3b1','hex');exports['skein1024-656']=Buffer.from('b3b2','hex');exports['skein1024-664']=Buffer.from('b3b3','hex');exports['skein1024-672']=Buffer.from('b3b4','hex');exports['skein1024-680']=Buffer.from('b3b5','hex');exports['skein1024-688']=Buffer.from('b3b6','hex');exports['skein1024-696']=Buffer.from('b3b7','hex');exports['skein1024-704']=Buffer.from('b3b8','hex');exports['skein1024-712']=Buffer.from('b3b9','hex');exports['skein1024-720']=Buffer.from('b3ba','hex');exports['skein1024-728']=Buffer.from('b3bb','hex');exports['skein1024-736']=Buffer.from('b3bc','hex');exports['skein1024-744']=Buffer.from('b3bd','hex');exports['skein1024-752']=Buffer.from('b3be','hex');exports['skein1024-760']=Buffer.from('b3bf','hex');exports['skein1024-768']=Buffer.from('b3c0','hex');exports['skein1024-776']=Buffer.from('b3c1','hex');exports['skein1024-784']=Buffer.from('b3c2','hex');exports['skein1024-792']=Buffer.from('b3c3','hex');exports['skein1024-800']=Buffer.from('b3c4','hex');exports['skein1024-808']=Buffer.from('b3c5','hex');exports['skein1024-816']=Buffer.from('b3c6','hex');exports['skein1024-824']=Buffer.from('b3c7','hex');exports['skein1024-832']=Buffer.from('b3c8','hex');exports['skein1024-840']=Buffer.from('b3c9','hex');exports['skein1024-848']=Buffer.from('b3ca','hex');exports['skein1024-856']=Buffer.from('b3cb','hex');exports['skein1024-864']=Buffer.from('b3cc','hex');exports['skein1024-872']=Buffer.from('b3cd','hex');exports['skein1024-880']=Buffer.from('b3ce','hex');exports['skein1024-888']=Buffer.from('b3cf','hex');exports['skein1024-896']=Buffer.from('b3d0','hex');exports['skein1024-904']=Buffer.from('b3d1','hex');exports['skein1024-912']=Buffer.from('b3d2','hex');exports['skein1024-920']=Buffer.from('b3d3','hex');exports['skein1024-928']=Buffer.from('b3d4','hex');exports['skein1024-936']=Buffer.from('b3d5','hex');exports['skein1024-944']=Buffer.from('b3d6','hex');exports['skein1024-952']=Buffer.from('b3d7','hex');exports['skein1024-960']=Buffer.from('b3d8','hex');exports['skein1024-968']=Buffer.from('b3d9','hex');exports['skein1024-976']=Buffer.from('b3da','hex');exports['skein1024-984']=Buffer.from('b3db','hex');exports['skein1024-992']=Buffer.from('b3dc','hex');exports['skein1024-1000']=Buffer.from('b3dd','hex');exports['skein1024-1008']=Buffer.from('b3de','hex');exports['skein1024-1016']=Buffer.from('b3df','hex');exports['skein1024-1024']=Buffer.from('b3e0','hex');exports['ip4']=Buffer.from('04','hex');exports['ip6']=Buffer.from('29','hex');exports['ip6zone']=Buffer.from('2a','hex');exports['tcp']=Buffer.from('06','hex');exports['udp']=Buffer.from('0111','hex');exports['dccp']=Buffer.from('21','hex');exports['sctp']=Buffer.from('84','hex');exports['udt']=Buffer.from('012d','hex');exports['utp']=Buffer.from('012e','hex');exports['p2p']=Buffer.from('01a5','hex');exports['ipfs']=Buffer.from('01a5','hex');exports['http']=Buffer.from('01e0','hex');exports['https']=Buffer.from('01bb','hex');exports['quic']=Buffer.from('01cc','hex');exports['ws']=Buffer.from('01dd','hex');exports['wss']=Buffer.from('01de','hex');exports['onion']=Buffer.from('01bc','hex');exports['onion3']=Buffer.from('01bd','hex');exports['garlic64']=Buffer.from('01be','hex');exports['p2p-circuit']=Buffer.from('0122','hex');exports['dns']=Buffer.from('35','hex');exports['dns4']=Buffer.from('36','hex');exports['dns6']=Buffer.from('37','hex');exports['dnsaddr']=Buffer.from('38','hex');exports['p2p-websocket-star']=Buffer.from('01df','hex');exports['p2p-webrtc-star']=Buffer.from('0113','hex');exports['p2p-webrtc-direct']=Buffer.from('0114','hex');exports['unix']=Buffer.from('0190','hex');exports['dag-pb']=Buffer.from('70','hex');exports['dag-cbor']=Buffer.from('71','hex');exports['dag-json']=Buffer.from('0129','hex');exports['git-raw']=Buffer.from('78','hex');exports['eth-block']=Buffer.from('90','hex');exports['eth-block-list']=Buffer.from('91','hex');exports['eth-tx-trie']=Buffer.from('92','hex');exports['eth-tx']=Buffer.from('93','hex');exports['eth-tx-receipt-trie']=Buffer.from('94','hex');exports['eth-tx-receipt']=Buffer.from('95','hex');exports['eth-state-trie']=Buffer.from('96','hex');exports['eth-account-snapshot']=Buffer.from('97','hex');exports['eth-storage-trie']=Buffer.from('98','hex');exports['bitcoin-block']=Buffer.from('b0','hex');exports['bitcoin-tx']=Buffer.from('b1','hex');exports['zcash-block']=Buffer.from('c0','hex');exports['zcash-tx']=Buffer.from('c1','hex');exports['stellar-block']=Buffer.from('d0','hex');exports['stellar-tx']=Buffer.from('d1','hex');exports['decred-block']=Buffer.from('e0','hex');exports['decred-tx']=Buffer.from('e1','hex');exports['dash-block']=Buffer.from('f0','hex');exports['dash-tx']=Buffer.from('f1','hex');exports['torrent-info']=Buffer.from('7b','hex');exports['torrent-file']=Buffer.from('7c','hex');exports['ed25519-pub']=Buffer.from('ed','hex');},4920:function(__unusedmodule,exports,__webpack_require__){"use strict";const debug=__webpack_require__(746);const setImmediate=__webpack_require__(7368);const log=debug('repo:lock');const lockFile='repo.lock';const LOCKS={};exports.lock=(dir,callback)=>{const file=dir+'/'+lockFile;log('locking %s',file);LOCKS[file]=true;const closer={close(cb){if(LOCKS[file]){delete LOCKS[file];}setImmediate(cb);}};setImmediate(()=>{callback(null,closer);});};exports.locked=(dir,callback)=>{const file=dir+'/'+lockFile;log('checking lock: %s');const locked=LOCKS[file];setImmediate(()=>{callback(null,locked);});};},4928:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=timeLimit;var _mapLimit=__webpack_require__(8770);var _mapLimit2=_interopRequireDefault(_mapLimit);var _baseRange=__webpack_require__(8136);var _baseRange2=_interopRequireDefault(_baseRange);var _wrapAsync=__webpack_require__(9396);var _wrapAsync2=_interopRequireDefault(_wrapAsync);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function timeLimit(count,limit,iteratee,callback){var _iteratee=(0,_wrapAsync2.default)(iteratee);(0,_mapLimit2.default)((0,_baseRange2.default)(0,count,1),limit,_iteratee,callback);}module.exports=exports['default'];},4951:function(module,__unusedexports,__webpack_require__){"use strict";var _=__webpack_require__(6064);var BN=__webpack_require__(6122);var BufferUtil=__webpack_require__(9657);var BufferReader=__webpack_require__(412);var BufferWriter=__webpack_require__(2418);var Hash=__webpack_require__(2442);var JSUtil=__webpack_require__(8416);var $=__webpack_require__(5107);var GENESIS_BITS=0x2003ffff;var BlockHeader=function BlockHeader(arg){if(!(this instanceof BlockHeader)){return new BlockHeader(arg);}var info=BlockHeader._from(arg);this.version=info.version;this.prevHash=info.prevHash;this.merkleRoot=info.merkleRoot;this.reserved=info.reserved;this.time=info.time;this.timestamp=info.time;this.bits=info.bits;this.nonce=info.nonce;this.solution=info.solution;if(info.hash){$.checkState(this.hash===info.hash,'Argument object hash property does not match block hash.');}return this;};BlockHeader._from=function _from(arg){var info={};if(BufferUtil.isBuffer(arg)){info=BlockHeader._fromBufferReader(BufferReader(arg));}else if(_.isObject(arg)){info=BlockHeader._fromObject(arg);}else{throw new TypeError('Unrecognized argument for BlockHeader');}return info;};BlockHeader._fromObject=function _fromObject(data){$.checkArgument(data,'data is required');var prevHash=data.prevHash;var merkleRoot=data.merkleRoot;var reserved=data.reserved;var nonce=data.nonce;var solution=data.solution;if(_.isString(data.prevHash)){prevHash=BufferUtil.reverse(new Buffer(data.prevHash,'hex'));}if(_.isString(data.merkleRoot)){merkleRoot=BufferUtil.reverse(new Buffer(data.merkleRoot,'hex'));}if(_.isString(data.reserved)){reserved=BufferUtil.reverse(new Buffer(data.reserved,'hex'));}if(_.isString(data.nonce)){nonce=BufferUtil.reverse(new Buffer(data.nonce,'hex'));}if(_.isString(data.solution)){solution=new Buffer(data.solution,'hex');}var info={hash:data.hash,version:data.version,prevHash:prevHash,merkleRoot:merkleRoot,reserved:reserved,time:data.time,timestamp:data.time,bits:data.bits,nonce:nonce,solution:solution};return info;};BlockHeader.fromObject=function fromObject(obj){var info=BlockHeader._fromObject(obj);return new BlockHeader(info);};BlockHeader.fromRawBlock=function fromRawBlock(data){if(!BufferUtil.isBuffer(data)){data=new Buffer(data,'binary');}var br=BufferReader(data);br.pos=BlockHeader.Constants.START_OF_HEADER;var info=BlockHeader._fromBufferReader(br);return new BlockHeader(info);};BlockHeader.fromBuffer=function fromBuffer(buf){var info=BlockHeader._fromBufferReader(BufferReader(buf));return new BlockHeader(info);};BlockHeader.fromString=function fromString(str){var buf=new Buffer(str,'hex');return BlockHeader.fromBuffer(buf);};BlockHeader._fromBufferReader=function _fromBufferReader(br){var info={};info.version=br.readUInt32LE();info.prevHash=br.read(32);info.merkleRoot=br.read(32);info.reserved=br.read(32);info.time=br.readUInt32LE();info.bits=br.readUInt32LE();info.nonce=br.read(32);var lenSolution=br.readVarintNum();info.solution=br.read(lenSolution);return info;};BlockHeader.fromBufferReader=function fromBufferReader(br){var info=BlockHeader._fromBufferReader(br);return new BlockHeader(info);};BlockHeader.prototype.toObject=BlockHeader.prototype.toJSON=function toObject(){return{hash:this.hash,version:this.version,prevHash:BufferUtil.reverse(this.prevHash).toString('hex'),merkleRoot:BufferUtil.reverse(this.merkleRoot).toString('hex'),reserved:BufferUtil.reverse(this.reserved).toString('hex'),time:this.time,bits:this.bits,nonce:BufferUtil.reverse(this.nonce).toString('hex'),solution:this.solution.toString('hex')};};BlockHeader.prototype.toBuffer=function toBuffer(){return this.toBufferWriter().concat();};BlockHeader.prototype.toString=function toString(){return this.toBuffer().toString('hex');};BlockHeader.prototype.toBufferWriter=function toBufferWriter(bw){if(!bw){bw=new BufferWriter();}bw.writeUInt32LE(this.version);bw.write(this.prevHash);bw.write(this.merkleRoot);bw.write(this.reserved);bw.writeUInt32LE(this.time);bw.writeUInt32LE(this.bits);bw.write(this.nonce);bw.writeVarintNum(this.solution.length);bw.write(this.solution);return bw;};BlockHeader.prototype.getTargetDifficulty=function getTargetDifficulty(bits){bits=bits||this.bits;var target=new BN(bits&0xffffff);var mov=8*((bits>>>24)-3);while(mov-->0){target=target.mul(new BN(2));}return target;};BlockHeader.prototype.getDifficulty=function getDifficulty(){var difficulty1TargetBN=this.getTargetDifficulty(GENESIS_BITS).mul(new BN(Math.pow(10,8)));var currentTargetBN=this.getTargetDifficulty();var difficultyString=difficulty1TargetBN.div(currentTargetBN).toString(10);var decimalPos=difficultyString.length-8;difficultyString=difficultyString.slice(0,decimalPos)+'.'+difficultyString.slice(decimalPos);return parseFloat(difficultyString);};BlockHeader.prototype._getHash=function hash(){var buf=this.toBuffer();return Hash.sha256sha256(buf);};var idProperty={configurable:false,enumerable:true,get:function(){if(!this._id){this._id=BufferReader(this._getHash()).readReverse().toString('hex');}return this._id;},set:_.noop};Object.defineProperty(BlockHeader.prototype,'id',idProperty);Object.defineProperty(BlockHeader.prototype,'hash',idProperty);BlockHeader.prototype.validTimestamp=function validTimestamp(){var currentTime=Math.round(new Date().getTime()/1000);if(this.time>currentTime+BlockHeader.Constants.MAX_TIME_OFFSET){return false;}return true;};BlockHeader.prototype.validProofOfWork=function validProofOfWork(){var pow=new BN(this.id,'hex');var target=this.getTargetDifficulty();if(pow.cmp(target)>0){return false;}return true;};BlockHeader.prototype.inspect=function inspect(){return'<BlockHeader '+this.id+'>';};BlockHeader.Constants={START_OF_HEADER:8,MAX_TIME_OFFSET:2*60*60,LARGEST_HASH:new BN('10000000000000000000000000000000000000000000000000000000000000000','hex')};module.exports=BlockHeader;},4956:function(module){module.exports=isTypedArray;isTypedArray.strict=isStrictTypedArray;isTypedArray.loose=isLooseTypedArray;var toString=Object.prototype.toString;var names={'[object Int8Array]':true,'[object Int16Array]':true,'[object Int32Array]':true,'[object Uint8Array]':true,'[object Uint8ClampedArray]':true,'[object Uint16Array]':true,'[object Uint32Array]':true,'[object Float32Array]':true,'[object Float64Array]':true};function isTypedArray(arr){return isStrictTypedArray(arr)||isLooseTypedArray(arr);}function isStrictTypedArray(arr){return arr instanceof Int8Array||arr instanceof Int16Array||arr instanceof Int32Array||arr instanceof Uint8Array||arr instanceof Uint8ClampedArray||arr instanceof Uint16Array||arr instanceof Uint32Array||arr instanceof Float32Array||arr instanceof Float64Array;}function isLooseTypedArray(arr){return names[toString.call(arr)];}},4967:function(module,__unusedexports,__webpack_require__){var basex=__webpack_require__(6215);var ALPHABET='123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz';module.exports=basex(ALPHABET);},4969:function(module,__unusedexports,__webpack_require__){"use strict";const{URLWithLegacySupport,format,URLSearchParams,defaultBase}=__webpack_require__(9141);const relative=__webpack_require__(7798);module.exports={URL:URLWithLegacySupport,URLSearchParams,format,relative,defaultBase};},4974:function(module){function eq(value,other){return value===other||value!==value&&other!==other;}module.exports=eq;},4978:function(module,__unusedexports,__webpack_require__){"use strict";var drain=__webpack_require__(2147);module.exports=function onEnd(done){return drain(null,done);};},4980:function(module){"use strict";module.exports={PROTOCOL:'/ipfs/ping/1.0.0',PING_LENGTH:32};},4989:function(module,__unusedexports,__webpack_require__){module.exports=__webpack_require__(2984).randomBytes;},4991:function(module,exports,__webpack_require__){var Stream=__webpack_require__(6886);if(process.env.READABLE_STREAM==='disable'&&Stream){module.exports=Stream;exports=module.exports=Stream.Readable;exports.Readable=Stream.Readable;exports.Writable=Stream.Writable;exports.Duplex=Stream.Duplex;exports.Transform=Stream.Transform;exports.PassThrough=Stream.PassThrough;exports.Stream=Stream;}else{exports=module.exports=__webpack_require__(3431);exports.Stream=Stream||exports;exports.Readable=exports;exports.Writable=__webpack_require__(2039);exports.Duplex=__webpack_require__(7371);exports.Transform=__webpack_require__(306);exports.PassThrough=__webpack_require__(7174);}},4999:function(module){"use strict";function createError(msg,code,props){var err=msg instanceof Error?msg:new Error(msg);var key;if(typeof code==='object'){props=code;}else if(code!=null){err.code=code;}if(props){for(key in props){err[key]=props[key];}}return err;}module.exports=createError;},5001:function(module){var INFINITY=1/0,MAX_SAFE_INTEGER=9007199254740991,MAX_INTEGER=1.7976931348623157e+308,NAN=0/0;var argsTag='[object Arguments]',funcTag='[object Function]',genTag='[object GeneratorFunction]',stringTag='[object String]',symbolTag='[object Symbol]';var reTrim=/^\s+|\s+$/g;var reIsBadHex=/^[-+]0x[0-9a-f]+$/i;var reIsBinary=/^0b[01]+$/i;var reIsOctal=/^0o[0-7]+$/i;var reIsUint=/^(?:0|[1-9]\d*)$/;var freeParseInt=parseInt;function arrayMap(array,iteratee){var index=-1,length=array?array.length:0,result=Array(length);while(++index<length){result[index]=iteratee(array[index],index,array);}return result;}function baseFindIndex(array,predicate,fromIndex,fromRight){var length=array.length,index=fromIndex+(fromRight?1:-1);while(fromRight?index--:++index<length){if(predicate(array[index],index,array)){return index;}}return-1;}function baseIndexOf(array,value,fromIndex){if(value!==value){return baseFindIndex(array,baseIsNaN,fromIndex);}var index=fromIndex-1,length=array.length;while(++index<length){if(array[index]===value){return index;}}return-1;}function baseIsNaN(value){return value!==value;}function baseTimes(n,iteratee){var index=-1,result=Array(n);while(++index<n){result[index]=iteratee(index);}return result;}function baseValues(object,props){return arrayMap(props,function(key){return object[key];});}function overArg(func,transform){return function(arg){return func(transform(arg));};}var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;var objectToString=objectProto.toString;var propertyIsEnumerable=objectProto.propertyIsEnumerable;var nativeKeys=overArg(Object.keys,Object),nativeMax=Math.max;function arrayLikeKeys(value,inherited){var result=isArray(value)||isArguments(value)?baseTimes(value.length,String):[];var length=result.length,skipIndexes=!!length;for(var key in value){if((inherited||hasOwnProperty.call(value,key))&&!(skipIndexes&&(key=='length'||isIndex(key,length)))){result.push(key);}}return result;}function baseKeys(object){if(!isPrototype(object)){return nativeKeys(object);}var result=[];for(var key in Object(object)){if(hasOwnProperty.call(object,key)&&key!='constructor'){result.push(key);}}return result;}function isIndex(value,length){length=length==null?MAX_SAFE_INTEGER:length;return!!length&&(typeof value=='number'||reIsUint.test(value))&&value>-1&&value%1==0&&value<length;}function isPrototype(value){var Ctor=value&&value.constructor,proto=typeof Ctor=='function'&&Ctor.prototype||objectProto;return value===proto;}function includes(collection,value,fromIndex,guard){collection=isArrayLike(collection)?collection:values(collection);fromIndex=fromIndex&&!guard?toInteger(fromIndex):0;var length=collection.length;if(fromIndex<0){fromIndex=nativeMax(length+fromIndex,0);}return isString(collection)?fromIndex<=length&&collection.indexOf(value,fromIndex)>-1:!!length&&baseIndexOf(collection,value,fromIndex)>-1;}function isArguments(value){return isArrayLikeObject(value)&&hasOwnProperty.call(value,'callee')&&(!propertyIsEnumerable.call(value,'callee')||objectToString.call(value)==argsTag);}var isArray=Array.isArray;function isArrayLike(value){return value!=null&&isLength(value.length)&&!isFunction(value);}function isArrayLikeObject(value){return isObjectLike(value)&&isArrayLike(value);}function isFunction(value){var tag=isObject(value)?objectToString.call(value):'';return tag==funcTag||tag==genTag;}function isLength(value){return typeof value=='number'&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER;}function isObject(value){var type=typeof value;return!!value&&(type=='object'||type=='function');}function isObjectLike(value){return!!value&&typeof value=='object';}function isString(value){return typeof value=='string'||!isArray(value)&&isObjectLike(value)&&objectToString.call(value)==stringTag;}function isSymbol(value){return typeof value=='symbol'||isObjectLike(value)&&objectToString.call(value)==symbolTag;}function toFinite(value){if(!value){return value===0?value:0;}value=toNumber(value);if(value===INFINITY||value===-INFINITY){var sign=value<0?-1:1;return sign*MAX_INTEGER;}return value===value?value:0;}function toInteger(value){var result=toFinite(value),remainder=result%1;return result===result?remainder?result-remainder:result:0;}function toNumber(value){if(typeof value=='number'){return value;}if(isSymbol(value)){return NAN;}if(isObject(value)){var other=typeof value.valueOf=='function'?value.valueOf():value;value=isObject(other)?other+'':other;}if(typeof value!='string'){return value===0?value:+value;}value=value.replace(reTrim,'');var isBinary=reIsBinary.test(value);return isBinary||reIsOctal.test(value)?freeParseInt(value.slice(2),isBinary?2:8):reIsBadHex.test(value)?NAN:+value;}function keys(object){return isArrayLike(object)?arrayLikeKeys(object):baseKeys(object);}function values(object){return object?baseValues(object,keys(object)):[];}module.exports=includes;},5020:function(module,__unusedexports,__webpack_require__){"use strict";const bs58=__webpack_require__(4967);const PeerId=__webpack_require__(1832);const PeerInfo=__webpack_require__(9265);function getB58Str(peer){let b58Str;if(typeof peer==='string'){b58Str=peer;}else if(Buffer.isBuffer(peer)){b58Str=bs58.encode(peer).toString();}else if(PeerId.isPeerId(peer)){b58Str=peer.toB58String();}else if(PeerInfo.isPeerInfo(peer)){b58Str=peer.id.toB58String();}else{throw new Error('not valid PeerId or PeerInfo, or B58Str');}return b58Str;}class PeerBook{constructor(){this._peers={};}has(peer){const b58Str=getB58Str(peer);return Boolean(this._peers[b58Str]);}put(peerInfo,replace){const localPeerInfo=this._peers[peerInfo.id.toB58String()];if(!localPeerInfo||replace){this._peers[peerInfo.id.toB58String()]=peerInfo;return peerInfo;}peerInfo.multiaddrs.forEach(ma=>localPeerInfo.multiaddrs.add(ma));const ma=peerInfo.isConnected();if(ma){localPeerInfo.connect(ma);}peerInfo.protocols.forEach(p=>localPeerInfo.protocols.add(p));if(!localPeerInfo.id.privKey&&peerInfo.id.privKey){localPeerInfo.id.privKey=peerInfo.id.privKey;}if(!localPeerInfo.id.pubKey&&peerInfo.id.pubKey){localPeerInfo.id.pubKey=peerInfo.id.pubKey;}return localPeerInfo;}get(peer){const b58Str=getB58Str(peer);const peerInfo=this._peers[b58Str];if(peerInfo){return peerInfo;}throw new Error('PeerInfo not found');}getAll(){return this._peers;}getAllArray(){return Object.keys(this._peers).map(b58Str=>this._peers[b58Str]);}getMultiaddrs(peer){const info=this.get(peer);return info.multiaddrs.toArray();}remove(peer){const b58Str=getB58Str(peer);if(this._peers[b58Str]){delete this._peers[b58Str];}}}module.exports=PeerBook;},5026:function(module,__unusedexports,__webpack_require__){"use strict";var AbstractLevelDOWN=__webpack_require__(23).AbstractLevelDOWN;var AbstractChainedBatch=__webpack_require__(23).AbstractChainedBatch;var AbstractIterator=__webpack_require__(23).AbstractIterator;var inherits=__webpack_require__(92);var xtend=__webpack_require__(7756);var Codec=__webpack_require__(7866);var EncodingError=__webpack_require__(1356).EncodingError;module.exports=DB.default=DB;function DB(db,opts){if(!(this instanceof DB))return new DB(db,opts);AbstractLevelDOWN.call(this,'');opts=opts||{};if(typeof opts.keyEncoding==='undefined')opts.keyEncoding='utf8';if(typeof opts.valueEncoding==='undefined')opts.valueEncoding='utf8';this.db=db;this.codec=new Codec(opts);}inherits(DB,AbstractLevelDOWN);DB.prototype._serializeKey=DB.prototype._serializeValue=function(datum){return datum;};DB.prototype._open=function(opts,cb){this.db.open(opts,cb);};DB.prototype._close=function(cb){this.db.close(cb);};DB.prototype._put=function(key,value,opts,cb){key=this.codec.encodeKey(key,opts);value=this.codec.encodeValue(value,opts);this.db.put(key,value,opts,cb);};DB.prototype._get=function(key,opts,cb){var self=this;key=this.codec.encodeKey(key,opts);opts.asBuffer=this.codec.valueAsBuffer(opts);this.db.get(key,opts,function(err,value){if(err)return cb(err);try{value=self.codec.decodeValue(value,opts);}catch(err){return cb(new EncodingError(err));}cb(null,value);});};DB.prototype._del=function(key,opts,cb){key=this.codec.encodeKey(key,opts);this.db.del(key,opts,cb);};DB.prototype._chainedBatch=function(){return new Batch(this);};DB.prototype._batch=function(ops,opts,cb){ops=this.codec.encodeBatch(ops,opts);this.db.batch(ops,opts,cb);};DB.prototype._iterator=function(opts){opts.keyAsBuffer=this.codec.keyAsBuffer(opts);opts.valueAsBuffer=this.codec.valueAsBuffer(opts);return new Iterator(this,opts);};DB.prototype._setupIteratorOptions=function(options){options=xtend(options);options.reverse=!!options.reverse;options.keys=options.keys!==false;options.values=options.values!==false;options.limit='limit'in options?options.limit:-1;options.keyAsBuffer=options.keyAsBuffer!==false;options.valueAsBuffer=options.valueAsBuffer!==false;return options;};DB.prototype.approximateSize=function(start,end,opts,cb){return this.db.approximateSize(start,end,opts,cb);};function Iterator(db,opts){AbstractIterator.call(this,db);this.codec=db.codec;this.keys=opts.keys;this.values=opts.values;this.opts=this.codec.encodeLtgt(opts);this.it=db.db.iterator(this.opts);}inherits(Iterator,AbstractIterator);Iterator.prototype._next=function(cb){var self=this;this.it.next(function(err,key,value){if(err)return cb(err);try{if(self.keys&&typeof key!=='undefined'){key=self.codec.decodeKey(key,self.opts);}else{key=undefined;}if(self.values&&typeof value!=='undefined'){value=self.codec.decodeValue(value,self.opts);}else{value=undefined;}}catch(err){return cb(new EncodingError(err));}cb(null,key,value);});};Iterator.prototype._end=function(cb){this.it.end(cb);};function Batch(db,codec){AbstractChainedBatch.call(this,db);this.codec=db.codec;this.batch=db.db.batch();}inherits(Batch,AbstractChainedBatch);Batch.prototype._put=function(key,value){key=this.codec.encodeKey(key);value=this.codec.encodeValue(value);this.batch.put(key,value);};Batch.prototype._del=function(key){key=this.codec.encodeKey(key);this.batch.del(key);};Batch.prototype._clear=function(){this.batch.clear();};Batch.prototype._write=function(opts,cb){this.batch.write(opts,cb);};},5027:function(module){var FUNC_ERROR_TEXT='Expected a function';var HASH_UNDEFINED='__lodash_hash_undefined__';var INFINITY=1/0,MAX_SAFE_INTEGER=9007199254740991;var argsTag='[object Arguments]',funcTag='[object Function]',genTag='[object GeneratorFunction]',symbolTag='[object Symbol]';var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/,reLeadingDot=/^\./,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;var reRegExpChar=/[\\^$.*+?()[\]{}|]/g;var reEscapeChar=/\\(\\)?/g;var reIsHostCtor=/^\[object .+?Constructor\]$/;var reIsUint=/^(?:0|[1-9]\d*)$/;var freeGlobal=typeof global=='object'&&global&&global.Object===Object&&global;var freeSelf=typeof self=='object'&&self&&self.Object===Object&&self;var root=freeGlobal||freeSelf||Function('return this')();function getValue(object,key){return object==null?undefined:object[key];}function isHostObject(value){var result=false;if(value!=null&&typeof value.toString!='function'){try{result=!!(value+'');}catch(e){}}return result;}var arrayProto=Array.prototype,funcProto=Function.prototype,objectProto=Object.prototype;var coreJsData=root['__core-js_shared__'];var maskSrcKey=function(){var uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||'');return uid?'Symbol(src)_1.'+uid:'';}();var funcToString=funcProto.toString;var hasOwnProperty=objectProto.hasOwnProperty;var objectToString=objectProto.toString;var reIsNative=RegExp('^'+funcToString.call(hasOwnProperty).replace(reRegExpChar,'\\$&').replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,'$1.*?')+'$');var Symbol=root.Symbol,propertyIsEnumerable=objectProto.propertyIsEnumerable,splice=arrayProto.splice;var Map=getNative(root,'Map'),nativeCreate=getNative(Object,'create');var symbolProto=Symbol?Symbol.prototype:undefined,symbolToString=symbolProto?symbolProto.toString:undefined;function Hash(entries){var index=-1,length=entries?entries.length:0;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1]);}}function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{};}function hashDelete(key){return this.has(key)&&delete this.__data__[key];}function hashGet(key){var data=this.__data__;if(nativeCreate){var result=data[key];return result===HASH_UNDEFINED?undefined:result;}return hasOwnProperty.call(data,key)?data[key]:undefined;}function hashHas(key){var data=this.__data__;return nativeCreate?data[key]!==undefined:hasOwnProperty.call(data,key);}function hashSet(key,value){var data=this.__data__;data[key]=nativeCreate&&value===undefined?HASH_UNDEFINED:value;return this;}Hash.prototype.clear=hashClear;Hash.prototype['delete']=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;function ListCache(entries){var index=-1,length=entries?entries.length:0;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1]);}}function listCacheClear(){this.__data__=[];}function listCacheDelete(key){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){return false;}var lastIndex=data.length-1;if(index==lastIndex){data.pop();}else{splice.call(data,index,1);}return true;}function listCacheGet(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?undefined:data[index][1];}function listCacheHas(key){return assocIndexOf(this.__data__,key)>-1;}function listCacheSet(key,value){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){data.push([key,value]);}else{data[index][1]=value;}return this;}ListCache.prototype.clear=listCacheClear;ListCache.prototype['delete']=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;function MapCache(entries){var index=-1,length=entries?entries.length:0;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1]);}}function mapCacheClear(){this.__data__={'hash':new Hash(),'map':new(Map||ListCache)(),'string':new Hash()};}function mapCacheDelete(key){return getMapData(this,key)['delete'](key);}function mapCacheGet(key){return getMapData(this,key).get(key);}function mapCacheHas(key){return getMapData(this,key).has(key);}function mapCacheSet(key,value){getMapData(this,key).set(key,value);return this;}MapCache.prototype.clear=mapCacheClear;MapCache.prototype['delete']=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;function assocIndexOf(array,key){var length=array.length;while(length--){if(eq(array[length][0],key)){return length;}}return-1;}function baseHas(object,key){return object!=null&&hasOwnProperty.call(object,key);}function baseIsNative(value){if(!isObject(value)||isMasked(value)){return false;}var pattern=isFunction(value)||isHostObject(value)?reIsNative:reIsHostCtor;return pattern.test(toSource(value));}function baseToString(value){if(typeof value=='string'){return value;}if(isSymbol(value)){return symbolToString?symbolToString.call(value):'';}var result=value+'';return result=='0'&&1/value==-INFINITY?'-0':result;}function castPath(value){return isArray(value)?value:stringToPath(value);}function getMapData(map,key){var data=map.__data__;return isKeyable(key)?data[typeof key=='string'?'string':'hash']:data.map;}function getNative(object,key){var value=getValue(object,key);return baseIsNative(value)?value:undefined;}function hasPath(object,path,hasFunc){path=isKey(path,object)?[path]:castPath(path);var result,index=-1,length=path.length;while(++index<length){var key=toKey(path[index]);if(!(result=object!=null&&hasFunc(object,key))){break;}object=object[key];}if(result){return result;}var length=object?object.length:0;return!!length&&isLength(length)&&isIndex(key,length)&&(isArray(object)||isArguments(object));}function isIndex(value,length){length=length==null?MAX_SAFE_INTEGER:length;return!!length&&(typeof value=='number'||reIsUint.test(value))&&value>-1&&value%1==0&&value<length;}function isKey(value,object){if(isArray(value)){return false;}var type=typeof value;if(type=='number'||type=='symbol'||type=='boolean'||value==null||isSymbol(value)){return true;}return reIsPlainProp.test(value)||!reIsDeepProp.test(value)||object!=null&&value in Object(object);}function isKeyable(value){var type=typeof value;return type=='string'||type=='number'||type=='symbol'||type=='boolean'?value!=='__proto__':value===null;}function isMasked(func){return!!maskSrcKey&&maskSrcKey in func;}var stringToPath=memoize(function(string){string=toString(string);var result=[];if(reLeadingDot.test(string)){result.push('');}string.replace(rePropName,function(match,number,quote,string){result.push(quote?string.replace(reEscapeChar,'$1'):number||match);});return result;});function toKey(value){if(typeof value=='string'||isSymbol(value)){return value;}var result=value+'';return result=='0'&&1/value==-INFINITY?'-0':result;}function toSource(func){if(func!=null){try{return funcToString.call(func);}catch(e){}try{return func+'';}catch(e){}}return'';}function memoize(func,resolver){if(typeof func!='function'||resolver&&typeof resolver!='function'){throw new TypeError(FUNC_ERROR_TEXT);}var memoized=function(){var args=arguments,key=resolver?resolver.apply(this,args):args[0],cache=memoized.cache;if(cache.has(key)){return cache.get(key);}var result=func.apply(this,args);memoized.cache=cache.set(key,result);return result;};memoized.cache=new(memoize.Cache||MapCache)();return memoized;}memoize.Cache=MapCache;function eq(value,other){return value===other||value!==value&&other!==other;}function isArguments(value){return isArrayLikeObject(value)&&hasOwnProperty.call(value,'callee')&&(!propertyIsEnumerable.call(value,'callee')||objectToString.call(value)==argsTag);}var isArray=Array.isArray;function isArrayLike(value){return value!=null&&isLength(value.length)&&!isFunction(value);}function isArrayLikeObject(value){return isObjectLike(value)&&isArrayLike(value);}function isFunction(value){var tag=isObject(value)?objectToString.call(value):'';return tag==funcTag||tag==genTag;}function isLength(value){return typeof value=='number'&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER;}function isObject(value){var type=typeof value;return!!value&&(type=='object'||type=='function');}function isObjectLike(value){return!!value&&typeof value=='object';}function isSymbol(value){return typeof value=='symbol'||isObjectLike(value)&&objectToString.call(value)==symbolTag;}function toString(value){return value==null?'':baseToString(value);}function has(object,path){return object!=null&&hasPath(object,path,baseHas);}module.exports=has;},5045:function(module,__unusedexports,__webpack_require__){"use strict";var alphabet=__webpack_require__(5247);var random=__webpack_require__(8359);var format=__webpack_require__(3315);function generate(number){var loopCounter=0;var done;var str='';while(!done){str=str+format(random,alphabet.get(),1);done=number<Math.pow(16,loopCounter+1);loopCounter++;}return str;}module.exports=generate;},5061:function(module,__unusedexports,__webpack_require__){"use strict";var tester=__webpack_require__(1373);var filter=__webpack_require__(708);module.exports=function filterNot(test){test=tester(test);return filter(function(data){return!test(data);});};},5062:function(module,__unusedexports,__webpack_require__){module.exports=__webpack_require__(2765);},5066:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function(coll,iteratee,callback){var eachOfImplementation=(0,_isArrayLike2.default)(coll)?eachOfArrayLike:eachOfGeneric;eachOfImplementation(coll,(0,_wrapAsync2.default)(iteratee),callback);};var _isArrayLike=__webpack_require__(4356);var _isArrayLike2=_interopRequireDefault(_isArrayLike);var _breakLoop=__webpack_require__(3487);var _breakLoop2=_interopRequireDefault(_breakLoop);var _eachOfLimit=__webpack_require__(6363);var _eachOfLimit2=_interopRequireDefault(_eachOfLimit);var _doLimit=__webpack_require__(9817);var _doLimit2=_interopRequireDefault(_doLimit);var _noop=__webpack_require__(5811);var _noop2=_interopRequireDefault(_noop);var _once=__webpack_require__(3925);var _once2=_interopRequireDefault(_once);var _onlyOnce=__webpack_require__(2306);var _onlyOnce2=_interopRequireDefault(_onlyOnce);var _wrapAsync=__webpack_require__(9396);var _wrapAsync2=_interopRequireDefault(_wrapAsync);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function eachOfArrayLike(coll,iteratee,callback){callback=(0,_once2.default)(callback||_noop2.default);var index=0,completed=0,length=coll.length;if(length===0){callback(null);}function iteratorCallback(err,value){if(err){callback(err);}else if(++completed===length||value===_breakLoop2.default){callback(null);}}for(;index<length;index++){iteratee(coll[index],index,(0,_onlyOnce2.default)(iteratorCallback));}}var eachOfGeneric=(0,_doLimit2.default)(_eachOfLimit2.default,Infinity);module.exports=exports['default'];},5068:function(module,__unusedexports,__webpack_require__){"use strict";const Any=__webpack_require__(7492);const Hoek=__webpack_require__(2850);const internals={};internals.Binary=class extends Any{constructor(){super();this._type='binary';}_base(value,state,options){const result={value};if(typeof value==='string'&&options.convert){try{result.value=Buffer.from(value,this._flags.encoding);}catch(e){}}result.errors=Buffer.isBuffer(result.value)?null:this.createError('binary.base',null,state,options);return result;}encoding(encoding){Hoek.assert(Buffer.isEncoding(encoding),'Invalid encoding:',encoding);if(this._flags.encoding===encoding){return this;}const obj=this.clone();obj._flags.encoding=encoding;return obj;}min(limit){Hoek.assert(Number.isSafeInteger(limit)&&limit>=0,'limit must be a positive integer');return this._test('min',limit,function(value,state,options){if(value.length>=limit){return value;}return this.createError('binary.min',{limit,value},state,options);});}max(limit){Hoek.assert(Number.isSafeInteger(limit)&&limit>=0,'limit must be a positive integer');return this._test('max',limit,function(value,state,options){if(value.length<=limit){return value;}return this.createError('binary.max',{limit,value},state,options);});}length(limit){Hoek.assert(Number.isSafeInteger(limit)&&limit>=0,'limit must be a positive integer');return this._test('length',limit,function(value,state,options){if(value.length===limit){return value;}return this.createError('binary.length',{limit,value},state,options);});}};module.exports=new internals.Binary();},5074:function(__unusedmodule,exports,__webpack_require__){"use strict";const inherits=__webpack_require__(92);const Reporter=__webpack_require__(5490).Reporter;const Buffer=__webpack_require__(9423).Buffer;function DecoderBuffer(base,options){Reporter.call(this,options);if(!Buffer.isBuffer(base)){this.error('Input not Buffer');return;}this.base=base;this.offset=0;this.length=base.length;}inherits(DecoderBuffer,Reporter);exports.DecoderBuffer=DecoderBuffer;DecoderBuffer.prototype.save=function save(){return{offset:this.offset,reporter:Reporter.prototype.save.call(this)};};DecoderBuffer.prototype.restore=function restore(save){const res=new DecoderBuffer(this.base);res.offset=save.offset;res.length=this.offset;this.offset=save.offset;Reporter.prototype.restore.call(this,save.reporter);return res;};DecoderBuffer.prototype.isEmpty=function isEmpty(){return this.offset===this.length;};DecoderBuffer.prototype.readUInt8=function readUInt8(fail){if(this.offset+1<=this.length)return this.base.readUInt8(this.offset++,true);else return this.error(fail||'DecoderBuffer overrun');};DecoderBuffer.prototype.skip=function skip(bytes,fail){if(!(this.offset+bytes<=this.length))return this.error(fail||'DecoderBuffer overrun');const res=new DecoderBuffer(this.base);res._reporterState=this._reporterState;res.offset=this.offset;res.length=this.offset+bytes;this.offset+=bytes;return res;};DecoderBuffer.prototype.raw=function raw(save){return this.base.slice(save?save.offset:this.offset,this.length);};function EncoderBuffer(value,reporter){if(Array.isArray(value)){this.length=0;this.value=value.map(function(item){if(!(item instanceof EncoderBuffer))item=new EncoderBuffer(item,reporter);this.length+=item.length;return item;},this);}else if(typeof value==='number'){if(!(0<=value&&value<=0xff))return reporter.error('non-byte EncoderBuffer value');this.value=value;this.length=1;}else if(typeof value==='string'){this.value=value;this.length=Buffer.byteLength(value);}else if(Buffer.isBuffer(value)){this.value=value;this.length=value.length;}else{return reporter.error('Unsupported type: '+typeof value);}}exports.EncoderBuffer=EncoderBuffer;EncoderBuffer.prototype.join=function join(out,offset){if(!out)out=new Buffer(this.length);if(!offset)offset=0;if(this.length===0)return out;if(Array.isArray(this.value)){this.value.forEach(function(item){item.join(out,offset);offset+=item.length;});}else{if(typeof this.value==='number')out[offset]=this.value;else if(typeof this.value==='string')out.write(this.value,offset);else if(Buffer.isBuffer(this.value))this.value.copy(out,offset);offset+=this.length;}return out;};},5097:function(__unusedmodule,exports){var once=exports.once=function(value){return function(abort,cb){if(abort)return cb(abort);if(value!=null){var _value=value;value=null;cb(null,_value);}else cb(true);};};var depthFirst=exports.depthFirst=function(start,createStream){var reads=[],ended;reads.unshift(once(start));return function next(end,cb){if(!reads.length)return cb(true);if(ended)return cb(ended);reads[0](end,function(end,data){if(end){if(end!==true){ended=end;reads.shift();while(reads.length)reads.shift()(end,function(){});return cb(end);}reads.shift();return next(null,cb);}reads.unshift(createStream(data));cb(end,data);});};};var widthFirst=exports.widthFirst=function(start,createStream){var reads=[];reads.push(once(start));return function next(end,cb){if(!reads.length)return cb(true);reads[0](end,function(end,data){if(end){reads.shift();return next(null,cb);}reads.push(createStream(data));cb(end,data);});};};var leafFirst=exports.leafFirst=function(start,createStream){var reads=[];var output=[];reads.push(once(start));return function next(end,cb){reads[0](end,function(end,data){if(end){reads.shift();if(!output.length)return cb(true);return cb(null,output.shift());}reads.unshift(createStream(data));output.unshift(data);next(null,cb);});};};},5099:function(module,__unusedexports,__webpack_require__){const Buffer=__webpack_require__(7572).Buffer;const bip66=__webpack_require__(560);const ecc=__webpack_require__(6290);const pushdata=__webpack_require__(646);const typeforce=__webpack_require__(2809);const types=__webpack_require__(8781);const scriptNumber=__webpack_require__(641);const OPS=__webpack_require__(9710);const REVERSE_OPS=__webpack_require__(372);const OP_INT_BASE=OPS.OP_RESERVED;function isOPInt(value){return types.Number(value)&&(value===OPS.OP_0||value>=OPS.OP_1&&value<=OPS.OP_16||value===OPS.OP_1NEGATE);}function isPushOnlyChunk(value){return types.Buffer(value)||isOPInt(value);}function isPushOnly(value){return types.Array(value)&&value.every(isPushOnlyChunk);}function asMinimalOP(buffer){if(buffer.length===0)return OPS.OP_0;if(buffer.length!==1)return;if(buffer[0]>=1&&buffer[0]<=16)return OP_INT_BASE+buffer[0];if(buffer[0]===0x81)return OPS.OP_1NEGATE;}function compile(chunks){if(Buffer.isBuffer(chunks))return chunks;typeforce(types.Array,chunks);const bufferSize=chunks.reduce(function(accum,chunk){if(Buffer.isBuffer(chunk)){if(chunk.length===1&&asMinimalOP(chunk)!==undefined){return accum+1;}return accum+pushdata.encodingLength(chunk.length)+chunk.length;}return accum+1;},0.0);const buffer=Buffer.allocUnsafe(bufferSize);let offset=0;chunks.forEach(function(chunk){if(Buffer.isBuffer(chunk)){const opcode=asMinimalOP(chunk);if(opcode!==undefined){buffer.writeUInt8(opcode,offset);offset+=1;return;}offset+=pushdata.encode(buffer,chunk.length,offset);chunk.copy(buffer,offset);offset+=chunk.length;}else{buffer.writeUInt8(chunk,offset);offset+=1;}});if(offset!==buffer.length)throw new Error('Could not decode chunks');return buffer;}function decompile(buffer){if(types.Array(buffer))return buffer;typeforce(types.Buffer,buffer);const chunks=[];let i=0;while(i<buffer.length){const opcode=buffer[i];if(opcode>OPS.OP_0&&opcode<=OPS.OP_PUSHDATA4){const d=pushdata.decode(buffer,i);if(d===null)return null;i+=d.size;if(i+d.number>buffer.length)return null;const data=buffer.slice(i,i+d.number);i+=d.number;const op=asMinimalOP(data);if(op!==undefined){chunks.push(op);}else{chunks.push(data);}}else{chunks.push(opcode);i+=1;}}return chunks;}function toASM(chunks){if(Buffer.isBuffer(chunks)){chunks=decompile(chunks);}return chunks.map(function(chunk){if(Buffer.isBuffer(chunk)){const op=asMinimalOP(chunk);if(op===undefined)return chunk.toString('hex');chunk=op;}return REVERSE_OPS[chunk];}).join(' ');}function fromASM(asm){typeforce(types.String,asm);return compile(asm.split(' ').map(function(chunkStr){if(OPS[chunkStr]!==undefined)return OPS[chunkStr];typeforce(types.Hex,chunkStr);return Buffer.from(chunkStr,'hex');}));}function toStack(chunks){chunks=decompile(chunks);typeforce(isPushOnly,chunks);return chunks.map(function(op){if(Buffer.isBuffer(op))return op;if(op===OPS.OP_0)return Buffer.allocUnsafe(0);return scriptNumber.encode(op-OP_INT_BASE);});}function isCanonicalPubKey(buffer){return ecc.isPoint(buffer);}function isDefinedHashType(hashType){const hashTypeMod=hashType&~0x80;return hashTypeMod>0x00&&hashTypeMod<0x04;}function isCanonicalScriptSignature(buffer){if(!Buffer.isBuffer(buffer))return false;if(!isDefinedHashType(buffer[buffer.length-1]))return false;return bip66.check(buffer.slice(0,-1));}module.exports={compile:compile,decompile:decompile,fromASM:fromASM,toASM:toASM,toStack:toStack,number:__webpack_require__(641),signature:__webpack_require__(104),isCanonicalPubKey:isCanonicalPubKey,isCanonicalScriptSignature:isCanonicalScriptSignature,isPushOnly:isPushOnly,isDefinedHashType:isDefinedHashType};},5100:function(__unusedmodule,exports,__webpack_require__){"use strict";var Buffer=__webpack_require__(1173).Buffer;exports.utf16be=Utf16BECodec;function Utf16BECodec(){}Utf16BECodec.prototype.encoder=Utf16BEEncoder;Utf16BECodec.prototype.decoder=Utf16BEDecoder;Utf16BECodec.prototype.bomAware=true;function Utf16BEEncoder(){}Utf16BEEncoder.prototype.write=function(str){var buf=Buffer.from(str,'ucs2');for(var i=0;i<buf.length;i+=2){var tmp=buf[i];buf[i]=buf[i+1];buf[i+1]=tmp;}return buf;};Utf16BEEncoder.prototype.end=function(){};function Utf16BEDecoder(){this.overflowByte=-1;}Utf16BEDecoder.prototype.write=function(buf){if(buf.length==0)return'';var buf2=Buffer.alloc(buf.length+1),i=0,j=0;if(this.overflowByte!==-1){buf2[0]=buf[0];buf2[1]=this.overflowByte;i=1;j=2;}for(;i<buf.length-1;i+=2,j+=2){buf2[j]=buf[i+1];buf2[j+1]=buf[i];}this.overflowByte=i==buf.length-1?buf[buf.length-1]:-1;return buf2.slice(0,j).toString('ucs2');};Utf16BEDecoder.prototype.end=function(){};exports.utf16=Utf16Codec;function Utf16Codec(codecOptions,iconv){this.iconv=iconv;}Utf16Codec.prototype.encoder=Utf16Encoder;Utf16Codec.prototype.decoder=Utf16Decoder;function Utf16Encoder(options,codec){options=options||{};if(options.addBOM===undefined)options.addBOM=true;this.encoder=codec.iconv.getEncoder('utf-16le',options);}Utf16Encoder.prototype.write=function(str){return this.encoder.write(str);};Utf16Encoder.prototype.end=function(){return this.encoder.end();};function Utf16Decoder(options,codec){this.decoder=null;this.initialBytes=[];this.initialBytesLen=0;this.options=options||{};this.iconv=codec.iconv;}Utf16Decoder.prototype.write=function(buf){if(!this.decoder){this.initialBytes.push(buf);this.initialBytesLen+=buf.length;if(this.initialBytesLen<16)return'';var buf=Buffer.concat(this.initialBytes),encoding=detectEncoding(buf,this.options.defaultEncoding);this.decoder=this.iconv.getDecoder(encoding,this.options);this.initialBytes.length=this.initialBytesLen=0;}return this.decoder.write(buf);};Utf16Decoder.prototype.end=function(){if(!this.decoder){var buf=Buffer.concat(this.initialBytes),encoding=detectEncoding(buf,this.options.defaultEncoding);this.decoder=this.iconv.getDecoder(encoding,this.options);var res=this.decoder.write(buf),trail=this.decoder.end();return trail?res+trail:res;}return this.decoder.end();};function detectEncoding(buf,defaultEncoding){var enc=defaultEncoding||'utf-16le';if(buf.length>=2){if(buf[0]==0xFE&&buf[1]==0xFF)enc='utf-16be';else if(buf[0]==0xFF&&buf[1]==0xFE)enc='utf-16le';else{var asciiCharsLE=0,asciiCharsBE=0,_len=Math.min(buf.length-buf.length%2,64);for(var i=0;i<_len;i+=2){if(buf[i]===0&&buf[i+1]!==0)asciiCharsBE++;if(buf[i]!==0&&buf[i+1]===0)asciiCharsLE++;}if(asciiCharsBE>asciiCharsLE)enc='utf-16be';else if(asciiCharsBE<asciiCharsLE)enc='utf-16le';}}return enc;}},5105:function(module,__unusedexports,__webpack_require__){var forge=__webpack_require__(7938);__webpack_require__(1214);var pem=module.exports=forge.pem=forge.pem||{};pem.encode=function(msg,options){options=options||{};var rval='-----BEGIN '+msg.type+'-----\r\n';var header;if(msg.procType){header={name:'Proc-Type',values:[String(msg.procType.version),msg.procType.type]};rval+=foldHeader(header);}if(msg.contentDomain){header={name:'Content-Domain',values:[msg.contentDomain]};rval+=foldHeader(header);}if(msg.dekInfo){header={name:'DEK-Info',values:[msg.dekInfo.algorithm]};if(msg.dekInfo.parameters){header.values.push(msg.dekInfo.parameters);}rval+=foldHeader(header);}if(msg.headers){for(var i=0;i<msg.headers.length;++i){rval+=foldHeader(msg.headers[i]);}}if(msg.procType){rval+='\r\n';}rval+=forge.util.encode64(msg.body,options.maxline||64)+'\r\n';rval+='-----END '+msg.type+'-----\r\n';return rval;};pem.decode=function(str){var rval=[];var rMessage=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g;var rHeader=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/;var rCRLF=/\r?\n/;var match;while(true){match=rMessage.exec(str);if(!match){break;}var msg={type:match[1],procType:null,contentDomain:null,dekInfo:null,headers:[],body:forge.util.decode64(match[3])};rval.push(msg);if(!match[2]){continue;}var lines=match[2].split(rCRLF);var li=0;while(match&&li<lines.length){var line=lines[li].replace(/\s+$/,'');for(var nl=li+1;nl<lines.length;++nl){var next=lines[nl];if(!/\s/.test(next[0])){break;}line+=next;li=nl;}match=line.match(rHeader);if(match){var header={name:match[1],values:[]};var values=match[2].split(',');for(var vi=0;vi<values.length;++vi){header.values.push(ltrim(values[vi]));}if(!msg.procType){if(header.name!=='Proc-Type'){throw new Error('Invalid PEM formatted message. The first '+'encapsulated header must be "Proc-Type".');}else if(header.values.length!==2){throw new Error('Invalid PEM formatted message. The "Proc-Type" '+'header must have two subfields.');}msg.procType={version:values[0],type:values[1]};}else if(!msg.contentDomain&&header.name==='Content-Domain'){msg.contentDomain=values[0]||'';}else if(!msg.dekInfo&&header.name==='DEK-Info'){if(header.values.length===0){throw new Error('Invalid PEM formatted message. The "DEK-Info" '+'header must have at least one subfield.');}msg.dekInfo={algorithm:values[0],parameters:values[1]||null};}else{msg.headers.push(header);}}++li;}if(msg.procType==='ENCRYPTED'&&!msg.dekInfo){throw new Error('Invalid PEM formatted message. The "DEK-Info" '+'header must be present if "Proc-Type" is "ENCRYPTED".');}}if(rval.length===0){throw new Error('Invalid PEM formatted message.');}return rval;};function foldHeader(header){var rval=header.name+': ';var values=[];var insertSpace=function(match,$1){return' '+$1;};for(var i=0;i<header.values.length;++i){values.push(header.values[i].replace(/^(\S+\r\n)/,insertSpace));}rval+=values.join(',')+'\r\n';var length=0;var candidate=-1;for(var i=0;i<rval.length;++i,++length){if(length>65&&candidate!==-1){var insert=rval[candidate];if(insert===','){++candidate;rval=rval.substr(0,candidate)+'\r\n '+rval.substr(candidate);}else{rval=rval.substr(0,candidate)+'\r\n'+insert+rval.substr(candidate+1);}length=i-candidate-1;candidate=-1;++i;}else if(rval[i]===' '||rval[i]==='\t'||rval[i]===','){candidate=i;}}return rval;}function ltrim(str){return str.replace(/^\s+/,'');}},5106:function(module){"use strict";function destroy(err,cb){var _this=this;var readableDestroyed=this._readableState&&this._readableState.destroyed;var writableDestroyed=this._writableState&&this._writableState.destroyed;if(readableDestroyed||writableDestroyed){if(cb){cb(err);}else if(err&&(!this._writableState||!this._writableState.errorEmitted)){process.nextTick(emitErrorNT,this,err);}return this;}if(this._readableState){this._readableState.destroyed=true;}if(this._writableState){this._writableState.destroyed=true;}this._destroy(err||null,function(err){if(!cb&&err){process.nextTick(emitErrorAndCloseNT,_this,err);if(_this._writableState){_this._writableState.errorEmitted=true;}}else if(cb){process.nextTick(emitCloseNT,_this);cb(err);}else{process.nextTick(emitCloseNT,_this);}});return this;}function emitErrorAndCloseNT(self,err){emitErrorNT(self,err);emitCloseNT(self);}function emitCloseNT(self){if(self._writableState&&!self._writableState.emitClose)return;if(self._readableState&&!self._readableState.emitClose)return;self.emit('close');}function undestroy(){if(this._readableState){this._readableState.destroyed=false;this._readableState.reading=false;this._readableState.ended=false;this._readableState.endEmitted=false;}if(this._writableState){this._writableState.destroyed=false;this._writableState.ended=false;this._writableState.ending=false;this._writableState.finalCalled=false;this._writableState.prefinished=false;this._writableState.finished=false;this._writableState.errorEmitted=false;}}function emitErrorNT(self,err){self.emit('error',err);}module.exports={destroy:destroy,undestroy:undestroy};},5107:function(module,__unusedexports,__webpack_require__){"use strict";var errors=__webpack_require__(6379);var _=__webpack_require__(6064);module.exports={checkState:function(condition,message){if(!condition){throw new errors.InvalidState(message);}},checkArgument:function(condition,argumentName,message,docsPath){if(!condition){throw new errors.InvalidArgument(argumentName,message,docsPath);}},checkArgumentType:function(argument,type,argumentName){argumentName=argumentName||'(unknown name)';if(_.isString(type)){if(type==='Buffer'){var BufferUtil=__webpack_require__(9657);if(!BufferUtil.isBuffer(argument)){throw new errors.InvalidArgumentType(argument,type,argumentName);}}else if(typeof argument!==type){throw new errors.InvalidArgumentType(argument,type,argumentName);}}else{if(!(argument instanceof type)){throw new errors.InvalidArgumentType(argument,type.name,argumentName);}}}};},5108:function(module,__unusedexports,__webpack_require__){var baseIsArguments=__webpack_require__(1846),isObjectLike=__webpack_require__(2321);var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;var propertyIsEnumerable=objectProto.propertyIsEnumerable;var isArguments=baseIsArguments(function(){return arguments;}())?baseIsArguments:function(value){return isObjectLike(value)&&hasOwnProperty.call(value,'callee')&&!propertyIsEnumerable.call(value,'callee');};module.exports=isArguments;},5115:function(__unusedmodule,exports,__webpack_require__){"use strict";const ciphers=__webpack_require__(3432);const CIPHER_MODES={16:'aes-128-ctr',32:'aes-256-ctr'};exports.create=function(key,iv,callback){const mode=CIPHER_MODES[key.length];if(!mode){return callback(new Error('Invalid key length'));}const cipher=ciphers.createCipheriv(mode,key,iv);const decipher=ciphers.createDecipheriv(mode,key,iv);const res={encrypt(data,cb){cb(null,cipher.update(data));},decrypt(data,cb){cb(null,decipher.update(data));}};callback(null,res);};},5121:function(__unusedmodule,exports){"use strict";var utils=exports;utils.assert=function assert(val,msg){if(!val)throw new Error(msg||'Assertion failed');};function toArray(msg,enc){if(Array.isArray(msg))return msg.slice();if(!msg)return[];var res=[];if(typeof msg!=='string'){for(var i=0;i<msg.length;i++)res[i]=msg[i]|0;return res;}if(!enc){for(var i=0;i<msg.length;i++){var c=msg.charCodeAt(i);var hi=c>>8;var lo=c&0xff;if(hi)res.push(hi,lo);else res.push(lo);}}else if(enc==='hex'){msg=msg.replace(/[^a-z0-9]+/ig,'');if(msg.length%2!==0)msg='0'+msg;for(var i=0;i<msg.length;i+=2)res.push(parseInt(msg[i]+msg[i+1],16));}return res;}utils.toArray=toArray;function zero2(word){if(word.length===1)return'0'+word;else return word;}utils.zero2=zero2;function toHex(msg){var res='';for(var i=0;i<msg.length;i++)res+=zero2(msg[i].toString(16));return res;}utils.toHex=toHex;utils.encode=function encode(arr,enc){if(enc==='hex')return toHex(arr);else return arr;};function getNAF(num,w){var naf=[];var ws=1<<w+1;var k=num.clone();while(k.cmpn(1)>=0){var z;if(k.isOdd()){var mod=k.andln(ws-1);if(mod>(ws>>1)-1)z=(ws>>1)-mod;else z=mod;k.isubn(z);}else{z=0;}naf.push(z);var shift=k.cmpn(0)!==0&&k.andln(ws-1)===0?w+1:1;for(var i=1;i<shift;i++)naf.push(0);k.ishrn(shift);}return naf;}utils.getNAF=getNAF;function getJSF(k1,k2){var jsf=[[],[]];k1=k1.clone();k2=k2.clone();var d1=0;var d2=0;while(k1.cmpn(-d1)>0||k2.cmpn(-d2)>0){var m14=k1.andln(3)+d1&3;var m24=k2.andln(3)+d2&3;if(m14===3)m14=-1;if(m24===3)m24=-1;var u1;if((m14&1)===0){u1=0;}else{var m8=k1.andln(7)+d1&7;if((m8===3||m8===5)&&m24===2)u1=-m14;else u1=m14;}jsf[0].push(u1);var u2;if((m24&1)===0){u2=0;}else{var m8=k2.andln(7)+d2&7;if((m8===3||m8===5)&&m14===2)u2=-m24;else u2=m24;}jsf[1].push(u2);if(2*d1===u1+1)d1=1-d1;if(2*d2===u2+1)d2=1-d2;k1.ishrn(1);k2.ishrn(1);}return jsf;}utils.getJSF=getJSF;},5125:function(module,__unusedexports,__webpack_require__){"use strict";const extend=__webpack_require__(5316);const UnixFS=__webpack_require__(7959);const pull=__webpack_require__(418);const values=__webpack_require__(5130);const collect=__webpack_require__(8342);const through=__webpack_require__(300);const pullThrough=__webpack_require__(6308);const parallel=__webpack_require__(4876);const waterfall=__webpack_require__(4265);const paraMap=__webpack_require__(3515);const persist=__webpack_require__(7730);const reduce=__webpack_require__(3360);const{DAGNode}=__webpack_require__(7421);const defaultOptions={chunkerOptions:{maxChunkSize:262144,avgChunkSize:262144},rawLeaves:false,hashAlg:'sha2-256',leafType:'file',cidVersion:0,progress:()=>{}};module.exports=function builder(createChunker,ipld,createReducer,_options){const options=extend({},defaultOptions,_options);options.progress=typeof options.progress==='function'?options.progress:defaultOptions.progress;return function(source){return function(items,cb){parallel(items.map(item=>cb=>{if(!item.content){return createAndStoreDir(item,(err,node)=>{if(err){return cb(err);}if(node){source.push(node);}cb();});}createAndStoreFile(item,(err,node)=>{if(err){return cb(err);}if(node){source.push(node);}cb();});}),cb);};};function createAndStoreDir(item,callback){const d=new UnixFS('directory');waterfall([cb=>DAGNode.create(d.marshal(),[],cb),(node,cb)=>persist(node,ipld,options,cb)],(err,result)=>{if(err){return callback(err);}callback(null,{path:item.path,multihash:result.cid.buffer,size:result.node.size});});}function createAndStoreFile(file,callback){if(Buffer.isBuffer(file.content)){file.content=values([file.content]);}if(typeof file.content!=='function'){return callback(new Error('invalid content'));}const reducer=createReducer(reduce(file,ipld,options),options);let chunker;try{chunker=createChunker(options.chunkerOptions);}catch(error){return callback(error);}let previous;let count=0;pull(file.content,chunker,through(buffer=>{options.progress(buffer.length);}),paraMap((buffer,callback)=>{waterfall([cb=>{if(options.rawLeaves){return cb(null,{size:buffer.length,leafSize:buffer.length,data:buffer});}const file=new UnixFS(options.leafType,buffer);DAGNode.create(file.marshal(),[],(err,node)=>{if(err){return cb(err);}cb(null,{size:node.size,leafSize:file.fileSize(),data:node});});},(leaf,cb)=>{persist(leaf.data,ipld,options,(error,results)=>{if(error){return cb(error);}cb(null,{size:leaf.size,leafSize:leaf.leafSize,data:results.node,multihash:results.cid.buffer,path:leaf.path,name:''});});}],callback);}),pullThrough(function onData(data){count++;if(previous){this.queue(previous);}previous=data;},function ended(){if(previous){if(count===1){previous.single=true;}this.queue(previous);}this.queue(null);}),reducer,collect((err,roots)=>{if(err){callback(err);}else{callback(null,roots[0]);}}));}};},5130:function(module,__unusedexports,__webpack_require__){"use strict";var abortCb=__webpack_require__(4379);module.exports=function values(array,onAbort){if(!array)return function(abort,cb){if(abort)return abortCb(cb,abort,onAbort);return cb(true);};if(!Array.isArray(array))array=Object.keys(array).map(function(k){return array[k];});var i=0;return function(abort,cb){if(abort)return abortCb(cb,abort,onAbort);if(i>=array.length)cb(true);else cb(null,array[i++]);};};},5142:function(module,__unusedexports,__webpack_require__){"use strict";var _=__webpack_require__(6064);var Script=__webpack_require__(9372);var Opcode=__webpack_require__(6862);var BN=__webpack_require__(6122);var Hash=__webpack_require__(2442);var Signature=__webpack_require__(406);var PublicKey=__webpack_require__(4721);var Interpreter=function Interpreter(obj){if(!(this instanceof Interpreter)){return new Interpreter(obj);}if(obj){this.initialize();this.set(obj);}else{this.initialize();}};Interpreter.prototype.verify=function(scriptSig,scriptPubkey,tx,nin,flags){var Transaction=__webpack_require__(2548);if(_.isUndefined(tx)){tx=new Transaction();}if(_.isUndefined(nin)){nin=0;}if(_.isUndefined(flags)){flags=0;}this.set({script:scriptSig,tx:tx,nin:nin,flags:flags});var stackCopy;if((flags&Interpreter.SCRIPT_VERIFY_SIGPUSHONLY)!==0&&!scriptSig.isPushOnly()){this.errstr='SCRIPT_ERR_SIG_PUSHONLY';return false;}if(!this.evaluate()){return false;}if(flags&Interpreter.SCRIPT_VERIFY_P2SH){stackCopy=this.stack.slice();}var stack=this.stack;this.initialize();this.set({script:scriptPubkey,stack:stack,tx:tx,nin:nin,flags:flags});if(!this.evaluate()){return false;}if(this.stack.length===0){this.errstr='SCRIPT_ERR_EVAL_FALSE_NO_RESULT';return false;}var buf=this.stack[this.stack.length-1];if(!Interpreter.castToBool(buf)){this.errstr='SCRIPT_ERR_EVAL_FALSE_IN_STACK';return false;}if(flags&Interpreter.SCRIPT_VERIFY_P2SH&&scriptPubkey.isScriptHashOut()){if(!scriptSig.isPushOnly()){this.errstr='SCRIPT_ERR_SIG_PUSHONLY';return false;}if(stackCopy.length===0){throw new Error('internal error - stack copy empty');}var redeemScriptSerialized=stackCopy[stackCopy.length-1];var redeemScript=Script.fromBuffer(redeemScriptSerialized);stackCopy.pop();this.initialize();this.set({script:redeemScript,stack:stackCopy,tx:tx,nin:nin,flags:flags});if(!this.evaluate()){return false;}if(stackCopy.length===0){this.errstr='SCRIPT_ERR_EVAL_FALSE_NO_P2SH_STACK';return false;}if(!Interpreter.castToBool(stackCopy[stackCopy.length-1])){this.errstr='SCRIPT_ERR_EVAL_FALSE_IN_P2SH_STACK';return false;}else{return true;}}return true;};module.exports=Interpreter;Interpreter.prototype.initialize=function(obj){this.stack=[];this.altstack=[];this.pc=0;this.pbegincodehash=0;this.nOpCount=0;this.vfExec=[];this.errstr='';this.flags=0;};Interpreter.prototype.set=function(obj){this.script=obj.script||this.script;this.tx=obj.tx||this.tx;this.nin=typeof obj.nin!=='undefined'?obj.nin:this.nin;this.stack=obj.stack||this.stack;this.altstack=obj.altack||this.altstack;this.pc=typeof obj.pc!=='undefined'?obj.pc:this.pc;this.pbegincodehash=typeof obj.pbegincodehash!=='undefined'?obj.pbegincodehash:this.pbegincodehash;this.nOpCount=typeof obj.nOpCount!=='undefined'?obj.nOpCount:this.nOpCount;this.vfExec=obj.vfExec||this.vfExec;this.errstr=obj.errstr||this.errstr;this.flags=typeof obj.flags!=='undefined'?obj.flags:this.flags;};Interpreter.true=new Buffer([1]);Interpreter.false=new Buffer([]);Interpreter.MAX_SCRIPT_ELEMENT_SIZE=520;Interpreter.LOCKTIME_THRESHOLD=500000000;Interpreter.LOCKTIME_THRESHOLD_BN=new BN(Interpreter.LOCKTIME_THRESHOLD);Interpreter.SCRIPT_VERIFY_NONE=0;Interpreter.SCRIPT_VERIFY_P2SH=1<<0;Interpreter.SCRIPT_VERIFY_STRICTENC=1<<1;Interpreter.SCRIPT_VERIFY_DERSIG=1<<2;Interpreter.SCRIPT_VERIFY_LOW_S=1<<3;Interpreter.SCRIPT_VERIFY_NULLDUMMY=1<<4;Interpreter.SCRIPT_VERIFY_SIGPUSHONLY=1<<5;Interpreter.SCRIPT_VERIFY_MINIMALDATA=1<<6;Interpreter.SCRIPT_VERIFY_DISCOURAGE_UPGRADABLE_NOPS=1<<7;Interpreter.SCRIPT_VERIFY_CHECKLOCKTIMEVERIFY=1<<9;Interpreter.castToBool=function(buf){for(var i=0;i<buf.length;i++){if(buf[i]!==0){if(i===buf.length-1&&buf[i]===0x80){return false;}return true;}}return false;};Interpreter.prototype.checkSignatureEncoding=function(buf){var sig;if((this.flags&(Interpreter.SCRIPT_VERIFY_DERSIG|Interpreter.SCRIPT_VERIFY_LOW_S|Interpreter.SCRIPT_VERIFY_STRICTENC))!==0&&!Signature.isTxDER(buf)){this.errstr='SCRIPT_ERR_SIG_DER_INVALID_FORMAT';return false;}else if((this.flags&Interpreter.SCRIPT_VERIFY_LOW_S)!==0){sig=Signature.fromTxFormat(buf);if(!sig.hasLowS()){this.errstr='SCRIPT_ERR_SIG_DER_HIGH_S';return false;}}else if((this.flags&Interpreter.SCRIPT_VERIFY_STRICTENC)!==0){sig=Signature.fromTxFormat(buf);if(!sig.hasDefinedHashtype()){this.errstr='SCRIPT_ERR_SIG_HASHTYPE';return false;}}return true;};Interpreter.prototype.checkPubkeyEncoding=function(buf){if((this.flags&Interpreter.SCRIPT_VERIFY_STRICTENC)!==0&&!PublicKey.isValid(buf)){this.errstr='SCRIPT_ERR_PUBKEYTYPE';return false;}return true;};Interpreter.prototype.evaluate=function(){if(this.script.toBuffer().length>10000){this.errstr='SCRIPT_ERR_SCRIPT_SIZE';return false;}try{while(this.pc<this.script.chunks.length){var fSuccess=this.step();if(!fSuccess){return false;}}if(this.stack.length+this.altstack.length>1000){this.errstr='SCRIPT_ERR_STACK_SIZE';return false;}}catch(e){this.errstr='SCRIPT_ERR_UNKNOWN_ERROR: '+e;return false;}if(this.vfExec.length>0){this.errstr='SCRIPT_ERR_UNBALANCED_CONDITIONAL';return false;}return true;};Interpreter.prototype.checkLockTime=function(nLockTime){if(!(this.tx.nLockTime<Interpreter.LOCKTIME_THRESHOLD&&nLockTime.lt(Interpreter.LOCKTIME_THRESHOLD_BN)||this.tx.nLockTime>=Interpreter.LOCKTIME_THRESHOLD&&nLockTime.gte(Interpreter.LOCKTIME_THRESHOLD_BN))){return false;}if(nLockTime.gt(new BN(this.tx.nLockTime))){return false;}if(!this.tx.inputs[this.nin].isFinal()){return false;}return true;};Interpreter.prototype.step=function(){var fRequireMinimal=(this.flags&Interpreter.SCRIPT_VERIFY_MINIMALDATA)!==0;var fExec=this.vfExec.indexOf(false)===-1;var buf,buf1,buf2,spliced,n,x1,x2,bn,bn1,bn2,bufSig,bufPubkey,subscript;var sig,pubkey;var fValue,fSuccess;var chunk=this.script.chunks[this.pc];this.pc++;var opcodenum=chunk.opcodenum;if(_.isUndefined(opcodenum)){this.errstr='SCRIPT_ERR_UNDEFINED_OPCODE';return false;}if(chunk.buf&&chunk.buf.length>Interpreter.MAX_SCRIPT_ELEMENT_SIZE){this.errstr='SCRIPT_ERR_PUSH_SIZE';return false;}if(opcodenum>Opcode.OP_16&&++this.nOpCount>201){this.errstr='SCRIPT_ERR_OP_COUNT';return false;}if(opcodenum===Opcode.OP_CAT||opcodenum===Opcode.OP_SUBSTR||opcodenum===Opcode.OP_LEFT||opcodenum===Opcode.OP_RIGHT||opcodenum===Opcode.OP_INVERT||opcodenum===Opcode.OP_AND||opcodenum===Opcode.OP_OR||opcodenum===Opcode.OP_XOR||opcodenum===Opcode.OP_2MUL||opcodenum===Opcode.OP_2DIV||opcodenum===Opcode.OP_MUL||opcodenum===Opcode.OP_DIV||opcodenum===Opcode.OP_MOD||opcodenum===Opcode.OP_LSHIFT||opcodenum===Opcode.OP_RSHIFT){this.errstr='SCRIPT_ERR_DISABLED_OPCODE';return false;}if(fExec&&0<=opcodenum&&opcodenum<=Opcode.OP_PUSHDATA4){if(fRequireMinimal&&!this.script.checkMinimalPush(this.pc-1)){this.errstr='SCRIPT_ERR_MINIMALDATA';return false;}if(!chunk.buf){this.stack.push(Interpreter.false);}else if(chunk.len!==chunk.buf.length){throw new Error('Length of push value not equal to length of data');}else{this.stack.push(chunk.buf);}}else if(fExec||Opcode.OP_IF<=opcodenum&&opcodenum<=Opcode.OP_ENDIF){switch(opcodenum){case Opcode.OP_1NEGATE:case Opcode.OP_1:case Opcode.OP_2:case Opcode.OP_3:case Opcode.OP_4:case Opcode.OP_5:case Opcode.OP_6:case Opcode.OP_7:case Opcode.OP_8:case Opcode.OP_9:case Opcode.OP_10:case Opcode.OP_11:case Opcode.OP_12:case Opcode.OP_13:case Opcode.OP_14:case Opcode.OP_15:case Opcode.OP_16:{n=opcodenum-(Opcode.OP_1-1);buf=new BN(n).toScriptNumBuffer();this.stack.push(buf);}break;case Opcode.OP_NOP:break;case Opcode.OP_NOP2:case Opcode.OP_CHECKLOCKTIMEVERIFY:if(!(this.flags&Interpreter.SCRIPT_VERIFY_CHECKLOCKTIMEVERIFY)){if(this.flags&Interpreter.SCRIPT_VERIFY_DISCOURAGE_UPGRADABLE_NOPS){this.errstr='SCRIPT_ERR_DISCOURAGE_UPGRADABLE_NOPS';return false;}break;}if(this.stack.length<1){this.errstr='SCRIPT_ERR_INVALID_STACK_OPERATION';return false;}var nLockTime=BN.fromScriptNumBuffer(this.stack[this.stack.length-1],fRequireMinimal,5);if(nLockTime.lt(new BN(0))){this.errstr='SCRIPT_ERR_NEGATIVE_LOCKTIME';return false;}if(!this.checkLockTime(nLockTime)){this.errstr='SCRIPT_ERR_UNSATISFIED_LOCKTIME';return false;}break;case Opcode.OP_NOP1:case Opcode.OP_NOP3:case Opcode.OP_NOP4:case Opcode.OP_NOP5:case Opcode.OP_NOP6:case Opcode.OP_NOP7:case Opcode.OP_NOP8:case Opcode.OP_NOP9:case Opcode.OP_NOP10:{if(this.flags&Interpreter.SCRIPT_VERIFY_DISCOURAGE_UPGRADABLE_NOPS){this.errstr='SCRIPT_ERR_DISCOURAGE_UPGRADABLE_NOPS';return false;}}break;case Opcode.OP_IF:case Opcode.OP_NOTIF:{fValue=false;if(fExec){if(this.stack.length<1){this.errstr='SCRIPT_ERR_UNBALANCED_CONDITIONAL';return false;}buf=this.stack.pop();fValue=Interpreter.castToBool(buf);if(opcodenum===Opcode.OP_NOTIF){fValue=!fValue;}}this.vfExec.push(fValue);}break;case Opcode.OP_ELSE:{if(this.vfExec.length===0){this.errstr='SCRIPT_ERR_UNBALANCED_CONDITIONAL';return false;}this.vfExec[this.vfExec.length-1]=!this.vfExec[this.vfExec.length-1];}break;case Opcode.OP_ENDIF:{if(this.vfExec.length===0){this.errstr='SCRIPT_ERR_UNBALANCED_CONDITIONAL';return false;}this.vfExec.pop();}break;case Opcode.OP_VERIFY:{if(this.stack.length<1){this.errstr='SCRIPT_ERR_INVALID_STACK_OPERATION';return false;}buf=this.stack[this.stack.length-1];fValue=Interpreter.castToBool(buf);if(fValue){this.stack.pop();}else{this.errstr='SCRIPT_ERR_VERIFY';return false;}}break;case Opcode.OP_RETURN:{this.errstr='SCRIPT_ERR_OP_RETURN';return false;}break;case Opcode.OP_TOALTSTACK:{if(this.stack.length<1){this.errstr='SCRIPT_ERR_INVALID_STACK_OPERATION';return false;}this.altstack.push(this.stack.pop());}break;case Opcode.OP_FROMALTSTACK:{if(this.altstack.length<1){this.errstr='SCRIPT_ERR_INVALID_ALTSTACK_OPERATION';return false;}this.stack.push(this.altstack.pop());}break;case Opcode.OP_2DROP:{if(this.stack.length<2){this.errstr='SCRIPT_ERR_INVALID_STACK_OPERATION';return false;}this.stack.pop();this.stack.pop();}break;case Opcode.OP_2DUP:{if(this.stack.length<2){this.errstr='SCRIPT_ERR_INVALID_STACK_OPERATION';return false;}buf1=this.stack[this.stack.length-2];buf2=this.stack[this.stack.length-1];this.stack.push(buf1);this.stack.push(buf2);}break;case Opcode.OP_3DUP:{if(this.stack.length<3){this.errstr='SCRIPT_ERR_INVALID_STACK_OPERATION';return false;}buf1=this.stack[this.stack.length-3];buf2=this.stack[this.stack.length-2];var buf3=this.stack[this.stack.length-1];this.stack.push(buf1);this.stack.push(buf2);this.stack.push(buf3);}break;case Opcode.OP_2OVER:{if(this.stack.length<4){this.errstr='SCRIPT_ERR_INVALID_STACK_OPERATION';return false;}buf1=this.stack[this.stack.length-4];buf2=this.stack[this.stack.length-3];this.stack.push(buf1);this.stack.push(buf2);}break;case Opcode.OP_2ROT:{if(this.stack.length<6){this.errstr='SCRIPT_ERR_INVALID_STACK_OPERATION';return false;}spliced=this.stack.splice(this.stack.length-6,2);this.stack.push(spliced[0]);this.stack.push(spliced[1]);}break;case Opcode.OP_2SWAP:{if(this.stack.length<4){this.errstr='SCRIPT_ERR_INVALID_STACK_OPERATION';return false;}spliced=this.stack.splice(this.stack.length-4,2);this.stack.push(spliced[0]);this.stack.push(spliced[1]);}break;case Opcode.OP_IFDUP:{if(this.stack.length<1){this.errstr='SCRIPT_ERR_INVALID_STACK_OPERATION';return false;}buf=this.stack[this.stack.length-1];fValue=Interpreter.castToBool(buf);if(fValue){this.stack.push(buf);}}break;case Opcode.OP_DEPTH:{buf=new BN(this.stack.length).toScriptNumBuffer();this.stack.push(buf);}break;case Opcode.OP_DROP:{if(this.stack.length<1){this.errstr='SCRIPT_ERR_INVALID_STACK_OPERATION';return false;}this.stack.pop();}break;case Opcode.OP_DUP:{if(this.stack.length<1){this.errstr='SCRIPT_ERR_INVALID_STACK_OPERATION';return false;}this.stack.push(this.stack[this.stack.length-1]);}break;case Opcode.OP_NIP:{if(this.stack.length<2){this.errstr='SCRIPT_ERR_INVALID_STACK_OPERATION';return false;}this.stack.splice(this.stack.length-2,1);}break;case Opcode.OP_OVER:{if(this.stack.length<2){this.errstr='SCRIPT_ERR_INVALID_STACK_OPERATION';return false;}this.stack.push(this.stack[this.stack.length-2]);}break;case Opcode.OP_PICK:case Opcode.OP_ROLL:{if(this.stack.length<2){this.errstr='SCRIPT_ERR_INVALID_STACK_OPERATION';return false;}buf=this.stack[this.stack.length-1];bn=BN.fromScriptNumBuffer(buf,fRequireMinimal);n=bn.toNumber();this.stack.pop();if(n<0||n>=this.stack.length){this.errstr='SCRIPT_ERR_INVALID_STACK_OPERATION';return false;}buf=this.stack[this.stack.length-n-1];if(opcodenum===Opcode.OP_ROLL){this.stack.splice(this.stack.length-n-1,1);}this.stack.push(buf);}break;case Opcode.OP_ROT:{if(this.stack.length<3){this.errstr='SCRIPT_ERR_INVALID_STACK_OPERATION';return false;}x1=this.stack[this.stack.length-3];x2=this.stack[this.stack.length-2];var x3=this.stack[this.stack.length-1];this.stack[this.stack.length-3]=x2;this.stack[this.stack.length-2]=x3;this.stack[this.stack.length-1]=x1;}break;case Opcode.OP_SWAP:{if(this.stack.length<2){this.errstr='SCRIPT_ERR_INVALID_STACK_OPERATION';return false;}x1=this.stack[this.stack.length-2];x2=this.stack[this.stack.length-1];this.stack[this.stack.length-2]=x2;this.stack[this.stack.length-1]=x1;}break;case Opcode.OP_TUCK:{if(this.stack.length<2){this.errstr='SCRIPT_ERR_INVALID_STACK_OPERATION';return false;}this.stack.splice(this.stack.length-2,0,this.stack[this.stack.length-1]);}break;case Opcode.OP_SIZE:{if(this.stack.length<1){this.errstr='SCRIPT_ERR_INVALID_STACK_OPERATION';return false;}bn=new BN(this.stack[this.stack.length-1].length);this.stack.push(bn.toScriptNumBuffer());}break;case Opcode.OP_EQUAL:case Opcode.OP_EQUALVERIFY:{if(this.stack.length<2){this.errstr='SCRIPT_ERR_INVALID_STACK_OPERATION';return false;}buf1=this.stack[this.stack.length-2];buf2=this.stack[this.stack.length-1];var fEqual=buf1.toString('hex')===buf2.toString('hex');this.stack.pop();this.stack.pop();this.stack.push(fEqual?Interpreter.true:Interpreter.false);if(opcodenum===Opcode.OP_EQUALVERIFY){if(fEqual){this.stack.pop();}else{this.errstr='SCRIPT_ERR_EQUALVERIFY';return false;}}}break;case Opcode.OP_1ADD:case Opcode.OP_1SUB:case Opcode.OP_NEGATE:case Opcode.OP_ABS:case Opcode.OP_NOT:case Opcode.OP_0NOTEQUAL:{if(this.stack.length<1){this.errstr='SCRIPT_ERR_INVALID_STACK_OPERATION';return false;}buf=this.stack[this.stack.length-1];bn=BN.fromScriptNumBuffer(buf,fRequireMinimal);switch(opcodenum){case Opcode.OP_1ADD:bn=bn.add(BN.One);break;case Opcode.OP_1SUB:bn=bn.sub(BN.One);break;case Opcode.OP_NEGATE:bn=bn.neg();break;case Opcode.OP_ABS:if(bn.cmp(BN.Zero)<0){bn=bn.neg();}break;case Opcode.OP_NOT:bn=new BN((bn.cmp(BN.Zero)===0)+0);break;case Opcode.OP_0NOTEQUAL:bn=new BN((bn.cmp(BN.Zero)!==0)+0);break;}this.stack.pop();this.stack.push(bn.toScriptNumBuffer());}break;case Opcode.OP_ADD:case Opcode.OP_SUB:case Opcode.OP_BOOLAND:case Opcode.OP_BOOLOR:case Opcode.OP_NUMEQUAL:case Opcode.OP_NUMEQUALVERIFY:case Opcode.OP_NUMNOTEQUAL:case Opcode.OP_LESSTHAN:case Opcode.OP_GREATERTHAN:case Opcode.OP_LESSTHANOREQUAL:case Opcode.OP_GREATERTHANOREQUAL:case Opcode.OP_MIN:case Opcode.OP_MAX:{if(this.stack.length<2){this.errstr='SCRIPT_ERR_INVALID_STACK_OPERATION';return false;}bn1=BN.fromScriptNumBuffer(this.stack[this.stack.length-2],fRequireMinimal);bn2=BN.fromScriptNumBuffer(this.stack[this.stack.length-1],fRequireMinimal);bn=new BN(0);switch(opcodenum){case Opcode.OP_ADD:bn=bn1.add(bn2);break;case Opcode.OP_SUB:bn=bn1.sub(bn2);break;case Opcode.OP_BOOLAND:bn=new BN((bn1.cmp(BN.Zero)!==0&&bn2.cmp(BN.Zero)!==0)+0);break;case Opcode.OP_BOOLOR:bn=new BN((bn1.cmp(BN.Zero)!==0||bn2.cmp(BN.Zero)!==0)+0);break;case Opcode.OP_NUMEQUAL:bn=new BN((bn1.cmp(bn2)===0)+0);break;case Opcode.OP_NUMEQUALVERIFY:bn=new BN((bn1.cmp(bn2)===0)+0);break;case Opcode.OP_NUMNOTEQUAL:bn=new BN((bn1.cmp(bn2)!==0)+0);break;case Opcode.OP_LESSTHAN:bn=new BN((bn1.cmp(bn2)<0)+0);break;case Opcode.OP_GREATERTHAN:bn=new BN((bn1.cmp(bn2)>0)+0);break;case Opcode.OP_LESSTHANOREQUAL:bn=new BN((bn1.cmp(bn2)<=0)+0);break;case Opcode.OP_GREATERTHANOREQUAL:bn=new BN((bn1.cmp(bn2)>=0)+0);break;case Opcode.OP_MIN:bn=bn1.cmp(bn2)<0?bn1:bn2;break;case Opcode.OP_MAX:bn=bn1.cmp(bn2)>0?bn1:bn2;break;}this.stack.pop();this.stack.pop();this.stack.push(bn.toScriptNumBuffer());if(opcodenum===Opcode.OP_NUMEQUALVERIFY){if(Interpreter.castToBool(this.stack[this.stack.length-1])){this.stack.pop();}else{this.errstr='SCRIPT_ERR_NUMEQUALVERIFY';return false;}}}break;case Opcode.OP_WITHIN:{if(this.stack.length<3){this.errstr='SCRIPT_ERR_INVALID_STACK_OPERATION';return false;}bn1=BN.fromScriptNumBuffer(this.stack[this.stack.length-3],fRequireMinimal);bn2=BN.fromScriptNumBuffer(this.stack[this.stack.length-2],fRequireMinimal);var bn3=BN.fromScriptNumBuffer(this.stack[this.stack.length-1],fRequireMinimal);fValue=bn2.cmp(bn1)<=0&&bn1.cmp(bn3)<0;this.stack.pop();this.stack.pop();this.stack.pop();this.stack.push(fValue?Interpreter.true:Interpreter.false);}break;case Opcode.OP_RIPEMD160:case Opcode.OP_SHA1:case Opcode.OP_SHA256:case Opcode.OP_HASH160:case Opcode.OP_HASH256:{if(this.stack.length<1){this.errstr='SCRIPT_ERR_INVALID_STACK_OPERATION';return false;}buf=this.stack[this.stack.length-1];var bufHash;if(opcodenum===Opcode.OP_RIPEMD160){bufHash=Hash.ripemd160(buf);}else if(opcodenum===Opcode.OP_SHA1){bufHash=Hash.sha1(buf);}else if(opcodenum===Opcode.OP_SHA256){bufHash=Hash.sha256(buf);}else if(opcodenum===Opcode.OP_HASH160){bufHash=Hash.sha256ripemd160(buf);}else if(opcodenum===Opcode.OP_HASH256){bufHash=Hash.sha256sha256(buf);}this.stack.pop();this.stack.push(bufHash);}break;case Opcode.OP_CODESEPARATOR:{this.pbegincodehash=this.pc;}break;case Opcode.OP_CHECKSIG:case Opcode.OP_CHECKSIGVERIFY:{if(this.stack.length<2){this.errstr='SCRIPT_ERR_INVALID_STACK_OPERATION';return false;}bufSig=this.stack[this.stack.length-2];bufPubkey=this.stack[this.stack.length-1];subscript=new Script().set({chunks:this.script.chunks.slice(this.pbegincodehash)});var tmpScript=new Script().add(bufSig);subscript.findAndDelete(tmpScript);if(!this.checkSignatureEncoding(bufSig)||!this.checkPubkeyEncoding(bufPubkey)){return false;}try{sig=Signature.fromTxFormat(bufSig);pubkey=PublicKey.fromBuffer(bufPubkey,false);fSuccess=this.tx.verifySignature(sig,pubkey,this.nin,subscript);}catch(e){fSuccess=false;}this.stack.pop();this.stack.pop();this.stack.push(fSuccess?Interpreter.true:Interpreter.false);if(opcodenum===Opcode.OP_CHECKSIGVERIFY){if(fSuccess){this.stack.pop();}else{this.errstr='SCRIPT_ERR_CHECKSIGVERIFY';return false;}}}break;case Opcode.OP_CHECKMULTISIG:case Opcode.OP_CHECKMULTISIGVERIFY:{var i=1;if(this.stack.length<i){this.errstr='SCRIPT_ERR_INVALID_STACK_OPERATION';return false;}var nKeysCount=BN.fromScriptNumBuffer(this.stack[this.stack.length-i],fRequireMinimal).toNumber();if(nKeysCount<0||nKeysCount>20){this.errstr='SCRIPT_ERR_PUBKEY_COUNT';return false;}this.nOpCount+=nKeysCount;if(this.nOpCount>201){this.errstr='SCRIPT_ERR_OP_COUNT';return false;}var ikey=++i;i+=nKeysCount;if(this.stack.length<i){this.errstr='SCRIPT_ERR_INVALID_STACK_OPERATION';return false;}var nSigsCount=BN.fromScriptNumBuffer(this.stack[this.stack.length-i],fRequireMinimal).toNumber();if(nSigsCount<0||nSigsCount>nKeysCount){this.errstr='SCRIPT_ERR_SIG_COUNT';return false;}var isig=++i;i+=nSigsCount;if(this.stack.length<i){this.errstr='SCRIPT_ERR_INVALID_STACK_OPERATION';return false;}subscript=new Script().set({chunks:this.script.chunks.slice(this.pbegincodehash)});for(var k=0;k<nSigsCount;k++){bufSig=this.stack[this.stack.length-isig-k];subscript.findAndDelete(new Script().add(bufSig));}fSuccess=true;while(fSuccess&&nSigsCount>0){bufSig=this.stack[this.stack.length-isig];bufPubkey=this.stack[this.stack.length-ikey];if(!this.checkSignatureEncoding(bufSig)||!this.checkPubkeyEncoding(bufPubkey)){return false;}var fOk;try{sig=Signature.fromTxFormat(bufSig);pubkey=PublicKey.fromBuffer(bufPubkey,false);fOk=this.tx.verifySignature(sig,pubkey,this.nin,subscript);}catch(e){fOk=false;}if(fOk){isig++;nSigsCount--;}ikey++;nKeysCount--;if(nSigsCount>nKeysCount){fSuccess=false;}}while(i-->1){this.stack.pop();}if(this.stack.length<1){this.errstr='SCRIPT_ERR_INVALID_STACK_OPERATION';return false;}if(this.flags&Interpreter.SCRIPT_VERIFY_NULLDUMMY&&this.stack[this.stack.length-1].length){this.errstr='SCRIPT_ERR_SIG_NULLDUMMY';return false;}this.stack.pop();this.stack.push(fSuccess?Interpreter.true:Interpreter.false);if(opcodenum===Opcode.OP_CHECKMULTISIGVERIFY){if(fSuccess){this.stack.pop();}else{this.errstr='SCRIPT_ERR_CHECKMULTISIGVERIFY';return false;}}}break;default:this.errstr='SCRIPT_ERR_BAD_OPCODE';return false;}}return true;};},5145:function(module,__unusedexports,__webpack_require__){var source=__webpack_require__(4390);var sink=__webpack_require__(6559);module.exports=duplex;function duplex(ws,opts){var req=ws.upgradeReq||{};if(opts&&opts.binaryType)ws.binaryType=opts.binaryType;else if(opts&&opts.binary)ws.binaryType='arraybuffer';return{source:source(ws,opts&&opts.onConnect),sink:sink(ws,opts),headers:req.headers,url:req.url,upgrade:req.upgrade,method:req.method};};},5160:function(module,__unusedexports,__webpack_require__){"use strict";module.exports=Transform;var Duplex=__webpack_require__(6504);var util=__webpack_require__(5548);util.inherits=__webpack_require__(92);util.inherits(Transform,Duplex);function afterTransform(er,data){var ts=this._transformState;ts.transforming=false;var cb=ts.writecb;if(!cb){return this.emit('error',new Error('write callback called multiple times'));}ts.writechunk=null;ts.writecb=null;if(data!=null)this.push(data);cb(er);var rs=this._readableState;rs.reading=false;if(rs.needReadable||rs.length<rs.highWaterMark){this._read(rs.highWaterMark);}}function Transform(options){if(!(this instanceof Transform))return new Transform(options);Duplex.call(this,options);this._transformState={afterTransform:afterTransform.bind(this),needTransform:false,transforming:false,writecb:null,writechunk:null,writeencoding:null};this._readableState.needReadable=true;this._readableState.sync=false;if(options){if(typeof options.transform==='function')this._transform=options.transform;if(typeof options.flush==='function')this._flush=options.flush;}this.on('prefinish',prefinish);}function prefinish(){var _this=this;if(typeof this._flush==='function'){this._flush(function(er,data){done(_this,er,data);});}else{done(this,null,null);}}Transform.prototype.push=function(chunk,encoding){this._transformState.needTransform=false;return Duplex.prototype.push.call(this,chunk,encoding);};Transform.prototype._transform=function(chunk,encoding,cb){throw new Error('_transform() is not implemented');};Transform.prototype._write=function(chunk,encoding,cb){var ts=this._transformState;ts.writecb=cb;ts.writechunk=chunk;ts.writeencoding=encoding;if(!ts.transforming){var rs=this._readableState;if(ts.needTransform||rs.needReadable||rs.length<rs.highWaterMark)this._read(rs.highWaterMark);}};Transform.prototype._read=function(n){var ts=this._transformState;if(ts.writechunk!==null&&ts.writecb&&!ts.transforming){ts.transforming=true;this._transform(ts.writechunk,ts.writeencoding,ts.afterTransform);}else{ts.needTransform=true;}};Transform.prototype._destroy=function(err,cb){var _this2=this;Duplex.prototype._destroy.call(this,err,function(err2){cb(err2);_this2.emit('close');});};function done(stream,er,data){if(er)return stream.emit('error',er);if(data!=null)stream.push(data);if(stream._writableState.length)throw new Error('Calling transform done when ws.length != 0');if(stream._transformState.transforming)throw new Error('Calling transform done when still transforming');return stream.push(null);}},5177:function(module,__unusedexports,__webpack_require__){"use strict";const{exporter}=__webpack_require__(3021);const pull=__webpack_require__(2885);const CID=__webpack_require__(9339);const{normalizePath}=__webpack_require__(8170);module.exports=function(self){return function(ipfsPath,options){options=options||{};const path=normalizePath(ipfsPath);const recursive=options.recursive;const pathComponents=path.split('/');const pathDepth=pathComponents.length;const maxDepth=recursive?global.Infinity:pathDepth;options.maxDepth=options.maxDepth||maxDepth;if(options.preload!==false){self._preload(pathComponents[0]);}return pull(exporter(ipfsPath,self._ipld,options),pull.filter(node=>recursive?node.depth>=pathDepth:node.depth===pathDepth),pull.map(node=>{node.hash=new CID(node.hash).toBaseEncodedString();delete node.content;return node;}));};};},5185:function(module,__unusedexports,__webpack_require__){"use strict";const whilst=__webpack_require__(294);const hmac=__webpack_require__(6082);const cipherMap={'AES-128':{ivSize:16,keySize:16},'AES-256':{ivSize:16,keySize:32},Blowfish:{ivSize:8,cipherKeySize:32}};module.exports=(cipherType,hash,secret,callback)=>{const cipher=cipherMap[cipherType];if(!cipher){return callback(new Error('unkown cipherType passed'));}if(!hash){return callback(new Error('unkown hashType passed'));}const cipherKeySize=cipher.keySize;const ivSize=cipher.ivSize;const hmacKeySize=20;const seed=Buffer.from('key expansion');const resultLength=2*(ivSize+cipherKeySize+hmacKeySize);hmac.create(hash,secret,(err,m)=>{if(err){return callback(err);}m.digest(seed,(err,a)=>{if(err){return callback(err);}let result=[];let j=0;whilst(()=>j<resultLength,stretch,finish);function stretch(cb){m.digest(Buffer.concat([a,seed]),(err,b)=>{if(err){return cb(err);}let todo=b.length;if(j+todo>resultLength){todo=resultLength-j;}result.push(b);j+=todo;m.digest(a,(err,_a)=>{if(err){return cb(err);}a=_a;cb();});});}function finish(err){if(err){return callback(err);}const half=resultLength/2;const resultBuffer=Buffer.concat(result);const r1=resultBuffer.slice(0,half);const r2=resultBuffer.slice(half,resultLength);const createKey=res=>({iv:res.slice(0,ivSize),cipherKey:res.slice(ivSize,ivSize+cipherKeySize),macKey:res.slice(ivSize+cipherKeySize)});callback(null,{k1:createKey(r1),k2:createKey(r2)});}});});};},5194:function(__unusedmodule,exports,__webpack_require__){"use strict";var elliptic=exports;elliptic.version=__webpack_require__(2493).version;elliptic.utils=__webpack_require__(5121);elliptic.rand=__webpack_require__(3965);elliptic.hmacDRBG=__webpack_require__(68);elliptic.curve=__webpack_require__(7573);elliptic.curves=__webpack_require__(6443);elliptic.ec=__webpack_require__(1193);},5195:function(module){"use strict";function decode(input,alphabet){input=input.replace(new RegExp('=','g'),'');let length=input.length;let bits=0;let value=0;let index=0;let output=new Uint8Array(length*5/8|0);for(let i=0;i<length;i++){value=value<<5|alphabet.indexOf(input[i]);bits+=5;if(bits>=8){output[index++]=value>>>bits-8&255;bits-=8;}}return output.buffer;}function encode(buffer,alphabet){let length=buffer.byteLength;let view=new Uint8Array(buffer);let padding=alphabet.indexOf('=')===alphabet.length-1;if(padding){alphabet=alphabet.substring(0,alphabet.length-2);}let bits=0;let value=0;let output='';for(let i=0;i<length;i++){value=value<<8|view[i];bits+=8;while(bits>=5){output+=alphabet[value>>>bits-5&31];bits-=5;}}if(bits>0){output+=alphabet[value<<5-bits&31];}if(padding){while(output.length%8!==0){output+='=';}}return output;}module.exports=function base32(alphabet){return{encode(input){if(typeof input==='string'){return encode(Buffer.from(input),alphabet);}return encode(input,alphabet);},decode(input){for(let char of input){if(alphabet.indexOf(char)<0){throw new Error('invalid base32 character');}}return decode(input,alphabet);}};};},5213:function(__unusedmodule,exports,__webpack_require__){exports.source=__webpack_require__(7683);exports.through=__webpack_require__(5595);exports.sink=__webpack_require__(221);exports.duplex=__webpack_require__(8164);},5229:function(module,__unusedexports,__webpack_require__){"use strict";const EventEmitter=__webpack_require__(4859);const Stat=__webpack_require__(8074);const defaultOptions={movingAverageIntervals:[60*1000,5*60*1000,15*60*1000]};class Stats extends EventEmitter{constructor(initialCounters,_options){super();const options=Object.assign({},defaultOptions,_options);if(typeof options.computeThrottleTimeout!=='number'){throw new Error('need computeThrottleTimeout');}if(typeof options.computeThrottleMaxQueueSize!=='number'){throw new Error('need computeThrottleMaxQueueSize');}this._initialCounters=initialCounters;this._options=options;this._enabled=this._options.enabled;this._global=new Stat(initialCounters,options);this._global.on('update',stats=>this.emit('update',stats));this._peers=new Map();}enable(){this._enabled=true;this._options.enabled=true;this._global.enable();}disable(){this._enabled=false;this._options.enabled=false;this._global.disable();}stop(){this._enabled=false;this._global.stop();for(let peerStat of this._peers){peerStat[1].stop();}}get snapshot(){return this._global.snapshot;}get movingAverages(){return this._global.movingAverages;}forPeer(peerId){if(peerId.toB58String){peerId=peerId.toB58String();}return this._peers.get(peerId);}push(peer,counter,inc){if(this._enabled){this._global.push(counter,inc);if(peer){let peerStats=this._peers.get(peer);if(!peerStats){peerStats=new Stat(this._initialCounters,this._options);this._peers.set(peer,peerStats);}peerStats.push(counter,inc);}}}disconnected(peer){const peerId=peer.toB58String();const peerStats=this._peers.get(peerId);if(peerStats){peerStats.stop();this._peers.delete(peerId);}}}module.exports=Stats;},5236:function(module,__unusedexports,__webpack_require__){const Buffer=__webpack_require__(7572).Buffer;const bech32=__webpack_require__(9862);const bs58check=__webpack_require__(6614);const bscript=__webpack_require__(5099);const networks=__webpack_require__(1215);const typeforce=__webpack_require__(2809);const types=__webpack_require__(8781);const payments=__webpack_require__(8736);function fromBase58Check(address){const payload=bs58check.decode(address);if(payload.length<21)throw new TypeError(address+' is too short');if(payload.length>21)throw new TypeError(address+' is too long');const version=payload.readUInt8(0);const hash=payload.slice(1);return{version:version,hash:hash};}function fromBech32(address){const result=bech32.decode(address);const data=bech32.fromWords(result.words.slice(1));return{version:result.words[0],prefix:result.prefix,data:Buffer.from(data)};}function toBase58Check(hash,version){typeforce(types.tuple(types.Hash160bit,types.UInt8),arguments);const payload=Buffer.allocUnsafe(21);payload.writeUInt8(version,0);hash.copy(payload,1);return bs58check.encode(payload);}function toBech32(data,version,prefix){const words=bech32.toWords(data);words.unshift(version);return bech32.encode(prefix,words);}function fromOutputScript(output,network){network=network||networks.bitcoin;try{return payments.p2pkh({output,network}).address;}catch(e){}try{return payments.p2sh({output,network}).address;}catch(e){}try{return payments.p2wpkh({output,network}).address;}catch(e){}try{return payments.p2wsh({output,network}).address;}catch(e){}throw new Error(bscript.toASM(output)+' has no matching Address');}function toOutputScript(address,network){network=network||networks.bitcoin;let decode;try{decode=fromBase58Check(address);}catch(e){}if(decode){if(decode.version===network.pubKeyHash)return payments.p2pkh({hash:decode.hash}).output;if(decode.version===network.scriptHash)return payments.p2sh({hash:decode.hash}).output;}else{try{decode=fromBech32(address);}catch(e){}if(decode){if(decode.prefix!==network.bech32)throw new Error(address+' has an invalid prefix');if(decode.version===0){if(decode.data.length===20)return payments.p2wpkh({hash:decode.data}).output;if(decode.data.length===32)return payments.p2wsh({hash:decode.data}).output;}}}throw new Error(address+' has no matching Script');}module.exports={fromBase58Check:fromBase58Check,fromBech32:fromBech32,fromOutputScript:fromOutputScript,toBase58Check:toBase58Check,toBech32:toBech32,toOutputScript:toOutputScript};},5237:function(module,__unusedexports,__webpack_require__){"use strict";const crypto=__webpack_require__(2984);const PerMessageDeflate=__webpack_require__(8904);const bufferUtil=__webpack_require__(2811);const validation=__webpack_require__(8984);const constants=__webpack_require__(6198);class Sender{constructor(socket,extensions){this._extensions=extensions||{};this._socket=socket;this._firstFragment=true;this._compress=false;this._bufferedBytes=0;this._deflating=false;this._queue=[];}static frame(data,options){const merge=data.length<1024||options.mask&&options.readOnly;var offset=options.mask?6:2;var payloadLength=data.length;if(data.length>=65536){offset+=8;payloadLength=127;}else if(data.length>125){offset+=2;payloadLength=126;}const target=Buffer.allocUnsafe(merge?data.length+offset:offset);target[0]=options.fin?options.opcode|0x80:options.opcode;if(options.rsv1)target[0]|=0x40;if(payloadLength===126){target.writeUInt16BE(data.length,2);}else if(payloadLength===127){target.writeUInt32BE(0,2);target.writeUInt32BE(data.length,6);}if(!options.mask){target[1]=payloadLength;if(merge){data.copy(target,offset);return[target];}return[target,data];}const mask=crypto.randomBytes(4);target[1]=payloadLength|0x80;target[offset-4]=mask[0];target[offset-3]=mask[1];target[offset-2]=mask[2];target[offset-1]=mask[3];if(merge){bufferUtil.mask(data,mask,target,offset,data.length);return[target];}bufferUtil.mask(data,mask,data,0,data.length);return[target,data];}close(code,data,mask,cb){var buf;if(code===undefined){buf=constants.EMPTY_BUFFER;}else if(typeof code!=='number'||!validation.isValidStatusCode(code)){throw new TypeError('First argument must be a valid error code number');}else if(data===undefined||data===''){buf=Buffer.allocUnsafe(2);buf.writeUInt16BE(code,0);}else{buf=Buffer.allocUnsafe(2+Buffer.byteLength(data));buf.writeUInt16BE(code,0);buf.write(data,2);}if(this._deflating){this.enqueue([this.doClose,buf,mask,cb]);}else{this.doClose(buf,mask,cb);}}doClose(data,mask,cb){this.sendFrame(Sender.frame(data,{fin:true,rsv1:false,opcode:0x08,mask,readOnly:false}),cb);}ping(data,mask,cb){var readOnly=true;if(!Buffer.isBuffer(data)){if(data instanceof ArrayBuffer){data=Buffer.from(data);}else if(ArrayBuffer.isView(data)){data=viewToBuffer(data);}else{data=Buffer.from(data);readOnly=false;}}if(this._deflating){this.enqueue([this.doPing,data,mask,readOnly,cb]);}else{this.doPing(data,mask,readOnly,cb);}}doPing(data,mask,readOnly,cb){this.sendFrame(Sender.frame(data,{fin:true,rsv1:false,opcode:0x09,mask,readOnly}),cb);}pong(data,mask,cb){var readOnly=true;if(!Buffer.isBuffer(data)){if(data instanceof ArrayBuffer){data=Buffer.from(data);}else if(ArrayBuffer.isView(data)){data=viewToBuffer(data);}else{data=Buffer.from(data);readOnly=false;}}if(this._deflating){this.enqueue([this.doPong,data,mask,readOnly,cb]);}else{this.doPong(data,mask,readOnly,cb);}}doPong(data,mask,readOnly,cb){this.sendFrame(Sender.frame(data,{fin:true,rsv1:false,opcode:0x0a,mask,readOnly}),cb);}send(data,options,cb){var opcode=options.binary?2:1;var rsv1=options.compress;var readOnly=true;if(!Buffer.isBuffer(data)){if(data instanceof ArrayBuffer){data=Buffer.from(data);}else if(ArrayBuffer.isView(data)){data=viewToBuffer(data);}else{data=Buffer.from(data);readOnly=false;}}const perMessageDeflate=this._extensions[PerMessageDeflate.extensionName];if(this._firstFragment){this._firstFragment=false;if(rsv1&&perMessageDeflate){rsv1=data.length>=perMessageDeflate._threshold;}this._compress=rsv1;}else{rsv1=false;opcode=0;}if(options.fin)this._firstFragment=true;if(perMessageDeflate){const opts={fin:options.fin,rsv1,opcode,mask:options.mask,readOnly};if(this._deflating){this.enqueue([this.dispatch,data,this._compress,opts,cb]);}else{this.dispatch(data,this._compress,opts,cb);}}else{this.sendFrame(Sender.frame(data,{fin:options.fin,rsv1:false,opcode,mask:options.mask,readOnly}),cb);}}dispatch(data,compress,options,cb){if(!compress){this.sendFrame(Sender.frame(data,options),cb);return;}const perMessageDeflate=this._extensions[PerMessageDeflate.extensionName];this._deflating=true;perMessageDeflate.compress(data,options.fin,(_,buf)=>{this._deflating=false;options.readOnly=false;this.sendFrame(Sender.frame(buf,options),cb);this.dequeue();});}dequeue(){while(!this._deflating&&this._queue.length){const params=this._queue.shift();this._bufferedBytes-=params[1].length;params[0].apply(this,params.slice(1));}}enqueue(params){this._bufferedBytes+=params[1].length;this._queue.push(params);}sendFrame(list,cb){if(list.length===2){this._socket.write(list[0]);this._socket.write(list[1],cb);}else{this._socket.write(list[0],cb);}}}module.exports=Sender;function viewToBuffer(view){const buf=Buffer.from(view.buffer);if(view.byteLength!==view.buffer.byteLength){return buf.slice(view.byteOffset,view.byteOffset+view.byteLength);}return buf;}},5238:function(__unusedmodule,exports,__webpack_require__){exports.AbstractLevelDOWN=__webpack_require__(1157);exports.AbstractIterator=__webpack_require__(474);exports.AbstractChainedBatch=__webpack_require__(7927);},5246:function(module,__unusedexports,__webpack_require__){"use strict";var bn=__webpack_require__(2420);var elliptic=__webpack_require__(5194);var utils=elliptic.utils;function KeyPair(ec,options){this.ec=ec;this.priv=null;this.pub=null;if(options.priv)this._importPrivate(options.priv,options.privEnc);if(options.pub)this._importPublic(options.pub,options.pubEnc);}module.exports=KeyPair;KeyPair.fromPublic=function fromPublic(ec,pub,enc){if(pub instanceof KeyPair)return pub;return new KeyPair(ec,{pub:pub,pubEnc:enc});};KeyPair.fromPrivate=function fromPrivate(ec,priv,enc){if(priv instanceof KeyPair)return priv;return new KeyPair(ec,{priv:priv,privEnc:enc});};KeyPair.prototype.validate=function validate(){var pub=this.getPublic();if(pub.isInfinity())return{result:false,reason:'Invalid public key'};if(!pub.validate())return{result:false,reason:'Public key is not a point'};if(!pub.mul(this.ec.curve.n).isInfinity())return{result:false,reason:'Public key * N != O'};return{result:true,reason:null};};KeyPair.prototype.getPublic=function getPublic(compact,enc){if(!this.pub)this.pub=this.ec.g.mul(this.priv);if(typeof compact==='string'){enc=compact;compact=null;}if(!enc)return this.pub;var len=this.ec.curve.p.byteLength();var x=this.pub.getX().toArray();for(var i=x.length;i<len;i++)x.unshift(0);var res;if(this.ec.curve.type!=='mont'){if(compact){res=[this.pub.getY().isEven()?0x02:0x03].concat(x);}else{var y=this.pub.getY().toArray();for(var i=y.length;i<len;i++)y.unshift(0);var res=[0x04].concat(x,y);}}else{res=x;}return utils.encode(res,enc);};KeyPair.prototype.getPrivate=function getPrivate(enc){if(enc==='hex')return this.priv.toString(16,2);else return this.priv;};KeyPair.prototype._importPrivate=function _importPrivate(key,enc){this.priv=new bn(key,enc||16);this.priv=this.priv.mod(this.ec.curve.n);};KeyPair.prototype._importPublic=function _importPublic(key,enc){if(key.x||key.y){this.pub=this.ec.curve.point(key.x,key.y);return;}key=utils.toArray(key,enc);if(this.ec.curve.type!=='mont')return this._importPublicShort(key);else return this._importPublicMont(key);};KeyPair.prototype._importPublicShort=function _importPublicShort(key){var len=this.ec.curve.p.byteLength();if(key[0]===0x04&&key.length-1===2*len){this.pub=this.ec.curve.point(key.slice(1,1+len),key.slice(1+len,1+2*len));}else if((key[0]===0x02||key[0]===0x03)&&key.length-1===len){this.pub=this.ec.curve.pointFromX(key[0]===0x03,key.slice(1,1+len));}};KeyPair.prototype._importPublicMont=function _importPublicMont(key){this.pub=this.ec.curve.point(key,1);};KeyPair.prototype.derive=function derive(pub){return pub.mul(this.priv).getX();};KeyPair.prototype.sign=function sign(msg){return this.ec.sign(msg,this);};KeyPair.prototype.verify=function verify(msg,signature){return this.ec.verify(msg,signature,this);};KeyPair.prototype.inspect=function inspect(){return'<Key priv: '+(this.priv&&this.priv.toString(16,2))+' pub: '+(this.pub&&this.pub.inspect())+' >';};},5247:function(module,__unusedexports,__webpack_require__){"use strict";var randomFromSeed=__webpack_require__(9929);var ORIGINAL='0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-';var alphabet;var previousSeed;var shuffled;function reset(){shuffled=false;}function setCharacters(_alphabet_){if(!_alphabet_){if(alphabet!==ORIGINAL){alphabet=ORIGINAL;reset();}return;}if(_alphabet_===alphabet){return;}if(_alphabet_.length!==ORIGINAL.length){throw new Error('Custom alphabet for shortid must be '+ORIGINAL.length+' unique characters. You submitted '+_alphabet_.length+' characters: '+_alphabet_);}var unique=_alphabet_.split('').filter(function(item,ind,arr){return ind!==arr.lastIndexOf(item);});if(unique.length){throw new Error('Custom alphabet for shortid must be '+ORIGINAL.length+' unique characters. These characters were not unique: '+unique.join(', '));}alphabet=_alphabet_;reset();}function characters(_alphabet_){setCharacters(_alphabet_);return alphabet;}function setSeed(seed){randomFromSeed.seed(seed);if(previousSeed!==seed){reset();previousSeed=seed;}}function shuffle(){if(!alphabet){setCharacters(ORIGINAL);}var sourceArray=alphabet.split('');var targetArray=[];var r=randomFromSeed.nextValue();var characterIndex;while(sourceArray.length>0){r=randomFromSeed.nextValue();characterIndex=Math.floor(r*sourceArray.length);targetArray.push(sourceArray.splice(characterIndex,1)[0]);}return targetArray.join('');}function getShuffled(){if(shuffled){return shuffled;}shuffled=shuffle();return shuffled;}function lookup(index){var alphabetShuffled=getShuffled();return alphabetShuffled[index];}function get(){return alphabet||ORIGINAL;}module.exports={get:get,characters:characters,seed:setSeed,lookup:lookup,shuffled:getShuffled};},5254:function(module,__unusedexports,__webpack_require__){if(typeof process!=='undefined'&&process.type==='renderer'){module.exports=__webpack_require__(3518);}else{module.exports=__webpack_require__(6950);}},5256:function(module,exports,__webpack_require__){module=__webpack_require__.nmd(module);var LARGE_ARRAY_SIZE=200;var HASH_UNDEFINED='__lodash_hash_undefined__';var HOT_COUNT=800,HOT_SPAN=16;var MAX_SAFE_INTEGER=9007199254740991;var argsTag='[object Arguments]',arrayTag='[object Array]',asyncTag='[object AsyncFunction]',boolTag='[object Boolean]',dateTag='[object Date]',errorTag='[object Error]',funcTag='[object Function]',genTag='[object GeneratorFunction]',mapTag='[object Map]',numberTag='[object Number]',nullTag='[object Null]',objectTag='[object Object]',proxyTag='[object Proxy]',regexpTag='[object RegExp]',setTag='[object Set]',stringTag='[object String]',undefinedTag='[object Undefined]',weakMapTag='[object WeakMap]';var arrayBufferTag='[object ArrayBuffer]',dataViewTag='[object DataView]',float32Tag='[object Float32Array]',float64Tag='[object Float64Array]',int8Tag='[object Int8Array]',int16Tag='[object Int16Array]',int32Tag='[object Int32Array]',uint8Tag='[object Uint8Array]',uint8ClampedTag='[object Uint8ClampedArray]',uint16Tag='[object Uint16Array]',uint32Tag='[object Uint32Array]';var reRegExpChar=/[\\^$.*+?()[\]{}|]/g;var reIsHostCtor=/^\[object .+?Constructor\]$/;var reIsUint=/^(?:0|[1-9]\d*)$/;var typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=true;typedArrayTags[argsTag]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=false;var freeGlobal=typeof global=='object'&&global&&global.Object===Object&&global;var freeSelf=typeof self=='object'&&self&&self.Object===Object&&self;var root=freeGlobal||freeSelf||Function('return this')();var freeExports=true&&exports&&!exports.nodeType&&exports;var freeModule=freeExports&&"object"=='object'&&module&&!module.nodeType&&module;var moduleExports=freeModule&&freeModule.exports===freeExports;var freeProcess=moduleExports&&freeGlobal.process;var nodeUtil=function(){try{return freeProcess&&freeProcess.binding&&freeProcess.binding('util');}catch(e){}}();var nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray;function apply(func,thisArg,args){switch(args.length){case 0:return func.call(thisArg);case 1:return func.call(thisArg,args[0]);case 2:return func.call(thisArg,args[0],args[1]);case 3:return func.call(thisArg,args[0],args[1],args[2]);}return func.apply(thisArg,args);}function baseTimes(n,iteratee){var index=-1,result=Array(n);while(++index<n){result[index]=iteratee(index);}return result;}function baseUnary(func){return function(value){return func(value);};}function getValue(object,key){return object==null?undefined:object[key];}function overArg(func,transform){return function(arg){return func(transform(arg));};}function safeGet(object,key){return key=='__proto__'?undefined:object[key];}var arrayProto=Array.prototype,funcProto=Function.prototype,objectProto=Object.prototype;var coreJsData=root['__core-js_shared__'];var funcToString=funcProto.toString;var hasOwnProperty=objectProto.hasOwnProperty;var maskSrcKey=function(){var uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||'');return uid?'Symbol(src)_1.'+uid:'';}();var nativeObjectToString=objectProto.toString;var objectCtorString=funcToString.call(Object);var reIsNative=RegExp('^'+funcToString.call(hasOwnProperty).replace(reRegExpChar,'\\$&').replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,'$1.*?')+'$');var Buffer=moduleExports?root.Buffer:undefined,Symbol=root.Symbol,Uint8Array=root.Uint8Array,allocUnsafe=Buffer?Buffer.allocUnsafe:undefined,getPrototype=overArg(Object.getPrototypeOf,Object),objectCreate=Object.create,propertyIsEnumerable=objectProto.propertyIsEnumerable,splice=arrayProto.splice,symToStringTag=Symbol?Symbol.toStringTag:undefined;var defineProperty=function(){try{var func=getNative(Object,'defineProperty');func({},'',{});return func;}catch(e){}}();var nativeIsBuffer=Buffer?Buffer.isBuffer:undefined,nativeMax=Math.max,nativeNow=Date.now;var Map=getNative(root,'Map'),nativeCreate=getNative(Object,'create');var baseCreate=function(){function object(){}return function(proto){if(!isObject(proto)){return{};}if(objectCreate){return objectCreate(proto);}object.prototype=proto;var result=new object();object.prototype=undefined;return result;};}();function Hash(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1]);}}function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{};this.size=0;}function hashDelete(key){var result=this.has(key)&&delete this.__data__[key];this.size-=result?1:0;return result;}function hashGet(key){var data=this.__data__;if(nativeCreate){var result=data[key];return result===HASH_UNDEFINED?undefined:result;}return hasOwnProperty.call(data,key)?data[key]:undefined;}function hashHas(key){var data=this.__data__;return nativeCreate?data[key]!==undefined:hasOwnProperty.call(data,key);}function hashSet(key,value){var data=this.__data__;this.size+=this.has(key)?0:1;data[key]=nativeCreate&&value===undefined?HASH_UNDEFINED:value;return this;}Hash.prototype.clear=hashClear;Hash.prototype['delete']=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;function ListCache(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1]);}}function listCacheClear(){this.__data__=[];this.size=0;}function listCacheDelete(key){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){return false;}var lastIndex=data.length-1;if(index==lastIndex){data.pop();}else{splice.call(data,index,1);}--this.size;return true;}function listCacheGet(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?undefined:data[index][1];}function listCacheHas(key){return assocIndexOf(this.__data__,key)>-1;}function listCacheSet(key,value){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){++this.size;data.push([key,value]);}else{data[index][1]=value;}return this;}ListCache.prototype.clear=listCacheClear;ListCache.prototype['delete']=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;function MapCache(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1]);}}function mapCacheClear(){this.size=0;this.__data__={'hash':new Hash(),'map':new(Map||ListCache)(),'string':new Hash()};}function mapCacheDelete(key){var result=getMapData(this,key)['delete'](key);this.size-=result?1:0;return result;}function mapCacheGet(key){return getMapData(this,key).get(key);}function mapCacheHas(key){return getMapData(this,key).has(key);}function mapCacheSet(key,value){var data=getMapData(this,key),size=data.size;data.set(key,value);this.size+=data.size==size?0:1;return this;}MapCache.prototype.clear=mapCacheClear;MapCache.prototype['delete']=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;function Stack(entries){var data=this.__data__=new ListCache(entries);this.size=data.size;}function stackClear(){this.__data__=new ListCache();this.size=0;}function stackDelete(key){var data=this.__data__,result=data['delete'](key);this.size=data.size;return result;}function stackGet(key){return this.__data__.get(key);}function stackHas(key){return this.__data__.has(key);}function stackSet(key,value){var data=this.__data__;if(data instanceof ListCache){var pairs=data.__data__;if(!Map||pairs.length<LARGE_ARRAY_SIZE-1){pairs.push([key,value]);this.size=++data.size;return this;}data=this.__data__=new MapCache(pairs);}data.set(key,value);this.size=data.size;return this;}Stack.prototype.clear=stackClear;Stack.prototype['delete']=stackDelete;Stack.prototype.get=stackGet;Stack.prototype.has=stackHas;Stack.prototype.set=stackSet;function arrayLikeKeys(value,inherited){var isArr=isArray(value),isArg=!isArr&&isArguments(value),isBuff=!isArr&&!isArg&&isBuffer(value),isType=!isArr&&!isArg&&!isBuff&&isTypedArray(value),skipIndexes=isArr||isArg||isBuff||isType,result=skipIndexes?baseTimes(value.length,String):[],length=result.length;for(var key in value){if((inherited||hasOwnProperty.call(value,key))&&!(skipIndexes&&(key=='length'||isBuff&&(key=='offset'||key=='parent')||isType&&(key=='buffer'||key=='byteLength'||key=='byteOffset')||isIndex(key,length)))){result.push(key);}}return result;}function assignMergeValue(object,key,value){if(value!==undefined&&!eq(object[key],value)||value===undefined&&!(key in object)){baseAssignValue(object,key,value);}}function assignValue(object,key,value){var objValue=object[key];if(!(hasOwnProperty.call(object,key)&&eq(objValue,value))||value===undefined&&!(key in object)){baseAssignValue(object,key,value);}}function assocIndexOf(array,key){var length=array.length;while(length--){if(eq(array[length][0],key)){return length;}}return-1;}function baseAssignValue(object,key,value){if(key=='__proto__'&&defineProperty){defineProperty(object,key,{'configurable':true,'enumerable':true,'value':value,'writable':true});}else{object[key]=value;}}var baseFor=createBaseFor();function baseGetTag(value){if(value==null){return value===undefined?undefinedTag:nullTag;}return symToStringTag&&symToStringTag in Object(value)?getRawTag(value):objectToString(value);}function baseIsArguments(value){return isObjectLike(value)&&baseGetTag(value)==argsTag;}function baseIsNative(value){if(!isObject(value)||isMasked(value)){return false;}var pattern=isFunction(value)?reIsNative:reIsHostCtor;return pattern.test(toSource(value));}function baseIsTypedArray(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[baseGetTag(value)];}function baseKeysIn(object){if(!isObject(object)){return nativeKeysIn(object);}var isProto=isPrototype(object),result=[];for(var key in object){if(!(key=='constructor'&&(isProto||!hasOwnProperty.call(object,key)))){result.push(key);}}return result;}function baseMerge(object,source,srcIndex,customizer,stack){if(object===source){return;}baseFor(source,function(srcValue,key){if(isObject(srcValue)){stack||(stack=new Stack());baseMergeDeep(object,source,key,srcIndex,baseMerge,customizer,stack);}else{var newValue=customizer?customizer(safeGet(object,key),srcValue,key+'',object,source,stack):undefined;if(newValue===undefined){newValue=srcValue;}assignMergeValue(object,key,newValue);}},keysIn);}function baseMergeDeep(object,source,key,srcIndex,mergeFunc,customizer,stack){var objValue=safeGet(object,key),srcValue=safeGet(source,key),stacked=stack.get(srcValue);if(stacked){assignMergeValue(object,key,stacked);return;}var newValue=customizer?customizer(objValue,srcValue,key+'',object,source,stack):undefined;var isCommon=newValue===undefined;if(isCommon){var isArr=isArray(srcValue),isBuff=!isArr&&isBuffer(srcValue),isTyped=!isArr&&!isBuff&&isTypedArray(srcValue);newValue=srcValue;if(isArr||isBuff||isTyped){if(isArray(objValue)){newValue=objValue;}else if(isArrayLikeObject(objValue)){newValue=copyArray(objValue);}else if(isBuff){isCommon=false;newValue=cloneBuffer(srcValue,true);}else if(isTyped){isCommon=false;newValue=cloneTypedArray(srcValue,true);}else{newValue=[];}}else if(isPlainObject(srcValue)||isArguments(srcValue)){newValue=objValue;if(isArguments(objValue)){newValue=toPlainObject(objValue);}else if(!isObject(objValue)||srcIndex&&isFunction(objValue)){newValue=initCloneObject(srcValue);}}else{isCommon=false;}}if(isCommon){stack.set(srcValue,newValue);mergeFunc(newValue,srcValue,srcIndex,customizer,stack);stack['delete'](srcValue);}assignMergeValue(object,key,newValue);}function baseRest(func,start){return setToString(overRest(func,start,identity),func+'');}var baseSetToString=!defineProperty?identity:function(func,string){return defineProperty(func,'toString',{'configurable':true,'enumerable':false,'value':constant(string),'writable':true});};function cloneBuffer(buffer,isDeep){if(isDeep){return buffer.slice();}var length=buffer.length,result=allocUnsafe?allocUnsafe(length):new buffer.constructor(length);buffer.copy(result);return result;}function cloneArrayBuffer(arrayBuffer){var result=new arrayBuffer.constructor(arrayBuffer.byteLength);new Uint8Array(result).set(new Uint8Array(arrayBuffer));return result;}function cloneTypedArray(typedArray,isDeep){var buffer=isDeep?cloneArrayBuffer(typedArray.buffer):typedArray.buffer;return new typedArray.constructor(buffer,typedArray.byteOffset,typedArray.length);}function copyArray(source,array){var index=-1,length=source.length;array||(array=Array(length));while(++index<length){array[index]=source[index];}return array;}function copyObject(source,props,object,customizer){var isNew=!object;object||(object={});var index=-1,length=props.length;while(++index<length){var key=props[index];var newValue=customizer?customizer(object[key],source[key],key,object,source):undefined;if(newValue===undefined){newValue=source[key];}if(isNew){baseAssignValue(object,key,newValue);}else{assignValue(object,key,newValue);}}return object;}function createAssigner(assigner){return baseRest(function(object,sources){var index=-1,length=sources.length,customizer=length>1?sources[length-1]:undefined,guard=length>2?sources[2]:undefined;customizer=assigner.length>3&&typeof customizer=='function'?(length--,customizer):undefined;if(guard&&isIterateeCall(sources[0],sources[1],guard)){customizer=length<3?undefined:customizer;length=1;}object=Object(object);while(++index<length){var source=sources[index];if(source){assigner(object,source,index,customizer);}}return object;});}function createBaseFor(fromRight){return function(object,iteratee,keysFunc){var index=-1,iterable=Object(object),props=keysFunc(object),length=props.length;while(length--){var key=props[fromRight?length:++index];if(iteratee(iterable[key],key,iterable)===false){break;}}return object;};}function getMapData(map,key){var data=map.__data__;return isKeyable(key)?data[typeof key=='string'?'string':'hash']:data.map;}function getNative(object,key){var value=getValue(object,key);return baseIsNative(value)?value:undefined;}function getRawTag(value){var isOwn=hasOwnProperty.call(value,symToStringTag),tag=value[symToStringTag];try{value[symToStringTag]=undefined;var unmasked=true;}catch(e){}var result=nativeObjectToString.call(value);if(unmasked){if(isOwn){value[symToStringTag]=tag;}else{delete value[symToStringTag];}}return result;}function initCloneObject(object){return typeof object.constructor=='function'&&!isPrototype(object)?baseCreate(getPrototype(object)):{};}function isIndex(value,length){var type=typeof value;length=length==null?MAX_SAFE_INTEGER:length;return!!length&&(type=='number'||type!='symbol'&&reIsUint.test(value))&&value>-1&&value%1==0&&value<length;}function isIterateeCall(value,index,object){if(!isObject(object)){return false;}var type=typeof index;if(type=='number'?isArrayLike(object)&&isIndex(index,object.length):type=='string'&&index in object){return eq(object[index],value);}return false;}function isKeyable(value){var type=typeof value;return type=='string'||type=='number'||type=='symbol'||type=='boolean'?value!=='__proto__':value===null;}function isMasked(func){return!!maskSrcKey&&maskSrcKey in func;}function isPrototype(value){var Ctor=value&&value.constructor,proto=typeof Ctor=='function'&&Ctor.prototype||objectProto;return value===proto;}function nativeKeysIn(object){var result=[];if(object!=null){for(var key in Object(object)){result.push(key);}}return result;}function objectToString(value){return nativeObjectToString.call(value);}function overRest(func,start,transform){start=nativeMax(start===undefined?func.length-1:start,0);return function(){var args=arguments,index=-1,length=nativeMax(args.length-start,0),array=Array(length);while(++index<length){array[index]=args[start+index];}index=-1;var otherArgs=Array(start+1);while(++index<start){otherArgs[index]=args[index];}otherArgs[start]=transform(array);return apply(func,this,otherArgs);};}var setToString=shortOut(baseSetToString);function shortOut(func){var count=0,lastCalled=0;return function(){var stamp=nativeNow(),remaining=HOT_SPAN-(stamp-lastCalled);lastCalled=stamp;if(remaining>0){if(++count>=HOT_COUNT){return arguments[0];}}else{count=0;}return func.apply(undefined,arguments);};}function toSource(func){if(func!=null){try{return funcToString.call(func);}catch(e){}try{return func+'';}catch(e){}}return'';}function eq(value,other){return value===other||value!==value&&other!==other;}var isArguments=baseIsArguments(function(){return arguments;}())?baseIsArguments:function(value){return isObjectLike(value)&&hasOwnProperty.call(value,'callee')&&!propertyIsEnumerable.call(value,'callee');};var isArray=Array.isArray;function isArrayLike(value){return value!=null&&isLength(value.length)&&!isFunction(value);}function isArrayLikeObject(value){return isObjectLike(value)&&isArrayLike(value);}var isBuffer=nativeIsBuffer||stubFalse;function isFunction(value){if(!isObject(value)){return false;}var tag=baseGetTag(value);return tag==funcTag||tag==genTag||tag==asyncTag||tag==proxyTag;}function isLength(value){return typeof value=='number'&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER;}function isObject(value){var type=typeof value;return value!=null&&(type=='object'||type=='function');}function isObjectLike(value){return value!=null&&typeof value=='object';}function isPlainObject(value){if(!isObjectLike(value)||baseGetTag(value)!=objectTag){return false;}var proto=getPrototype(value);if(proto===null){return true;}var Ctor=hasOwnProperty.call(proto,'constructor')&&proto.constructor;return typeof Ctor=='function'&&Ctor instanceof Ctor&&funcToString.call(Ctor)==objectCtorString;}var isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray;function toPlainObject(value){return copyObject(value,keysIn(value));}function keysIn(object){return isArrayLike(object)?arrayLikeKeys(object,true):baseKeysIn(object);}var merge=createAssigner(function(object,source,srcIndex){baseMerge(object,source,srcIndex);});function constant(value){return function(){return value;};}function identity(value){return value;}function stubFalse(){return false;}module.exports=merge;},5259:function(module,__unusedexports,__webpack_require__){"use strict";const once=__webpack_require__(7957);const PeerId=__webpack_require__(1832);const waterfall=__webpack_require__(4265);const multiaddr=__webpack_require__(5920);const Connection=__webpack_require__(378).Connection;const utilsFactory=__webpack_require__(6496);const StreamHandler=__webpack_require__(9511);const debug=__webpack_require__(746);const log=debug('libp2p:circuit:dialer');log.err=debug('libp2p:circuit:error:dialer');const multicodec=__webpack_require__(9275);const proto=__webpack_require__(5546);class Dialer{constructor(swarm,options){this.swarm=swarm;this.relayPeers=new Map();this.relayConns=new Map();this.options=options;this.utils=utilsFactory(swarm);}_dialRelayHelper(relay,callback){if(this.relayConns.has(relay.id.toB58String())){return callback(null,this.relayConns.get(relay.id.toB58String()));}return this._dialRelay(relay,callback);}dial(ma,cb){cb=cb||(()=>{});const strMa=ma.toString();if(!strMa.includes('/p2p-circuit')){log.err('invalid circuit address');return cb(new Error('invalid circuit address'));}const addr=strMa.split('p2p-circuit');const relay=addr[0]==='/'?null:multiaddr(addr[0]);const peer=multiaddr(addr[1]||addr[0]);const dstConn=new Connection();setImmediate(this._dialPeer.bind(this),peer,relay,(err,conn)=>{if(err){log.err(err);return cb(err);}dstConn.setInnerConn(conn);cb(null,dstConn);});return dstConn;}canHop(peer,callback){callback=once(callback||(()=>{}));this._dialRelayHelper(peer,(err,conn)=>{if(err){return callback(err);}const sh=new StreamHandler(conn);waterfall([cb=>sh.write(proto.CircuitRelay.encode({type:proto.CircuitRelay.Type.CAN_HOP}),cb),cb=>sh.read(cb)],(err,msg)=>{if(err){return callback(err);}const response=proto.CircuitRelay.decode(msg);if(response.code!==proto.CircuitRelay.Status.SUCCESS){const err=new Error(`HOP not supported, skipping - ${this.utils.getB58String(peer)}`);log(err);return callback(err);}log(`HOP supported adding as relay - ${this.utils.getB58String(peer)}`);this.relayPeers.set(this.utils.getB58String(peer),peer);sh.close();callback();});});}_dialPeer(dstMa,relay,cb){if(typeof relay==='function'){cb=relay;relay=null;}if(!cb){cb=()=>{};}dstMa=multiaddr(dstMa);if(!relay){const relays=Array.from(this.relayPeers.values());let next=nextRelay=>{if(!nextRelay){let err=`no relay peers were found or all relays failed to dial`;log.err(err);return cb(err);}return this._negotiateRelay(nextRelay,dstMa,(err,conn)=>{if(err){log.err(err);return next(relays.shift());}cb(null,conn);});};next(relays.shift());}else{return this._negotiateRelay(relay,dstMa,(err,conn)=>{if(err){log.err(`An error has occurred negotiating the relay connection`,err);return cb(err);}return cb(null,conn);});}}_negotiateRelay(relay,dstMa,callback){dstMa=multiaddr(dstMa);relay=this.utils.peerInfoFromMa(relay);const srcMas=this.swarm._peerInfo.multiaddrs.toArray();this._dialRelayHelper(relay,(err,conn)=>{if(err){log.err(err);return callback(err);}let sh=new StreamHandler(conn);waterfall([cb=>{log(`negotiating relay for peer ${dstMa.getPeerId()}`);let dstPeerId;try{dstPeerId=PeerId.createFromB58String(dstMa.getPeerId()).id;}catch(err){return cb(err);}sh.write(proto.CircuitRelay.encode({type:proto.CircuitRelay.Type.HOP,srcPeer:{id:this.swarm._peerInfo.id.id,addrs:srcMas.map(addr=>addr.buffer)},dstPeer:{id:dstPeerId,addrs:[dstMa.buffer]}}),cb);},cb=>sh.read(cb)],(err,msg)=>{if(err){return callback(err);}const message=proto.CircuitRelay.decode(msg);if(message.type!==proto.CircuitRelay.Type.STATUS){return callback(new Error(`Got invalid message type - `+`expected ${proto.CircuitRelay.Type.STATUS} got ${message.type}`));}if(message.code!==proto.CircuitRelay.Status.SUCCESS){return callback(new Error(`Got ${message.code} error code trying to dial over relay`));}callback(null,new Connection(sh.rest()));});});}_dialRelay(peer,cb){cb=once(cb||(()=>{}));this.swarm.dial(peer,multicodec.relay,once((err,conn)=>{if(err){log.err(err);return cb(err);}cb(null,conn);}));}}module.exports=Dialer;},5268:function(__unusedmodule,__unusedexports,__webpack_require__){const bridge=__webpack_require__(3203);const{resolve}=__webpack_require__(5897);const{mkdirSync,existsSync}=__webpack_require__(662);const IPFS=__webpack_require__(1776);process.on('uncaughtException',err=>{bridge.channel.send({action:'exception',payload:err.message});});bridge.channel.on('message',function(msg){const{action}=msg;bridge.channel.send(msg);});bridge.channel.send({action:'node-initialized',payload:true});const appPath=resolve(bridge.app.datadir(),'./.ipfs');if(!existsSync(appPath)){mkdirSync(appPath);bridge.channel.send({action:'ipfs-repo-created',payload:true});}else{bridge.channel.send({action:'ipfs-repo-already-exists',payload:true});}const ipfsConfig={init:{bits:1024,emptyRepo:true,log:state=>{return bridge.channel.send({action:'ipfs-log',payload:state});}},repo:appPath,EXPERIMENTAL:{dht:false,relay:{enabled:true,hop:{enabled:false,active:false}},pubsub:false},config:{Bootstrap:[],Addresses:{Swarm:['/ip4/159.203.117.254/tcp/9090/ws/p2p-websocket-star']}},connectionManager:{maxPeers:10,minPeers:2,pollInterval:20000}};const ipfs=new IPFS(ipfsConfig);bridge.channel.send({action:'ipfs-created',payload:true});ipfs.on('ready',function onIpfsReady(){return bridge.channel.send({action:'ipfs-ready',payload:true});});ipfs.on('error',function onIpfsError(err){return bridge.channel.send({action:'ipfs-error',payload:err});});},5275:function(module,__unusedexports,__webpack_require__){const bscript=__webpack_require__(5099);const OPS=__webpack_require__(9710);function check(script){const buffer=bscript.compile(script);return buffer.length>1&&buffer[0]===OPS.OP_RETURN;}check.toJSON=function(){return'null data output';};module.exports={output:{check:check}};},5280:function(module,__unusedexports,__webpack_require__){"use strict";const Base=__webpack_require__(1583);const baseX=__webpack_require__(5675);const base16=__webpack_require__(769);const base32=__webpack_require__(5195);const base64=__webpack_require__(2071);const constants=[['base1','1','','1'],['base2','0',baseX,'01'],['base8','7',baseX,'01234567'],['base10','9',baseX,'0123456789'],['base16','f',base16,'0123456789abcdef'],['base32','b',base32,'abcdefghijklmnopqrstuvwxyz234567'],['base32pad','c',base32,'abcdefghijklmnopqrstuvwxyz234567='],['base32hex','v',base32,'0123456789abcdefghijklmnopqrstuv'],['base32hexpad','t',base32,'0123456789abcdefghijklmnopqrstuv='],['base32z','h',base32,'ybndrfg8ejkmcpqxot1uwisza345h769'],['base58flickr','Z',baseX,'123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ'],['base58btc','z',baseX,'123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz'],['base64','m',base64,'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'],['base64pad','M',base64,'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/='],['base64url','u',base64,'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_'],['base64urlpad','U',base64,'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=']];const names=constants.reduce((prev,tupple)=>{prev[tupple[0]]=new Base(tupple[0],tupple[1],tupple[2],tupple[3]);return prev;},{});const codes=constants.reduce((prev,tupple)=>{prev[tupple[1]]=names[tupple[0]];return prev;},{});module.exports={names:names,codes:codes};},5285:function(module,exports,__webpack_require__){var Stream=__webpack_require__(6886);if(process.env.READABLE_STREAM==='disable'&&Stream){module.exports=Stream;exports=module.exports=Stream.Readable;exports.Readable=Stream.Readable;exports.Writable=Stream.Writable;exports.Duplex=Stream.Duplex;exports.Transform=Stream.Transform;exports.PassThrough=Stream.PassThrough;exports.Stream=Stream;}else{exports=module.exports=__webpack_require__(6891);exports.Stream=Stream||exports;exports.Readable=exports;exports.Writable=__webpack_require__(7502);exports.Duplex=__webpack_require__(7896);exports.Transform=__webpack_require__(3509);exports.PassThrough=__webpack_require__(2455);}},5292:function(module,__unusedexports,__webpack_require__){var rng=__webpack_require__(3421);var bytesToUuid=__webpack_require__(8846);function v4(options,buf,offset){var i=buf&&offset||0;if(typeof options=='string'){buf=options==='binary'?new Array(16):null;options=null;}options=options||{};var rnds=options.random||(options.rng||rng)();rnds[6]=rnds[6]&0x0f|0x40;rnds[8]=rnds[8]&0x3f|0x80;if(buf){for(var ii=0;ii<16;++ii){buf[i+ii]=rnds[ii];}}return buf||bytesToUuid(rnds);}module.exports=v4;},5294:function(module,__unusedexports,__webpack_require__){var parse=__webpack_require__(1663);var stringify=__webpack_require__(2089);module.exports=parse;module.exports.parse=parse;module.exports.stringify=stringify;},5298:function(module,__unusedexports,__webpack_require__){"use strict";const debug=__webpack_require__(746);const waterfall=__webpack_require__(4265);const support=__webpack_require__(2457);const crypto=__webpack_require__(7314);const log=debug('libp2p:secio');log.error=debug('libp2p:secio:error');module.exports=function exchange(state,callback){log('2. exchange - start');log('2. exchange - writing exchange');waterfall([cb=>crypto.createExchange(state,cb),(ex,cb)=>{support.write(state,ex);support.read(state.shake,cb);},(msg,cb)=>{log('2. exchange - reading exchange');crypto.verify(state,msg,cb);},cb=>crypto.generateKeys(state,cb)],err=>{if(err){return callback(err);}log('2. exchange - finish');callback();});};},5299:function(module,__unusedexports,__webpack_require__){"use strict";module.exports=__webpack_require__(2119);},5302:function(module,__unusedexports,__webpack_require__){var forge=__webpack_require__(7938);__webpack_require__(1214);module.exports=forge.cipher=forge.cipher||{};forge.cipher.algorithms=forge.cipher.algorithms||{};forge.cipher.createCipher=function(algorithm,key){var api=algorithm;if(typeof api==='string'){api=forge.cipher.getAlgorithm(api);if(api){api=api();}}if(!api){throw new Error('Unsupported algorithm: '+algorithm);}return new forge.cipher.BlockCipher({algorithm:api,key:key,decrypt:false});};forge.cipher.createDecipher=function(algorithm,key){var api=algorithm;if(typeof api==='string'){api=forge.cipher.getAlgorithm(api);if(api){api=api();}}if(!api){throw new Error('Unsupported algorithm: '+algorithm);}return new forge.cipher.BlockCipher({algorithm:api,key:key,decrypt:true});};forge.cipher.registerAlgorithm=function(name,algorithm){name=name.toUpperCase();forge.cipher.algorithms[name]=algorithm;};forge.cipher.getAlgorithm=function(name){name=name.toUpperCase();if(name in forge.cipher.algorithms){return forge.cipher.algorithms[name];}return null;};var BlockCipher=forge.cipher.BlockCipher=function(options){this.algorithm=options.algorithm;this.mode=this.algorithm.mode;this.blockSize=this.mode.blockSize;this._finish=false;this._input=null;this.output=null;this._op=options.decrypt?this.mode.decrypt:this.mode.encrypt;this._decrypt=options.decrypt;this.algorithm.initialize(options);};BlockCipher.prototype.start=function(options){options=options||{};var opts={};for(var key in options){opts[key]=options[key];}opts.decrypt=this._decrypt;this._finish=false;this._input=forge.util.createBuffer();this.output=options.output||forge.util.createBuffer();this.mode.start(opts);};BlockCipher.prototype.update=function(input){if(input){this._input.putBuffer(input);}while(!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish){}this._input.compact();};BlockCipher.prototype.finish=function(pad){if(pad&&(this.mode.name==='ECB'||this.mode.name==='CBC')){this.mode.pad=function(input){return pad(this.blockSize,input,false);};this.mode.unpad=function(output){return pad(this.blockSize,output,true);};}var options={};options.decrypt=this._decrypt;options.overflow=this._input.length()%this.blockSize;if(!this._decrypt&&this.mode.pad){if(!this.mode.pad(this._input,options)){return false;}}this._finish=true;this.update();if(this._decrypt&&this.mode.unpad){if(!this.mode.unpad(this.output,options)){return false;}}if(this.mode.afterFinish){if(!this.mode.afterFinish(this.output,options)){return false;}}return true;};},5312:function(module,__unusedexports,__webpack_require__){"use strict";const waterfall=__webpack_require__(4265);const each=__webpack_require__(4486);const queue=__webpack_require__(5978);const mh=__webpack_require__(8757);const c=__webpack_require__(2445);const PeerQueue=__webpack_require__(8618);const utils=__webpack_require__(2869);class Query{constructor(dht,key,makePath){this.dht=dht;this.key=key;this.makePath=makePath;this.concurrency=c.ALPHA;this._log=utils.logger(this.dht.peerInfo.id,'query:'+mh.toB58String(key));}run(peers,callback){const run={peersSeen:new Set(),errors:[],paths:null};if(peers.length===0){this._log.error('Running query with no peers');return callback();}const numPaths=Math.min(c.DISJOINT_PATHS,peers.length);const pathPeers=[];for(let i=0;i<numPaths;i++){pathPeers.push([]);}peers.forEach((peer,i)=>{pathPeers[i%numPaths].push(peer);});run.paths=pathPeers.map((peers,i)=>{return{peers,run,query:this.makePath(i,numPaths),peersToQuery:null};});each(run.paths,(path,cb)=>{waterfall([cb=>PeerQueue.fromKey(this.key,cb),(q,cb)=>{path.peersToQuery=q;each(path.peers,(p,cb)=>addPeerToQuery(p,this.dht,path,cb),cb);},cb=>workerQueue(this,path,cb)],cb);},(err,results)=>{this._log('query:done');if(err){return callback(err);}if(run.errors.length===run.peersSeen.size){return callback(run.errors[0]);}run.res={finalSet:run.peersSeen,paths:[]};run.paths.forEach(path=>{if(path.res&&path.res.success){run.res.paths.push(path.res);}});callback(null,run.res);});}}function workerQueue(query,path,callback){let killed=false;const q=queue((next,cb)=>{query._log('queue:work');execQuery(next,query,path,(err,done)=>{if(killed){return cb();}query._log('queue:work:done',err,done);if(err){return cb(err);}if(done){q.kill();killed=true;return callback();}cb();});},query.concurrency);const fill=()=>{query._log('queue:fill');while(q.length()<query.concurrency&&path.peersToQuery.length>0){q.push(path.peersToQuery.dequeue());}};fill();q.error=err=>{query._log.error('queue',err);callback(err);};q.drain=()=>{query._log('queue:drain');callback();};q.unsaturated=()=>{query._log('queue:unsatured');fill();};q.buffer=0;}function execQuery(next,query,path,callback){path.query(next,(err,res)=>{if(err){path.run.errors.push(err);callback();}else if(res.success){path.res=res;callback(null,true);}else if(res.closerPeers&&res.closerPeers.length>0){each(res.closerPeers,(closer,cb)=>{if(query.dht._isSelf(closer.id)){return cb();}closer=query.dht.peerBook.put(closer);query.dht._peerDiscovered(closer);addPeerToQuery(closer.id,query.dht,path,cb);},callback);}else{callback();}});}function addPeerToQuery(next,dht,path,callback){const run=path.run;if(dht._isSelf(next)){return callback();}if(run.peersSeen.has(next)){return callback();}run.peersSeen.add(next);path.peersToQuery.enqueue(next,callback);}module.exports=Query;},5315:function(module){"use strict";module.exports={_cache:{},_count:0,_eraseIndex:0,_usedList:{},_usedIndex:{},_CACHE_SIZE:5000,get:function(xkey,number,hardened){hardened=!!hardened;var key=xkey+'/'+number+'/'+hardened;if(this._cache[key]){this._cacheHit(key);return this._cache[key];}},set:function(xkey,number,hardened,derived){hardened=!!hardened;var key=xkey+'/'+number+'/'+hardened;this._cache[key]=derived;this._cacheHit(key);},_cacheHit:function(key){if(this._usedIndex[key]){delete this._usedList[this._usedIndex[key]];}this._usedList[this._count]=key;this._usedIndex[key]=this._count;this._count++;this._cacheRemove();},_cacheRemove:function(){while(this._eraseIndex<this._count-this._CACHE_SIZE){if(this._usedList[this._eraseIndex]){var removeKey=this._usedList[this._eraseIndex];delete this._usedIndex[removeKey];delete this._cache[removeKey];}delete this._usedList[this._eraseIndex];this._eraseIndex++;}}};},5316:function(module){"use strict";/*!
 * @description Recursive object extending
 * @author Viacheslav Lotsmanov <lotsmanov89@gmail.com>
 * @license MIT
 *
 * The MIT License (MIT)
 *
 * Copyright (c) 2013-2018 Viacheslav Lotsmanov
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy of
 * this software and associated documentation files (the "Software"), to deal in
 * the Software without restriction, including without limitation the rights to
 * use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of
 * the Software, and to permit persons to whom the Software is furnished to do so,
 * subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS
 * FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
 * COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER
 * IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
 * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 */function isSpecificValue(val){return val instanceof Buffer||val instanceof Date||val instanceof RegExp?true:false;}function cloneSpecificValue(val){if(val instanceof Buffer){var x=Buffer.alloc?Buffer.alloc(val.length):new Buffer(val.length);val.copy(x);return x;}else if(val instanceof Date){return new Date(val.getTime());}else if(val instanceof RegExp){return new RegExp(val);}else{throw new Error('Unexpected situation');}}function deepCloneArray(arr){var clone=[];arr.forEach(function(item,index){if(typeof item==='object'&&item!==null){if(Array.isArray(item)){clone[index]=deepCloneArray(item);}else if(isSpecificValue(item)){clone[index]=cloneSpecificValue(item);}else{clone[index]=deepExtend({},item);}}else{clone[index]=item;}});return clone;}function safeGetProperty(object,property){return property==='__proto__'?undefined:object[property];}var deepExtend=module.exports=function(){if(arguments.length<1||typeof arguments[0]!=='object'){return false;}if(arguments.length<2){return arguments[0];}var target=arguments[0];var args=Array.prototype.slice.call(arguments,1);var val,src,clone;args.forEach(function(obj){if(typeof obj!=='object'||obj===null||Array.isArray(obj)){return;}Object.keys(obj).forEach(function(key){src=safeGetProperty(target,key);val=safeGetProperty(obj,key);if(val===target){return;}else if(typeof val!=='object'||val===null){target[key]=val;return;}else if(Array.isArray(val)){target[key]=deepCloneArray(val);return;}else if(isSpecificValue(val)){target[key]=cloneSpecificValue(val);return;}else if(typeof src!=='object'||src===null||Array.isArray(src)){target[key]=deepExtend({},val);return;}else{target[key]=deepExtend(src,val);return;}});});return target;};},5319:function(module){"use strict";const BITS_PER_BYTE=7;module.exports=class SparseArray{constructor(){this._bitArrays=[];this._data=[];this._length=0;this._changedLength=false;this._changedData=false;}set(index,value){let pos=this._internalPositionFor(index,false);if(value===undefined){if(pos!==-1){this._unsetInternalPos(pos);this._unsetBit(index);this._changedLength=true;this._changedData=true;}}else{let needsSort=false;if(pos===-1){pos=this._data.length;this._setBit(index);this._changedData=true;}else{needsSort=true;}this._setInternalPos(pos,index,value,needsSort);this._changedLength=true;}}unset(index){this.set(index,undefined);}get(index){this._sortData();const pos=this._internalPositionFor(index,true);if(pos===-1){return undefined;}return this._data[pos][1];}push(value){this.set(this.length,value);return this.length;}get length(){this._sortData();if(this._changedLength){const last=this._data[this._data.length-1];this._length=last?last[0]+1:0;this._changedLength=false;}return this._length;}forEach(iterator){let i=0;while(i<this.length){iterator(this.get(i),i,this);i++;}}map(iterator){let i=0;let mapped=new Array(this.length);while(i<this.length){mapped[i]=iterator(this.get(i),i,this);i++;}return mapped;}reduce(reducer,initialValue){let i=0;let acc=initialValue;while(i<this.length){const value=this.get(i);acc=reducer(acc,value,i);i++;}return acc;}find(finder){let i=0,found,last;while(i<this.length&&!found){last=this.get(i);found=finder(last);i++;}return found?last:undefined;}_internalPositionFor(index,noCreate){const bytePos=this._bytePosFor(index,noCreate);if(bytePos>=this._bitArrays.length){return-1;}const byte=this._bitArrays[bytePos];const bitPos=index-bytePos*BITS_PER_BYTE;const exists=(byte&1<<bitPos)>0;if(!exists){return-1;}const previousPopCount=this._bitArrays.slice(0,bytePos).reduce(popCountReduce,0);const mask=~(0xffffffff<<bitPos+1);const bytePopCount=popCount(byte&mask);const arrayPos=previousPopCount+bytePopCount-1;return arrayPos;}_bytePosFor(index,noCreate){const bytePos=Math.floor(index/BITS_PER_BYTE);const targetLength=bytePos+1;while(!noCreate&&this._bitArrays.length<targetLength){this._bitArrays.push(0);}return bytePos;}_setBit(index){const bytePos=this._bytePosFor(index,false);this._bitArrays[bytePos]|=1<<index-bytePos*BITS_PER_BYTE;}_unsetBit(index){const bytePos=this._bytePosFor(index,false);this._bitArrays[bytePos]&=~(1<<index-bytePos*BITS_PER_BYTE);}_setInternalPos(pos,index,value,needsSort){const data=this._data;const elem=[index,value];if(needsSort){this._sortData();data[pos]=elem;}else{if(data.length){if(data[data.length-1][0]>=index){data.push(elem);}else if(data[0][0]<=index){data.unshift(elem);}else{const randomIndex=Math.round(data.length/2);this._data=data.slice(0,randomIndex).concat(elem).concat(data.slice(randomIndex));}}else{this._data.push(elem);}this._changedData=true;this._changedLength=true;}}_unsetInternalPos(pos){this._data.splice(pos,1);}_sortData(){if(this._changedData){this._data.sort(sortInternal);}this._changedData=false;}bitField(){const bytes=[];let pendingBitsForResultingByte=8;let pendingBitsForNewByte=0;let resultingByte=0;let newByte;const pending=this._bitArrays.slice();while(pending.length||pendingBitsForNewByte){if(pendingBitsForNewByte===0){newByte=pending.shift();pendingBitsForNewByte=7;}const usingBits=Math.min(pendingBitsForNewByte,pendingBitsForResultingByte);const mask=~(0b11111111<<usingBits);const masked=newByte&mask;resultingByte|=masked<<8-pendingBitsForResultingByte;newByte=newByte>>>usingBits;pendingBitsForNewByte-=usingBits;pendingBitsForResultingByte-=usingBits;if(!pendingBitsForResultingByte||!pendingBitsForNewByte&&!pending.length){bytes.push(resultingByte);resultingByte=0;pendingBitsForResultingByte=8;}}for(var i=bytes.length-1;i>0;i--){const value=bytes[i];if(value===0){bytes.pop();}else{break;}}return bytes;}compactArray(){this._sortData();return this._data.map(valueOnly);}};function popCountReduce(count,byte){return count+popCount(byte);}function popCount(_v){let v=_v;v=v-(v>>1&0x55555555);v=(v&0x33333333)+(v>>2&0x33333333);return(v+(v>>4)&0xF0F0F0F)*0x1010101>>24;}function sortInternal(a,b){return a[0]-b[0];}function valueOnly(elem){return elem[1];}},5349:function(module,__unusedexports,__webpack_require__){var Symbol=__webpack_require__(8326),isArguments=__webpack_require__(5108),isArray=__webpack_require__(1015);var spreadableSymbol=Symbol?Symbol.isConcatSpreadable:undefined;function isFlattenable(value){return isArray(value)||isArguments(value)||!!(spreadableSymbol&&value&&value[spreadableSymbol]);}module.exports=isFlattenable;},5352:function(module,__unusedexports,__webpack_require__){"use strict";const waterfall=__webpack_require__(4265);const series=__webpack_require__(7644);const{updateTree,updateMfsRoot,toSources,removeLink,toMfsPath,toTrail,FILE_SEPARATOR}=__webpack_require__(7777);const defaultOptions={recursive:false,cidVersion:0,hashAlg:'sha2-256',format:'dag-pb'};module.exports=context=>{return function mfsRm(){const args=Array.from(arguments);const callback=args.pop();waterfall([cb=>toSources(context,args,defaultOptions,cb),({sources,options},cb)=>{if(!sources.length){return cb(new Error('Please supply at least one path to remove'));}series(sources.map(source=>{return done=>removePath(context,source.path,options,done);}),error=>cb(error));}],callback);};};const removePath=(context,path,options,callback)=>{if(path===FILE_SEPARATOR){return callback(new Error('Cannot delete root'));}waterfall([cb=>toMfsPath(context,path,cb),({mfsPath,parts},cb)=>toTrail(context,mfsPath,options,(err,trail)=>cb(err,{mfsPath,parts,trail})),({trail},cb)=>{const child=trail.pop();const parent=trail[trail.length-1];if(!parent){return cb(new Error(`${path} does not exist`));}if(child.type==='dir'&&!options.recursive){return cb(new Error(`${path} is a directory, use -r to remove directories`));}waterfall([done=>removeLink(context,{parentCid:parent.cid,name:child.name},done),({cid},done)=>{parent.cid=cid;done(null,trail);}],cb);},(trail,cb)=>updateTree(context,trail,options,cb),({cid},cb)=>updateMfsRoot(context,cid,cb)],callback);};},5355:function(module,__unusedexports,__webpack_require__){module.exports=__webpack_require__(9372);module.exports.Interpreter=__webpack_require__(5142);},5356:function(module,__unusedexports,__webpack_require__){"use strict";var $=__webpack_require__(5107);var buffer=__webpack_require__(9423);var BufferWriter=__webpack_require__(2418);var G1_PREFIX_MASK=0x02;var G2_PREFIX_MASK=0x0a;function CompressedG1(params){if(!(this instanceof CompressedG1)){return new CompressedG1(params);}if(params){return this._fromObject(params);}}CompressedG1.fromObject=function(obj){$.checkArgument(_.isObject(obj));var pt=new CompressedG1();return pt._fromObject(obj);};CompressedG1.prototype._fromObject=function(params){this.y_lsb=params.y_lsb;this.x=new buffer.Buffer(params.x,'hex');return this;};CompressedG1.prototype.toObject=CompressedG1.prototype.toJSON=function toObject(){var obj={y_lsb:this.y_lsb,x:this.x.toString('hex')};return obj;};CompressedG1.fromBufferReader=function(br){var pt=new CompressedG1();var y_lsb=br.readUInt8();pt.y_lsb=y_lsb&1;pt.x=br.read(32);return pt;};CompressedG1.prototype.toBufferWriter=function(writer){if(!writer){writer=new BufferWriter();}writer.writeUInt8(G1_PREFIX_MASK|this.y_lsb);writer.write(this.x);return writer;};function CompressedG2(params){if(!(this instanceof CompressedG2)){return new CompressedG2(params);}if(params){return this._fromObject(params);}}CompressedG2.fromObject=function(obj){$.checkArgument(_.isObject(obj));var pt=new CompressedG2();return pt._fromObject(obj);};CompressedG2.prototype._fromObject=function(params){this.y_gt=params.y_gt;this.x=new buffer.Buffer(params.x,'hex');return this;};CompressedG2.prototype.toObject=CompressedG2.prototype.toJSON=function toObject(){var obj={y_gt:this.y_gt,x:this.x.toString('hex')};return obj;};CompressedG2.fromBufferReader=function(br){var pt=new CompressedG2();var y_gt=br.readUInt8();pt.y_gt=y_gt&1;pt.x=br.read(64);return pt;};CompressedG2.prototype.toBufferWriter=function(writer){if(!writer){writer=new BufferWriter();}writer.writeUInt8(G2_PREFIX_MASK|this.y_gt);writer.write(this.x);return writer;};function ZCProof(params){if(!(this instanceof ZCProof)){return new ZCProof(params);}if(params){return this._fromObject(params);}}ZCProof.fromObject=function(obj){$.checkArgument(_.isObject(obj));var proof=new ZCProof();return proof._fromObject(obj);};ZCProof.prototype._fromObject=function(params){this.g_A=CompressedG1.fromObject(params.g_A);this.g_A_prime=CompressedG1.fromObject(params.g_A_prime);this.g_B=CompressedG2.fromObject(params.g_B);this.g_B_prime=CompressedG1.fromObject(params.g_B_prime);this.g_C=CompressedG1.fromObject(params.g_C);this.g_C_prime=CompressedG1.fromObject(params.g_C_prime);this.g_K=CompressedG1.fromObject(params.g_K);this.g_H=CompressedG1.fromObject(params.g_H);return this;};ZCProof.prototype.toObject=ZCProof.prototype.toJSON=function toObject(){var obj={g_A:this.g_A.toObject(),g_A_prime:this.g_A_prime.toObject(),g_B:this.g_B.toObject(),g_B_prime:this.g_B_prime.toObject(),g_C:this.g_C.toObject(),g_C_prime:this.g_C_prime.toObject(),g_K:this.g_K.toObject(),g_H:this.g_H.toObject()};return obj;};ZCProof.fromBufferReader=function(br){var proof=new ZCProof();proof.g_A=CompressedG1.fromBufferReader(br);proof.g_A_prime=CompressedG1.fromBufferReader(br);proof.g_B=CompressedG2.fromBufferReader(br);proof.g_B_prime=CompressedG1.fromBufferReader(br);proof.g_C=CompressedG1.fromBufferReader(br);proof.g_C_prime=CompressedG1.fromBufferReader(br);proof.g_K=CompressedG1.fromBufferReader(br);proof.g_H=CompressedG1.fromBufferReader(br);return proof;};ZCProof.prototype.toBufferWriter=function(writer){if(!writer){writer=new BufferWriter();}this.g_A.toBufferWriter(writer);this.g_A_prime.toBufferWriter(writer);this.g_B.toBufferWriter(writer);this.g_B_prime.toBufferWriter(writer);this.g_C.toBufferWriter(writer);this.g_C_prime.toBufferWriter(writer);this.g_K.toBufferWriter(writer);this.g_H.toBufferWriter(writer);return writer;};module.exports=ZCProof;},5358:function(module){module.exports={"_args":[["ipfs@0.34.4","/Users/romuloalves/Projects/tramonto/TramontoOne/nodejs-assets/nodejs-project"]],"_from":"ipfs@0.34.4","_id":"ipfs@0.34.4","_inBundle":false,"_integrity":"sha512-BhNVdWRE9lP+D/DfAI4L3rtIFg3trxpkEbCELBA7+mLi5ZkVnNpsOvvlcn3eJdufwqBj0/9x2xbOP1YQzZfEKg==","_location":"/ipfs","_phantomChildren":{},"_requested":{"type":"version","registry":true,"raw":"ipfs@0.34.4","name":"ipfs","escapedName":"ipfs","rawSpec":"0.34.4","saveSpec":null,"fetchSpec":"0.34.4"},"_requiredBy":["/"],"_resolved":"https://registry.npmjs.org/ipfs/-/ipfs-0.34.4.tgz","_spec":"0.34.4","_where":"/Users/romuloalves/Projects/tramonto/TramontoOne/nodejs-assets/nodejs-project","bin":{"jsipfs":"src/cli/bin.js"},"browser":{"./src/core/components/init-assets.js":false,"./src/core/runtime/add-from-fs-nodejs.js":"./src/core/runtime/add-from-fs-browser.js","./src/core/runtime/config-nodejs.js":"./src/core/runtime/config-browser.js","./src/core/runtime/dns-nodejs.js":"./src/core/runtime/dns-browser.js","./src/core/runtime/fetch-nodejs.js":"./src/core/runtime/fetch-browser.js","./src/core/runtime/libp2p-nodejs.js":"./src/core/runtime/libp2p-browser.js","./src/core/runtime/preload-nodejs.js":"./src/core/runtime/preload-browser.js","./src/core/runtime/repo-nodejs.js":"./src/core/runtime/repo-browser.js","./test/utils/create-repo-nodejs.js":"./test/utils/create-repo-browser.js","stream":"readable-stream","joi":"joi-browser"},"bugs":{"url":"https://github.com/ipfs/js-ipfs/issues"},"contributors":[{"name":"0xflotus","email":"0xflotus@gmail.com"},{"name":"A_A","email":"21040751+Otto-AA@users.noreply.github.com"},{"name":"Alan Shaw","email":"alan.shaw@protocol.ai"},{"name":"Alan Shaw","email":"alan@tableflip.io"},{"name":"Alex North","email":"alex@alexnorth.me"},{"name":"Alex Potsides","email":"alex@achingbrain.net"},{"name":"Andrew de Andrade","email":"andrew@deandrade.com.br"},{"name":"Andr Cruz","email":"andremiguelcruz@msn.com"},{"name":"Arkadiy Kukarkin","email":"parkan@users.noreply.github.com"},{"name":"Arpit Agarwal","email":"93arpit@gmail.com"},{"name":"Arpit Agarwal","email":"atvanguard@users.noreply.github.com"},{"name":"Bernard Mordan","email":"bernard@tableflip.io"},{"name":"Brian Vander Schaaf","email":"bvs330@gmail.com"},{"name":"Bruno Zell","email":"bruno.zzell@gmail.com"},{"name":"CHEVALAY JOSSELIN","email":"josselin54.chevalay@gmail.com"},{"name":"Caio Gondim","email":"me@caiogondim.com"},{"name":"Chance Hudson","email":"jchancehud@gmail.com"},{"name":"Christian Couder","email":"chriscool@tuxfamily.org"},{"name":"Dafeng","email":"dfguo.joe@gmail.com"},{"name":"Dan Ordille","email":"dordille@gmail.com"},{"name":"Daniel J. O'Quinn","email":"danieljoquinn@gmail.com"},{"name":"Daniela Borges Matos de Carvalho","email":"alunassertiva@gmail.com"},{"name":"David Dias","email":"daviddias.p@gmail.com"},{"name":"David Gilbertson","email":"gilbertson.david@gmail.com"},{"name":"David da Silva","email":"dasilvacontin@gmail.com"},{"name":"Diogo Silva","email":"fsdiogo@gmail.com"},{"name":"Dmitriy Ryajov","email":"dryajov@gmail.com"},{"name":"Dzmitry Das","email":"dbachko@gmail.com"},{"name":"Enrico Marino","email":"enrico.marino@email.com"},{"name":"Faheel Ahmad","email":"faheel@live.in"},{"name":"Felix Yan","email":"felixonmars@archlinux.org"},{"name":"Francisco Baio Dias","email":"xicombd@gmail.com"},{"name":"Francisco Baio Dias","email":"francisco@typeform.com"},{"name":"Friedel Ziegelmayer","email":"dignifiedquire@gmail.com"},{"name":"Gar","email":"gar+gh@danger.computer"},{"name":"Georgios Rassias","email":"georassias@gmail.com"},{"name":"Gorka Ludlow","email":"gorka@aquigorka.com"},{"name":"Greenkeeper","email":"support@greenkeeper.io"},{"name":"Haad","email":"haadcode@users.noreply.github.com"},{"name":"Haoliang Yu","email":"haoliangyu@users.noreply.github.com"},{"name":"Harsh Vakharia","email":"harshjv@users.noreply.github.com"},{"name":"Henrique Dias","email":"hacdias@gmail.com"},{"name":"Henry Rodrick","email":"moshisushi@gmail.com"},{"name":"Heo Sangmin","email":"heo@mapiacompany.com"},{"name":"Hugo Dias","email":"mail@hugodias.me"},{"name":"Hugo Dias","email":"hugomrdias@gmail.com"},{"name":"Jacob Heun","email":"jacobheun@gmail.com"},{"name":"Jacob Heun","email":"jake@andyet.net"},{"name":"Jade Meskill","email":"jade.meskill@gmail.com"},{"name":"Johannes Wikner","email":"johannes.wikner@gmail.com"},{"name":"Jon Schlinkert","email":"dev@sellside.com"},{"name":"Jonathan","email":"jkrone@vt.edu"},{"name":"Joo Antunes","email":"j.goncalo.antunes@gmail.com"},{"name":"Joo Santos","email":"joaosantos15@users.noreply.github.com"},{"name":"Kevin Wang","email":"kevin@fossa.io"},{"name":"Lars Gierth","email":"larsg@systemli.org"},{"name":"Lukas Drgon","email":"lukas.drgon@gmail.com"},{"name":"Maciej Krger","email":"mkg20001@gmail.com"},{"name":"Marcin Rataj","email":"lidel@lidel.org"},{"name":"Marius Darila","email":"marius.darila@gmail.com"},{"name":"Mat Kelly","email":"machawk1@gmail.com"},{"name":"Michelle Lee","email":"michelle@protocol.ai"},{"name":"Mikeal Rogers","email":"mikeal.rogers@gmail.com"},{"name":"Mithgol","email":"getgit@mithgol.ru"},{"name":"Molly","email":"momack2@users.noreply.github.com"},{"name":"My9Bot","email":"34904312+My9Bot@users.noreply.github.com"},{"name":"Nuno Nogueira","email":"nunofmn@gmail.com"},{"name":"Oli Evans","email":"oli@tableflip.io"},{"name":"Oskar Nyberg","email":"oskar@oskarnyberg.com"},{"name":"Pascal Precht","email":"pascal.precht@googlemail.com"},{"name":"Pau Ramon Revilla","email":"masylum@gmail.com"},{"name":"Paulo Rodrigues","email":"me@paulogr.com"},{"name":"Pedro Teixeira","email":"i@pgte.me"},{"name":"Portia Burton","email":"plburton@gmail.com"},{"name":"Raoul Millais","email":"raoul@raoulmillais.com"},{"name":"RasmusErik Voel Jensen","email":"github@solsort.com"},{"name":"Richard Littauer","email":"richard.littauer@gmail.com"},{"name":"Richard Schneider","email":"makaretu@gmail.com"},{"name":"Rob Brackett","email":"rob@robbrackett.com"},{"name":"Rod Keys","email":"rod@zokos.com"},{"name":"Sangwon Hong","email":"qpakzk@gmail.com"},{"name":"Sid Harder","email":"sideharder@gmail.com"},{"name":"SidHarder","email":"softwarenavigator@gmail.com"},{"name":"Stephen Whitmore","email":"stephen.whitmore@gmail.com"},{"name":"Stephen Whitmore","email":"noffle@users.noreply.github.com"},{"name":"Terence Pae","email":"terencepae@gmail.com"},{"name":"Uro Jurgli","email":"jurglic@gmail.com"},{"name":"Vasco Santos","email":"vasco.santos@ua.pt"},{"name":"Vasco Santos","email":"vasco.santos@moxy.studio"},{"name":"Volker Mische","email":"volker.mische@gmail.com"},{"name":"Xiao Liang","email":"yxliang01@users.noreply.github.com"},{"name":"Yahya","email":"ya7yaz@gmail.com"},{"name":"Yole","email":"yole@ultiledger.io"},{"name":"bitspill","email":"bitspill+github@bitspill.net"},{"name":"datafatmunger","email":"jbg@peerparty.org"},{"name":"haad","email":"haad@headbanggames.com"},{"name":"jbenet","email":"juan@benet.ai"},{"name":"jonahweissman","email":"19804455+jonahweissman@users.noreply.github.com"},{"name":"kevingzhang","email":"kevin.zhang.canada@gmail.com"},{"name":"kumavis","email":"kumavis@users.noreply.github.com"},{"name":"nginnever","email":"ginneversource@gmail.com"},{"name":"npmcdn-to-unpkg-bot","email":"npmcdn-to-unpkg-bot@users.noreply.github.com"},{"name":"robbsolter","email":"35879806+robbsolter@users.noreply.github.com"},{"name":"seungwon-kang","email":"ksw3894@gmail.com"},{"name":"tcme","email":"hi@this-connect.me"},{"name":"victorbjelkholm","email":"victorbjelkholm@gmail.com"},{"name":"ukasz Magiera","email":"magik6k@users.noreply.github.com"},{"name":" ","email":"negamaxi@gmail.com"}],"dependencies":{"@nodeutils/defaults-deep":"^1.1.0","async":"^2.6.1","bignumber.js":"^8.0.2","binary-querystring":"~0.1.2","bl":"^2.1.2","boom":"^7.2.0","bs58":"^4.0.1","byteman":"^1.3.5","cid-tool":"~0.2.0","cids":"~0.5.5","class-is":"^1.1.0","datastore-core":"~0.6.0","datastore-pubsub":"~0.1.1","debug":"^4.1.0","err-code":"^1.1.2","file-type":"^10.2.0","fnv1a":"^1.0.1","fsm-event":"^2.1.0","get-folder-size":"^2.0.0","glob":"^7.1.3","hapi":"^16.6.2","hapi-set-header":"^1.0.2","hoek":"^6.1.2","human-to-milliseconds":"^1.0.0","interface-datastore":"~0.6.0","ipfs-bitswap":"~0.22.0","ipfs-block":"~0.8.0","ipfs-block-service":"~0.15.1","ipfs-http-client":"^29.0.0","ipfs-http-response":"~0.2.1","ipfs-mfs":"~0.8.0","ipfs-multipart":"~0.1.0","ipfs-repo":"~0.26.1","ipfs-unixfs":"~0.1.16","ipfs-unixfs-engine":"~0.35.3","ipld":"~0.20.1","ipld-bitcoin":"~0.1.8","ipld-dag-pb":"~0.15.0","ipld-ethereum":"^2.0.1","ipld-git":"~0.2.2","ipld-zcash":"~0.1.6","ipns":"~0.5.0","is-ipfs":"~0.4.8","is-pull-stream":"~0.0.0","is-stream":"^1.1.0","joi":"^14.3.0","joi-browser":"^13.4.0","joi-multiaddr":"^4.0.0","libp2p":"~0.24.1","libp2p-bootstrap":"~0.9.3","libp2p-crypto":"~0.16.0","libp2p-kad-dht":"~0.14.4","libp2p-keychain":"~0.3.3","libp2p-mdns":"~0.12.0","libp2p-mplex":"~0.8.4","libp2p-record":"~0.6.1","libp2p-secio":"~0.11.0","libp2p-tcp":"~0.13.0","libp2p-webrtc-star":"~0.15.5","libp2p-websocket-star-multi":"~0.4.0","libp2p-websockets":"~0.12.0","lodash":"^4.17.11","mafmt":"^6.0.2","mime-types":"^2.1.21","mkdirp":"~0.5.1","multiaddr":"^6.0.0","multiaddr-to-uri":"^4.0.0","multibase":"~0.6.0","multihashes":"~0.4.14","multihashing-async":"~0.5.1","node-fetch":"^2.3.0","once":"^1.4.0","peer-book":"~0.9.0","peer-id":"~0.12.0","peer-info":"~0.15.0","progress":"^2.0.1","prom-client":"^11.1.3","prometheus-gc-stats":"~0.6.0","promisify-es6":"^1.0.3","protons":"^1.0.1","pull-abortable":"^4.1.1","pull-cat":"^1.1.11","pull-defer":"~0.2.3","pull-file":"^1.1.0","pull-ndjson":"~0.1.1","pull-pushable":"^2.2.0","pull-sort":"^1.0.1","pull-stream":"^3.6.9","pull-stream-to-stream":"^1.3.4","pump":"^3.0.0","read-pkg-up":"^4.0.0","readable-stream":"^3.1.1","receptacle":"^1.3.2","stream-to-pull-stream":"^1.7.2","tar-stream":"^1.6.2","temp":"~0.9.0","update-notifier":"^2.5.0","varint":"^5.0.0","yargs":"^12.0.5","yargs-promise":"^1.1.0"},"description":"JavaScript implementation of the IPFS specification","devDependencies":{"aegir":"^18.0.3","chai":"^4.2.0","delay":"^4.1.0","detect-node":"^2.0.4","dir-compare":"^1.4.0","dirty-chai":"^2.0.1","execa":"^1.0.0","form-data":"^2.3.3","hat":"0.0.3","interface-ipfs-core":"~0.96.0","ipfsd-ctl":"~0.40.1","ncp":"^2.0.0","qs":"^6.5.2","rimraf":"^2.6.2","sinon":"^7.1.1","stream-to-promise":"^2.2.0"},"engines":{"node":">=10.0.0","npm":">=6.0.0"},"homepage":"https://github.com/ipfs/js-ipfs#readme","keywords":["IPFS"],"leadMaintainer":"Alan Shaw <alan@tableflip.io>","license":"MIT","main":"src/core/index.js","name":"ipfs","optionalDependencies":{"prom-client":"^11.1.3","prometheus-gc-stats":"~0.6.0"},"repository":{"type":"git","url":"git+https://github.com/ipfs/js-ipfs.git"},"scripts":{"benchmark":"echo \"Error: no benchmarks yet\" && exit 1","benchmark:browser":"echo \"Error: no benchmarks yet\" && exit 1","benchmark:node":"echo \"Error: no benchmarks yet\" && exit 1","benchmark:node:core":"echo \"Error: no benchmarks yet\" && exit 1","benchmark:node:http":"echo \"Error: no benchmarks yet\" && exit 1","build":"aegir build","coverage":"aegir coverage","coverage-publish":"aegir-coverage publish","dep-check":"npx dependency-check package.json './test/**/*.js' './src/**/*.js'","lint":"aegir lint","release":"aegir release -t node -t browser","release-major":"aegir release --type major -t node -t browser","release-minor":"aegir release --type minor -t node -t browser","test":"aegir test -t node -t browser -t webworker --no-cors --timeout=10000","test:bootstrapers":"IPFS_TEST=bootstrapers aegir test -t browser -f test/bootstrapers.js --timeout=10000","test:browser":"aegir test -t browser --no-cors --timeout=10000","test:node":"aegir test -t node --timeout=10000","test:node:cli":"aegir test -t node -f test/cli/index.js --timeout=10000","test:node:core":"aegir test -t node -f test/core/**/*.js --timeout=10000","test:node:gateway":"aegir test -t node -f test/gateway/index.js --timeout=10000","test:node:http":"aegir test -t node -f test/http-api/index.js --timeout=10000","test:node:interface":"aegir test -t node -f test/core/interface.spec.js --timeout=10000","test:webworker":"aegir test -t webworker --no-cors --timeout=10000"},"version":"0.34.4"};},5367:function(module,__unusedexports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}var ethUtil=__webpack_require__(4784);var fees=__webpack_require__(6378);var BN=ethUtil.BN;var N_DIV_2=new BN('7fffffffffffffffffffffffffffffff5d576e7357a4501ddfe92f46681b20a0',16);var Transaction=function(){function Transaction(data){_classCallCheck(this,Transaction);data=data||{};var fields=[{name:'nonce',length:32,allowLess:true,default:new Buffer([])},{name:'gasPrice',length:32,allowLess:true,default:new Buffer([])},{name:'gasLimit',alias:'gas',length:32,allowLess:true,default:new Buffer([])},{name:'to',allowZero:true,length:20,default:new Buffer([])},{name:'value',length:32,allowLess:true,default:new Buffer([])},{name:'data',alias:'input',allowZero:true,default:new Buffer([])},{name:'v',allowZero:true,default:new Buffer([0x1c])},{name:'r',length:32,allowZero:true,allowLess:true,default:new Buffer([])},{name:'s',length:32,allowZero:true,allowLess:true,default:new Buffer([])}];ethUtil.defineProperties(this,fields,data);Object.defineProperty(this,'from',{enumerable:true,configurable:true,get:this.getSenderAddress.bind(this)});var sigV=ethUtil.bufferToInt(this.v);var chainId=Math.floor((sigV-35)/2);if(chainId<0)chainId=0;this._chainId=chainId||data.chainId||0;this._homestead=true;}Transaction.prototype.toCreationAddress=function toCreationAddress(){return this.to.toString('hex')==='';};Transaction.prototype.hash=function hash(includeSignature){if(includeSignature===undefined)includeSignature=true;var items=void 0;if(includeSignature){items=this.raw;}else{if(this._chainId>0){var raw=this.raw.slice();this.v=this._chainId;this.r=0;this.s=0;items=this.raw;this.raw=raw;}else{items=this.raw.slice(0,6);}}return ethUtil.rlphash(items);};Transaction.prototype.getChainId=function getChainId(){return this._chainId;};Transaction.prototype.getSenderAddress=function getSenderAddress(){if(this._from){return this._from;}var pubkey=this.getSenderPublicKey();this._from=ethUtil.publicToAddress(pubkey);return this._from;};Transaction.prototype.getSenderPublicKey=function getSenderPublicKey(){if(!this._senderPubKey||!this._senderPubKey.length){if(!this.verifySignature())throw new Error('Invalid Signature');}return this._senderPubKey;};Transaction.prototype.verifySignature=function verifySignature(){var msgHash=this.hash(false);if(this._homestead&&new BN(this.s).cmp(N_DIV_2)===1){return false;}try{var v=ethUtil.bufferToInt(this.v);if(this._chainId>0){v-=this._chainId*2+8;}this._senderPubKey=ethUtil.ecrecover(msgHash,v,this.r,this.s);}catch(e){return false;}return!!this._senderPubKey;};Transaction.prototype.sign=function sign(privateKey){var msgHash=this.hash(false);var sig=ethUtil.ecsign(msgHash,privateKey);if(this._chainId>0){sig.v+=this._chainId*2+8;}Object.assign(this,sig);};Transaction.prototype.getDataFee=function getDataFee(){var data=this.raw[5];var cost=new BN(0);for(var i=0;i<data.length;i++){data[i]===0?cost.iaddn(fees.txDataZeroGas.v):cost.iaddn(fees.txDataNonZeroGas.v);}return cost;};Transaction.prototype.getBaseFee=function getBaseFee(){var fee=this.getDataFee().iaddn(fees.txGas.v);if(this._homestead&&this.toCreationAddress()){fee.iaddn(fees.txCreation.v);}return fee;};Transaction.prototype.getUpfrontCost=function getUpfrontCost(){return new BN(this.gasLimit).imul(new BN(this.gasPrice)).iadd(new BN(this.value));};Transaction.prototype.validate=function validate(stringError){var errors=[];if(!this.verifySignature()){errors.push('Invalid Signature');}if(this.getBaseFee().cmp(new BN(this.gasLimit))>0){errors.push(['gas limit is too low. Need at least '+this.getBaseFee()]);}if(stringError===undefined||stringError===false){return errors.length===0;}else{return errors.join(' ');}};return Transaction;}();module.exports=Transaction;},5369:function(module,__unusedexports,__webpack_require__){"use strict";const sanitize=__webpack_require__(4370);const mergeOptions=__webpack_require__(5996);const crypto=__webpack_require__(318);const DS=__webpack_require__(759);const collect=__webpack_require__(8342);const pull=__webpack_require__(418);const CMS=__webpack_require__(742);const keyPrefix='/pkcs8/';const infoPrefix='/info/';const NIST={minKeyLength:112/8,minSaltLength:128/8,minIterationCount:1000};const defaultOptions={dek:{keyLength:512/8,iterationCount:10000,salt:'you should override this value with a crypto secure random number',hash:'sha2-512'}};function validateKeyName(name){if(!name)return false;if(typeof name!=='string')return false;return name===sanitize(name.trim());}function _error(callback,err){const min=200;const max=1000;const delay=Math.random()*(max-min)+min;if(typeof err==='string')err=new Error(err);setTimeout(callback,delay,err,null);}function DsName(name){return new DS.Key(keyPrefix+name);}function DsInfoName(name){return new DS.Key(infoPrefix+name);}class Keychain{constructor(store,options){if(!store){throw new Error('store is required');}this.store=store;const opts=mergeOptions(defaultOptions,options);if(!opts.passPhrase||opts.passPhrase.length<20){throw new Error('passPhrase must be least 20 characters');}if(opts.dek.keyLength<NIST.minKeyLength){throw new Error(`dek.keyLength must be least ${NIST.minKeyLength} bytes`);}if(opts.dek.salt.length<NIST.minSaltLength){throw new Error(`dek.saltLength must be least ${NIST.minSaltLength} bytes`);}if(opts.dek.iterationCount<NIST.minIterationCount){throw new Error(`dek.iterationCount must be least ${NIST.minIterationCount}`);}const dek=crypto.pbkdf2(opts.passPhrase,opts.dek.salt,opts.dek.iterationCount,opts.dek.keyLength,opts.dek.hash);Object.defineProperty(this,'_',{value:()=>dek});}get cms(){return new CMS(this);}static generateOptions(){const options=Object.assign({},defaultOptions);const saltLength=Math.ceil(NIST.minSaltLength/3)*3;options.dek.salt=crypto.randomBytes(saltLength).toString('base64');return options;}static get options(){return defaultOptions;}createKey(name,type,size,callback){const self=this;if(!validateKeyName(name)||name==='self'){return _error(callback,`Invalid key name '${name}'`);}if(typeof type!=='string'){return _error(callback,`Invalid key type '${type}'`);}if(!Number.isSafeInteger(size)){return _error(callback,`Invalid key size '${size}'`);}const dsname=DsName(name);self.store.has(dsname,(err,exists)=>{if(err)return _error(callback,err);if(exists)return _error(callback,`Key '${name}' already exists`);switch(type.toLowerCase()){case'rsa':if(size<2048){return _error(callback,`Invalid RSA key size ${size}`);}break;default:break;}crypto.keys.generateKeyPair(type,size,(err,keypair)=>{if(err)return _error(callback,err);keypair.id((err,kid)=>{if(err)return _error(callback,err);keypair.export(this._(),(err,pem)=>{if(err)return _error(callback,err);const keyInfo={name:name,id:kid};const batch=self.store.batch();batch.put(dsname,pem);batch.put(DsInfoName(name),JSON.stringify(keyInfo));batch.commit(err=>{if(err)return _error(callback,err);callback(null,keyInfo);});});});});});}listKeys(callback){const self=this;const query={prefix:infoPrefix};pull(self.store.query(query),collect((err,res)=>{if(err)return _error(callback,err);const info=res.map(r=>JSON.parse(r.value));callback(null,info);}));}findKeyById(id,callback){this.listKeys((err,keys)=>{if(err)return _error(callback,err);const key=keys.find(k=>k.id===id);callback(null,key);});}findKeyByName(name,callback){if(!validateKeyName(name)){return _error(callback,`Invalid key name '${name}'`);}const dsname=DsInfoName(name);this.store.get(dsname,(err,res)=>{if(err){return _error(callback,`Key '${name}' does not exist. ${err.message}`);}callback(null,JSON.parse(res.toString()));});}removeKey(name,callback){const self=this;if(!validateKeyName(name)||name==='self'){return _error(callback,`Invalid key name '${name}'`);}const dsname=DsName(name);self.findKeyByName(name,(err,keyinfo)=>{if(err)return _error(callback,err);const batch=self.store.batch();batch.delete(dsname);batch.delete(DsInfoName(name));batch.commit(err=>{if(err)return _error(callback,err);callback(null,keyinfo);});});}renameKey(oldName,newName,callback){const self=this;if(!validateKeyName(oldName)||oldName==='self'){return _error(callback,`Invalid old key name '${oldName}'`);}if(!validateKeyName(newName)||newName==='self'){return _error(callback,`Invalid new key name '${newName}'`);}const oldDsname=DsName(oldName);const newDsname=DsName(newName);const oldInfoName=DsInfoName(oldName);const newInfoName=DsInfoName(newName);this.store.get(oldDsname,(err,res)=>{if(err){return _error(callback,`Key '${oldName}' does not exist. ${err.message}`);}const pem=res.toString();self.store.has(newDsname,(err,exists)=>{if(err)return _error(callback,err);if(exists)return _error(callback,`Key '${newName}' already exists`);self.store.get(oldInfoName,(err,res)=>{if(err)return _error(callback,err);const keyInfo=JSON.parse(res.toString());keyInfo.name=newName;const batch=self.store.batch();batch.put(newDsname,pem);batch.put(newInfoName,JSON.stringify(keyInfo));batch.delete(oldDsname);batch.delete(oldInfoName);batch.commit(err=>{if(err)return _error(callback,err);callback(null,keyInfo);});});});});}exportKey(name,password,callback){if(!validateKeyName(name)){return _error(callback,`Invalid key name '${name}'`);}if(!password){return _error(callback,'Password is required');}const dsname=DsName(name);this.store.get(dsname,(err,res)=>{if(err){return _error(callback,`Key '${name}' does not exist. ${err.message}`);}const pem=res.toString();crypto.keys.import(pem,this._(),(err,privateKey)=>{if(err)return _error(callback,err);privateKey.export(password,callback);});});}importKey(name,pem,password,callback){const self=this;if(!validateKeyName(name)||name==='self'){return _error(callback,`Invalid key name '${name}'`);}if(!pem){return _error(callback,'PEM encoded key is required');}const dsname=DsName(name);self.store.has(dsname,(err,exists)=>{if(err)return _error(callback,err);if(exists)return _error(callback,`Key '${name}' already exists`);crypto.keys.import(pem,password,(err,privateKey)=>{if(err)return _error(callback,'Cannot read the key, most likely the password is wrong');privateKey.id((err,kid)=>{if(err)return _error(callback,err);privateKey.export(this._(),(err,pem)=>{if(err)return _error(callback,err);const keyInfo={name:name,id:kid};const batch=self.store.batch();batch.put(dsname,pem);batch.put(DsInfoName(name),JSON.stringify(keyInfo));batch.commit(err=>{if(err)return _error(callback,err);callback(null,keyInfo);});});});});});}importPeer(name,peer,callback){const self=this;if(!validateKeyName(name)){return _error(callback,`Invalid key name '${name}'`);}if(!peer||!peer.privKey){return _error(callback,'Peer.privKey is required');}const privateKey=peer.privKey;const dsname=DsName(name);self.store.has(dsname,(err,exists)=>{if(err)return _error(callback,err);if(exists)return _error(callback,`Key '${name}' already exists`);privateKey.id((err,kid)=>{if(err)return _error(callback,err);privateKey.export(this._(),(err,pem)=>{if(err)return _error(callback,err);const keyInfo={name:name,id:kid};const batch=self.store.batch();batch.put(dsname,pem);batch.put(DsInfoName(name),JSON.stringify(keyInfo));batch.commit(err=>{if(err)return _error(callback,err);callback(null,keyInfo);});});});});}_getPrivateKey(name,callback){if(!validateKeyName(name)){return _error(callback,`Invalid key name '${name}'`);}this.store.get(DsName(name),(err,res)=>{if(err){return _error(callback,`Key '${name}' does not exist. ${err.message}`);}callback(null,res.toString());});}}module.exports=Keychain;},5383:function(module){"use strict";module.exports=node=>{return{put:(key,value,callback)=>{if(!node._dht){return callback(new Error('DHT is not available'));}node._dht.put(key,value,callback);},get:(key,options,callback)=>{if(typeof options==='function'){callback=options;options={};}if(!node._dht){return callback(new Error('DHT is not available'));}node._dht.get(key,options,callback);},getMany:(key,nVals,options,callback)=>{if(typeof options==='function'){callback=options;options={};}if(!node._dht){return callback(new Error('DHT is not available'));}node._dht.getMany(key,nVals,options,callback);}};};},5396:function(__unusedmodule,exports){exports.utf8=exports['utf-8']={encode:function(data){return isBinary(data)?data:String(data);},decode:identity,buffer:false,type:'utf8'};exports.json={encode:JSON.stringify,decode:JSON.parse,buffer:false,type:'json'};exports.binary={encode:function(data){return isBinary(data)?data:Buffer.from(data);},decode:identity,buffer:true,type:'binary'};exports.none={encode:identity,decode:identity,buffer:false,type:'id'};exports.id=exports.none;var bufferEncodings=['hex','ascii','base64','ucs2','ucs-2','utf16le','utf-16le'];bufferEncodings.forEach(function(type){exports[type]={encode:function(data){return isBinary(data)?data:Buffer.from(data,type);},decode:function(buffer){return buffer.toString(type);},buffer:true,type:type};});function identity(value){return value;}function isBinary(data){return data===undefined||data===null||Buffer.isBuffer(data);}},5410:function(__unusedmodule,exports,__webpack_require__){var utf8=__webpack_require__(9007);var hasBinary=__webpack_require__(9096);var after=__webpack_require__(7012);var keys=__webpack_require__(6234);exports.protocol=3;var packets=exports.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6};var packetslist=keys(packets);var err={type:'error',data:'parser error'};exports.encodePacket=function(packet,supportsBinary,utf8encode,callback){if(typeof supportsBinary==='function'){callback=supportsBinary;supportsBinary=null;}if(typeof utf8encode==='function'){callback=utf8encode;utf8encode=null;}if(Buffer.isBuffer(packet.data)){return encodeBuffer(packet,supportsBinary,callback);}else if(packet.data&&(packet.data.buffer||packet.data)instanceof ArrayBuffer){return encodeBuffer({type:packet.type,data:arrayBufferToBuffer(packet.data)},supportsBinary,callback);}var encoded=packets[packet.type];if(undefined!==packet.data){encoded+=utf8encode?utf8.encode(String(packet.data),{strict:false}):String(packet.data);}return callback(''+encoded);};function encodeBuffer(packet,supportsBinary,callback){if(!supportsBinary){return exports.encodeBase64Packet(packet,callback);}var data=packet.data;var typeBuffer=new Buffer(1);typeBuffer[0]=packets[packet.type];return callback(Buffer.concat([typeBuffer,data]));}exports.encodeBase64Packet=function(packet,callback){var data=Buffer.isBuffer(packet.data)?packet.data:arrayBufferToBuffer(packet.data);var message='b'+packets[packet.type];message+=data.toString('base64');return callback(message);};exports.decodePacket=function(data,binaryType,utf8decode){if(data===undefined){return err;}var type;if(typeof data==='string'){type=data.charAt(0);if(type==='b'){return exports.decodeBase64Packet(data.substr(1),binaryType);}if(utf8decode){data=tryDecode(data);if(data===false){return err;}}if(Number(type)!=type||!packetslist[type]){return err;}if(data.length>1){return{type:packetslist[type],data:data.substring(1)};}else{return{type:packetslist[type]};}}if(binaryType==='arraybuffer'){var intArray=new Uint8Array(data);type=intArray[0];return{type:packetslist[type],data:intArray.buffer.slice(1)};}if(data instanceof ArrayBuffer){data=arrayBufferToBuffer(data);}type=data[0];return{type:packetslist[type],data:data.slice(1)};};function tryDecode(data){try{data=utf8.decode(data,{strict:false});}catch(e){return false;}return data;}exports.decodeBase64Packet=function(msg,binaryType){var type=packetslist[msg.charAt(0)];var data=new Buffer(msg.substr(1),'base64');if(binaryType==='arraybuffer'){var abv=new Uint8Array(data.length);for(var i=0;i<abv.length;i++){abv[i]=data[i];}data=abv.buffer;}return{type:type,data:data};};exports.encodePayload=function(packets,supportsBinary,callback){if(typeof supportsBinary==='function'){callback=supportsBinary;supportsBinary=null;}if(supportsBinary&&hasBinary(packets)){return exports.encodePayloadAsBinary(packets,callback);}if(!packets.length){return callback('0:');}function encodeOne(packet,doneCallback){exports.encodePacket(packet,supportsBinary,false,function(message){doneCallback(null,setLengthHeader(message));});}map(packets,encodeOne,function(err,results){return callback(results.join(''));});};function setLengthHeader(message){return message.length+':'+message;}function map(ary,each,done){var result=new Array(ary.length);var next=after(ary.length,done);for(var i=0;i<ary.length;i++){each(ary[i],function(error,msg){result[i]=msg;next(error,result);});}}exports.decodePayload=function(data,binaryType,callback){if(typeof data!=='string'){return exports.decodePayloadAsBinary(data,binaryType,callback);}if(typeof binaryType==='function'){callback=binaryType;binaryType=null;}if(data===''){return callback(err,0,1);}var length='',n,msg,packet;for(var i=0,l=data.length;i<l;i++){var chr=data.charAt(i);if(chr!==':'){length+=chr;continue;}if(length===''||length!=(n=Number(length))){return callback(err,0,1);}msg=data.substr(i+1,n);if(length!=msg.length){return callback(err,0,1);}if(msg.length){packet=exports.decodePacket(msg,binaryType,false);if(err.type===packet.type&&err.data===packet.data){return callback(err,0,1);}var more=callback(packet,i+n,l);if(false===more)return;}i+=n;length='';}if(length!==''){return callback(err,0,1);}};function bufferToString(buffer){var str='';for(var i=0,l=buffer.length;i<l;i++){str+=String.fromCharCode(buffer[i]);}return str;}function stringToBuffer(string){var buf=new Buffer(string.length);for(var i=0,l=string.length;i<l;i++){buf.writeUInt8(string.charCodeAt(i),i);}return buf;}function arrayBufferToBuffer(data){var array=new Uint8Array(data.buffer||data);var length=data.byteLength||data.length;var offset=data.byteOffset||0;var buffer=new Buffer(length);for(var i=0;i<length;i++){buffer[i]=array[offset+i];}return buffer;}exports.encodePayloadAsBinary=function(packets,callback){if(!packets.length){return callback(new Buffer(0));}map(packets,encodeOneBinaryPacket,function(err,results){return callback(Buffer.concat(results));});};function encodeOneBinaryPacket(p,doneCallback){function onBinaryPacketEncode(packet){var encodingLength=''+packet.length;var sizeBuffer;if(typeof packet==='string'){sizeBuffer=new Buffer(encodingLength.length+2);sizeBuffer[0]=0;for(var i=0;i<encodingLength.length;i++){sizeBuffer[i+1]=parseInt(encodingLength[i],10);}sizeBuffer[sizeBuffer.length-1]=255;return doneCallback(null,Buffer.concat([sizeBuffer,stringToBuffer(packet)]));}sizeBuffer=new Buffer(encodingLength.length+2);sizeBuffer[0]=1;for(var i=0;i<encodingLength.length;i++){sizeBuffer[i+1]=parseInt(encodingLength[i],10);}sizeBuffer[sizeBuffer.length-1]=255;doneCallback(null,Buffer.concat([sizeBuffer,packet]));}exports.encodePacket(p,true,true,onBinaryPacketEncode);}exports.decodePayloadAsBinary=function(data,binaryType,callback){if(typeof binaryType==='function'){callback=binaryType;binaryType=null;}var bufferTail=data;var buffers=[];var i;while(bufferTail.length>0){var strLen='';var isString=bufferTail[0]===0;for(i=1;;i++){if(bufferTail[i]===255)break;if(strLen.length>310){return callback(err,0,1);}strLen+=''+bufferTail[i];}bufferTail=bufferTail.slice(strLen.length+1);var msgLength=parseInt(strLen,10);var msg=bufferTail.slice(1,msgLength+1);if(isString)msg=bufferToString(msg);buffers.push(msg);bufferTail=bufferTail.slice(msgLength+1);}var total=buffers.length;for(i=0;i<total;i++){var buffer=buffers[i];callback(exports.decodePacket(buffer,binaryType,true),i,total);}};},5411:function(module,__unusedexports,__webpack_require__){var bs58check=__webpack_require__(6614);function decodeRaw(buffer,version){if(version!==undefined&&buffer[0]!==version)throw new Error('Invalid network version');if(buffer.length===33){return{version:buffer[0],privateKey:buffer.slice(1,33),compressed:false};}if(buffer.length!==34)throw new Error('Invalid WIF length');if(buffer[33]!==0x01)throw new Error('Invalid compression flag');return{version:buffer[0],privateKey:buffer.slice(1,33),compressed:true};}function encodeRaw(version,privateKey,compressed){var result=new Buffer(compressed?34:33);result.writeUInt8(version,0);privateKey.copy(result,1);if(compressed){result[33]=0x01;}return result;}function decode(string,version){return decodeRaw(bs58check.decode(string),version);}function encode(version,privateKey,compressed){if(typeof version==='number')return bs58check.encode(encodeRaw(version,privateKey,compressed));return bs58check.encode(encodeRaw(version.version,version.privateKey,version.compressed));}module.exports={decode:decode,decodeRaw:decodeRaw,encode:encode,encodeRaw:encodeRaw};},5416:function(module,__unusedexports,__webpack_require__){const bscript=__webpack_require__(5099);function check(script){const chunks=bscript.decompile(script);return chunks.length===2&&bscript.isCanonicalScriptSignature(chunks[0])&&bscript.isCanonicalPubKey(chunks[1]);}check.toJSON=function(){return'pubKeyHash input';};module.exports={check};},5421:function(module,__unusedexports,__webpack_require__){var inherits=__webpack_require__(92);var Readable=__webpack_require__(8544).Readable;var extend=__webpack_require__(7756);module.exports=ReadStream;inherits(ReadStream,Readable);function ReadStream(iterator,options){if(!(this instanceof ReadStream))return new ReadStream(iterator,options);options=options||{};Readable.call(this,extend(options,{objectMode:true}));this._iterator=iterator;this._destroyed=false;this._options=options;this.on('end',this._cleanup.bind(this));}ReadStream.prototype._read=function(){var self=this;var options=this._options;if(this._destroyed)return;this._iterator.next(function(err,key,value){if(self._destroyed)return;if(err)return self.emit('error',err);if(key===undefined&&value===undefined){self.push(null);}else if(options.keys!==false&&options.values===false){self.push(key);}else if(options.keys===false&&options.values!==false){self.push(value);}else{self.push({key:key,value:value});}});};ReadStream.prototype.destroy=ReadStream.prototype._cleanup=function(){var self=this;if(this._destroyed)return;this._destroyed=true;this._iterator.end(function(err){if(err)return self.emit('error',err);self.emit('close');});};},5422:function(module,__unusedexports,__webpack_require__){var forge=__webpack_require__(7938);__webpack_require__(1214);var piTable=[0xd9,0x78,0xf9,0xc4,0x19,0xdd,0xb5,0xed,0x28,0xe9,0xfd,0x79,0x4a,0xa0,0xd8,0x9d,0xc6,0x7e,0x37,0x83,0x2b,0x76,0x53,0x8e,0x62,0x4c,0x64,0x88,0x44,0x8b,0xfb,0xa2,0x17,0x9a,0x59,0xf5,0x87,0xb3,0x4f,0x13,0x61,0x45,0x6d,0x8d,0x09,0x81,0x7d,0x32,0xbd,0x8f,0x40,0xeb,0x86,0xb7,0x7b,0x0b,0xf0,0x95,0x21,0x22,0x5c,0x6b,0x4e,0x82,0x54,0xd6,0x65,0x93,0xce,0x60,0xb2,0x1c,0x73,0x56,0xc0,0x14,0xa7,0x8c,0xf1,0xdc,0x12,0x75,0xca,0x1f,0x3b,0xbe,0xe4,0xd1,0x42,0x3d,0xd4,0x30,0xa3,0x3c,0xb6,0x26,0x6f,0xbf,0x0e,0xda,0x46,0x69,0x07,0x57,0x27,0xf2,0x1d,0x9b,0xbc,0x94,0x43,0x03,0xf8,0x11,0xc7,0xf6,0x90,0xef,0x3e,0xe7,0x06,0xc3,0xd5,0x2f,0xc8,0x66,0x1e,0xd7,0x08,0xe8,0xea,0xde,0x80,0x52,0xee,0xf7,0x84,0xaa,0x72,0xac,0x35,0x4d,0x6a,0x2a,0x96,0x1a,0xd2,0x71,0x5a,0x15,0x49,0x74,0x4b,0x9f,0xd0,0x5e,0x04,0x18,0xa4,0xec,0xc2,0xe0,0x41,0x6e,0x0f,0x51,0xcb,0xcc,0x24,0x91,0xaf,0x50,0xa1,0xf4,0x70,0x39,0x99,0x7c,0x3a,0x85,0x23,0xb8,0xb4,0x7a,0xfc,0x02,0x36,0x5b,0x25,0x55,0x97,0x31,0x2d,0x5d,0xfa,0x98,0xe3,0x8a,0x92,0xae,0x05,0xdf,0x29,0x10,0x67,0x6c,0xba,0xc9,0xd3,0x00,0xe6,0xcf,0xe1,0x9e,0xa8,0x2c,0x63,0x16,0x01,0x3f,0x58,0xe2,0x89,0xa9,0x0d,0x38,0x34,0x1b,0xab,0x33,0xff,0xb0,0xbb,0x48,0x0c,0x5f,0xb9,0xb1,0xcd,0x2e,0xc5,0xf3,0xdb,0x47,0xe5,0xa5,0x9c,0x77,0x0a,0xa6,0x20,0x68,0xfe,0x7f,0xc1,0xad];var s=[1,2,3,5];var rol=function(word,bits){return word<<bits&0xffff|(word&0xffff)>>16-bits;};var ror=function(word,bits){return(word&0xffff)>>bits|word<<16-bits&0xffff;};module.exports=forge.rc2=forge.rc2||{};forge.rc2.expandKey=function(key,effKeyBits){if(typeof key==='string'){key=forge.util.createBuffer(key);}effKeyBits=effKeyBits||128;var L=key;var T=key.length();var T1=effKeyBits;var T8=Math.ceil(T1/8);var TM=0xff>>(T1&0x07);var i;for(i=T;i<128;i++){L.putByte(piTable[L.at(i-1)+L.at(i-T)&0xff]);}L.setAt(128-T8,piTable[L.at(128-T8)&TM]);for(i=127-T8;i>=0;i--){L.setAt(i,piTable[L.at(i+1)^L.at(i+T8)]);}return L;};var createCipher=function(key,bits,encrypt){var _finish=false,_input=null,_output=null,_iv=null;var mixRound,mashRound;var i,j,K=[];key=forge.rc2.expandKey(key,bits);for(i=0;i<64;i++){K.push(key.getInt16Le());}if(encrypt){mixRound=function(R){for(i=0;i<4;i++){R[i]+=K[j]+(R[(i+3)%4]&R[(i+2)%4])+(~R[(i+3)%4]&R[(i+1)%4]);R[i]=rol(R[i],s[i]);j++;}};mashRound=function(R){for(i=0;i<4;i++){R[i]+=K[R[(i+3)%4]&63];}};}else{mixRound=function(R){for(i=3;i>=0;i--){R[i]=ror(R[i],s[i]);R[i]-=K[j]+(R[(i+3)%4]&R[(i+2)%4])+(~R[(i+3)%4]&R[(i+1)%4]);j--;}};mashRound=function(R){for(i=3;i>=0;i--){R[i]-=K[R[(i+3)%4]&63];}};}var runPlan=function(plan){var R=[];for(i=0;i<4;i++){var val=_input.getInt16Le();if(_iv!==null){if(encrypt){val^=_iv.getInt16Le();}else{_iv.putInt16Le(val);}}R.push(val&0xffff);}j=encrypt?0:63;for(var ptr=0;ptr<plan.length;ptr++){for(var ctr=0;ctr<plan[ptr][0];ctr++){plan[ptr][1](R);}}for(i=0;i<4;i++){if(_iv!==null){if(encrypt){_iv.putInt16Le(R[i]);}else{R[i]^=_iv.getInt16Le();}}_output.putInt16Le(R[i]);}};var cipher=null;cipher={start:function(iv,output){if(iv){if(typeof iv==='string'){iv=forge.util.createBuffer(iv);}}_finish=false;_input=forge.util.createBuffer();_output=output||new forge.util.createBuffer();_iv=iv;cipher.output=_output;},update:function(input){if(!_finish){_input.putBuffer(input);}while(_input.length()>=8){runPlan([[5,mixRound],[1,mashRound],[6,mixRound],[1,mashRound],[5,mixRound]]);}},finish:function(pad){var rval=true;if(encrypt){if(pad){rval=pad(8,_input,!encrypt);}else{var padding=_input.length()===8?8:8-_input.length();_input.fillWithByte(padding,padding);}}if(rval){_finish=true;cipher.update();}if(!encrypt){rval=_input.length()===0;if(rval){if(pad){rval=pad(8,_output,!encrypt);}else{var len=_output.length();var count=_output.at(len-1);if(count>len){rval=false;}else{_output.truncate(count);}}}}return rval;}};return cipher;};forge.rc2.startEncrypting=function(key,iv,output){var cipher=forge.rc2.createEncryptionCipher(key,128);cipher.start(iv,output);return cipher;};forge.rc2.createEncryptionCipher=function(key,bits){return createCipher(key,bits,true);};forge.rc2.startDecrypting=function(key,iv,output){var cipher=forge.rc2.createDecryptionCipher(key,128);cipher.start(iv,output);return cipher;};forge.rc2.createDecryptionCipher=function(key,bits){return createCipher(key,bits,false);};},5424:function(module,__unusedexports,__webpack_require__){const BN=__webpack_require__(5584);const EC=__webpack_require__(3459).ec;const secp256k1=new EC('secp256k1');const deterministicGenerateK=__webpack_require__(1289);const ZERO32=Buffer.alloc(32,0);const EC_GROUP_ORDER=Buffer.from('fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141','hex');const EC_P=Buffer.from('fffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f','hex');const n=secp256k1.curve.n;const nDiv2=n.shrn(1);const G=secp256k1.curve.g;const THROW_BAD_PRIVATE='Expected Private';const THROW_BAD_POINT='Expected Point';const THROW_BAD_TWEAK='Expected Tweak';const THROW_BAD_HASH='Expected Hash';const THROW_BAD_SIGNATURE='Expected Signature';function isScalar(x){return Buffer.isBuffer(x)&&x.length===32;}function isOrderScalar(x){if(!isScalar(x))return false;return x.compare(EC_GROUP_ORDER)<0;}function isPoint(p){if(!Buffer.isBuffer(p))return false;if(p.length<33)return false;const t=p[0];const x=p.slice(1,33);if(x.compare(ZERO32)===0)return false;if(x.compare(EC_P)>=0)return false;if((t===0x02||t===0x03)&&p.length===33)return true;const y=p.slice(33);if(y.compare(ZERO32)===0)return false;if(y.compare(EC_P)>=0)return false;if(t===0x04&&p.length===65)return true;return false;}function __isPointCompressed(p){return p[0]!==0x04;}function isPointCompressed(p){if(!isPoint(p))return false;return __isPointCompressed(p);}function isPrivate(x){if(!isScalar(x))return false;return x.compare(ZERO32)>0&&x.compare(EC_GROUP_ORDER)<0;}function isSignature(value){const r=value.slice(0,32);const s=value.slice(32,64);return Buffer.isBuffer(value)&&value.length===64&&r.compare(EC_GROUP_ORDER)<0&&s.compare(EC_GROUP_ORDER)<0;}function assumeCompression(value,pubkey){if(value===undefined&&pubkey!==undefined)return __isPointCompressed(pubkey);if(value===undefined)return true;return value;}function fromBuffer(d){return new BN(d);}function toBuffer(d){return d.toArrayLike(Buffer,'be',32);}function decodeFrom(P){return secp256k1.curve.decodePoint(P);}function getEncoded(P,compressed){return Buffer.from(P._encode(compressed));}function pointAdd(pA,pB,__compressed){if(!isPoint(pA))throw new TypeError(THROW_BAD_POINT);if(!isPoint(pB))throw new TypeError(THROW_BAD_POINT);const a=decodeFrom(pA);const b=decodeFrom(pB);const pp=a.add(b);if(pp.isInfinity())return null;const compressed=assumeCompression(__compressed,pA);return getEncoded(pp,compressed);}function pointAddScalar(p,tweak,__compressed){if(!isPoint(p))throw new TypeError(THROW_BAD_POINT);if(!isOrderScalar(tweak))throw new TypeError(THROW_BAD_TWEAK);const compressed=assumeCompression(__compressed,p);const pp=decodeFrom(p);if(tweak.compare(ZERO32)===0)return getEncoded(pp,compressed);const tt=fromBuffer(tweak);const qq=G.mul(tt);const uu=pp.add(qq);if(uu.isInfinity())return null;return getEncoded(uu,compressed);}function pointCompress(p,compressed){if(!isPoint(p))throw new TypeError(THROW_BAD_POINT);const pp=decodeFrom(p);if(pp.isInfinity())throw new TypeError(THROW_BAD_POINT);return getEncoded(pp,compressed);}function pointFromScalar(d,__compressed){if(!isPrivate(d))throw new TypeError(THROW_BAD_PRIVATE);const dd=fromBuffer(d);const pp=G.mul(dd);if(pp.isInfinity())return null;const compressed=assumeCompression(__compressed);return getEncoded(pp,compressed);}function pointMultiply(p,tweak,__compressed){if(!isPoint(p))throw new TypeError(THROW_BAD_POINT);if(!isOrderScalar(tweak))throw new TypeError(THROW_BAD_TWEAK);const compressed=assumeCompression(__compressed,p);const pp=decodeFrom(p);const tt=fromBuffer(tweak);const qq=pp.mul(tt);if(qq.isInfinity())return null;return getEncoded(qq,compressed);}function privateAdd(d,tweak){if(!isPrivate(d))throw new TypeError(THROW_BAD_PRIVATE);if(!isOrderScalar(tweak))throw new TypeError(THROW_BAD_TWEAK);const dd=fromBuffer(d);const tt=fromBuffer(tweak);const dt=toBuffer(dd.add(tt).umod(n));if(!isPrivate(dt))return null;return dt;}function privateSub(d,tweak){if(!isPrivate(d))throw new TypeError(THROW_BAD_PRIVATE);if(!isOrderScalar(tweak))throw new TypeError(THROW_BAD_TWEAK);const dd=fromBuffer(d);const tt=fromBuffer(tweak);const dt=toBuffer(dd.sub(tt).umod(n));if(!isPrivate(dt))return null;return dt;}function sign(hash,x){if(!isScalar(hash))throw new TypeError(THROW_BAD_HASH);if(!isPrivate(x))throw new TypeError(THROW_BAD_PRIVATE);const d=fromBuffer(x);const e=fromBuffer(hash);let r,s;deterministicGenerateK(hash,x,function(k){const kI=fromBuffer(k);const Q=G.mul(kI);if(Q.isInfinity())return false;r=Q.x.umod(n);if(r.isZero()===0)return false;s=kI.invm(n).mul(e.add(d.mul(r))).umod(n);if(s.isZero()===0)return false;return true;},isPrivate);if(s.cmp(nDiv2)>0){s=n.sub(s);}const buffer=Buffer.allocUnsafe(64);toBuffer(r).copy(buffer,0);toBuffer(s).copy(buffer,32);return buffer;}function verify(hash,q,signature){if(!isScalar(hash))throw new TypeError(THROW_BAD_HASH);if(!isPoint(q))throw new TypeError(THROW_BAD_POINT);if(!isSignature(signature))throw new TypeError(THROW_BAD_SIGNATURE);const Q=decodeFrom(q);const r=fromBuffer(signature.slice(0,32));const s=fromBuffer(signature.slice(32,64));if(r.gtn(0)<=0)return false;if(s.gtn(0)<=0)return false;const e=fromBuffer(hash);const sInv=s.invm(n);const u1=e.mul(sInv).umod(n);const u2=r.mul(sInv).umod(n);const R=G.mulAdd(u1,Q,u2);if(R.isInfinity())return false;const xR=R.x;const v=xR.umod(n);return v.eq(r);}module.exports={isPoint,isPointCompressed,isPrivate,pointAdd,pointAddScalar,pointCompress,pointFromScalar,pointMultiply,privateAdd,privateSub,sign,verify};},5427:function(module,__unusedexports,__webpack_require__){"use strict";var pna=__webpack_require__(88);var objectKeys=Object.keys||function(obj){var keys=[];for(var key in obj){keys.push(key);}return keys;};module.exports=Duplex;var util=__webpack_require__(5548);util.inherits=__webpack_require__(92);var Readable=__webpack_require__(2315);var Writable=__webpack_require__(201);util.inherits(Duplex,Readable);{var keys=objectKeys(Writable.prototype);for(var v=0;v<keys.length;v++){var method=keys[v];if(!Duplex.prototype[method])Duplex.prototype[method]=Writable.prototype[method];}}function Duplex(options){if(!(this instanceof Duplex))return new Duplex(options);Readable.call(this,options);Writable.call(this,options);if(options&&options.readable===false)this.readable=false;if(options&&options.writable===false)this.writable=false;this.allowHalfOpen=true;if(options&&options.allowHalfOpen===false)this.allowHalfOpen=false;this.once('end',onend);}Object.defineProperty(Duplex.prototype,'writableHighWaterMark',{enumerable:false,get:function(){return this._writableState.highWaterMark;}});function onend(){if(this.allowHalfOpen||this._writableState.ended)return;pna.nextTick(onEndNT,this);}function onEndNT(self){self.end();}Object.defineProperty(Duplex.prototype,'destroyed',{get:function(){if(this._readableState===undefined||this._writableState===undefined){return false;}return this._readableState.destroyed&&this._writableState.destroyed;},set:function(value){if(this._readableState===undefined||this._writableState===undefined){return;}this._readableState.destroyed=value;this._writableState.destroyed=value;}});Duplex.prototype._destroy=function(err,cb){this.push(null);this.end();pna.nextTick(cb,err);};},5430:function(module,__unusedexports,__webpack_require__){"use strict";var elliptic=__webpack_require__(3459);var utils=elliptic.utils;var assert=utils.assert;var parseBytes=utils.parseBytes;var cachedProperty=utils.cachedProperty;function KeyPair(eddsa,params){this.eddsa=eddsa;this._secret=parseBytes(params.secret);if(eddsa.isPoint(params.pub))this._pub=params.pub;else this._pubBytes=parseBytes(params.pub);}KeyPair.fromPublic=function fromPublic(eddsa,pub){if(pub instanceof KeyPair)return pub;return new KeyPair(eddsa,{pub:pub});};KeyPair.fromSecret=function fromSecret(eddsa,secret){if(secret instanceof KeyPair)return secret;return new KeyPair(eddsa,{secret:secret});};KeyPair.prototype.secret=function secret(){return this._secret;};cachedProperty(KeyPair,'pubBytes',function pubBytes(){return this.eddsa.encodePoint(this.pub());});cachedProperty(KeyPair,'pub',function pub(){if(this._pubBytes)return this.eddsa.decodePoint(this._pubBytes);return this.eddsa.g.mul(this.priv());});cachedProperty(KeyPair,'privBytes',function privBytes(){var eddsa=this.eddsa;var hash=this.hash();var lastIx=eddsa.encodingLength-1;var a=hash.slice(0,eddsa.encodingLength);a[0]&=248;a[lastIx]&=127;a[lastIx]|=64;return a;});cachedProperty(KeyPair,'priv',function priv(){return this.eddsa.decodeInt(this.privBytes());});cachedProperty(KeyPair,'hash',function hash(){return this.eddsa.hash().update(this.secret()).digest();});cachedProperty(KeyPair,'messagePrefix',function messagePrefix(){return this.hash().slice(this.eddsa.encodingLength);});KeyPair.prototype.sign=function sign(message){assert(this._secret,'KeyPair can only verify');return this.eddsa.sign(message,this);};KeyPair.prototype.verify=function verify(message,sig){return this.eddsa.verify(message,sig,this);};KeyPair.prototype.getSecret=function getSecret(enc){assert(this._secret,'KeyPair is public only');return utils.encode(this.secret(),enc);};KeyPair.prototype.getPublic=function getPublic(enc){return utils.encode(this.pubBytes(),enc);};module.exports=KeyPair;},5437:function(module,__unusedexports,__webpack_require__){"use strict";var WS=module.exports=__webpack_require__(6306);WS.Server=__webpack_require__(1360);WS.Sender=__webpack_require__(7534);WS.Receiver=__webpack_require__(2825);WS.createServer=function createServer(options,fn){var server=new WS.Server(options);if(typeof fn==='function'){server.on('connection',fn);}return server;};WS.connect=WS.createConnection=function connect(address,fn){var client=new WS(address);if(typeof fn==='function'){client.on('open',fn);}return client;};},5459:function(module,__unusedexports,__webpack_require__){const lazy=__webpack_require__(8643);const typef=__webpack_require__(2809);const OPS=__webpack_require__(9710);const bscript=__webpack_require__(5099);const BITCOIN_NETWORK=__webpack_require__(1215).bitcoin;function stacksEqual(a,b){if(a.length!==b.length)return false;return a.every(function(x,i){return x.equals(b[i]);});}function p2data(a,opts){if(!a.data&&!a.output)throw new TypeError('Not enough data');opts=Object.assign({validate:true},opts||{});typef({network:typef.maybe(typef.Object),output:typef.maybe(typef.Buffer),data:typef.maybe(typef.arrayOf(typef.Buffer))},a);const network=a.network||BITCOIN_NETWORK;const o={network};lazy.prop(o,'output',function(){if(!a.data)return;return bscript.compile([OPS.OP_RETURN].concat(a.data));});lazy.prop(o,'data',function(){if(!a.output)return;return bscript.decompile(a.output).slice(1);});if(opts.validate){if(a.output){const chunks=bscript.decompile(a.output);if(chunks[0]!==OPS.OP_RETURN)throw new TypeError('Output is invalid');if(!chunks.slice(1).every(typef.Buffer))throw new TypeError('Output is invalid');if(a.data&&!stacksEqual(a.data,o.data))throw new TypeError('Data mismatch');}}return Object.assign(o,a);}module.exports=p2data;},5475:function(module,__unusedexports,__webpack_require__){const createHash=__webpack_require__(980);function ripemd160(buffer){return createHash('rmd160').update(buffer).digest();}function sha1(buffer){return createHash('sha1').update(buffer).digest();}function sha256(buffer){return createHash('sha256').update(buffer).digest();}function hash160(buffer){return ripemd160(sha256(buffer));}function hash256(buffer){return sha256(sha256(buffer));}module.exports={hash160:hash160,hash256:hash256,ripemd160:ripemd160,sha1:sha1,sha256:sha256};},5490:function(__unusedmodule,exports,__webpack_require__){"use strict";const base=exports;base.Reporter=__webpack_require__(3857).Reporter;base.DecoderBuffer=__webpack_require__(5074).DecoderBuffer;base.EncoderBuffer=__webpack_require__(5074).EncoderBuffer;base.Node=__webpack_require__(2138);},5491:function(module){module.exports=function(cmp,to){var c=0;for(var i=0;i<cmp.length;++i){if(i==to.length)break;c=cmp[i]<to[i]?-1:cmp[i]>to[i]?1:0;if(c!=0)break;}if(c==0){if(to.length>cmp.length)c=-1;else if(cmp.length>to.length)c=1;}return c;};},5502:function(module,__unusedexports,__webpack_require__){"use strict";const CID=__webpack_require__(9339);const UnixFs=__webpack_require__(7959);const{DAGNode}=__webpack_require__(7421);const log=__webpack_require__(746)('ipfs:mfs:utils:with-mfs-root');const waterfall=__webpack_require__(4265);const{MFS_ROOT_KEY}=__webpack_require__(7514);const withMfsRoot=(context,callback)=>{waterfall([cb=>context.repo.datastore.open(error=>cb(error)),cb=>{context.repo.datastore.get(MFS_ROOT_KEY,(error,result)=>{if(error&&(error.notFound||error.code==='ERR_NOT_FOUND')){log('Creating new MFS root');return waterfall([next=>DAGNode.create(new UnixFs('directory').marshal(),next),(node,next)=>context.ipld.put(node,{version:0,hashAlg:'sha2-256',format:'dag-pb'},next),(cid,next)=>context.repo.datastore.put(MFS_ROOT_KEY,cid.buffer,error=>next(error,cid))],cb);}cb(error,result?new CID(result):null);});},(cid,cb)=>{log(`Fetched MFS root ${cid.toBaseEncodedString()}`);cb(null,cid);}],callback);};module.exports=withMfsRoot;},5504:function(module){"use strict";module.exports=function extractDataFromBlock(block,blockStart,requestedStart,requestedEnd){const blockLength=block.length;const blockEnd=blockStart+blockLength;if(requestedStart>=blockEnd||requestedEnd<blockStart){return Buffer.alloc(0);}if(requestedEnd>=blockStart&&requestedEnd<blockEnd){block=block.slice(0,requestedEnd-blockStart);}if(requestedStart>=blockStart&&requestedStart<blockEnd){block=block.slice(requestedStart-blockStart);}return block;};},5506:function(module,__unusedexports,__webpack_require__){const Common=__webpack_require__(2559).default;const utils=__webpack_require__(4784);const BN=utils.BN;var BlockHeader=module.exports=function(data,opts){opts=opts||{};if(opts.common){if(opts.chain){throw new Error('Instantiation with both opts.common and opts.chain parameter not allowed!');}this._common=opts.common;}else{let chain=opts.chain?opts.chain:'mainnet';let hardfork=opts.hardfork?opts.hardfork:null;this._common=new Common(chain,hardfork);}var fields=[{name:'parentHash',length:32,default:utils.zeros(32)},{name:'uncleHash',default:utils.SHA3_RLP_ARRAY},{name:'coinbase',length:20,default:utils.zeros(20)},{name:'stateRoot',length:32,default:utils.zeros(32)},{name:'transactionsTrie',length:32,default:utils.SHA3_RLP},{name:'receiptTrie',length:32,default:utils.SHA3_RLP},{name:'bloom',default:utils.zeros(256)},{name:'difficulty',default:Buffer.from([])},{name:'number',default:utils.intToBuffer(1150000)},{name:'gasLimit',default:Buffer.from('ffffffffffffff','hex')},{name:'gasUsed',empty:true,default:Buffer.from([])},{name:'timestamp',default:Buffer.from([])},{name:'extraData',allowZero:true,empty:true,default:Buffer.from([])},{name:'mixHash',default:utils.zeros(32)},{name:'nonce',default:utils.zeros(8)}];utils.defineProperties(this,fields,data);};BlockHeader.prototype.canonicalDifficulty=function(parentBlock){const hardfork=this._common.hardfork()||this._common.activeHardfork(utils.bufferToInt(this.number));const blockTs=new BN(this.timestamp);const parentTs=new BN(parentBlock.header.timestamp);const parentDif=new BN(parentBlock.header.difficulty);const minimumDifficulty=new BN(this._common.param('pow','minimumDifficulty',hardfork));var offset=parentDif.div(new BN(this._common.param('pow','difficultyBoundDivisor',hardfork)));var num=new BN(this.number);var a;var cutoff;var dif;if(this._common.hardforkGteHardfork(hardfork,'byzantium')){var uncleAddend=parentBlock.header.uncleHash.equals(utils.SHA3_RLP_ARRAY)?1:2;a=blockTs.sub(parentTs).idivn(9).ineg().iaddn(uncleAddend);cutoff=new BN(-99);if(cutoff.cmp(a)===1){a=cutoff;}dif=parentDif.add(offset.mul(a));}if(this._common.hardforkGteHardfork(hardfork,'constantinople')){num.isubn(5000000);if(num.ltn(0)){num=new BN(0);}}else if(this._common.hardforkGteHardfork(hardfork,'byzantium')){num.isubn(3000000);if(num.ltn(0)){num=new BN(0);}}else if(this._common.hardforkGteHardfork(hardfork,'homestead')){a=blockTs.sub(parentTs).idivn(10).ineg().iaddn(1);cutoff=new BN(-99);if(cutoff.cmp(a)===1){a=cutoff;}dif=parentDif.add(offset.mul(a));}else{if(parentTs.addn(this._common.param('pow','durationLimit',hardfork)).cmp(blockTs)===1){dif=offset.add(parentDif);}else{dif=parentDif.sub(offset);}}var exp=num.idivn(100000).isubn(2);if(!exp.isNeg()){dif.iadd(new BN(2).pow(exp));}if(dif.cmp(minimumDifficulty)===-1){dif=minimumDifficulty;}return dif;};BlockHeader.prototype.validateDifficulty=function(parentBlock){const dif=this.canonicalDifficulty(parentBlock);return dif.cmp(new BN(this.difficulty))===0;};BlockHeader.prototype.validateGasLimit=function(parentBlock){const pGasLimit=new BN(parentBlock.header.gasLimit);const gasLimit=new BN(this.gasLimit);const hardfork=this._common.hardfork()?this._common.hardfork():this._common.activeHardfork(this.number);const a=pGasLimit.div(new BN(this._common.param('gasConfig','gasLimitBoundDivisor',hardfork)));const maxGasLimit=pGasLimit.add(a);const minGasLimit=pGasLimit.sub(a);return gasLimit.lt(maxGasLimit)&&gasLimit.gt(minGasLimit)&&gasLimit.gte(this._common.param('gasConfig','minGasLimit',hardfork));};BlockHeader.prototype.validate=function(blockchain,height,cb){var self=this;if(arguments.length===2){cb=height;height=false;}if(this.isGenesis()){return cb();}blockchain.getBlock(self.parentHash,function(err,parentBlock){if(err){return cb('could not find parent block');}self.parentBlock=parentBlock;var number=new BN(self.number);if(number.cmp(new BN(parentBlock.header.number).iaddn(1))!==0){return cb('invalid number');}if(height){var dif=height.sub(new BN(parentBlock.header.number));if(!(dif.cmpn(8)===-1&&dif.cmpn(1)===1)){return cb('uncle block has a parent that is too old or to young');}}if(!self.validateDifficulty(parentBlock)){return cb('invalid Difficulty');}if(!self.validateGasLimit(parentBlock)){return cb('invalid gas limit');}if(utils.bufferToInt(parentBlock.header.number)+1!==utils.bufferToInt(self.number)){return cb('invalid heigth');}if(utils.bufferToInt(self.timestamp)<=utils.bufferToInt(parentBlock.header.timestamp)){return cb('invalid timestamp');}const hardfork=self._common.hardfork()?self._common.hardfork():self._common.activeHardfork(height);if(self.extraData.length>self._common.param('vm','maxExtraDataSize',hardfork)){return cb('invalid amount of extra data');}cb();});};BlockHeader.prototype.hash=function(){return utils.rlphash(this.raw);};BlockHeader.prototype.isGenesis=function(){return this.number.toString('hex')==='';};BlockHeader.prototype.setGenesisParams=function(){this.timestamp=this._common.genesis().timestamp;this.gasLimit=this._common.genesis().gasLimit;this.difficulty=this._common.genesis().difficulty;this.extraData=this._common.genesis().extraData;this.nonce=this._common.genesis().nonce;this.stateRoot=this._common.genesis().stateRoot;this.number=Buffer.from([]);};},5507:function(module,__unusedexports,__webpack_require__){"use strict";var values=__webpack_require__(5130);module.exports=function(object){return values(Object.keys(object));};},5513:function(module,__unusedexports,__webpack_require__){"use strict";module.exports={drain:__webpack_require__(2147),onEnd:__webpack_require__(4978),log:__webpack_require__(3092),find:__webpack_require__(2642),reduce:__webpack_require__(4598),collect:__webpack_require__(8342),concat:__webpack_require__(6567)};},5514:function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(2805);exports.log=log;exports.formatArgs=formatArgs;exports.save=save;exports.load=load;exports.useColors=useColors;exports.storage='undefined'!=typeof chrome&&'undefined'!=typeof chrome.storage?chrome.storage.local:localstorage();exports.colors=['#0000CC','#0000FF','#0033CC','#0033FF','#0066CC','#0066FF','#0099CC','#0099FF','#00CC00','#00CC33','#00CC66','#00CC99','#00CCCC','#00CCFF','#3300CC','#3300FF','#3333CC','#3333FF','#3366CC','#3366FF','#3399CC','#3399FF','#33CC00','#33CC33','#33CC66','#33CC99','#33CCCC','#33CCFF','#6600CC','#6600FF','#6633CC','#6633FF','#66CC00','#66CC33','#9900CC','#9900FF','#9933CC','#9933FF','#99CC00','#99CC33','#CC0000','#CC0033','#CC0066','#CC0099','#CC00CC','#CC00FF','#CC3300','#CC3333','#CC3366','#CC3399','#CC33CC','#CC33FF','#CC6600','#CC6633','#CC9900','#CC9933','#CCCC00','#CCCC33','#FF0000','#FF0033','#FF0066','#FF0099','#FF00CC','#FF00FF','#FF3300','#FF3333','#FF3366','#FF3399','#FF33CC','#FF33FF','#FF6600','#FF6633','#FF9900','#FF9933','#FFCC00','#FFCC33'];function useColors(){if(typeof window!=='undefined'&&window.process&&window.process.type==='renderer'){return true;}if(typeof navigator!=='undefined'&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)){return false;}return typeof document!=='undefined'&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!=='undefined'&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!=='undefined'&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!=='undefined'&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/);}exports.formatters.j=function(v){try{return JSON.stringify(v);}catch(err){return'[UnexpectedJSONParseError]: '+err.message;}};function formatArgs(args){var useColors=this.useColors;args[0]=(useColors?'%c':'')+this.namespace+(useColors?' %c':' ')+args[0]+(useColors?'%c ':' ')+'+'+exports.humanize(this.diff);if(!useColors)return;var c='color: '+this.color;args.splice(1,0,c,'color: inherit');var index=0;var lastC=0;args[0].replace(/%[a-zA-Z%]/g,function(match){if('%%'===match)return;index++;if('%c'===match){lastC=index;}});args.splice(lastC,0,c);}function log(){return'object'===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments);}function save(namespaces){try{if(null==namespaces){exports.storage.removeItem('debug');}else{exports.storage.debug=namespaces;}}catch(e){}}function load(){var r;try{r=exports.storage.debug;}catch(e){}if(!r&&typeof process!=='undefined'&&'env'in process){r=process.env.DEBUG;}return r;}exports.enable(load());function localstorage(){try{return window.localStorage;}catch(e){}}},5519:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=tryEach;var _noop=__webpack_require__(5811);var _noop2=_interopRequireDefault(_noop);var _eachSeries=__webpack_require__(9891);var _eachSeries2=_interopRequireDefault(_eachSeries);var _wrapAsync=__webpack_require__(9396);var _wrapAsync2=_interopRequireDefault(_wrapAsync);var _slice=__webpack_require__(3404);var _slice2=_interopRequireDefault(_slice);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function tryEach(tasks,callback){var error=null;var result;callback=callback||_noop2.default;(0,_eachSeries2.default)(tasks,function(task,callback){(0,_wrapAsync2.default)(task)(function(err,res){if(arguments.length>2){result=(0,_slice2.default)(arguments,1);}else{result=res;}error=err;callback(!err);});},function(){callback(error,result);});}module.exports=exports['default'];},5524:function(module,__unusedexports,__webpack_require__){"use strict";var createKeccak=__webpack_require__(61);var createShake=__webpack_require__(8316);module.exports=function(KeccakState){var Keccak=createKeccak(KeccakState);var Shake=createShake(KeccakState);return function(algorithm,options){var hash=typeof algorithm==='string'?algorithm.toLowerCase():algorithm;switch(hash){case'keccak224':return new Keccak(1152,448,null,224,options);case'keccak256':return new Keccak(1088,512,null,256,options);case'keccak384':return new Keccak(832,768,null,384,options);case'keccak512':return new Keccak(576,1024,null,512,options);case'sha3-224':return new Keccak(1152,448,0x06,224,options);case'sha3-256':return new Keccak(1088,512,0x06,256,options);case'sha3-384':return new Keccak(832,768,0x06,384,options);case'sha3-512':return new Keccak(576,1024,0x06,512,options);case'shake128':return new Shake(1344,256,0x1f,options);case'shake256':return new Shake(1088,512,0x1f,options);default:throw new Error('Invald algorithm: '+algorithm);}};};},5526:function(module){module.exports=function decodeAsm(stdlib,foreign,buffer){'use asm';var heap=new stdlib.Uint8Array(buffer);var pushInt=foreign.pushInt;var pushInt32=foreign.pushInt32;var pushInt32Neg=foreign.pushInt32Neg;var pushInt64=foreign.pushInt64;var pushInt64Neg=foreign.pushInt64Neg;var pushFloat=foreign.pushFloat;var pushFloatSingle=foreign.pushFloatSingle;var pushFloatDouble=foreign.pushFloatDouble;var pushTrue=foreign.pushTrue;var pushFalse=foreign.pushFalse;var pushUndefined=foreign.pushUndefined;var pushNull=foreign.pushNull;var pushInfinity=foreign.pushInfinity;var pushInfinityNeg=foreign.pushInfinityNeg;var pushNaN=foreign.pushNaN;var pushNaNNeg=foreign.pushNaNNeg;var pushArrayStart=foreign.pushArrayStart;var pushArrayStartFixed=foreign.pushArrayStartFixed;var pushArrayStartFixed32=foreign.pushArrayStartFixed32;var pushArrayStartFixed64=foreign.pushArrayStartFixed64;var pushObjectStart=foreign.pushObjectStart;var pushObjectStartFixed=foreign.pushObjectStartFixed;var pushObjectStartFixed32=foreign.pushObjectStartFixed32;var pushObjectStartFixed64=foreign.pushObjectStartFixed64;var pushByteString=foreign.pushByteString;var pushByteStringStart=foreign.pushByteStringStart;var pushUtf8String=foreign.pushUtf8String;var pushUtf8StringStart=foreign.pushUtf8StringStart;var pushSimpleUnassigned=foreign.pushSimpleUnassigned;var pushTagStart=foreign.pushTagStart;var pushTagStart4=foreign.pushTagStart4;var pushTagStart8=foreign.pushTagStart8;var pushTagUnassigned=foreign.pushTagUnassigned;var pushBreak=foreign.pushBreak;var pow=stdlib.Math.pow;var offset=0;var inputLength=0;var code=0;function parse(input){input=input|0;offset=0;inputLength=input;while((offset|0)<(inputLength|0)){code=jumpTable[heap[offset]&255](heap[offset]|0)|0;if((code|0)>0){break;}}return code|0;}function checkOffset(n){n=n|0;if(((offset|0)+(n|0)|0)<(inputLength|0)){return 0;}return 1;}function readUInt16(n){n=n|0;return heap[n|0]<<8|heap[n+1|0]|0;}function readUInt32(n){n=n|0;return heap[n|0]<<24|heap[n+1|0]<<16|heap[n+2|0]<<8|heap[n+3|0]|0;}function INT_P(octet){octet=octet|0;pushInt(octet|0);offset=offset+1|0;return 0;}function UINT_P_8(octet){octet=octet|0;if(checkOffset(1)|0){return 1;}pushInt(heap[offset+1|0]|0);offset=offset+2|0;return 0;}function UINT_P_16(octet){octet=octet|0;if(checkOffset(2)|0){return 1;}pushInt(readUInt16(offset+1|0)|0);offset=offset+3|0;return 0;}function UINT_P_32(octet){octet=octet|0;if(checkOffset(4)|0){return 1;}pushInt32(readUInt16(offset+1|0)|0,readUInt16(offset+3|0)|0);offset=offset+5|0;return 0;}function UINT_P_64(octet){octet=octet|0;if(checkOffset(8)|0){return 1;}pushInt64(readUInt16(offset+1|0)|0,readUInt16(offset+3|0)|0,readUInt16(offset+5|0)|0,readUInt16(offset+7|0)|0);offset=offset+9|0;return 0;}function INT_N(octet){octet=octet|0;pushInt(-1-(octet-32|0)|0);offset=offset+1|0;return 0;}function UINT_N_8(octet){octet=octet|0;if(checkOffset(1)|0){return 1;}pushInt(-1-(heap[offset+1|0]|0)|0);offset=offset+2|0;return 0;}function UINT_N_16(octet){octet=octet|0;var val=0;if(checkOffset(2)|0){return 1;}val=readUInt16(offset+1|0)|0;pushInt(-1-(val|0)|0);offset=offset+3|0;return 0;}function UINT_N_32(octet){octet=octet|0;if(checkOffset(4)|0){return 1;}pushInt32Neg(readUInt16(offset+1|0)|0,readUInt16(offset+3|0)|0);offset=offset+5|0;return 0;}function UINT_N_64(octet){octet=octet|0;if(checkOffset(8)|0){return 1;}pushInt64Neg(readUInt16(offset+1|0)|0,readUInt16(offset+3|0)|0,readUInt16(offset+5|0)|0,readUInt16(offset+7|0)|0);offset=offset+9|0;return 0;}function BYTE_STRING(octet){octet=octet|0;var start=0;var end=0;var step=0;step=octet-64|0;if(checkOffset(step|0)|0){return 1;}start=offset+1|0;end=(offset+1|0)+(step|0)|0;pushByteString(start|0,end|0);offset=end|0;return 0;}function BYTE_STRING_8(octet){octet=octet|0;var start=0;var end=0;var length=0;if(checkOffset(1)|0){return 1;}length=heap[offset+1|0]|0;start=offset+2|0;end=(offset+2|0)+(length|0)|0;if(checkOffset(length+1|0)|0){return 1;}pushByteString(start|0,end|0);offset=end|0;return 0;}function BYTE_STRING_16(octet){octet=octet|0;var start=0;var end=0;var length=0;if(checkOffset(2)|0){return 1;}length=readUInt16(offset+1|0)|0;start=offset+3|0;end=(offset+3|0)+(length|0)|0;if(checkOffset(length+2|0)|0){return 1;}pushByteString(start|0,end|0);offset=end|0;return 0;}function BYTE_STRING_32(octet){octet=octet|0;var start=0;var end=0;var length=0;if(checkOffset(4)|0){return 1;}length=readUInt32(offset+1|0)|0;start=offset+5|0;end=(offset+5|0)+(length|0)|0;if(checkOffset(length+4|0)|0){return 1;}pushByteString(start|0,end|0);offset=end|0;return 0;}function BYTE_STRING_64(octet){octet=octet|0;return 1;}function BYTE_STRING_BREAK(octet){octet=octet|0;pushByteStringStart();offset=offset+1|0;return 0;}function UTF8_STRING(octet){octet=octet|0;var start=0;var end=0;var step=0;step=octet-96|0;if(checkOffset(step|0)|0){return 1;}start=offset+1|0;end=(offset+1|0)+(step|0)|0;pushUtf8String(start|0,end|0);offset=end|0;return 0;}function UTF8_STRING_8(octet){octet=octet|0;var start=0;var end=0;var length=0;if(checkOffset(1)|0){return 1;}length=heap[offset+1|0]|0;start=offset+2|0;end=(offset+2|0)+(length|0)|0;if(checkOffset(length+1|0)|0){return 1;}pushUtf8String(start|0,end|0);offset=end|0;return 0;}function UTF8_STRING_16(octet){octet=octet|0;var start=0;var end=0;var length=0;if(checkOffset(2)|0){return 1;}length=readUInt16(offset+1|0)|0;start=offset+3|0;end=(offset+3|0)+(length|0)|0;if(checkOffset(length+2|0)|0){return 1;}pushUtf8String(start|0,end|0);offset=end|0;return 0;}function UTF8_STRING_32(octet){octet=octet|0;var start=0;var end=0;var length=0;if(checkOffset(4)|0){return 1;}length=readUInt32(offset+1|0)|0;start=offset+5|0;end=(offset+5|0)+(length|0)|0;if(checkOffset(length+4|0)|0){return 1;}pushUtf8String(start|0,end|0);offset=end|0;return 0;}function UTF8_STRING_64(octet){octet=octet|0;return 1;}function UTF8_STRING_BREAK(octet){octet=octet|0;pushUtf8StringStart();offset=offset+1|0;return 0;}function ARRAY(octet){octet=octet|0;pushArrayStartFixed(octet-128|0);offset=offset+1|0;return 0;}function ARRAY_8(octet){octet=octet|0;if(checkOffset(1)|0){return 1;}pushArrayStartFixed(heap[offset+1|0]|0);offset=offset+2|0;return 0;}function ARRAY_16(octet){octet=octet|0;if(checkOffset(2)|0){return 1;}pushArrayStartFixed(readUInt16(offset+1|0)|0);offset=offset+3|0;return 0;}function ARRAY_32(octet){octet=octet|0;if(checkOffset(4)|0){return 1;}pushArrayStartFixed32(readUInt16(offset+1|0)|0,readUInt16(offset+3|0)|0);offset=offset+5|0;return 0;}function ARRAY_64(octet){octet=octet|0;if(checkOffset(8)|0){return 1;}pushArrayStartFixed64(readUInt16(offset+1|0)|0,readUInt16(offset+3|0)|0,readUInt16(offset+5|0)|0,readUInt16(offset+7|0)|0);offset=offset+9|0;return 0;}function ARRAY_BREAK(octet){octet=octet|0;pushArrayStart();offset=offset+1|0;return 0;}function MAP(octet){octet=octet|0;var step=0;step=octet-160|0;if(checkOffset(step|0)|0){return 1;}pushObjectStartFixed(step|0);offset=offset+1|0;return 0;}function MAP_8(octet){octet=octet|0;if(checkOffset(1)|0){return 1;}pushObjectStartFixed(heap[offset+1|0]|0);offset=offset+2|0;return 0;}function MAP_16(octet){octet=octet|0;if(checkOffset(2)|0){return 1;}pushObjectStartFixed(readUInt16(offset+1|0)|0);offset=offset+3|0;return 0;}function MAP_32(octet){octet=octet|0;if(checkOffset(4)|0){return 1;}pushObjectStartFixed32(readUInt16(offset+1|0)|0,readUInt16(offset+3|0)|0);offset=offset+5|0;return 0;}function MAP_64(octet){octet=octet|0;if(checkOffset(8)|0){return 1;}pushObjectStartFixed64(readUInt16(offset+1|0)|0,readUInt16(offset+3|0)|0,readUInt16(offset+5|0)|0,readUInt16(offset+7|0)|0);offset=offset+9|0;return 0;}function MAP_BREAK(octet){octet=octet|0;pushObjectStart();offset=offset+1|0;return 0;}function TAG_KNOWN(octet){octet=octet|0;pushTagStart(octet-192|0|0);offset=offset+1|0;return 0;}function TAG_BIGNUM_POS(octet){octet=octet|0;pushTagStart(octet|0);offset=offset+1|0;return 0;}function TAG_BIGNUM_NEG(octet){octet=octet|0;pushTagStart(octet|0);offset=offset+1|0;return 0;}function TAG_FRAC(octet){octet=octet|0;pushTagStart(octet|0);offset=offset+1|0;return 0;}function TAG_BIGNUM_FLOAT(octet){octet=octet|0;pushTagStart(octet|0);offset=offset+1|0;return 0;}function TAG_UNASSIGNED(octet){octet=octet|0;pushTagStart(octet-192|0|0);offset=offset+1|0;return 0;}function TAG_BASE64_URL(octet){octet=octet|0;pushTagStart(octet|0);offset=offset+1|0;return 0;}function TAG_BASE64(octet){octet=octet|0;pushTagStart(octet|0);offset=offset+1|0;return 0;}function TAG_BASE16(octet){octet=octet|0;pushTagStart(octet|0);offset=offset+1|0;return 0;}function TAG_MORE_1(octet){octet=octet|0;if(checkOffset(1)|0){return 1;}pushTagStart(heap[offset+1|0]|0);offset=offset+2|0;return 0;}function TAG_MORE_2(octet){octet=octet|0;if(checkOffset(2)|0){return 1;}pushTagStart(readUInt16(offset+1|0)|0);offset=offset+3|0;return 0;}function TAG_MORE_4(octet){octet=octet|0;if(checkOffset(4)|0){return 1;}pushTagStart4(readUInt16(offset+1|0)|0,readUInt16(offset+3|0)|0);offset=offset+5|0;return 0;}function TAG_MORE_8(octet){octet=octet|0;if(checkOffset(8)|0){return 1;}pushTagStart8(readUInt16(offset+1|0)|0,readUInt16(offset+3|0)|0,readUInt16(offset+5|0)|0,readUInt16(offset+7|0)|0);offset=offset+9|0;return 0;}function SIMPLE_UNASSIGNED(octet){octet=octet|0;pushSimpleUnassigned((octet|0)-224|0);offset=offset+1|0;return 0;}function SIMPLE_FALSE(octet){octet=octet|0;pushFalse();offset=offset+1|0;return 0;}function SIMPLE_TRUE(octet){octet=octet|0;pushTrue();offset=offset+1|0;return 0;}function SIMPLE_NULL(octet){octet=octet|0;pushNull();offset=offset+1|0;return 0;}function SIMPLE_UNDEFINED(octet){octet=octet|0;pushUndefined();offset=offset+1|0;return 0;}function SIMPLE_BYTE(octet){octet=octet|0;if(checkOffset(1)|0){return 1;}pushSimpleUnassigned(heap[offset+1|0]|0);offset=offset+2|0;return 0;}function SIMPLE_FLOAT_HALF(octet){octet=octet|0;var f=0;var g=0;var sign=1.0;var exp=0.0;var mant=0.0;var r=0.0;if(checkOffset(2)|0){return 1;}f=heap[offset+1|0]|0;g=heap[offset+2|0]|0;if((f|0)&0x80){sign=-1.0;}exp=+(((f|0)&0x7C)>>2);mant=+(((f|0)&0x03)<<8|g);if(+exp==0.0){pushFloat(+(+sign*+5.9604644775390625e-8*+mant));}else if(+exp==31.0){if(+sign==1.0){if(+mant>0.0){pushNaN();}else{pushInfinity();}}else{if(+mant>0.0){pushNaNNeg();}else{pushInfinityNeg();}}}else{pushFloat(+(+sign*pow(+2,+(+exp-25.0))*+(1024.0+mant)));}offset=offset+3|0;return 0;}function SIMPLE_FLOAT_SINGLE(octet){octet=octet|0;if(checkOffset(4)|0){return 1;}pushFloatSingle(heap[offset+1|0]|0,heap[offset+2|0]|0,heap[offset+3|0]|0,heap[offset+4|0]|0);offset=offset+5|0;return 0;}function SIMPLE_FLOAT_DOUBLE(octet){octet=octet|0;if(checkOffset(8)|0){return 1;}pushFloatDouble(heap[offset+1|0]|0,heap[offset+2|0]|0,heap[offset+3|0]|0,heap[offset+4|0]|0,heap[offset+5|0]|0,heap[offset+6|0]|0,heap[offset+7|0]|0,heap[offset+8|0]|0);offset=offset+9|0;return 0;}function ERROR(octet){octet=octet|0;return 1;}function BREAK(octet){octet=octet|0;pushBreak();offset=offset+1|0;return 0;}var jumpTable=[INT_P,INT_P,INT_P,INT_P,INT_P,INT_P,INT_P,INT_P,INT_P,INT_P,INT_P,INT_P,INT_P,INT_P,INT_P,INT_P,INT_P,INT_P,INT_P,INT_P,INT_P,INT_P,INT_P,INT_P,UINT_P_8,UINT_P_16,UINT_P_32,UINT_P_64,ERROR,ERROR,ERROR,ERROR,INT_N,INT_N,INT_N,INT_N,INT_N,INT_N,INT_N,INT_N,INT_N,INT_N,INT_N,INT_N,INT_N,INT_N,INT_N,INT_N,INT_N,INT_N,INT_N,INT_N,INT_N,INT_N,INT_N,INT_N,UINT_N_8,UINT_N_16,UINT_N_32,UINT_N_64,ERROR,ERROR,ERROR,ERROR,BYTE_STRING,BYTE_STRING,BYTE_STRING,BYTE_STRING,BYTE_STRING,BYTE_STRING,BYTE_STRING,BYTE_STRING,BYTE_STRING,BYTE_STRING,BYTE_STRING,BYTE_STRING,BYTE_STRING,BYTE_STRING,BYTE_STRING,BYTE_STRING,BYTE_STRING,BYTE_STRING,BYTE_STRING,BYTE_STRING,BYTE_STRING,BYTE_STRING,BYTE_STRING,BYTE_STRING,BYTE_STRING_8,BYTE_STRING_16,BYTE_STRING_32,BYTE_STRING_64,ERROR,ERROR,ERROR,BYTE_STRING_BREAK,UTF8_STRING,UTF8_STRING,UTF8_STRING,UTF8_STRING,UTF8_STRING,UTF8_STRING,UTF8_STRING,UTF8_STRING,UTF8_STRING,UTF8_STRING,UTF8_STRING,UTF8_STRING,UTF8_STRING,UTF8_STRING,UTF8_STRING,UTF8_STRING,UTF8_STRING,UTF8_STRING,UTF8_STRING,UTF8_STRING,UTF8_STRING,UTF8_STRING,UTF8_STRING,UTF8_STRING,UTF8_STRING_8,UTF8_STRING_16,UTF8_STRING_32,UTF8_STRING_64,ERROR,ERROR,ERROR,UTF8_STRING_BREAK,ARRAY,ARRAY,ARRAY,ARRAY,ARRAY,ARRAY,ARRAY,ARRAY,ARRAY,ARRAY,ARRAY,ARRAY,ARRAY,ARRAY,ARRAY,ARRAY,ARRAY,ARRAY,ARRAY,ARRAY,ARRAY,ARRAY,ARRAY,ARRAY,ARRAY_8,ARRAY_16,ARRAY_32,ARRAY_64,ERROR,ERROR,ERROR,ARRAY_BREAK,MAP,MAP,MAP,MAP,MAP,MAP,MAP,MAP,MAP,MAP,MAP,MAP,MAP,MAP,MAP,MAP,MAP,MAP,MAP,MAP,MAP,MAP,MAP,MAP,MAP_8,MAP_16,MAP_32,MAP_64,ERROR,ERROR,ERROR,MAP_BREAK,TAG_KNOWN,TAG_KNOWN,TAG_KNOWN,TAG_KNOWN,TAG_KNOWN,TAG_KNOWN,TAG_UNASSIGNED,TAG_UNASSIGNED,TAG_UNASSIGNED,TAG_UNASSIGNED,TAG_UNASSIGNED,TAG_UNASSIGNED,TAG_UNASSIGNED,TAG_UNASSIGNED,TAG_UNASSIGNED,TAG_UNASSIGNED,TAG_UNASSIGNED,TAG_UNASSIGNED,TAG_UNASSIGNED,TAG_UNASSIGNED,TAG_UNASSIGNED,TAG_UNASSIGNED,TAG_UNASSIGNED,TAG_UNASSIGNED,TAG_MORE_1,TAG_MORE_2,TAG_MORE_4,TAG_MORE_8,ERROR,ERROR,ERROR,ERROR,SIMPLE_UNASSIGNED,SIMPLE_UNASSIGNED,SIMPLE_UNASSIGNED,SIMPLE_UNASSIGNED,SIMPLE_UNASSIGNED,SIMPLE_UNASSIGNED,SIMPLE_UNASSIGNED,SIMPLE_UNASSIGNED,SIMPLE_UNASSIGNED,SIMPLE_UNASSIGNED,SIMPLE_UNASSIGNED,SIMPLE_UNASSIGNED,SIMPLE_UNASSIGNED,SIMPLE_UNASSIGNED,SIMPLE_UNASSIGNED,SIMPLE_UNASSIGNED,SIMPLE_UNASSIGNED,SIMPLE_UNASSIGNED,SIMPLE_UNASSIGNED,SIMPLE_UNASSIGNED,SIMPLE_FALSE,SIMPLE_TRUE,SIMPLE_NULL,SIMPLE_UNDEFINED,SIMPLE_BYTE,SIMPLE_FLOAT_HALF,SIMPLE_FLOAT_SINGLE,SIMPLE_FLOAT_DOUBLE,ERROR,ERROR,ERROR,BREAK];return{parse:parse};};},5527:function(__unusedmodule,exports,__webpack_require__){"use strict";const promisify=__webpack_require__(6955);const map=__webpack_require__(7011);const isIpfs=__webpack_require__(7129);const CID=__webpack_require__(9339);const ERR_BAD_PATH='ERR_BAD_PATH';exports.OFFLINE_ERROR='This command must be run in online mode. Try running \'ipfs daemon\' first.';function parseIpfsPath(ipfsPath){const invalidPathErr=new Error('invalid ipfs ref path');ipfsPath=ipfsPath.replace(/^\/ipfs\//,'');const matched=ipfsPath.match(/([^/]+(?:\/[^/]+)*)\/?$/);if(!matched){throw invalidPathErr;}const[hash,...links]=matched[1].split('/');if(isIpfs.cid(hash)){return{hash,links};}else{throw invalidPathErr;}}const normalizePath=pathStr=>{if(isIpfs.cid(pathStr)){return`/ipfs/${pathStr}`;}else if(isIpfs.path(pathStr)){return pathStr;}else{throw Object.assign(new Error(`invalid ${pathStr} path`),{code:ERR_BAD_PATH});}};const resolvePath=promisify(function(objectAPI,ipfsPaths,callback){if(!Array.isArray(ipfsPaths)){ipfsPaths=[ipfsPaths];}map(ipfsPaths,(path,cb)=>{if(typeof path!=='string'){let cid;try{cid=new CID(path);}catch(err){return cb(err);}return cb(null,cid.buffer);}let parsedPath;try{parsedPath=exports.parseIpfsPath(path);}catch(err){return cb(err);}const rootHash=new CID(parsedPath.hash);const rootLinks=parsedPath.links;if(!rootLinks.length){return cb(null,rootHash.buffer);}objectAPI.get(rootHash,follow.bind(null,rootHash,rootLinks));function follow(cid,links,err,obj){if(err){return cb(err);}if(!links.length){return cb(null,cid.buffer);}const linkName=links[0];const nextObj=obj.links.find(link=>link.name===linkName);if(!nextObj){return cb(new Error(`no link named "${linkName}" under ${cid.toBaseEncodedString()}`));}objectAPI.get(nextObj.cid,follow.bind(null,nextObj.cid,links.slice(1)));}},callback);});exports.normalizePath=normalizePath;exports.parseIpfsPath=parseIpfsPath;exports.resolvePath=resolvePath;},5530:function(__unusedmodule,exports,__webpack_require__){"use strict";const types=__webpack_require__(5776);const rcodes=__webpack_require__(1611);const opcodes=__webpack_require__(5592);const classes=__webpack_require__(6696);const ip=__webpack_require__(9834);const Buffer=__webpack_require__(7572).Buffer;const QUERY_FLAG=0;const RESPONSE_FLAG=1<<15;const FLUSH_MASK=1<<15;const NOT_FLUSH_MASK=~FLUSH_MASK;const QU_MASK=1<<15;const NOT_QU_MASK=~QU_MASK;const name=exports.txt=exports.name={};name.encode=function(str,buf,offset){if(!buf)buf=Buffer.allocUnsafe(name.encodingLength(str));if(!offset)offset=0;const oldOffset=offset;const n=str.replace(/^\.|\.$/gm,'');if(n.length){const list=n.split('.');for(let i=0;i<list.length;i++){const len=buf.write(list[i],offset+1);buf[offset]=len;offset+=len+1;}}buf[offset++]=0;name.encode.bytes=offset-oldOffset;return buf;};name.encode.bytes=0;name.decode=function(buf,offset){if(!offset)offset=0;const list=[];const oldOffset=offset;let len=buf[offset++];if(len===0){name.decode.bytes=1;return'.';}if(len>=0xc0){const res=name.decode(buf,buf.readUInt16BE(offset-1)-0xc000);name.decode.bytes=2;return res;}while(len){if(len>=0xc0){list.push(name.decode(buf,buf.readUInt16BE(offset-1)-0xc000));offset++;break;}list.push(buf.toString('utf-8',offset,offset+len));offset+=len;len=buf[offset++];}name.decode.bytes=offset-oldOffset;return list.join('.');};name.decode.bytes=0;name.encodingLength=function(n){if(n==='.')return 1;return Buffer.byteLength(n)+2;};const string={};string.encode=function(s,buf,offset){if(!buf)buf=Buffer.allocUnsafe(string.encodingLength(s));if(!offset)offset=0;const len=buf.write(s,offset+1);buf[offset]=len;string.encode.bytes=len+1;return buf;};string.encode.bytes=0;string.decode=function(buf,offset){if(!offset)offset=0;const len=buf[offset];const s=buf.toString('utf-8',offset+1,offset+1+len);string.decode.bytes=len+1;return s;};string.decode.bytes=0;string.encodingLength=function(s){return Buffer.byteLength(s)+1;};const header={};header.encode=function(h,buf,offset){if(!buf)buf=header.encodingLength(h);if(!offset)offset=0;const flags=(h.flags||0)&32767;const type=h.type==='response'?RESPONSE_FLAG:QUERY_FLAG;buf.writeUInt16BE(h.id||0,offset);buf.writeUInt16BE(flags|type,offset+2);buf.writeUInt16BE(h.questions.length,offset+4);buf.writeUInt16BE(h.answers.length,offset+6);buf.writeUInt16BE(h.authorities.length,offset+8);buf.writeUInt16BE(h.additionals.length,offset+10);return buf;};header.encode.bytes=12;header.decode=function(buf,offset){if(!offset)offset=0;if(buf.length<12)throw new Error('Header must be 12 bytes');const flags=buf.readUInt16BE(offset+2);return{id:buf.readUInt16BE(offset),type:flags&RESPONSE_FLAG?'response':'query',flags:flags&32767,flag_qr:(flags>>15&0x1)===1,opcode:opcodes.toString(flags>>11&0xf),flag_aa:(flags>>10&0x1)===1,flag_tc:(flags>>9&0x1)===1,flag_rd:(flags>>8&0x1)===1,flag_ra:(flags>>7&0x1)===1,flag_z:(flags>>6&0x1)===1,flag_ad:(flags>>5&0x1)===1,flag_cd:(flags>>4&0x1)===1,rcode:rcodes.toString(flags&0xf),questions:new Array(buf.readUInt16BE(offset+4)),answers:new Array(buf.readUInt16BE(offset+6)),authorities:new Array(buf.readUInt16BE(offset+8)),additionals:new Array(buf.readUInt16BE(offset+10))};};header.decode.bytes=12;header.encodingLength=function(){return 12;};const runknown=exports.unknown={};runknown.encode=function(data,buf,offset){if(!buf)buf=Buffer.allocUnsafe(runknown.encodingLength(data));if(!offset)offset=0;buf.writeUInt16BE(data.length,offset);data.copy(buf,offset+2);runknown.encode.bytes=data.length+2;return buf;};runknown.encode.bytes=0;runknown.decode=function(buf,offset){if(!offset)offset=0;const len=buf.readUInt16BE(offset);const data=buf.slice(offset+2,offset+2+len);runknown.decode.bytes=len+2;return data;};runknown.decode.bytes=0;runknown.encodingLength=function(data){return data.length+2;};const rns=exports.ns={};rns.encode=function(data,buf,offset){if(!buf)buf=Buffer.allocUnsafe(rns.encodingLength(data));if(!offset)offset=0;name.encode(data,buf,offset+2);buf.writeUInt16BE(name.encode.bytes,offset);rns.encode.bytes=name.encode.bytes+2;return buf;};rns.encode.bytes=0;rns.decode=function(buf,offset){if(!offset)offset=0;const len=buf.readUInt16BE(offset);const dd=name.decode(buf,offset+2);rns.decode.bytes=len+2;return dd;};rns.decode.bytes=0;rns.encodingLength=function(data){return name.encodingLength(data)+2;};const rsoa=exports.soa={};rsoa.encode=function(data,buf,offset){if(!buf)buf=Buffer.allocUnsafe(rsoa.encodingLength(data));if(!offset)offset=0;const oldOffset=offset;offset+=2;name.encode(data.mname,buf,offset);offset+=name.encode.bytes;name.encode(data.rname,buf,offset);offset+=name.encode.bytes;buf.writeUInt32BE(data.serial||0,offset);offset+=4;buf.writeUInt32BE(data.refresh||0,offset);offset+=4;buf.writeUInt32BE(data.retry||0,offset);offset+=4;buf.writeUInt32BE(data.expire||0,offset);offset+=4;buf.writeUInt32BE(data.minimum||0,offset);offset+=4;buf.writeUInt16BE(offset-oldOffset-2,oldOffset);rsoa.encode.bytes=offset-oldOffset;return buf;};rsoa.encode.bytes=0;rsoa.decode=function(buf,offset){if(!offset)offset=0;const oldOffset=offset;const data={};offset+=2;data.mname=name.decode(buf,offset);offset+=name.decode.bytes;data.rname=name.decode(buf,offset);offset+=name.decode.bytes;data.serial=buf.readUInt32BE(offset);offset+=4;data.refresh=buf.readUInt32BE(offset);offset+=4;data.retry=buf.readUInt32BE(offset);offset+=4;data.expire=buf.readUInt32BE(offset);offset+=4;data.minimum=buf.readUInt32BE(offset);offset+=4;rsoa.decode.bytes=offset-oldOffset;return data;};rsoa.decode.bytes=0;rsoa.encodingLength=function(data){return 22+name.encodingLength(data.mname)+name.encodingLength(data.rname);};const rtxt=exports.txt={};rtxt.encode=function(data,buf,offset){if(!Array.isArray(data))data=[data];for(let i=0;i<data.length;i++){if(typeof data[i]==='string'){data[i]=Buffer.from(data[i]);}if(!Buffer.isBuffer(data[i])){throw new Error('Must be a Buffer');}}if(!buf)buf=Buffer.allocUnsafe(rtxt.encodingLength(data));if(!offset)offset=0;const oldOffset=offset;offset+=2;data.forEach(function(d){buf[offset++]=d.length;d.copy(buf,offset,0,d.length);offset+=d.length;});buf.writeUInt16BE(offset-oldOffset-2,oldOffset);rtxt.encode.bytes=offset-oldOffset;return buf;};rtxt.encode.bytes=0;rtxt.decode=function(buf,offset){if(!offset)offset=0;const oldOffset=offset;let remaining=buf.readUInt16BE(offset);offset+=2;let data=[];while(remaining>0){const len=buf[offset++];--remaining;if(remaining<len){throw new Error('Buffer overflow');}data.push(buf.slice(offset,offset+len));offset+=len;remaining-=len;}rtxt.decode.bytes=offset-oldOffset;return data;};rtxt.decode.bytes=0;rtxt.encodingLength=function(data){if(!Array.isArray(data))data=[data];let length=2;data.forEach(function(buf){if(typeof buf==='string'){length+=Buffer.byteLength(buf)+1;}else{length+=buf.length+1;}});return length;};const rnull=exports.null={};rnull.encode=function(data,buf,offset){if(!buf)buf=Buffer.allocUnsafe(rnull.encodingLength(data));if(!offset)offset=0;if(typeof data==='string')data=Buffer.from(data);if(!data)data=Buffer.allocUnsafe(0);const oldOffset=offset;offset+=2;const len=data.length;data.copy(buf,offset,0,len);offset+=len;buf.writeUInt16BE(offset-oldOffset-2,oldOffset);rnull.encode.bytes=offset-oldOffset;return buf;};rnull.encode.bytes=0;rnull.decode=function(buf,offset){if(!offset)offset=0;const oldOffset=offset;const len=buf.readUInt16BE(offset);offset+=2;const data=buf.slice(offset,offset+len);offset+=len;rnull.decode.bytes=offset-oldOffset;return data;};rnull.decode.bytes=0;rnull.encodingLength=function(data){if(!data)return 2;return(Buffer.isBuffer(data)?data.length:Buffer.byteLength(data))+2;};const rhinfo=exports.hinfo={};rhinfo.encode=function(data,buf,offset){if(!buf)buf=Buffer.allocUnsafe(rhinfo.encodingLength(data));if(!offset)offset=0;const oldOffset=offset;offset+=2;string.encode(data.cpu,buf,offset);offset+=string.encode.bytes;string.encode(data.os,buf,offset);offset+=string.encode.bytes;buf.writeUInt16BE(offset-oldOffset-2,oldOffset);rhinfo.encode.bytes=offset-oldOffset;return buf;};rhinfo.encode.bytes=0;rhinfo.decode=function(buf,offset){if(!offset)offset=0;const oldOffset=offset;const data={};offset+=2;data.cpu=string.decode(buf,offset);offset+=string.decode.bytes;data.os=string.decode(buf,offset);offset+=string.decode.bytes;rhinfo.decode.bytes=offset-oldOffset;return data;};rhinfo.decode.bytes=0;rhinfo.encodingLength=function(data){return string.encodingLength(data.cpu)+string.encodingLength(data.os)+2;};const rptr=exports.ptr={};const rcname=exports.cname=rptr;const rdname=exports.dname=rptr;rptr.encode=function(data,buf,offset){if(!buf)buf=Buffer.allocUnsafe(rptr.encodingLength(data));if(!offset)offset=0;name.encode(data,buf,offset+2);buf.writeUInt16BE(name.encode.bytes,offset);rptr.encode.bytes=name.encode.bytes+2;return buf;};rptr.encode.bytes=0;rptr.decode=function(buf,offset){if(!offset)offset=0;const data=name.decode(buf,offset+2);rptr.decode.bytes=name.decode.bytes+2;return data;};rptr.decode.bytes=0;rptr.encodingLength=function(data){return name.encodingLength(data)+2;};const rsrv=exports.srv={};rsrv.encode=function(data,buf,offset){if(!buf)buf=Buffer.allocUnsafe(rsrv.encodingLength(data));if(!offset)offset=0;buf.writeUInt16BE(data.priority||0,offset+2);buf.writeUInt16BE(data.weight||0,offset+4);buf.writeUInt16BE(data.port||0,offset+6);name.encode(data.target,buf,offset+8);const len=name.encode.bytes+6;buf.writeUInt16BE(len,offset);rsrv.encode.bytes=len+2;return buf;};rsrv.encode.bytes=0;rsrv.decode=function(buf,offset){if(!offset)offset=0;const len=buf.readUInt16BE(offset);const data={};data.priority=buf.readUInt16BE(offset+2);data.weight=buf.readUInt16BE(offset+4);data.port=buf.readUInt16BE(offset+6);data.target=name.decode(buf,offset+8);rsrv.decode.bytes=len+2;return data;};rsrv.decode.bytes=0;rsrv.encodingLength=function(data){return 8+name.encodingLength(data.target);};const rcaa=exports.caa={};rcaa.ISSUER_CRITICAL=1<<7;rcaa.encode=function(data,buf,offset){const len=rcaa.encodingLength(data);if(!buf)buf=Buffer.allocUnsafe(rcaa.encodingLength(data));if(!offset)offset=0;if(data.issuerCritical){data.flags=rcaa.ISSUER_CRITICAL;}buf.writeUInt16BE(len-2,offset);offset+=2;buf.writeUInt8(data.flags||0,offset);offset+=1;string.encode(data.tag,buf,offset);offset+=string.encode.bytes;buf.write(data.value,offset);offset+=Buffer.byteLength(data.value);rcaa.encode.bytes=len;return buf;};rcaa.encode.bytes=0;rcaa.decode=function(buf,offset){if(!offset)offset=0;const len=buf.readUInt16BE(offset);offset+=2;const oldOffset=offset;const data={};data.flags=buf.readUInt8(offset);offset+=1;data.tag=string.decode(buf,offset);offset+=string.decode.bytes;data.value=buf.toString('utf-8',offset,oldOffset+len);data.issuerCritical=!!(data.flags&rcaa.ISSUER_CRITICAL);rcaa.decode.bytes=len+2;return data;};rcaa.decode.bytes=0;rcaa.encodingLength=function(data){return string.encodingLength(data.tag)+string.encodingLength(data.value)+2;};const rmx=exports.mx={};rmx.encode=function(data,buf,offset){if(!buf)buf=Buffer.allocUnsafe(rmx.encodingLength(data));if(!offset)offset=0;const oldOffset=offset;offset+=2;buf.writeUInt16BE(data.preference||0,offset);offset+=2;name.encode(data.exchange,buf,offset);offset+=name.encode.bytes;buf.writeUInt16BE(offset-oldOffset-2,oldOffset);rmx.encode.bytes=offset-oldOffset;return buf;};rmx.encode.bytes=0;rmx.decode=function(buf,offset){if(!offset)offset=0;const oldOffset=offset;const data={};offset+=2;data.preference=buf.readUInt16BE(offset);offset+=2;data.exchange=name.decode(buf,offset);offset+=name.decode.bytes;rmx.decode.bytes=offset-oldOffset;return data;};rmx.encodingLength=function(data){return 4+name.encodingLength(data.exchange);};const ra=exports.a={};ra.encode=function(host,buf,offset){if(!buf)buf=Buffer.allocUnsafe(ra.encodingLength(host));if(!offset)offset=0;buf.writeUInt16BE(4,offset);offset+=2;ip.toBuffer(host,buf,offset);ra.encode.bytes=6;return buf;};ra.encode.bytes=0;ra.decode=function(buf,offset){if(!offset)offset=0;offset+=2;const host=ip.toString(buf,offset,4);ra.decode.bytes=6;return host;};ra.decode.bytes=0;ra.encodingLength=function(){return 6;};const raaaa=exports.aaaa={};raaaa.encode=function(host,buf,offset){if(!buf)buf=Buffer.allocUnsafe(raaaa.encodingLength(host));if(!offset)offset=0;buf.writeUInt16BE(16,offset);offset+=2;ip.toBuffer(host,buf,offset);raaaa.encode.bytes=18;return buf;};raaaa.encode.bytes=0;raaaa.decode=function(buf,offset){if(!offset)offset=0;offset+=2;const host=ip.toString(buf,offset,16);raaaa.decode.bytes=18;return host;};raaaa.decode.bytes=0;raaaa.encodingLength=function(){return 18;};const roption=exports.option={};roption.encode=function(option,buf,offset){if(!buf)buf=Buffer.allocUnsafe(roption.encodingLength(option));if(!offset)offset=0;const oldOffset=offset;buf.writeUInt16BE(option.code,offset);offset+=2;buf.writeUInt16BE(option.data.length,offset);offset+=2;option.data.copy(buf,offset);offset+=option.data.length;roption.encode.bytes=offset-oldOffset;return buf;};roption.encode.bytes=0;roption.decode=function(buf,offset){if(!offset)offset=0;const option={};option.code=buf.readUInt16BE(offset);const len=buf.readUInt16BE(offset+2);option.data=buf.slice(offset+4,offset+4+len);roption.decode.bytes=len+4;return option;};roption.decode.bytes=0;roption.encodingLength=function(option){return option.data.length+4;};const ropt=exports.opt={};ropt.encode=function(options,buf,offset){if(!buf)buf=Buffer.allocUnsafe(ropt.encodingLength(options));if(!offset)offset=0;const oldOffset=offset;const rdlen=encodingLengthList(options,roption);buf.writeUInt16BE(rdlen,offset);offset=encodeList(options,roption,buf,offset+2);ropt.encode.bytes=offset-oldOffset;return buf;};ropt.encode.bytes=0;ropt.decode=function(buf,offset){if(!offset)offset=0;const oldOffset=offset;const options=[];let rdlen=buf.readUInt16BE(offset);offset+=2;let o=0;while(rdlen>0){options[o++]=roption.decode(buf,offset);offset+=roption.decode.bytes;rdlen-=roption.decode.bytes;}ropt.decode.bytes=offset-oldOffset;return options;};ropt.decode.bytes=0;ropt.encodingLength=function(options){return 2+encodingLengthList(options||[],roption);};const renc=exports.record=function(type){switch(type.toUpperCase()){case'A':return ra;case'PTR':return rptr;case'CNAME':return rcname;case'DNAME':return rdname;case'TXT':return rtxt;case'NULL':return rnull;case'AAAA':return raaaa;case'SRV':return rsrv;case'HINFO':return rhinfo;case'CAA':return rcaa;case'NS':return rns;case'SOA':return rsoa;case'MX':return rmx;case'OPT':return ropt;}return runknown;};const answer=exports.answer={};answer.encode=function(a,buf,offset){if(!buf)buf=Buffer.allocUnsafe(answer.encodingLength(a));if(!offset)offset=0;const oldOffset=offset;name.encode(a.name,buf,offset);offset+=name.encode.bytes;buf.writeUInt16BE(types.toType(a.type),offset);if(a.type.toUpperCase()==='OPT'){if(a.name!=='.'){throw new Error('OPT name must be root.');}buf.writeUInt16BE(a.updPayloadSize||4096,offset+2);buf.writeUInt8(a.extendedRcode||0,offset+4);buf.writeUInt8(a.ednsVersion||0,offset+5);buf.writeUInt16BE(a.flags||0,offset+6);offset+=8;ropt.encode(a.options||[],buf,offset);offset+=ropt.encode.bytes;}else{let klass=classes.toClass(a.class===undefined?'IN':a.class);if(a.flush)klass|=FLUSH_MASK;buf.writeUInt16BE(klass,offset+2);buf.writeUInt32BE(a.ttl||0,offset+4);offset+=8;const enc=renc(a.type);enc.encode(a.data,buf,offset);offset+=enc.encode.bytes;}answer.encode.bytes=offset-oldOffset;return buf;};answer.encode.bytes=0;answer.decode=function(buf,offset){if(!offset)offset=0;const a={};const oldOffset=offset;a.name=name.decode(buf,offset);offset+=name.decode.bytes;a.type=types.toString(buf.readUInt16BE(offset));if(a.type==='OPT'){a.udpPayloadSize=buf.readUInt16BE(offset+2);a.extendedRcode=buf.readUInt8(offset+4);a.ednsVersion=buf.readUInt8(offset+5);a.flags=buf.readUInt16BE(offset+6);a.flag_do=(a.flags>>15&0x1)===1;a.options=ropt.decode(buf,offset+8);offset+=8+ropt.decode.bytes;}else{const klass=buf.readUInt16BE(offset+2);a.ttl=buf.readUInt32BE(offset+4);a.class=classes.toString(klass&NOT_FLUSH_MASK);a.flush=!!(klass&FLUSH_MASK);const enc=renc(a.type);a.data=enc.decode(buf,offset+8);offset+=8+enc.decode.bytes;}answer.decode.bytes=offset-oldOffset;return a;};answer.decode.bytes=0;answer.encodingLength=function(a){return name.encodingLength(a.name)+8+renc(a.type).encodingLength(a.data||a.options);};const question=exports.question={};question.encode=function(q,buf,offset){if(!buf)buf=Buffer.allocUnsafe(question.encodingLength(q));if(!offset)offset=0;const oldOffset=offset;name.encode(q.name,buf,offset);offset+=name.encode.bytes;buf.writeUInt16BE(types.toType(q.type),offset);offset+=2;buf.writeUInt16BE(classes.toClass(q.class===undefined?'IN':q.class),offset);offset+=2;question.encode.bytes=offset-oldOffset;return q;};question.encode.bytes=0;question.decode=function(buf,offset){if(!offset)offset=0;const oldOffset=offset;const q={};q.name=name.decode(buf,offset);offset+=name.decode.bytes;q.type=types.toString(buf.readUInt16BE(offset));offset+=2;q.class=classes.toString(buf.readUInt16BE(offset));offset+=2;const qu=!!(q.class&QU_MASK);if(qu)q.class&=NOT_QU_MASK;question.decode.bytes=offset-oldOffset;return q;};question.decode.bytes=0;question.encodingLength=function(q){return name.encodingLength(q.name)+4;};exports.AUTHORITATIVE_ANSWER=1<<10;exports.TRUNCATED_RESPONSE=1<<9;exports.RECURSION_DESIRED=1<<8;exports.RECURSION_AVAILABLE=1<<7;exports.AUTHENTIC_DATA=1<<5;exports.CHECKING_DISABLED=1<<4;exports.DNSSEC_OK=1<<15;exports.encode=function(result,buf,offset){if(!buf)buf=Buffer.allocUnsafe(exports.encodingLength(result));if(!offset)offset=0;const oldOffset=offset;if(!result.questions)result.questions=[];if(!result.answers)result.answers=[];if(!result.authorities)result.authorities=[];if(!result.additionals)result.additionals=[];header.encode(result,buf,offset);offset+=header.encode.bytes;offset=encodeList(result.questions,question,buf,offset);offset=encodeList(result.answers,answer,buf,offset);offset=encodeList(result.authorities,answer,buf,offset);offset=encodeList(result.additionals,answer,buf,offset);exports.encode.bytes=offset-oldOffset;return buf;};exports.encode.bytes=0;exports.decode=function(buf,offset){if(!offset)offset=0;const oldOffset=offset;const result=header.decode(buf,offset);offset+=header.decode.bytes;offset=decodeList(result.questions,question,buf,offset);offset=decodeList(result.answers,answer,buf,offset);offset=decodeList(result.authorities,answer,buf,offset);offset=decodeList(result.additionals,answer,buf,offset);exports.decode.bytes=offset-oldOffset;return result;};exports.decode.bytes=0;exports.encodingLength=function(result){return header.encodingLength(result)+encodingLengthList(result.questions||[],question)+encodingLengthList(result.answers||[],answer)+encodingLengthList(result.authorities||[],answer)+encodingLengthList(result.additionals||[],answer);};exports.streamEncode=function(result){const buf=exports.encode(result);const sbuf=Buffer.allocUnsafe(2);sbuf.writeUInt16BE(buf.byteLength);const combine=Buffer.concat([sbuf,buf]);exports.streamEncode.bytes=combine.byteLength;return combine;};exports.streamEncode.bytes=0;exports.streamDecode=function(sbuf){const len=sbuf.readUInt16BE(0);if(sbuf.byteLength<len+2){return null;}const result=exports.decode(sbuf.slice(2));exports.streamDecode.bytes=exports.decode.bytes;return result;};exports.streamDecode.bytes=0;function encodingLengthList(list,enc){let len=0;for(let i=0;i<list.length;i++)len+=enc.encodingLength(list[i]);return len;}function encodeList(list,enc,buf,offset){for(let i=0;i<list.length;i++){enc.encode(list[i],buf,offset);offset+=enc.encode.bytes;}return offset;}function decodeList(list,enc,buf,offset){for(let i=0;i<list.length;i++){list[i]=enc.decode(buf,offset);offset+=enc.decode.bytes;}return offset;}},5540:function(module,__unusedexports,__webpack_require__){"use strict";const error=__webpack_require__(5619);const once=__webpack_require__(751);const empty=__webpack_require__(7086);const extractDataFromBlock=__webpack_require__(5504);module.exports=(cid,node,name,path,pathRest,resolve,size,dag,parent,depth,options)=>{const accepts=pathRest[0];if(accepts!==undefined&&accepts!==path){return empty();}size=size||node.length;let offset=options.offset;let length=options.length;if(offset<0){return error(new Error('Offset must be greater than or equal to 0'));}if(offset>size){return error(new Error('Offset must be less than the file size'));}if(length<0){return error(new Error('Length must be greater than or equal to 0'));}if(length===0){return once({depth,content:once(Buffer.alloc(0)),hash:cid,name,path,size,type:'raw'});}if(!offset){offset=0;}if(!length||offset+length>size){length=size-offset;}return once({depth,content:once(extractDataFromBlock(node,0,offset,offset+length)),hash:cid,name,path,size,type:'raw'});};},5544:function(module,__unusedexports,__webpack_require__){"use strict";const promisify=__webpack_require__(6955);const CID=__webpack_require__(9339);const pull=__webpack_require__(2885);const mapAsync=__webpack_require__(7011);const setImmediate=__webpack_require__(7368);const flattenDeep=__webpack_require__(9466);const errCode=__webpack_require__(4999);module.exports=function dag(self){return{put:promisify((dagNode,options,callback)=>{if(typeof options==='function'){callback=options;options={};}options=options||{};if(options.cid&&(options.format||options.hashAlg)){return callback(new Error('Can\'t put dag node. Please provide either `cid` OR `format` and `hashAlg` options.'));}else if(options.format&&!options.hashAlg||!options.format&&options.hashAlg){return callback(new Error('Can\'t put dag node. Please provide `format` AND `hashAlg` options.'));}const optionDefaults={format:'dag-cbor',hashAlg:'sha2-256'};options=options.cid?options:Object.assign({},optionDefaults,options);self._ipld.put(dagNode,options,(err,cid)=>{if(err)return callback(err);if(options.preload!==false){self._preload(cid);}callback(null,cid);});}),get:promisify((cid,path,options,callback)=>{if(typeof path==='function'){callback=path;path=undefined;}if(typeof options==='function'){callback=options;if(typeof path!=='string'){options=path;path=null;}else{options={};}}options=options||{};if(typeof cid==='string'){const split=cid.split('/');try{cid=new CID(split[0]);}catch(err){return setImmediate(()=>callback(errCode(err,'ERR_INVALID_CID')));}split.shift();if(split.length>0){path=split.join('/');}else{path='/';}}else if(Buffer.isBuffer(cid)){try{cid=new CID(cid);}catch(err){return setImmediate(()=>callback(errCode(err,'ERR_INVALID_CID')));}}if(options.preload!==false){self._preload(cid);}self._ipld.get(cid,path,options,callback);}),tree:promisify((cid,path,options,callback)=>{if(typeof path==='object'){callback=options;options=path;path=undefined;}if(typeof path==='function'){callback=path;path=undefined;}if(typeof options==='function'){callback=options;options={};}options=options||{};if(typeof cid==='string'){const split=cid.split('/');try{cid=new CID(split[0]);}catch(err){return setImmediate(()=>callback(errCode(err,'ERR_INVALID_CID')));}split.shift();if(split.length>0){path=split.join('/');}else{path=undefined;}}if(options.preload!==false){self._preload(cid);}pull(self._ipld.treeStream(cid,path,options),pull.collect(callback));}),_getRecursive:promisify((multihash,options,callback)=>{if(typeof options==='function'){callback=options;options={};}options=options||{};let cid;try{cid=new CID(multihash);}catch(err){return setImmediate(()=>callback(errCode(err,'ERR_INVALID_CID')));}self.dag.get(cid,'',options,(err,res)=>{if(err){return callback(err);}mapAsync(res.value.links,(link,cb)=>{self.dag._getRecursive(link.cid,options,cb);},(err,nodes)=>{if(err)return callback(err);callback(null,flattenDeep([res.value,nodes]));});});})};};},5546:function(module,__unusedexports,__webpack_require__){"use strict";const protobuf=__webpack_require__(817);module.exports=protobuf(`
message CircuitRelay {

  enum Status {
    SUCCESS                    = 100;
    HOP_SRC_ADDR_TOO_LONG      = 220;
    HOP_DST_ADDR_TOO_LONG      = 221;
    HOP_SRC_MULTIADDR_INVALID  = 250;
    HOP_DST_MULTIADDR_INVALID  = 251;
    HOP_NO_CONN_TO_DST         = 260;
    HOP_CANT_DIAL_DST          = 261;
    HOP_CANT_OPEN_DST_STREAM   = 262;
    HOP_CANT_SPEAK_RELAY       = 270;
    HOP_CANT_RELAY_TO_SELF     = 280;
    STOP_SRC_ADDR_TOO_LONG     = 320;
    STOP_DST_ADDR_TOO_LONG     = 321;
    STOP_SRC_MULTIADDR_INVALID = 350;
    STOP_DST_MULTIADDR_INVALID = 351;
    STOP_RELAY_REFUSED         = 390;
    MALFORMED_MESSAGE          = 400;
  }

  enum Type { // RPC identifier, either HOP, STOP or STATUS
    HOP = 1;
    STOP = 2;
    STATUS = 3;
    CAN_HOP = 4;
  }

  message Peer {
    required bytes id = 1;    // peer id
    repeated bytes addrs = 2; // peer's known addresses
  }

  optional Type type = 1;     // Type of the message

  optional Peer srcPeer = 2;  // srcPeer and dstPeer are used when Type is HOP or STATUS
  optional Peer dstPeer = 3;

  optional Status code = 4;   // Status code, used when Type is STATUS
}
`);},5548:function(__unusedmodule,exports){function isArray(arg){if(Array.isArray){return Array.isArray(arg);}return objectToString(arg)==='[object Array]';}exports.isArray=isArray;function isBoolean(arg){return typeof arg==='boolean';}exports.isBoolean=isBoolean;function isNull(arg){return arg===null;}exports.isNull=isNull;function isNullOrUndefined(arg){return arg==null;}exports.isNullOrUndefined=isNullOrUndefined;function isNumber(arg){return typeof arg==='number';}exports.isNumber=isNumber;function isString(arg){return typeof arg==='string';}exports.isString=isString;function isSymbol(arg){return typeof arg==='symbol';}exports.isSymbol=isSymbol;function isUndefined(arg){return arg===void 0;}exports.isUndefined=isUndefined;function isRegExp(re){return objectToString(re)==='[object RegExp]';}exports.isRegExp=isRegExp;function isObject(arg){return typeof arg==='object'&&arg!==null;}exports.isObject=isObject;function isDate(d){return objectToString(d)==='[object Date]';}exports.isDate=isDate;function isError(e){return objectToString(e)==='[object Error]'||e instanceof Error;}exports.isError=isError;function isFunction(arg){return typeof arg==='function';}exports.isFunction=isFunction;function isPrimitive(arg){return arg===null||typeof arg==='boolean'||typeof arg==='number'||typeof arg==='string'||typeof arg==='symbol'||typeof arg==='undefined';}exports.isPrimitive=isPrimitive;exports.isBuffer=Buffer.isBuffer;function objectToString(o){return Object.prototype.toString.call(o);}},5562:function(module,__unusedexports,__webpack_require__){"use strict";var Buffer=__webpack_require__(7572).Buffer;var MAX_SAFE_INTEGER=9007199254740991;function checkUInt53(n){if(n<0||n>MAX_SAFE_INTEGER||n%1!==0)throw new RangeError('value out of range');}function encode(number,buffer,offset){checkUInt53(number);if(!buffer)buffer=Buffer.allocUnsafe(encodingLength(number));if(!Buffer.isBuffer(buffer))throw new TypeError('buffer must be a Buffer instance');if(!offset)offset=0;if(number<0xfd){buffer.writeUInt8(number,offset);encode.bytes=1;}else if(number<=0xffff){buffer.writeUInt8(0xfd,offset);buffer.writeUInt16LE(number,offset+1);encode.bytes=3;}else if(number<=0xffffffff){buffer.writeUInt8(0xfe,offset);buffer.writeUInt32LE(number,offset+1);encode.bytes=5;}else{buffer.writeUInt8(0xff,offset);buffer.writeUInt32LE(number>>>0,offset+1);buffer.writeUInt32LE(number/0x100000000|0,offset+5);encode.bytes=9;}return buffer;}function decode(buffer,offset){if(!Buffer.isBuffer(buffer))throw new TypeError('buffer must be a Buffer instance');if(!offset)offset=0;var first=buffer.readUInt8(offset);if(first<0xfd){decode.bytes=1;return first;}else if(first===0xfd){decode.bytes=3;return buffer.readUInt16LE(offset+1);}else if(first===0xfe){decode.bytes=5;return buffer.readUInt32LE(offset+1);}else{decode.bytes=9;var lo=buffer.readUInt32LE(offset+1);var hi=buffer.readUInt32LE(offset+5);var number=hi*0x0100000000+lo;checkUInt53(number);return number;}}function encodingLength(number){checkUInt53(number);return number<0xfd?1:number<=0xffff?3:number<=0xffffffff?5:9;}module.exports={encode:encode,decode:decode,encodingLength:encodingLength};},5568:function(__unusedmodule,exports,__webpack_require__){"use strict";exports.resolver=__webpack_require__(7506);exports.util=__webpack_require__(497);},5570:function(module,__unusedexports,__webpack_require__){"use strict";const Buffer=__webpack_require__(7572).Buffer;module.exports=encode;const poolSize=10*1024;function encode(opts){opts=Object.assign({fixed:false},opts||{});const varint=__webpack_require__(2572);let pool=opts.fixed?null:createPool();let used=0;let ended=false;return read=>(end,cb)=>{if(end)ended=end;if(ended)return cb(ended);read(null,(end,data)=>{if(end)ended=end;if(ended)return cb(ended);if(!Buffer.isBuffer(data)){ended=new Error('data must be a buffer');return cb(ended);}let encodedLength;if(opts.fixed){encodedLength=Buffer.alloc(4);encodedLength.writeInt32BE(data.length,0);}else{varint.encode(data.length,pool,used);used+=varint.encode.bytes;encodedLength=pool.slice(used-varint.encode.bytes,used);if(pool.length-used<100){pool=createPool();used=0;}}cb(null,Buffer.concat([encodedLength,data]));});};}function createPool(){return Buffer.alloc(poolSize);}},5578:function(module,__unusedexports,__webpack_require__){var baseGetTag=__webpack_require__(2339),isObjectLike=__webpack_require__(2321);var symbolTag='[object Symbol]';function isSymbol(value){return typeof value=='symbol'||isObjectLike(value)&&baseGetTag(value)==symbolTag;}module.exports=isSymbol;},5584:function(module,__unusedexports,__webpack_require__){module=__webpack_require__.nmd(module);(function(module,exports){'use strict';function assert(val,msg){if(!val)throw new Error(msg||'Assertion failed');}function inherits(ctor,superCtor){ctor.super_=superCtor;var TempCtor=function(){};TempCtor.prototype=superCtor.prototype;ctor.prototype=new TempCtor();ctor.prototype.constructor=ctor;}function BN(number,base,endian){if(BN.isBN(number)){return number;}this.negative=0;this.words=null;this.length=0;this.red=null;if(number!==null){if(base==='le'||base==='be'){endian=base;base=10;}this._init(number||0,base||10,endian||'be');}}if(typeof module==='object'){module.exports=BN;}else{exports.BN=BN;}BN.BN=BN;BN.wordSize=26;var Buffer;try{Buffer=__webpack_require__(9423).Buffer;}catch(e){}BN.isBN=function isBN(num){if(num instanceof BN){return true;}return num!==null&&typeof num==='object'&&num.constructor.wordSize===BN.wordSize&&Array.isArray(num.words);};BN.max=function max(left,right){if(left.cmp(right)>0)return left;return right;};BN.min=function min(left,right){if(left.cmp(right)<0)return left;return right;};BN.prototype._init=function init(number,base,endian){if(typeof number==='number'){return this._initNumber(number,base,endian);}if(typeof number==='object'){return this._initArray(number,base,endian);}if(base==='hex'){base=16;}assert(base===(base|0)&&base>=2&&base<=36);number=number.toString().replace(/\s+/g,'');var start=0;if(number[0]==='-'){start++;}if(base===16){this._parseHex(number,start);}else{this._parseBase(number,base,start);}if(number[0]==='-'){this.negative=1;}this.strip();if(endian!=='le')return;this._initArray(this.toArray(),base,endian);};BN.prototype._initNumber=function _initNumber(number,base,endian){if(number<0){this.negative=1;number=-number;}if(number<0x4000000){this.words=[number&0x3ffffff];this.length=1;}else if(number<0x10000000000000){this.words=[number&0x3ffffff,number/0x4000000&0x3ffffff];this.length=2;}else{assert(number<0x20000000000000);this.words=[number&0x3ffffff,number/0x4000000&0x3ffffff,1];this.length=3;}if(endian!=='le')return;this._initArray(this.toArray(),base,endian);};BN.prototype._initArray=function _initArray(number,base,endian){assert(typeof number.length==='number');if(number.length<=0){this.words=[0];this.length=1;return this;}this.length=Math.ceil(number.length/3);this.words=new Array(this.length);for(var i=0;i<this.length;i++){this.words[i]=0;}var j,w;var off=0;if(endian==='be'){for(i=number.length-1,j=0;i>=0;i-=3){w=number[i]|number[i-1]<<8|number[i-2]<<16;this.words[j]|=w<<off&0x3ffffff;this.words[j+1]=w>>>26-off&0x3ffffff;off+=24;if(off>=26){off-=26;j++;}}}else if(endian==='le'){for(i=0,j=0;i<number.length;i+=3){w=number[i]|number[i+1]<<8|number[i+2]<<16;this.words[j]|=w<<off&0x3ffffff;this.words[j+1]=w>>>26-off&0x3ffffff;off+=24;if(off>=26){off-=26;j++;}}}return this.strip();};function parseHex(str,start,end){var r=0;var len=Math.min(str.length,end);for(var i=start;i<len;i++){var c=str.charCodeAt(i)-48;r<<=4;if(c>=49&&c<=54){r|=c-49+0xa;}else if(c>=17&&c<=22){r|=c-17+0xa;}else{r|=c&0xf;}}return r;}BN.prototype._parseHex=function _parseHex(number,start){this.length=Math.ceil((number.length-start)/6);this.words=new Array(this.length);for(var i=0;i<this.length;i++){this.words[i]=0;}var j,w;var off=0;for(i=number.length-6,j=0;i>=start;i-=6){w=parseHex(number,i,i+6);this.words[j]|=w<<off&0x3ffffff;this.words[j+1]|=w>>>26-off&0x3fffff;off+=24;if(off>=26){off-=26;j++;}}if(i+6!==start){w=parseHex(number,start,i+6);this.words[j]|=w<<off&0x3ffffff;this.words[j+1]|=w>>>26-off&0x3fffff;}this.strip();};function parseBase(str,start,end,mul){var r=0;var len=Math.min(str.length,end);for(var i=start;i<len;i++){var c=str.charCodeAt(i)-48;r*=mul;if(c>=49){r+=c-49+0xa;}else if(c>=17){r+=c-17+0xa;}else{r+=c;}}return r;}BN.prototype._parseBase=function _parseBase(number,base,start){this.words=[0];this.length=1;for(var limbLen=0,limbPow=1;limbPow<=0x3ffffff;limbPow*=base){limbLen++;}limbLen--;limbPow=limbPow/base|0;var total=number.length-start;var mod=total%limbLen;var end=Math.min(total,total-mod)+start;var word=0;for(var i=start;i<end;i+=limbLen){word=parseBase(number,i,i+limbLen,base);this.imuln(limbPow);if(this.words[0]+word<0x4000000){this.words[0]+=word;}else{this._iaddn(word);}}if(mod!==0){var pow=1;word=parseBase(number,i,number.length,base);for(i=0;i<mod;i++){pow*=base;}this.imuln(pow);if(this.words[0]+word<0x4000000){this.words[0]+=word;}else{this._iaddn(word);}}};BN.prototype.copy=function copy(dest){dest.words=new Array(this.length);for(var i=0;i<this.length;i++){dest.words[i]=this.words[i];}dest.length=this.length;dest.negative=this.negative;dest.red=this.red;};BN.prototype.clone=function clone(){var r=new BN(null);this.copy(r);return r;};BN.prototype._expand=function _expand(size){while(this.length<size){this.words[this.length++]=0;}return this;};BN.prototype.strip=function strip(){while(this.length>1&&this.words[this.length-1]===0){this.length--;}return this._normSign();};BN.prototype._normSign=function _normSign(){if(this.length===1&&this.words[0]===0){this.negative=0;}return this;};BN.prototype.inspect=function inspect(){return(this.red?'<BN-R: ':'<BN: ')+this.toString(16)+'>';};var zeros=['','0','00','000','0000','00000','000000','0000000','00000000','000000000','0000000000','00000000000','000000000000','0000000000000','00000000000000','000000000000000','0000000000000000','00000000000000000','000000000000000000','0000000000000000000','00000000000000000000','000000000000000000000','0000000000000000000000','00000000000000000000000','000000000000000000000000','0000000000000000000000000'];var groupSizes=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5];var groupBases=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,10000000,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64000000,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,24300000,28629151,33554432,39135393,45435424,52521875,60466176];BN.prototype.toString=function toString(base,padding){base=base||10;padding=padding|0||1;var out;if(base===16||base==='hex'){out='';var off=0;var carry=0;for(var i=0;i<this.length;i++){var w=this.words[i];var word=((w<<off|carry)&0xffffff).toString(16);carry=w>>>24-off&0xffffff;if(carry!==0||i!==this.length-1){out=zeros[6-word.length]+word+out;}else{out=word+out;}off+=2;if(off>=26){off-=26;i--;}}if(carry!==0){out=carry.toString(16)+out;}while(out.length%padding!==0){out='0'+out;}if(this.negative!==0){out='-'+out;}return out;}if(base===(base|0)&&base>=2&&base<=36){var groupSize=groupSizes[base];var groupBase=groupBases[base];out='';var c=this.clone();c.negative=0;while(!c.isZero()){var r=c.modn(groupBase).toString(base);c=c.idivn(groupBase);if(!c.isZero()){out=zeros[groupSize-r.length]+r+out;}else{out=r+out;}}if(this.isZero()){out='0'+out;}while(out.length%padding!==0){out='0'+out;}if(this.negative!==0){out='-'+out;}return out;}assert(false,'Base should be between 2 and 36');};BN.prototype.toNumber=function toNumber(){var ret=this.words[0];if(this.length===2){ret+=this.words[1]*0x4000000;}else if(this.length===3&&this.words[2]===0x01){ret+=0x10000000000000+this.words[1]*0x4000000;}else if(this.length>2){assert(false,'Number can only safely store up to 53 bits');}return this.negative!==0?-ret:ret;};BN.prototype.toJSON=function toJSON(){return this.toString(16);};BN.prototype.toBuffer=function toBuffer(endian,length){assert(typeof Buffer!=='undefined');return this.toArrayLike(Buffer,endian,length);};BN.prototype.toArray=function toArray(endian,length){return this.toArrayLike(Array,endian,length);};BN.prototype.toArrayLike=function toArrayLike(ArrayType,endian,length){var byteLength=this.byteLength();var reqLength=length||Math.max(1,byteLength);assert(byteLength<=reqLength,'byte array longer than desired length');assert(reqLength>0,'Requested array length <= 0');this.strip();var littleEndian=endian==='le';var res=new ArrayType(reqLength);var b,i;var q=this.clone();if(!littleEndian){for(i=0;i<reqLength-byteLength;i++){res[i]=0;}for(i=0;!q.isZero();i++){b=q.andln(0xff);q.iushrn(8);res[reqLength-i-1]=b;}}else{for(i=0;!q.isZero();i++){b=q.andln(0xff);q.iushrn(8);res[i]=b;}for(;i<reqLength;i++){res[i]=0;}}return res;};if(Math.clz32){BN.prototype._countBits=function _countBits(w){return 32-Math.clz32(w);};}else{BN.prototype._countBits=function _countBits(w){var t=w;var r=0;if(t>=0x1000){r+=13;t>>>=13;}if(t>=0x40){r+=7;t>>>=7;}if(t>=0x8){r+=4;t>>>=4;}if(t>=0x02){r+=2;t>>>=2;}return r+t;};}BN.prototype._zeroBits=function _zeroBits(w){if(w===0)return 26;var t=w;var r=0;if((t&0x1fff)===0){r+=13;t>>>=13;}if((t&0x7f)===0){r+=7;t>>>=7;}if((t&0xf)===0){r+=4;t>>>=4;}if((t&0x3)===0){r+=2;t>>>=2;}if((t&0x1)===0){r++;}return r;};BN.prototype.bitLength=function bitLength(){var w=this.words[this.length-1];var hi=this._countBits(w);return(this.length-1)*26+hi;};function toBitArray(num){var w=new Array(num.bitLength());for(var bit=0;bit<w.length;bit++){var off=bit/26|0;var wbit=bit%26;w[bit]=(num.words[off]&1<<wbit)>>>wbit;}return w;}BN.prototype.zeroBits=function zeroBits(){if(this.isZero())return 0;var r=0;for(var i=0;i<this.length;i++){var b=this._zeroBits(this.words[i]);r+=b;if(b!==26)break;}return r;};BN.prototype.byteLength=function byteLength(){return Math.ceil(this.bitLength()/8);};BN.prototype.toTwos=function toTwos(width){if(this.negative!==0){return this.abs().inotn(width).iaddn(1);}return this.clone();};BN.prototype.fromTwos=function fromTwos(width){if(this.testn(width-1)){return this.notn(width).iaddn(1).ineg();}return this.clone();};BN.prototype.isNeg=function isNeg(){return this.negative!==0;};BN.prototype.neg=function neg(){return this.clone().ineg();};BN.prototype.ineg=function ineg(){if(!this.isZero()){this.negative^=1;}return this;};BN.prototype.iuor=function iuor(num){while(this.length<num.length){this.words[this.length++]=0;}for(var i=0;i<num.length;i++){this.words[i]=this.words[i]|num.words[i];}return this.strip();};BN.prototype.ior=function ior(num){assert((this.negative|num.negative)===0);return this.iuor(num);};BN.prototype.or=function or(num){if(this.length>num.length)return this.clone().ior(num);return num.clone().ior(this);};BN.prototype.uor=function uor(num){if(this.length>num.length)return this.clone().iuor(num);return num.clone().iuor(this);};BN.prototype.iuand=function iuand(num){var b;if(this.length>num.length){b=num;}else{b=this;}for(var i=0;i<b.length;i++){this.words[i]=this.words[i]&num.words[i];}this.length=b.length;return this.strip();};BN.prototype.iand=function iand(num){assert((this.negative|num.negative)===0);return this.iuand(num);};BN.prototype.and=function and(num){if(this.length>num.length)return this.clone().iand(num);return num.clone().iand(this);};BN.prototype.uand=function uand(num){if(this.length>num.length)return this.clone().iuand(num);return num.clone().iuand(this);};BN.prototype.iuxor=function iuxor(num){var a;var b;if(this.length>num.length){a=this;b=num;}else{a=num;b=this;}for(var i=0;i<b.length;i++){this.words[i]=a.words[i]^b.words[i];}if(this!==a){for(;i<a.length;i++){this.words[i]=a.words[i];}}this.length=a.length;return this.strip();};BN.prototype.ixor=function ixor(num){assert((this.negative|num.negative)===0);return this.iuxor(num);};BN.prototype.xor=function xor(num){if(this.length>num.length)return this.clone().ixor(num);return num.clone().ixor(this);};BN.prototype.uxor=function uxor(num){if(this.length>num.length)return this.clone().iuxor(num);return num.clone().iuxor(this);};BN.prototype.inotn=function inotn(width){assert(typeof width==='number'&&width>=0);var bytesNeeded=Math.ceil(width/26)|0;var bitsLeft=width%26;this._expand(bytesNeeded);if(bitsLeft>0){bytesNeeded--;}for(var i=0;i<bytesNeeded;i++){this.words[i]=~this.words[i]&0x3ffffff;}if(bitsLeft>0){this.words[i]=~this.words[i]&0x3ffffff>>26-bitsLeft;}return this.strip();};BN.prototype.notn=function notn(width){return this.clone().inotn(width);};BN.prototype.setn=function setn(bit,val){assert(typeof bit==='number'&&bit>=0);var off=bit/26|0;var wbit=bit%26;this._expand(off+1);if(val){this.words[off]=this.words[off]|1<<wbit;}else{this.words[off]=this.words[off]&~(1<<wbit);}return this.strip();};BN.prototype.iadd=function iadd(num){var r;if(this.negative!==0&&num.negative===0){this.negative=0;r=this.isub(num);this.negative^=1;return this._normSign();}else if(this.negative===0&&num.negative!==0){num.negative=0;r=this.isub(num);num.negative=1;return r._normSign();}var a,b;if(this.length>num.length){a=this;b=num;}else{a=num;b=this;}var carry=0;for(var i=0;i<b.length;i++){r=(a.words[i]|0)+(b.words[i]|0)+carry;this.words[i]=r&0x3ffffff;carry=r>>>26;}for(;carry!==0&&i<a.length;i++){r=(a.words[i]|0)+carry;this.words[i]=r&0x3ffffff;carry=r>>>26;}this.length=a.length;if(carry!==0){this.words[this.length]=carry;this.length++;}else if(a!==this){for(;i<a.length;i++){this.words[i]=a.words[i];}}return this;};BN.prototype.add=function add(num){var res;if(num.negative!==0&&this.negative===0){num.negative=0;res=this.sub(num);num.negative^=1;return res;}else if(num.negative===0&&this.negative!==0){this.negative=0;res=num.sub(this);this.negative=1;return res;}if(this.length>num.length)return this.clone().iadd(num);return num.clone().iadd(this);};BN.prototype.isub=function isub(num){if(num.negative!==0){num.negative=0;var r=this.iadd(num);num.negative=1;return r._normSign();}else if(this.negative!==0){this.negative=0;this.iadd(num);this.negative=1;return this._normSign();}var cmp=this.cmp(num);if(cmp===0){this.negative=0;this.length=1;this.words[0]=0;return this;}var a,b;if(cmp>0){a=this;b=num;}else{a=num;b=this;}var carry=0;for(var i=0;i<b.length;i++){r=(a.words[i]|0)-(b.words[i]|0)+carry;carry=r>>26;this.words[i]=r&0x3ffffff;}for(;carry!==0&&i<a.length;i++){r=(a.words[i]|0)+carry;carry=r>>26;this.words[i]=r&0x3ffffff;}if(carry===0&&i<a.length&&a!==this){for(;i<a.length;i++){this.words[i]=a.words[i];}}this.length=Math.max(this.length,i);if(a!==this){this.negative=1;}return this.strip();};BN.prototype.sub=function sub(num){return this.clone().isub(num);};function smallMulTo(self,num,out){out.negative=num.negative^self.negative;var len=self.length+num.length|0;out.length=len;len=len-1|0;var a=self.words[0]|0;var b=num.words[0]|0;var r=a*b;var lo=r&0x3ffffff;var carry=r/0x4000000|0;out.words[0]=lo;for(var k=1;k<len;k++){var ncarry=carry>>>26;var rword=carry&0x3ffffff;var maxJ=Math.min(k,num.length-1);for(var j=Math.max(0,k-self.length+1);j<=maxJ;j++){var i=k-j|0;a=self.words[i]|0;b=num.words[j]|0;r=a*b+rword;ncarry+=r/0x4000000|0;rword=r&0x3ffffff;}out.words[k]=rword|0;carry=ncarry|0;}if(carry!==0){out.words[k]=carry|0;}else{out.length--;}return out.strip();}var comb10MulTo=function comb10MulTo(self,num,out){var a=self.words;var b=num.words;var o=out.words;var c=0;var lo;var mid;var hi;var a0=a[0]|0;var al0=a0&0x1fff;var ah0=a0>>>13;var a1=a[1]|0;var al1=a1&0x1fff;var ah1=a1>>>13;var a2=a[2]|0;var al2=a2&0x1fff;var ah2=a2>>>13;var a3=a[3]|0;var al3=a3&0x1fff;var ah3=a3>>>13;var a4=a[4]|0;var al4=a4&0x1fff;var ah4=a4>>>13;var a5=a[5]|0;var al5=a5&0x1fff;var ah5=a5>>>13;var a6=a[6]|0;var al6=a6&0x1fff;var ah6=a6>>>13;var a7=a[7]|0;var al7=a7&0x1fff;var ah7=a7>>>13;var a8=a[8]|0;var al8=a8&0x1fff;var ah8=a8>>>13;var a9=a[9]|0;var al9=a9&0x1fff;var ah9=a9>>>13;var b0=b[0]|0;var bl0=b0&0x1fff;var bh0=b0>>>13;var b1=b[1]|0;var bl1=b1&0x1fff;var bh1=b1>>>13;var b2=b[2]|0;var bl2=b2&0x1fff;var bh2=b2>>>13;var b3=b[3]|0;var bl3=b3&0x1fff;var bh3=b3>>>13;var b4=b[4]|0;var bl4=b4&0x1fff;var bh4=b4>>>13;var b5=b[5]|0;var bl5=b5&0x1fff;var bh5=b5>>>13;var b6=b[6]|0;var bl6=b6&0x1fff;var bh6=b6>>>13;var b7=b[7]|0;var bl7=b7&0x1fff;var bh7=b7>>>13;var b8=b[8]|0;var bl8=b8&0x1fff;var bh8=b8>>>13;var b9=b[9]|0;var bl9=b9&0x1fff;var bh9=b9>>>13;out.negative=self.negative^num.negative;out.length=19;lo=Math.imul(al0,bl0);mid=Math.imul(al0,bh0);mid=mid+Math.imul(ah0,bl0)|0;hi=Math.imul(ah0,bh0);var w0=(c+lo|0)+((mid&0x1fff)<<13)|0;c=(hi+(mid>>>13)|0)+(w0>>>26)|0;w0&=0x3ffffff;lo=Math.imul(al1,bl0);mid=Math.imul(al1,bh0);mid=mid+Math.imul(ah1,bl0)|0;hi=Math.imul(ah1,bh0);lo=lo+Math.imul(al0,bl1)|0;mid=mid+Math.imul(al0,bh1)|0;mid=mid+Math.imul(ah0,bl1)|0;hi=hi+Math.imul(ah0,bh1)|0;var w1=(c+lo|0)+((mid&0x1fff)<<13)|0;c=(hi+(mid>>>13)|0)+(w1>>>26)|0;w1&=0x3ffffff;lo=Math.imul(al2,bl0);mid=Math.imul(al2,bh0);mid=mid+Math.imul(ah2,bl0)|0;hi=Math.imul(ah2,bh0);lo=lo+Math.imul(al1,bl1)|0;mid=mid+Math.imul(al1,bh1)|0;mid=mid+Math.imul(ah1,bl1)|0;hi=hi+Math.imul(ah1,bh1)|0;lo=lo+Math.imul(al0,bl2)|0;mid=mid+Math.imul(al0,bh2)|0;mid=mid+Math.imul(ah0,bl2)|0;hi=hi+Math.imul(ah0,bh2)|0;var w2=(c+lo|0)+((mid&0x1fff)<<13)|0;c=(hi+(mid>>>13)|0)+(w2>>>26)|0;w2&=0x3ffffff;lo=Math.imul(al3,bl0);mid=Math.imul(al3,bh0);mid=mid+Math.imul(ah3,bl0)|0;hi=Math.imul(ah3,bh0);lo=lo+Math.imul(al2,bl1)|0;mid=mid+Math.imul(al2,bh1)|0;mid=mid+Math.imul(ah2,bl1)|0;hi=hi+Math.imul(ah2,bh1)|0;lo=lo+Math.imul(al1,bl2)|0;mid=mid+Math.imul(al1,bh2)|0;mid=mid+Math.imul(ah1,bl2)|0;hi=hi+Math.imul(ah1,bh2)|0;lo=lo+Math.imul(al0,bl3)|0;mid=mid+Math.imul(al0,bh3)|0;mid=mid+Math.imul(ah0,bl3)|0;hi=hi+Math.imul(ah0,bh3)|0;var w3=(c+lo|0)+((mid&0x1fff)<<13)|0;c=(hi+(mid>>>13)|0)+(w3>>>26)|0;w3&=0x3ffffff;lo=Math.imul(al4,bl0);mid=Math.imul(al4,bh0);mid=mid+Math.imul(ah4,bl0)|0;hi=Math.imul(ah4,bh0);lo=lo+Math.imul(al3,bl1)|0;mid=mid+Math.imul(al3,bh1)|0;mid=mid+Math.imul(ah3,bl1)|0;hi=hi+Math.imul(ah3,bh1)|0;lo=lo+Math.imul(al2,bl2)|0;mid=mid+Math.imul(al2,bh2)|0;mid=mid+Math.imul(ah2,bl2)|0;hi=hi+Math.imul(ah2,bh2)|0;lo=lo+Math.imul(al1,bl3)|0;mid=mid+Math.imul(al1,bh3)|0;mid=mid+Math.imul(ah1,bl3)|0;hi=hi+Math.imul(ah1,bh3)|0;lo=lo+Math.imul(al0,bl4)|0;mid=mid+Math.imul(al0,bh4)|0;mid=mid+Math.imul(ah0,bl4)|0;hi=hi+Math.imul(ah0,bh4)|0;var w4=(c+lo|0)+((mid&0x1fff)<<13)|0;c=(hi+(mid>>>13)|0)+(w4>>>26)|0;w4&=0x3ffffff;lo=Math.imul(al5,bl0);mid=Math.imul(al5,bh0);mid=mid+Math.imul(ah5,bl0)|0;hi=Math.imul(ah5,bh0);lo=lo+Math.imul(al4,bl1)|0;mid=mid+Math.imul(al4,bh1)|0;mid=mid+Math.imul(ah4,bl1)|0;hi=hi+Math.imul(ah4,bh1)|0;lo=lo+Math.imul(al3,bl2)|0;mid=mid+Math.imul(al3,bh2)|0;mid=mid+Math.imul(ah3,bl2)|0;hi=hi+Math.imul(ah3,bh2)|0;lo=lo+Math.imul(al2,bl3)|0;mid=mid+Math.imul(al2,bh3)|0;mid=mid+Math.imul(ah2,bl3)|0;hi=hi+Math.imul(ah2,bh3)|0;lo=lo+Math.imul(al1,bl4)|0;mid=mid+Math.imul(al1,bh4)|0;mid=mid+Math.imul(ah1,bl4)|0;hi=hi+Math.imul(ah1,bh4)|0;lo=lo+Math.imul(al0,bl5)|0;mid=mid+Math.imul(al0,bh5)|0;mid=mid+Math.imul(ah0,bl5)|0;hi=hi+Math.imul(ah0,bh5)|0;var w5=(c+lo|0)+((mid&0x1fff)<<13)|0;c=(hi+(mid>>>13)|0)+(w5>>>26)|0;w5&=0x3ffffff;lo=Math.imul(al6,bl0);mid=Math.imul(al6,bh0);mid=mid+Math.imul(ah6,bl0)|0;hi=Math.imul(ah6,bh0);lo=lo+Math.imul(al5,bl1)|0;mid=mid+Math.imul(al5,bh1)|0;mid=mid+Math.imul(ah5,bl1)|0;hi=hi+Math.imul(ah5,bh1)|0;lo=lo+Math.imul(al4,bl2)|0;mid=mid+Math.imul(al4,bh2)|0;mid=mid+Math.imul(ah4,bl2)|0;hi=hi+Math.imul(ah4,bh2)|0;lo=lo+Math.imul(al3,bl3)|0;mid=mid+Math.imul(al3,bh3)|0;mid=mid+Math.imul(ah3,bl3)|0;hi=hi+Math.imul(ah3,bh3)|0;lo=lo+Math.imul(al2,bl4)|0;mid=mid+Math.imul(al2,bh4)|0;mid=mid+Math.imul(ah2,bl4)|0;hi=hi+Math.imul(ah2,bh4)|0;lo=lo+Math.imul(al1,bl5)|0;mid=mid+Math.imul(al1,bh5)|0;mid=mid+Math.imul(ah1,bl5)|0;hi=hi+Math.imul(ah1,bh5)|0;lo=lo+Math.imul(al0,bl6)|0;mid=mid+Math.imul(al0,bh6)|0;mid=mid+Math.imul(ah0,bl6)|0;hi=hi+Math.imul(ah0,bh6)|0;var w6=(c+lo|0)+((mid&0x1fff)<<13)|0;c=(hi+(mid>>>13)|0)+(w6>>>26)|0;w6&=0x3ffffff;lo=Math.imul(al7,bl0);mid=Math.imul(al7,bh0);mid=mid+Math.imul(ah7,bl0)|0;hi=Math.imul(ah7,bh0);lo=lo+Math.imul(al6,bl1)|0;mid=mid+Math.imul(al6,bh1)|0;mid=mid+Math.imul(ah6,bl1)|0;hi=hi+Math.imul(ah6,bh1)|0;lo=lo+Math.imul(al5,bl2)|0;mid=mid+Math.imul(al5,bh2)|0;mid=mid+Math.imul(ah5,bl2)|0;hi=hi+Math.imul(ah5,bh2)|0;lo=lo+Math.imul(al4,bl3)|0;mid=mid+Math.imul(al4,bh3)|0;mid=mid+Math.imul(ah4,bl3)|0;hi=hi+Math.imul(ah4,bh3)|0;lo=lo+Math.imul(al3,bl4)|0;mid=mid+Math.imul(al3,bh4)|0;mid=mid+Math.imul(ah3,bl4)|0;hi=hi+Math.imul(ah3,bh4)|0;lo=lo+Math.imul(al2,bl5)|0;mid=mid+Math.imul(al2,bh5)|0;mid=mid+Math.imul(ah2,bl5)|0;hi=hi+Math.imul(ah2,bh5)|0;lo=lo+Math.imul(al1,bl6)|0;mid=mid+Math.imul(al1,bh6)|0;mid=mid+Math.imul(ah1,bl6)|0;hi=hi+Math.imul(ah1,bh6)|0;lo=lo+Math.imul(al0,bl7)|0;mid=mid+Math.imul(al0,bh7)|0;mid=mid+Math.imul(ah0,bl7)|0;hi=hi+Math.imul(ah0,bh7)|0;var w7=(c+lo|0)+((mid&0x1fff)<<13)|0;c=(hi+(mid>>>13)|0)+(w7>>>26)|0;w7&=0x3ffffff;lo=Math.imul(al8,bl0);mid=Math.imul(al8,bh0);mid=mid+Math.imul(ah8,bl0)|0;hi=Math.imul(ah8,bh0);lo=lo+Math.imul(al7,bl1)|0;mid=mid+Math.imul(al7,bh1)|0;mid=mid+Math.imul(ah7,bl1)|0;hi=hi+Math.imul(ah7,bh1)|0;lo=lo+Math.imul(al6,bl2)|0;mid=mid+Math.imul(al6,bh2)|0;mid=mid+Math.imul(ah6,bl2)|0;hi=hi+Math.imul(ah6,bh2)|0;lo=lo+Math.imul(al5,bl3)|0;mid=mid+Math.imul(al5,bh3)|0;mid=mid+Math.imul(ah5,bl3)|0;hi=hi+Math.imul(ah5,bh3)|0;lo=lo+Math.imul(al4,bl4)|0;mid=mid+Math.imul(al4,bh4)|0;mid=mid+Math.imul(ah4,bl4)|0;hi=hi+Math.imul(ah4,bh4)|0;lo=lo+Math.imul(al3,bl5)|0;mid=mid+Math.imul(al3,bh5)|0;mid=mid+Math.imul(ah3,bl5)|0;hi=hi+Math.imul(ah3,bh5)|0;lo=lo+Math.imul(al2,bl6)|0;mid=mid+Math.imul(al2,bh6)|0;mid=mid+Math.imul(ah2,bl6)|0;hi=hi+Math.imul(ah2,bh6)|0;lo=lo+Math.imul(al1,bl7)|0;mid=mid+Math.imul(al1,bh7)|0;mid=mid+Math.imul(ah1,bl7)|0;hi=hi+Math.imul(ah1,bh7)|0;lo=lo+Math.imul(al0,bl8)|0;mid=mid+Math.imul(al0,bh8)|0;mid=mid+Math.imul(ah0,bl8)|0;hi=hi+Math.imul(ah0,bh8)|0;var w8=(c+lo|0)+((mid&0x1fff)<<13)|0;c=(hi+(mid>>>13)|0)+(w8>>>26)|0;w8&=0x3ffffff;lo=Math.imul(al9,bl0);mid=Math.imul(al9,bh0);mid=mid+Math.imul(ah9,bl0)|0;hi=Math.imul(ah9,bh0);lo=lo+Math.imul(al8,bl1)|0;mid=mid+Math.imul(al8,bh1)|0;mid=mid+Math.imul(ah8,bl1)|0;hi=hi+Math.imul(ah8,bh1)|0;lo=lo+Math.imul(al7,bl2)|0;mid=mid+Math.imul(al7,bh2)|0;mid=mid+Math.imul(ah7,bl2)|0;hi=hi+Math.imul(ah7,bh2)|0;lo=lo+Math.imul(al6,bl3)|0;mid=mid+Math.imul(al6,bh3)|0;mid=mid+Math.imul(ah6,bl3)|0;hi=hi+Math.imul(ah6,bh3)|0;lo=lo+Math.imul(al5,bl4)|0;mid=mid+Math.imul(al5,bh4)|0;mid=mid+Math.imul(ah5,bl4)|0;hi=hi+Math.imul(ah5,bh4)|0;lo=lo+Math.imul(al4,bl5)|0;mid=mid+Math.imul(al4,bh5)|0;mid=mid+Math.imul(ah4,bl5)|0;hi=hi+Math.imul(ah4,bh5)|0;lo=lo+Math.imul(al3,bl6)|0;mid=mid+Math.imul(al3,bh6)|0;mid=mid+Math.imul(ah3,bl6)|0;hi=hi+Math.imul(ah3,bh6)|0;lo=lo+Math.imul(al2,bl7)|0;mid=mid+Math.imul(al2,bh7)|0;mid=mid+Math.imul(ah2,bl7)|0;hi=hi+Math.imul(ah2,bh7)|0;lo=lo+Math.imul(al1,bl8)|0;mid=mid+Math.imul(al1,bh8)|0;mid=mid+Math.imul(ah1,bl8)|0;hi=hi+Math.imul(ah1,bh8)|0;lo=lo+Math.imul(al0,bl9)|0;mid=mid+Math.imul(al0,bh9)|0;mid=mid+Math.imul(ah0,bl9)|0;hi=hi+Math.imul(ah0,bh9)|0;var w9=(c+lo|0)+((mid&0x1fff)<<13)|0;c=(hi+(mid>>>13)|0)+(w9>>>26)|0;w9&=0x3ffffff;lo=Math.imul(al9,bl1);mid=Math.imul(al9,bh1);mid=mid+Math.imul(ah9,bl1)|0;hi=Math.imul(ah9,bh1);lo=lo+Math.imul(al8,bl2)|0;mid=mid+Math.imul(al8,bh2)|0;mid=mid+Math.imul(ah8,bl2)|0;hi=hi+Math.imul(ah8,bh2)|0;lo=lo+Math.imul(al7,bl3)|0;mid=mid+Math.imul(al7,bh3)|0;mid=mid+Math.imul(ah7,bl3)|0;hi=hi+Math.imul(ah7,bh3)|0;lo=lo+Math.imul(al6,bl4)|0;mid=mid+Math.imul(al6,bh4)|0;mid=mid+Math.imul(ah6,bl4)|0;hi=hi+Math.imul(ah6,bh4)|0;lo=lo+Math.imul(al5,bl5)|0;mid=mid+Math.imul(al5,bh5)|0;mid=mid+Math.imul(ah5,bl5)|0;hi=hi+Math.imul(ah5,bh5)|0;lo=lo+Math.imul(al4,bl6)|0;mid=mid+Math.imul(al4,bh6)|0;mid=mid+Math.imul(ah4,bl6)|0;hi=hi+Math.imul(ah4,bh6)|0;lo=lo+Math.imul(al3,bl7)|0;mid=mid+Math.imul(al3,bh7)|0;mid=mid+Math.imul(ah3,bl7)|0;hi=hi+Math.imul(ah3,bh7)|0;lo=lo+Math.imul(al2,bl8)|0;mid=mid+Math.imul(al2,bh8)|0;mid=mid+Math.imul(ah2,bl8)|0;hi=hi+Math.imul(ah2,bh8)|0;lo=lo+Math.imul(al1,bl9)|0;mid=mid+Math.imul(al1,bh9)|0;mid=mid+Math.imul(ah1,bl9)|0;hi=hi+Math.imul(ah1,bh9)|0;var w10=(c+lo|0)+((mid&0x1fff)<<13)|0;c=(hi+(mid>>>13)|0)+(w10>>>26)|0;w10&=0x3ffffff;lo=Math.imul(al9,bl2);mid=Math.imul(al9,bh2);mid=mid+Math.imul(ah9,bl2)|0;hi=Math.imul(ah9,bh2);lo=lo+Math.imul(al8,bl3)|0;mid=mid+Math.imul(al8,bh3)|0;mid=mid+Math.imul(ah8,bl3)|0;hi=hi+Math.imul(ah8,bh3)|0;lo=lo+Math.imul(al7,bl4)|0;mid=mid+Math.imul(al7,bh4)|0;mid=mid+Math.imul(ah7,bl4)|0;hi=hi+Math.imul(ah7,bh4)|0;lo=lo+Math.imul(al6,bl5)|0;mid=mid+Math.imul(al6,bh5)|0;mid=mid+Math.imul(ah6,bl5)|0;hi=hi+Math.imul(ah6,bh5)|0;lo=lo+Math.imul(al5,bl6)|0;mid=mid+Math.imul(al5,bh6)|0;mid=mid+Math.imul(ah5,bl6)|0;hi=hi+Math.imul(ah5,bh6)|0;lo=lo+Math.imul(al4,bl7)|0;mid=mid+Math.imul(al4,bh7)|0;mid=mid+Math.imul(ah4,bl7)|0;hi=hi+Math.imul(ah4,bh7)|0;lo=lo+Math.imul(al3,bl8)|0;mid=mid+Math.imul(al3,bh8)|0;mid=mid+Math.imul(ah3,bl8)|0;hi=hi+Math.imul(ah3,bh8)|0;lo=lo+Math.imul(al2,bl9)|0;mid=mid+Math.imul(al2,bh9)|0;mid=mid+Math.imul(ah2,bl9)|0;hi=hi+Math.imul(ah2,bh9)|0;var w11=(c+lo|0)+((mid&0x1fff)<<13)|0;c=(hi+(mid>>>13)|0)+(w11>>>26)|0;w11&=0x3ffffff;lo=Math.imul(al9,bl3);mid=Math.imul(al9,bh3);mid=mid+Math.imul(ah9,bl3)|0;hi=Math.imul(ah9,bh3);lo=lo+Math.imul(al8,bl4)|0;mid=mid+Math.imul(al8,bh4)|0;mid=mid+Math.imul(ah8,bl4)|0;hi=hi+Math.imul(ah8,bh4)|0;lo=lo+Math.imul(al7,bl5)|0;mid=mid+Math.imul(al7,bh5)|0;mid=mid+Math.imul(ah7,bl5)|0;hi=hi+Math.imul(ah7,bh5)|0;lo=lo+Math.imul(al6,bl6)|0;mid=mid+Math.imul(al6,bh6)|0;mid=mid+Math.imul(ah6,bl6)|0;hi=hi+Math.imul(ah6,bh6)|0;lo=lo+Math.imul(al5,bl7)|0;mid=mid+Math.imul(al5,bh7)|0;mid=mid+Math.imul(ah5,bl7)|0;hi=hi+Math.imul(ah5,bh7)|0;lo=lo+Math.imul(al4,bl8)|0;mid=mid+Math.imul(al4,bh8)|0;mid=mid+Math.imul(ah4,bl8)|0;hi=hi+Math.imul(ah4,bh8)|0;lo=lo+Math.imul(al3,bl9)|0;mid=mid+Math.imul(al3,bh9)|0;mid=mid+Math.imul(ah3,bl9)|0;hi=hi+Math.imul(ah3,bh9)|0;var w12=(c+lo|0)+((mid&0x1fff)<<13)|0;c=(hi+(mid>>>13)|0)+(w12>>>26)|0;w12&=0x3ffffff;lo=Math.imul(al9,bl4);mid=Math.imul(al9,bh4);mid=mid+Math.imul(ah9,bl4)|0;hi=Math.imul(ah9,bh4);lo=lo+Math.imul(al8,bl5)|0;mid=mid+Math.imul(al8,bh5)|0;mid=mid+Math.imul(ah8,bl5)|0;hi=hi+Math.imul(ah8,bh5)|0;lo=lo+Math.imul(al7,bl6)|0;mid=mid+Math.imul(al7,bh6)|0;mid=mid+Math.imul(ah7,bl6)|0;hi=hi+Math.imul(ah7,bh6)|0;lo=lo+Math.imul(al6,bl7)|0;mid=mid+Math.imul(al6,bh7)|0;mid=mid+Math.imul(ah6,bl7)|0;hi=hi+Math.imul(ah6,bh7)|0;lo=lo+Math.imul(al5,bl8)|0;mid=mid+Math.imul(al5,bh8)|0;mid=mid+Math.imul(ah5,bl8)|0;hi=hi+Math.imul(ah5,bh8)|0;lo=lo+Math.imul(al4,bl9)|0;mid=mid+Math.imul(al4,bh9)|0;mid=mid+Math.imul(ah4,bl9)|0;hi=hi+Math.imul(ah4,bh9)|0;var w13=(c+lo|0)+((mid&0x1fff)<<13)|0;c=(hi+(mid>>>13)|0)+(w13>>>26)|0;w13&=0x3ffffff;lo=Math.imul(al9,bl5);mid=Math.imul(al9,bh5);mid=mid+Math.imul(ah9,bl5)|0;hi=Math.imul(ah9,bh5);lo=lo+Math.imul(al8,bl6)|0;mid=mid+Math.imul(al8,bh6)|0;mid=mid+Math.imul(ah8,bl6)|0;hi=hi+Math.imul(ah8,bh6)|0;lo=lo+Math.imul(al7,bl7)|0;mid=mid+Math.imul(al7,bh7)|0;mid=mid+Math.imul(ah7,bl7)|0;hi=hi+Math.imul(ah7,bh7)|0;lo=lo+Math.imul(al6,bl8)|0;mid=mid+Math.imul(al6,bh8)|0;mid=mid+Math.imul(ah6,bl8)|0;hi=hi+Math.imul(ah6,bh8)|0;lo=lo+Math.imul(al5,bl9)|0;mid=mid+Math.imul(al5,bh9)|0;mid=mid+Math.imul(ah5,bl9)|0;hi=hi+Math.imul(ah5,bh9)|0;var w14=(c+lo|0)+((mid&0x1fff)<<13)|0;c=(hi+(mid>>>13)|0)+(w14>>>26)|0;w14&=0x3ffffff;lo=Math.imul(al9,bl6);mid=Math.imul(al9,bh6);mid=mid+Math.imul(ah9,bl6)|0;hi=Math.imul(ah9,bh6);lo=lo+Math.imul(al8,bl7)|0;mid=mid+Math.imul(al8,bh7)|0;mid=mid+Math.imul(ah8,bl7)|0;hi=hi+Math.imul(ah8,bh7)|0;lo=lo+Math.imul(al7,bl8)|0;mid=mid+Math.imul(al7,bh8)|0;mid=mid+Math.imul(ah7,bl8)|0;hi=hi+Math.imul(ah7,bh8)|0;lo=lo+Math.imul(al6,bl9)|0;mid=mid+Math.imul(al6,bh9)|0;mid=mid+Math.imul(ah6,bl9)|0;hi=hi+Math.imul(ah6,bh9)|0;var w15=(c+lo|0)+((mid&0x1fff)<<13)|0;c=(hi+(mid>>>13)|0)+(w15>>>26)|0;w15&=0x3ffffff;lo=Math.imul(al9,bl7);mid=Math.imul(al9,bh7);mid=mid+Math.imul(ah9,bl7)|0;hi=Math.imul(ah9,bh7);lo=lo+Math.imul(al8,bl8)|0;mid=mid+Math.imul(al8,bh8)|0;mid=mid+Math.imul(ah8,bl8)|0;hi=hi+Math.imul(ah8,bh8)|0;lo=lo+Math.imul(al7,bl9)|0;mid=mid+Math.imul(al7,bh9)|0;mid=mid+Math.imul(ah7,bl9)|0;hi=hi+Math.imul(ah7,bh9)|0;var w16=(c+lo|0)+((mid&0x1fff)<<13)|0;c=(hi+(mid>>>13)|0)+(w16>>>26)|0;w16&=0x3ffffff;lo=Math.imul(al9,bl8);mid=Math.imul(al9,bh8);mid=mid+Math.imul(ah9,bl8)|0;hi=Math.imul(ah9,bh8);lo=lo+Math.imul(al8,bl9)|0;mid=mid+Math.imul(al8,bh9)|0;mid=mid+Math.imul(ah8,bl9)|0;hi=hi+Math.imul(ah8,bh9)|0;var w17=(c+lo|0)+((mid&0x1fff)<<13)|0;c=(hi+(mid>>>13)|0)+(w17>>>26)|0;w17&=0x3ffffff;lo=Math.imul(al9,bl9);mid=Math.imul(al9,bh9);mid=mid+Math.imul(ah9,bl9)|0;hi=Math.imul(ah9,bh9);var w18=(c+lo|0)+((mid&0x1fff)<<13)|0;c=(hi+(mid>>>13)|0)+(w18>>>26)|0;w18&=0x3ffffff;o[0]=w0;o[1]=w1;o[2]=w2;o[3]=w3;o[4]=w4;o[5]=w5;o[6]=w6;o[7]=w7;o[8]=w8;o[9]=w9;o[10]=w10;o[11]=w11;o[12]=w12;o[13]=w13;o[14]=w14;o[15]=w15;o[16]=w16;o[17]=w17;o[18]=w18;if(c!==0){o[19]=c;out.length++;}return out;};if(!Math.imul){comb10MulTo=smallMulTo;}function bigMulTo(self,num,out){out.negative=num.negative^self.negative;out.length=self.length+num.length;var carry=0;var hncarry=0;for(var k=0;k<out.length-1;k++){var ncarry=hncarry;hncarry=0;var rword=carry&0x3ffffff;var maxJ=Math.min(k,num.length-1);for(var j=Math.max(0,k-self.length+1);j<=maxJ;j++){var i=k-j;var a=self.words[i]|0;var b=num.words[j]|0;var r=a*b;var lo=r&0x3ffffff;ncarry=ncarry+(r/0x4000000|0)|0;lo=lo+rword|0;rword=lo&0x3ffffff;ncarry=ncarry+(lo>>>26)|0;hncarry+=ncarry>>>26;ncarry&=0x3ffffff;}out.words[k]=rword;carry=ncarry;ncarry=hncarry;}if(carry!==0){out.words[k]=carry;}else{out.length--;}return out.strip();}function jumboMulTo(self,num,out){var fftm=new FFTM();return fftm.mulp(self,num,out);}BN.prototype.mulTo=function mulTo(num,out){var res;var len=this.length+num.length;if(this.length===10&&num.length===10){res=comb10MulTo(this,num,out);}else if(len<63){res=smallMulTo(this,num,out);}else if(len<1024){res=bigMulTo(this,num,out);}else{res=jumboMulTo(this,num,out);}return res;};function FFTM(x,y){this.x=x;this.y=y;}FFTM.prototype.makeRBT=function makeRBT(N){var t=new Array(N);var l=BN.prototype._countBits(N)-1;for(var i=0;i<N;i++){t[i]=this.revBin(i,l,N);}return t;};FFTM.prototype.revBin=function revBin(x,l,N){if(x===0||x===N-1)return x;var rb=0;for(var i=0;i<l;i++){rb|=(x&1)<<l-i-1;x>>=1;}return rb;};FFTM.prototype.permute=function permute(rbt,rws,iws,rtws,itws,N){for(var i=0;i<N;i++){rtws[i]=rws[rbt[i]];itws[i]=iws[rbt[i]];}};FFTM.prototype.transform=function transform(rws,iws,rtws,itws,N,rbt){this.permute(rbt,rws,iws,rtws,itws,N);for(var s=1;s<N;s<<=1){var l=s<<1;var rtwdf=Math.cos(2*Math.PI/l);var itwdf=Math.sin(2*Math.PI/l);for(var p=0;p<N;p+=l){var rtwdf_=rtwdf;var itwdf_=itwdf;for(var j=0;j<s;j++){var re=rtws[p+j];var ie=itws[p+j];var ro=rtws[p+j+s];var io=itws[p+j+s];var rx=rtwdf_*ro-itwdf_*io;io=rtwdf_*io+itwdf_*ro;ro=rx;rtws[p+j]=re+ro;itws[p+j]=ie+io;rtws[p+j+s]=re-ro;itws[p+j+s]=ie-io;if(j!==l){rx=rtwdf*rtwdf_-itwdf*itwdf_;itwdf_=rtwdf*itwdf_+itwdf*rtwdf_;rtwdf_=rx;}}}}};FFTM.prototype.guessLen13b=function guessLen13b(n,m){var N=Math.max(m,n)|1;var odd=N&1;var i=0;for(N=N/2|0;N;N=N>>>1){i++;}return 1<<i+1+odd;};FFTM.prototype.conjugate=function conjugate(rws,iws,N){if(N<=1)return;for(var i=0;i<N/2;i++){var t=rws[i];rws[i]=rws[N-i-1];rws[N-i-1]=t;t=iws[i];iws[i]=-iws[N-i-1];iws[N-i-1]=-t;}};FFTM.prototype.normalize13b=function normalize13b(ws,N){var carry=0;for(var i=0;i<N/2;i++){var w=Math.round(ws[2*i+1]/N)*0x2000+Math.round(ws[2*i]/N)+carry;ws[i]=w&0x3ffffff;if(w<0x4000000){carry=0;}else{carry=w/0x4000000|0;}}return ws;};FFTM.prototype.convert13b=function convert13b(ws,len,rws,N){var carry=0;for(var i=0;i<len;i++){carry=carry+(ws[i]|0);rws[2*i]=carry&0x1fff;carry=carry>>>13;rws[2*i+1]=carry&0x1fff;carry=carry>>>13;}for(i=2*len;i<N;++i){rws[i]=0;}assert(carry===0);assert((carry&~0x1fff)===0);};FFTM.prototype.stub=function stub(N){var ph=new Array(N);for(var i=0;i<N;i++){ph[i]=0;}return ph;};FFTM.prototype.mulp=function mulp(x,y,out){var N=2*this.guessLen13b(x.length,y.length);var rbt=this.makeRBT(N);var _=this.stub(N);var rws=new Array(N);var rwst=new Array(N);var iwst=new Array(N);var nrws=new Array(N);var nrwst=new Array(N);var niwst=new Array(N);var rmws=out.words;rmws.length=N;this.convert13b(x.words,x.length,rws,N);this.convert13b(y.words,y.length,nrws,N);this.transform(rws,_,rwst,iwst,N,rbt);this.transform(nrws,_,nrwst,niwst,N,rbt);for(var i=0;i<N;i++){var rx=rwst[i]*nrwst[i]-iwst[i]*niwst[i];iwst[i]=rwst[i]*niwst[i]+iwst[i]*nrwst[i];rwst[i]=rx;}this.conjugate(rwst,iwst,N);this.transform(rwst,iwst,rmws,_,N,rbt);this.conjugate(rmws,_,N);this.normalize13b(rmws,N);out.negative=x.negative^y.negative;out.length=x.length+y.length;return out.strip();};BN.prototype.mul=function mul(num){var out=new BN(null);out.words=new Array(this.length+num.length);return this.mulTo(num,out);};BN.prototype.mulf=function mulf(num){var out=new BN(null);out.words=new Array(this.length+num.length);return jumboMulTo(this,num,out);};BN.prototype.imul=function imul(num){return this.clone().mulTo(num,this);};BN.prototype.imuln=function imuln(num){assert(typeof num==='number');assert(num<0x4000000);var carry=0;for(var i=0;i<this.length;i++){var w=(this.words[i]|0)*num;var lo=(w&0x3ffffff)+(carry&0x3ffffff);carry>>=26;carry+=w/0x4000000|0;carry+=lo>>>26;this.words[i]=lo&0x3ffffff;}if(carry!==0){this.words[i]=carry;this.length++;}return this;};BN.prototype.muln=function muln(num){return this.clone().imuln(num);};BN.prototype.sqr=function sqr(){return this.mul(this);};BN.prototype.isqr=function isqr(){return this.imul(this.clone());};BN.prototype.pow=function pow(num){var w=toBitArray(num);if(w.length===0)return new BN(1);var res=this;for(var i=0;i<w.length;i++,res=res.sqr()){if(w[i]!==0)break;}if(++i<w.length){for(var q=res.sqr();i<w.length;i++,q=q.sqr()){if(w[i]===0)continue;res=res.mul(q);}}return res;};BN.prototype.iushln=function iushln(bits){assert(typeof bits==='number'&&bits>=0);var r=bits%26;var s=(bits-r)/26;var carryMask=0x3ffffff>>>26-r<<26-r;var i;if(r!==0){var carry=0;for(i=0;i<this.length;i++){var newCarry=this.words[i]&carryMask;var c=(this.words[i]|0)-newCarry<<r;this.words[i]=c|carry;carry=newCarry>>>26-r;}if(carry){this.words[i]=carry;this.length++;}}if(s!==0){for(i=this.length-1;i>=0;i--){this.words[i+s]=this.words[i];}for(i=0;i<s;i++){this.words[i]=0;}this.length+=s;}return this.strip();};BN.prototype.ishln=function ishln(bits){assert(this.negative===0);return this.iushln(bits);};BN.prototype.iushrn=function iushrn(bits,hint,extended){assert(typeof bits==='number'&&bits>=0);var h;if(hint){h=(hint-hint%26)/26;}else{h=0;}var r=bits%26;var s=Math.min((bits-r)/26,this.length);var mask=0x3ffffff^0x3ffffff>>>r<<r;var maskedWords=extended;h-=s;h=Math.max(0,h);if(maskedWords){for(var i=0;i<s;i++){maskedWords.words[i]=this.words[i];}maskedWords.length=s;}if(s===0){}else if(this.length>s){this.length-=s;for(i=0;i<this.length;i++){this.words[i]=this.words[i+s];}}else{this.words[0]=0;this.length=1;}var carry=0;for(i=this.length-1;i>=0&&(carry!==0||i>=h);i--){var word=this.words[i]|0;this.words[i]=carry<<26-r|word>>>r;carry=word&mask;}if(maskedWords&&carry!==0){maskedWords.words[maskedWords.length++]=carry;}if(this.length===0){this.words[0]=0;this.length=1;}return this.strip();};BN.prototype.ishrn=function ishrn(bits,hint,extended){assert(this.negative===0);return this.iushrn(bits,hint,extended);};BN.prototype.shln=function shln(bits){return this.clone().ishln(bits);};BN.prototype.ushln=function ushln(bits){return this.clone().iushln(bits);};BN.prototype.shrn=function shrn(bits){return this.clone().ishrn(bits);};BN.prototype.ushrn=function ushrn(bits){return this.clone().iushrn(bits);};BN.prototype.testn=function testn(bit){assert(typeof bit==='number'&&bit>=0);var r=bit%26;var s=(bit-r)/26;var q=1<<r;if(this.length<=s)return false;var w=this.words[s];return!!(w&q);};BN.prototype.imaskn=function imaskn(bits){assert(typeof bits==='number'&&bits>=0);var r=bits%26;var s=(bits-r)/26;assert(this.negative===0,'imaskn works only with positive numbers');if(this.length<=s){return this;}if(r!==0){s++;}this.length=Math.min(s,this.length);if(r!==0){var mask=0x3ffffff^0x3ffffff>>>r<<r;this.words[this.length-1]&=mask;}return this.strip();};BN.prototype.maskn=function maskn(bits){return this.clone().imaskn(bits);};BN.prototype.iaddn=function iaddn(num){assert(typeof num==='number');assert(num<0x4000000);if(num<0)return this.isubn(-num);if(this.negative!==0){if(this.length===1&&(this.words[0]|0)<num){this.words[0]=num-(this.words[0]|0);this.negative=0;return this;}this.negative=0;this.isubn(num);this.negative=1;return this;}return this._iaddn(num);};BN.prototype._iaddn=function _iaddn(num){this.words[0]+=num;for(var i=0;i<this.length&&this.words[i]>=0x4000000;i++){this.words[i]-=0x4000000;if(i===this.length-1){this.words[i+1]=1;}else{this.words[i+1]++;}}this.length=Math.max(this.length,i+1);return this;};BN.prototype.isubn=function isubn(num){assert(typeof num==='number');assert(num<0x4000000);if(num<0)return this.iaddn(-num);if(this.negative!==0){this.negative=0;this.iaddn(num);this.negative=1;return this;}this.words[0]-=num;if(this.length===1&&this.words[0]<0){this.words[0]=-this.words[0];this.negative=1;}else{for(var i=0;i<this.length&&this.words[i]<0;i++){this.words[i]+=0x4000000;this.words[i+1]-=1;}}return this.strip();};BN.prototype.addn=function addn(num){return this.clone().iaddn(num);};BN.prototype.subn=function subn(num){return this.clone().isubn(num);};BN.prototype.iabs=function iabs(){this.negative=0;return this;};BN.prototype.abs=function abs(){return this.clone().iabs();};BN.prototype._ishlnsubmul=function _ishlnsubmul(num,mul,shift){var len=num.length+shift;var i;this._expand(len);var w;var carry=0;for(i=0;i<num.length;i++){w=(this.words[i+shift]|0)+carry;var right=(num.words[i]|0)*mul;w-=right&0x3ffffff;carry=(w>>26)-(right/0x4000000|0);this.words[i+shift]=w&0x3ffffff;}for(;i<this.length-shift;i++){w=(this.words[i+shift]|0)+carry;carry=w>>26;this.words[i+shift]=w&0x3ffffff;}if(carry===0)return this.strip();assert(carry===-1);carry=0;for(i=0;i<this.length;i++){w=-(this.words[i]|0)+carry;carry=w>>26;this.words[i]=w&0x3ffffff;}this.negative=1;return this.strip();};BN.prototype._wordDiv=function _wordDiv(num,mode){var shift=this.length-num.length;var a=this.clone();var b=num;var bhi=b.words[b.length-1]|0;var bhiBits=this._countBits(bhi);shift=26-bhiBits;if(shift!==0){b=b.ushln(shift);a.iushln(shift);bhi=b.words[b.length-1]|0;}var m=a.length-b.length;var q;if(mode!=='mod'){q=new BN(null);q.length=m+1;q.words=new Array(q.length);for(var i=0;i<q.length;i++){q.words[i]=0;}}var diff=a.clone()._ishlnsubmul(b,1,m);if(diff.negative===0){a=diff;if(q){q.words[m]=1;}}for(var j=m-1;j>=0;j--){var qj=(a.words[b.length+j]|0)*0x4000000+(a.words[b.length+j-1]|0);qj=Math.min(qj/bhi|0,0x3ffffff);a._ishlnsubmul(b,qj,j);while(a.negative!==0){qj--;a.negative=0;a._ishlnsubmul(b,1,j);if(!a.isZero()){a.negative^=1;}}if(q){q.words[j]=qj;}}if(q){q.strip();}a.strip();if(mode!=='div'&&shift!==0){a.iushrn(shift);}return{div:q||null,mod:a};};BN.prototype.divmod=function divmod(num,mode,positive){assert(!num.isZero());if(this.isZero()){return{div:new BN(0),mod:new BN(0)};}var div,mod,res;if(this.negative!==0&&num.negative===0){res=this.neg().divmod(num,mode);if(mode!=='mod'){div=res.div.neg();}if(mode!=='div'){mod=res.mod.neg();if(positive&&mod.negative!==0){mod.iadd(num);}}return{div:div,mod:mod};}if(this.negative===0&&num.negative!==0){res=this.divmod(num.neg(),mode);if(mode!=='mod'){div=res.div.neg();}return{div:div,mod:res.mod};}if((this.negative&num.negative)!==0){res=this.neg().divmod(num.neg(),mode);if(mode!=='div'){mod=res.mod.neg();if(positive&&mod.negative!==0){mod.isub(num);}}return{div:res.div,mod:mod};}if(num.length>this.length||this.cmp(num)<0){return{div:new BN(0),mod:this};}if(num.length===1){if(mode==='div'){return{div:this.divn(num.words[0]),mod:null};}if(mode==='mod'){return{div:null,mod:new BN(this.modn(num.words[0]))};}return{div:this.divn(num.words[0]),mod:new BN(this.modn(num.words[0]))};}return this._wordDiv(num,mode);};BN.prototype.div=function div(num){return this.divmod(num,'div',false).div;};BN.prototype.mod=function mod(num){return this.divmod(num,'mod',false).mod;};BN.prototype.umod=function umod(num){return this.divmod(num,'mod',true).mod;};BN.prototype.divRound=function divRound(num){var dm=this.divmod(num);if(dm.mod.isZero())return dm.div;var mod=dm.div.negative!==0?dm.mod.isub(num):dm.mod;var half=num.ushrn(1);var r2=num.andln(1);var cmp=mod.cmp(half);if(cmp<0||r2===1&&cmp===0)return dm.div;return dm.div.negative!==0?dm.div.isubn(1):dm.div.iaddn(1);};BN.prototype.modn=function modn(num){assert(num<=0x3ffffff);var p=(1<<26)%num;var acc=0;for(var i=this.length-1;i>=0;i--){acc=(p*acc+(this.words[i]|0))%num;}return acc;};BN.prototype.idivn=function idivn(num){assert(num<=0x3ffffff);var carry=0;for(var i=this.length-1;i>=0;i--){var w=(this.words[i]|0)+carry*0x4000000;this.words[i]=w/num|0;carry=w%num;}return this.strip();};BN.prototype.divn=function divn(num){return this.clone().idivn(num);};BN.prototype.egcd=function egcd(p){assert(p.negative===0);assert(!p.isZero());var x=this;var y=p.clone();if(x.negative!==0){x=x.umod(p);}else{x=x.clone();}var A=new BN(1);var B=new BN(0);var C=new BN(0);var D=new BN(1);var g=0;while(x.isEven()&&y.isEven()){x.iushrn(1);y.iushrn(1);++g;}var yp=y.clone();var xp=x.clone();while(!x.isZero()){for(var i=0,im=1;(x.words[0]&im)===0&&i<26;++i,im<<=1);if(i>0){x.iushrn(i);while(i-->0){if(A.isOdd()||B.isOdd()){A.iadd(yp);B.isub(xp);}A.iushrn(1);B.iushrn(1);}}for(var j=0,jm=1;(y.words[0]&jm)===0&&j<26;++j,jm<<=1);if(j>0){y.iushrn(j);while(j-->0){if(C.isOdd()||D.isOdd()){C.iadd(yp);D.isub(xp);}C.iushrn(1);D.iushrn(1);}}if(x.cmp(y)>=0){x.isub(y);A.isub(C);B.isub(D);}else{y.isub(x);C.isub(A);D.isub(B);}}return{a:C,b:D,gcd:y.iushln(g)};};BN.prototype._invmp=function _invmp(p){assert(p.negative===0);assert(!p.isZero());var a=this;var b=p.clone();if(a.negative!==0){a=a.umod(p);}else{a=a.clone();}var x1=new BN(1);var x2=new BN(0);var delta=b.clone();while(a.cmpn(1)>0&&b.cmpn(1)>0){for(var i=0,im=1;(a.words[0]&im)===0&&i<26;++i,im<<=1);if(i>0){a.iushrn(i);while(i-->0){if(x1.isOdd()){x1.iadd(delta);}x1.iushrn(1);}}for(var j=0,jm=1;(b.words[0]&jm)===0&&j<26;++j,jm<<=1);if(j>0){b.iushrn(j);while(j-->0){if(x2.isOdd()){x2.iadd(delta);}x2.iushrn(1);}}if(a.cmp(b)>=0){a.isub(b);x1.isub(x2);}else{b.isub(a);x2.isub(x1);}}var res;if(a.cmpn(1)===0){res=x1;}else{res=x2;}if(res.cmpn(0)<0){res.iadd(p);}return res;};BN.prototype.gcd=function gcd(num){if(this.isZero())return num.abs();if(num.isZero())return this.abs();var a=this.clone();var b=num.clone();a.negative=0;b.negative=0;for(var shift=0;a.isEven()&&b.isEven();shift++){a.iushrn(1);b.iushrn(1);}do{while(a.isEven()){a.iushrn(1);}while(b.isEven()){b.iushrn(1);}var r=a.cmp(b);if(r<0){var t=a;a=b;b=t;}else if(r===0||b.cmpn(1)===0){break;}a.isub(b);}while(true);return b.iushln(shift);};BN.prototype.invm=function invm(num){return this.egcd(num).a.umod(num);};BN.prototype.isEven=function isEven(){return(this.words[0]&1)===0;};BN.prototype.isOdd=function isOdd(){return(this.words[0]&1)===1;};BN.prototype.andln=function andln(num){return this.words[0]&num;};BN.prototype.bincn=function bincn(bit){assert(typeof bit==='number');var r=bit%26;var s=(bit-r)/26;var q=1<<r;if(this.length<=s){this._expand(s+1);this.words[s]|=q;return this;}var carry=q;for(var i=s;carry!==0&&i<this.length;i++){var w=this.words[i]|0;w+=carry;carry=w>>>26;w&=0x3ffffff;this.words[i]=w;}if(carry!==0){this.words[i]=carry;this.length++;}return this;};BN.prototype.isZero=function isZero(){return this.length===1&&this.words[0]===0;};BN.prototype.cmpn=function cmpn(num){var negative=num<0;if(this.negative!==0&&!negative)return-1;if(this.negative===0&&negative)return 1;this.strip();var res;if(this.length>1){res=1;}else{if(negative){num=-num;}assert(num<=0x3ffffff,'Number is too big');var w=this.words[0]|0;res=w===num?0:w<num?-1:1;}if(this.negative!==0)return-res|0;return res;};BN.prototype.cmp=function cmp(num){if(this.negative!==0&&num.negative===0)return-1;if(this.negative===0&&num.negative!==0)return 1;var res=this.ucmp(num);if(this.negative!==0)return-res|0;return res;};BN.prototype.ucmp=function ucmp(num){if(this.length>num.length)return 1;if(this.length<num.length)return-1;var res=0;for(var i=this.length-1;i>=0;i--){var a=this.words[i]|0;var b=num.words[i]|0;if(a===b)continue;if(a<b){res=-1;}else if(a>b){res=1;}break;}return res;};BN.prototype.gtn=function gtn(num){return this.cmpn(num)===1;};BN.prototype.gt=function gt(num){return this.cmp(num)===1;};BN.prototype.gten=function gten(num){return this.cmpn(num)>=0;};BN.prototype.gte=function gte(num){return this.cmp(num)>=0;};BN.prototype.ltn=function ltn(num){return this.cmpn(num)===-1;};BN.prototype.lt=function lt(num){return this.cmp(num)===-1;};BN.prototype.lten=function lten(num){return this.cmpn(num)<=0;};BN.prototype.lte=function lte(num){return this.cmp(num)<=0;};BN.prototype.eqn=function eqn(num){return this.cmpn(num)===0;};BN.prototype.eq=function eq(num){return this.cmp(num)===0;};BN.red=function red(num){return new Red(num);};BN.prototype.toRed=function toRed(ctx){assert(!this.red,'Already a number in reduction context');assert(this.negative===0,'red works only with positives');return ctx.convertTo(this)._forceRed(ctx);};BN.prototype.fromRed=function fromRed(){assert(this.red,'fromRed works only with numbers in reduction context');return this.red.convertFrom(this);};BN.prototype._forceRed=function _forceRed(ctx){this.red=ctx;return this;};BN.prototype.forceRed=function forceRed(ctx){assert(!this.red,'Already a number in reduction context');return this._forceRed(ctx);};BN.prototype.redAdd=function redAdd(num){assert(this.red,'redAdd works only with red numbers');return this.red.add(this,num);};BN.prototype.redIAdd=function redIAdd(num){assert(this.red,'redIAdd works only with red numbers');return this.red.iadd(this,num);};BN.prototype.redSub=function redSub(num){assert(this.red,'redSub works only with red numbers');return this.red.sub(this,num);};BN.prototype.redISub=function redISub(num){assert(this.red,'redISub works only with red numbers');return this.red.isub(this,num);};BN.prototype.redShl=function redShl(num){assert(this.red,'redShl works only with red numbers');return this.red.shl(this,num);};BN.prototype.redMul=function redMul(num){assert(this.red,'redMul works only with red numbers');this.red._verify2(this,num);return this.red.mul(this,num);};BN.prototype.redIMul=function redIMul(num){assert(this.red,'redMul works only with red numbers');this.red._verify2(this,num);return this.red.imul(this,num);};BN.prototype.redSqr=function redSqr(){assert(this.red,'redSqr works only with red numbers');this.red._verify1(this);return this.red.sqr(this);};BN.prototype.redISqr=function redISqr(){assert(this.red,'redISqr works only with red numbers');this.red._verify1(this);return this.red.isqr(this);};BN.prototype.redSqrt=function redSqrt(){assert(this.red,'redSqrt works only with red numbers');this.red._verify1(this);return this.red.sqrt(this);};BN.prototype.redInvm=function redInvm(){assert(this.red,'redInvm works only with red numbers');this.red._verify1(this);return this.red.invm(this);};BN.prototype.redNeg=function redNeg(){assert(this.red,'redNeg works only with red numbers');this.red._verify1(this);return this.red.neg(this);};BN.prototype.redPow=function redPow(num){assert(this.red&&!num.red,'redPow(normalNum)');this.red._verify1(this);return this.red.pow(this,num);};var primes={k256:null,p224:null,p192:null,p25519:null};function MPrime(name,p){this.name=name;this.p=new BN(p,16);this.n=this.p.bitLength();this.k=new BN(1).iushln(this.n).isub(this.p);this.tmp=this._tmp();}MPrime.prototype._tmp=function _tmp(){var tmp=new BN(null);tmp.words=new Array(Math.ceil(this.n/13));return tmp;};MPrime.prototype.ireduce=function ireduce(num){var r=num;var rlen;do{this.split(r,this.tmp);r=this.imulK(r);r=r.iadd(this.tmp);rlen=r.bitLength();}while(rlen>this.n);var cmp=rlen<this.n?-1:r.ucmp(this.p);if(cmp===0){r.words[0]=0;r.length=1;}else if(cmp>0){r.isub(this.p);}else{r.strip();}return r;};MPrime.prototype.split=function split(input,out){input.iushrn(this.n,0,out);};MPrime.prototype.imulK=function imulK(num){return num.imul(this.k);};function K256(){MPrime.call(this,'k256','ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f');}inherits(K256,MPrime);K256.prototype.split=function split(input,output){var mask=0x3fffff;var outLen=Math.min(input.length,9);for(var i=0;i<outLen;i++){output.words[i]=input.words[i];}output.length=outLen;if(input.length<=9){input.words[0]=0;input.length=1;return;}var prev=input.words[9];output.words[output.length++]=prev&mask;for(i=10;i<input.length;i++){var next=input.words[i]|0;input.words[i-10]=(next&mask)<<4|prev>>>22;prev=next;}prev>>>=22;input.words[i-10]=prev;if(prev===0&&input.length>10){input.length-=10;}else{input.length-=9;}};K256.prototype.imulK=function imulK(num){num.words[num.length]=0;num.words[num.length+1]=0;num.length+=2;var lo=0;for(var i=0;i<num.length;i++){var w=num.words[i]|0;lo+=w*0x3d1;num.words[i]=lo&0x3ffffff;lo=w*0x40+(lo/0x4000000|0);}if(num.words[num.length-1]===0){num.length--;if(num.words[num.length-1]===0){num.length--;}}return num;};function P224(){MPrime.call(this,'p224','ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001');}inherits(P224,MPrime);function P192(){MPrime.call(this,'p192','ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff');}inherits(P192,MPrime);function P25519(){MPrime.call(this,'25519','7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed');}inherits(P25519,MPrime);P25519.prototype.imulK=function imulK(num){var carry=0;for(var i=0;i<num.length;i++){var hi=(num.words[i]|0)*0x13+carry;var lo=hi&0x3ffffff;hi>>>=26;num.words[i]=lo;carry=hi;}if(carry!==0){num.words[num.length++]=carry;}return num;};BN._prime=function prime(name){if(primes[name])return primes[name];var prime;if(name==='k256'){prime=new K256();}else if(name==='p224'){prime=new P224();}else if(name==='p192'){prime=new P192();}else if(name==='p25519'){prime=new P25519();}else{throw new Error('Unknown prime '+name);}primes[name]=prime;return prime;};function Red(m){if(typeof m==='string'){var prime=BN._prime(m);this.m=prime.p;this.prime=prime;}else{assert(m.gtn(1),'modulus must be greater than 1');this.m=m;this.prime=null;}}Red.prototype._verify1=function _verify1(a){assert(a.negative===0,'red works only with positives');assert(a.red,'red works only with red numbers');};Red.prototype._verify2=function _verify2(a,b){assert((a.negative|b.negative)===0,'red works only with positives');assert(a.red&&a.red===b.red,'red works only with red numbers');};Red.prototype.imod=function imod(a){if(this.prime)return this.prime.ireduce(a)._forceRed(this);return a.umod(this.m)._forceRed(this);};Red.prototype.neg=function neg(a){if(a.isZero()){return a.clone();}return this.m.sub(a)._forceRed(this);};Red.prototype.add=function add(a,b){this._verify2(a,b);var res=a.add(b);if(res.cmp(this.m)>=0){res.isub(this.m);}return res._forceRed(this);};Red.prototype.iadd=function iadd(a,b){this._verify2(a,b);var res=a.iadd(b);if(res.cmp(this.m)>=0){res.isub(this.m);}return res;};Red.prototype.sub=function sub(a,b){this._verify2(a,b);var res=a.sub(b);if(res.cmpn(0)<0){res.iadd(this.m);}return res._forceRed(this);};Red.prototype.isub=function isub(a,b){this._verify2(a,b);var res=a.isub(b);if(res.cmpn(0)<0){res.iadd(this.m);}return res;};Red.prototype.shl=function shl(a,num){this._verify1(a);return this.imod(a.ushln(num));};Red.prototype.imul=function imul(a,b){this._verify2(a,b);return this.imod(a.imul(b));};Red.prototype.mul=function mul(a,b){this._verify2(a,b);return this.imod(a.mul(b));};Red.prototype.isqr=function isqr(a){return this.imul(a,a.clone());};Red.prototype.sqr=function sqr(a){return this.mul(a,a);};Red.prototype.sqrt=function sqrt(a){if(a.isZero())return a.clone();var mod3=this.m.andln(3);assert(mod3%2===1);if(mod3===3){var pow=this.m.add(new BN(1)).iushrn(2);return this.pow(a,pow);}var q=this.m.subn(1);var s=0;while(!q.isZero()&&q.andln(1)===0){s++;q.iushrn(1);}assert(!q.isZero());var one=new BN(1).toRed(this);var nOne=one.redNeg();var lpow=this.m.subn(1).iushrn(1);var z=this.m.bitLength();z=new BN(2*z*z).toRed(this);while(this.pow(z,lpow).cmp(nOne)!==0){z.redIAdd(nOne);}var c=this.pow(z,q);var r=this.pow(a,q.addn(1).iushrn(1));var t=this.pow(a,q);var m=s;while(t.cmp(one)!==0){var tmp=t;for(var i=0;tmp.cmp(one)!==0;i++){tmp=tmp.redSqr();}assert(i<m);var b=this.pow(c,new BN(1).iushln(m-i-1));r=r.redMul(b);c=b.redSqr();t=t.redMul(c);m=i;}return r;};Red.prototype.invm=function invm(a){var inv=a._invmp(this.m);if(inv.negative!==0){inv.negative=0;return this.imod(inv).redNeg();}else{return this.imod(inv);}};Red.prototype.pow=function pow(a,num){if(num.isZero())return new BN(1).toRed(this);if(num.cmpn(1)===0)return a.clone();var windowSize=4;var wnd=new Array(1<<windowSize);wnd[0]=new BN(1).toRed(this);wnd[1]=a;for(var i=2;i<wnd.length;i++){wnd[i]=this.mul(wnd[i-1],a);}var res=wnd[0];var current=0;var currentLen=0;var start=num.bitLength()%26;if(start===0){start=26;}for(i=num.length-1;i>=0;i--){var word=num.words[i];for(var j=start-1;j>=0;j--){var bit=word>>j&1;if(res!==wnd[0]){res=this.sqr(res);}if(bit===0&&current===0){currentLen=0;continue;}current<<=1;current|=bit;currentLen++;if(currentLen!==windowSize&&(i!==0||j!==0))continue;res=this.mul(res,wnd[current]);currentLen=0;current=0;}start=26;}return res;};Red.prototype.convertTo=function convertTo(num){var r=num.umod(this.m);return r===num?r.clone():r;};Red.prototype.convertFrom=function convertFrom(num){var res=num.clone();res.red=null;return res;};BN.mont=function mont(num){return new Mont(num);};function Mont(m){Red.call(this,m);this.shift=this.m.bitLength();if(this.shift%26!==0){this.shift+=26-this.shift%26;}this.r=new BN(1).iushln(this.shift);this.r2=this.imod(this.r.sqr());this.rinv=this.r._invmp(this.m);this.minv=this.rinv.mul(this.r).isubn(1).div(this.m);this.minv=this.minv.umod(this.r);this.minv=this.r.sub(this.minv);}inherits(Mont,Red);Mont.prototype.convertTo=function convertTo(num){return this.imod(num.ushln(this.shift));};Mont.prototype.convertFrom=function convertFrom(num){var r=this.imod(num.mul(this.rinv));r.red=null;return r;};Mont.prototype.imul=function imul(a,b){if(a.isZero()||b.isZero()){a.words[0]=0;a.length=1;return a;}var t=a.imul(b);var c=t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);var u=t.isub(c).iushrn(this.shift);var res=u;if(u.cmp(this.m)>=0){res=u.isub(this.m);}else if(u.cmpn(0)<0){res=u.iadd(this.m);}return res._forceRed(this);};Mont.prototype.mul=function mul(a,b){if(a.isZero()||b.isZero())return new BN(0)._forceRed(this);var t=a.mul(b);var c=t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);var u=t.isub(c).iushrn(this.shift);var res=u;if(u.cmp(this.m)>=0){res=u.isub(this.m);}else if(u.cmpn(0)<0){res=u.iadd(this.m);}return res._forceRed(this);};Mont.prototype.invm=function invm(a){var res=this.imod(a._invmp(this.m).mul(this.r2));return res._forceRed(this);};})(false||module,this);},5592:function(__unusedmodule,exports){"use strict";exports.toString=function(opcode){switch(opcode){case 0:return'QUERY';case 1:return'IQUERY';case 2:return'STATUS';case 3:return'OPCODE_3';case 4:return'NOTIFY';case 5:return'UPDATE';case 6:return'OPCODE_6';case 7:return'OPCODE_7';case 8:return'OPCODE_8';case 9:return'OPCODE_9';case 10:return'OPCODE_10';case 11:return'OPCODE_11';case 12:return'OPCODE_12';case 13:return'OPCODE_13';case 14:return'OPCODE_14';case 15:return'OPCODE_15';}return'OPCODE_'+opcode;};exports.toOpcode=function(code){switch(code.toUpperCase()){case'QUERY':return 0;case'IQUERY':return 1;case'STATUS':return 2;case'OPCODE_3':return 3;case'NOTIFY':return 4;case'UPDATE':return 5;case'OPCODE_6':return 6;case'OPCODE_7':return 7;case'OPCODE_8':return 8;case'OPCODE_9':return 9;case'OPCODE_10':return 10;case'OPCODE_11':return 11;case'OPCODE_12':return 12;case'OPCODE_13':return 13;case'OPCODE_14':return 14;case'OPCODE_15':return 15;}return 0;};},5593:function(module,__unusedexports,__webpack_require__){"use strict";const debug=__webpack_require__(746);const log=debug('jsipfs:state');log.error=debug('jsipfs:state:error');const fsm=__webpack_require__(7032);module.exports=self=>{const s=fsm('uninitialized',{uninitialized:{init:'initializing',initialized:'stopped'},initializing:{initialized:'stopped'},stopped:{start:'starting'},starting:{started:'running'},running:{stop:'stopping'},stopping:{stopped:'stopped'}});s.on('error',err=>log.error(err));s.on('done',()=>log('-> '+s._state));s.init=()=>{s('init');};s.initialized=()=>{s('initialized');};s.stop=()=>{s('stop');};s.stopped=()=>{s('stopped');};s.start=()=>{s('start');};s.started=()=>{s('started');};s.state=()=>s._state;return s;};},5595:function(module){module.exports=function(){var read,reader,cb,abort,stream;function delayed(_read){if(stream)return stream(_read);read=_read;return function(_abort,_cb){if(reader)reader(_abort,_cb);else abort=_abort,cb=_cb;};}delayed.resolve=function(_stream){if(stream)throw new Error('already resolved');stream=_stream;if(!stream)throw new Error('resolve *must* be passed a transform stream');if(read){reader=stream(read);if(cb)reader(abort,cb);}};return delayed;};},5600:function(module,__unusedexports,__webpack_require__){"use strict";const Key=__webpack_require__(759).Key;const sortKeys=__webpack_require__(1913);const specKey=new Key('datastore_spec');module.exports=store=>{return{exists(callback){store.has(specKey,callback);},get(callback){store.get(specKey,(err,buf)=>{if(err){return callback(err);}callback(null,JSON.parse(buf.toString()));});},set(spec,callback){store.put(specKey,Buffer.from(JSON.stringify(sortKeys(spec,{deep:true}))),callback);}};};},5610:function(module){var objectProto=Object.prototype;var nativeObjectToString=objectProto.toString;function objectToString(value){return nativeObjectToString.call(value);}module.exports=objectToString;},5619:function(module){"use strict";module.exports=function error(err){return function(abort,cb){cb(err);};};},5620:function(module,__unusedexports,__webpack_require__){"use strict";const EventEmitter=__webpack_require__(4859).EventEmitter;const pull=__webpack_require__(418);const empty=__webpack_require__(7086);const handshake=__webpack_require__(9346);const constants=__webpack_require__(4980);const util=__webpack_require__(574);const rnd=util.rnd;const debug=__webpack_require__(746);const log=debug('libp2p-ping');log.error=debug('libp2p-ping:error');const PROTOCOL=constants.PROTOCOL;const PING_LENGTH=constants.PING_LENGTH;class Ping extends EventEmitter{constructor(swarm,peer){super();this._stopped=false;this.peer=peer;this.swarm=swarm;}start(){log('dialing %s to %s',PROTOCOL,this.peer.id.toB58String());this.swarm.dial(this.peer,PROTOCOL,(err,conn)=>{if(err){return this.emit('error',err);}const stream=handshake({timeout:0});this.shake=stream.handshake;pull(stream,conn,stream);const self=this;function next(){let start=new Date();let buf=rnd(PING_LENGTH);self.shake.write(buf);self.shake.read(PING_LENGTH,(err,bufBack)=>{let end=new Date();if(err||!buf.equals(bufBack)){const err=new Error('Received wrong ping ack');return self.emit('error',err);}self.emit('ping',end-start);if(self._stopped){return;}next();});}next();});}stop(){if(this._stopped||!this.shake){return;}this._stopped=true;pull(empty(),this.shake.rest());}}module.exports=Ping;},5621:function(module,__unusedexports,__webpack_require__){"use strict";var BN=__webpack_require__(6122);var Point=__webpack_require__(9933);var Signature=__webpack_require__(406);var PublicKey=__webpack_require__(4721);var Random=__webpack_require__(3215);var Hash=__webpack_require__(2442);var BufferUtil=__webpack_require__(9657);var _=__webpack_require__(6064);var $=__webpack_require__(5107);var ECDSA=function ECDSA(obj){if(!(this instanceof ECDSA)){return new ECDSA(obj);}if(obj){this.set(obj);}};ECDSA.prototype.set=function(obj){this.hashbuf=obj.hashbuf||this.hashbuf;this.endian=obj.endian||this.endian;this.privkey=obj.privkey||this.privkey;this.pubkey=obj.pubkey||(this.privkey?this.privkey.publicKey:this.pubkey);this.sig=obj.sig||this.sig;this.k=obj.k||this.k;this.verified=obj.verified||this.verified;return this;};ECDSA.prototype.privkey2pubkey=function(){this.pubkey=this.privkey.toPublicKey();};ECDSA.prototype.calci=function(){for(var i=0;i<4;i++){this.sig.i=i;var Qprime;try{Qprime=this.toPublicKey();}catch(e){console.error(e);continue;}if(Qprime.point.eq(this.pubkey.point)){this.sig.compressed=this.pubkey.compressed;return this;}}this.sig.i=undefined;throw new Error('Unable to find valid recovery factor');};ECDSA.fromString=function(str){var obj=JSON.parse(str);return new ECDSA(obj);};ECDSA.prototype.randomK=function(){var N=Point.getN();var k;do{k=BN.fromBuffer(Random.getRandomBuffer(32));}while(!(k.lt(N)&&k.gt(BN.Zero)));this.k=k;return this;};ECDSA.prototype.deterministicK=function(badrs){if(_.isUndefined(badrs)){badrs=0;}var v=new Buffer(32);v.fill(0x01);var k=new Buffer(32);k.fill(0x00);var x=this.privkey.bn.toBuffer({size:32});var hashbuf=this.endian==='little'?BufferUtil.reverse(this.hashbuf):this.hashbuf;k=Hash.sha256hmac(Buffer.concat([v,new Buffer([0x00]),x,hashbuf]),k);v=Hash.sha256hmac(v,k);k=Hash.sha256hmac(Buffer.concat([v,new Buffer([0x01]),x,hashbuf]),k);v=Hash.sha256hmac(v,k);v=Hash.sha256hmac(v,k);var T=BN.fromBuffer(v);var N=Point.getN();for(var i=0;i<badrs||!(T.lt(N)&&T.gt(BN.Zero));i++){k=Hash.sha256hmac(Buffer.concat([v,new Buffer([0x00])]),k);v=Hash.sha256hmac(v,k);v=Hash.sha256hmac(v,k);T=BN.fromBuffer(v);}this.k=T;return this;};ECDSA.prototype.toPublicKey=function(){var i=this.sig.i;$.checkArgument(i===0||i===1||i===2||i===3,new Error('i must be equal to 0, 1, 2, or 3'));var e=BN.fromBuffer(this.hashbuf);var r=this.sig.r;var s=this.sig.s;var isYOdd=i&1;var isSecondKey=i>>1;var n=Point.getN();var G=Point.getG();var x=isSecondKey?r.add(n):r;var R=Point.fromX(isYOdd,x);var nR=R.mul(n);if(!nR.isInfinity()){throw new Error('nR is not a valid curve point');}var eNeg=e.neg().mod(n);var rInv=r.invm(n);var Q=R.mul(s).add(G.mul(eNeg)).mul(rInv);var pubkey=PublicKey.fromPoint(Q,this.sig.compressed);return pubkey;};ECDSA.prototype.sigError=function(){if(!BufferUtil.isBuffer(this.hashbuf)||this.hashbuf.length!==32){return'hashbuf must be a 32 byte buffer';}var r=this.sig.r;var s=this.sig.s;if(!(r.gt(BN.Zero)&&r.lt(Point.getN()))||!(s.gt(BN.Zero)&&s.lt(Point.getN()))){return'r and s not in range';}var e=BN.fromBuffer(this.hashbuf,this.endian?{endian:this.endian}:undefined);var n=Point.getN();var sinv=s.invm(n);var u1=sinv.mul(e).mod(n);var u2=sinv.mul(r).mod(n);var p=Point.getG().mulAdd(u1,this.pubkey.point,u2);if(p.isInfinity()){return'p is infinity';}if(p.getX().mod(n).cmp(r)!==0){return'Invalid signature';}else{return false;}};ECDSA.toLowS=function(s){if(s.gt(BN.fromBuffer(new Buffer('7FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF5D576E7357A4501DDFE92F46681B20A0','hex')))){s=Point.getN().sub(s);}return s;};ECDSA.prototype._findSignature=function(d,e){var N=Point.getN();var G=Point.getG();var badrs=0;var k,Q,r,s;do{if(!this.k||badrs>0){this.deterministicK(badrs);}badrs++;k=this.k;Q=G.mul(k);r=Q.x.mod(N);s=k.invm(N).mul(e.add(d.mul(r))).mod(N);}while(r.cmp(BN.Zero)<=0||s.cmp(BN.Zero)<=0);s=ECDSA.toLowS(s);return{s:s,r:r};};ECDSA.prototype.sign=function(){var hashbuf=this.hashbuf;var privkey=this.privkey;var d=privkey.bn;$.checkState(hashbuf&&privkey&&d,new Error('invalid parameters'));$.checkState(BufferUtil.isBuffer(hashbuf)&&hashbuf.length===32,new Error('hashbuf must be a 32 byte buffer'));var e=BN.fromBuffer(hashbuf,this.endian?{endian:this.endian}:undefined);var obj=this._findSignature(d,e);obj.compressed=this.pubkey.compressed;this.sig=new Signature(obj);return this;};ECDSA.prototype.signRandomK=function(){this.randomK();return this.sign();};ECDSA.prototype.toString=function(){var obj={};if(this.hashbuf){obj.hashbuf=this.hashbuf.toString('hex');}if(this.privkey){obj.privkey=this.privkey.toString();}if(this.pubkey){obj.pubkey=this.pubkey.toString();}if(this.sig){obj.sig=this.sig.toString();}if(this.k){obj.k=this.k.toString();}return JSON.stringify(obj);};ECDSA.prototype.verify=function(){if(!this.sigError()){this.verified=true;}else{this.verified=false;}return this;};ECDSA.sign=function(hashbuf,privkey,endian){return ECDSA().set({hashbuf:hashbuf,endian:endian,privkey:privkey}).sign().sig;};ECDSA.verify=function(hashbuf,sig,pubkey,endian){return ECDSA().set({hashbuf:hashbuf,endian:endian,sig:sig,pubkey:pubkey}).verify().verified;};module.exports=ECDSA;},5635:function(module,__unusedexports,__webpack_require__){"use strict";var pna=__webpack_require__(88);function destroy(err,cb){var _this=this;var readableDestroyed=this._readableState&&this._readableState.destroyed;var writableDestroyed=this._writableState&&this._writableState.destroyed;if(readableDestroyed||writableDestroyed){if(cb){cb(err);}else if(err&&(!this._writableState||!this._writableState.errorEmitted)){pna.nextTick(emitErrorNT,this,err);}return this;}if(this._readableState){this._readableState.destroyed=true;}if(this._writableState){this._writableState.destroyed=true;}this._destroy(err||null,function(err){if(!cb&&err){pna.nextTick(emitErrorNT,_this,err);if(_this._writableState){_this._writableState.errorEmitted=true;}}else if(cb){cb(err);}});return this;}function undestroy(){if(this._readableState){this._readableState.destroyed=false;this._readableState.reading=false;this._readableState.ended=false;this._readableState.endEmitted=false;}if(this._writableState){this._writableState.destroyed=false;this._writableState.ended=false;this._writableState.ending=false;this._writableState.finished=false;this._writableState.errorEmitted=false;}}function emitErrorNT(self,err){self.emit('error',err);}module.exports={destroy:destroy,undestroy:undestroy};},5643:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _eachOfLimit=__webpack_require__(6363);var _eachOfLimit2=_interopRequireDefault(_eachOfLimit);var _doLimit=__webpack_require__(9817);var _doLimit2=_interopRequireDefault(_doLimit);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}exports.default=(0,_doLimit2.default)(_eachOfLimit2.default,1);module.exports=exports['default'];},5645:function(module,__unusedexports,__webpack_require__){var forge=__webpack_require__(7938);__webpack_require__(1214);var _crypto=null;if(forge.util.isNodejs&&!forge.options.usePureJavaScript&&!process.versions['node-webkit']){_crypto=__webpack_require__(2984);}var prng=module.exports=forge.prng=forge.prng||{};prng.create=function(plugin){var ctx={plugin:plugin,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:''};var md=plugin.md;var pools=new Array(32);for(var i=0;i<32;++i){pools[i]=md.create();}ctx.pools=pools;ctx.pool=0;ctx.generate=function(count,callback){if(!callback){return ctx.generateSync(count);}var cipher=ctx.plugin.cipher;var increment=ctx.plugin.increment;var formatKey=ctx.plugin.formatKey;var formatSeed=ctx.plugin.formatSeed;var b=forge.util.createBuffer();ctx.key=null;generate();function generate(err){if(err){return callback(err);}if(b.length()>=count){return callback(null,b.getBytes(count));}if(ctx.generated>0xfffff){ctx.key=null;}if(ctx.key===null){return forge.util.nextTick(function(){_reseed(generate);});}var bytes=cipher(ctx.key,ctx.seed);ctx.generated+=bytes.length;b.putBytes(bytes);ctx.key=formatKey(cipher(ctx.key,increment(ctx.seed)));ctx.seed=formatSeed(cipher(ctx.key,ctx.seed));forge.util.setImmediate(generate);}};ctx.generateSync=function(count){var cipher=ctx.plugin.cipher;var increment=ctx.plugin.increment;var formatKey=ctx.plugin.formatKey;var formatSeed=ctx.plugin.formatSeed;ctx.key=null;var b=forge.util.createBuffer();while(b.length()<count){if(ctx.generated>0xfffff){ctx.key=null;}if(ctx.key===null){_reseedSync();}var bytes=cipher(ctx.key,ctx.seed);ctx.generated+=bytes.length;b.putBytes(bytes);ctx.key=formatKey(cipher(ctx.key,increment(ctx.seed)));ctx.seed=formatSeed(cipher(ctx.key,ctx.seed));}return b.getBytes(count);};function _reseed(callback){if(ctx.pools[0].messageLength>=32){_seed();return callback();}var needed=32-ctx.pools[0].messageLength<<5;ctx.seedFile(needed,function(err,bytes){if(err){return callback(err);}ctx.collect(bytes);_seed();callback();});}function _reseedSync(){if(ctx.pools[0].messageLength>=32){return _seed();}var needed=32-ctx.pools[0].messageLength<<5;ctx.collect(ctx.seedFileSync(needed));_seed();}function _seed(){ctx.reseeds=ctx.reseeds===0xffffffff?0:ctx.reseeds+1;var md=ctx.plugin.md.create();md.update(ctx.keyBytes);var _2powK=1;for(var k=0;k<32;++k){if(ctx.reseeds%_2powK===0){md.update(ctx.pools[k].digest().getBytes());ctx.pools[k].start();}_2powK=_2powK<<1;}ctx.keyBytes=md.digest().getBytes();md.start();md.update(ctx.keyBytes);var seedBytes=md.digest().getBytes();ctx.key=ctx.plugin.formatKey(ctx.keyBytes);ctx.seed=ctx.plugin.formatSeed(seedBytes);ctx.generated=0;}function defaultSeedFile(needed){var getRandomValues=null;if(typeof window!=='undefined'){var _crypto=window.crypto||window.msCrypto;if(_crypto&&_crypto.getRandomValues){getRandomValues=function(arr){return _crypto.getRandomValues(arr);};}}var b=forge.util.createBuffer();if(getRandomValues){while(b.length()<needed){var count=Math.max(1,Math.min(needed-b.length(),65536)/4);var entropy=new Uint32Array(Math.floor(count));try{getRandomValues(entropy);for(var i=0;i<entropy.length;++i){b.putInt32(entropy[i]);}}catch(e){if(!(typeof QuotaExceededError!=='undefined'&&e instanceof QuotaExceededError)){throw e;}}}}if(b.length()<needed){var hi,lo,next;var seed=Math.floor(Math.random()*0x010000);while(b.length()<needed){lo=16807*(seed&0xFFFF);hi=16807*(seed>>16);lo+=(hi&0x7FFF)<<16;lo+=hi>>15;lo=(lo&0x7FFFFFFF)+(lo>>31);seed=lo&0xFFFFFFFF;for(var i=0;i<3;++i){next=seed>>>(i<<3);next^=Math.floor(Math.random()*0x0100);b.putByte(String.fromCharCode(next&0xFF));}}}return b.getBytes(needed);}if(_crypto){ctx.seedFile=function(needed,callback){_crypto.randomBytes(needed,function(err,bytes){if(err){return callback(err);}callback(null,bytes.toString());});};ctx.seedFileSync=function(needed){return _crypto.randomBytes(needed).toString();};}else{ctx.seedFile=function(needed,callback){try{callback(null,defaultSeedFile(needed));}catch(e){callback(e);}};ctx.seedFileSync=defaultSeedFile;}ctx.collect=function(bytes){var count=bytes.length;for(var i=0;i<count;++i){ctx.pools[ctx.pool].update(bytes.substr(i,1));ctx.pool=ctx.pool===31?0:ctx.pool+1;}};ctx.collectInt=function(i,n){var bytes='';for(var x=0;x<n;x+=8){bytes+=String.fromCharCode(i>>x&0xFF);}ctx.collect(bytes);};ctx.registerWorker=function(worker){if(worker===self){ctx.seedFile=function(needed,callback){function listener(e){var data=e.data;if(data.forge&&data.forge.prng){self.removeEventListener('message',listener);callback(data.forge.prng.err,data.forge.prng.bytes);}}self.addEventListener('message',listener);self.postMessage({forge:{prng:{needed:needed}}});};}else{var listener=function(e){var data=e.data;if(data.forge&&data.forge.prng){ctx.seedFile(data.forge.prng.needed,function(err,bytes){worker.postMessage({forge:{prng:{err:err,bytes:bytes}}});});}};worker.addEventListener('message',listener);}};return ctx;};},5646:function(module,__unusedexports,__webpack_require__){var util=__webpack_require__(7552);function B2S_GET32(v,i){return v[i]^v[i+1]<<8^v[i+2]<<16^v[i+3]<<24;}function B2S_G(a,b,c,d,x,y){v[a]=v[a]+v[b]+x;v[d]=ROTR32(v[d]^v[a],16);v[c]=v[c]+v[d];v[b]=ROTR32(v[b]^v[c],12);v[a]=v[a]+v[b]+y;v[d]=ROTR32(v[d]^v[a],8);v[c]=v[c]+v[d];v[b]=ROTR32(v[b]^v[c],7);}function ROTR32(x,y){return x>>>y^x<<32-y;}var BLAKE2S_IV=new Uint32Array([0x6A09E667,0xBB67AE85,0x3C6EF372,0xA54FF53A,0x510E527F,0x9B05688C,0x1F83D9AB,0x5BE0CD19]);var SIGMA=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]);var v=new Uint32Array(16);var m=new Uint32Array(16);function blake2sCompress(ctx,last){var i=0;for(i=0;i<8;i++){v[i]=ctx.h[i];v[i+8]=BLAKE2S_IV[i];}v[12]^=ctx.t;v[13]^=ctx.t/0x100000000;if(last){v[14]=~v[14];}for(i=0;i<16;i++){m[i]=B2S_GET32(ctx.b,4*i);}for(i=0;i<10;i++){B2S_G(0,4,8,12,m[SIGMA[i*16+0]],m[SIGMA[i*16+1]]);B2S_G(1,5,9,13,m[SIGMA[i*16+2]],m[SIGMA[i*16+3]]);B2S_G(2,6,10,14,m[SIGMA[i*16+4]],m[SIGMA[i*16+5]]);B2S_G(3,7,11,15,m[SIGMA[i*16+6]],m[SIGMA[i*16+7]]);B2S_G(0,5,10,15,m[SIGMA[i*16+8]],m[SIGMA[i*16+9]]);B2S_G(1,6,11,12,m[SIGMA[i*16+10]],m[SIGMA[i*16+11]]);B2S_G(2,7,8,13,m[SIGMA[i*16+12]],m[SIGMA[i*16+13]]);B2S_G(3,4,9,14,m[SIGMA[i*16+14]],m[SIGMA[i*16+15]]);}for(i=0;i<8;i++){ctx.h[i]^=v[i]^v[i+8];}}function blake2sInit(outlen,key){if(!(outlen>0&&outlen<=32)){throw new Error('Incorrect output length, should be in [1, 32]');}var keylen=key?key.length:0;if(key&&!(keylen>0&&keylen<=32)){throw new Error('Incorrect key length, should be in [1, 32]');}var ctx={h:new Uint32Array(BLAKE2S_IV),b:new Uint32Array(64),c:0,t:0,outlen:outlen};ctx.h[0]^=0x01010000^keylen<<8^outlen;if(keylen>0){blake2sUpdate(ctx,key);ctx.c=64;}return ctx;}function blake2sUpdate(ctx,input){for(var i=0;i<input.length;i++){if(ctx.c===64){ctx.t+=ctx.c;blake2sCompress(ctx,false);ctx.c=0;}ctx.b[ctx.c++]=input[i];}}function blake2sFinal(ctx){ctx.t+=ctx.c;while(ctx.c<64){ctx.b[ctx.c++]=0;}blake2sCompress(ctx,true);var out=new Uint8Array(ctx.outlen);for(var i=0;i<ctx.outlen;i++){out[i]=ctx.h[i>>2]>>8*(i&3)&0xFF;}return out;}function blake2s(input,key,outlen){outlen=outlen||32;input=util.normalizeInput(input);var ctx=blake2sInit(outlen,key);blake2sUpdate(ctx,input);return blake2sFinal(ctx);}function blake2sHex(input,key,outlen){var output=blake2s(input,key,outlen);return util.toHex(output);}module.exports={blake2s:blake2s,blake2sHex:blake2sHex,blake2sInit:blake2sInit,blake2sUpdate:blake2sUpdate,blake2sFinal:blake2sFinal};},5664:function(module){module.exports={"name":"homestead","comment":"Homestead hardfork with protocol and network changes","eip":{"url":"https://eips.ethereum.org/EIPS/eip-606","status":"Final"},"gasConfig":{},"gasPrices":{},"vm":{},"pow":{},"casper":{},"sharding":{}};},5672:function(module,__unusedexports,__webpack_require__){var baseValues=__webpack_require__(1119),keys=__webpack_require__(8883);function values(object){return object==null?[]:baseValues(object,keys(object));}module.exports=values;},5674:function(module,__unusedexports,__webpack_require__){var fs=__webpack_require__(662);var path=__webpack_require__(5897);var os=__webpack_require__(4316);var runtimeRequire=true?eval("require"):undefined;var abi=process.versions.modules;var runtime=isElectron()?'electron':'node';var arch=os.arch();var platform=os.platform();module.exports=load;function load(dir){return runtimeRequire(load.path(dir));}load.path=function(dir){dir=path.resolve(dir||'.');try{var name=runtimeRequire(path.join(dir,'package.json')).name.toUpperCase().replace(/-/g,'_');if(process.env[name+'_PREBUILD'])dir=process.env[name+'_PREBUILD'];}catch(err){}var release=getFirst(path.join(dir,'build/Release'),matchBuild);if(release)return release;var debug=getFirst(path.join(dir,'build/Debug'),matchBuild);if(debug)return debug;var prebuild=getFirst(path.join(dir,'prebuilds/'+platform+'-'+arch),matchPrebuild);if(prebuild)return prebuild;var napiRuntime=getFirst(path.join(dir,'prebuilds/'+platform+'-'+arch),matchNapiRuntime);if(napiRuntime)return napiRuntime;var napi=getFirst(path.join(dir,'prebuilds/'+platform+'-'+arch),matchNapi);if(napi)return napi;throw new Error('No native build was found for runtime='+runtime+' abi='+abi+' platform='+platform+' arch='+arch);};function getFirst(dir,filter){try{var files=fs.readdirSync(dir).filter(filter);return files[0]&&path.join(dir,files[0]);}catch(err){return null;}}function matchNapiRuntime(name){return name===runtime+'-napi.node';}function matchNapi(name){return name==='node-napi.node';}function matchPrebuild(name){var parts=name.split('-');return parts[0]===runtime&&parts[1]===abi+'.node';}function matchBuild(name){return /\.node$/.test(name);}function isElectron(){if(process.versions&&process.versions.electron)return true;if(process.env.ELECTRON_RUN_AS_NODE)return true;return typeof window!=='undefined'&&window.process&&window.process.type==='renderer';}},5675:function(module,__unusedexports,__webpack_require__){var Buffer=__webpack_require__(7572).Buffer;module.exports=function base(ALPHABET){var ALPHABET_MAP={};var BASE=ALPHABET.length;var LEADER=ALPHABET.charAt(0);for(var z=0;z<ALPHABET.length;z++){var x=ALPHABET.charAt(z);if(ALPHABET_MAP[x]!==undefined)throw new TypeError(x+' is ambiguous');ALPHABET_MAP[x]=z;}function encode(source){if(source.length===0)return'';var digits=[0];for(var i=0;i<source.length;++i){for(var j=0,carry=source[i];j<digits.length;++j){carry+=digits[j]<<8;digits[j]=carry%BASE;carry=carry/BASE|0;}while(carry>0){digits.push(carry%BASE);carry=carry/BASE|0;}}var string='';for(var k=0;source[k]===0&&k<source.length-1;++k)string+=LEADER;for(var q=digits.length-1;q>=0;--q)string+=ALPHABET[digits[q]];return string;}function decodeUnsafe(string){if(typeof string!=='string')throw new TypeError('Expected String');if(string.length===0)return Buffer.allocUnsafe(0);var bytes=[0];for(var i=0;i<string.length;i++){var value=ALPHABET_MAP[string[i]];if(value===undefined)return;for(var j=0,carry=value;j<bytes.length;++j){carry+=bytes[j]*BASE;bytes[j]=carry&0xff;carry>>=8;}while(carry>0){bytes.push(carry&0xff);carry>>=8;}}for(var k=0;string[k]===LEADER&&k<string.length-1;++k){bytes.push(0);}return Buffer.from(bytes.reverse());}function decode(string){var buffer=decodeUnsafe(string);if(buffer)return buffer;throw new Error('Non-base'+BASE+' character');}return{encode:encode,decodeUnsafe:decodeUnsafe,decode:decode};};},5688:function(module,__unusedexports,__webpack_require__){var rng=__webpack_require__(3421);var bytesToUuid=__webpack_require__(8846);var _nodeId;var _clockseq;var _lastMSecs=0;var _lastNSecs=0;function v1(options,buf,offset){var i=buf&&offset||0;var b=buf||[];options=options||{};var node=options.node||_nodeId;var clockseq=options.clockseq!==undefined?options.clockseq:_clockseq;if(node==null||clockseq==null){var seedBytes=rng();if(node==null){node=_nodeId=[seedBytes[0]|0x01,seedBytes[1],seedBytes[2],seedBytes[3],seedBytes[4],seedBytes[5]];}if(clockseq==null){clockseq=_clockseq=(seedBytes[6]<<8|seedBytes[7])&0x3fff;}}var msecs=options.msecs!==undefined?options.msecs:new Date().getTime();var nsecs=options.nsecs!==undefined?options.nsecs:_lastNSecs+1;var dt=msecs-_lastMSecs+(nsecs-_lastNSecs)/10000;if(dt<0&&options.clockseq===undefined){clockseq=clockseq+1&0x3fff;}if((dt<0||msecs>_lastMSecs)&&options.nsecs===undefined){nsecs=0;}if(nsecs>=10000){throw new Error('uuid.v1(): Can\'t create more than 10M uuids/sec');}_lastMSecs=msecs;_lastNSecs=nsecs;_clockseq=clockseq;msecs+=12219292800000;var tl=((msecs&0xfffffff)*10000+nsecs)%0x100000000;b[i++]=tl>>>24&0xff;b[i++]=tl>>>16&0xff;b[i++]=tl>>>8&0xff;b[i++]=tl&0xff;var tmh=msecs/0x100000000*10000&0xfffffff;b[i++]=tmh>>>8&0xff;b[i++]=tmh&0xff;b[i++]=tmh>>>24&0xf|0x10;b[i++]=tmh>>>16&0xff;b[i++]=clockseq>>>8|0x80;b[i++]=clockseq&0xff;for(var n=0;n<6;++n){b[i+n]=node[n];}return buf?buf:bytesToUuid(b);}module.exports=v1;},5695:function(module,__unusedexports,__webpack_require__){const script=__webpack_require__(5099);module.exports={Block:__webpack_require__(2669),ECPair:__webpack_require__(7769),Transaction:__webpack_require__(9583),TransactionBuilder:__webpack_require__(3415),address:__webpack_require__(5236),bip32:__webpack_require__(109),crypto:__webpack_require__(5475),networks:__webpack_require__(1215),opcodes:__webpack_require__(9710),payments:__webpack_require__(8736),script:script};},5696:function(module,__unusedexports,__webpack_require__){"use strict";const createTrieResolver=__webpack_require__(4269);const ethStorageTrieResolver=createTrieResolver('eth-storage-trie');module.exports=ethStorageTrieResolver;},5703:function(__unusedmodule,exports){exports.Validation={isValidUTF8:function(buffer){return true;}};},5709:function(module,__unusedexports,__webpack_require__){"use strict";var pna=__webpack_require__(88);function destroy(err,cb){var _this=this;var readableDestroyed=this._readableState&&this._readableState.destroyed;var writableDestroyed=this._writableState&&this._writableState.destroyed;if(readableDestroyed||writableDestroyed){if(cb){cb(err);}else if(err&&(!this._writableState||!this._writableState.errorEmitted)){pna.nextTick(emitErrorNT,this,err);}return this;}if(this._readableState){this._readableState.destroyed=true;}if(this._writableState){this._writableState.destroyed=true;}this._destroy(err||null,function(err){if(!cb&&err){pna.nextTick(emitErrorNT,_this,err);if(_this._writableState){_this._writableState.errorEmitted=true;}}else if(cb){cb(err);}});return this;}function undestroy(){if(this._readableState){this._readableState.destroyed=false;this._readableState.reading=false;this._readableState.ended=false;this._readableState.endEmitted=false;}if(this._writableState){this._writableState.destroyed=false;this._writableState.ended=false;this._writableState.ending=false;this._writableState.finished=false;this._writableState.errorEmitted=false;}}function emitErrorNT(self,err){self.emit('error',err);}module.exports={destroy:destroy,undestroy:undestroy};},5716:function(module,__unusedexports,__webpack_require__){"use strict";const eachSeries=__webpack_require__(9891);const eachOfSeries=__webpack_require__(5643);const waterfall=__webpack_require__(4265);const createQueue=__webpack_require__(5978);const writable=__webpack_require__(8970);const pushable=__webpack_require__(5995);const DirFlat=__webpack_require__(2044);const flatToShard=__webpack_require__(3729);const Dir=__webpack_require__(145);const toPathComponents=__webpack_require__(1147);module.exports=createTreeBuilder;const defaultOptions={wrap:false,shardSplitThreshold:1000,onlyHash:false};function createTreeBuilder(ipld,_options){const options=Object.assign({},defaultOptions,_options);const queue=createQueue(consumeQueue,1);let stream=createStream();let tree=DirFlat({path:'',root:true,dir:true,dirty:false,flat:true},options);return{flush:flushRoot,stream:getStream};function consumeQueue(action,callback){const args=action.args.concat(function(){action.cb.apply(null,arguments);callback();});action.fn.apply(null,args);}function getStream(){return stream;}function createStream(){const sink=writable(write,null,1,ended);const source=pushable();return{sink:sink,source:source};function write(elems,callback){eachSeries(elems,(elem,callback)=>{queue.push({fn:addToTree,args:[elem],cb:err=>{if(err){callback(err);}else{source.push(elem);callback();}}});},callback);}function ended(err){flushRoot(flushErr=>{source.end(flushErr||err);});}}function addToTree(elem,callback){const pathElems=toPathComponents(elem.path||'');let parent=tree;const lastIndex=pathElems.length-1;let currentPath='';eachOfSeries(pathElems,(pathElem,index,callback)=>{if(currentPath){currentPath+='/';}currentPath+=pathElem;const last=index===lastIndex;parent.dirty=true;parent.multihash=null;parent.size=null;if(last){waterfall([callback=>parent.put(pathElem,elem,callback),callback=>flatToShard(null,parent,options.shardSplitThreshold,options,callback),(newRoot,callback)=>{tree=newRoot;callback();}],callback);}else{parent.get(pathElem,(err,treeNode)=>{if(err){callback(err);return;}let dir=treeNode;if(!dir||!(dir instanceof Dir)){dir=DirFlat({dir:true,parent:parent,parentKey:pathElem,path:currentPath,dirty:true,flat:true},options);}const parentDir=parent;parent=dir;parentDir.put(pathElem,dir,callback);});}},callback);}function flushRoot(callback){queue.push({fn:flush,args:['',tree],cb:(err,node)=>{if(err){callback(err);}else{callback(null,node&&node.multihash);}}});}function flush(path,tree,callback){if(tree.dir){if(tree.root&&tree.childCount()>1&&!options.wrap){callback(new Error('detected more than one root'));return;}tree.eachChildSeries((key,child,callback)=>{flush(path?path+'/'+key:key,child,callback);},err=>{if(err){callback(err);return;}flushDir(path,tree,callback);});}else{process.nextTick(callback);}}function flushDir(path,tree,callback){if(tree.root&&!options.wrap){tree.onlyChild((err,onlyChild)=>{if(err){callback(err);return;}callback(null,onlyChild);});return;}if(!tree.dirty){callback(null,tree.multihash);return;}tree.dirty=false;tree.flush(path,ipld,stream.source,(err,node)=>{if(err){callback(err);}else{callback(null,node);}});}}},5721:function(module,exports,__webpack_require__){exports=module.exports=createDebug.debug=createDebug['default']=createDebug;exports.coerce=coerce;exports.disable=disable;exports.enable=enable;exports.enabled=enabled;exports.humanize=__webpack_require__(8895);exports.instances=[];exports.names=[];exports.skips=[];exports.formatters={};function selectColor(namespace){var hash=0,i;for(i in namespace){hash=(hash<<5)-hash+namespace.charCodeAt(i);hash|=0;}return exports.colors[Math.abs(hash)%exports.colors.length];}function createDebug(namespace){var prevTime;function debug(){if(!debug.enabled)return;var self=debug;var curr=+new Date();var ms=curr-(prevTime||curr);self.diff=ms;self.prev=prevTime;self.curr=curr;prevTime=curr;var args=new Array(arguments.length);for(var i=0;i<args.length;i++){args[i]=arguments[i];}args[0]=exports.coerce(args[0]);if('string'!==typeof args[0]){args.unshift('%O');}var index=0;args[0]=args[0].replace(/%([a-zA-Z%])/g,function(match,format){if(match==='%%')return match;index++;var formatter=exports.formatters[format];if('function'===typeof formatter){var val=args[index];match=formatter.call(self,val);args.splice(index,1);index--;}return match;});exports.formatArgs.call(self,args);var logFn=debug.log||exports.log||console.log.bind(console);logFn.apply(self,args);}debug.namespace=namespace;debug.enabled=exports.enabled(namespace);debug.useColors=exports.useColors();debug.color=selectColor(namespace);debug.destroy=destroy;if('function'===typeof exports.init){exports.init(debug);}exports.instances.push(debug);return debug;}function destroy(){var index=exports.instances.indexOf(this);if(index!==-1){exports.instances.splice(index,1);return true;}else{return false;}}function enable(namespaces){exports.save(namespaces);exports.names=[];exports.skips=[];var i;var split=(typeof namespaces==='string'?namespaces:'').split(/[\s,]+/);var len=split.length;for(i=0;i<len;i++){if(!split[i])continue;namespaces=split[i].replace(/\*/g,'.*?');if(namespaces[0]==='-'){exports.skips.push(new RegExp('^'+namespaces.substr(1)+'$'));}else{exports.names.push(new RegExp('^'+namespaces+'$'));}}for(i=0;i<exports.instances.length;i++){var instance=exports.instances[i];instance.enabled=exports.enabled(instance.namespace);}}function disable(){exports.enable('');}function enabled(name){if(name[name.length-1]==='*'){return true;}var i,len;for(i=0,len=exports.skips.length;i<len;i++){if(exports.skips[i].test(name)){return false;}}for(i=0,len=exports.names.length;i<len;i++){if(exports.names[i].test(name)){return true;}}return false;}function coerce(val){if(val instanceof Error)return val.stack||val.message;return val;}},5726:function(module,__unusedexports,__webpack_require__){var constants=__webpack_require__(9380);var origCwd=process.cwd;var cwd=null;var platform=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){if(!cwd)cwd=origCwd.call(process);return cwd;};try{process.cwd();}catch(er){}var chdir=process.chdir;process.chdir=function(d){cwd=null;chdir.call(process,d);};module.exports=patch;function patch(fs){if(constants.hasOwnProperty('O_SYMLINK')&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)){patchLchmod(fs);}if(!fs.lutimes){patchLutimes(fs);}fs.chown=chownFix(fs.chown);fs.fchown=chownFix(fs.fchown);fs.lchown=chownFix(fs.lchown);fs.chmod=chmodFix(fs.chmod);fs.fchmod=chmodFix(fs.fchmod);fs.lchmod=chmodFix(fs.lchmod);fs.chownSync=chownFixSync(fs.chownSync);fs.fchownSync=chownFixSync(fs.fchownSync);fs.lchownSync=chownFixSync(fs.lchownSync);fs.chmodSync=chmodFixSync(fs.chmodSync);fs.fchmodSync=chmodFixSync(fs.fchmodSync);fs.lchmodSync=chmodFixSync(fs.lchmodSync);fs.stat=statFix(fs.stat);fs.fstat=statFix(fs.fstat);fs.lstat=statFix(fs.lstat);fs.statSync=statFixSync(fs.statSync);fs.fstatSync=statFixSync(fs.fstatSync);fs.lstatSync=statFixSync(fs.lstatSync);if(!fs.lchmod){fs.lchmod=function(path,mode,cb){if(cb)process.nextTick(cb);};fs.lchmodSync=function(){};}if(!fs.lchown){fs.lchown=function(path,uid,gid,cb){if(cb)process.nextTick(cb);};fs.lchownSync=function(){};}if(platform==="win32"){fs.rename=function(fs$rename){return function(from,to,cb){var start=Date.now();var backoff=0;fs$rename(from,to,function CB(er){if(er&&(er.code==="EACCES"||er.code==="EPERM")&&Date.now()-start<60000){setTimeout(function(){fs.stat(to,function(stater,st){if(stater&&stater.code==="ENOENT")fs$rename(from,to,CB);else cb(er);});},backoff);if(backoff<100)backoff+=10;return;}if(cb)cb(er);});};}(fs.rename);}fs.read=function(fs$read){return function(fd,buffer,offset,length,position,callback_){var callback;if(callback_&&typeof callback_==='function'){var eagCounter=0;callback=function(er,_,__){if(er&&er.code==='EAGAIN'&&eagCounter<10){eagCounter++;return fs$read.call(fs,fd,buffer,offset,length,position,callback);}callback_.apply(this,arguments);};}return fs$read.call(fs,fd,buffer,offset,length,position,callback);};}(fs.read);fs.readSync=function(fs$readSync){return function(fd,buffer,offset,length,position){var eagCounter=0;while(true){try{return fs$readSync.call(fs,fd,buffer,offset,length,position);}catch(er){if(er.code==='EAGAIN'&&eagCounter<10){eagCounter++;continue;}throw er;}}};}(fs.readSync);function patchLchmod(fs){fs.lchmod=function(path,mode,callback){fs.open(path,constants.O_WRONLY|constants.O_SYMLINK,mode,function(err,fd){if(err){if(callback)callback(err);return;}fs.fchmod(fd,mode,function(err){fs.close(fd,function(err2){if(callback)callback(err||err2);});});});};fs.lchmodSync=function(path,mode){var fd=fs.openSync(path,constants.O_WRONLY|constants.O_SYMLINK,mode);var threw=true;var ret;try{ret=fs.fchmodSync(fd,mode);threw=false;}finally{if(threw){try{fs.closeSync(fd);}catch(er){}}else{fs.closeSync(fd);}}return ret;};}function patchLutimes(fs){if(constants.hasOwnProperty("O_SYMLINK")){fs.lutimes=function(path,at,mt,cb){fs.open(path,constants.O_SYMLINK,function(er,fd){if(er){if(cb)cb(er);return;}fs.futimes(fd,at,mt,function(er){fs.close(fd,function(er2){if(cb)cb(er||er2);});});});};fs.lutimesSync=function(path,at,mt){var fd=fs.openSync(path,constants.O_SYMLINK);var ret;var threw=true;try{ret=fs.futimesSync(fd,at,mt);threw=false;}finally{if(threw){try{fs.closeSync(fd);}catch(er){}}else{fs.closeSync(fd);}}return ret;};}else{fs.lutimes=function(_a,_b,_c,cb){if(cb)process.nextTick(cb);};fs.lutimesSync=function(){};}}function chmodFix(orig){if(!orig)return orig;return function(target,mode,cb){return orig.call(fs,target,mode,function(er){if(chownErOk(er))er=null;if(cb)cb.apply(this,arguments);});};}function chmodFixSync(orig){if(!orig)return orig;return function(target,mode){try{return orig.call(fs,target,mode);}catch(er){if(!chownErOk(er))throw er;}};}function chownFix(orig){if(!orig)return orig;return function(target,uid,gid,cb){return orig.call(fs,target,uid,gid,function(er){if(chownErOk(er))er=null;if(cb)cb.apply(this,arguments);});};}function chownFixSync(orig){if(!orig)return orig;return function(target,uid,gid){try{return orig.call(fs,target,uid,gid);}catch(er){if(!chownErOk(er))throw er;}};}function statFix(orig){if(!orig)return orig;return function(target,cb){return orig.call(fs,target,function(er,stats){if(!stats)return cb.apply(this,arguments);if(stats.uid<0)stats.uid+=0x100000000;if(stats.gid<0)stats.gid+=0x100000000;if(cb)cb.apply(this,arguments);});};}function statFixSync(orig){if(!orig)return orig;return function(target){var stats=orig.call(fs,target);if(stats.uid<0)stats.uid+=0x100000000;if(stats.gid<0)stats.gid+=0x100000000;return stats;};}function chownErOk(er){if(!er)return true;if(er.code==="ENOSYS")return true;var nonroot=!process.getuid||process.getuid()!==0;if(nonroot){if(er.code==="EINVAL"||er.code==="EPERM")return true;}return false;}}},5765:function(module){module.exports={"name":"goerli","chainId":5,"networkId":5,"comment":"Cross-client PoA test network","url":"https://github.com/goerli/testnet","genesis":{"hash":"0xbf7e331f7f7c1dd2e05159666b3bf8bc7a8a3a9eb1d518969eab529dd9b88c1a","timestamp":"0x5c51a607","gasLimit":10485760,"difficulty":1,"nonce":"0x0000000000000000","extraData":"0x22466c6578692069732061207468696e6722202d204166726900000000000000e0a2bd4258d2768837baa26a28fe71dc079f84c70000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","stateRoot":"0x5d6cded585e73c4e322c30c2f782a336316f17dd85a4863b9d838d2d4b8b3008"},"hardforks":[{"name":"chainstart","block":0,"consensus":"poa","finality":null},{"name":"homestead","block":0,"consensus":"poa","finality":null},{"name":"dao","block":0,"consensus":"poa","finality":null},{"name":"tangerineWhistle","block":0,"consensus":"poa","finality":null},{"name":"spuriousDragon","block":0,"consensus":"poa","finality":null},{"name":"byzantium","block":0,"consensus":"poa","finality":null},{"name":"constantinople","block":0,"consensus":"poa","finality":null},{"name":"petersburg","block":0,"consensus":"poa","finality":null}],"bootstrapNodes":[{"ip":"51.141.78.53","port":30303,"id":"011f758e6552d105183b1761c5e2dea0111bc20fd5f6422bc7f91e0fabbec9a6595caf6239b37feb773dddd3f87240d99d859431891e4a642cf2a0a9e6cbb98a","location":"","comment":"Source: https://github.com/goerli/testnet/blob/master/bootnodes.txt"},{"ip":"13.93.54.137","port":30303,"id":"176b9417f511d05b6b2cf3e34b756cf0a7096b3094572a8f6ef4cdcb9d1f9d00683bf0f83347eebdf3b81c3521c2332086d9592802230bf528eaf606a1d9677b","location":"","comment":"Source: https://github.com/goerli/testnet/blob/master/bootnodes.txt"},{"ip":"94.237.54.114","port":30313,"id":"46add44b9f13965f7b9875ac6b85f016f341012d84f975377573800a863526f4da19ae2c620ec73d11591fa9510e992ecc03ad0751f53cc02f7c7ed6d55c7291","location":"","comment":"Source: https://github.com/goerli/testnet/blob/master/bootnodes.txt"},{"ip":"52.64.155.147","port":30303,"id":"c1f8b7c2ac4453271fa07d8e9ecf9a2e8285aa0bd0c07df0131f47153306b0736fd3db8924e7a9bf0bed6b1d8d4f87362a71b033dc7c64547728d953e43e59b2","location":"","comment":"Source: https://github.com/goerli/testnet/blob/master/bootnodes.txt"},{"ip":"213.186.16.82","port":30303,"id":"f4a9c6ee28586009fb5a96c8af13a58ed6d8315a9eee4772212c1d4d9cebe5a8b8a78ea4434f318726317d04a3f531a1ef0420cf9752605a562cfe858c46e263","location":"","comment":"Source: https://github.com/goerli/testnet/blob/master/bootnodes.txt"}]};},5776:function(__unusedmodule,exports){"use strict";exports.toString=function(type){switch(type){case 1:return'A';case 10:return'NULL';case 28:return'AAAA';case 18:return'AFSDB';case 42:return'APL';case 257:return'CAA';case 60:return'CDNSKEY';case 59:return'CDS';case 37:return'CERT';case 5:return'CNAME';case 49:return'DHCID';case 32769:return'DLV';case 39:return'DNAME';case 48:return'DNSKEY';case 43:return'DS';case 55:return'HIP';case 13:return'HINFO';case 45:return'IPSECKEY';case 25:return'KEY';case 36:return'KX';case 29:return'LOC';case 15:return'MX';case 35:return'NAPTR';case 2:return'NS';case 47:return'NSEC';case 50:return'NSEC3';case 51:return'NSEC3PARAM';case 12:return'PTR';case 46:return'RRSIG';case 17:return'RP';case 24:return'SIG';case 6:return'SOA';case 99:return'SPF';case 33:return'SRV';case 44:return'SSHFP';case 32768:return'TA';case 249:return'TKEY';case 52:return'TLSA';case 250:return'TSIG';case 16:return'TXT';case 252:return'AXFR';case 251:return'IXFR';case 41:return'OPT';case 255:return'ANY';}return'UNKNOWN_'+type;};exports.toType=function(name){switch(name.toUpperCase()){case'A':return 1;case'NULL':return 10;case'AAAA':return 28;case'AFSDB':return 18;case'APL':return 42;case'CAA':return 257;case'CDNSKEY':return 60;case'CDS':return 59;case'CERT':return 37;case'CNAME':return 5;case'DHCID':return 49;case'DLV':return 32769;case'DNAME':return 39;case'DNSKEY':return 48;case'DS':return 43;case'HIP':return 55;case'HINFO':return 13;case'IPSECKEY':return 45;case'KEY':return 25;case'KX':return 36;case'LOC':return 29;case'MX':return 15;case'NAPTR':return 35;case'NS':return 2;case'NSEC':return 47;case'NSEC3':return 50;case'NSEC3PARAM':return 51;case'PTR':return 12;case'RRSIG':return 46;case'RP':return 17;case'SIG':return 24;case'SOA':return 6;case'SPF':return 99;case'SRV':return 33;case'SSHFP':return 44;case'TA':return 32768;case'TKEY':return 249;case'TLSA':return 52;case'TSIG':return 250;case'TXT':return 16;case'AXFR':return 252;case'IXFR':return 251;case'OPT':return 41;case'ANY':return 255;case'*':return 255;}return 0;};},5794:function(module,__unusedexports,__webpack_require__){"use strict";const lp=__webpack_require__(8585);const pull=__webpack_require__(2885);const waterfall=__webpack_require__(4265);const each=__webpack_require__(4486);const nextTick=__webpack_require__(7173);const Message=__webpack_require__(9683);const CONSTANTS=__webpack_require__(2841);const logger=__webpack_require__(8047).logger;const BITSWAP100='/ipfs/bitswap/1.0.0';const BITSWAP110='/ipfs/bitswap/1.1.0';class Network{constructor(libp2p,bitswap,options,stats){this._log=logger(libp2p.peerInfo.id,'network');options=options||{};this.libp2p=libp2p;this.bitswap=bitswap;this.b100Only=options.b100Only||false;this._stats=stats;this._running=false;}start(callback){this._running=true;this._onPeerConnect=this._onPeerConnect.bind(this);this._onPeerDisconnect=this._onPeerDisconnect.bind(this);this._onConnection=this._onConnection.bind(this);this.libp2p.handle(BITSWAP100,this._onConnection);if(!this.b100Only){this.libp2p.handle(BITSWAP110,this._onConnection);}this.libp2p.on('peer:connect',this._onPeerConnect);this.libp2p.on('peer:disconnect',this._onPeerDisconnect);this.libp2p.peerBook.getAllArray().filter(peer=>peer.isConnected()).forEach(peer=>this._onPeerConnect(peer));nextTick(()=>callback());}stop(callback){this._running=false;this.libp2p.unhandle(BITSWAP100);if(!this.b100Only){this.libp2p.unhandle(BITSWAP110);}this.libp2p.removeListener('peer:connect',this._onPeerConnect);this.libp2p.removeListener('peer:disconnect',this._onPeerDisconnect);nextTick(()=>callback());}_onConnection(protocol,conn){if(!this._running){return;}this._log('incomming new bitswap connection: %s',protocol);pull(conn,lp.decode(),pull.asyncMap((data,cb)=>Message.deserialize(data,cb)),pull.asyncMap((msg,cb)=>{conn.getPeerInfo((err,peerInfo)=>{if(err){return cb(err);}this.bitswap._receiveMessage(peerInfo.id,msg,cb);});}),pull.onEnd(err=>{this._log('ending connection');if(err){this.bitswap._receiveError(err);}}));}_onPeerConnect(peerInfo){if(!this._running){return;}this.bitswap._onPeerConnected(peerInfo.id);}_onPeerDisconnect(peerInfo){if(!this._running){return;}this.bitswap._onPeerDisconnected(peerInfo.id);}findProviders(cid,maxProviders,callback){this.libp2p.contentRouting.findProviders(cid,{maxTimeout:CONSTANTS.providerRequestTimeout,maxNumProviders:maxProviders},callback);}findAndConnect(cid,callback){waterfall([cb=>this.findProviders(cid,CONSTANTS.maxProvidersPerRequest,cb),(provs,cb)=>{this._log('connecting to providers',provs.map(p=>p.id.toB58String()));each(provs,(p,cb)=>this.connectTo(p,cb));}],callback);}provide(cid,callback){this.libp2p.contentRouting.provide(cid,callback);}sendMessage(peer,msg,callback){if(!this._running){return callback(new Error(`network isn't running`));}const stringId=peer.toB58String()?peer.toB58String():peer.id.toB58String();this._log('sendMessage to %s',stringId,msg);this._dialPeer(peer,(err,conn,protocol)=>{if(err){return callback(err);}let serialized;switch(protocol){case BITSWAP100:serialized=msg.serializeToBitswap100();break;case BITSWAP110:serialized=msg.serializeToBitswap110();break;default:return callback(new Error('Unkown protocol: '+protocol));}writeMessage(conn,serialized,err=>{if(err){this._log.error(err);}});callback();this._updateSentStats(peer,msg.blocks);});}connectTo(peer,callback){if(!this._running){return callback(new Error(`network isn't running`));}this.libp2p.dial(peer,callback);}_dialPeer(peer,callback){this.libp2p.dialProtocol(peer,BITSWAP110,(err,conn)=>{if(err){this.libp2p.dialProtocol(peer,BITSWAP100,(err,conn)=>{if(err){return callback(err);}callback(null,conn,BITSWAP100);});return;}callback(null,conn,BITSWAP110);});}_updateSentStats(peer,blocks){const peerId=peer.toB58String();if(this._stats){blocks.forEach(block=>this._stats.push(peerId,'dataSent',block.data.length));this._stats.push(peerId,'blocksSent',blocks.size);}}}function writeMessage(conn,msg,callback){pull(pull.values([msg]),lp.encode(),conn,pull.onEnd(callback));}module.exports=Network;},5795:function(module){var s=1000;var m=s*60;var h=m*60;var d=h*24;var y=d*365.25;module.exports=function(val,options){options=options||{};var type=typeof val;if(type==='string'&&val.length>0){return parse(val);}else if(type==='number'&&isNaN(val)===false){return options.long?fmtLong(val):fmtShort(val);}throw new Error('val is not a non-empty string or a valid number. val='+JSON.stringify(val));};function parse(str){str=String(str);if(str.length>100){return;}var match=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(str);if(!match){return;}var n=parseFloat(match[1]);var type=(match[2]||'ms').toLowerCase();switch(type){case'years':case'year':case'yrs':case'yr':case'y':return n*y;case'days':case'day':case'd':return n*d;case'hours':case'hour':case'hrs':case'hr':case'h':return n*h;case'minutes':case'minute':case'mins':case'min':case'm':return n*m;case'seconds':case'second':case'secs':case'sec':case's':return n*s;case'milliseconds':case'millisecond':case'msecs':case'msec':case'ms':return n;default:return undefined;}}function fmtShort(ms){if(ms>=d){return Math.round(ms/d)+'d';}if(ms>=h){return Math.round(ms/h)+'h';}if(ms>=m){return Math.round(ms/m)+'m';}if(ms>=s){return Math.round(ms/s)+'s';}return ms+'ms';}function fmtLong(ms){return plural(ms,d,'day')||plural(ms,h,'hour')||plural(ms,m,'minute')||plural(ms,s,'second')||ms+' ms';}function plural(ms,n,name){if(ms<n){return;}if(ms<n*1.5){return Math.floor(ms/n)+' '+name;}return Math.ceil(ms/n)+' '+name+'s';}},5801:function(module){module.exports=shift;function shift(stream){var rs=stream._readableState;if(!rs)return null;return rs.objectMode?stream.read():stream.read(getStateLength(rs));}function getStateLength(state){if(state.buffer.length){if(state.buffer.head){return state.buffer.head.data.length;}return state.buffer[0].length;}return state.length;}},5803:function(module,exports,__webpack_require__){"use strict";const cbor=__webpack_require__(1635);const multihashing=__webpack_require__(9424);const CID=__webpack_require__(9339);const isCircular=__webpack_require__(99);const resolver=__webpack_require__(1834);const CID_CBOR_TAG=42;function tagCID(cid){if(typeof cid==='string'){cid=new CID(cid).buffer;}else if(CID.isCID(cid)){cid=cid.buffer;}return new cbor.Tagged(CID_CBOR_TAG,Buffer.concat([Buffer.from('00','hex'),cid]));}const decoder=new cbor.Decoder({tags:{[CID_CBOR_TAG]:val=>{val=val.slice(1);return new CID(val);}}});function replaceCIDbyTAG(dagNode){let circular;try{circular=isCircular(dagNode);}catch(e){circular=false;}if(circular){throw new Error('The object passed has circular references');}function transform(obj){if(!obj||Buffer.isBuffer(obj)||typeof obj==='string'){return obj;}if(Array.isArray(obj)){return obj.map(transform);}if(CID.isCID(obj)){return tagCID(obj);}const keys=Object.keys(obj);if(keys.length===1&&keys[0]==='/'){return tagCID(obj['/']);}else if(keys.length>0){const out={};keys.forEach(key=>{if(typeof obj[key]==='object'){out[key]=transform(obj[key]);}else{out[key]=obj[key];}});return out;}else{return obj;}}return transform(dagNode);}exports=module.exports;exports.serialize=(dagNode,callback)=>{let serialized;try{const dagNodeTagged=replaceCIDbyTAG(dagNode);serialized=cbor.encode(dagNodeTagged);}catch(err){return setImmediate(()=>callback(err));}setImmediate(()=>callback(null,serialized));};exports.deserialize=(data,callback)=>{let deserialized;try{deserialized=decoder.decodeFirst(data);}catch(err){return setImmediate(()=>callback(err));}setImmediate(()=>callback(null,deserialized));};exports.cid=(dagNode,options,callback)=>{if(typeof options==='function'){callback=options;options={};}options=options||{};const hashAlg=options.hashAlg||resolver.defaultHashAlg;const hashLen=options.hashLen;const version=typeof options.version==='undefined'?1:options.version;exports.serialize(dagNode,(err,serialized)=>{if(err)return callback(err);multihashing(serialized,hashAlg,hashLen,(err,mh)=>{if(err)return callback(err);callback(null,new CID(version,resolver.multicodec,mh));});});};},5811:function(module){function noop(){}module.exports=noop;},5817:function(module){module.exports={"name":"chainstart","comment":"Start of the Ethereum main chain","eip":{"url":"","status":""},"status":"","gasConfig":{"minGasLimit":{"v":5000,"d":"Minimum the gas limit may ever be"},"gasLimitBoundDivisor":{"v":1024,"d":"The bound divisor of the gas limit, used in update calculations"}},"gasPrices":{"tierStep":{"v":[0,2,3,5,8,10,20],"d":"Once per operation, for a selection of them"},"exp":{"v":10,"d":"Once per EXP instuction"},"expByte":{"v":10,"d":"Times ceil(log256(exponent)) for the EXP instruction"},"sha3":{"v":30,"d":"Once per SHA3 operation"},"sha3Word":{"v":6,"d":"Once per word of the SHA3 operation's data"},"sload":{"v":50,"d":"Once per SLOAD operation"},"sstoreSet":{"v":20000,"d":"Once per SSTORE operation if the zeroness changes from zero"},"sstoreReset":{"v":5000,"d":"Once per SSTORE operation if the zeroness does not change from zero"},"sstoreRefund":{"v":15000,"d":"Once per SSTORE operation if the zeroness changes to zero"},"jumpdest":{"v":1,"d":"Refunded gas, once per SSTORE operation if the zeroness changes to zero"},"log":{"v":375,"d":"Per LOG* operation"},"logData":{"v":8,"d":"Per byte in a LOG* operation's data"},"logTopic":{"v":375,"d":"Multiplied by the * of the LOG*, per LOG transaction. e.g. LOG0 incurs 0 * c_txLogTopicGas, LOG4 incurs 4 * c_txLogTopicGas"},"create":{"v":32000,"d":"Once per CREATE operation & contract-creation transaction"},"call":{"v":40,"d":"Once per CALL operation & message call transaction"},"callStipend":{"v":2300,"d":"Free gas given at beginning of call"},"callValueTransfer":{"v":9000,"d":"Paid for CALL when the value transfor is non-zero"},"callNewAccount":{"v":25000,"d":"Paid for CALL when the destination address didn't exist prior"},"selfdestructRefund":{"v":24000,"d":"Refunded following a selfdestruct operation"},"memory":{"v":3,"d":"Times the address of the (highest referenced byte in memory + 1). NOTE: referencing happens on read, write and in instructions such as RETURN and CALL"},"quadCoeffDiv":{"v":512,"d":"Divisor for the quadratic particle of the memory cost equation"},"createData":{"v":200,"d":""},"tx":{"v":21000,"d":"Per transaction. NOTE: Not payable on data of calls between transactions"},"txCreation":{"v":32000,"d":"The cost of creating a contract via tx"},"txDataZero":{"v":4,"d":"Per byte of data attached to a transaction that equals zero. NOTE: Not payable on data of calls between transactions"},"txDataNonZero":{"v":68,"d":"Per byte of data attached to a transaction that is not equal to zero. NOTE: Not payable on data of calls between transactions"},"copy":{"v":3,"d":"Multiplied by the number of 32-byte words that are copied (round up) for any *COPY operation and added"},"ecRecover":{"v":3000,"d":""},"sha256":{"v":60,"d":""},"sha256Word":{"v":12,"d":""},"ripemd160":{"v":600,"d":""},"ripemd160Word":{"v":120,"d":""},"identity":{"v":15,"d":""},"identityWord":{"v":3,"d":""}},"vm":{"stackLimit":{"v":1024,"d":"Maximum size of VM stack allowed"},"callCreateDepth":{"v":1024,"d":"Maximum depth of call/create stack"},"maxExtraDataSize":{"v":32,"d":"Maximum size extra data may be after Genesis"}},"pow":{"minimumDifficulty":{"v":131072,"d":"The minimum that the difficulty may ever be"},"difficultyBoundDivisor":{"v":2048,"d":"The bound divisor of the difficulty, used in the update calculations"},"durationLimit":{"v":13,"d":"The decision boundary on the blocktime duration used to determine whether difficulty should go up or not"},"epochDuration":{"v":30000,"d":"Duration between proof-of-work epochs"},"timebombPeriod":{"v":100000,"d":"Exponential difficulty timebomb period"},"minerReward":{"v":"5000000000000000000","d":"the amount a miner get rewarded for mining a block"}},"casper":{},"sharding":{}};},5823:function(module){module.exports=new Buffer('c5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470','hex');},5826:function(__unusedmodule,exports,__webpack_require__){var hash=__webpack_require__(3102);var utils=hash.utils;var assert=utils.assert;var rotr32=utils.rotr32;var rotl32=utils.rotl32;var sum32=utils.sum32;var sum32_4=utils.sum32_4;var sum32_5=utils.sum32_5;var rotr64_hi=utils.rotr64_hi;var rotr64_lo=utils.rotr64_lo;var shr64_hi=utils.shr64_hi;var shr64_lo=utils.shr64_lo;var sum64=utils.sum64;var sum64_hi=utils.sum64_hi;var sum64_lo=utils.sum64_lo;var sum64_4_hi=utils.sum64_4_hi;var sum64_4_lo=utils.sum64_4_lo;var sum64_5_hi=utils.sum64_5_hi;var sum64_5_lo=utils.sum64_5_lo;var BlockHash=hash.common.BlockHash;var sha256_K=[0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0x0fc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x06ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2];var sha512_K=[0x428a2f98,0xd728ae22,0x71374491,0x23ef65cd,0xb5c0fbcf,0xec4d3b2f,0xe9b5dba5,0x8189dbbc,0x3956c25b,0xf348b538,0x59f111f1,0xb605d019,0x923f82a4,0xaf194f9b,0xab1c5ed5,0xda6d8118,0xd807aa98,0xa3030242,0x12835b01,0x45706fbe,0x243185be,0x4ee4b28c,0x550c7dc3,0xd5ffb4e2,0x72be5d74,0xf27b896f,0x80deb1fe,0x3b1696b1,0x9bdc06a7,0x25c71235,0xc19bf174,0xcf692694,0xe49b69c1,0x9ef14ad2,0xefbe4786,0x384f25e3,0x0fc19dc6,0x8b8cd5b5,0x240ca1cc,0x77ac9c65,0x2de92c6f,0x592b0275,0x4a7484aa,0x6ea6e483,0x5cb0a9dc,0xbd41fbd4,0x76f988da,0x831153b5,0x983e5152,0xee66dfab,0xa831c66d,0x2db43210,0xb00327c8,0x98fb213f,0xbf597fc7,0xbeef0ee4,0xc6e00bf3,0x3da88fc2,0xd5a79147,0x930aa725,0x06ca6351,0xe003826f,0x14292967,0x0a0e6e70,0x27b70a85,0x46d22ffc,0x2e1b2138,0x5c26c926,0x4d2c6dfc,0x5ac42aed,0x53380d13,0x9d95b3df,0x650a7354,0x8baf63de,0x766a0abb,0x3c77b2a8,0x81c2c92e,0x47edaee6,0x92722c85,0x1482353b,0xa2bfe8a1,0x4cf10364,0xa81a664b,0xbc423001,0xc24b8b70,0xd0f89791,0xc76c51a3,0x0654be30,0xd192e819,0xd6ef5218,0xd6990624,0x5565a910,0xf40e3585,0x5771202a,0x106aa070,0x32bbd1b8,0x19a4c116,0xb8d2d0c8,0x1e376c08,0x5141ab53,0x2748774c,0xdf8eeb99,0x34b0bcb5,0xe19b48a8,0x391c0cb3,0xc5c95a63,0x4ed8aa4a,0xe3418acb,0x5b9cca4f,0x7763e373,0x682e6ff3,0xd6b2b8a3,0x748f82ee,0x5defb2fc,0x78a5636f,0x43172f60,0x84c87814,0xa1f0ab72,0x8cc70208,0x1a6439ec,0x90befffa,0x23631e28,0xa4506ceb,0xde82bde9,0xbef9a3f7,0xb2c67915,0xc67178f2,0xe372532b,0xca273ece,0xea26619c,0xd186b8c7,0x21c0c207,0xeada7dd6,0xcde0eb1e,0xf57d4f7f,0xee6ed178,0x06f067aa,0x72176fba,0x0a637dc5,0xa2c898a6,0x113f9804,0xbef90dae,0x1b710b35,0x131c471b,0x28db77f5,0x23047d84,0x32caab7b,0x40c72493,0x3c9ebe0a,0x15c9bebc,0x431d67c4,0x9c100d4c,0x4cc5d4be,0xcb3e42b6,0x597f299c,0xfc657e2a,0x5fcb6fab,0x3ad6faec,0x6c44198c,0x4a475817];var sha1_K=[0x5A827999,0x6ED9EBA1,0x8F1BBCDC,0xCA62C1D6];function SHA256(){if(!(this instanceof SHA256))return new SHA256();BlockHash.call(this);this.h=[0x6a09e667,0xbb67ae85,0x3c6ef372,0xa54ff53a,0x510e527f,0x9b05688c,0x1f83d9ab,0x5be0cd19];this.k=sha256_K;this.W=new Array(64);}utils.inherits(SHA256,BlockHash);exports.sha256=SHA256;SHA256.blockSize=512;SHA256.outSize=256;SHA256.hmacStrength=192;SHA256.padLength=64;SHA256.prototype._update=function _update(msg,start){var W=this.W;for(var i=0;i<16;i++)W[i]=msg[start+i];for(;i<W.length;i++)W[i]=sum32_4(g1_256(W[i-2]),W[i-7],g0_256(W[i-15]),W[i-16]);var a=this.h[0];var b=this.h[1];var c=this.h[2];var d=this.h[3];var e=this.h[4];var f=this.h[5];var g=this.h[6];var h=this.h[7];assert(this.k.length===W.length);for(var i=0;i<W.length;i++){var T1=sum32_5(h,s1_256(e),ch32(e,f,g),this.k[i],W[i]);var T2=sum32(s0_256(a),maj32(a,b,c));h=g;g=f;f=e;e=sum32(d,T1);d=c;c=b;b=a;a=sum32(T1,T2);}this.h[0]=sum32(this.h[0],a);this.h[1]=sum32(this.h[1],b);this.h[2]=sum32(this.h[2],c);this.h[3]=sum32(this.h[3],d);this.h[4]=sum32(this.h[4],e);this.h[5]=sum32(this.h[5],f);this.h[6]=sum32(this.h[6],g);this.h[7]=sum32(this.h[7],h);};SHA256.prototype._digest=function digest(enc){if(enc==='hex')return utils.toHex32(this.h,'big');else return utils.split32(this.h,'big');};function SHA224(){if(!(this instanceof SHA224))return new SHA224();SHA256.call(this);this.h=[0xc1059ed8,0x367cd507,0x3070dd17,0xf70e5939,0xffc00b31,0x68581511,0x64f98fa7,0xbefa4fa4];}utils.inherits(SHA224,SHA256);exports.sha224=SHA224;SHA224.blockSize=512;SHA224.outSize=224;SHA224.hmacStrength=192;SHA224.padLength=64;SHA224.prototype._digest=function digest(enc){if(enc==='hex')return utils.toHex32(this.h.slice(0,7),'big');else return utils.split32(this.h.slice(0,7),'big');};function SHA512(){if(!(this instanceof SHA512))return new SHA512();BlockHash.call(this);this.h=[0x6a09e667,0xf3bcc908,0xbb67ae85,0x84caa73b,0x3c6ef372,0xfe94f82b,0xa54ff53a,0x5f1d36f1,0x510e527f,0xade682d1,0x9b05688c,0x2b3e6c1f,0x1f83d9ab,0xfb41bd6b,0x5be0cd19,0x137e2179];this.k=sha512_K;this.W=new Array(160);}utils.inherits(SHA512,BlockHash);exports.sha512=SHA512;SHA512.blockSize=1024;SHA512.outSize=512;SHA512.hmacStrength=192;SHA512.padLength=128;SHA512.prototype._prepareBlock=function _prepareBlock(msg,start){var W=this.W;for(var i=0;i<32;i++)W[i]=msg[start+i];for(;i<W.length;i+=2){var c0_hi=g1_512_hi(W[i-4],W[i-3]);var c0_lo=g1_512_lo(W[i-4],W[i-3]);var c1_hi=W[i-14];var c1_lo=W[i-13];var c2_hi=g0_512_hi(W[i-30],W[i-29]);var c2_lo=g0_512_lo(W[i-30],W[i-29]);var c3_hi=W[i-32];var c3_lo=W[i-31];W[i]=sum64_4_hi(c0_hi,c0_lo,c1_hi,c1_lo,c2_hi,c2_lo,c3_hi,c3_lo);W[i+1]=sum64_4_lo(c0_hi,c0_lo,c1_hi,c1_lo,c2_hi,c2_lo,c3_hi,c3_lo);}};SHA512.prototype._update=function _update(msg,start){this._prepareBlock(msg,start);var W=this.W;var ah=this.h[0];var al=this.h[1];var bh=this.h[2];var bl=this.h[3];var ch=this.h[4];var cl=this.h[5];var dh=this.h[6];var dl=this.h[7];var eh=this.h[8];var el=this.h[9];var fh=this.h[10];var fl=this.h[11];var gh=this.h[12];var gl=this.h[13];var hh=this.h[14];var hl=this.h[15];assert(this.k.length===W.length);for(var i=0;i<W.length;i+=2){var c0_hi=hh;var c0_lo=hl;var c1_hi=s1_512_hi(eh,el);var c1_lo=s1_512_lo(eh,el);var c2_hi=ch64_hi(eh,el,fh,fl,gh,gl);var c2_lo=ch64_lo(eh,el,fh,fl,gh,gl);var c3_hi=this.k[i];var c3_lo=this.k[i+1];var c4_hi=W[i];var c4_lo=W[i+1];var T1_hi=sum64_5_hi(c0_hi,c0_lo,c1_hi,c1_lo,c2_hi,c2_lo,c3_hi,c3_lo,c4_hi,c4_lo);var T1_lo=sum64_5_lo(c0_hi,c0_lo,c1_hi,c1_lo,c2_hi,c2_lo,c3_hi,c3_lo,c4_hi,c4_lo);var c0_hi=s0_512_hi(ah,al);var c0_lo=s0_512_lo(ah,al);var c1_hi=maj64_hi(ah,al,bh,bl,ch,cl);var c1_lo=maj64_lo(ah,al,bh,bl,ch,cl);var T2_hi=sum64_hi(c0_hi,c0_lo,c1_hi,c1_lo);var T2_lo=sum64_lo(c0_hi,c0_lo,c1_hi,c1_lo);hh=gh;hl=gl;gh=fh;gl=fl;fh=eh;fl=el;eh=sum64_hi(dh,dl,T1_hi,T1_lo);el=sum64_lo(dl,dl,T1_hi,T1_lo);dh=ch;dl=cl;ch=bh;cl=bl;bh=ah;bl=al;ah=sum64_hi(T1_hi,T1_lo,T2_hi,T2_lo);al=sum64_lo(T1_hi,T1_lo,T2_hi,T2_lo);}sum64(this.h,0,ah,al);sum64(this.h,2,bh,bl);sum64(this.h,4,ch,cl);sum64(this.h,6,dh,dl);sum64(this.h,8,eh,el);sum64(this.h,10,fh,fl);sum64(this.h,12,gh,gl);sum64(this.h,14,hh,hl);};SHA512.prototype._digest=function digest(enc){if(enc==='hex')return utils.toHex32(this.h,'big');else return utils.split32(this.h,'big');};function SHA384(){if(!(this instanceof SHA384))return new SHA384();SHA512.call(this);this.h=[0xcbbb9d5d,0xc1059ed8,0x629a292a,0x367cd507,0x9159015a,0x3070dd17,0x152fecd8,0xf70e5939,0x67332667,0xffc00b31,0x8eb44a87,0x68581511,0xdb0c2e0d,0x64f98fa7,0x47b5481d,0xbefa4fa4];}utils.inherits(SHA384,SHA512);exports.sha384=SHA384;SHA384.blockSize=1024;SHA384.outSize=384;SHA384.hmacStrength=192;SHA384.padLength=128;SHA384.prototype._digest=function digest(enc){if(enc==='hex')return utils.toHex32(this.h.slice(0,12),'big');else return utils.split32(this.h.slice(0,12),'big');};function SHA1(){if(!(this instanceof SHA1))return new SHA1();BlockHash.call(this);this.h=[0x67452301,0xefcdab89,0x98badcfe,0x10325476,0xc3d2e1f0];this.W=new Array(80);}utils.inherits(SHA1,BlockHash);exports.sha1=SHA1;SHA1.blockSize=512;SHA1.outSize=160;SHA1.hmacStrength=80;SHA1.padLength=64;SHA1.prototype._update=function _update(msg,start){var W=this.W;for(var i=0;i<16;i++)W[i]=msg[start+i];for(;i<W.length;i++)W[i]=rotl32(W[i-3]^W[i-8]^W[i-14]^W[i-16],1);var a=this.h[0];var b=this.h[1];var c=this.h[2];var d=this.h[3];var e=this.h[4];for(var i=0;i<W.length;i++){var s=~~(i/20);var t=sum32_5(rotl32(a,5),ft_1(s,b,c,d),e,W[i],sha1_K[s]);e=d;d=c;c=rotl32(b,30);b=a;a=t;}this.h[0]=sum32(this.h[0],a);this.h[1]=sum32(this.h[1],b);this.h[2]=sum32(this.h[2],c);this.h[3]=sum32(this.h[3],d);this.h[4]=sum32(this.h[4],e);};SHA1.prototype._digest=function digest(enc){if(enc==='hex')return utils.toHex32(this.h,'big');else return utils.split32(this.h,'big');};function ch32(x,y,z){return x&y^~x&z;}function maj32(x,y,z){return x&y^x&z^y&z;}function p32(x,y,z){return x^y^z;}function s0_256(x){return rotr32(x,2)^rotr32(x,13)^rotr32(x,22);}function s1_256(x){return rotr32(x,6)^rotr32(x,11)^rotr32(x,25);}function g0_256(x){return rotr32(x,7)^rotr32(x,18)^x>>>3;}function g1_256(x){return rotr32(x,17)^rotr32(x,19)^x>>>10;}function ft_1(s,x,y,z){if(s===0)return ch32(x,y,z);if(s===1||s===3)return p32(x,y,z);if(s===2)return maj32(x,y,z);}function ch64_hi(xh,xl,yh,yl,zh,zl){var r=xh&yh^~xh&zh;if(r<0)r+=0x100000000;return r;}function ch64_lo(xh,xl,yh,yl,zh,zl){var r=xl&yl^~xl&zl;if(r<0)r+=0x100000000;return r;}function maj64_hi(xh,xl,yh,yl,zh,zl){var r=xh&yh^xh&zh^yh&zh;if(r<0)r+=0x100000000;return r;}function maj64_lo(xh,xl,yh,yl,zh,zl){var r=xl&yl^xl&zl^yl&zl;if(r<0)r+=0x100000000;return r;}function s0_512_hi(xh,xl){var c0_hi=rotr64_hi(xh,xl,28);var c1_hi=rotr64_hi(xl,xh,2);var c2_hi=rotr64_hi(xl,xh,7);var r=c0_hi^c1_hi^c2_hi;if(r<0)r+=0x100000000;return r;}function s0_512_lo(xh,xl){var c0_lo=rotr64_lo(xh,xl,28);var c1_lo=rotr64_lo(xl,xh,2);var c2_lo=rotr64_lo(xl,xh,7);var r=c0_lo^c1_lo^c2_lo;if(r<0)r+=0x100000000;return r;}function s1_512_hi(xh,xl){var c0_hi=rotr64_hi(xh,xl,14);var c1_hi=rotr64_hi(xh,xl,18);var c2_hi=rotr64_hi(xl,xh,9);var r=c0_hi^c1_hi^c2_hi;if(r<0)r+=0x100000000;return r;}function s1_512_lo(xh,xl){var c0_lo=rotr64_lo(xh,xl,14);var c1_lo=rotr64_lo(xh,xl,18);var c2_lo=rotr64_lo(xl,xh,9);var r=c0_lo^c1_lo^c2_lo;if(r<0)r+=0x100000000;return r;}function g0_512_hi(xh,xl){var c0_hi=rotr64_hi(xh,xl,1);var c1_hi=rotr64_hi(xh,xl,8);var c2_hi=shr64_hi(xh,xl,7);var r=c0_hi^c1_hi^c2_hi;if(r<0)r+=0x100000000;return r;}function g0_512_lo(xh,xl){var c0_lo=rotr64_lo(xh,xl,1);var c1_lo=rotr64_lo(xh,xl,8);var c2_lo=shr64_lo(xh,xl,7);var r=c0_lo^c1_lo^c2_lo;if(r<0)r+=0x100000000;return r;}function g1_512_hi(xh,xl){var c0_hi=rotr64_hi(xh,xl,19);var c1_hi=rotr64_hi(xl,xh,29);var c2_hi=shr64_hi(xh,xl,6);var r=c0_hi^c1_hi^c2_hi;if(r<0)r+=0x100000000;return r;}function g1_512_lo(xh,xl){var c0_lo=rotr64_lo(xh,xl,19);var c1_lo=rotr64_lo(xl,xh,29);var c2_lo=shr64_lo(xh,xl,6);var r=c0_lo^c1_lo^c2_lo;if(r<0)r+=0x100000000;return r;}},5827:function(__unusedmodule,exports){"use strict";var BOMChar='\uFEFF';exports.PrependBOM=PrependBOMWrapper;function PrependBOMWrapper(encoder,options){this.encoder=encoder;this.addBOM=true;}PrependBOMWrapper.prototype.write=function(str){if(this.addBOM){str=BOMChar+str;this.addBOM=false;}return this.encoder.write(str);};PrependBOMWrapper.prototype.end=function(){return this.encoder.end();};exports.StripBOM=StripBOMWrapper;function StripBOMWrapper(decoder,options){this.decoder=decoder;this.pass=false;this.options=options||{};}StripBOMWrapper.prototype.write=function(buf){var res=this.decoder.write(buf);if(this.pass||!res)return res;if(res[0]===BOMChar){res=res.slice(1);if(typeof this.options.stripBOM==='function')this.options.stripBOM();}this.pass=true;return res;};StripBOMWrapper.prototype.end=function(){return this.decoder.end();};},5832:function(__unusedmodule,exports){function isFunction(f){return'function'===typeof f;}function isDuplex(d){return'object'===typeof d&&isSource(d.source)&&isSink(d.sink);}function isSource(s){return isFunction(s)&&s.length===2;}function isSink(s){return isFunction(s)&&s.length===1;}exports.isDuplex=isDuplex;exports.isSource=isSource;exports.isSink=isSink;},5835:function(module,__unusedexports,__webpack_require__){var forge=__webpack_require__(7938);__webpack_require__(321);__webpack_require__(1214);var pss=module.exports=forge.pss=forge.pss||{};pss.create=function(options){if(arguments.length===3){options={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]};}var hash=options.md;var mgf=options.mgf;var hLen=hash.digestLength;var salt_=options.salt||null;if(typeof salt_==='string'){salt_=forge.util.createBuffer(salt_);}var sLen;if('saltLength'in options){sLen=options.saltLength;}else if(salt_!==null){sLen=salt_.length();}else{throw new Error('Salt length not specified or specific salt not given.');}if(salt_!==null&&salt_.length()!==sLen){throw new Error('Given salt length does not match length of given salt.');}var prng=options.prng||forge.random;var pssobj={};pssobj.encode=function(md,modBits){var i;var emBits=modBits-1;var emLen=Math.ceil(emBits/8);var mHash=md.digest().getBytes();if(emLen<hLen+sLen+2){throw new Error('Message is too long to encrypt.');}var salt;if(salt_===null){salt=prng.getBytesSync(sLen);}else{salt=salt_.bytes();}var m_=new forge.util.ByteBuffer();m_.fillWithByte(0,8);m_.putBytes(mHash);m_.putBytes(salt);hash.start();hash.update(m_.getBytes());var h=hash.digest().getBytes();var ps=new forge.util.ByteBuffer();ps.fillWithByte(0,emLen-sLen-hLen-2);ps.putByte(0x01);ps.putBytes(salt);var db=ps.getBytes();var maskLen=emLen-hLen-1;var dbMask=mgf.generate(h,maskLen);var maskedDB='';for(i=0;i<maskLen;i++){maskedDB+=String.fromCharCode(db.charCodeAt(i)^dbMask.charCodeAt(i));}var mask=0xFF00>>8*emLen-emBits&0xFF;maskedDB=String.fromCharCode(maskedDB.charCodeAt(0)&~mask)+maskedDB.substr(1);return maskedDB+h+String.fromCharCode(0xbc);};pssobj.verify=function(mHash,em,modBits){var i;var emBits=modBits-1;var emLen=Math.ceil(emBits/8);em=em.substr(-emLen);if(emLen<hLen+sLen+2){throw new Error('Inconsistent parameters to PSS signature verification.');}if(em.charCodeAt(emLen-1)!==0xbc){throw new Error('Encoded message does not end in 0xBC.');}var maskLen=emLen-hLen-1;var maskedDB=em.substr(0,maskLen);var h=em.substr(maskLen,hLen);var mask=0xFF00>>8*emLen-emBits&0xFF;if((maskedDB.charCodeAt(0)&mask)!==0){throw new Error('Bits beyond keysize not zero as expected.');}var dbMask=mgf.generate(h,maskLen);var db='';for(i=0;i<maskLen;i++){db+=String.fromCharCode(maskedDB.charCodeAt(i)^dbMask.charCodeAt(i));}db=String.fromCharCode(db.charCodeAt(0)&~mask)+db.substr(1);var checkLen=emLen-hLen-sLen-2;for(i=0;i<checkLen;i++){if(db.charCodeAt(i)!==0x00){throw new Error('Leftmost octets not zero as expected');}}if(db.charCodeAt(checkLen)!==0x01){throw new Error('Inconsistent PSS signature, 0x01 marker not found');}var salt=db.substr(-sLen);var m_=new forge.util.ByteBuffer();m_.fillWithByte(0,8);m_.putBytes(mHash);m_.putBytes(salt);hash.start();hash.update(m_.getBytes());var h_=hash.digest().getBytes();return h===h_;};return pssobj;};},5847:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=doParallel;var _eachOf=__webpack_require__(5066);var _eachOf2=_interopRequireDefault(_eachOf);var _wrapAsync=__webpack_require__(9396);var _wrapAsync2=_interopRequireDefault(_wrapAsync);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function doParallel(fn){return function(obj,iteratee,callback){return fn(_eachOf2.default,obj,(0,_wrapAsync2.default)(iteratee),callback);};}module.exports=exports['default'];},5853:function(module,__unusedexports,__webpack_require__){var isArray=__webpack_require__(1015),isKey=__webpack_require__(2601),stringToPath=__webpack_require__(4669),toString=__webpack_require__(2697);function castPath(value,object){if(isArray(value)){return value;}return isKey(value,object)?[value]:stringToPath(toString(value));}module.exports=castPath;},5855:function(module,__unusedexports,__webpack_require__){"use strict";const CID=__webpack_require__(9339);const multihashes=__webpack_require__(8757);module.exports=cidFromHash;function cidFromHash(codec,rawhash,options){options=options||{};const hashAlg=options.hashAlg||'keccak-256';const version=typeof options.version==='undefined'?1:options.version;const multihash=multihashes.encode(rawhash,hashAlg);return new CID(version,codec,multihash);}},5862:function(module){var ALPHABET='123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz';var ALPHABET_MAP={};for(var i=0;i<ALPHABET.length;i++){ALPHABET_MAP[ALPHABET.charAt(i)]=i;}var BASE=58;function encode(buffer){if(buffer.length===0)return'';var i,j,digits=[0];for(i=0;i<buffer.length;i++){for(j=0;j<digits.length;j++)digits[j]<<=8;digits[0]+=buffer[i];var carry=0;for(j=0;j<digits.length;++j){digits[j]+=carry;carry=digits[j]/BASE|0;digits[j]%=BASE;}while(carry){digits.push(carry%BASE);carry=carry/BASE|0;}}for(i=0;buffer[i]===0&&i<buffer.length-1;i++)digits.push(0);return digits.reverse().map(function(digit){return ALPHABET[digit];}).join('');}function decode(string){if(string.length===0)return[];var i,j,bytes=[0];for(i=0;i<string.length;i++){var c=string[i];if(!(c in ALPHABET_MAP))throw new Error('Non-base58 character');for(j=0;j<bytes.length;j++)bytes[j]*=BASE;bytes[0]+=ALPHABET_MAP[c];var carry=0;for(j=0;j<bytes.length;++j){bytes[j]+=carry;carry=bytes[j]>>8;bytes[j]&=0xff;}while(carry){bytes.push(carry&0xff);carry>>=8;}}for(i=0;string[i]==='1'&&i<string.length-1;i++)bytes.push(0);return bytes.reverse();}module.exports={encode:encode,decode:decode};},5878:function(module){"use strict";module.exports=function take(test,opts){opts=opts||{};var last=opts.last||false;var ended=false;if('number'===typeof test){last=true;var n=test;test=function(){return--n;};}return function(read){function terminate(cb){read(true,function(err){last=false;cb(err||true);});}return function(end,cb){if(ended&&!end)last?terminate(cb):cb(ended);else if(ended=end)read(ended,cb);else read(null,function(end,data){if(ended=ended||end){cb(ended);}else if(!test(data)){ended=true;last?cb(null,data):terminate(cb);}else cb(null,data);});};};};},5880:function(module,__unusedexports,__webpack_require__){"use strict";const defer=__webpack_require__(5213);const pull=__webpack_require__(418);const error=__webpack_require__(5619);const values=__webpack_require__(5130);const filter=__webpack_require__(708);const map=__webpack_require__(569);const cat=__webpack_require__(6246);const Bucket=__webpack_require__(3915);const DirSharded=__webpack_require__(2327);const waterfall=__webpack_require__(4265);module.exports=shardedDirExporter;function shardedDirExporter(cid,node,name,path,pathRest,resolve,size,dag,parent,depth,options){let dir;if(!parent||parent.path!==path){dir={name:name,depth:depth,path:path,multihash:cid.buffer,size:node.size,type:'dir'};}if(options.maxDepth&&options.maxDepth<=depth){return values([dir]);}if(!pathRest.length){const streams=[pull(values(node.links),map(link=>{const entryName=link.name.substring(2);const entryPath=entryName?path+'/'+entryName:path;return{depth:entryName?depth+1:depth,name:entryName,path:entryPath,multihash:link.cid.buffer,pathRest:entryName?pathRest.slice(1):pathRest,parent:dir||parent};}),resolve)];streams.unshift(values([dir]));return cat(streams);}const deferred=defer.source();const targetFile=pathRest[0];waterfall([cb=>{if(!options.rootBucket){options.rootBucket=new Bucket({hashFn:DirSharded.hashFn});options.hamtDepth=1;return addLinksToHamtBucket(node.links,options.rootBucket,options.rootBucket,cb);}return addLinksToHamtBucket(node.links,options.lastBucket,options.rootBucket,cb);},cb=>findPosition(targetFile,options.rootBucket,cb),(position,cb)=>{let prefix=toPrefix(position.pos);const bucketPath=toBucketPath(position);if(bucketPath.length>options.hamtDepth){options.lastBucket=bucketPath[options.hamtDepth];prefix=toPrefix(options.lastBucket._posAtParent);}const streams=[pull(values(node.links),map(link=>{const entryPrefix=link.name.substring(0,2);const entryName=link.name.substring(2);const entryPath=entryName?path+'/'+entryName:path;if(entryPrefix!==prefix){return false;}if(entryName&&entryName!==targetFile){return false;}if(!entryName){options.hamtDepth++;}else{delete options.rootBucket;delete options.lastBucket;delete options.hamtDepth;}return{depth:entryName?depth+1:depth,name:entryName,path:entryPath,multihash:link.cid.buffer,pathRest:entryName?pathRest.slice(1):pathRest,parent:dir||parent};}),filter(Boolean),resolve)];if(options.fullPath){streams.unshift(values([dir]));}cb(null,streams);}],(err,streams)=>{if(err){return deferred.resolve(error(err));}deferred.resolve(cat(streams));});return deferred;}const addLinksToHamtBucket=(links,bucket,rootBucket,callback)=>{Promise.all(links.map(link=>{if(link.name.length===2){const pos=parseInt(link.name,16);return bucket._putObjectAt(pos,new Bucket({hashFn:DirSharded.hashFn},bucket,pos));}return rootBucket.put(link.name.substring(2),true);})).catch(err=>{callback(err);callback=null;}).then(()=>callback&&callback());};const toPrefix=position=>{return position.toString('16').toUpperCase().padStart(2,'0').substring(0,2);};const findPosition=(file,bucket,cb)=>{bucket._findNewBucketAndPos(file).catch(err=>{cb(err);cb=null;}).then(position=>{if(!cb){return;}cb(null,position);});};const toBucketPath=position=>{let bucket=position.bucket;const path=[];while(bucket._parent){path.push(bucket);bucket=bucket._parent;}path.push(bucket);return path.reverse();};},5881:function(module,__unusedexports,__webpack_require__){"use strict";const chunkers={fixed:__webpack_require__(2898),rabin:__webpack_require__(9411)};module.exports=chunkers;},5887:function(module){function AbstractIterator(db){this.db=db;this._ended=false;this._nexting=false;}AbstractIterator.prototype.next=function(callback){var self=this;if(typeof callback!=='function'){throw new Error('next() requires a callback argument');}if(self._ended){process.nextTick(callback,new Error('cannot call next() after end()'));return self;}if(self._nexting){process.nextTick(callback,new Error('cannot call next() before previous next() has completed'));return self;}self._nexting=true;self._next(function(){self._nexting=false;callback.apply(null,arguments);});return self;};AbstractIterator.prototype._next=function(callback){process.nextTick(callback);};AbstractIterator.prototype.end=function(callback){if(typeof callback!=='function'){throw new Error('end() requires a callback argument');}if(this._ended){return process.nextTick(callback,new Error('end() already called on iterator'));}this._ended=true;this._end(callback);};AbstractIterator.prototype._end=function(callback){process.nextTick(callback);};module.exports=AbstractIterator;},5889:function(module,__unusedexports,__webpack_require__){"use strict";var hash=__webpack_require__(2543);var utils=__webpack_require__(2973);var assert=__webpack_require__(809);function HmacDRBG(options){if(!(this instanceof HmacDRBG))return new HmacDRBG(options);this.hash=options.hash;this.predResist=!!options.predResist;this.outLen=this.hash.outSize;this.minEntropy=options.minEntropy||this.hash.hmacStrength;this._reseed=null;this.reseedInterval=null;this.K=null;this.V=null;var entropy=utils.toArray(options.entropy,options.entropyEnc||'hex');var nonce=utils.toArray(options.nonce,options.nonceEnc||'hex');var pers=utils.toArray(options.pers,options.persEnc||'hex');assert(entropy.length>=this.minEntropy/8,'Not enough entropy. Minimum is: '+this.minEntropy+' bits');this._init(entropy,nonce,pers);}module.exports=HmacDRBG;HmacDRBG.prototype._init=function init(entropy,nonce,pers){var seed=entropy.concat(nonce).concat(pers);this.K=new Array(this.outLen/8);this.V=new Array(this.outLen/8);for(var i=0;i<this.V.length;i++){this.K[i]=0x00;this.V[i]=0x01;}this._update(seed);this._reseed=1;this.reseedInterval=0x1000000000000;};HmacDRBG.prototype._hmac=function hmac(){return new hash.hmac(this.hash,this.K);};HmacDRBG.prototype._update=function update(seed){var kmac=this._hmac().update(this.V).update([0x00]);if(seed)kmac=kmac.update(seed);this.K=kmac.digest();this.V=this._hmac().update(this.V).digest();if(!seed)return;this.K=this._hmac().update(this.V).update([0x01]).update(seed).digest();this.V=this._hmac().update(this.V).digest();};HmacDRBG.prototype.reseed=function reseed(entropy,entropyEnc,add,addEnc){if(typeof entropyEnc!=='string'){addEnc=add;add=entropyEnc;entropyEnc=null;}entropy=utils.toArray(entropy,entropyEnc);add=utils.toArray(add,addEnc);assert(entropy.length>=this.minEntropy/8,'Not enough entropy. Minimum is: '+this.minEntropy+' bits');this._update(entropy.concat(add||[]));this._reseed=1;};HmacDRBG.prototype.generate=function generate(len,enc,add,addEnc){if(this._reseed>this.reseedInterval)throw new Error('Reseed is required');if(typeof enc!=='string'){addEnc=add;add=enc;enc=null;}if(add){add=utils.toArray(add,addEnc||'hex');this._update(add);}var temp=[];while(temp.length<len){this.V=this._hmac().update(this.V).digest();temp=temp.concat(this.V);}var res=temp.slice(0,len);this._update(add);this._reseed++;return utils.encode(res,enc);};},5897:function(module){module.exports=require("path");},5910:function(__unusedmodule,exports,__webpack_require__){var RetryOperation=__webpack_require__(8877);exports.operation=function(options){var timeouts=exports.timeouts(options);return new RetryOperation(timeouts,{forever:options&&options.forever,unref:options&&options.unref,maxRetryTime:options&&options.maxRetryTime});};exports.timeouts=function(options){if(options instanceof Array){return[].concat(options);}var opts={retries:10,factor:2,minTimeout:1*1000,maxTimeout:Infinity,randomize:false};for(var key in options){opts[key]=options[key];}if(opts.minTimeout>opts.maxTimeout){throw new Error('minTimeout is greater than maxTimeout');}var timeouts=[];for(var i=0;i<opts.retries;i++){timeouts.push(this.createTimeout(i,opts));}if(options&&options.forever&&!timeouts.length){timeouts.push(this.createTimeout(i,opts));}timeouts.sort(function(a,b){return a-b;});return timeouts;};exports.createTimeout=function(attempt,opts){var random=opts.randomize?Math.random()+1:1;var timeout=Math.round(random*opts.minTimeout*Math.pow(opts.factor,attempt));timeout=Math.min(timeout,opts.maxTimeout);return timeout;};exports.wrap=function(obj,options,methods){if(options instanceof Array){methods=options;options=null;}if(!methods){methods=[];for(var key in obj){if(typeof obj[key]==='function'){methods.push(key);}}}for(var i=0;i<methods.length;i++){var method=methods[i];var original=obj[method];obj[method]=function retryWrapper(original){var op=exports.operation(options);var args=Array.prototype.slice.call(arguments,1);var callback=args.pop();args.push(function(err){if(op.retry(err)){return;}if(err){arguments[0]=op.mainError();}callback.apply(this,arguments);});op.attempt(function(){original.apply(obj,args);});}.bind(obj,original);obj[method].options=options;}};},5920:function(module,exports,__webpack_require__){"use strict";const codec=__webpack_require__(579);const protocols=__webpack_require__(6899);const varint=__webpack_require__(2572);const bs58=__webpack_require__(4967);const withIs=__webpack_require__(3171);const Multiaddr=withIs.proto(function(addr){if(!(this instanceof Multiaddr)){return new Multiaddr(addr);}if(addr==null){addr='';}if(addr instanceof Buffer){this.buffer=codec.fromBuffer(addr);}else if(typeof addr==='string'||addr instanceof String){if(addr.length>0&&addr.charAt(0)!=='/'){throw new Error(`multiaddr "${addr}" must start with a "/"`);}this.buffer=codec.fromString(addr);}else if(addr.buffer&&addr.protos&&addr.protoCodes){this.buffer=codec.fromBuffer(addr.buffer);}else{throw new Error('addr must be a string, Buffer, or another Multiaddr');}},{className:'Multiaddr',symbolName:'@multiformats/js-multiaddr/multiaddr'});Multiaddr.prototype.toString=function toString(){return codec.bufferToString(this.buffer);};Multiaddr.prototype.toOptions=function toOptions(){const opts={};const parsed=this.toString().split('/');opts.family=parsed[1]==='ip4'?'ipv4':'ipv6';opts.host=parsed[2];opts.transport=parsed[3];opts.port=parsed[4];return opts;};Multiaddr.prototype.inspect=function inspect(){return'<Multiaddr '+this.buffer.toString('hex')+' - '+codec.bufferToString(this.buffer)+'>';};Multiaddr.prototype.protos=function protos(){return this.protoCodes().map(code=>Object.assign({},protocols(code)));};Multiaddr.prototype.protoCodes=function protoCodes(){const codes=[];const buf=this.buffer;let i=0;while(i<buf.length){const code=varint.decode(buf,i);const n=varint.decode.bytes;const p=protocols(code);const size=codec.sizeForAddr(p,buf.slice(i+n));i+=size+n;codes.push(code);}return codes;};Multiaddr.prototype.protoNames=function protoNames(){return this.protos().map(proto=>proto.name);};Multiaddr.prototype.tuples=function tuples(){return codec.bufferToTuples(this.buffer);};Multiaddr.prototype.stringTuples=function stringTuples(){const t=codec.bufferToTuples(this.buffer);return codec.tuplesToStringTuples(t);};Multiaddr.prototype.encapsulate=function encapsulate(addr){addr=Multiaddr(addr);return Multiaddr(this.toString()+addr.toString());};Multiaddr.prototype.decapsulate=function decapsulate(addr){addr=addr.toString();const s=this.toString();const i=s.lastIndexOf(addr);if(i<0){throw new Error('Address '+this+' does not contain subaddress: '+addr);}return Multiaddr(s.slice(0,i));};Multiaddr.prototype.getPeerId=function getPeerId(){let b58str=null;try{b58str=this.stringTuples().filter(tuple=>{if(tuple[0]===protocols.names.ipfs.code){return true;}})[0][1];bs58.decode(b58str);}catch(e){b58str=null;}return b58str;};Multiaddr.prototype.getPath=function getPath(){let path=null;try{path=this.stringTuples().filter(tuple=>{const proto=protocols(tuple[0]);if(proto.path){return true;}})[0][1];}catch(e){path=null;}return path;};Multiaddr.prototype.equals=function equals(addr){return this.buffer.equals(addr.buffer);};Multiaddr.prototype.nodeAddress=function nodeAddress(){const codes=this.protoCodes();const names=this.protoNames();const parts=this.toString().split('/').slice(1);if(parts.length<4){throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6}/{address}/{tcp, udp}/{port}".');}else if(codes[0]!==4&&codes[0]!==41&&codes[0]!==54&&codes[0]!==55){throw new Error(`no protocol with name: "'${names[0]}'". Must have a valid family name: "{ip4, ip6, dns4, dns6}".`);}else if(parts[2]!=='tcp'&&parts[2]!=='udp'){throw new Error(`no protocol with name: "'${names[1]}'". Must have a valid transport protocol: "{tcp, udp}".`);}return{family:codes[0]===41||codes[0]===55?6:4,address:parts[1],port:parts[3]};};Multiaddr.fromNodeAddress=function fromNodeAddress(addr,transport){if(!addr)throw new Error('requires node address object');if(!transport)throw new Error('requires transport protocol');const ip=addr.family==='IPv6'?'ip6':'ip4';return Multiaddr('/'+[ip,addr.address,transport,addr.port].join('/'));};Multiaddr.prototype.isThinWaistAddress=function isThinWaistAddress(addr){const protos=(addr||this).protos();if(protos.length!==2){return false;}if(protos[0].code!==4&&protos[0].code!==41){return false;}if(protos[1].code!==6&&protos[1].code!==273){return false;}return true;};Multiaddr.protocols=protocols;Multiaddr.isName=function isName(addr){if(!Multiaddr.isMultiaddr(addr)){return false;}return addr.protos().some(proto=>proto.resolvable);};Multiaddr.resolve=function resolve(addr,callback){if(!Multiaddr.isMultiaddr(addr)||!Multiaddr.isName(addr)){return callback(new Error('not a valid name'));}return callback(new Error('not implemented yet'));};exports=module.exports=Multiaddr;},5926:function(module,exports,__webpack_require__){"use strict";const pull=__webpack_require__(418);const handshake=__webpack_require__(9346);const constants=__webpack_require__(4980);const PROTOCOL=constants.PROTOCOL;const PING_LENGTH=constants.PING_LENGTH;const debug=__webpack_require__(746);const log=debug('libp2p-ping');log.error=debug('libp2p-ping:error');function mount(swarm){swarm.handle(PROTOCOL,(protocol,conn)=>{const stream=handshake({timeout:0});const shake=stream.handshake;function next(){shake.read(PING_LENGTH,(err,buf)=>{if(err===true){return;}if(err){return log.error(err);}shake.write(buf);return next();});}pull(conn,stream,conn);next();});}function unmount(swarm){swarm.unhandle(PROTOCOL);}exports=module.exports;exports.mount=mount;exports.unmount=unmount;},5928:function(module,__unusedexports,__webpack_require__){const bscript=__webpack_require__(5099);function check(script){const chunks=bscript.decompile(script);return chunks.length===1&&bscript.isCanonicalScriptSignature(chunks[0]);}check.toJSON=function(){return'pubKey input';};module.exports={check:check};},5932:function(module){function promisify(){var callback;var promise=new Promise(function(resolve,reject){callback=function callback(err,value){if(err)reject(err);else resolve(value);};});callback.promise=promise;return callback;}module.exports=promisify;},5942:function(module,__unusedexports,__webpack_require__){"use strict";const peerId=__webpack_require__(1832);const waterfall=__webpack_require__(4265);const parallel=__webpack_require__(4876);const promisify=__webpack_require__(6955);const defaultsDeep=__webpack_require__(2500);const defaultConfig=__webpack_require__(6857);const Keychain=__webpack_require__(2122);const{DAGNode}=__webpack_require__(7421);const UnixFs=__webpack_require__(7959);const IPNS=__webpack_require__(4326);const OfflineDatastore=__webpack_require__(4436);const addDefaultAssets=__webpack_require__(2123);module.exports=function init(self){return promisify((opts,callback)=>{if(typeof opts==='function'){callback=opts;opts={};}const done=(err,res)=>{if(err){self.emit('error',err);return callback(err);}self.preStart(err=>{if(err){self.emit('error',err);return callback(err);}self.state.initialized();self.emit('init');callback(null,res);});};if(self.state.state()!=='uninitialized'){return done(new Error('Not able to init from state: '+self.state.state()));}self.state.init();self.log('init');if(opts.repo){self._repo=opts.repo;return done(null,true);}opts.emptyRepo=opts.emptyRepo||false;opts.bits=Number(opts.bits)||2048;opts.log=opts.log||function(){};const config=defaultsDeep(self._options.config,defaultConfig());let privateKey;waterfall([cb=>self._repo.exists(cb),(exists,cb)=>{self.log('repo exists?',exists);if(exists===true){return cb(new Error('repo already exists'));}if(opts.privateKey){self.log('using user-supplied private-key');if(typeof opts.privateKey==='object'){cb(null,opts.privateKey);}else{peerId.createFromPrivKey(Buffer.from(opts.privateKey,'base64'),cb);}}else{opts.log(`generating ${opts.bits}-bit RSA keypair...`,false);self.log('generating peer id: %s bits',opts.bits);peerId.create({bits:opts.bits},cb);}},(peerId,cb)=>{self.log('identity generated');config.Identity={PeerID:peerId.toB58String(),PrivKey:peerId.privKey.bytes.toString('base64')};privateKey=peerId.privKey;if(opts.pass){config.Keychain=Keychain.generateOptions();}opts.log('done');opts.log('peer identity: '+config.Identity.PeerID);self._repo.init(config,cb);},(_,cb)=>self._repo.open(cb),cb=>{self.log('repo opened');if(opts.pass){self.log('creating keychain');const keychainOptions=Object.assign({passPhrase:opts.pass},config.Keychain);self._keychain=new Keychain(self._repo.keys,keychainOptions);self._keychain.importPeer('self',{privKey:privateKey},cb);}else{cb(null,true);}},(_,cb)=>{const offlineDatastore=new OfflineDatastore(self._repo);self._ipns=new IPNS(offlineDatastore,self._repo.datastore,self._peerInfo,self._keychain,self._options);cb(null,true);},(_,cb)=>{if(opts.emptyRepo){return cb(null,true);}const tasks=[cb=>{waterfall([cb=>DAGNode.create(new UnixFs('directory').marshal(),cb),(node,cb)=>self.dag.put(node,{version:0,format:'dag-pb',hashAlg:'sha2-256'},cb),(cid,cb)=>self._ipns.initializeKeyspace(privateKey,cid.toBaseEncodedString(),cb)],cb);}];if(typeof addDefaultAssets==='function'){tasks.push(cb=>addDefaultAssets(self,opts.log,cb));}self.log('adding assets');parallel(tasks,err=>{if(err){cb(err);}else{cb(null,true);}});}],done);});};},5947:function(module,__unusedexports,__webpack_require__){var forge=__webpack_require__(7938);__webpack_require__(1214);__webpack_require__(1087);var asn1=module.exports=forge.asn1=forge.asn1||{};asn1.Class={UNIVERSAL:0x00,APPLICATION:0x40,CONTEXT_SPECIFIC:0x80,PRIVATE:0xC0};asn1.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30};asn1.create=function(tagClass,type,constructed,value,options){if(forge.util.isArray(value)){var tmp=[];for(var i=0;i<value.length;++i){if(value[i]!==undefined){tmp.push(value[i]);}}value=tmp;}var obj={tagClass:tagClass,type:type,constructed:constructed,composed:constructed||forge.util.isArray(value),value:value};if(options&&'bitStringContents'in options){obj.bitStringContents=options.bitStringContents;obj.original=asn1.copy(obj);}return obj;};asn1.copy=function(obj,options){var copy;if(forge.util.isArray(obj)){copy=[];for(var i=0;i<obj.length;++i){copy.push(asn1.copy(obj[i],options));}return copy;}if(typeof obj==='string'){return obj;}copy={tagClass:obj.tagClass,type:obj.type,constructed:obj.constructed,composed:obj.composed,value:asn1.copy(obj.value,options)};if(options&&!options.excludeBitStringContents){copy.bitStringContents=obj.bitStringContents;}return copy;};asn1.equals=function(obj1,obj2,options){if(forge.util.isArray(obj1)){if(!forge.util.isArray(obj2)){return false;}if(obj1.length!==obj2.length){return false;}for(var i=0;i<obj1.length;++i){if(!asn1.equals(obj1[i],obj2[i])){return false;}}return true;}if(typeof obj1!==typeof obj2){return false;}if(typeof obj1==='string'){return obj1===obj2;}var equal=obj1.tagClass===obj2.tagClass&&obj1.type===obj2.type&&obj1.constructed===obj2.constructed&&obj1.composed===obj2.composed&&asn1.equals(obj1.value,obj2.value);if(options&&options.includeBitStringContents){equal=equal&&obj1.bitStringContents===obj2.bitStringContents;}return equal;};asn1.getBerValueLength=function(b){var b2=b.getByte();if(b2===0x80){return undefined;}var length;var longForm=b2&0x80;if(!longForm){length=b2;}else{length=b.getInt((b2&0x7F)<<3);}return length;};function _checkBufferLength(bytes,remaining,n){if(n>remaining){var error=new Error('Too few bytes to parse DER.');error.available=bytes.length();error.remaining=remaining;error.requested=n;throw error;}}var _getValueLength=function(bytes,remaining){var b2=bytes.getByte();remaining--;if(b2===0x80){return undefined;}var length;var longForm=b2&0x80;if(!longForm){length=b2;}else{var longFormBytes=b2&0x7F;_checkBufferLength(bytes,remaining,longFormBytes);length=bytes.getInt(longFormBytes<<3);}if(length<0){throw new Error('Negative length: '+length);}return length;};asn1.fromDer=function(bytes,options){if(options===undefined){options={strict:true,decodeBitStrings:true};}if(typeof options==='boolean'){options={strict:options,decodeBitStrings:true};}if(!('strict'in options)){options.strict=true;}if(!('decodeBitStrings'in options)){options.decodeBitStrings=true;}if(typeof bytes==='string'){bytes=forge.util.createBuffer(bytes);}return _fromDer(bytes,bytes.length(),0,options);};function _fromDer(bytes,remaining,depth,options){var start;_checkBufferLength(bytes,remaining,2);var b1=bytes.getByte();remaining--;var tagClass=b1&0xC0;var type=b1&0x1F;start=bytes.length();var length=_getValueLength(bytes,remaining);remaining-=start-bytes.length();if(length!==undefined&&length>remaining){if(options.strict){var error=new Error('Too few bytes to read ASN.1 value.');error.available=bytes.length();error.remaining=remaining;error.requested=length;throw error;}length=remaining;}var value;var bitStringContents;var constructed=(b1&0x20)===0x20;if(constructed){value=[];if(length===undefined){for(;;){_checkBufferLength(bytes,remaining,2);if(bytes.bytes(2)===String.fromCharCode(0,0)){bytes.getBytes(2);remaining-=2;break;}start=bytes.length();value.push(_fromDer(bytes,remaining,depth+1,options));remaining-=start-bytes.length();}}else{while(length>0){start=bytes.length();value.push(_fromDer(bytes,length,depth+1,options));remaining-=start-bytes.length();length-=start-bytes.length();}}}if(value===undefined&&tagClass===asn1.Class.UNIVERSAL&&type===asn1.Type.BITSTRING){bitStringContents=bytes.bytes(length);}if(value===undefined&&options.decodeBitStrings&&tagClass===asn1.Class.UNIVERSAL&&type===asn1.Type.BITSTRING&&length>1){var savedRead=bytes.read;var savedRemaining=remaining;var unused=0;if(type===asn1.Type.BITSTRING){_checkBufferLength(bytes,remaining,1);unused=bytes.getByte();remaining--;}if(unused===0){try{start=bytes.length();var subOptions={verbose:options.verbose,strict:true,decodeBitStrings:true};var composed=_fromDer(bytes,remaining,depth+1,subOptions);var used=start-bytes.length();remaining-=used;if(type==asn1.Type.BITSTRING){used++;}var tc=composed.tagClass;if(used===length&&(tc===asn1.Class.UNIVERSAL||tc===asn1.Class.CONTEXT_SPECIFIC)){value=[composed];}}catch(ex){}}if(value===undefined){bytes.read=savedRead;remaining=savedRemaining;}}if(value===undefined){if(length===undefined){if(options.strict){throw new Error('Non-constructed ASN.1 object of indefinite length.');}length=remaining;}if(type===asn1.Type.BMPSTRING){value='';for(;length>0;length-=2){_checkBufferLength(bytes,remaining,2);value+=String.fromCharCode(bytes.getInt16());remaining-=2;}}else{value=bytes.getBytes(length);}}var asn1Options=bitStringContents===undefined?null:{bitStringContents:bitStringContents};return asn1.create(tagClass,type,constructed,value,asn1Options);}asn1.toDer=function(obj){var bytes=forge.util.createBuffer();var b1=obj.tagClass|obj.type;var value=forge.util.createBuffer();var useBitStringContents=false;if('bitStringContents'in obj){useBitStringContents=true;if(obj.original){useBitStringContents=asn1.equals(obj,obj.original);}}if(useBitStringContents){value.putBytes(obj.bitStringContents);}else if(obj.composed){if(obj.constructed){b1|=0x20;}else{value.putByte(0x00);}for(var i=0;i<obj.value.length;++i){if(obj.value[i]!==undefined){value.putBuffer(asn1.toDer(obj.value[i]));}}}else{if(obj.type===asn1.Type.BMPSTRING){for(var i=0;i<obj.value.length;++i){value.putInt16(obj.value.charCodeAt(i));}}else{if(obj.type===asn1.Type.INTEGER&&obj.value.length>1&&(obj.value.charCodeAt(0)===0&&(obj.value.charCodeAt(1)&0x80)===0||obj.value.charCodeAt(0)===0xFF&&(obj.value.charCodeAt(1)&0x80)===0x80)){value.putBytes(obj.value.substr(1));}else{value.putBytes(obj.value);}}}bytes.putByte(b1);if(value.length()<=127){bytes.putByte(value.length()&0x7F);}else{var len=value.length();var lenBytes='';do{lenBytes+=String.fromCharCode(len&0xFF);len=len>>>8;}while(len>0);bytes.putByte(lenBytes.length|0x80);for(var i=lenBytes.length-1;i>=0;--i){bytes.putByte(lenBytes.charCodeAt(i));}}bytes.putBuffer(value);return bytes;};asn1.oidToDer=function(oid){var values=oid.split('.');var bytes=forge.util.createBuffer();bytes.putByte(40*parseInt(values[0],10)+parseInt(values[1],10));var last,valueBytes,value,b;for(var i=2;i<values.length;++i){last=true;valueBytes=[];value=parseInt(values[i],10);do{b=value&0x7F;value=value>>>7;if(!last){b|=0x80;}valueBytes.push(b);last=false;}while(value>0);for(var n=valueBytes.length-1;n>=0;--n){bytes.putByte(valueBytes[n]);}}return bytes;};asn1.derToOid=function(bytes){var oid;if(typeof bytes==='string'){bytes=forge.util.createBuffer(bytes);}var b=bytes.getByte();oid=Math.floor(b/40)+'.'+b%40;var value=0;while(bytes.length()>0){b=bytes.getByte();value=value<<7;if(b&0x80){value+=b&0x7F;}else{oid+='.'+(value+b);value=0;}}return oid;};asn1.utcTimeToDate=function(utc){var date=new Date();var year=parseInt(utc.substr(0,2),10);year=year>=50?1900+year:2000+year;var MM=parseInt(utc.substr(2,2),10)-1;var DD=parseInt(utc.substr(4,2),10);var hh=parseInt(utc.substr(6,2),10);var mm=parseInt(utc.substr(8,2),10);var ss=0;if(utc.length>11){var c=utc.charAt(10);var end=10;if(c!=='+'&&c!=='-'){ss=parseInt(utc.substr(10,2),10);end+=2;}}date.setUTCFullYear(year,MM,DD);date.setUTCHours(hh,mm,ss,0);if(end){c=utc.charAt(end);if(c==='+'||c==='-'){var hhoffset=parseInt(utc.substr(end+1,2),10);var mmoffset=parseInt(utc.substr(end+4,2),10);var offset=hhoffset*60+mmoffset;offset*=60000;if(c==='+'){date.setTime(+date-offset);}else{date.setTime(+date+offset);}}}return date;};asn1.generalizedTimeToDate=function(gentime){var date=new Date();var YYYY=parseInt(gentime.substr(0,4),10);var MM=parseInt(gentime.substr(4,2),10)-1;var DD=parseInt(gentime.substr(6,2),10);var hh=parseInt(gentime.substr(8,2),10);var mm=parseInt(gentime.substr(10,2),10);var ss=parseInt(gentime.substr(12,2),10);var fff=0;var offset=0;var isUTC=false;if(gentime.charAt(gentime.length-1)==='Z'){isUTC=true;}var end=gentime.length-5,c=gentime.charAt(end);if(c==='+'||c==='-'){var hhoffset=parseInt(gentime.substr(end+1,2),10);var mmoffset=parseInt(gentime.substr(end+4,2),10);offset=hhoffset*60+mmoffset;offset*=60000;if(c==='+'){offset*=-1;}isUTC=true;}if(gentime.charAt(14)==='.'){fff=parseFloat(gentime.substr(14),10)*1000;}if(isUTC){date.setUTCFullYear(YYYY,MM,DD);date.setUTCHours(hh,mm,ss,fff);date.setTime(+date+offset);}else{date.setFullYear(YYYY,MM,DD);date.setHours(hh,mm,ss,fff);}return date;};asn1.dateToUtcTime=function(date){if(typeof date==='string'){return date;}var rval='';var format=[];format.push((''+date.getUTCFullYear()).substr(2));format.push(''+(date.getUTCMonth()+1));format.push(''+date.getUTCDate());format.push(''+date.getUTCHours());format.push(''+date.getUTCMinutes());format.push(''+date.getUTCSeconds());for(var i=0;i<format.length;++i){if(format[i].length<2){rval+='0';}rval+=format[i];}rval+='Z';return rval;};asn1.dateToGeneralizedTime=function(date){if(typeof date==='string'){return date;}var rval='';var format=[];format.push(''+date.getUTCFullYear());format.push(''+(date.getUTCMonth()+1));format.push(''+date.getUTCDate());format.push(''+date.getUTCHours());format.push(''+date.getUTCMinutes());format.push(''+date.getUTCSeconds());for(var i=0;i<format.length;++i){if(format[i].length<2){rval+='0';}rval+=format[i];}rval+='Z';return rval;};asn1.integerToDer=function(x){var rval=forge.util.createBuffer();if(x>=-0x80&&x<0x80){return rval.putSignedInt(x,8);}if(x>=-0x8000&&x<0x8000){return rval.putSignedInt(x,16);}if(x>=-0x800000&&x<0x800000){return rval.putSignedInt(x,24);}if(x>=-0x80000000&&x<0x80000000){return rval.putSignedInt(x,32);}var error=new Error('Integer too large; max is 32-bits.');error.integer=x;throw error;};asn1.derToInteger=function(bytes){if(typeof bytes==='string'){bytes=forge.util.createBuffer(bytes);}var n=bytes.length()*8;if(n>32){throw new Error('Integer too large; max is 32-bits.');}return bytes.getSignedInt(n);};asn1.validate=function(obj,v,capture,errors){var rval=false;if((obj.tagClass===v.tagClass||typeof v.tagClass==='undefined')&&(obj.type===v.type||typeof v.type==='undefined')){if(obj.constructed===v.constructed||typeof v.constructed==='undefined'){rval=true;if(v.value&&forge.util.isArray(v.value)){var j=0;for(var i=0;rval&&i<v.value.length;++i){rval=v.value[i].optional||false;if(obj.value[j]){rval=asn1.validate(obj.value[j],v.value[i],capture,errors);if(rval){++j;}else if(v.value[i].optional){rval=true;}}if(!rval&&errors){errors.push('['+v.name+'] '+'Tag class "'+v.tagClass+'", type "'+v.type+'" expected value length "'+v.value.length+'", got "'+obj.value.length+'"');}}}if(rval&&capture){if(v.capture){capture[v.capture]=obj.value;}if(v.captureAsn1){capture[v.captureAsn1]=obj;}if(v.captureBitStringContents&&'bitStringContents'in obj){capture[v.captureBitStringContents]=obj.bitStringContents;}if(v.captureBitStringValue&&'bitStringContents'in obj){var value;if(obj.bitStringContents.length<2){capture[v.captureBitStringValue]='';}else{var unused=obj.bitStringContents.charCodeAt(0);if(unused!==0){throw new Error('captureBitStringValue only supported for zero unused bits');}capture[v.captureBitStringValue]=obj.bitStringContents.slice(1);}}}}else if(errors){errors.push('['+v.name+'] '+'Expected constructed "'+v.constructed+'", got "'+obj.constructed+'"');}}else if(errors){if(obj.tagClass!==v.tagClass){errors.push('['+v.name+'] '+'Expected tag class "'+v.tagClass+'", got "'+obj.tagClass+'"');}if(obj.type!==v.type){errors.push('['+v.name+'] '+'Expected type "'+v.type+'", got "'+obj.type+'"');}}return rval;};var _nonLatinRegex=/[^\\u0000-\\u00ff]/;asn1.prettyPrint=function(obj,level,indentation){var rval='';level=level||0;indentation=indentation||2;if(level>0){rval+='\n';}var indent='';for(var i=0;i<level*indentation;++i){indent+=' ';}rval+=indent+'Tag: ';switch(obj.tagClass){case asn1.Class.UNIVERSAL:rval+='Universal:';break;case asn1.Class.APPLICATION:rval+='Application:';break;case asn1.Class.CONTEXT_SPECIFIC:rval+='Context-Specific:';break;case asn1.Class.PRIVATE:rval+='Private:';break;}if(obj.tagClass===asn1.Class.UNIVERSAL){rval+=obj.type;switch(obj.type){case asn1.Type.NONE:rval+=' (None)';break;case asn1.Type.BOOLEAN:rval+=' (Boolean)';break;case asn1.Type.INTEGER:rval+=' (Integer)';break;case asn1.Type.BITSTRING:rval+=' (Bit string)';break;case asn1.Type.OCTETSTRING:rval+=' (Octet string)';break;case asn1.Type.NULL:rval+=' (Null)';break;case asn1.Type.OID:rval+=' (Object Identifier)';break;case asn1.Type.ODESC:rval+=' (Object Descriptor)';break;case asn1.Type.EXTERNAL:rval+=' (External or Instance of)';break;case asn1.Type.REAL:rval+=' (Real)';break;case asn1.Type.ENUMERATED:rval+=' (Enumerated)';break;case asn1.Type.EMBEDDED:rval+=' (Embedded PDV)';break;case asn1.Type.UTF8:rval+=' (UTF8)';break;case asn1.Type.ROID:rval+=' (Relative Object Identifier)';break;case asn1.Type.SEQUENCE:rval+=' (Sequence)';break;case asn1.Type.SET:rval+=' (Set)';break;case asn1.Type.PRINTABLESTRING:rval+=' (Printable String)';break;case asn1.Type.IA5String:rval+=' (IA5String (ASCII))';break;case asn1.Type.UTCTIME:rval+=' (UTC time)';break;case asn1.Type.GENERALIZEDTIME:rval+=' (Generalized time)';break;case asn1.Type.BMPSTRING:rval+=' (BMP String)';break;}}else{rval+=obj.type;}rval+='\n';rval+=indent+'Constructed: '+obj.constructed+'\n';if(obj.composed){var subvalues=0;var sub='';for(var i=0;i<obj.value.length;++i){if(obj.value[i]!==undefined){subvalues+=1;sub+=asn1.prettyPrint(obj.value[i],level+1,indentation);if(i+1<obj.value.length){sub+=',';}}}rval+=indent+'Sub values: '+subvalues+sub;}else{rval+=indent+'Value: ';if(obj.type===asn1.Type.OID){var oid=asn1.derToOid(obj.value);rval+=oid;if(forge.pki&&forge.pki.oids){if(oid in forge.pki.oids){rval+=' ('+forge.pki.oids[oid]+') ';}}}if(obj.type===asn1.Type.INTEGER){try{rval+=asn1.derToInteger(obj.value);}catch(ex){rval+='0x'+forge.util.bytesToHex(obj.value);}}else if(obj.type===asn1.Type.BITSTRING){if(obj.value.length>1){rval+='0x'+forge.util.bytesToHex(obj.value.slice(1));}else{rval+='(none)';}if(obj.value.length>0){var unused=obj.value.charCodeAt(0);if(unused==1){rval+=' (1 unused bit shown)';}else if(unused>1){rval+=' ('+unused+' unused bits shown)';}}}else if(obj.type===asn1.Type.OCTETSTRING){if(!_nonLatinRegex.test(obj.value)){rval+='('+obj.value+') ';}rval+='0x'+forge.util.bytesToHex(obj.value);}else if(obj.type===asn1.Type.UTF8){rval+=forge.util.decodeUtf8(obj.value);}else if(obj.type===asn1.Type.PRINTABLESTRING||obj.type===asn1.Type.IA5String){rval+=obj.value;}else if(_nonLatinRegex.test(obj.value)){rval+='0x'+forge.util.bytesToHex(obj.value);}else if(obj.value.length===0){rval+='[null]';}else{rval+=obj.value;}}return rval;};},5953:function(module,__unusedexports,__webpack_require__){"use strict";var generate=__webpack_require__(5045);var alphabet=__webpack_require__(5247);var REDUCE_TIME=1459707606518;var version=6;var counter;var previousSeconds;function build(clusterWorkerId){var str='';var seconds=Math.floor((Date.now()-REDUCE_TIME)*0.001);if(seconds===previousSeconds){counter++;}else{counter=0;previousSeconds=seconds;}str=str+generate(version);str=str+generate(clusterWorkerId);if(counter>0){str=str+generate(counter);}str=str+generate(seconds);return str;}module.exports=build;},5961:function(module,__unusedexports,__webpack_require__){"use strict";const bsplit=__webpack_require__(7917);const errcode=__webpack_require__(4999);const bestRecord=(selectors,k,records)=>{if(records.length===0){const errMsg=`No records given`;throw errcode(new Error(errMsg),'ERR_NO_RECORDS_RECEIVED');}const parts=bsplit(k,Buffer.from('/'));if(parts.length<3){const errMsg=`Record key does not have a selector function`;throw errcode(new Error(errMsg),'ERR_NO_SELECTOR_FUNCTION_FOR_RECORD_KEY');}const selector=selectors[parts[1].toString()];if(!selector){const errMsg=`Unrecognized key prefix: ${parts[1]}`;throw errcode(new Error(errMsg),'ERR_UNRECOGNIZED_KEY_PREFIX');}return selector(k,records);};module.exports={bestRecord:bestRecord,selectors:__webpack_require__(6722)};},5969:function(module,__unusedexports,__webpack_require__){"use strict";var pna=__webpack_require__(88);function destroy(err,cb){var _this=this;var readableDestroyed=this._readableState&&this._readableState.destroyed;var writableDestroyed=this._writableState&&this._writableState.destroyed;if(readableDestroyed||writableDestroyed){if(cb){cb(err);}else if(err&&(!this._writableState||!this._writableState.errorEmitted)){pna.nextTick(emitErrorNT,this,err);}return this;}if(this._readableState){this._readableState.destroyed=true;}if(this._writableState){this._writableState.destroyed=true;}this._destroy(err||null,function(err){if(!cb&&err){pna.nextTick(emitErrorNT,_this,err);if(_this._writableState){_this._writableState.errorEmitted=true;}}else if(cb){cb(err);}});return this;}function undestroy(){if(this._readableState){this._readableState.destroyed=false;this._readableState.reading=false;this._readableState.ended=false;this._readableState.endEmitted=false;}if(this._writableState){this._writableState.destroyed=false;this._writableState.ended=false;this._writableState.ending=false;this._writableState.finished=false;this._writableState.errorEmitted=false;}}function emitErrorNT(self,err){self.emit('error',err);}module.exports={destroy:destroy,undestroy:undestroy};},5978:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function(worker,concurrency){var _worker=(0,_wrapAsync2.default)(worker);return(0,_queue2.default)(function(items,cb){_worker(items[0],cb);},concurrency,1);};var _queue=__webpack_require__(6435);var _queue2=_interopRequireDefault(_queue);var _wrapAsync=__webpack_require__(9396);var _wrapAsync2=_interopRequireDefault(_wrapAsync);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}module.exports=exports['default'];},5984:function(module,__unusedexports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}var Buffer=__webpack_require__(7572).Buffer;var util=__webpack_require__(649);function copyBuffer(src,target,offset){src.copy(target,offset);}module.exports=function(){function BufferList(){_classCallCheck(this,BufferList);this.head=null;this.tail=null;this.length=0;}BufferList.prototype.push=function push(v){var entry={data:v,next:null};if(this.length>0)this.tail.next=entry;else this.head=entry;this.tail=entry;++this.length;};BufferList.prototype.unshift=function unshift(v){var entry={data:v,next:this.head};if(this.length===0)this.tail=entry;this.head=entry;++this.length;};BufferList.prototype.shift=function shift(){if(this.length===0)return;var ret=this.head.data;if(this.length===1)this.head=this.tail=null;else this.head=this.head.next;--this.length;return ret;};BufferList.prototype.clear=function clear(){this.head=this.tail=null;this.length=0;};BufferList.prototype.join=function join(s){if(this.length===0)return'';var p=this.head;var ret=''+p.data;while(p=p.next){ret+=s+p.data;}return ret;};BufferList.prototype.concat=function concat(n){if(this.length===0)return Buffer.alloc(0);if(this.length===1)return this.head.data;var ret=Buffer.allocUnsafe(n>>>0);var p=this.head;var i=0;while(p){copyBuffer(p.data,ret,i);i+=p.data.length;p=p.next;}return ret;};return BufferList;}();if(util&&util.inspect&&util.inspect.custom){module.exports.prototype[util.inspect.custom]=function(){var obj=util.inspect({length:this.length});return this.constructor.name+' '+obj;};}},5989:function(module,__unusedexports,__webpack_require__){"use strict";var _=__webpack_require__(6064);var $=__webpack_require__(5107);var BN=__webpack_require__(6122);var buffer=__webpack_require__(9423);var BufferWriter=__webpack_require__(2418);var BufferUtil=__webpack_require__(9657);var JSUtil=__webpack_require__(8416);var ZCProof=__webpack_require__(5356);var ZC_NUM_JS_INPUTS=2;var ZC_NUM_JS_OUTPUTS=2;var ZC_NOTECIPHERTEXT_SIZE=1+8+32+32+512+16;function JSDescription(params){if(!(this instanceof JSDescription)){return new JSDescription(params);}this.nullifiers=[];this.commitments=[];this.ciphertexts=[];this.macs=[];if(params){return this._fromObject(params);}}Object.defineProperty(JSDescription.prototype,'vpub_old',{configurable:false,enumerable:true,get:function(){return this._vpub_old;},set:function(num){if(num instanceof BN){this._vpub_oldBN=num;this._vpub_old=num.toNumber();}else if(_.isString(num)){this._vpub_old=parseInt(num);this._vpub_oldBN=BN.fromNumber(this._vpub_old);}else{$.checkArgument(JSUtil.isNaturalNumber(num),'vpub_old is not a natural number');this._vpub_oldBN=BN.fromNumber(num);this._vpub_old=num;}$.checkState(JSUtil.isNaturalNumber(this._vpub_old),'vpub_old is not a natural number');}});Object.defineProperty(JSDescription.prototype,'vpub_new',{configurable:false,enumerable:true,get:function(){return this._vpub_new;},set:function(num){if(num instanceof BN){this._vpub_newBN=num;this._vpub_new=num.toNumber();}else if(_.isString(num)){this._vpub_new=parseInt(num);this._vpub_newBN=BN.fromNumber(this._vpub_new);}else{$.checkArgument(JSUtil.isNaturalNumber(num),'vpub_new is not a natural number');this._vpub_newBN=BN.fromNumber(num);this._vpub_new=num;}$.checkState(JSUtil.isNaturalNumber(this._vpub_new),'vpub_new is not a natural number');}});JSDescription.fromObject=function(obj){$.checkArgument(_.isObject(obj));var jsdesc=new JSDescription();return jsdesc._fromObject(obj);};JSDescription.prototype._fromObject=function(params){var nullifiers=[];_.each(params.nullifiers,function(nullifier){nullifiers.push(BufferUtil.reverse(new buffer.Buffer(nullifier,'hex')));});var commitments=[];_.each(params.commitments,function(commitment){commitments.push(BufferUtil.reverse(new buffer.Buffer(commitment,'hex')));});var ciphertexts=[];_.each(params.ciphertexts,function(ciphertext){ciphertexts.push(new buffer.Buffer(ciphertext,'hex'));});var macs=[];_.each(params.macs,function(mac){macs.push(BufferUtil.reverse(new buffer.Buffer(mac,'hex')));});this.vpub_old=params.vpub_old;this.vpub_new=params.vpub_new;this.anchor=BufferUtil.reverse(new buffer.Buffer(params.anchor,'hex'));this.nullifiers=nullifiers;this.commitments=commitments;this.ephemeralKey=BufferUtil.reverse(new buffer.Buffer(params.ephemeralKey,'hex'));this.ciphertexts=ciphertexts;this.randomSeed=BufferUtil.reverse(new buffer.Buffer(params.randomSeed,'hex'));this.macs=macs;this.proof=ZCProof.fromObject(params.proof);return this;};JSDescription.prototype.toObject=JSDescription.prototype.toJSON=function toObject(){var nullifiers=[];_.each(this.nullifiers,function(nullifier){nullifiers.push(BufferUtil.reverse(nullifier).toString('hex'));});var commitments=[];_.each(this.commitments,function(commitment){commitments.push(BufferUtil.reverse(commitment).toString('hex'));});var ciphertexts=[];_.each(this.ciphertexts,function(ciphertext){ciphertexts.push(ciphertext.toString('hex'));});var macs=[];_.each(this.macs,function(mac){macs.push(BufferUtil.reverse(mac).toString('hex'));});var obj={vpub_old:this.vpub_old,vpub_new:this.vpub_new,anchor:BufferUtil.reverse(this.anchor).toString('hex'),nullifiers:nullifiers,commitments:commitments,ephemeralKey:BufferUtil.reverse(this.ephemeralKey).toString('hex'),ciphertexts:ciphertexts,randomSeed:BufferUtil.reverse(this.randomSeed).toString('hex'),macs:macs,proof:this.proof.toObject()};return obj;};JSDescription.fromBufferReader=function(br){var i;var jsdesc=new JSDescription();jsdesc.vpub_old=br.readUInt64LEBN();jsdesc.vpub_new=br.readUInt64LEBN();jsdesc.anchor=br.read(32);for(i=0;i<ZC_NUM_JS_INPUTS;i++){jsdesc.nullifiers.push(br.read(32));}for(i=0;i<ZC_NUM_JS_OUTPUTS;i++){jsdesc.commitments.push(br.read(32));}jsdesc.ephemeralKey=br.read(32);jsdesc.randomSeed=br.read(32);for(i=0;i<ZC_NUM_JS_INPUTS;i++){jsdesc.macs.push(br.read(32));}jsdesc.proof=ZCProof.fromBufferReader(br);for(i=0;i<ZC_NUM_JS_OUTPUTS;i++){jsdesc.ciphertexts.push(br.read(ZC_NOTECIPHERTEXT_SIZE));}return jsdesc;};JSDescription.prototype.toBufferWriter=function(writer){var i;if(!writer){writer=new BufferWriter();}writer.writeUInt64LEBN(this._vpub_oldBN);writer.writeUInt64LEBN(this._vpub_newBN);writer.write(this.anchor);for(i=0;i<ZC_NUM_JS_INPUTS;i++){writer.write(this.nullifiers[i]);}for(i=0;i<ZC_NUM_JS_OUTPUTS;i++){writer.write(this.commitments[i]);}writer.write(this.ephemeralKey);writer.write(this.randomSeed);for(i=0;i<ZC_NUM_JS_INPUTS;i++){writer.write(this.macs[i]);}this.proof.toBufferWriter(writer);for(i=0;i<ZC_NUM_JS_OUTPUTS;i++){writer.write(this.ciphertexts[i]);}return writer;};module.exports=JSDescription;},5994:function(module){module.exports=function fastRoot(values,digestFn){if(!Array.isArray(values))throw TypeError('Expected values Array');if(typeof digestFn!=='function')throw TypeError('Expected digest Function');var length=values.length;var results=values.concat();while(length>1){var j=0;for(var i=0;i<length;i+=2,++j){var left=results[i];var right=i+1===length?left:results[i+1];var data=Buffer.concat([left,right]);results[j]=digestFn(data);}length=j;}return results[0];};},5995:function(module){module.exports=pullPushable;function pullPushable(separated,onClose){if(typeof separated==='function'){onClose=separated;separated=false;}var buffer=[];var abort,cb;function read(_abort,_cb){if(_abort){abort=_abort;if(cb)callback(abort);}cb=_cb;drain();}var ended;function end(end){ended=ended||end||true;drain();}function push(data){if(ended)return;if(cb){callback(abort,data);return;}buffer.push(data);}if(separated){return{push:push,end:end,source:read,buffer:buffer};}read.push=push;read.end=end;read.buffer=buffer;return read;function drain(){if(!cb)return;if(abort)callback(abort);else if(!buffer.length&&ended)callback(ended);else if(buffer.length)callback(null,buffer.shift());}function callback(err,val){var _cb=cb;if(err&&onClose){var c=onClose;onClose=null;c(err===true?null:err);}cb=null;_cb(err,val);}}},5996:function(module,__unusedexports,__webpack_require__){"use strict";const isOptionObject=__webpack_require__(9854);const hasOwnProperty=Object.prototype.hasOwnProperty;const propIsEnumerable=Object.propertyIsEnumerable;const defineProperty=(obj,name,value)=>Object.defineProperty(obj,name,{value,writable:true,enumerable:true,configurable:true});const globalThis=this;const defaultMergeOpts={concatArrays:false};const getEnumerableOwnPropertyKeys=value=>{const keys=[];for(const key in value){if(hasOwnProperty.call(value,key)){keys.push(key);}}if(Object.getOwnPropertySymbols){const symbols=Object.getOwnPropertySymbols(value);for(let i=0;i<symbols.length;i++){if(propIsEnumerable.call(value,symbols[i])){keys.push(symbols[i]);}}}return keys;};function clone(value){if(Array.isArray(value)){return cloneArray(value);}if(isOptionObject(value)){return cloneOptionObject(value);}return value;}function cloneArray(array){const result=array.slice(0,0);getEnumerableOwnPropertyKeys(array).forEach(key=>{defineProperty(result,key,clone(array[key]));});return result;}function cloneOptionObject(obj){const result=Object.getPrototypeOf(obj)===null?Object.create(null):{};getEnumerableOwnPropertyKeys(obj).forEach(key=>{defineProperty(result,key,clone(obj[key]));});return result;}const mergeKeys=(merged,source,keys,mergeOpts)=>{keys.forEach(key=>{if(key in merged&&merged[key]!==Object.getPrototypeOf(merged)){defineProperty(merged,key,merge(merged[key],source[key],mergeOpts));}else{defineProperty(merged,key,clone(source[key]));}});return merged;};const concatArrays=(merged,source,mergeOpts)=>{let result=merged.slice(0,0);let resultIndex=0;[merged,source].forEach(array=>{const indices=[];for(let k=0;k<array.length;k++){if(!hasOwnProperty.call(array,k)){continue;}indices.push(String(k));if(array===merged){defineProperty(result,resultIndex++,array[k]);}else{defineProperty(result,resultIndex++,clone(array[k]));}}result=mergeKeys(result,array,getEnumerableOwnPropertyKeys(array).filter(key=>{return indices.indexOf(key)===-1;}),mergeOpts);});return result;};function merge(merged,source,mergeOpts){if(mergeOpts.concatArrays&&Array.isArray(merged)&&Array.isArray(source)){return concatArrays(merged,source,mergeOpts);}if(!isOptionObject(source)||!isOptionObject(merged)){return clone(source);}return mergeKeys(merged,source,getEnumerableOwnPropertyKeys(source),mergeOpts);}module.exports=function(){const mergeOpts=merge(clone(defaultMergeOpts),this!==globalThis&&this||{},defaultMergeOpts);let merged={foobar:{}};for(let i=0;i<arguments.length;i++){const option=arguments[i];if(option===undefined){continue;}if(!isOptionObject(option)){throw new TypeError('`'+option+'` is not an Option Object');}merged=merge(merged,{foobar:option},mergeOpts);}return merged.foobar;};},5999:function(module,__unusedexports,__webpack_require__){/**
 * Wrapper for built-in http.js to emulate the browser XMLHttpRequest object.
 *
 * This can be used with JS designed for browsers to improve reuse of code and
 * allow the use of existing libraries.
 *
 * Usage: include("XMLHttpRequest.js") and use XMLHttpRequest per W3C specs.
 *
 * @author Dan DeFelippi <dan@driverdan.com>
 * @contributor David Ellis <d.f.ellis@ieee.org>
 * @license MIT
 */var fs=__webpack_require__(662);var Url=__webpack_require__(774);var spawn=__webpack_require__(2041).spawn;module.exports=XMLHttpRequest;XMLHttpRequest.XMLHttpRequest=XMLHttpRequest;function XMLHttpRequest(opts){"use strict";opts=opts||{};var self=this;var http=__webpack_require__(3853);var https=__webpack_require__(2307);var request;var response;var settings={};var disableHeaderCheck=false;var defaultHeaders={"User-Agent":"node-XMLHttpRequest","Accept":"*/*"};var headers=Object.assign({},defaultHeaders);var forbiddenRequestHeaders=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","content-transfer-encoding","cookie","cookie2","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"];var forbiddenRequestMethods=["TRACE","TRACK","CONNECT"];var sendFlag=false;var errorFlag=false;var listeners={};this.UNSENT=0;this.OPENED=1;this.HEADERS_RECEIVED=2;this.LOADING=3;this.DONE=4;this.readyState=this.UNSENT;this.onreadystatechange=null;this.responseText="";this.responseXML="";this.status=null;this.statusText=null;var isAllowedHttpHeader=function(header){return disableHeaderCheck||header&&forbiddenRequestHeaders.indexOf(header.toLowerCase())===-1;};var isAllowedHttpMethod=function(method){return method&&forbiddenRequestMethods.indexOf(method)===-1;};this.open=function(method,url,async,user,password){this.abort();errorFlag=false;if(!isAllowedHttpMethod(method)){throw"SecurityError: Request method not allowed";}settings={"method":method,"url":url.toString(),"async":typeof async!=="boolean"?true:async,"user":user||null,"password":password||null};setState(this.OPENED);};this.setDisableHeaderCheck=function(state){disableHeaderCheck=state;};this.setRequestHeader=function(header,value){if(this.readyState!=this.OPENED){throw"INVALID_STATE_ERR: setRequestHeader can only be called when state is OPEN";return false;}if(!isAllowedHttpHeader(header)){console.warn('Refused to set unsafe header "'+header+'"');return false;}if(sendFlag){throw"INVALID_STATE_ERR: send flag is true";return false;}headers[header]=value;return true;};this.getResponseHeader=function(header){if(typeof header==="string"&&this.readyState>this.OPENED&&response.headers[header.toLowerCase()]&&!errorFlag){return response.headers[header.toLowerCase()];}return null;};this.getAllResponseHeaders=function(){if(this.readyState<this.HEADERS_RECEIVED||errorFlag){return"";}var result="";for(var i in response.headers){if(i!=="set-cookie"&&i!=="set-cookie2"){result+=i+": "+response.headers[i]+"\r\n";}}return result.substr(0,result.length-2);};this.getRequestHeader=function(name){if(typeof name==="string"&&headers[name]){return headers[name];}return"";};this.send=function(data){if(this.readyState!=this.OPENED){throw"INVALID_STATE_ERR: connection must be opened before send() is called";}if(sendFlag){throw"INVALID_STATE_ERR: send has already been called";}var ssl=false,local=false;var url=Url.parse(settings.url);var host;switch(url.protocol){case'https:':ssl=true;case'http:':host=url.hostname;break;case'file:':local=true;break;case undefined:case'':host="localhost";break;default:throw"Protocol not supported.";}if(local){if(settings.method!=="GET"){throw"XMLHttpRequest: Only GET method is supported";}if(settings.async){fs.readFile(url.pathname,'utf8',function(error,data){if(error){self.handleError(error);}else{self.status=200;self.responseText=data;setState(self.DONE);}});}else{try{this.responseText=fs.readFileSync(url.pathname,'utf8');this.status=200;setState(self.DONE);}catch(e){this.handleError(e);}}return;}var port=url.port||(ssl?443:80);var uri=url.pathname+(url.search?url.search:'');headers["Host"]=host;if(!(ssl&&port===443||port===80)){headers["Host"]+=':'+url.port;}if(settings.user){if(typeof settings.password=="undefined"){settings.password="";}var authBuf=new Buffer(settings.user+":"+settings.password);headers["Authorization"]="Basic "+authBuf.toString("base64");}if(settings.method==="GET"||settings.method==="HEAD"){data=null;}else if(data){headers["Content-Length"]=Buffer.isBuffer(data)?data.length:Buffer.byteLength(data);if(!headers["Content-Type"]){headers["Content-Type"]="text/plain;charset=UTF-8";}}else if(settings.method==="POST"){headers["Content-Length"]=0;}var agent=opts.agent||false;var options={host:host,port:port,path:uri,method:settings.method,headers:headers,agent:agent};if(ssl){options.pfx=opts.pfx;options.key=opts.key;options.passphrase=opts.passphrase;options.cert=opts.cert;options.ca=opts.ca;options.ciphers=opts.ciphers;options.rejectUnauthorized=opts.rejectUnauthorized;}errorFlag=false;if(settings.async){var doRequest=ssl?https.request:http.request;sendFlag=true;self.dispatchEvent("readystatechange");var responseHandler=function(resp){response=resp;if(response.statusCode===302||response.statusCode===303||response.statusCode===307){settings.url=response.headers.location;var url=Url.parse(settings.url);host=url.hostname;var newOptions={hostname:url.hostname,port:url.port,path:url.path,method:response.statusCode===303?'GET':settings.method,headers:headers};if(ssl){newOptions.pfx=opts.pfx;newOptions.key=opts.key;newOptions.passphrase=opts.passphrase;newOptions.cert=opts.cert;newOptions.ca=opts.ca;newOptions.ciphers=opts.ciphers;newOptions.rejectUnauthorized=opts.rejectUnauthorized;}request=doRequest(newOptions,responseHandler).on('error',errorHandler);request.end();return;}if(response&&response.setEncoding){response.setEncoding("utf8");}setState(self.HEADERS_RECEIVED);self.status=response.statusCode;response.on('data',function(chunk){if(chunk){self.responseText+=chunk;}if(sendFlag){setState(self.LOADING);}});response.on('end',function(){if(sendFlag){sendFlag=false;setState(self.DONE);}});response.on('error',function(error){self.handleError(error);});};var errorHandler=function(error){self.handleError(error);};request=doRequest(options,responseHandler).on('error',errorHandler);if(data){request.write(data);}request.end();self.dispatchEvent("loadstart");}else{var contentFile=".node-xmlhttprequest-content-"+process.pid;var syncFile=".node-xmlhttprequest-sync-"+process.pid;fs.writeFileSync(syncFile,"","utf8");var execString="var http = require('http'), https = require('https'), fs = require('fs');"+"var doRequest = http"+(ssl?"s":"")+".request;"+"var options = "+JSON.stringify(options)+";"+"var responseText = '';"+"var req = doRequest(options, function(response) {"+"response.setEncoding('utf8');"+"response.on('data', function(chunk) {"+"  responseText += chunk;"+"});"+"response.on('end', function() {"+"fs.writeFileSync('"+contentFile+"', 'NODE-XMLHTTPREQUEST-STATUS:' + response.statusCode + ',' + responseText, 'utf8');"+"fs.unlinkSync('"+syncFile+"');"+"});"+"response.on('error', function(error) {"+"fs.writeFileSync('"+contentFile+"', 'NODE-XMLHTTPREQUEST-ERROR:' + JSON.stringify(error), 'utf8');"+"fs.unlinkSync('"+syncFile+"');"+"});"+"}).on('error', function(error) {"+"fs.writeFileSync('"+contentFile+"', 'NODE-XMLHTTPREQUEST-ERROR:' + JSON.stringify(error), 'utf8');"+"fs.unlinkSync('"+syncFile+"');"+"});"+(data?"req.write('"+data.replace(/'/g,"\\'")+"');":"")+"req.end();";var syncProc=spawn(process.argv[0],["-e",execString]);var statusText;while(fs.existsSync(syncFile)){}self.responseText=fs.readFileSync(contentFile,'utf8');syncProc.stdin.end();fs.unlinkSync(contentFile);if(self.responseText.match(/^NODE-XMLHTTPREQUEST-ERROR:/)){var errorObj=self.responseText.replace(/^NODE-XMLHTTPREQUEST-ERROR:/,"");self.handleError(errorObj);}else{self.status=self.responseText.replace(/^NODE-XMLHTTPREQUEST-STATUS:([0-9]*),.*/,"$1");self.responseText=self.responseText.replace(/^NODE-XMLHTTPREQUEST-STATUS:[0-9]*,(.*)/,"$1");setState(self.DONE);}}};this.handleError=function(error){this.status=503;this.statusText=error;this.responseText=error.stack;errorFlag=true;setState(this.DONE);};this.abort=function(){if(request){request.abort();request=null;}headers=Object.assign({},defaultHeaders);this.responseText="";this.responseXML="";errorFlag=true;if(this.readyState!==this.UNSENT&&(this.readyState!==this.OPENED||sendFlag)&&this.readyState!==this.DONE){sendFlag=false;setState(this.DONE);}this.readyState=this.UNSENT;};this.addEventListener=function(event,callback){if(!(event in listeners)){listeners[event]=[];}listeners[event].push(callback);};this.removeEventListener=function(event,callback){if(event in listeners){listeners[event]=listeners[event].filter(function(ev){return ev!==callback;});}};this.dispatchEvent=function(event){if(typeof self["on"+event]==="function"){self["on"+event]();}if(event in listeners){for(var i=0,len=listeners[event].length;i<len;i++){listeners[event][i].call(self);}}};var setState=function(state){if(self.readyState!==state){self.readyState=state;if(settings.async||self.readyState<self.OPENED||self.readyState===self.DONE){self.dispatchEvent("readystatechange");}if(self.readyState===self.DONE&&!errorFlag){self.dispatchEvent("load");self.dispatchEvent("loadend");}}};};},6000:function(module,__unusedexports,__webpack_require__){"use strict";var getTime=__webpack_require__(7651);function Retimer(callback,timeout,args){var that=this;this._started=getTime();this._rescheduled=0;this._scheduled=timeout;this._args=args;this._timer=setTimeout(timerWrapper,timeout);function timerWrapper(){if(that._rescheduled>0){that._scheduled=that._rescheduled-(getTime()-that._started);that._timer=setTimeout(timerWrapper,that._scheduled);that._rescheduled=0;}else{callback.apply(null,that._args);}}}Retimer.prototype.reschedule=function(timeout){var now=getTime();if(now+timeout-(this._started+this._scheduled)<0){return false;}else{this._started=now;this._rescheduled=timeout;return true;}};Retimer.prototype.clear=function(){clearTimeout(this._timer);};function retimer(){if(typeof arguments[0]!=='function'){throw new Error('callback needed');}if(typeof arguments[1]!=='number'){throw new Error('timeout needed');}var args;if(arguments.length>0){args=new Array(arguments.length-2);for(var i=0;i<args.length;i++){args[i]=arguments[i+2];}}return new Retimer(arguments[0],arguments[1],args);}module.exports=retimer;},6002:function(module){module.exports={doubles:{step:4,points:[['e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a','f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821'],['8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508','11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf'],['175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739','d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695'],['363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640','4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9'],['8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c','4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36'],['723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda','96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f'],['eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa','5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999'],['100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0','cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09'],['e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d','9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d'],['feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d','e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088'],['da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1','9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d'],['53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0','5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8'],['8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047','10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a'],['385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862','283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453'],['6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7','7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160'],['3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd','56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0'],['85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83','7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6'],['948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a','53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589'],['6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8','bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17'],['e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d','4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda'],['e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725','7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd'],['213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754','4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2'],['4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c','17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6'],['fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6','6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f'],['76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39','c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01'],['c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891','893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3'],['d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b','febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f'],['b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03','2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7'],['e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d','eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78'],['a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070','7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1'],['90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4','e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150'],['8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da','662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82'],['e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11','1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc'],['8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e','efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b'],['e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41','2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51'],['b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef','67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45'],['d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8','db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120'],['324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d','648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84'],['4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96','35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d'],['9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd','ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d'],['6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5','9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8'],['a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266','40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8'],['7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71','34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac'],['928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac','c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f'],['85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751','1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962'],['ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e','493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907'],['827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241','c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec'],['eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3','be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d'],['e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f','4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414'],['1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19','aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd'],['146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be','b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0'],['fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9','6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811'],['da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2','8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1'],['a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13','7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c'],['174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c','ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73'],['959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba','2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd'],['d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151','e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405'],['64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073','d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589'],['8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458','38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e'],['13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b','69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27'],['bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366','d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1'],['8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa','40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482'],['8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0','620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945'],['dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787','7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573'],['f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e','ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82']]},naf:{wnd:7,points:[['f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9','388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672'],['2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4','d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6'],['5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc','6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da'],['acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe','cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37'],['774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb','d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b'],['f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8','ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81'],['d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e','581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58'],['defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34','4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77'],['2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c','85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a'],['352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5','321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c'],['2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f','2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67'],['9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714','73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402'],['daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729','a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55'],['c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db','2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482'],['6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4','e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82'],['1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5','b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396'],['605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479','2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49'],['62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d','80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf'],['80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f','1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a'],['7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb','d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7'],['d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9','eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933'],['49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963','758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a'],['77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74','958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6'],['f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530','e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37'],['463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b','5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e'],['f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247','cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6'],['caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1','cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476'],['2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120','4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40'],['7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435','91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61'],['754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18','673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683'],['e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8','59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5'],['186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb','3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b'],['df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f','55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417'],['5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143','efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868'],['290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba','e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a'],['af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45','f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6'],['766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a','744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996'],['59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e','c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e'],['f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8','e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d'],['7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c','30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2'],['948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519','e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e'],['7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab','100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437'],['3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca','ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311'],['d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf','8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4'],['1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610','68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575'],['733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4','f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d'],['15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c','d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d'],['a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940','edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629'],['e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980','a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06'],['311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3','66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374'],['34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf','9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee'],['f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63','4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1'],['d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448','fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b'],['32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf','5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661'],['7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5','8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6'],['ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6','8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e'],['16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5','5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d'],['eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99','f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc'],['78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51','f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4'],['494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5','42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c'],['a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5','204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b'],['c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997','4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913'],['841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881','73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154'],['5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5','39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865'],['36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66','d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc'],['336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726','ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224'],['8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede','6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e'],['1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94','60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6'],['85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31','3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511'],['29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51','b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b'],['a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252','ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2'],['4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5','cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c'],['d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b','6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3'],['ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4','322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d'],['af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f','6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700'],['e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889','2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4'],['591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246','b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196'],['11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984','998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4'],['3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a','b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257'],['cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030','bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13'],['c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197','6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096'],['c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593','c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38'],['a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef','21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f'],['347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38','60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448'],['da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a','49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a'],['c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111','5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4'],['4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502','7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437'],['3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea','be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7'],['cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26','8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d'],['b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986','39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a'],['d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e','62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54'],['48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4','25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77'],['dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda','ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517'],['6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859','cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10'],['e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f','f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125'],['eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c','6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e'],['13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942','fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1'],['ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a','1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2'],['b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80','5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423'],['ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d','438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8'],['8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1','cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758'],['52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63','c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375'],['e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352','6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d'],['7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193','ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec'],['5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00','9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0'],['32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58','ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c'],['e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7','d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4'],['8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8','c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f'],['4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e','67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649'],['3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d','cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826'],['674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b','299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5'],['d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f','f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87'],['30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6','462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b'],['be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297','62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc'],['93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a','7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c'],['b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c','ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f'],['d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52','4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a'],['d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb','bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46'],['463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065','bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f'],['7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917','603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03'],['74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9','cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08'],['30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3','553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8'],['9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57','712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373'],['176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66','ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3'],['75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8','9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8'],['809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721','9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1'],['1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180','4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9']]}};},6003:function(module,__unusedexports,__webpack_require__){"use strict";const forgePbkdf2=__webpack_require__(9051);const forgeUtil=__webpack_require__(1214);const hashName={sha1:'sha1','sha2-256':'sha256','sha2-512':'sha512'};function pbkdf2(password,salt,iterations,keySize,hash){const hasher=hashName[hash];if(!hasher){throw new Error(`Hash '${hash}' is unknown or not supported`);}const dek=forgePbkdf2(password,salt,iterations,keySize,hasher);return forgeUtil.encode64(dek);}module.exports=pbkdf2;},6016:function(module){function arrayMap(array,iteratee){var index=-1,length=array==null?0:array.length,result=Array(length);while(++index<length){result[index]=iteratee(array[index],index,array);}return result;}module.exports=arrayMap;},6038:function(module,__unusedexports,__webpack_require__){"use strict";const debug=__webpack_require__(746);const log=debug('libp2p:websocket-star');const multiaddr=__webpack_require__(5920);const EE=__webpack_require__(4859).EventEmitter;const PeerId=__webpack_require__(1832);const PeerInfo=__webpack_require__(9265);const Connection=__webpack_require__(378).Connection;const setImmediate=__webpack_require__(7368);const utils=__webpack_require__(3850);const Listener=__webpack_require__(7704);const cleanUrlSIO=utils.cleanUrlSIO;const mafmt=__webpack_require__(7511);const withIs=__webpack_require__(3171);class WebsocketStar{constructor(options){options=options||{};this.id=options.id;this.flag=options.allowJoinWithDisabledChallenge;this.discovery=new EE();this.discovery.tag='websocketStar';this.discovery.start=callback=>{setImmediate(callback);};this.discovery.stop=callback=>{setImmediate(callback);};this.listeners_list={};this._peerDiscovered=this._peerDiscovered.bind(this);}lazySetId(id){if(!id)return;this.id=id;this.canCrypto=true;}dial(ma,options,callback){if(typeof options==='function'){callback=options;options={};}let url;try{url=cleanUrlSIO(ma);}catch(err){return callback(err);}const listener=this.listeners_list[url];if(!listener){callback(new Error('No listener for this server'));return new Connection();}return listener.dial(ma,options,callback);}createListener(options,handler){if(typeof options==='function'){handler=options;options={};}const listener=new Listener({id:this.id,handler,listeners:this.listeners_list,flag:this.flag});listener.on('peer',this._peerDiscovered);return listener;}filter(multiaddrs){if(!Array.isArray(multiaddrs)){multiaddrs=[multiaddrs];}return multiaddrs.filter(ma=>mafmt.WebSocketStar.matches(ma));}_peerDiscovered(maStr){log('Peer Discovered:',maStr);const peerIdStr=maStr.split('/ipfs/').pop();const peerId=PeerId.createFromB58String(peerIdStr);const peerInfo=new PeerInfo(peerId);peerInfo.multiaddrs.add(multiaddr(maStr));this.discovery.emit('peer',peerInfo);}}module.exports=withIs(WebsocketStar,{className:'WebsocketStar',symbolName:'@libp2p/js-libp2p-websocket-star/websocketstar'});},6043:function(module,__unusedexports,__webpack_require__){var xtend=__webpack_require__(7756);var AbstractIterator=__webpack_require__(4679);var AbstractChainedBatch=__webpack_require__(9849);var hasOwnProperty=Object.prototype.hasOwnProperty;var rangeOptions='start end gt gte lt lte'.split(' ');function AbstractLevelDOWN(location){if(!arguments.length||location===undefined){throw new Error('constructor requires at least a location argument');}if(typeof location!=='string'){throw new Error('constructor requires a location string argument');}this.location=location;this.status='new';}AbstractLevelDOWN.prototype.open=function(options,callback){var self=this;var oldStatus=this.status;if(typeof options==='function'){callback=options;}if(typeof callback!=='function'){throw new Error('open() requires a callback argument');}if(typeof options!=='object'){options={};}options.createIfMissing=options.createIfMissing!==false;options.errorIfExists=!!options.errorIfExists;this.status='opening';this._open(options,function(err){if(err){self.status=oldStatus;return callback(err);}self.status='open';callback();});};AbstractLevelDOWN.prototype._open=function(options,callback){process.nextTick(callback);};AbstractLevelDOWN.prototype.close=function(callback){var self=this;var oldStatus=this.status;if(typeof callback!=='function'){throw new Error('close() requires a callback argument');}this.status='closing';this._close(function(err){if(err){self.status=oldStatus;return callback(err);}self.status='closed';callback();});};AbstractLevelDOWN.prototype._close=function(callback){process.nextTick(callback);};AbstractLevelDOWN.prototype.get=function(key,options,callback){if(typeof options==='function'){callback=options;}if(typeof callback!=='function'){throw new Error('get() requires a callback argument');}var err=this._checkKey(key,'key');if(err)return process.nextTick(callback,err);key=this._serializeKey(key);if(typeof options!=='object'){options={};}options.asBuffer=options.asBuffer!==false;this._get(key,options,callback);};AbstractLevelDOWN.prototype._get=function(key,options,callback){process.nextTick(function(){callback(new Error('NotFound'));});};AbstractLevelDOWN.prototype.put=function(key,value,options,callback){if(typeof options==='function'){callback=options;}if(typeof callback!=='function'){throw new Error('put() requires a callback argument');}var err=this._checkKey(key,'key');if(err)return process.nextTick(callback,err);key=this._serializeKey(key);value=this._serializeValue(value);if(typeof options!=='object'){options={};}this._put(key,value,options,callback);};AbstractLevelDOWN.prototype._put=function(key,value,options,callback){process.nextTick(callback);};AbstractLevelDOWN.prototype.del=function(key,options,callback){if(typeof options==='function'){callback=options;}if(typeof callback!=='function'){throw new Error('del() requires a callback argument');}var err=this._checkKey(key,'key');if(err)return process.nextTick(callback,err);key=this._serializeKey(key);if(typeof options!=='object'){options={};}this._del(key,options,callback);};AbstractLevelDOWN.prototype._del=function(key,options,callback){process.nextTick(callback);};AbstractLevelDOWN.prototype.batch=function(array,options,callback){if(!arguments.length){return this._chainedBatch();}if(typeof options==='function'){callback=options;}if(typeof array==='function'){callback=array;}if(typeof callback!=='function'){throw new Error('batch(array) requires a callback argument');}if(!Array.isArray(array)){return process.nextTick(callback,new Error('batch(array) requires an array argument'));}if(!options||typeof options!=='object'){options={};}var serialized=new Array(array.length);for(var i=0;i<array.length;i++){if(typeof array[i]!=='object'||array[i]===null){return process.nextTick(callback,new Error('batch(array) element must be an object and not `null`'));}var e=xtend(array[i]);if(e.type!=='put'&&e.type!=='del'){return process.nextTick(callback,new Error("`type` must be 'put' or 'del'"));}var err=this._checkKey(e.key,'key');if(err)return process.nextTick(callback,err);e.key=this._serializeKey(e.key);if(e.type==='put'){e.value=this._serializeValue(e.value);}serialized[i]=e;}this._batch(serialized,options,callback);};AbstractLevelDOWN.prototype._batch=function(array,options,callback){process.nextTick(callback);};AbstractLevelDOWN.prototype._setupIteratorOptions=function(options){options=cleanRangeOptions(options);options.reverse=!!options.reverse;options.keys=options.keys!==false;options.values=options.values!==false;options.limit='limit'in options?options.limit:-1;options.keyAsBuffer=options.keyAsBuffer!==false;options.valueAsBuffer=options.valueAsBuffer!==false;return options;};function cleanRangeOptions(options){var result={};for(var k in options){if(!hasOwnProperty.call(options,k))continue;if(isRangeOption(k)&&isEmptyRangeOption(options[k]))continue;result[k]=options[k];}return result;}function isRangeOption(k){return rangeOptions.indexOf(k)!==-1;}function isEmptyRangeOption(v){return v===''||v==null||isEmptyBuffer(v);}function isEmptyBuffer(v){return Buffer.isBuffer(v)&&v.length===0;}AbstractLevelDOWN.prototype.iterator=function(options){if(typeof options!=='object'){options={};}options=this._setupIteratorOptions(options);return this._iterator(options);};AbstractLevelDOWN.prototype._iterator=function(options){return new AbstractIterator(this);};AbstractLevelDOWN.prototype._chainedBatch=function(){return new AbstractChainedBatch(this);};AbstractLevelDOWN.prototype._serializeKey=function(key){return Buffer.isBuffer(key)?key:String(key);};AbstractLevelDOWN.prototype._serializeValue=function(value){if(value==null)return'';return Buffer.isBuffer(value)||process.browser?value:String(value);};AbstractLevelDOWN.prototype._checkKey=function(obj,type){if(obj===null||obj===undefined){return new Error(type+' cannot be `null` or `undefined`');}if(Buffer.isBuffer(obj)&&obj.length===0){return new Error(type+' cannot be an empty Buffer');}if(String(obj)===''){return new Error(type+' cannot be an empty String');}};module.exports=AbstractLevelDOWN;},6044:function(module,__unusedexports,__webpack_require__){"use strict";const Net=__webpack_require__(1939);const Hoek=__webpack_require__(2850);const Any=__webpack_require__(7492);const Ref=__webpack_require__(1937);const JoiDate=__webpack_require__(1553);const Uri=__webpack_require__(4198);const Ip=__webpack_require__(8886);let Isemail;const internals={uriRegex:Uri.createUriRegex(),ipRegex:Ip.createIpRegex(['ipv4','ipv6','ipvfuture'],'optional'),guidBrackets:{'{':'}','[':']','(':')','':''},guidVersions:{uuidv1:'1',uuidv2:'2',uuidv3:'3',uuidv4:'4',uuidv5:'5'},cidrPresences:['required','optional','forbidden'],normalizationForms:['NFC','NFD','NFKC','NFKD']};internals.String=class extends Any{constructor(){super();this._type='string';this._invalids.add('');}_base(value,state,options){if(typeof value==='string'&&options.convert){if(this._flags.normalize){value=value.normalize(this._flags.normalize);}if(this._flags.case){value=this._flags.case==='upper'?value.toLocaleUpperCase():value.toLocaleLowerCase();}if(this._flags.trim){value=value.trim();}if(this._inner.replacements){for(let i=0;i<this._inner.replacements.length;++i){const replacement=this._inner.replacements[i];value=value.replace(replacement.pattern,replacement.replacement);}}if(this._flags.truncate){for(let i=0;i<this._tests.length;++i){const test=this._tests[i];if(test.name==='max'){value=value.slice(0,test.arg);break;}}}if(this._flags.byteAligned&&value.length%2!==0){value=`0${value}`;}}return{value,errors:typeof value==='string'?null:this.createError('string.base',{value},state,options)};}insensitive(){if(this._flags.insensitive){return this;}const obj=this.clone();obj._flags.insensitive=true;return obj;}creditCard(){return this._test('creditCard',undefined,function(value,state,options){let i=value.length;let sum=0;let mul=1;while(i--){const char=value.charAt(i)*mul;sum=sum+(char-(char>9)*9);mul=mul^3;}const check=sum%10===0&&sum>0;return check?value:this.createError('string.creditCard',{value},state,options);});}regex(pattern,patternOptions){Hoek.assert(pattern instanceof RegExp,'pattern must be a RegExp');Hoek.assert(!pattern.flags.includes('g')&&!pattern.flags.includes('y'),'pattern should not use global or sticky mode');const patternObject={pattern};if(typeof patternOptions==='string'){patternObject.name=patternOptions;}else if(typeof patternOptions==='object'){patternObject.invert=!!patternOptions.invert;if(patternOptions.name){patternObject.name=patternOptions.name;}}const errorCode=['string.regex',patternObject.invert?'.invert':'',patternObject.name?'.name':'.base'].join('');return this._test('regex',patternObject,function(value,state,options){const patternMatch=patternObject.pattern.test(value);if(patternMatch^patternObject.invert){return value;}return this.createError(errorCode,{name:patternObject.name,pattern:patternObject.pattern,value},state,options);});}alphanum(){return this._test('alphanum',undefined,function(value,state,options){if(/^[a-zA-Z0-9]+$/.test(value)){return value;}return this.createError('string.alphanum',{value},state,options);});}token(){return this._test('token',undefined,function(value,state,options){if(/^\w+$/.test(value)){return value;}return this.createError('string.token',{value},state,options);});}email(isEmailOptions){if(isEmailOptions){Hoek.assert(typeof isEmailOptions==='object','email options must be an object');Hoek.assert(typeof isEmailOptions.checkDNS==='undefined','checkDNS option is not supported');Hoek.assert(typeof isEmailOptions.tldWhitelist==='undefined'||typeof isEmailOptions.tldWhitelist==='object','tldWhitelist must be an array or object');Hoek.assert(typeof isEmailOptions.minDomainAtoms==='undefined'||Number.isSafeInteger(isEmailOptions.minDomainAtoms)&&isEmailOptions.minDomainAtoms>0,'minDomainAtoms must be a positive integer');Hoek.assert(typeof isEmailOptions.errorLevel==='undefined'||typeof isEmailOptions.errorLevel==='boolean'||Number.isSafeInteger(isEmailOptions.errorLevel)&&isEmailOptions.errorLevel>=0,'errorLevel must be a non-negative integer or boolean');}return this._test('email',isEmailOptions,function(value,state,options){Isemail=Isemail||__webpack_require__(9013);try{const result=Isemail.validate(value,isEmailOptions);if(result===true||result===0){return value;}}catch(e){}return this.createError('string.email',{value},state,options);});}ip(ipOptions={}){let regex=internals.ipRegex;Hoek.assert(typeof ipOptions==='object','options must be an object');if(ipOptions.cidr){Hoek.assert(typeof ipOptions.cidr==='string','cidr must be a string');ipOptions.cidr=ipOptions.cidr.toLowerCase();Hoek.assert(Hoek.contain(internals.cidrPresences,ipOptions.cidr),'cidr must be one of '+internals.cidrPresences.join(', '));if(!ipOptions.version&&ipOptions.cidr!=='optional'){regex=Ip.createIpRegex(['ipv4','ipv6','ipvfuture'],ipOptions.cidr);}}else{ipOptions.cidr='optional';}let versions;if(ipOptions.version){if(!Array.isArray(ipOptions.version)){ipOptions.version=[ipOptions.version];}Hoek.assert(ipOptions.version.length>=1,'version must have at least 1 version specified');versions=[];for(let i=0;i<ipOptions.version.length;++i){let version=ipOptions.version[i];Hoek.assert(typeof version==='string','version at position '+i+' must be a string');version=version.toLowerCase();Hoek.assert(Ip.versions[version],'version at position '+i+' must be one of '+Object.keys(Ip.versions).join(', '));versions.push(version);}versions=Array.from(new Set(versions));regex=Ip.createIpRegex(versions,ipOptions.cidr);}return this._test('ip',ipOptions,function(value,state,options){if(regex.test(value)){return value;}if(versions){return this.createError('string.ipVersion',{value,cidr:ipOptions.cidr,version:versions},state,options);}return this.createError('string.ip',{value,cidr:ipOptions.cidr},state,options);});}uri(uriOptions){let customScheme='';let allowRelative=false;let relativeOnly=false;let allowQuerySquareBrackets=false;let regex=internals.uriRegex;if(uriOptions){Hoek.assert(typeof uriOptions==='object','options must be an object');const unknownOptions=Object.keys(uriOptions).filter(key=>!['scheme','allowRelative','relativeOnly','allowQuerySquareBrackets'].includes(key));Hoek.assert(unknownOptions.length===0,`options contain unknown keys: ${unknownOptions}`);if(uriOptions.scheme){Hoek.assert(uriOptions.scheme instanceof RegExp||typeof uriOptions.scheme==='string'||Array.isArray(uriOptions.scheme),'scheme must be a RegExp, String, or Array');if(!Array.isArray(uriOptions.scheme)){uriOptions.scheme=[uriOptions.scheme];}Hoek.assert(uriOptions.scheme.length>=1,'scheme must have at least 1 scheme specified');for(let i=0;i<uriOptions.scheme.length;++i){const scheme=uriOptions.scheme[i];Hoek.assert(scheme instanceof RegExp||typeof scheme==='string','scheme at position '+i+' must be a RegExp or String');customScheme=customScheme+(customScheme?'|':'');if(scheme instanceof RegExp){customScheme=customScheme+scheme.source;}else{Hoek.assert(/[a-zA-Z][a-zA-Z0-9+-\.]*/.test(scheme),'scheme at position '+i+' must be a valid scheme');customScheme=customScheme+Hoek.escapeRegex(scheme);}}}if(uriOptions.allowRelative){allowRelative=true;}if(uriOptions.relativeOnly){relativeOnly=true;}if(uriOptions.allowQuerySquareBrackets){allowQuerySquareBrackets=true;}}if(customScheme||allowRelative||relativeOnly||allowQuerySquareBrackets){regex=Uri.createUriRegex(customScheme,allowRelative,relativeOnly,allowQuerySquareBrackets);}return this._test('uri',uriOptions,function(value,state,options){if(regex.test(value)){return value;}if(relativeOnly){return this.createError('string.uriRelativeOnly',{value},state,options);}if(customScheme){return this.createError('string.uriCustomScheme',{scheme:customScheme,value},state,options);}return this.createError('string.uri',{value},state,options);});}isoDate(){return this._test('isoDate',undefined,function(value,state,options){if(JoiDate._isIsoDate(value)){if(!options.convert){return value;}const d=new Date(value);if(!isNaN(d.getTime())){return d.toISOString();}}return this.createError('string.isoDate',{value},state,options);});}guid(guidOptions){let versionNumbers='';if(guidOptions&&guidOptions.version){if(!Array.isArray(guidOptions.version)){guidOptions.version=[guidOptions.version];}Hoek.assert(guidOptions.version.length>=1,'version must have at least 1 valid version specified');const versions=new Set();for(let i=0;i<guidOptions.version.length;++i){let version=guidOptions.version[i];Hoek.assert(typeof version==='string','version at position '+i+' must be a string');version=version.toLowerCase();const versionNumber=internals.guidVersions[version];Hoek.assert(versionNumber,'version at position '+i+' must be one of '+Object.keys(internals.guidVersions).join(', '));Hoek.assert(!versions.has(versionNumber),'version at position '+i+' must not be a duplicate.');versionNumbers+=versionNumber;versions.add(versionNumber);}}const guidRegex=new RegExp(`^([\\[{\\(]?)[0-9A-F]{8}([:-]?)[0-9A-F]{4}\\2?[${versionNumbers||'0-9A-F'}][0-9A-F]{3}\\2?[${versionNumbers?'89AB':'0-9A-F'}][0-9A-F]{3}\\2?[0-9A-F]{12}([\\]}\\)]?)$`,'i');return this._test('guid',guidOptions,function(value,state,options){const results=guidRegex.exec(value);if(!results){return this.createError('string.guid',{value},state,options);}if(internals.guidBrackets[results[1]]!==results[results.length-1]){return this.createError('string.guid',{value},state,options);}return value;});}hex(hexOptions={}){Hoek.assert(typeof hexOptions==='object','hex options must be an object');Hoek.assert(typeof hexOptions.byteAligned==='undefined'||typeof hexOptions.byteAligned==='boolean','byteAligned must be boolean');const byteAligned=hexOptions.byteAligned===true;const regex=/^[a-f0-9]+$/i;const obj=this._test('hex',regex,function(value,state,options){if(regex.test(value)){if(byteAligned&&value.length%2!==0){return this.createError('string.hexAlign',{value},state,options);}return value;}return this.createError('string.hex',{value},state,options);});if(byteAligned){obj._flags.byteAligned=true;}return obj;}base64(base64Options={}){Hoek.assert(typeof base64Options==='object','base64 options must be an object');Hoek.assert(typeof base64Options.paddingRequired==='undefined'||typeof base64Options.paddingRequired==='boolean','paddingRequired must be boolean');const paddingRequired=base64Options.paddingRequired===false?base64Options.paddingRequired:base64Options.paddingRequired||true;const regex=paddingRequired?/^(?:[A-Za-z0-9+\/]{4})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/:/^(?:[A-Za-z0-9+\/]{4})*(?:[A-Za-z0-9+\/]{2}(==)?|[A-Za-z0-9+\/]{3}=?)?$/;return this._test('base64',regex,function(value,state,options){if(regex.test(value)){return value;}return this.createError('string.base64',{value},state,options);});}dataUri(dataUriOptions={}){const regex=/^data:[\w+.-]+\/[\w+.-]+;((charset=[\w-]+|base64),)?(.*)$/;const paddingRequired=dataUriOptions.paddingRequired===false?dataUriOptions.paddingRequired:dataUriOptions.paddingRequired||true;const base64regex=paddingRequired?/^(?:[A-Za-z0-9+\/]{4})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/:/^(?:[A-Za-z0-9+\/]{4})*(?:[A-Za-z0-9+\/]{2}(==)?|[A-Za-z0-9+\/]{3}=?)?$/;return this._test('dataUri',regex,function(value,state,options){const matches=value.match(regex);if(matches){if(!matches[2]){return value;}if(matches[2]!=='base64'){return value;}if(base64regex.test(matches[3])){return value;}}return this.createError('string.dataUri',{value},state,options);});}hostname(){const regex=/^(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9\-]*[A-Za-z0-9])$/;return this._test('hostname',undefined,function(value,state,options){if(value.length<=255&&regex.test(value)||Net.isIPv6(value)){return value;}return this.createError('string.hostname',{value},state,options);});}normalize(form='NFC'){Hoek.assert(Hoek.contain(internals.normalizationForms,form),'normalization form must be one of '+internals.normalizationForms.join(', '));const obj=this._test('normalize',form,function(value,state,options){if(options.convert||value===value.normalize(form)){return value;}return this.createError('string.normalize',{value,form},state,options);});obj._flags.normalize=form;return obj;}lowercase(){const obj=this._test('lowercase',undefined,function(value,state,options){if(options.convert||value===value.toLocaleLowerCase()){return value;}return this.createError('string.lowercase',{value},state,options);});obj._flags.case='lower';return obj;}uppercase(){const obj=this._test('uppercase',undefined,function(value,state,options){if(options.convert||value===value.toLocaleUpperCase()){return value;}return this.createError('string.uppercase',{value},state,options);});obj._flags.case='upper';return obj;}trim(enabled=true){Hoek.assert(typeof enabled==='boolean','option must be a boolean');if(this._flags.trim&&enabled||!this._flags.trim&&!enabled){return this;}let obj;if(enabled){obj=this._test('trim',undefined,function(value,state,options){if(options.convert||value===value.trim()){return value;}return this.createError('string.trim',{value},state,options);});}else{obj=this.clone();obj._tests=obj._tests.filter(test=>test.name!=='trim');}obj._flags.trim=enabled;return obj;}replace(pattern,replacement){if(typeof pattern==='string'){pattern=new RegExp(Hoek.escapeRegex(pattern),'g');}Hoek.assert(pattern instanceof RegExp,'pattern must be a RegExp');Hoek.assert(typeof replacement==='string','replacement must be a String');const obj=this.clone();if(!obj._inner.replacements){obj._inner.replacements=[];}obj._inner.replacements.push({pattern,replacement});return obj;}truncate(enabled){const value=enabled===undefined?true:!!enabled;if(this._flags.truncate===value){return this;}const obj=this.clone();obj._flags.truncate=value;return obj;}};internals.compare=function(type,compare){return function(limit,encoding){const isRef=Ref.isRef(limit);Hoek.assert(Number.isSafeInteger(limit)&&limit>=0||isRef,'limit must be a positive integer or reference');Hoek.assert(!encoding||Buffer.isEncoding(encoding),'Invalid encoding:',encoding);return this._test(type,limit,function(value,state,options){let compareTo;if(isRef){compareTo=limit(state.reference||state.parent,options);if(!Number.isSafeInteger(compareTo)){return this.createError('string.ref',{ref:limit,value:compareTo},state,options);}}else{compareTo=limit;}if(compare(value,compareTo,encoding)){return value;}return this.createError('string.'+type,{limit:compareTo,value,encoding},state,options);});};};internals.String.prototype.min=internals.compare('min',(value,limit,encoding)=>{const length=encoding?Buffer.byteLength(value,encoding):value.length;return length>=limit;});internals.String.prototype.max=internals.compare('max',(value,limit,encoding)=>{const length=encoding?Buffer.byteLength(value,encoding):value.length;return length<=limit;});internals.String.prototype.length=internals.compare('length',(value,limit,encoding)=>{const length=encoding?Buffer.byteLength(value,encoding):value.length;return length===limit;});internals.String.prototype.uuid=internals.String.prototype.guid;module.exports=new internals.String();},6047:function(module,__unusedexports,__webpack_require__){"use strict";var _=__webpack_require__(6064);var $=__webpack_require__(5107);var errors=__webpack_require__(6379);var BufferWriter=__webpack_require__(2418);var buffer=__webpack_require__(9423);var BufferUtil=__webpack_require__(9657);var JSUtil=__webpack_require__(8416);var Script=__webpack_require__(5355);var Sighash=__webpack_require__(9845);var Output=__webpack_require__(1143);var MAXINT=0xffffffff;var DEFAULT_RBF_SEQNUMBER=MAXINT-2;var DEFAULT_SEQNUMBER=MAXINT;var DEFAULT_LOCKTIME_SEQNUMBER=MAXINT-1;function Input(params){if(!(this instanceof Input)){return new Input(params);}if(params){return this._fromObject(params);}}Input.MAXINT=MAXINT;Input.DEFAULT_SEQNUMBER=DEFAULT_SEQNUMBER;Input.DEFAULT_LOCKTIME_SEQNUMBER=DEFAULT_LOCKTIME_SEQNUMBER;Input.DEFAULT_RBF_SEQNUMBER=DEFAULT_RBF_SEQNUMBER;Object.defineProperty(Input.prototype,'script',{configurable:false,enumerable:true,get:function(){if(this.isNull()){return null;}if(!this._script){this._script=new Script(this._scriptBuffer);this._script._isInput=true;}return this._script;}});Input.fromObject=function(obj){$.checkArgument(_.isObject(obj));var input=new Input();return input._fromObject(obj);};Input.prototype._fromObject=function(params){var prevTxId;if(_.isString(params.prevTxId)&&JSUtil.isHexa(params.prevTxId)){prevTxId=new buffer.Buffer(params.prevTxId,'hex');}else{prevTxId=params.prevTxId;}this.output=params.output?params.output instanceof Output?params.output:new Output(params.output):undefined;this.prevTxId=prevTxId||params.txidbuf;this.outputIndex=_.isUndefined(params.outputIndex)?params.txoutnum:params.outputIndex;this.sequenceNumber=_.isUndefined(params.sequenceNumber)?_.isUndefined(params.seqnum)?DEFAULT_SEQNUMBER:params.seqnum:params.sequenceNumber;if(_.isUndefined(params.script)&&_.isUndefined(params.scriptBuffer)){throw new errors.Transaction.Input.MissingScript();}this.setScript(params.scriptBuffer||params.script);return this;};Input.prototype.toObject=Input.prototype.toJSON=function toObject(){var obj={prevTxId:this.prevTxId.toString('hex'),outputIndex:this.outputIndex,sequenceNumber:this.sequenceNumber,script:this._scriptBuffer.toString('hex')};if(this.script){obj.scriptString=this.script.toString();}if(this.output){obj.output=this.output.toObject();}return obj;};Input.fromBufferReader=function(br){var input=new Input();input.prevTxId=br.readReverse(32);input.outputIndex=br.readUInt32LE();input._scriptBuffer=br.readVarLengthBuffer();input.sequenceNumber=br.readUInt32LE();return input;};Input.prototype.toBufferWriter=function(writer){if(!writer){writer=new BufferWriter();}writer.writeReverse(this.prevTxId);writer.writeUInt32LE(this.outputIndex);var script=this._scriptBuffer;writer.writeVarintNum(script.length);writer.write(script);writer.writeUInt32LE(this.sequenceNumber);return writer;};Input.prototype.setScript=function(script){this._script=null;if(script instanceof Script){this._script=script;this._script._isInput=true;this._scriptBuffer=script.toBuffer();}else if(JSUtil.isHexa(script)){this._scriptBuffer=new buffer.Buffer(script,'hex');}else if(_.isString(script)){this._script=new Script(script);this._script._isInput=true;this._scriptBuffer=this._script.toBuffer();}else if(BufferUtil.isBuffer(script)){this._scriptBuffer=new buffer.Buffer(script);}else{throw new TypeError('Invalid argument type: script');}return this;};Input.prototype.getSignatures=function(){throw new errors.AbstractMethodInvoked('Trying to sign unsupported output type (only P2PKH and P2SH multisig inputs are supported)'+' for input: '+JSON.stringify(this));};Input.prototype.isFullySigned=function(){throw new errors.AbstractMethodInvoked('Input#isFullySigned');};Input.prototype.isFinal=function(){return this.sequenceNumber!==4294967295;};Input.prototype.addSignature=function(){throw new errors.AbstractMethodInvoked('Input#addSignature');};Input.prototype.clearSignatures=function(){throw new errors.AbstractMethodInvoked('Input#clearSignatures');};Input.prototype.isValidSignature=function(transaction,signature){signature.signature.nhashtype=signature.sigtype;return Sighash.verify(transaction,signature.signature,signature.publicKey,signature.inputIndex,this.output.script);};Input.prototype.isNull=function(){return this.prevTxId.toString('hex')==='0000000000000000000000000000000000000000000000000000000000000000'&&this.outputIndex===0xffffffff;};Input.prototype._estimateSize=function(){return this.toBufferWriter().toBuffer().length;};module.exports=Input;},6049:function(module){var symbolTag='[object Symbol]';var objectProto=Object.prototype;var objectToString=objectProto.toString;function baseExtremum(array,iteratee,comparator){var index=-1,length=array.length;while(++index<length){var value=array[index],current=iteratee(value);if(current!=null&&(computed===undefined?current===current&&!isSymbol(current):comparator(current,computed))){var computed=current,result=value;}}return result;}function baseGt(value,other){return value>other;}function isObjectLike(value){return!!value&&typeof value=='object';}function isSymbol(value){return typeof value=='symbol'||isObjectLike(value)&&objectToString.call(value)==symbolTag;}function identity(value){return value;}function max(array){return array&&array.length?baseExtremum(array,identity,baseGt):undefined;}module.exports=max;},6050:function(module,__unusedexports,__webpack_require__){var forge=__webpack_require__(7938);__webpack_require__(6321);__webpack_require__(1214);var sha256=module.exports=forge.sha256=forge.sha256||{};forge.md.sha256=forge.md.algorithms.sha256=sha256;sha256.create=function(){if(!_initialized){_init();}var _state=null;var _input=forge.util.createBuffer();var _w=new Array(64);var md={algorithm:'sha256',blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};md.start=function(){md.messageLength=0;md.fullMessageLength=md.messageLength64=[];var int32s=md.messageLengthSize/4;for(var i=0;i<int32s;++i){md.fullMessageLength.push(0);}_input=forge.util.createBuffer();_state={h0:0x6A09E667,h1:0xBB67AE85,h2:0x3C6EF372,h3:0xA54FF53A,h4:0x510E527F,h5:0x9B05688C,h6:0x1F83D9AB,h7:0x5BE0CD19};return md;};md.start();md.update=function(msg,encoding){if(encoding==='utf8'){msg=forge.util.encodeUtf8(msg);}var len=msg.length;md.messageLength+=len;len=[len/0x100000000>>>0,len>>>0];for(var i=md.fullMessageLength.length-1;i>=0;--i){md.fullMessageLength[i]+=len[1];len[1]=len[0]+(md.fullMessageLength[i]/0x100000000>>>0);md.fullMessageLength[i]=md.fullMessageLength[i]>>>0;len[0]=len[1]/0x100000000>>>0;}_input.putBytes(msg);_update(_state,_w,_input);if(_input.read>2048||_input.length()===0){_input.compact();}return md;};md.digest=function(){var finalBlock=forge.util.createBuffer();finalBlock.putBytes(_input.bytes());var remaining=md.fullMessageLength[md.fullMessageLength.length-1]+md.messageLengthSize;var overflow=remaining&md.blockLength-1;finalBlock.putBytes(_padding.substr(0,md.blockLength-overflow));var next,carry;var bits=md.fullMessageLength[0]*8;for(var i=0;i<md.fullMessageLength.length-1;++i){next=md.fullMessageLength[i+1]*8;carry=next/0x100000000>>>0;bits+=carry;finalBlock.putInt32(bits>>>0);bits=next>>>0;}finalBlock.putInt32(bits);var s2={h0:_state.h0,h1:_state.h1,h2:_state.h2,h3:_state.h3,h4:_state.h4,h5:_state.h5,h6:_state.h6,h7:_state.h7};_update(s2,_w,finalBlock);var rval=forge.util.createBuffer();rval.putInt32(s2.h0);rval.putInt32(s2.h1);rval.putInt32(s2.h2);rval.putInt32(s2.h3);rval.putInt32(s2.h4);rval.putInt32(s2.h5);rval.putInt32(s2.h6);rval.putInt32(s2.h7);return rval;};return md;};var _padding=null;var _initialized=false;var _k=null;function _init(){_padding=String.fromCharCode(128);_padding+=forge.util.fillString(String.fromCharCode(0x00),64);_k=[0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0x0fc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x06ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2];_initialized=true;}function _update(s,w,bytes){var t1,t2,s0,s1,ch,maj,i,a,b,c,d,e,f,g,h;var len=bytes.length();while(len>=64){for(i=0;i<16;++i){w[i]=bytes.getInt32();}for(;i<64;++i){t1=w[i-2];t1=(t1>>>17|t1<<15)^(t1>>>19|t1<<13)^t1>>>10;t2=w[i-15];t2=(t2>>>7|t2<<25)^(t2>>>18|t2<<14)^t2>>>3;w[i]=t1+w[i-7]+t2+w[i-16]|0;}a=s.h0;b=s.h1;c=s.h2;d=s.h3;e=s.h4;f=s.h5;g=s.h6;h=s.h7;for(i=0;i<64;++i){s1=(e>>>6|e<<26)^(e>>>11|e<<21)^(e>>>25|e<<7);ch=g^e&(f^g);s0=(a>>>2|a<<30)^(a>>>13|a<<19)^(a>>>22|a<<10);maj=a&b|c&(a^b);t1=h+s1+ch+_k[i]+w[i];t2=s0+maj;h=g;g=f;f=e;e=d+t1>>>0;d=c;c=b;b=a;a=t1+t2>>>0;}s.h0=s.h0+a|0;s.h1=s.h1+b|0;s.h2=s.h2+c|0;s.h3=s.h3+d|0;s.h4=s.h4+e|0;s.h5=s.h5+f|0;s.h6=s.h6+g|0;s.h7=s.h7+h|0;len-=64;}}},6064:function(module,exports,__webpack_require__){module=__webpack_require__.nmd(module);/**
 * @license
 * lodash 3.10.1 (Custom Build) <https://lodash.com/>
 * Build: `lodash modern -d -o ./index.js`
 * Copyright 2012-2015 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <https://lodash.com/license>
 */;(function(){var undefined;var VERSION='3.10.1';var BIND_FLAG=1,BIND_KEY_FLAG=2,CURRY_BOUND_FLAG=4,CURRY_FLAG=8,CURRY_RIGHT_FLAG=16,PARTIAL_FLAG=32,PARTIAL_RIGHT_FLAG=64,ARY_FLAG=128,REARG_FLAG=256;var DEFAULT_TRUNC_LENGTH=30,DEFAULT_TRUNC_OMISSION='...';var HOT_COUNT=150,HOT_SPAN=16;var LARGE_ARRAY_SIZE=200;var LAZY_FILTER_FLAG=1,LAZY_MAP_FLAG=2;var FUNC_ERROR_TEXT='Expected a function';var PLACEHOLDER='__lodash_placeholder__';var argsTag='[object Arguments]',arrayTag='[object Array]',boolTag='[object Boolean]',dateTag='[object Date]',errorTag='[object Error]',funcTag='[object Function]',mapTag='[object Map]',numberTag='[object Number]',objectTag='[object Object]',regexpTag='[object RegExp]',setTag='[object Set]',stringTag='[object String]',weakMapTag='[object WeakMap]';var arrayBufferTag='[object ArrayBuffer]',float32Tag='[object Float32Array]',float64Tag='[object Float64Array]',int8Tag='[object Int8Array]',int16Tag='[object Int16Array]',int32Tag='[object Int32Array]',uint8Tag='[object Uint8Array]',uint8ClampedTag='[object Uint8ClampedArray]',uint16Tag='[object Uint16Array]',uint32Tag='[object Uint32Array]';var reEmptyStringLeading=/\b__p \+= '';/g,reEmptyStringMiddle=/\b(__p \+=) '' \+/g,reEmptyStringTrailing=/(__e\(.*?\)|\b__t\)) \+\n'';/g;var reEscapedHtml=/&(?:amp|lt|gt|quot|#39|#96);/g,reUnescapedHtml=/[&<>"'`]/g,reHasEscapedHtml=RegExp(reEscapedHtml.source),reHasUnescapedHtml=RegExp(reUnescapedHtml.source);var reEscape=/<%-([\s\S]+?)%>/g,reEvaluate=/<%([\s\S]+?)%>/g,reInterpolate=/<%=([\s\S]+?)%>/g;var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g;var reRegExpChars=/^[:!,]|[\\^$.*+?()[\]{}|\/]|(^[0-9a-fA-Fnrtuvx])|([\n\r\u2028\u2029])/g,reHasRegExpChars=RegExp(reRegExpChars.source);var reComboMark=/[\u0300-\u036f\ufe20-\ufe23]/g;var reEscapeChar=/\\(\\)?/g;var reEsTemplate=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g;var reFlags=/\w*$/;var reHasHexPrefix=/^0[xX]/;var reIsHostCtor=/^\[object .+?Constructor\]$/;var reIsUint=/^\d+$/;var reLatin1=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g;var reNoMatch=/($^)/;var reUnescapedString=/['\n\r\u2028\u2029\\]/g;var reWords=function(){var upper='[A-Z\\xc0-\\xd6\\xd8-\\xde]',lower='[a-z\\xdf-\\xf6\\xf8-\\xff]+';return RegExp(upper+'+(?='+upper+lower+')|'+upper+'?'+lower+'|'+upper+'+|[0-9]+','g');}();var contextProps=['Array','ArrayBuffer','Date','Error','Float32Array','Float64Array','Function','Int8Array','Int16Array','Int32Array','Math','Number','Object','RegExp','Set','String','_','clearTimeout','isFinite','parseFloat','parseInt','setTimeout','TypeError','Uint8Array','Uint8ClampedArray','Uint16Array','Uint32Array','WeakMap'];var templateCounter=-1;var typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=true;typedArrayTags[argsTag]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=false;var cloneableTags={};cloneableTags[argsTag]=cloneableTags[arrayTag]=cloneableTags[arrayBufferTag]=cloneableTags[boolTag]=cloneableTags[dateTag]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[numberTag]=cloneableTags[objectTag]=cloneableTags[regexpTag]=cloneableTags[stringTag]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=true;cloneableTags[errorTag]=cloneableTags[funcTag]=cloneableTags[mapTag]=cloneableTags[setTag]=cloneableTags[weakMapTag]=false;var deburredLetters={'\xc0':'A','\xc1':'A','\xc2':'A','\xc3':'A','\xc4':'A','\xc5':'A','\xe0':'a','\xe1':'a','\xe2':'a','\xe3':'a','\xe4':'a','\xe5':'a','\xc7':'C','\xe7':'c','\xd0':'D','\xf0':'d','\xc8':'E','\xc9':'E','\xca':'E','\xcb':'E','\xe8':'e','\xe9':'e','\xea':'e','\xeb':'e','\xcC':'I','\xcd':'I','\xce':'I','\xcf':'I','\xeC':'i','\xed':'i','\xee':'i','\xef':'i','\xd1':'N','\xf1':'n','\xd2':'O','\xd3':'O','\xd4':'O','\xd5':'O','\xd6':'O','\xd8':'O','\xf2':'o','\xf3':'o','\xf4':'o','\xf5':'o','\xf6':'o','\xf8':'o','\xd9':'U','\xda':'U','\xdb':'U','\xdc':'U','\xf9':'u','\xfa':'u','\xfb':'u','\xfc':'u','\xdd':'Y','\xfd':'y','\xff':'y','\xc6':'Ae','\xe6':'ae','\xde':'Th','\xfe':'th','\xdf':'ss'};var htmlEscapes={'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;','`':'&#96;'};var htmlUnescapes={'&amp;':'&','&lt;':'<','&gt;':'>','&quot;':'"','&#39;':"'",'&#96;':'`'};var objectTypes={'function':true,'object':true};var regexpEscapes={'0':'x30','1':'x31','2':'x32','3':'x33','4':'x34','5':'x35','6':'x36','7':'x37','8':'x38','9':'x39','A':'x41','B':'x42','C':'x43','D':'x44','E':'x45','F':'x46','a':'x61','b':'x62','c':'x63','d':'x64','e':'x65','f':'x66','n':'x6e','r':'x72','t':'x74','u':'x75','v':'x76','x':'x78'};var stringEscapes={'\\':'\\',"'":"'",'\n':'n','\r':'r','\u2028':'u2028','\u2029':'u2029'};var freeExports=objectTypes[typeof exports]&&exports&&!exports.nodeType&&exports;var freeModule=objectTypes["object"]&&module&&!module.nodeType&&module;var freeGlobal=freeExports&&freeModule&&typeof global=='object'&&global&&global.Object&&global;var freeSelf=objectTypes[typeof self]&&self&&self.Object&&self;var freeWindow=objectTypes[typeof window]&&window&&window.Object&&window;var moduleExports=freeModule&&freeModule.exports===freeExports&&freeExports;var root=freeGlobal||freeWindow!==(this&&this.window)&&freeWindow||freeSelf||this;function baseCompareAscending(value,other){if(value!==other){var valIsNull=value===null,valIsUndef=value===undefined,valIsReflexive=value===value;var othIsNull=other===null,othIsUndef=other===undefined,othIsReflexive=other===other;if(value>other&&!othIsNull||!valIsReflexive||valIsNull&&!othIsUndef&&othIsReflexive||valIsUndef&&othIsReflexive){return 1;}if(value<other&&!valIsNull||!othIsReflexive||othIsNull&&!valIsUndef&&valIsReflexive||othIsUndef&&valIsReflexive){return-1;}}return 0;}function baseFindIndex(array,predicate,fromRight){var length=array.length,index=fromRight?length:-1;while(fromRight?index--:++index<length){if(predicate(array[index],index,array)){return index;}}return-1;}function baseIndexOf(array,value,fromIndex){if(value!==value){return indexOfNaN(array,fromIndex);}var index=fromIndex-1,length=array.length;while(++index<length){if(array[index]===value){return index;}}return-1;}function baseIsFunction(value){return typeof value=='function'||false;}function baseToString(value){return value==null?'':value+'';}function charsLeftIndex(string,chars){var index=-1,length=string.length;while(++index<length&&chars.indexOf(string.charAt(index))>-1){}return index;}function charsRightIndex(string,chars){var index=string.length;while(index--&&chars.indexOf(string.charAt(index))>-1){}return index;}function compareAscending(object,other){return baseCompareAscending(object.criteria,other.criteria)||object.index-other.index;}function compareMultiple(object,other,orders){var index=-1,objCriteria=object.criteria,othCriteria=other.criteria,length=objCriteria.length,ordersLength=orders.length;while(++index<length){var result=baseCompareAscending(objCriteria[index],othCriteria[index]);if(result){if(index>=ordersLength){return result;}var order=orders[index];return result*(order==='asc'||order===true?1:-1);}}return object.index-other.index;}function deburrLetter(letter){return deburredLetters[letter];}function escapeHtmlChar(chr){return htmlEscapes[chr];}function escapeRegExpChar(chr,leadingChar,whitespaceChar){if(leadingChar){chr=regexpEscapes[chr];}else if(whitespaceChar){chr=stringEscapes[chr];}return'\\'+chr;}function escapeStringChar(chr){return'\\'+stringEscapes[chr];}function indexOfNaN(array,fromIndex,fromRight){var length=array.length,index=fromIndex+(fromRight?0:-1);while(fromRight?index--:++index<length){var other=array[index];if(other!==other){return index;}}return-1;}function isObjectLike(value){return!!value&&typeof value=='object';}function isSpace(charCode){return charCode<=160&&charCode>=9&&charCode<=13||charCode==32||charCode==160||charCode==5760||charCode==6158||charCode>=8192&&(charCode<=8202||charCode==8232||charCode==8233||charCode==8239||charCode==8287||charCode==12288||charCode==65279);}function replaceHolders(array,placeholder){var index=-1,length=array.length,resIndex=-1,result=[];while(++index<length){if(array[index]===placeholder){array[index]=PLACEHOLDER;result[++resIndex]=index;}}return result;}function sortedUniq(array,iteratee){var seen,index=-1,length=array.length,resIndex=-1,result=[];while(++index<length){var value=array[index],computed=iteratee?iteratee(value,index,array):value;if(!index||seen!==computed){seen=computed;result[++resIndex]=value;}}return result;}function trimmedLeftIndex(string){var index=-1,length=string.length;while(++index<length&&isSpace(string.charCodeAt(index))){}return index;}function trimmedRightIndex(string){var index=string.length;while(index--&&isSpace(string.charCodeAt(index))){}return index;}function unescapeHtmlChar(chr){return htmlUnescapes[chr];}function runInContext(context){context=context?_.defaults(root.Object(),context,_.pick(root,contextProps)):root;var Array=context.Array,Date=context.Date,Error=context.Error,Function=context.Function,Math=context.Math,Number=context.Number,Object=context.Object,RegExp=context.RegExp,String=context.String,TypeError=context.TypeError;var arrayProto=Array.prototype,objectProto=Object.prototype,stringProto=String.prototype;var fnToString=Function.prototype.toString;var hasOwnProperty=objectProto.hasOwnProperty;var idCounter=0;var objToString=objectProto.toString;var oldDash=root._;var reIsNative=RegExp('^'+fnToString.call(hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,'\\$&').replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,'$1.*?')+'$');var ArrayBuffer=context.ArrayBuffer,clearTimeout=context.clearTimeout,parseFloat=context.parseFloat,pow=Math.pow,propertyIsEnumerable=objectProto.propertyIsEnumerable,Set=getNative(context,'Set'),setTimeout=context.setTimeout,splice=arrayProto.splice,Uint8Array=context.Uint8Array,WeakMap=getNative(context,'WeakMap');var nativeCeil=Math.ceil,nativeCreate=getNative(Object,'create'),nativeFloor=Math.floor,nativeIsArray=getNative(Array,'isArray'),nativeIsFinite=context.isFinite,nativeKeys=getNative(Object,'keys'),nativeMax=Math.max,nativeMin=Math.min,nativeNow=getNative(Date,'now'),nativeParseInt=context.parseInt,nativeRandom=Math.random;var NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY,POSITIVE_INFINITY=Number.POSITIVE_INFINITY;var MAX_ARRAY_LENGTH=4294967295,MAX_ARRAY_INDEX=MAX_ARRAY_LENGTH-1,HALF_MAX_ARRAY_LENGTH=MAX_ARRAY_LENGTH>>>1;var MAX_SAFE_INTEGER=9007199254740991;var metaMap=WeakMap&&new WeakMap();var realNames={};function lodash(value){if(isObjectLike(value)&&!isArray(value)&&!(value instanceof LazyWrapper)){if(value instanceof LodashWrapper){return value;}if(hasOwnProperty.call(value,'__chain__')&&hasOwnProperty.call(value,'__wrapped__')){return wrapperClone(value);}}return new LodashWrapper(value);}function baseLodash(){}function LodashWrapper(value,chainAll,actions){this.__wrapped__=value;this.__actions__=actions||[];this.__chain__=!!chainAll;}var support=lodash.support={};lodash.templateSettings={'escape':reEscape,'evaluate':reEvaluate,'interpolate':reInterpolate,'variable':'','imports':{'_':lodash}};function LazyWrapper(value){this.__wrapped__=value;this.__actions__=[];this.__dir__=1;this.__filtered__=false;this.__iteratees__=[];this.__takeCount__=POSITIVE_INFINITY;this.__views__=[];}function lazyClone(){var result=new LazyWrapper(this.__wrapped__);result.__actions__=arrayCopy(this.__actions__);result.__dir__=this.__dir__;result.__filtered__=this.__filtered__;result.__iteratees__=arrayCopy(this.__iteratees__);result.__takeCount__=this.__takeCount__;result.__views__=arrayCopy(this.__views__);return result;}function lazyReverse(){if(this.__filtered__){var result=new LazyWrapper(this);result.__dir__=-1;result.__filtered__=true;}else{result=this.clone();result.__dir__*=-1;}return result;}function lazyValue(){var array=this.__wrapped__.value(),dir=this.__dir__,isArr=isArray(array),isRight=dir<0,arrLength=isArr?array.length:0,view=getView(0,arrLength,this.__views__),start=view.start,end=view.end,length=end-start,index=isRight?end:start-1,iteratees=this.__iteratees__,iterLength=iteratees.length,resIndex=0,takeCount=nativeMin(length,this.__takeCount__);if(!isArr||arrLength<LARGE_ARRAY_SIZE||arrLength==length&&takeCount==length){return baseWrapperValue(isRight&&isArr?array.reverse():array,this.__actions__);}var result=[];outer:while(length--&&resIndex<takeCount){index+=dir;var iterIndex=-1,value=array[index];while(++iterIndex<iterLength){var data=iteratees[iterIndex],iteratee=data.iteratee,type=data.type,computed=iteratee(value);if(type==LAZY_MAP_FLAG){value=computed;}else if(!computed){if(type==LAZY_FILTER_FLAG){continue outer;}else{break outer;}}}result[resIndex++]=value;}return result;}function MapCache(){this.__data__={};}function mapDelete(key){return this.has(key)&&delete this.__data__[key];}function mapGet(key){return key=='__proto__'?undefined:this.__data__[key];}function mapHas(key){return key!='__proto__'&&hasOwnProperty.call(this.__data__,key);}function mapSet(key,value){if(key!='__proto__'){this.__data__[key]=value;}return this;}function SetCache(values){var length=values?values.length:0;this.data={'hash':nativeCreate(null),'set':new Set()};while(length--){this.push(values[length]);}}function cacheIndexOf(cache,value){var data=cache.data,result=typeof value=='string'||isObject(value)?data.set.has(value):data.hash[value];return result?0:-1;}function cachePush(value){var data=this.data;if(typeof value=='string'||isObject(value)){data.set.add(value);}else{data.hash[value]=true;}}function arrayConcat(array,other){var index=-1,length=array.length,othIndex=-1,othLength=other.length,result=Array(length+othLength);while(++index<length){result[index]=array[index];}while(++othIndex<othLength){result[index++]=other[othIndex];}return result;}function arrayCopy(source,array){var index=-1,length=source.length;array||(array=Array(length));while(++index<length){array[index]=source[index];}return array;}function arrayEach(array,iteratee){var index=-1,length=array.length;while(++index<length){if(iteratee(array[index],index,array)===false){break;}}return array;}function arrayEachRight(array,iteratee){var length=array.length;while(length--){if(iteratee(array[length],length,array)===false){break;}}return array;}function arrayEvery(array,predicate){var index=-1,length=array.length;while(++index<length){if(!predicate(array[index],index,array)){return false;}}return true;}function arrayExtremum(array,iteratee,comparator,exValue){var index=-1,length=array.length,computed=exValue,result=computed;while(++index<length){var value=array[index],current=+iteratee(value);if(comparator(current,computed)){computed=current;result=value;}}return result;}function arrayFilter(array,predicate){var index=-1,length=array.length,resIndex=-1,result=[];while(++index<length){var value=array[index];if(predicate(value,index,array)){result[++resIndex]=value;}}return result;}function arrayMap(array,iteratee){var index=-1,length=array.length,result=Array(length);while(++index<length){result[index]=iteratee(array[index],index,array);}return result;}function arrayPush(array,values){var index=-1,length=values.length,offset=array.length;while(++index<length){array[offset+index]=values[index];}return array;}function arrayReduce(array,iteratee,accumulator,initFromArray){var index=-1,length=array.length;if(initFromArray&&length){accumulator=array[++index];}while(++index<length){accumulator=iteratee(accumulator,array[index],index,array);}return accumulator;}function arrayReduceRight(array,iteratee,accumulator,initFromArray){var length=array.length;if(initFromArray&&length){accumulator=array[--length];}while(length--){accumulator=iteratee(accumulator,array[length],length,array);}return accumulator;}function arraySome(array,predicate){var index=-1,length=array.length;while(++index<length){if(predicate(array[index],index,array)){return true;}}return false;}function arraySum(array,iteratee){var length=array.length,result=0;while(length--){result+=+iteratee(array[length])||0;}return result;}function assignDefaults(objectValue,sourceValue){return objectValue===undefined?sourceValue:objectValue;}function assignOwnDefaults(objectValue,sourceValue,key,object){return objectValue===undefined||!hasOwnProperty.call(object,key)?sourceValue:objectValue;}function assignWith(object,source,customizer){var index=-1,props=keys(source),length=props.length;while(++index<length){var key=props[index],value=object[key],result=customizer(value,source[key],key,object,source);if((result===result?result!==value:value===value)||value===undefined&&!(key in object)){object[key]=result;}}return object;}function baseAssign(object,source){return source==null?object:baseCopy(source,keys(source),object);}function baseAt(collection,props){var index=-1,isNil=collection==null,isArr=!isNil&&isArrayLike(collection),length=isArr?collection.length:0,propsLength=props.length,result=Array(propsLength);while(++index<propsLength){var key=props[index];if(isArr){result[index]=isIndex(key,length)?collection[key]:undefined;}else{result[index]=isNil?undefined:collection[key];}}return result;}function baseCopy(source,props,object){object||(object={});var index=-1,length=props.length;while(++index<length){var key=props[index];object[key]=source[key];}return object;}function baseCallback(func,thisArg,argCount){var type=typeof func;if(type=='function'){return thisArg===undefined?func:bindCallback(func,thisArg,argCount);}if(func==null){return identity;}if(type=='object'){return baseMatches(func);}return thisArg===undefined?property(func):baseMatchesProperty(func,thisArg);}function baseClone(value,isDeep,customizer,key,object,stackA,stackB){var result;if(customizer){result=object?customizer(value,key,object):customizer(value);}if(result!==undefined){return result;}if(!isObject(value)){return value;}var isArr=isArray(value);if(isArr){result=initCloneArray(value);if(!isDeep){return arrayCopy(value,result);}}else{var tag=objToString.call(value),isFunc=tag==funcTag;if(tag==objectTag||tag==argsTag||isFunc&&!object){result=initCloneObject(isFunc?{}:value);if(!isDeep){return baseAssign(result,value);}}else{return cloneableTags[tag]?initCloneByTag(value,tag,isDeep):object?value:{};}}stackA||(stackA=[]);stackB||(stackB=[]);var length=stackA.length;while(length--){if(stackA[length]==value){return stackB[length];}}stackA.push(value);stackB.push(result);(isArr?arrayEach:baseForOwn)(value,function(subValue,key){result[key]=baseClone(subValue,isDeep,customizer,key,value,stackA,stackB);});return result;}var baseCreate=function(){function object(){}return function(prototype){if(isObject(prototype)){object.prototype=prototype;var result=new object();object.prototype=undefined;}return result||{};};}();function baseDelay(func,wait,args){if(typeof func!='function'){throw new TypeError(FUNC_ERROR_TEXT);}return setTimeout(function(){func.apply(undefined,args);},wait);}function baseDifference(array,values){var length=array?array.length:0,result=[];if(!length){return result;}var index=-1,indexOf=getIndexOf(),isCommon=indexOf==baseIndexOf,cache=isCommon&&values.length>=LARGE_ARRAY_SIZE?createCache(values):null,valuesLength=values.length;if(cache){indexOf=cacheIndexOf;isCommon=false;values=cache;}outer:while(++index<length){var value=array[index];if(isCommon&&value===value){var valuesIndex=valuesLength;while(valuesIndex--){if(values[valuesIndex]===value){continue outer;}}result.push(value);}else if(indexOf(values,value,0)<0){result.push(value);}}return result;}var baseEach=createBaseEach(baseForOwn);var baseEachRight=createBaseEach(baseForOwnRight,true);function baseEvery(collection,predicate){var result=true;baseEach(collection,function(value,index,collection){result=!!predicate(value,index,collection);return result;});return result;}function baseExtremum(collection,iteratee,comparator,exValue){var computed=exValue,result=computed;baseEach(collection,function(value,index,collection){var current=+iteratee(value,index,collection);if(comparator(current,computed)||current===exValue&&current===result){computed=current;result=value;}});return result;}function baseFill(array,value,start,end){var length=array.length;start=start==null?0:+start||0;if(start<0){start=-start>length?0:length+start;}end=end===undefined||end>length?length:+end||0;if(end<0){end+=length;}length=start>end?0:end>>>0;start>>>=0;while(start<length){array[start++]=value;}return array;}function baseFilter(collection,predicate){var result=[];baseEach(collection,function(value,index,collection){if(predicate(value,index,collection)){result.push(value);}});return result;}function baseFind(collection,predicate,eachFunc,retKey){var result;eachFunc(collection,function(value,key,collection){if(predicate(value,key,collection)){result=retKey?key:value;return false;}});return result;}function baseFlatten(array,isDeep,isStrict,result){result||(result=[]);var index=-1,length=array.length;while(++index<length){var value=array[index];if(isObjectLike(value)&&isArrayLike(value)&&(isStrict||isArray(value)||isArguments(value))){if(isDeep){baseFlatten(value,isDeep,isStrict,result);}else{arrayPush(result,value);}}else if(!isStrict){result[result.length]=value;}}return result;}var baseFor=createBaseFor();var baseForRight=createBaseFor(true);function baseForIn(object,iteratee){return baseFor(object,iteratee,keysIn);}function baseForOwn(object,iteratee){return baseFor(object,iteratee,keys);}function baseForOwnRight(object,iteratee){return baseForRight(object,iteratee,keys);}function baseFunctions(object,props){var index=-1,length=props.length,resIndex=-1,result=[];while(++index<length){var key=props[index];if(isFunction(object[key])){result[++resIndex]=key;}}return result;}function baseGet(object,path,pathKey){if(object==null){return;}if(pathKey!==undefined&&pathKey in toObject(object)){path=[pathKey];}var index=0,length=path.length;while(object!=null&&index<length){object=object[path[index++]];}return index&&index==length?object:undefined;}function baseIsEqual(value,other,customizer,isLoose,stackA,stackB){if(value===other){return true;}if(value==null||other==null||!isObject(value)&&!isObjectLike(other)){return value!==value&&other!==other;}return baseIsEqualDeep(value,other,baseIsEqual,customizer,isLoose,stackA,stackB);}function baseIsEqualDeep(object,other,equalFunc,customizer,isLoose,stackA,stackB){var objIsArr=isArray(object),othIsArr=isArray(other),objTag=arrayTag,othTag=arrayTag;if(!objIsArr){objTag=objToString.call(object);if(objTag==argsTag){objTag=objectTag;}else if(objTag!=objectTag){objIsArr=isTypedArray(object);}}if(!othIsArr){othTag=objToString.call(other);if(othTag==argsTag){othTag=objectTag;}else if(othTag!=objectTag){othIsArr=isTypedArray(other);}}var objIsObj=objTag==objectTag,othIsObj=othTag==objectTag,isSameTag=objTag==othTag;if(isSameTag&&!(objIsArr||objIsObj)){return equalByTag(object,other,objTag);}if(!isLoose){var objIsWrapped=objIsObj&&hasOwnProperty.call(object,'__wrapped__'),othIsWrapped=othIsObj&&hasOwnProperty.call(other,'__wrapped__');if(objIsWrapped||othIsWrapped){return equalFunc(objIsWrapped?object.value():object,othIsWrapped?other.value():other,customizer,isLoose,stackA,stackB);}}if(!isSameTag){return false;}stackA||(stackA=[]);stackB||(stackB=[]);var length=stackA.length;while(length--){if(stackA[length]==object){return stackB[length]==other;}}stackA.push(object);stackB.push(other);var result=(objIsArr?equalArrays:equalObjects)(object,other,equalFunc,customizer,isLoose,stackA,stackB);stackA.pop();stackB.pop();return result;}function baseIsMatch(object,matchData,customizer){var index=matchData.length,length=index,noCustomizer=!customizer;if(object==null){return!length;}object=toObject(object);while(index--){var data=matchData[index];if(noCustomizer&&data[2]?data[1]!==object[data[0]]:!(data[0]in object)){return false;}}while(++index<length){data=matchData[index];var key=data[0],objValue=object[key],srcValue=data[1];if(noCustomizer&&data[2]){if(objValue===undefined&&!(key in object)){return false;}}else{var result=customizer?customizer(objValue,srcValue,key):undefined;if(!(result===undefined?baseIsEqual(srcValue,objValue,customizer,true):result)){return false;}}}return true;}function baseMap(collection,iteratee){var index=-1,result=isArrayLike(collection)?Array(collection.length):[];baseEach(collection,function(value,key,collection){result[++index]=iteratee(value,key,collection);});return result;}function baseMatches(source){var matchData=getMatchData(source);if(matchData.length==1&&matchData[0][2]){var key=matchData[0][0],value=matchData[0][1];return function(object){if(object==null){return false;}return object[key]===value&&(value!==undefined||key in toObject(object));};}return function(object){return baseIsMatch(object,matchData);};}function baseMatchesProperty(path,srcValue){var isArr=isArray(path),isCommon=isKey(path)&&isStrictComparable(srcValue),pathKey=path+'';path=toPath(path);return function(object){if(object==null){return false;}var key=pathKey;object=toObject(object);if((isArr||!isCommon)&&!(key in object)){object=path.length==1?object:baseGet(object,baseSlice(path,0,-1));if(object==null){return false;}key=last(path);object=toObject(object);}return object[key]===srcValue?srcValue!==undefined||key in object:baseIsEqual(srcValue,object[key],undefined,true);};}function baseMerge(object,source,customizer,stackA,stackB){if(!isObject(object)){return object;}var isSrcArr=isArrayLike(source)&&(isArray(source)||isTypedArray(source)),props=isSrcArr?undefined:keys(source);arrayEach(props||source,function(srcValue,key){if(props){key=srcValue;srcValue=source[key];}if(isObjectLike(srcValue)){stackA||(stackA=[]);stackB||(stackB=[]);baseMergeDeep(object,source,key,baseMerge,customizer,stackA,stackB);}else{var value=object[key],result=customizer?customizer(value,srcValue,key,object,source):undefined,isCommon=result===undefined;if(isCommon){result=srcValue;}if((result!==undefined||isSrcArr&&!(key in object))&&(isCommon||(result===result?result!==value:value===value))){object[key]=result;}}});return object;}function baseMergeDeep(object,source,key,mergeFunc,customizer,stackA,stackB){var length=stackA.length,srcValue=source[key];while(length--){if(stackA[length]==srcValue){object[key]=stackB[length];return;}}var value=object[key],result=customizer?customizer(value,srcValue,key,object,source):undefined,isCommon=result===undefined;if(isCommon){result=srcValue;if(isArrayLike(srcValue)&&(isArray(srcValue)||isTypedArray(srcValue))){result=isArray(value)?value:isArrayLike(value)?arrayCopy(value):[];}else if(isPlainObject(srcValue)||isArguments(srcValue)){result=isArguments(value)?toPlainObject(value):isPlainObject(value)?value:{};}else{isCommon=false;}}stackA.push(srcValue);stackB.push(result);if(isCommon){object[key]=mergeFunc(result,srcValue,customizer,stackA,stackB);}else if(result===result?result!==value:value===value){object[key]=result;}}function baseProperty(key){return function(object){return object==null?undefined:object[key];};}function basePropertyDeep(path){var pathKey=path+'';path=toPath(path);return function(object){return baseGet(object,path,pathKey);};}function basePullAt(array,indexes){var length=array?indexes.length:0;while(length--){var index=indexes[length];if(index!=previous&&isIndex(index)){var previous=index;splice.call(array,index,1);}}return array;}function baseRandom(min,max){return min+nativeFloor(nativeRandom()*(max-min+1));}function baseReduce(collection,iteratee,accumulator,initFromCollection,eachFunc){eachFunc(collection,function(value,index,collection){accumulator=initFromCollection?(initFromCollection=false,value):iteratee(accumulator,value,index,collection);});return accumulator;}var baseSetData=!metaMap?identity:function(func,data){metaMap.set(func,data);return func;};function baseSlice(array,start,end){var index=-1,length=array.length;start=start==null?0:+start||0;if(start<0){start=-start>length?0:length+start;}end=end===undefined||end>length?length:+end||0;if(end<0){end+=length;}length=start>end?0:end-start>>>0;start>>>=0;var result=Array(length);while(++index<length){result[index]=array[index+start];}return result;}function baseSome(collection,predicate){var result;baseEach(collection,function(value,index,collection){result=predicate(value,index,collection);return!result;});return!!result;}function baseSortBy(array,comparer){var length=array.length;array.sort(comparer);while(length--){array[length]=array[length].value;}return array;}function baseSortByOrder(collection,iteratees,orders){var callback=getCallback(),index=-1;iteratees=arrayMap(iteratees,function(iteratee){return callback(iteratee);});var result=baseMap(collection,function(value){var criteria=arrayMap(iteratees,function(iteratee){return iteratee(value);});return{'criteria':criteria,'index':++index,'value':value};});return baseSortBy(result,function(object,other){return compareMultiple(object,other,orders);});}function baseSum(collection,iteratee){var result=0;baseEach(collection,function(value,index,collection){result+=+iteratee(value,index,collection)||0;});return result;}function baseUniq(array,iteratee){var index=-1,indexOf=getIndexOf(),length=array.length,isCommon=indexOf==baseIndexOf,isLarge=isCommon&&length>=LARGE_ARRAY_SIZE,seen=isLarge?createCache():null,result=[];if(seen){indexOf=cacheIndexOf;isCommon=false;}else{isLarge=false;seen=iteratee?[]:result;}outer:while(++index<length){var value=array[index],computed=iteratee?iteratee(value,index,array):value;if(isCommon&&value===value){var seenIndex=seen.length;while(seenIndex--){if(seen[seenIndex]===computed){continue outer;}}if(iteratee){seen.push(computed);}result.push(value);}else if(indexOf(seen,computed,0)<0){if(iteratee||isLarge){seen.push(computed);}result.push(value);}}return result;}function baseValues(object,props){var index=-1,length=props.length,result=Array(length);while(++index<length){result[index]=object[props[index]];}return result;}function baseWhile(array,predicate,isDrop,fromRight){var length=array.length,index=fromRight?length:-1;while((fromRight?index--:++index<length)&&predicate(array[index],index,array)){}return isDrop?baseSlice(array,fromRight?0:index,fromRight?index+1:length):baseSlice(array,fromRight?index+1:0,fromRight?length:index);}function baseWrapperValue(value,actions){var result=value;if(result instanceof LazyWrapper){result=result.value();}var index=-1,length=actions.length;while(++index<length){var action=actions[index];result=action.func.apply(action.thisArg,arrayPush([result],action.args));}return result;}function binaryIndex(array,value,retHighest){var low=0,high=array?array.length:low;if(typeof value=='number'&&value===value&&high<=HALF_MAX_ARRAY_LENGTH){while(low<high){var mid=low+high>>>1,computed=array[mid];if((retHighest?computed<=value:computed<value)&&computed!==null){low=mid+1;}else{high=mid;}}return high;}return binaryIndexBy(array,value,identity,retHighest);}function binaryIndexBy(array,value,iteratee,retHighest){value=iteratee(value);var low=0,high=array?array.length:0,valIsNaN=value!==value,valIsNull=value===null,valIsUndef=value===undefined;while(low<high){var mid=nativeFloor((low+high)/2),computed=iteratee(array[mid]),isDef=computed!==undefined,isReflexive=computed===computed;if(valIsNaN){var setLow=isReflexive||retHighest;}else if(valIsNull){setLow=isReflexive&&isDef&&(retHighest||computed!=null);}else if(valIsUndef){setLow=isReflexive&&(retHighest||isDef);}else if(computed==null){setLow=false;}else{setLow=retHighest?computed<=value:computed<value;}if(setLow){low=mid+1;}else{high=mid;}}return nativeMin(high,MAX_ARRAY_INDEX);}function bindCallback(func,thisArg,argCount){if(typeof func!='function'){return identity;}if(thisArg===undefined){return func;}switch(argCount){case 1:return function(value){return func.call(thisArg,value);};case 3:return function(value,index,collection){return func.call(thisArg,value,index,collection);};case 4:return function(accumulator,value,index,collection){return func.call(thisArg,accumulator,value,index,collection);};case 5:return function(value,other,key,object,source){return func.call(thisArg,value,other,key,object,source);};}return function(){return func.apply(thisArg,arguments);};}function bufferClone(buffer){var result=new ArrayBuffer(buffer.byteLength),view=new Uint8Array(result);view.set(new Uint8Array(buffer));return result;}function composeArgs(args,partials,holders){var holdersLength=holders.length,argsIndex=-1,argsLength=nativeMax(args.length-holdersLength,0),leftIndex=-1,leftLength=partials.length,result=Array(leftLength+argsLength);while(++leftIndex<leftLength){result[leftIndex]=partials[leftIndex];}while(++argsIndex<holdersLength){result[holders[argsIndex]]=args[argsIndex];}while(argsLength--){result[leftIndex++]=args[argsIndex++];}return result;}function composeArgsRight(args,partials,holders){var holdersIndex=-1,holdersLength=holders.length,argsIndex=-1,argsLength=nativeMax(args.length-holdersLength,0),rightIndex=-1,rightLength=partials.length,result=Array(argsLength+rightLength);while(++argsIndex<argsLength){result[argsIndex]=args[argsIndex];}var offset=argsIndex;while(++rightIndex<rightLength){result[offset+rightIndex]=partials[rightIndex];}while(++holdersIndex<holdersLength){result[offset+holders[holdersIndex]]=args[argsIndex++];}return result;}function createAggregator(setter,initializer){return function(collection,iteratee,thisArg){var result=initializer?initializer():{};iteratee=getCallback(iteratee,thisArg,3);if(isArray(collection)){var index=-1,length=collection.length;while(++index<length){var value=collection[index];setter(result,value,iteratee(value,index,collection),collection);}}else{baseEach(collection,function(value,key,collection){setter(result,value,iteratee(value,key,collection),collection);});}return result;};}function createAssigner(assigner){return restParam(function(object,sources){var index=-1,length=object==null?0:sources.length,customizer=length>2?sources[length-2]:undefined,guard=length>2?sources[2]:undefined,thisArg=length>1?sources[length-1]:undefined;if(typeof customizer=='function'){customizer=bindCallback(customizer,thisArg,5);length-=2;}else{customizer=typeof thisArg=='function'?thisArg:undefined;length-=customizer?1:0;}if(guard&&isIterateeCall(sources[0],sources[1],guard)){customizer=length<3?undefined:customizer;length=1;}while(++index<length){var source=sources[index];if(source){assigner(object,source,customizer);}}return object;});}function createBaseEach(eachFunc,fromRight){return function(collection,iteratee){var length=collection?getLength(collection):0;if(!isLength(length)){return eachFunc(collection,iteratee);}var index=fromRight?length:-1,iterable=toObject(collection);while(fromRight?index--:++index<length){if(iteratee(iterable[index],index,iterable)===false){break;}}return collection;};}function createBaseFor(fromRight){return function(object,iteratee,keysFunc){var iterable=toObject(object),props=keysFunc(object),length=props.length,index=fromRight?length:-1;while(fromRight?index--:++index<length){var key=props[index];if(iteratee(iterable[key],key,iterable)===false){break;}}return object;};}function createBindWrapper(func,thisArg){var Ctor=createCtorWrapper(func);function wrapper(){var fn=this&&this!==root&&this instanceof wrapper?Ctor:func;return fn.apply(thisArg,arguments);}return wrapper;}function createCache(values){return nativeCreate&&Set?new SetCache(values):null;}function createCompounder(callback){return function(string){var index=-1,array=words(deburr(string)),length=array.length,result='';while(++index<length){result=callback(result,array[index],index);}return result;};}function createCtorWrapper(Ctor){return function(){var args=arguments;switch(args.length){case 0:return new Ctor();case 1:return new Ctor(args[0]);case 2:return new Ctor(args[0],args[1]);case 3:return new Ctor(args[0],args[1],args[2]);case 4:return new Ctor(args[0],args[1],args[2],args[3]);case 5:return new Ctor(args[0],args[1],args[2],args[3],args[4]);case 6:return new Ctor(args[0],args[1],args[2],args[3],args[4],args[5]);case 7:return new Ctor(args[0],args[1],args[2],args[3],args[4],args[5],args[6]);}var thisBinding=baseCreate(Ctor.prototype),result=Ctor.apply(thisBinding,args);return isObject(result)?result:thisBinding;};}function createCurry(flag){function curryFunc(func,arity,guard){if(guard&&isIterateeCall(func,arity,guard)){arity=undefined;}var result=createWrapper(func,flag,undefined,undefined,undefined,undefined,undefined,arity);result.placeholder=curryFunc.placeholder;return result;}return curryFunc;}function createDefaults(assigner,customizer){return restParam(function(args){var object=args[0];if(object==null){return object;}args.push(customizer);return assigner.apply(undefined,args);});}function createExtremum(comparator,exValue){return function(collection,iteratee,thisArg){if(thisArg&&isIterateeCall(collection,iteratee,thisArg)){iteratee=undefined;}iteratee=getCallback(iteratee,thisArg,3);if(iteratee.length==1){collection=isArray(collection)?collection:toIterable(collection);var result=arrayExtremum(collection,iteratee,comparator,exValue);if(!(collection.length&&result===exValue)){return result;}}return baseExtremum(collection,iteratee,comparator,exValue);};}function createFind(eachFunc,fromRight){return function(collection,predicate,thisArg){predicate=getCallback(predicate,thisArg,3);if(isArray(collection)){var index=baseFindIndex(collection,predicate,fromRight);return index>-1?collection[index]:undefined;}return baseFind(collection,predicate,eachFunc);};}function createFindIndex(fromRight){return function(array,predicate,thisArg){if(!(array&&array.length)){return-1;}predicate=getCallback(predicate,thisArg,3);return baseFindIndex(array,predicate,fromRight);};}function createFindKey(objectFunc){return function(object,predicate,thisArg){predicate=getCallback(predicate,thisArg,3);return baseFind(object,predicate,objectFunc,true);};}function createFlow(fromRight){return function(){var wrapper,length=arguments.length,index=fromRight?length:-1,leftIndex=0,funcs=Array(length);while(fromRight?index--:++index<length){var func=funcs[leftIndex++]=arguments[index];if(typeof func!='function'){throw new TypeError(FUNC_ERROR_TEXT);}if(!wrapper&&LodashWrapper.prototype.thru&&getFuncName(func)=='wrapper'){wrapper=new LodashWrapper([],true);}}index=wrapper?-1:length;while(++index<length){func=funcs[index];var funcName=getFuncName(func),data=funcName=='wrapper'?getData(func):undefined;if(data&&isLaziable(data[0])&&data[1]==(ARY_FLAG|CURRY_FLAG|PARTIAL_FLAG|REARG_FLAG)&&!data[4].length&&data[9]==1){wrapper=wrapper[getFuncName(data[0])].apply(wrapper,data[3]);}else{wrapper=func.length==1&&isLaziable(func)?wrapper[funcName]():wrapper.thru(func);}}return function(){var args=arguments,value=args[0];if(wrapper&&args.length==1&&isArray(value)&&value.length>=LARGE_ARRAY_SIZE){return wrapper.plant(value).value();}var index=0,result=length?funcs[index].apply(this,args):value;while(++index<length){result=funcs[index].call(this,result);}return result;};};}function createForEach(arrayFunc,eachFunc){return function(collection,iteratee,thisArg){return typeof iteratee=='function'&&thisArg===undefined&&isArray(collection)?arrayFunc(collection,iteratee):eachFunc(collection,bindCallback(iteratee,thisArg,3));};}function createForIn(objectFunc){return function(object,iteratee,thisArg){if(typeof iteratee!='function'||thisArg!==undefined){iteratee=bindCallback(iteratee,thisArg,3);}return objectFunc(object,iteratee,keysIn);};}function createForOwn(objectFunc){return function(object,iteratee,thisArg){if(typeof iteratee!='function'||thisArg!==undefined){iteratee=bindCallback(iteratee,thisArg,3);}return objectFunc(object,iteratee);};}function createObjectMapper(isMapKeys){return function(object,iteratee,thisArg){var result={};iteratee=getCallback(iteratee,thisArg,3);baseForOwn(object,function(value,key,object){var mapped=iteratee(value,key,object);key=isMapKeys?mapped:key;value=isMapKeys?value:mapped;result[key]=value;});return result;};}function createPadDir(fromRight){return function(string,length,chars){string=baseToString(string);return(fromRight?string:'')+createPadding(string,length,chars)+(fromRight?'':string);};}function createPartial(flag){var partialFunc=restParam(function(func,partials){var holders=replaceHolders(partials,partialFunc.placeholder);return createWrapper(func,flag,undefined,partials,holders);});return partialFunc;}function createReduce(arrayFunc,eachFunc){return function(collection,iteratee,accumulator,thisArg){var initFromArray=arguments.length<3;return typeof iteratee=='function'&&thisArg===undefined&&isArray(collection)?arrayFunc(collection,iteratee,accumulator,initFromArray):baseReduce(collection,getCallback(iteratee,thisArg,4),accumulator,initFromArray,eachFunc);};}function createHybridWrapper(func,bitmask,thisArg,partials,holders,partialsRight,holdersRight,argPos,ary,arity){var isAry=bitmask&ARY_FLAG,isBind=bitmask&BIND_FLAG,isBindKey=bitmask&BIND_KEY_FLAG,isCurry=bitmask&CURRY_FLAG,isCurryBound=bitmask&CURRY_BOUND_FLAG,isCurryRight=bitmask&CURRY_RIGHT_FLAG,Ctor=isBindKey?undefined:createCtorWrapper(func);function wrapper(){var length=arguments.length,index=length,args=Array(length);while(index--){args[index]=arguments[index];}if(partials){args=composeArgs(args,partials,holders);}if(partialsRight){args=composeArgsRight(args,partialsRight,holdersRight);}if(isCurry||isCurryRight){var placeholder=wrapper.placeholder,argsHolders=replaceHolders(args,placeholder);length-=argsHolders.length;if(length<arity){var newArgPos=argPos?arrayCopy(argPos):undefined,newArity=nativeMax(arity-length,0),newsHolders=isCurry?argsHolders:undefined,newHoldersRight=isCurry?undefined:argsHolders,newPartials=isCurry?args:undefined,newPartialsRight=isCurry?undefined:args;bitmask|=isCurry?PARTIAL_FLAG:PARTIAL_RIGHT_FLAG;bitmask&=~(isCurry?PARTIAL_RIGHT_FLAG:PARTIAL_FLAG);if(!isCurryBound){bitmask&=~(BIND_FLAG|BIND_KEY_FLAG);}var newData=[func,bitmask,thisArg,newPartials,newsHolders,newPartialsRight,newHoldersRight,newArgPos,ary,newArity],result=createHybridWrapper.apply(undefined,newData);if(isLaziable(func)){setData(result,newData);}result.placeholder=placeholder;return result;}}var thisBinding=isBind?thisArg:this,fn=isBindKey?thisBinding[func]:func;if(argPos){args=reorder(args,argPos);}if(isAry&&ary<args.length){args.length=ary;}if(this&&this!==root&&this instanceof wrapper){fn=Ctor||createCtorWrapper(func);}return fn.apply(thisBinding,args);}return wrapper;}function createPadding(string,length,chars){var strLength=string.length;length=+length;if(strLength>=length||!nativeIsFinite(length)){return'';}var padLength=length-strLength;chars=chars==null?' ':chars+'';return repeat(chars,nativeCeil(padLength/chars.length)).slice(0,padLength);}function createPartialWrapper(func,bitmask,thisArg,partials){var isBind=bitmask&BIND_FLAG,Ctor=createCtorWrapper(func);function wrapper(){var argsIndex=-1,argsLength=arguments.length,leftIndex=-1,leftLength=partials.length,args=Array(leftLength+argsLength);while(++leftIndex<leftLength){args[leftIndex]=partials[leftIndex];}while(argsLength--){args[leftIndex++]=arguments[++argsIndex];}var fn=this&&this!==root&&this instanceof wrapper?Ctor:func;return fn.apply(isBind?thisArg:this,args);}return wrapper;}function createRound(methodName){var func=Math[methodName];return function(number,precision){precision=precision===undefined?0:+precision||0;if(precision){precision=pow(10,precision);return func(number*precision)/precision;}return func(number);};}function createSortedIndex(retHighest){return function(array,value,iteratee,thisArg){var callback=getCallback(iteratee);return iteratee==null&&callback===baseCallback?binaryIndex(array,value,retHighest):binaryIndexBy(array,value,callback(iteratee,thisArg,1),retHighest);};}function createWrapper(func,bitmask,thisArg,partials,holders,argPos,ary,arity){var isBindKey=bitmask&BIND_KEY_FLAG;if(!isBindKey&&typeof func!='function'){throw new TypeError(FUNC_ERROR_TEXT);}var length=partials?partials.length:0;if(!length){bitmask&=~(PARTIAL_FLAG|PARTIAL_RIGHT_FLAG);partials=holders=undefined;}length-=holders?holders.length:0;if(bitmask&PARTIAL_RIGHT_FLAG){var partialsRight=partials,holdersRight=holders;partials=holders=undefined;}var data=isBindKey?undefined:getData(func),newData=[func,bitmask,thisArg,partials,holders,partialsRight,holdersRight,argPos,ary,arity];if(data){mergeData(newData,data);bitmask=newData[1];arity=newData[9];}newData[9]=arity==null?isBindKey?0:func.length:nativeMax(arity-length,0)||0;if(bitmask==BIND_FLAG){var result=createBindWrapper(newData[0],newData[2]);}else if((bitmask==PARTIAL_FLAG||bitmask==(BIND_FLAG|PARTIAL_FLAG))&&!newData[4].length){result=createPartialWrapper.apply(undefined,newData);}else{result=createHybridWrapper.apply(undefined,newData);}var setter=data?baseSetData:setData;return setter(result,newData);}function equalArrays(array,other,equalFunc,customizer,isLoose,stackA,stackB){var index=-1,arrLength=array.length,othLength=other.length;if(arrLength!=othLength&&!(isLoose&&othLength>arrLength)){return false;}while(++index<arrLength){var arrValue=array[index],othValue=other[index],result=customizer?customizer(isLoose?othValue:arrValue,isLoose?arrValue:othValue,index):undefined;if(result!==undefined){if(result){continue;}return false;}if(isLoose){if(!arraySome(other,function(othValue){return arrValue===othValue||equalFunc(arrValue,othValue,customizer,isLoose,stackA,stackB);})){return false;}}else if(!(arrValue===othValue||equalFunc(arrValue,othValue,customizer,isLoose,stackA,stackB))){return false;}}return true;}function equalByTag(object,other,tag){switch(tag){case boolTag:case dateTag:return+object==+other;case errorTag:return object.name==other.name&&object.message==other.message;case numberTag:return object!=+object?other!=+other:object==+other;case regexpTag:case stringTag:return object==other+'';}return false;}function equalObjects(object,other,equalFunc,customizer,isLoose,stackA,stackB){var objProps=keys(object),objLength=objProps.length,othProps=keys(other),othLength=othProps.length;if(objLength!=othLength&&!isLoose){return false;}var index=objLength;while(index--){var key=objProps[index];if(!(isLoose?key in other:hasOwnProperty.call(other,key))){return false;}}var skipCtor=isLoose;while(++index<objLength){key=objProps[index];var objValue=object[key],othValue=other[key],result=customizer?customizer(isLoose?othValue:objValue,isLoose?objValue:othValue,key):undefined;if(!(result===undefined?equalFunc(objValue,othValue,customizer,isLoose,stackA,stackB):result)){return false;}skipCtor||(skipCtor=key=='constructor');}if(!skipCtor){var objCtor=object.constructor,othCtor=other.constructor;if(objCtor!=othCtor&&'constructor'in object&&'constructor'in other&&!(typeof objCtor=='function'&&objCtor instanceof objCtor&&typeof othCtor=='function'&&othCtor instanceof othCtor)){return false;}}return true;}function getCallback(func,thisArg,argCount){var result=lodash.callback||callback;result=result===callback?baseCallback:result;return argCount?result(func,thisArg,argCount):result;}var getData=!metaMap?noop:function(func){return metaMap.get(func);};function getFuncName(func){var result=func.name,array=realNames[result],length=array?array.length:0;while(length--){var data=array[length],otherFunc=data.func;if(otherFunc==null||otherFunc==func){return data.name;}}return result;}function getIndexOf(collection,target,fromIndex){var result=lodash.indexOf||indexOf;result=result===indexOf?baseIndexOf:result;return collection?result(collection,target,fromIndex):result;}var getLength=baseProperty('length');function getMatchData(object){var result=pairs(object),length=result.length;while(length--){result[length][2]=isStrictComparable(result[length][1]);}return result;}function getNative(object,key){var value=object==null?undefined:object[key];return isNative(value)?value:undefined;}function getView(start,end,transforms){var index=-1,length=transforms.length;while(++index<length){var data=transforms[index],size=data.size;switch(data.type){case'drop':start+=size;break;case'dropRight':end-=size;break;case'take':end=nativeMin(end,start+size);break;case'takeRight':start=nativeMax(start,end-size);break;}}return{'start':start,'end':end};}function initCloneArray(array){var length=array.length,result=new array.constructor(length);if(length&&typeof array[0]=='string'&&hasOwnProperty.call(array,'index')){result.index=array.index;result.input=array.input;}return result;}function initCloneObject(object){var Ctor=object.constructor;if(!(typeof Ctor=='function'&&Ctor instanceof Ctor)){Ctor=Object;}return new Ctor();}function initCloneByTag(object,tag,isDeep){var Ctor=object.constructor;switch(tag){case arrayBufferTag:return bufferClone(object);case boolTag:case dateTag:return new Ctor(+object);case float32Tag:case float64Tag:case int8Tag:case int16Tag:case int32Tag:case uint8Tag:case uint8ClampedTag:case uint16Tag:case uint32Tag:var buffer=object.buffer;return new Ctor(isDeep?bufferClone(buffer):buffer,object.byteOffset,object.length);case numberTag:case stringTag:return new Ctor(object);case regexpTag:var result=new Ctor(object.source,reFlags.exec(object));result.lastIndex=object.lastIndex;}return result;}function invokePath(object,path,args){if(object!=null&&!isKey(path,object)){path=toPath(path);object=path.length==1?object:baseGet(object,baseSlice(path,0,-1));path=last(path);}var func=object==null?object:object[path];return func==null?undefined:func.apply(object,args);}function isArrayLike(value){return value!=null&&isLength(getLength(value));}function isIndex(value,length){value=typeof value=='number'||reIsUint.test(value)?+value:-1;length=length==null?MAX_SAFE_INTEGER:length;return value>-1&&value%1==0&&value<length;}function isIterateeCall(value,index,object){if(!isObject(object)){return false;}var type=typeof index;if(type=='number'?isArrayLike(object)&&isIndex(index,object.length):type=='string'&&index in object){var other=object[index];return value===value?value===other:other!==other;}return false;}function isKey(value,object){var type=typeof value;if(type=='string'&&reIsPlainProp.test(value)||type=='number'){return true;}if(isArray(value)){return false;}var result=!reIsDeepProp.test(value);return result||object!=null&&value in toObject(object);}function isLaziable(func){var funcName=getFuncName(func);if(!(funcName in LazyWrapper.prototype)){return false;}var other=lodash[funcName];if(func===other){return true;}var data=getData(other);return!!data&&func===data[0];}function isLength(value){return typeof value=='number'&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER;}function isStrictComparable(value){return value===value&&!isObject(value);}function mergeData(data,source){var bitmask=data[1],srcBitmask=source[1],newBitmask=bitmask|srcBitmask,isCommon=newBitmask<ARY_FLAG;var isCombo=srcBitmask==ARY_FLAG&&bitmask==CURRY_FLAG||srcBitmask==ARY_FLAG&&bitmask==REARG_FLAG&&data[7].length<=source[8]||srcBitmask==(ARY_FLAG|REARG_FLAG)&&bitmask==CURRY_FLAG;if(!(isCommon||isCombo)){return data;}if(srcBitmask&BIND_FLAG){data[2]=source[2];newBitmask|=bitmask&BIND_FLAG?0:CURRY_BOUND_FLAG;}var value=source[3];if(value){var partials=data[3];data[3]=partials?composeArgs(partials,value,source[4]):arrayCopy(value);data[4]=partials?replaceHolders(data[3],PLACEHOLDER):arrayCopy(source[4]);}value=source[5];if(value){partials=data[5];data[5]=partials?composeArgsRight(partials,value,source[6]):arrayCopy(value);data[6]=partials?replaceHolders(data[5],PLACEHOLDER):arrayCopy(source[6]);}value=source[7];if(value){data[7]=arrayCopy(value);}if(srcBitmask&ARY_FLAG){data[8]=data[8]==null?source[8]:nativeMin(data[8],source[8]);}if(data[9]==null){data[9]=source[9];}data[0]=source[0];data[1]=newBitmask;return data;}function mergeDefaults(objectValue,sourceValue){return objectValue===undefined?sourceValue:merge(objectValue,sourceValue,mergeDefaults);}function pickByArray(object,props){object=toObject(object);var index=-1,length=props.length,result={};while(++index<length){var key=props[index];if(key in object){result[key]=object[key];}}return result;}function pickByCallback(object,predicate){var result={};baseForIn(object,function(value,key,object){if(predicate(value,key,object)){result[key]=value;}});return result;}function reorder(array,indexes){var arrLength=array.length,length=nativeMin(indexes.length,arrLength),oldArray=arrayCopy(array);while(length--){var index=indexes[length];array[length]=isIndex(index,arrLength)?oldArray[index]:undefined;}return array;}var setData=function(){var count=0,lastCalled=0;return function(key,value){var stamp=now(),remaining=HOT_SPAN-(stamp-lastCalled);lastCalled=stamp;if(remaining>0){if(++count>=HOT_COUNT){return key;}}else{count=0;}return baseSetData(key,value);};}();function shimKeys(object){var props=keysIn(object),propsLength=props.length,length=propsLength&&object.length;var allowIndexes=!!length&&isLength(length)&&(isArray(object)||isArguments(object));var index=-1,result=[];while(++index<propsLength){var key=props[index];if(allowIndexes&&isIndex(key,length)||hasOwnProperty.call(object,key)){result.push(key);}}return result;}function toIterable(value){if(value==null){return[];}if(!isArrayLike(value)){return values(value);}return isObject(value)?value:Object(value);}function toObject(value){return isObject(value)?value:Object(value);}function toPath(value){if(isArray(value)){return value;}var result=[];baseToString(value).replace(rePropName,function(match,number,quote,string){result.push(quote?string.replace(reEscapeChar,'$1'):number||match);});return result;}function wrapperClone(wrapper){return wrapper instanceof LazyWrapper?wrapper.clone():new LodashWrapper(wrapper.__wrapped__,wrapper.__chain__,arrayCopy(wrapper.__actions__));}function chunk(array,size,guard){if(guard?isIterateeCall(array,size,guard):size==null){size=1;}else{size=nativeMax(nativeFloor(size)||1,1);}var index=0,length=array?array.length:0,resIndex=-1,result=Array(nativeCeil(length/size));while(index<length){result[++resIndex]=baseSlice(array,index,index+=size);}return result;}function compact(array){var index=-1,length=array?array.length:0,resIndex=-1,result=[];while(++index<length){var value=array[index];if(value){result[++resIndex]=value;}}return result;}var difference=restParam(function(array,values){return isObjectLike(array)&&isArrayLike(array)?baseDifference(array,baseFlatten(values,false,true)):[];});function drop(array,n,guard){var length=array?array.length:0;if(!length){return[];}if(guard?isIterateeCall(array,n,guard):n==null){n=1;}return baseSlice(array,n<0?0:n);}function dropRight(array,n,guard){var length=array?array.length:0;if(!length){return[];}if(guard?isIterateeCall(array,n,guard):n==null){n=1;}n=length-(+n||0);return baseSlice(array,0,n<0?0:n);}function dropRightWhile(array,predicate,thisArg){return array&&array.length?baseWhile(array,getCallback(predicate,thisArg,3),true,true):[];}function dropWhile(array,predicate,thisArg){return array&&array.length?baseWhile(array,getCallback(predicate,thisArg,3),true):[];}function fill(array,value,start,end){var length=array?array.length:0;if(!length){return[];}if(start&&typeof start!='number'&&isIterateeCall(array,value,start)){start=0;end=length;}return baseFill(array,value,start,end);}var findIndex=createFindIndex();var findLastIndex=createFindIndex(true);function first(array){return array?array[0]:undefined;}function flatten(array,isDeep,guard){var length=array?array.length:0;if(guard&&isIterateeCall(array,isDeep,guard)){isDeep=false;}return length?baseFlatten(array,isDeep):[];}function flattenDeep(array){var length=array?array.length:0;return length?baseFlatten(array,true):[];}function indexOf(array,value,fromIndex){var length=array?array.length:0;if(!length){return-1;}if(typeof fromIndex=='number'){fromIndex=fromIndex<0?nativeMax(length+fromIndex,0):fromIndex;}else if(fromIndex){var index=binaryIndex(array,value);if(index<length&&(value===value?value===array[index]:array[index]!==array[index])){return index;}return-1;}return baseIndexOf(array,value,fromIndex||0);}function initial(array){return dropRight(array,1);}var intersection=restParam(function(arrays){var othLength=arrays.length,othIndex=othLength,caches=Array(length),indexOf=getIndexOf(),isCommon=indexOf==baseIndexOf,result=[];while(othIndex--){var value=arrays[othIndex]=isArrayLike(value=arrays[othIndex])?value:[];caches[othIndex]=isCommon&&value.length>=120?createCache(othIndex&&value):null;}var array=arrays[0],index=-1,length=array?array.length:0,seen=caches[0];outer:while(++index<length){value=array[index];if((seen?cacheIndexOf(seen,value):indexOf(result,value,0))<0){var othIndex=othLength;while(--othIndex){var cache=caches[othIndex];if((cache?cacheIndexOf(cache,value):indexOf(arrays[othIndex],value,0))<0){continue outer;}}if(seen){seen.push(value);}result.push(value);}}return result;});function last(array){var length=array?array.length:0;return length?array[length-1]:undefined;}function lastIndexOf(array,value,fromIndex){var length=array?array.length:0;if(!length){return-1;}var index=length;if(typeof fromIndex=='number'){index=(fromIndex<0?nativeMax(length+fromIndex,0):nativeMin(fromIndex||0,length-1))+1;}else if(fromIndex){index=binaryIndex(array,value,true)-1;var other=array[index];if(value===value?value===other:other!==other){return index;}return-1;}if(value!==value){return indexOfNaN(array,index,true);}while(index--){if(array[index]===value){return index;}}return-1;}function pull(){var args=arguments,array=args[0];if(!(array&&array.length)){return array;}var index=0,indexOf=getIndexOf(),length=args.length;while(++index<length){var fromIndex=0,value=args[index];while((fromIndex=indexOf(array,value,fromIndex))>-1){splice.call(array,fromIndex,1);}}return array;}var pullAt=restParam(function(array,indexes){indexes=baseFlatten(indexes);var result=baseAt(array,indexes);basePullAt(array,indexes.sort(baseCompareAscending));return result;});function remove(array,predicate,thisArg){var result=[];if(!(array&&array.length)){return result;}var index=-1,indexes=[],length=array.length;predicate=getCallback(predicate,thisArg,3);while(++index<length){var value=array[index];if(predicate(value,index,array)){result.push(value);indexes.push(index);}}basePullAt(array,indexes);return result;}function rest(array){return drop(array,1);}function slice(array,start,end){var length=array?array.length:0;if(!length){return[];}if(end&&typeof end!='number'&&isIterateeCall(array,start,end)){start=0;end=length;}return baseSlice(array,start,end);}var sortedIndex=createSortedIndex();var sortedLastIndex=createSortedIndex(true);function take(array,n,guard){var length=array?array.length:0;if(!length){return[];}if(guard?isIterateeCall(array,n,guard):n==null){n=1;}return baseSlice(array,0,n<0?0:n);}function takeRight(array,n,guard){var length=array?array.length:0;if(!length){return[];}if(guard?isIterateeCall(array,n,guard):n==null){n=1;}n=length-(+n||0);return baseSlice(array,n<0?0:n);}function takeRightWhile(array,predicate,thisArg){return array&&array.length?baseWhile(array,getCallback(predicate,thisArg,3),false,true):[];}function takeWhile(array,predicate,thisArg){return array&&array.length?baseWhile(array,getCallback(predicate,thisArg,3)):[];}var union=restParam(function(arrays){return baseUniq(baseFlatten(arrays,false,true));});function uniq(array,isSorted,iteratee,thisArg){var length=array?array.length:0;if(!length){return[];}if(isSorted!=null&&typeof isSorted!='boolean'){thisArg=iteratee;iteratee=isIterateeCall(array,isSorted,thisArg)?undefined:isSorted;isSorted=false;}var callback=getCallback();if(!(iteratee==null&&callback===baseCallback)){iteratee=callback(iteratee,thisArg,3);}return isSorted&&getIndexOf()==baseIndexOf?sortedUniq(array,iteratee):baseUniq(array,iteratee);}function unzip(array){if(!(array&&array.length)){return[];}var index=-1,length=0;array=arrayFilter(array,function(group){if(isArrayLike(group)){length=nativeMax(group.length,length);return true;}});var result=Array(length);while(++index<length){result[index]=arrayMap(array,baseProperty(index));}return result;}function unzipWith(array,iteratee,thisArg){var length=array?array.length:0;if(!length){return[];}var result=unzip(array);if(iteratee==null){return result;}iteratee=bindCallback(iteratee,thisArg,4);return arrayMap(result,function(group){return arrayReduce(group,iteratee,undefined,true);});}var without=restParam(function(array,values){return isArrayLike(array)?baseDifference(array,values):[];});function xor(){var index=-1,length=arguments.length;while(++index<length){var array=arguments[index];if(isArrayLike(array)){var result=result?arrayPush(baseDifference(result,array),baseDifference(array,result)):array;}}return result?baseUniq(result):[];}var zip=restParam(unzip);function zipObject(props,values){var index=-1,length=props?props.length:0,result={};if(length&&!values&&!isArray(props[0])){values=[];}while(++index<length){var key=props[index];if(values){result[key]=values[index];}else if(key){result[key[0]]=key[1];}}return result;}var zipWith=restParam(function(arrays){var length=arrays.length,iteratee=length>2?arrays[length-2]:undefined,thisArg=length>1?arrays[length-1]:undefined;if(length>2&&typeof iteratee=='function'){length-=2;}else{iteratee=length>1&&typeof thisArg=='function'?(--length,thisArg):undefined;thisArg=undefined;}arrays.length=length;return unzipWith(arrays,iteratee,thisArg);});function chain(value){var result=lodash(value);result.__chain__=true;return result;}function tap(value,interceptor,thisArg){interceptor.call(thisArg,value);return value;}function thru(value,interceptor,thisArg){return interceptor.call(thisArg,value);}function wrapperChain(){return chain(this);}function wrapperCommit(){return new LodashWrapper(this.value(),this.__chain__);}var wrapperConcat=restParam(function(values){values=baseFlatten(values);return this.thru(function(array){return arrayConcat(isArray(array)?array:[toObject(array)],values);});});function wrapperPlant(value){var result,parent=this;while(parent instanceof baseLodash){var clone=wrapperClone(parent);if(result){previous.__wrapped__=clone;}else{result=clone;}var previous=clone;parent=parent.__wrapped__;}previous.__wrapped__=value;return result;}function wrapperReverse(){var value=this.__wrapped__;var interceptor=function(value){return wrapped&&wrapped.__dir__<0?value:value.reverse();};if(value instanceof LazyWrapper){var wrapped=value;if(this.__actions__.length){wrapped=new LazyWrapper(this);}wrapped=wrapped.reverse();wrapped.__actions__.push({'func':thru,'args':[interceptor],'thisArg':undefined});return new LodashWrapper(wrapped,this.__chain__);}return this.thru(interceptor);}function wrapperToString(){return this.value()+'';}function wrapperValue(){return baseWrapperValue(this.__wrapped__,this.__actions__);}var at=restParam(function(collection,props){return baseAt(collection,baseFlatten(props));});var countBy=createAggregator(function(result,value,key){hasOwnProperty.call(result,key)?++result[key]:result[key]=1;});function every(collection,predicate,thisArg){var func=isArray(collection)?arrayEvery:baseEvery;if(thisArg&&isIterateeCall(collection,predicate,thisArg)){predicate=undefined;}if(typeof predicate!='function'||thisArg!==undefined){predicate=getCallback(predicate,thisArg,3);}return func(collection,predicate);}function filter(collection,predicate,thisArg){var func=isArray(collection)?arrayFilter:baseFilter;predicate=getCallback(predicate,thisArg,3);return func(collection,predicate);}var find=createFind(baseEach);var findLast=createFind(baseEachRight,true);function findWhere(collection,source){return find(collection,baseMatches(source));}var forEach=createForEach(arrayEach,baseEach);var forEachRight=createForEach(arrayEachRight,baseEachRight);var groupBy=createAggregator(function(result,value,key){if(hasOwnProperty.call(result,key)){result[key].push(value);}else{result[key]=[value];}});function includes(collection,target,fromIndex,guard){var length=collection?getLength(collection):0;if(!isLength(length)){collection=values(collection);length=collection.length;}if(typeof fromIndex!='number'||guard&&isIterateeCall(target,fromIndex,guard)){fromIndex=0;}else{fromIndex=fromIndex<0?nativeMax(length+fromIndex,0):fromIndex||0;}return typeof collection=='string'||!isArray(collection)&&isString(collection)?fromIndex<=length&&collection.indexOf(target,fromIndex)>-1:!!length&&getIndexOf(collection,target,fromIndex)>-1;}var indexBy=createAggregator(function(result,value,key){result[key]=value;});var invoke=restParam(function(collection,path,args){var index=-1,isFunc=typeof path=='function',isProp=isKey(path),result=isArrayLike(collection)?Array(collection.length):[];baseEach(collection,function(value){var func=isFunc?path:isProp&&value!=null?value[path]:undefined;result[++index]=func?func.apply(value,args):invokePath(value,path,args);});return result;});function map(collection,iteratee,thisArg){var func=isArray(collection)?arrayMap:baseMap;iteratee=getCallback(iteratee,thisArg,3);return func(collection,iteratee);}var partition=createAggregator(function(result,value,key){result[key?0:1].push(value);},function(){return[[],[]];});function pluck(collection,path){return map(collection,property(path));}var reduce=createReduce(arrayReduce,baseEach);var reduceRight=createReduce(arrayReduceRight,baseEachRight);function reject(collection,predicate,thisArg){var func=isArray(collection)?arrayFilter:baseFilter;predicate=getCallback(predicate,thisArg,3);return func(collection,function(value,index,collection){return!predicate(value,index,collection);});}function sample(collection,n,guard){if(guard?isIterateeCall(collection,n,guard):n==null){collection=toIterable(collection);var length=collection.length;return length>0?collection[baseRandom(0,length-1)]:undefined;}var index=-1,result=toArray(collection),length=result.length,lastIndex=length-1;n=nativeMin(n<0?0:+n||0,length);while(++index<n){var rand=baseRandom(index,lastIndex),value=result[rand];result[rand]=result[index];result[index]=value;}result.length=n;return result;}function shuffle(collection){return sample(collection,POSITIVE_INFINITY);}function size(collection){var length=collection?getLength(collection):0;return isLength(length)?length:keys(collection).length;}function some(collection,predicate,thisArg){var func=isArray(collection)?arraySome:baseSome;if(thisArg&&isIterateeCall(collection,predicate,thisArg)){predicate=undefined;}if(typeof predicate!='function'||thisArg!==undefined){predicate=getCallback(predicate,thisArg,3);}return func(collection,predicate);}function sortBy(collection,iteratee,thisArg){if(collection==null){return[];}if(thisArg&&isIterateeCall(collection,iteratee,thisArg)){iteratee=undefined;}var index=-1;iteratee=getCallback(iteratee,thisArg,3);var result=baseMap(collection,function(value,key,collection){return{'criteria':iteratee(value,key,collection),'index':++index,'value':value};});return baseSortBy(result,compareAscending);}var sortByAll=restParam(function(collection,iteratees){if(collection==null){return[];}var guard=iteratees[2];if(guard&&isIterateeCall(iteratees[0],iteratees[1],guard)){iteratees.length=1;}return baseSortByOrder(collection,baseFlatten(iteratees),[]);});function sortByOrder(collection,iteratees,orders,guard){if(collection==null){return[];}if(guard&&isIterateeCall(iteratees,orders,guard)){orders=undefined;}if(!isArray(iteratees)){iteratees=iteratees==null?[]:[iteratees];}if(!isArray(orders)){orders=orders==null?[]:[orders];}return baseSortByOrder(collection,iteratees,orders);}function where(collection,source){return filter(collection,baseMatches(source));}var now=nativeNow||function(){return new Date().getTime();};function after(n,func){if(typeof func!='function'){if(typeof n=='function'){var temp=n;n=func;func=temp;}else{throw new TypeError(FUNC_ERROR_TEXT);}}n=nativeIsFinite(n=+n)?n:0;return function(){if(--n<1){return func.apply(this,arguments);}};}function ary(func,n,guard){if(guard&&isIterateeCall(func,n,guard)){n=undefined;}n=func&&n==null?func.length:nativeMax(+n||0,0);return createWrapper(func,ARY_FLAG,undefined,undefined,undefined,undefined,n);}function before(n,func){var result;if(typeof func!='function'){if(typeof n=='function'){var temp=n;n=func;func=temp;}else{throw new TypeError(FUNC_ERROR_TEXT);}}return function(){if(--n>0){result=func.apply(this,arguments);}if(n<=1){func=undefined;}return result;};}var bind=restParam(function(func,thisArg,partials){var bitmask=BIND_FLAG;if(partials.length){var holders=replaceHolders(partials,bind.placeholder);bitmask|=PARTIAL_FLAG;}return createWrapper(func,bitmask,thisArg,partials,holders);});var bindAll=restParam(function(object,methodNames){methodNames=methodNames.length?baseFlatten(methodNames):functions(object);var index=-1,length=methodNames.length;while(++index<length){var key=methodNames[index];object[key]=createWrapper(object[key],BIND_FLAG,object);}return object;});var bindKey=restParam(function(object,key,partials){var bitmask=BIND_FLAG|BIND_KEY_FLAG;if(partials.length){var holders=replaceHolders(partials,bindKey.placeholder);bitmask|=PARTIAL_FLAG;}return createWrapper(key,bitmask,object,partials,holders);});var curry=createCurry(CURRY_FLAG);var curryRight=createCurry(CURRY_RIGHT_FLAG);function debounce(func,wait,options){var args,maxTimeoutId,result,stamp,thisArg,timeoutId,trailingCall,lastCalled=0,maxWait=false,trailing=true;if(typeof func!='function'){throw new TypeError(FUNC_ERROR_TEXT);}wait=wait<0?0:+wait||0;if(options===true){var leading=true;trailing=false;}else if(isObject(options)){leading=!!options.leading;maxWait='maxWait'in options&&nativeMax(+options.maxWait||0,wait);trailing='trailing'in options?!!options.trailing:trailing;}function cancel(){if(timeoutId){clearTimeout(timeoutId);}if(maxTimeoutId){clearTimeout(maxTimeoutId);}lastCalled=0;maxTimeoutId=timeoutId=trailingCall=undefined;}function complete(isCalled,id){if(id){clearTimeout(id);}maxTimeoutId=timeoutId=trailingCall=undefined;if(isCalled){lastCalled=now();result=func.apply(thisArg,args);if(!timeoutId&&!maxTimeoutId){args=thisArg=undefined;}}}function delayed(){var remaining=wait-(now()-stamp);if(remaining<=0||remaining>wait){complete(trailingCall,maxTimeoutId);}else{timeoutId=setTimeout(delayed,remaining);}}function maxDelayed(){complete(trailing,timeoutId);}function debounced(){args=arguments;stamp=now();thisArg=this;trailingCall=trailing&&(timeoutId||!leading);if(maxWait===false){var leadingCall=leading&&!timeoutId;}else{if(!maxTimeoutId&&!leading){lastCalled=stamp;}var remaining=maxWait-(stamp-lastCalled),isCalled=remaining<=0||remaining>maxWait;if(isCalled){if(maxTimeoutId){maxTimeoutId=clearTimeout(maxTimeoutId);}lastCalled=stamp;result=func.apply(thisArg,args);}else if(!maxTimeoutId){maxTimeoutId=setTimeout(maxDelayed,remaining);}}if(isCalled&&timeoutId){timeoutId=clearTimeout(timeoutId);}else if(!timeoutId&&wait!==maxWait){timeoutId=setTimeout(delayed,wait);}if(leadingCall){isCalled=true;result=func.apply(thisArg,args);}if(isCalled&&!timeoutId&&!maxTimeoutId){args=thisArg=undefined;}return result;}debounced.cancel=cancel;return debounced;}var defer=restParam(function(func,args){return baseDelay(func,1,args);});var delay=restParam(function(func,wait,args){return baseDelay(func,wait,args);});var flow=createFlow();var flowRight=createFlow(true);function memoize(func,resolver){if(typeof func!='function'||resolver&&typeof resolver!='function'){throw new TypeError(FUNC_ERROR_TEXT);}var memoized=function(){var args=arguments,key=resolver?resolver.apply(this,args):args[0],cache=memoized.cache;if(cache.has(key)){return cache.get(key);}var result=func.apply(this,args);memoized.cache=cache.set(key,result);return result;};memoized.cache=new memoize.Cache();return memoized;}var modArgs=restParam(function(func,transforms){transforms=baseFlatten(transforms);if(typeof func!='function'||!arrayEvery(transforms,baseIsFunction)){throw new TypeError(FUNC_ERROR_TEXT);}var length=transforms.length;return restParam(function(args){var index=nativeMin(args.length,length);while(index--){args[index]=transforms[index](args[index]);}return func.apply(this,args);});});function negate(predicate){if(typeof predicate!='function'){throw new TypeError(FUNC_ERROR_TEXT);}return function(){return!predicate.apply(this,arguments);};}function once(func){return before(2,func);}var partial=createPartial(PARTIAL_FLAG);var partialRight=createPartial(PARTIAL_RIGHT_FLAG);var rearg=restParam(function(func,indexes){return createWrapper(func,REARG_FLAG,undefined,undefined,undefined,baseFlatten(indexes));});function restParam(func,start){if(typeof func!='function'){throw new TypeError(FUNC_ERROR_TEXT);}start=nativeMax(start===undefined?func.length-1:+start||0,0);return function(){var args=arguments,index=-1,length=nativeMax(args.length-start,0),rest=Array(length);while(++index<length){rest[index]=args[start+index];}switch(start){case 0:return func.call(this,rest);case 1:return func.call(this,args[0],rest);case 2:return func.call(this,args[0],args[1],rest);}var otherArgs=Array(start+1);index=-1;while(++index<start){otherArgs[index]=args[index];}otherArgs[start]=rest;return func.apply(this,otherArgs);};}function spread(func){if(typeof func!='function'){throw new TypeError(FUNC_ERROR_TEXT);}return function(array){return func.apply(this,array);};}function throttle(func,wait,options){var leading=true,trailing=true;if(typeof func!='function'){throw new TypeError(FUNC_ERROR_TEXT);}if(options===false){leading=false;}else if(isObject(options)){leading='leading'in options?!!options.leading:leading;trailing='trailing'in options?!!options.trailing:trailing;}return debounce(func,wait,{'leading':leading,'maxWait':+wait,'trailing':trailing});}function wrap(value,wrapper){wrapper=wrapper==null?identity:wrapper;return createWrapper(wrapper,PARTIAL_FLAG,undefined,[value],[]);}function clone(value,isDeep,customizer,thisArg){if(isDeep&&typeof isDeep!='boolean'&&isIterateeCall(value,isDeep,customizer)){isDeep=false;}else if(typeof isDeep=='function'){thisArg=customizer;customizer=isDeep;isDeep=false;}return typeof customizer=='function'?baseClone(value,isDeep,bindCallback(customizer,thisArg,1)):baseClone(value,isDeep);}function cloneDeep(value,customizer,thisArg){return typeof customizer=='function'?baseClone(value,true,bindCallback(customizer,thisArg,1)):baseClone(value,true);}function gt(value,other){return value>other;}function gte(value,other){return value>=other;}function isArguments(value){return isObjectLike(value)&&isArrayLike(value)&&hasOwnProperty.call(value,'callee')&&!propertyIsEnumerable.call(value,'callee');}var isArray=nativeIsArray||function(value){return isObjectLike(value)&&isLength(value.length)&&objToString.call(value)==arrayTag;};function isBoolean(value){return value===true||value===false||isObjectLike(value)&&objToString.call(value)==boolTag;}function isDate(value){return isObjectLike(value)&&objToString.call(value)==dateTag;}function isElement(value){return!!value&&value.nodeType===1&&isObjectLike(value)&&!isPlainObject(value);}function isEmpty(value){if(value==null){return true;}if(isArrayLike(value)&&(isArray(value)||isString(value)||isArguments(value)||isObjectLike(value)&&isFunction(value.splice))){return!value.length;}return!keys(value).length;}function isEqual(value,other,customizer,thisArg){customizer=typeof customizer=='function'?bindCallback(customizer,thisArg,3):undefined;var result=customizer?customizer(value,other):undefined;return result===undefined?baseIsEqual(value,other,customizer):!!result;}function isError(value){return isObjectLike(value)&&typeof value.message=='string'&&objToString.call(value)==errorTag;}function isFinite(value){return typeof value=='number'&&nativeIsFinite(value);}function isFunction(value){return isObject(value)&&objToString.call(value)==funcTag;}function isObject(value){var type=typeof value;return!!value&&(type=='object'||type=='function');}function isMatch(object,source,customizer,thisArg){customizer=typeof customizer=='function'?bindCallback(customizer,thisArg,3):undefined;return baseIsMatch(object,getMatchData(source),customizer);}function isNaN(value){return isNumber(value)&&value!=+value;}function isNative(value){if(value==null){return false;}if(isFunction(value)){return reIsNative.test(fnToString.call(value));}return isObjectLike(value)&&reIsHostCtor.test(value);}function isNull(value){return value===null;}function isNumber(value){return typeof value=='number'||isObjectLike(value)&&objToString.call(value)==numberTag;}function isPlainObject(value){var Ctor;if(!(isObjectLike(value)&&objToString.call(value)==objectTag&&!isArguments(value))||!hasOwnProperty.call(value,'constructor')&&(Ctor=value.constructor,typeof Ctor=='function'&&!(Ctor instanceof Ctor))){return false;}var result;baseForIn(value,function(subValue,key){result=key;});return result===undefined||hasOwnProperty.call(value,result);}function isRegExp(value){return isObject(value)&&objToString.call(value)==regexpTag;}function isString(value){return typeof value=='string'||isObjectLike(value)&&objToString.call(value)==stringTag;}function isTypedArray(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[objToString.call(value)];}function isUndefined(value){return value===undefined;}function lt(value,other){return value<other;}function lte(value,other){return value<=other;}function toArray(value){var length=value?getLength(value):0;if(!isLength(length)){return values(value);}if(!length){return[];}return arrayCopy(value);}function toPlainObject(value){return baseCopy(value,keysIn(value));}var merge=createAssigner(baseMerge);var assign=createAssigner(function(object,source,customizer){return customizer?assignWith(object,source,customizer):baseAssign(object,source);});function create(prototype,properties,guard){var result=baseCreate(prototype);if(guard&&isIterateeCall(prototype,properties,guard)){properties=undefined;}return properties?baseAssign(result,properties):result;}var defaults=createDefaults(assign,assignDefaults);var defaultsDeep=createDefaults(merge,mergeDefaults);var findKey=createFindKey(baseForOwn);var findLastKey=createFindKey(baseForOwnRight);var forIn=createForIn(baseFor);var forInRight=createForIn(baseForRight);var forOwn=createForOwn(baseForOwn);var forOwnRight=createForOwn(baseForOwnRight);function functions(object){return baseFunctions(object,keysIn(object));}function get(object,path,defaultValue){var result=object==null?undefined:baseGet(object,toPath(path),path+'');return result===undefined?defaultValue:result;}function has(object,path){if(object==null){return false;}var result=hasOwnProperty.call(object,path);if(!result&&!isKey(path)){path=toPath(path);object=path.length==1?object:baseGet(object,baseSlice(path,0,-1));if(object==null){return false;}path=last(path);result=hasOwnProperty.call(object,path);}return result||isLength(object.length)&&isIndex(path,object.length)&&(isArray(object)||isArguments(object));}function invert(object,multiValue,guard){if(guard&&isIterateeCall(object,multiValue,guard)){multiValue=undefined;}var index=-1,props=keys(object),length=props.length,result={};while(++index<length){var key=props[index],value=object[key];if(multiValue){if(hasOwnProperty.call(result,value)){result[value].push(key);}else{result[value]=[key];}}else{result[value]=key;}}return result;}var keys=!nativeKeys?shimKeys:function(object){var Ctor=object==null?undefined:object.constructor;if(typeof Ctor=='function'&&Ctor.prototype===object||typeof object!='function'&&isArrayLike(object)){return shimKeys(object);}return isObject(object)?nativeKeys(object):[];};function keysIn(object){if(object==null){return[];}if(!isObject(object)){object=Object(object);}var length=object.length;length=length&&isLength(length)&&(isArray(object)||isArguments(object))&&length||0;var Ctor=object.constructor,index=-1,isProto=typeof Ctor=='function'&&Ctor.prototype===object,result=Array(length),skipIndexes=length>0;while(++index<length){result[index]=index+'';}for(var key in object){if(!(skipIndexes&&isIndex(key,length))&&!(key=='constructor'&&(isProto||!hasOwnProperty.call(object,key)))){result.push(key);}}return result;}var mapKeys=createObjectMapper(true);var mapValues=createObjectMapper();var omit=restParam(function(object,props){if(object==null){return{};}if(typeof props[0]!='function'){var props=arrayMap(baseFlatten(props),String);return pickByArray(object,baseDifference(keysIn(object),props));}var predicate=bindCallback(props[0],props[1],3);return pickByCallback(object,function(value,key,object){return!predicate(value,key,object);});});function pairs(object){object=toObject(object);var index=-1,props=keys(object),length=props.length,result=Array(length);while(++index<length){var key=props[index];result[index]=[key,object[key]];}return result;}var pick=restParam(function(object,props){if(object==null){return{};}return typeof props[0]=='function'?pickByCallback(object,bindCallback(props[0],props[1],3)):pickByArray(object,baseFlatten(props));});function result(object,path,defaultValue){var result=object==null?undefined:object[path];if(result===undefined){if(object!=null&&!isKey(path,object)){path=toPath(path);object=path.length==1?object:baseGet(object,baseSlice(path,0,-1));result=object==null?undefined:object[last(path)];}result=result===undefined?defaultValue:result;}return isFunction(result)?result.call(object):result;}function set(object,path,value){if(object==null){return object;}var pathKey=path+'';path=object[pathKey]!=null||isKey(path,object)?[pathKey]:toPath(path);var index=-1,length=path.length,lastIndex=length-1,nested=object;while(nested!=null&&++index<length){var key=path[index];if(isObject(nested)){if(index==lastIndex){nested[key]=value;}else if(nested[key]==null){nested[key]=isIndex(path[index+1])?[]:{};}}nested=nested[key];}return object;}function transform(object,iteratee,accumulator,thisArg){var isArr=isArray(object)||isTypedArray(object);iteratee=getCallback(iteratee,thisArg,4);if(accumulator==null){if(isArr||isObject(object)){var Ctor=object.constructor;if(isArr){accumulator=isArray(object)?new Ctor():[];}else{accumulator=baseCreate(isFunction(Ctor)?Ctor.prototype:undefined);}}else{accumulator={};}}(isArr?arrayEach:baseForOwn)(object,function(value,index,object){return iteratee(accumulator,value,index,object);});return accumulator;}function values(object){return baseValues(object,keys(object));}function valuesIn(object){return baseValues(object,keysIn(object));}function inRange(value,start,end){start=+start||0;if(end===undefined){end=start;start=0;}else{end=+end||0;}return value>=nativeMin(start,end)&&value<nativeMax(start,end);}function random(min,max,floating){if(floating&&isIterateeCall(min,max,floating)){max=floating=undefined;}var noMin=min==null,noMax=max==null;if(floating==null){if(noMax&&typeof min=='boolean'){floating=min;min=1;}else if(typeof max=='boolean'){floating=max;noMax=true;}}if(noMin&&noMax){max=1;noMax=false;}min=+min||0;if(noMax){max=min;min=0;}else{max=+max||0;}if(floating||min%1||max%1){var rand=nativeRandom();return nativeMin(min+rand*(max-min+parseFloat('1e-'+((rand+'').length-1))),max);}return baseRandom(min,max);}var camelCase=createCompounder(function(result,word,index){word=word.toLowerCase();return result+(index?word.charAt(0).toUpperCase()+word.slice(1):word);});function capitalize(string){string=baseToString(string);return string&&string.charAt(0).toUpperCase()+string.slice(1);}function deburr(string){string=baseToString(string);return string&&string.replace(reLatin1,deburrLetter).replace(reComboMark,'');}function endsWith(string,target,position){string=baseToString(string);target=target+'';var length=string.length;position=position===undefined?length:nativeMin(position<0?0:+position||0,length);position-=target.length;return position>=0&&string.indexOf(target,position)==position;}function escape(string){string=baseToString(string);return string&&reHasUnescapedHtml.test(string)?string.replace(reUnescapedHtml,escapeHtmlChar):string;}function escapeRegExp(string){string=baseToString(string);return string&&reHasRegExpChars.test(string)?string.replace(reRegExpChars,escapeRegExpChar):string||'(?:)';}var kebabCase=createCompounder(function(result,word,index){return result+(index?'-':'')+word.toLowerCase();});function pad(string,length,chars){string=baseToString(string);length=+length;var strLength=string.length;if(strLength>=length||!nativeIsFinite(length)){return string;}var mid=(length-strLength)/2,leftLength=nativeFloor(mid),rightLength=nativeCeil(mid);chars=createPadding('',rightLength,chars);return chars.slice(0,leftLength)+string+chars;}var padLeft=createPadDir();var padRight=createPadDir(true);function parseInt(string,radix,guard){if(guard?isIterateeCall(string,radix,guard):radix==null){radix=0;}else if(radix){radix=+radix;}string=trim(string);return nativeParseInt(string,radix||(reHasHexPrefix.test(string)?16:10));}function repeat(string,n){var result='';string=baseToString(string);n=+n;if(n<1||!string||!nativeIsFinite(n)){return result;}do{if(n%2){result+=string;}n=nativeFloor(n/2);string+=string;}while(n);return result;}var snakeCase=createCompounder(function(result,word,index){return result+(index?'_':'')+word.toLowerCase();});var startCase=createCompounder(function(result,word,index){return result+(index?' ':'')+(word.charAt(0).toUpperCase()+word.slice(1));});function startsWith(string,target,position){string=baseToString(string);position=position==null?0:nativeMin(position<0?0:+position||0,string.length);return string.lastIndexOf(target,position)==position;}function template(string,options,otherOptions){var settings=lodash.templateSettings;if(otherOptions&&isIterateeCall(string,options,otherOptions)){options=otherOptions=undefined;}string=baseToString(string);options=assignWith(baseAssign({},otherOptions||options),settings,assignOwnDefaults);var imports=assignWith(baseAssign({},options.imports),settings.imports,assignOwnDefaults),importsKeys=keys(imports),importsValues=baseValues(imports,importsKeys);var isEscaping,isEvaluating,index=0,interpolate=options.interpolate||reNoMatch,source="__p += '";var reDelimiters=RegExp((options.escape||reNoMatch).source+'|'+interpolate.source+'|'+(interpolate===reInterpolate?reEsTemplate:reNoMatch).source+'|'+(options.evaluate||reNoMatch).source+'|$','g');var sourceURL='//# sourceURL='+('sourceURL'in options?options.sourceURL:'lodash.templateSources['+ ++templateCounter+']')+'\n';string.replace(reDelimiters,function(match,escapeValue,interpolateValue,esTemplateValue,evaluateValue,offset){interpolateValue||(interpolateValue=esTemplateValue);source+=string.slice(index,offset).replace(reUnescapedString,escapeStringChar);if(escapeValue){isEscaping=true;source+="' +\n__e("+escapeValue+") +\n'";}if(evaluateValue){isEvaluating=true;source+="';\n"+evaluateValue+";\n__p += '";}if(interpolateValue){source+="' +\n((__t = ("+interpolateValue+")) == null ? '' : __t) +\n'";}index=offset+match.length;return match;});source+="';\n";var variable=options.variable;if(!variable){source='with (obj) {\n'+source+'\n}\n';}source=(isEvaluating?source.replace(reEmptyStringLeading,''):source).replace(reEmptyStringMiddle,'$1').replace(reEmptyStringTrailing,'$1;');source='function('+(variable||'obj')+') {\n'+(variable?'':'obj || (obj = {});\n')+"var __t, __p = ''"+(isEscaping?', __e = _.escape':'')+(isEvaluating?', __j = Array.prototype.join;\n'+"function print() { __p += __j.call(arguments, '') }\n":';\n')+source+'return __p\n}';var result=attempt(function(){return Function(importsKeys,sourceURL+'return '+source).apply(undefined,importsValues);});result.source=source;if(isError(result)){throw result;}return result;}function trim(string,chars,guard){var value=string;string=baseToString(string);if(!string){return string;}if(guard?isIterateeCall(value,chars,guard):chars==null){return string.slice(trimmedLeftIndex(string),trimmedRightIndex(string)+1);}chars=chars+'';return string.slice(charsLeftIndex(string,chars),charsRightIndex(string,chars)+1);}function trimLeft(string,chars,guard){var value=string;string=baseToString(string);if(!string){return string;}if(guard?isIterateeCall(value,chars,guard):chars==null){return string.slice(trimmedLeftIndex(string));}return string.slice(charsLeftIndex(string,chars+''));}function trimRight(string,chars,guard){var value=string;string=baseToString(string);if(!string){return string;}if(guard?isIterateeCall(value,chars,guard):chars==null){return string.slice(0,trimmedRightIndex(string)+1);}return string.slice(0,charsRightIndex(string,chars+'')+1);}function trunc(string,options,guard){if(guard&&isIterateeCall(string,options,guard)){options=undefined;}var length=DEFAULT_TRUNC_LENGTH,omission=DEFAULT_TRUNC_OMISSION;if(options!=null){if(isObject(options)){var separator='separator'in options?options.separator:separator;length='length'in options?+options.length||0:length;omission='omission'in options?baseToString(options.omission):omission;}else{length=+options||0;}}string=baseToString(string);if(length>=string.length){return string;}var end=length-omission.length;if(end<1){return omission;}var result=string.slice(0,end);if(separator==null){return result+omission;}if(isRegExp(separator)){if(string.slice(end).search(separator)){var match,newEnd,substring=string.slice(0,end);if(!separator.global){separator=RegExp(separator.source,(reFlags.exec(separator)||'')+'g');}separator.lastIndex=0;while(match=separator.exec(substring)){newEnd=match.index;}result=result.slice(0,newEnd==null?end:newEnd);}}else if(string.indexOf(separator,end)!=end){var index=result.lastIndexOf(separator);if(index>-1){result=result.slice(0,index);}}return result+omission;}function unescape(string){string=baseToString(string);return string&&reHasEscapedHtml.test(string)?string.replace(reEscapedHtml,unescapeHtmlChar):string;}function words(string,pattern,guard){if(guard&&isIterateeCall(string,pattern,guard)){pattern=undefined;}string=baseToString(string);return string.match(pattern||reWords)||[];}var attempt=restParam(function(func,args){try{return func.apply(undefined,args);}catch(e){return isError(e)?e:new Error(e);}});function callback(func,thisArg,guard){if(guard&&isIterateeCall(func,thisArg,guard)){thisArg=undefined;}return isObjectLike(func)?matches(func):baseCallback(func,thisArg);}function constant(value){return function(){return value;};}function identity(value){return value;}function matches(source){return baseMatches(baseClone(source,true));}function matchesProperty(path,srcValue){return baseMatchesProperty(path,baseClone(srcValue,true));}var method=restParam(function(path,args){return function(object){return invokePath(object,path,args);};});var methodOf=restParam(function(object,args){return function(path){return invokePath(object,path,args);};});function mixin(object,source,options){if(options==null){var isObj=isObject(source),props=isObj?keys(source):undefined,methodNames=props&&props.length?baseFunctions(source,props):undefined;if(!(methodNames?methodNames.length:isObj)){methodNames=false;options=source;source=object;object=this;}}if(!methodNames){methodNames=baseFunctions(source,keys(source));}var chain=true,index=-1,isFunc=isFunction(object),length=methodNames.length;if(options===false){chain=false;}else if(isObject(options)&&'chain'in options){chain=options.chain;}while(++index<length){var methodName=methodNames[index],func=source[methodName];object[methodName]=func;if(isFunc){object.prototype[methodName]=function(func){return function(){var chainAll=this.__chain__;if(chain||chainAll){var result=object(this.__wrapped__),actions=result.__actions__=arrayCopy(this.__actions__);actions.push({'func':func,'args':arguments,'thisArg':object});result.__chain__=chainAll;return result;}return func.apply(object,arrayPush([this.value()],arguments));};}(func);}}return object;}function noConflict(){root._=oldDash;return this;}function noop(){}function property(path){return isKey(path)?baseProperty(path):basePropertyDeep(path);}function propertyOf(object){return function(path){return baseGet(object,toPath(path),path+'');};}function range(start,end,step){if(step&&isIterateeCall(start,end,step)){end=step=undefined;}start=+start||0;step=step==null?1:+step||0;if(end==null){end=start;start=0;}else{end=+end||0;}var index=-1,length=nativeMax(nativeCeil((end-start)/(step||1)),0),result=Array(length);while(++index<length){result[index]=start;start+=step;}return result;}function times(n,iteratee,thisArg){n=nativeFloor(n);if(n<1||!nativeIsFinite(n)){return[];}var index=-1,result=Array(nativeMin(n,MAX_ARRAY_LENGTH));iteratee=bindCallback(iteratee,thisArg,1);while(++index<n){if(index<MAX_ARRAY_LENGTH){result[index]=iteratee(index);}else{iteratee(index);}}return result;}function uniqueId(prefix){var id=++idCounter;return baseToString(prefix)+id;}function add(augend,addend){return(+augend||0)+(+addend||0);}var ceil=createRound('ceil');var floor=createRound('floor');var max=createExtremum(gt,NEGATIVE_INFINITY);var min=createExtremum(lt,POSITIVE_INFINITY);var round=createRound('round');function sum(collection,iteratee,thisArg){if(thisArg&&isIterateeCall(collection,iteratee,thisArg)){iteratee=undefined;}iteratee=getCallback(iteratee,thisArg,3);return iteratee.length==1?arraySum(isArray(collection)?collection:toIterable(collection),iteratee):baseSum(collection,iteratee);}lodash.prototype=baseLodash.prototype;LodashWrapper.prototype=baseCreate(baseLodash.prototype);LodashWrapper.prototype.constructor=LodashWrapper;LazyWrapper.prototype=baseCreate(baseLodash.prototype);LazyWrapper.prototype.constructor=LazyWrapper;MapCache.prototype['delete']=mapDelete;MapCache.prototype.get=mapGet;MapCache.prototype.has=mapHas;MapCache.prototype.set=mapSet;SetCache.prototype.push=cachePush;memoize.Cache=MapCache;lodash.after=after;lodash.ary=ary;lodash.assign=assign;lodash.at=at;lodash.before=before;lodash.bind=bind;lodash.bindAll=bindAll;lodash.bindKey=bindKey;lodash.callback=callback;lodash.chain=chain;lodash.chunk=chunk;lodash.compact=compact;lodash.constant=constant;lodash.countBy=countBy;lodash.create=create;lodash.curry=curry;lodash.curryRight=curryRight;lodash.debounce=debounce;lodash.defaults=defaults;lodash.defaultsDeep=defaultsDeep;lodash.defer=defer;lodash.delay=delay;lodash.difference=difference;lodash.drop=drop;lodash.dropRight=dropRight;lodash.dropRightWhile=dropRightWhile;lodash.dropWhile=dropWhile;lodash.fill=fill;lodash.filter=filter;lodash.flatten=flatten;lodash.flattenDeep=flattenDeep;lodash.flow=flow;lodash.flowRight=flowRight;lodash.forEach=forEach;lodash.forEachRight=forEachRight;lodash.forIn=forIn;lodash.forInRight=forInRight;lodash.forOwn=forOwn;lodash.forOwnRight=forOwnRight;lodash.functions=functions;lodash.groupBy=groupBy;lodash.indexBy=indexBy;lodash.initial=initial;lodash.intersection=intersection;lodash.invert=invert;lodash.invoke=invoke;lodash.keys=keys;lodash.keysIn=keysIn;lodash.map=map;lodash.mapKeys=mapKeys;lodash.mapValues=mapValues;lodash.matches=matches;lodash.matchesProperty=matchesProperty;lodash.memoize=memoize;lodash.merge=merge;lodash.method=method;lodash.methodOf=methodOf;lodash.mixin=mixin;lodash.modArgs=modArgs;lodash.negate=negate;lodash.omit=omit;lodash.once=once;lodash.pairs=pairs;lodash.partial=partial;lodash.partialRight=partialRight;lodash.partition=partition;lodash.pick=pick;lodash.pluck=pluck;lodash.property=property;lodash.propertyOf=propertyOf;lodash.pull=pull;lodash.pullAt=pullAt;lodash.range=range;lodash.rearg=rearg;lodash.reject=reject;lodash.remove=remove;lodash.rest=rest;lodash.restParam=restParam;lodash.set=set;lodash.shuffle=shuffle;lodash.slice=slice;lodash.sortBy=sortBy;lodash.sortByAll=sortByAll;lodash.sortByOrder=sortByOrder;lodash.spread=spread;lodash.take=take;lodash.takeRight=takeRight;lodash.takeRightWhile=takeRightWhile;lodash.takeWhile=takeWhile;lodash.tap=tap;lodash.throttle=throttle;lodash.thru=thru;lodash.times=times;lodash.toArray=toArray;lodash.toPlainObject=toPlainObject;lodash.transform=transform;lodash.union=union;lodash.uniq=uniq;lodash.unzip=unzip;lodash.unzipWith=unzipWith;lodash.values=values;lodash.valuesIn=valuesIn;lodash.where=where;lodash.without=without;lodash.wrap=wrap;lodash.xor=xor;lodash.zip=zip;lodash.zipObject=zipObject;lodash.zipWith=zipWith;lodash.backflow=flowRight;lodash.collect=map;lodash.compose=flowRight;lodash.each=forEach;lodash.eachRight=forEachRight;lodash.extend=assign;lodash.iteratee=callback;lodash.methods=functions;lodash.object=zipObject;lodash.select=filter;lodash.tail=rest;lodash.unique=uniq;mixin(lodash,lodash);lodash.add=add;lodash.attempt=attempt;lodash.camelCase=camelCase;lodash.capitalize=capitalize;lodash.ceil=ceil;lodash.clone=clone;lodash.cloneDeep=cloneDeep;lodash.deburr=deburr;lodash.endsWith=endsWith;lodash.escape=escape;lodash.escapeRegExp=escapeRegExp;lodash.every=every;lodash.find=find;lodash.findIndex=findIndex;lodash.findKey=findKey;lodash.findLast=findLast;lodash.findLastIndex=findLastIndex;lodash.findLastKey=findLastKey;lodash.findWhere=findWhere;lodash.first=first;lodash.floor=floor;lodash.get=get;lodash.gt=gt;lodash.gte=gte;lodash.has=has;lodash.identity=identity;lodash.includes=includes;lodash.indexOf=indexOf;lodash.inRange=inRange;lodash.isArguments=isArguments;lodash.isArray=isArray;lodash.isBoolean=isBoolean;lodash.isDate=isDate;lodash.isElement=isElement;lodash.isEmpty=isEmpty;lodash.isEqual=isEqual;lodash.isError=isError;lodash.isFinite=isFinite;lodash.isFunction=isFunction;lodash.isMatch=isMatch;lodash.isNaN=isNaN;lodash.isNative=isNative;lodash.isNull=isNull;lodash.isNumber=isNumber;lodash.isObject=isObject;lodash.isPlainObject=isPlainObject;lodash.isRegExp=isRegExp;lodash.isString=isString;lodash.isTypedArray=isTypedArray;lodash.isUndefined=isUndefined;lodash.kebabCase=kebabCase;lodash.last=last;lodash.lastIndexOf=lastIndexOf;lodash.lt=lt;lodash.lte=lte;lodash.max=max;lodash.min=min;lodash.noConflict=noConflict;lodash.noop=noop;lodash.now=now;lodash.pad=pad;lodash.padLeft=padLeft;lodash.padRight=padRight;lodash.parseInt=parseInt;lodash.random=random;lodash.reduce=reduce;lodash.reduceRight=reduceRight;lodash.repeat=repeat;lodash.result=result;lodash.round=round;lodash.runInContext=runInContext;lodash.size=size;lodash.snakeCase=snakeCase;lodash.some=some;lodash.sortedIndex=sortedIndex;lodash.sortedLastIndex=sortedLastIndex;lodash.startCase=startCase;lodash.startsWith=startsWith;lodash.sum=sum;lodash.template=template;lodash.trim=trim;lodash.trimLeft=trimLeft;lodash.trimRight=trimRight;lodash.trunc=trunc;lodash.unescape=unescape;lodash.uniqueId=uniqueId;lodash.words=words;lodash.all=every;lodash.any=some;lodash.contains=includes;lodash.eq=isEqual;lodash.detect=find;lodash.foldl=reduce;lodash.foldr=reduceRight;lodash.head=first;lodash.include=includes;lodash.inject=reduce;mixin(lodash,function(){var source={};baseForOwn(lodash,function(func,methodName){if(!lodash.prototype[methodName]){source[methodName]=func;}});return source;}(),false);lodash.sample=sample;lodash.prototype.sample=function(n){if(!this.__chain__&&n==null){return sample(this.value());}return this.thru(function(value){return sample(value,n);});};lodash.VERSION=VERSION;arrayEach(['bind','bindKey','curry','curryRight','partial','partialRight'],function(methodName){lodash[methodName].placeholder=lodash;});arrayEach(['drop','take'],function(methodName,index){LazyWrapper.prototype[methodName]=function(n){var filtered=this.__filtered__;if(filtered&&!index){return new LazyWrapper(this);}n=n==null?1:nativeMax(nativeFloor(n)||0,0);var result=this.clone();if(filtered){result.__takeCount__=nativeMin(result.__takeCount__,n);}else{result.__views__.push({'size':n,'type':methodName+(result.__dir__<0?'Right':'')});}return result;};LazyWrapper.prototype[methodName+'Right']=function(n){return this.reverse()[methodName](n).reverse();};});arrayEach(['filter','map','takeWhile'],function(methodName,index){var type=index+1,isFilter=type!=LAZY_MAP_FLAG;LazyWrapper.prototype[methodName]=function(iteratee,thisArg){var result=this.clone();result.__iteratees__.push({'iteratee':getCallback(iteratee,thisArg,1),'type':type});result.__filtered__=result.__filtered__||isFilter;return result;};});arrayEach(['first','last'],function(methodName,index){var takeName='take'+(index?'Right':'');LazyWrapper.prototype[methodName]=function(){return this[takeName](1).value()[0];};});arrayEach(['initial','rest'],function(methodName,index){var dropName='drop'+(index?'':'Right');LazyWrapper.prototype[methodName]=function(){return this.__filtered__?new LazyWrapper(this):this[dropName](1);};});arrayEach(['pluck','where'],function(methodName,index){var operationName=index?'filter':'map',createCallback=index?baseMatches:property;LazyWrapper.prototype[methodName]=function(value){return this[operationName](createCallback(value));};});LazyWrapper.prototype.compact=function(){return this.filter(identity);};LazyWrapper.prototype.reject=function(predicate,thisArg){predicate=getCallback(predicate,thisArg,1);return this.filter(function(value){return!predicate(value);});};LazyWrapper.prototype.slice=function(start,end){start=start==null?0:+start||0;var result=this;if(result.__filtered__&&(start>0||end<0)){return new LazyWrapper(result);}if(start<0){result=result.takeRight(-start);}else if(start){result=result.drop(start);}if(end!==undefined){end=+end||0;result=end<0?result.dropRight(-end):result.take(end-start);}return result;};LazyWrapper.prototype.takeRightWhile=function(predicate,thisArg){return this.reverse().takeWhile(predicate,thisArg).reverse();};LazyWrapper.prototype.toArray=function(){return this.take(POSITIVE_INFINITY);};baseForOwn(LazyWrapper.prototype,function(func,methodName){var checkIteratee=/^(?:filter|map|reject)|While$/.test(methodName),retUnwrapped=/^(?:first|last)$/.test(methodName),lodashFunc=lodash[retUnwrapped?'take'+(methodName=='last'?'Right':''):methodName];if(!lodashFunc){return;}lodash.prototype[methodName]=function(){var args=retUnwrapped?[1]:arguments,chainAll=this.__chain__,value=this.__wrapped__,isHybrid=!!this.__actions__.length,isLazy=value instanceof LazyWrapper,iteratee=args[0],useLazy=isLazy||isArray(value);if(useLazy&&checkIteratee&&typeof iteratee=='function'&&iteratee.length!=1){isLazy=useLazy=false;}var interceptor=function(value){return retUnwrapped&&chainAll?lodashFunc(value,1)[0]:lodashFunc.apply(undefined,arrayPush([value],args));};var action={'func':thru,'args':[interceptor],'thisArg':undefined},onlyLazy=isLazy&&!isHybrid;if(retUnwrapped&&!chainAll){if(onlyLazy){value=value.clone();value.__actions__.push(action);return func.call(value);}return lodashFunc.call(undefined,this.value())[0];}if(!retUnwrapped&&useLazy){value=onlyLazy?value:new LazyWrapper(this);var result=func.apply(value,args);result.__actions__.push(action);return new LodashWrapper(result,chainAll);}return this.thru(interceptor);};});arrayEach(['join','pop','push','replace','shift','sort','splice','split','unshift'],function(methodName){var func=(/^(?:replace|split)$/.test(methodName)?stringProto:arrayProto)[methodName],chainName=/^(?:push|sort|unshift)$/.test(methodName)?'tap':'thru',retUnwrapped=/^(?:join|pop|replace|shift)$/.test(methodName);lodash.prototype[methodName]=function(){var args=arguments;if(retUnwrapped&&!this.__chain__){return func.apply(this.value(),args);}return this[chainName](function(value){return func.apply(value,args);});};});baseForOwn(LazyWrapper.prototype,function(func,methodName){var lodashFunc=lodash[methodName];if(lodashFunc){var key=lodashFunc.name,names=realNames[key]||(realNames[key]=[]);names.push({'name':methodName,'func':lodashFunc});}});realNames[createHybridWrapper(undefined,BIND_KEY_FLAG).name]=[{'name':'wrapper','func':undefined}];LazyWrapper.prototype.clone=lazyClone;LazyWrapper.prototype.reverse=lazyReverse;LazyWrapper.prototype.value=lazyValue;lodash.prototype.chain=wrapperChain;lodash.prototype.commit=wrapperCommit;lodash.prototype.concat=wrapperConcat;lodash.prototype.plant=wrapperPlant;lodash.prototype.reverse=wrapperReverse;lodash.prototype.toString=wrapperToString;lodash.prototype.run=lodash.prototype.toJSON=lodash.prototype.valueOf=lodash.prototype.value=wrapperValue;lodash.prototype.collect=lodash.prototype.map;lodash.prototype.head=lodash.prototype.first;lodash.prototype.select=lodash.prototype.filter;lodash.prototype.tail=lodash.prototype.rest;return lodash;}var _=runInContext();if(typeof define=='function'&&typeof define.amd=='object'&&define.amd){root._=_;define(function(){return _;});}else if(freeExports&&freeModule){if(moduleExports){(freeModule.exports=_)._=_;}else{freeExports._=_;}}else{root._=_;}}).call(this);},6067:function(module,__unusedexports,__webpack_require__){"use strict";const os=__webpack_require__(4316);const IPFSRepo=__webpack_require__(3279);const path=__webpack_require__(5897);module.exports=dir=>{const repoPath=dir||path.join(os.homedir(),'.jsipfs');return new IPFSRepo(repoPath);};},6071:function(module,__unusedexports,__webpack_require__){const decompile=__webpack_require__(5099).decompile;const multisig=__webpack_require__(7722);const nullData=__webpack_require__(5275);const pubKey=__webpack_require__(9517);const pubKeyHash=__webpack_require__(8982);const scriptHash=__webpack_require__(9198);const witnessPubKeyHash=__webpack_require__(9666);const witnessScriptHash=__webpack_require__(1271);const witnessCommitment=__webpack_require__(6643);const types={P2MS:'multisig',NONSTANDARD:'nonstandard',NULLDATA:'nulldata',P2PK:'pubkey',P2PKH:'pubkeyhash',P2SH:'scripthash',P2WPKH:'witnesspubkeyhash',P2WSH:'witnessscripthash',WITNESS_COMMITMENT:'witnesscommitment'};function classifyOutput(script){if(witnessPubKeyHash.output.check(script))return types.P2WPKH;if(witnessScriptHash.output.check(script))return types.P2WSH;if(pubKeyHash.output.check(script))return types.P2PKH;if(scriptHash.output.check(script))return types.P2SH;const chunks=decompile(script);if(!chunks)throw new TypeError('Invalid script');if(multisig.output.check(chunks))return types.P2MS;if(pubKey.output.check(chunks))return types.P2PK;if(witnessCommitment.output.check(chunks))return types.WITNESS_COMMITMENT;if(nullData.output.check(chunks))return types.NULLDATA;return types.NONSTANDARD;}function classifyInput(script,allowIncomplete){const chunks=decompile(script);if(!chunks)throw new TypeError('Invalid script');if(pubKeyHash.input.check(chunks))return types.P2PKH;if(scriptHash.input.check(chunks,allowIncomplete))return types.P2SH;if(multisig.input.check(chunks,allowIncomplete))return types.P2MS;if(pubKey.input.check(chunks))return types.P2PK;return types.NONSTANDARD;}function classifyWitness(script,allowIncomplete){const chunks=decompile(script);if(!chunks)throw new TypeError('Invalid script');if(witnessPubKeyHash.input.check(chunks))return types.P2WPKH;if(witnessScriptHash.input.check(chunks,allowIncomplete))return types.P2WSH;return types.NONSTANDARD;}module.exports={input:classifyInput,output:classifyOutput,witness:classifyWitness,types:types};},6082:function(__unusedmodule,exports,__webpack_require__){"use strict";const crypto=__webpack_require__(2984);const lengths=__webpack_require__(1512);const nextTick=__webpack_require__(7173);exports.create=function(hash,secret,callback){const res={digest(data,cb){const hmac=crypto.createHmac(hash.toLowerCase(),secret);hmac.update(data);nextTick(()=>{cb(null,hmac.digest());});},length:lengths[hash]};callback(null,res);};},6091:function(module,__unusedexports,__webpack_require__){"use strict";module.exports={Record:__webpack_require__(9592),validator:__webpack_require__(1574),selection:__webpack_require__(5961)};},6102:function(module,__unusedexports,__webpack_require__){"use strict";const assert=__webpack_require__(3930);const PeerInfo=__webpack_require__(9265);const PeerId=__webpack_require__(1832);const protons=__webpack_require__(817);const Record=__webpack_require__(6091).Record;const pbm=protons(__webpack_require__(327));const MESSAGE_TYPE=pbm.Message.MessageType;const CONNECTION_TYPE=pbm.Message.ConnectionType;class Message{constructor(type,key,level){if(key){assert(Buffer.isBuffer(key));}this.type=type;this.key=key;this._clusterLevelRaw=level;this.closerPeers=[];this.providerPeers=[];this.record=null;}get clusterLevel(){const level=this._clusterLevelRaw-1;if(level<0){return 0;}return level;}set clusterLevel(level){this._clusterLevelRaw=level;}serialize(){const obj={key:this.key,type:this.type,clusterLevelRaw:this._clusterLevelRaw,closerPeers:this.closerPeers.map(toPbPeer),providerPeers:this.providerPeers.map(toPbPeer)};if(this.record){if(Buffer.isBuffer(this.record)){obj.record=this.record;}else{obj.record=this.record.serialize();}}return pbm.Message.encode(obj);}static deserialize(raw){const dec=pbm.Message.decode(raw);const msg=new Message(dec.type,dec.key,dec.clusterLevelRaw);msg.closerPeers=dec.closerPeers.map(fromPbPeer);msg.providerPeers=dec.providerPeers.map(fromPbPeer);if(dec.record){msg.record=Record.deserialize(dec.record);}return msg;}}Message.TYPES=MESSAGE_TYPE;Message.CONNECTION_TYPES=CONNECTION_TYPE;function toPbPeer(peer){const res={id:peer.id.id,addrs:peer.multiaddrs.toArray().map(m=>m.buffer)};if(peer.isConnected()){res.connection=CONNECTION_TYPE.CONNECTED;}else{res.connection=CONNECTION_TYPE.NOT_CONNECTED;}return res;}function fromPbPeer(peer){const info=new PeerInfo(new PeerId(peer.id));peer.addrs.forEach(a=>info.multiaddrs.add(a));if(peer.connection===CONNECTION_TYPE.CONNECTED){info.connect(peer.addrs[0]);}return info;}module.exports=Message;},6113:function(module,__unusedexports,__webpack_require__){"use strict";module.exports=PassThrough;var Transform=__webpack_require__(823);var util=__webpack_require__(5548);util.inherits=__webpack_require__(92);util.inherits(PassThrough,Transform);function PassThrough(options){if(!(this instanceof PassThrough))return new PassThrough(options);Transform.call(this,options);}PassThrough.prototype._transform=function(chunk,encoding,cb){cb(null,chunk);};},6114:function(module,exports){"use strict";const exp=Math.exp;exports=module.exports=function MovingAverage(timespan){if(typeof timespan!=='number'){throw new Error('must provide a timespan to the moving average constructor');}if(timespan<=0){throw new Error('must provide a timespan > 0 to the moving average constructor');}let ma;let v=0;let d=0;let f=0;let previousTime;let ret={};function alpha(t,pt){return 1-exp(-(t-pt)/timespan);}ret.push=function push(time,value){if(previousTime){const a=alpha(time,previousTime);const diff=value-ma;const incr=a*diff;ma=a*value+(1-a)*ma;v=(1-a)*(v+diff*incr);d=Math.sqrt(v);f=ma+a*diff;}else{ma=value;}previousTime=time;};ret.movingAverage=function movingAverage(){return ma;};ret.variance=function variance(){return v;};ret.deviation=function deviation(){return d;};ret.forecast=function forecast(){return f;};return ret;};},6119:function(module,__unusedexports,__webpack_require__){var getNative=__webpack_require__(4708);var nativeCreate=getNative(Object,'create');module.exports=nativeCreate;},6122:function(module,__unusedexports,__webpack_require__){"use strict";var BN=__webpack_require__(2420);var $=__webpack_require__(5107);var _=__webpack_require__(6064);var reversebuf=function(buf){var buf2=new Buffer(buf.length);for(var i=0;i<buf.length;i++){buf2[i]=buf[buf.length-1-i];}return buf2;};BN.Zero=new BN(0);BN.One=new BN(1);BN.Minus1=new BN(-1);BN.fromNumber=function(n){$.checkArgument(_.isNumber(n));return new BN(n);};BN.fromString=function(str,base){$.checkArgument(_.isString(str));return new BN(str,base);};BN.fromBuffer=function(buf,opts){if(typeof opts!=='undefined'&&opts.endian==='little'){buf=reversebuf(buf);}var hex=buf.toString('hex');var bn=new BN(hex,16);return bn;};BN.fromSM=function(buf,opts){var ret;if(buf.length===0){return BN.fromBuffer(new Buffer([0]));}var endian='big';if(opts){endian=opts.endian;}if(endian==='little'){buf=reversebuf(buf);}if(buf[0]&0x80){buf[0]=buf[0]&0x7f;ret=BN.fromBuffer(buf);ret.neg().copy(ret);}else{ret=BN.fromBuffer(buf);}return ret;};BN.prototype.toNumber=function(){return parseInt(this.toString(10),10);};BN.prototype.toBuffer=function(opts){var buf,hex;if(opts&&opts.size){hex=this.toString(16,2);var natlen=hex.length/2;buf=new Buffer(hex,'hex');if(natlen===opts.size){buf=buf;}else if(natlen>opts.size){buf=BN.trim(buf,natlen);}else if(natlen<opts.size){buf=BN.pad(buf,natlen,opts.size);}}else{hex=this.toString(16,2);buf=new Buffer(hex,'hex');}if(typeof opts!=='undefined'&&opts.endian==='little'){buf=reversebuf(buf);}return buf;};BN.prototype.toSMBigEndian=function(){var buf;if(this.cmp(BN.Zero)===-1){buf=this.neg().toBuffer();if(buf[0]&0x80){buf=Buffer.concat([new Buffer([0x80]),buf]);}else{buf[0]=buf[0]|0x80;}}else{buf=this.toBuffer();if(buf[0]&0x80){buf=Buffer.concat([new Buffer([0x00]),buf]);}}if(buf.length===1&buf[0]===0){buf=new Buffer([]);}return buf;};BN.prototype.toSM=function(opts){var endian=opts?opts.endian:'big';var buf=this.toSMBigEndian();if(endian==='little'){buf=reversebuf(buf);}return buf;};BN.fromScriptNumBuffer=function(buf,fRequireMinimal,size){var nMaxNumSize=size||4;$.checkArgument(buf.length<=nMaxNumSize,new Error('script number overflow'));if(fRequireMinimal&&buf.length>0){if((buf[buf.length-1]&0x7f)===0){if(buf.length<=1||(buf[buf.length-2]&0x80)===0){throw new Error('non-minimally encoded script number');}}}return BN.fromSM(buf,{endian:'little'});};BN.prototype.toScriptNumBuffer=function(){return this.toSM({endian:'little'});};BN.prototype.gt=function(b){return this.cmp(b)>0;};BN.prototype.gte=function(b){return this.cmp(b)>=0;};BN.prototype.lt=function(b){return this.cmp(b)<0;};BN.trim=function(buf,natlen){return buf.slice(natlen-buf.length,buf.length);};BN.pad=function(buf,natlen,size){var rbuf=new Buffer(size);for(var i=0;i<buf.length;i++){rbuf[rbuf.length-1-i]=buf[buf.length-1-i];}for(i=0;i<size-natlen;i++){rbuf[i]=0;}return rbuf;};module.exports=BN;},6127:function(module,__unusedexports,__webpack_require__){var{relative}=__webpack_require__(4969);var map={http:'ws',https:'wss'};var def='ws';module.exports=function(url,location){return relative(url,location,map,def);};},6164:function(module){module.exports=function(fn){var active=false,called=0;return function(){called=true;if(!active){active=true;while(called){called=false;fn();}active=false;}};};},6172:function(module){module.exports=function(socket,callback){var remove=socket&&(socket.removeEventListener||socket.removeListener);function cleanup(){if(typeof remove=='function'){remove.call(socket,'open',handleOpen);remove.call(socket,'error',handleErr);}}function handleOpen(evt){cleanup();callback();}function handleErr(evt){cleanup();callback(evt);}if(socket.readyState>=2){return callback(true);}if(socket.readyState===1){return callback();}socket.addEventListener('open',handleOpen);socket.addEventListener('error',handleErr);};},6193:function(__unusedmodule,exports,__webpack_require__){"use strict";var sprintf=__webpack_require__(7586).sprintf;var v6=__webpack_require__(2638);function groupPossibilities(possibilities){return sprintf('(%s)',possibilities.join('|'));}function padGroup(group){if(group.length<4){return sprintf('0{0,%d}%s',4-group.length,group);}return group;}function simpleRegularExpression(groups){var zeroIndexes=[];groups.forEach(function(group,i){var groupInteger=parseInt(group,16);if(groupInteger===0){zeroIndexes.push(i);}});var possibilities=zeroIndexes.map(function(zeroIndex){return groups.map(function(group,i){if(i===zeroIndex){var elision=i===0||i===v6.GROUPS-1?':':'';return groupPossibilities([padGroup(group),elision]);}return padGroup(group);}).join(':');});possibilities.push(groups.map(padGroup).join(':'));return groupPossibilities(possibilities);}function possibleElisions(elidedGroups,moreLeft,moreRight){var left=moreLeft?'':':';var right=moreRight?'':':';var possibilities=[];if(!moreLeft&&!moreRight){possibilities.push('::');}if(moreLeft&&moreRight){possibilities.push('');}if(moreRight&&!moreLeft||!moreRight&&moreLeft){possibilities.push(':');}possibilities.push(sprintf('%s(:0{1,4}){1,%d}',left,elidedGroups-1));possibilities.push(sprintf('(0{1,4}:){1,%d}%s',elidedGroups-1,right));possibilities.push(sprintf('(0{1,4}:){%d}0{1,4}',elidedGroups-1));for(var groups=1;groups<elidedGroups-1;groups++){for(var position=1;position<elidedGroups-groups;position++){possibilities.push(sprintf('(0{1,4}:){%d}:(0{1,4}:){%d}0{1,4}',position,elidedGroups-position-groups-1));}}return groupPossibilities(possibilities);}exports.regularExpressionString=function(optionalSubString){if(optionalSubString===undefined){optionalSubString=false;}var output=[];var address6=new this.constructor(this.correctForm());if(address6.elidedGroups===0){output.push(simpleRegularExpression(address6.parsedAddress));}else if(address6.elidedGroups===v6.GROUPS){output.push(possibleElisions(v6.GROUPS));}else{var halves=address6.address.split('::');if(halves[0].length){output.push(simpleRegularExpression(halves[0].split(':')));}output.push(possibleElisions(address6.elidedGroups,halves[0].length!==0,halves[1].length!==0));if(halves[1].length){output.push(simpleRegularExpression(halves[1].split(':')));}output=[output.join(':')];}if(!optionalSubString){output=[].concat('(?=^|\\b|[^\\w\\:])(',output,')(?=[^\\w\\:]|\\b|$)');}return output.join('');};exports.regularExpression=function(optionalSubstring){return new RegExp(this.regularExpressionString(optionalSubstring),'i');};},6195:function(module,__unusedexports,__webpack_require__){"use strict";const Connection=__webpack_require__(378).Connection;const pull=__webpack_require__(418);const empty=__webpack_require__(7086);const timeout=__webpack_require__(171);const queue=__webpack_require__(5978);const debug=__webpack_require__(746);const once=__webpack_require__(7957);const log=debug('libp2p:switch:dialer:queue');log.error=debug('libp2p:switch:dialer:queue:error');class DialQueue{constructor(limit,dialTimeout){this.dialTimeout=dialTimeout;this.queue=queue((task,cb)=>{this._doWork(task.transport,task.addr,task.token,cb);},limit);}_doWork(transport,addr,token,callback){callback=once(callback);log(`${transport.constructor.name}:work:start`);this._dialWithTimeout(transport,addr,(err,conn)=>{if(err){log.error(`${transport.constructor.name}:work`,err);return callback(null,{error:err});}if(token.cancel){log(`${transport.constructor.name}:work:cancel`);pull(empty(),conn);if(typeof conn.close==='function'){return conn.close(_=>callback(null,{cancel:true}));}return callback(null,{cancel:true});}token.cancel=true;log(`${transport.constructor.name}:work:success`);const proxyConn=new Connection();proxyConn.setInnerConn(conn);callback(null,{multiaddr:addr,conn:conn});});}_dialWithTimeout(transport,addr,callback){timeout(cb=>{const conn=transport.dial(addr,err=>{if(err){return cb(err);}cb(null,conn);});},this.dialTimeout)(callback);}push(transport,addr,token,callback){this.queue.push({transport,addr,token},callback);}}module.exports=DialQueue;},6198:function(module){"use strict";module.exports={BINARY_TYPES:['nodebuffer','arraybuffer','fragments'],GUID:'258EAFA5-E914-47DA-95CA-C5AB0DC85B11',kStatusCode:Symbol('status-code'),kWebSocket:Symbol('websocket'),EMPTY_BUFFER:Buffer.alloc(0),NOOP:()=>{}};},6215:function(module,__unusedexports,__webpack_require__){const Buffer=__webpack_require__(7572).Buffer;module.exports=function base(ALPHABET){if(ALPHABET.length>=255)throw new TypeError('Alphabet too long');const BASE_MAP=new Uint8Array(256);BASE_MAP.fill(255);for(let i=0;i<ALPHABET.length;i++){const x=ALPHABET.charAt(i);const xc=x.charCodeAt(0);if(BASE_MAP[xc]!==255)throw new TypeError(x+' is ambiguous');BASE_MAP[xc]=i;}const BASE=ALPHABET.length;const LEADER=ALPHABET.charAt(0);const FACTOR=Math.log(BASE)/Math.log(256);const iFACTOR=Math.log(256)/Math.log(BASE);function encode(source){if(!Buffer.isBuffer(source))throw new TypeError('Expected Buffer');if(source.length===0)return'';let zeroes=0;let length=0;let pbegin=0;const pend=source.length;while(pbegin!==pend&&source[pbegin]===0){pbegin++;zeroes++;}const size=(pend-pbegin)*iFACTOR+1>>>0;const b58=new Uint8Array(size);while(pbegin!==pend){let carry=source[pbegin];let i=0;for(let it=size-1;(carry!==0||i<length)&&it!==-1;it--,i++){carry+=256*b58[it]>>>0;b58[it]=carry%BASE>>>0;carry=carry/BASE>>>0;}if(carry!==0)throw new Error('Non-zero carry');length=i;pbegin++;}let it=size-length;while(it!==size&&b58[it]===0){it++;}let str=LEADER.repeat(zeroes);for(;it<size;++it)str+=ALPHABET.charAt(b58[it]);return str;}function decodeUnsafe(source){if(typeof source!=='string')throw new TypeError('Expected String');if(source.length===0)return Buffer.alloc(0);let psz=0;if(source[psz]===' ')return;let zeroes=0;let length=0;while(source[psz]===LEADER){zeroes++;psz++;}const size=(source.length-psz)*FACTOR+1>>>0;const b256=new Uint8Array(size);while(source[psz]){let carry=BASE_MAP[source.charCodeAt(psz)];if(carry===255)return;let i=0;for(let it=size-1;(carry!==0||i<length)&&it!==-1;it--,i++){carry+=BASE*b256[it]>>>0;b256[it]=carry%256>>>0;carry=carry/256>>>0;}if(carry!==0)throw new Error('Non-zero carry');length=i;psz++;}if(source[psz]===' ')return;let it=size-length;while(it!==size&&b256[it]===0){it++;}const vch=Buffer.allocUnsafe(zeroes+(size-it));vch.fill(0x00,0,zeroes);let j=zeroes;while(it!==size){vch[j++]=b256[it++];}return vch;}function decode(string){const buffer=decodeUnsafe(string);if(buffer)return buffer;throw new Error('Non-base'+BASE+' character');}return{encode:encode,decodeUnsafe:decodeUnsafe,decode:decode};};},6221:function(module,__unusedexports,__webpack_require__){"use strict";const multihashing=__webpack_require__(9424);const protobuf=__webpack_require__(817);const bs58=__webpack_require__(4967);const crypto=__webpack_require__(9923);const pbm=protobuf(__webpack_require__(8278));class Ed25519PublicKey{constructor(key){this._key=ensureKey(key,crypto.publicKeyLength);}verify(data,sig,callback){ensure(callback);crypto.hashAndVerify(this._key,sig,data,callback);}marshal(){return Buffer.from(this._key);}get bytes(){return pbm.PublicKey.encode({Type:pbm.KeyType.Ed25519,Data:this.marshal()});}equals(key){return this.bytes.equals(key.bytes);}hash(callback){ensure(callback);multihashing(this.bytes,'sha2-256',callback);}}class Ed25519PrivateKey{constructor(key,publicKey){this._key=ensureKey(key,crypto.privateKeyLength);this._publicKey=ensureKey(publicKey,crypto.publicKeyLength);}sign(message,callback){ensure(callback);crypto.hashAndSign(this._key,message,callback);}get public(){if(!this._publicKey){throw new Error('public key not provided');}return new Ed25519PublicKey(this._publicKey);}marshal(){return Buffer.concat([Buffer.from(this._key),Buffer.from(this._publicKey)]);}get bytes(){return pbm.PrivateKey.encode({Type:pbm.KeyType.Ed25519,Data:this.marshal()});}equals(key){return this.bytes.equals(key.bytes);}hash(callback){ensure(callback);multihashing(this.bytes,'sha2-256',callback);}id(callback){this.public.hash((err,hash)=>{if(err){return callback(err);}callback(null,bs58.encode(hash));});}}function unmarshalEd25519PrivateKey(bytes,callback){try{bytes=ensureKey(bytes,crypto.privateKeyLength+crypto.publicKeyLength);}catch(err){return callback(err);}const privateKeyBytes=bytes.slice(0,crypto.privateKeyLength);const publicKeyBytes=bytes.slice(crypto.privateKeyLength,bytes.length);callback(null,new Ed25519PrivateKey(privateKeyBytes,publicKeyBytes));}function unmarshalEd25519PublicKey(bytes){bytes=ensureKey(bytes,crypto.publicKeyLength);return new Ed25519PublicKey(bytes);}function generateKeyPair(_bits,cb){if(cb===undefined&&typeof _bits==='function'){cb=_bits;}crypto.generateKey((err,keys)=>{if(err){return cb(err);}let privkey;try{privkey=new Ed25519PrivateKey(keys.secretKey,keys.publicKey);}catch(err){cb(err);return;}cb(null,privkey);});}function generateKeyPairFromSeed(seed,_bits,cb){if(cb===undefined&&typeof _bits==='function'){cb=_bits;}crypto.generateKeyFromSeed(seed,(err,keys)=>{if(err){return cb(err);}let privkey;try{privkey=new Ed25519PrivateKey(keys.secretKey,keys.publicKey);}catch(err){cb(err);return;}cb(null,privkey);});}function ensure(cb){if(typeof cb!=='function'){throw new Error('callback is required');}}function ensureKey(key,length){if(Buffer.isBuffer(key)){key=new Uint8Array(key);}if(!(key instanceof Uint8Array)||key.length!==length){throw new Error('Key must be a Uint8Array or Buffer of length '+length);}return key;}module.exports={Ed25519PublicKey,Ed25519PrivateKey,unmarshalEd25519PrivateKey,unmarshalEd25519PublicKey,generateKeyPair,generateKeyPairFromSeed};},6223:function(module,__unusedexports,__webpack_require__){"use strict";var curve=__webpack_require__(7573);var elliptic=__webpack_require__(5194);var bn=__webpack_require__(2420);var inherits=__webpack_require__(2915);var Base=curve.base;var assert=elliptic.utils.assert;function EdwardsCurve(conf){this.twisted=(conf.a|0)!==1;this.mOneA=this.twisted&&(conf.a|0)===-1;this.extended=this.mOneA;Base.call(this,'edwards',conf);this.a=new bn(conf.a,16).mod(this.red.m).toRed(this.red);this.c=new bn(conf.c,16).toRed(this.red);this.c2=this.c.redSqr();this.d=new bn(conf.d,16).toRed(this.red);this.dd=this.d.redAdd(this.d);assert(!this.twisted||this.c.fromRed().cmpn(1)===0);this.oneC=(conf.c|0)===1;}inherits(EdwardsCurve,Base);module.exports=EdwardsCurve;EdwardsCurve.prototype._mulA=function _mulA(num){if(this.mOneA)return num.redNeg();else return this.a.redMul(num);};EdwardsCurve.prototype._mulC=function _mulC(num){if(this.oneC)return num;else return this.c.redMul(num);};EdwardsCurve.prototype.jpoint=function jpoint(x,y,z,t){return this.point(x,y,z,t);};EdwardsCurve.prototype.pointFromX=function pointFromX(odd,x){x=new bn(x,16);if(!x.red)x=x.toRed(this.red);var x2=x.redSqr();var rhs=this.c2.redSub(this.a.redMul(x2));var lhs=this.one.redSub(this.c2.redMul(this.d).redMul(x2));var y=rhs.redMul(lhs.redInvm()).redSqrt();var isOdd=y.fromRed().isOdd();if(odd&&!isOdd||!odd&&isOdd)y=y.redNeg();return this.point(x,y,curve.one);};EdwardsCurve.prototype.validate=function validate(point){if(point.isInfinity())return true;point.normalize();var x2=point.x.redSqr();var y2=point.y.redSqr();var lhs=x2.redMul(this.a).redAdd(y2);var rhs=this.c2.redMul(this.one.redAdd(this.d.redMul(x2).redMul(y2)));return lhs.cmp(rhs)===0;};function Point(curve,x,y,z,t){Base.BasePoint.call(this,curve,'projective');if(x===null&&y===null&&z===null){this.x=this.curve.zero;this.y=this.curve.one;this.z=this.curve.one;this.t=this.curve.zero;this.zOne=true;}else{this.x=new bn(x,16);this.y=new bn(y,16);this.z=z?new bn(z,16):this.curve.one;this.t=t&&new bn(t,16);if(!this.x.red)this.x=this.x.toRed(this.curve.red);if(!this.y.red)this.y=this.y.toRed(this.curve.red);if(!this.z.red)this.z=this.z.toRed(this.curve.red);if(this.t&&!this.t.red)this.t=this.t.toRed(this.curve.red);this.zOne=this.z===this.curve.one;if(this.curve.extended&&!this.t){this.t=this.x.redMul(this.y);if(!this.zOne)this.t=this.t.redMul(this.z.redInvm());}}}inherits(Point,Base.BasePoint);EdwardsCurve.prototype.pointFromJSON=function pointFromJSON(obj){return Point.fromJSON(this,obj);};EdwardsCurve.prototype.point=function point(x,y,z,t){return new Point(this,x,y,z,t);};Point.fromJSON=function fromJSON(curve,obj){return new Point(curve,obj[0],obj[1],obj[2]);};Point.prototype.inspect=function inspect(){if(this.isInfinity())return'<EC Point Infinity>';return'<EC Point x: '+this.x.fromRed().toString(16,2)+' y: '+this.y.fromRed().toString(16,2)+' z: '+this.z.fromRed().toString(16,2)+'>';};Point.prototype.isInfinity=function isInfinity(){return this.x.cmpn(0)===0&&this.y.cmp(this.z)===0;};Point.prototype._extDbl=function _extDbl(){var a=this.x.redSqr();var b=this.y.redSqr();var c=this.z.redSqr();c=c.redIAdd(c);var d=this.curve._mulA(a);var e=this.x.redAdd(this.y).redSqr().redISub(a).redISub(b);var g=d.redAdd(b);var f=g.redSub(c);var h=d.redSub(b);var nx=e.redMul(f);var ny=g.redMul(h);var nt=e.redMul(h);var nz=f.redMul(g);return this.curve.point(nx,ny,nz,nt);};Point.prototype._projDbl=function _projDbl(){var b=this.x.redAdd(this.y).redSqr();var c=this.x.redSqr();var d=this.y.redSqr();var nx;var ny;var nz;if(this.curve.twisted){var e=this.curve._mulA(c);var f=e.redAdd(d);if(this.zOne){nx=b.redSub(c).redSub(d).redMul(f.redSub(this.curve.two));ny=f.redMul(e.redSub(d));nz=f.redSqr().redSub(f).redSub(f);}else{var h=this.z.redSqr();var j=f.redSub(h).redISub(h);nx=b.redSub(c).redISub(d).redMul(j);ny=f.redMul(e.redSub(d));nz=f.redMul(j);}}else{var e=c.redAdd(d);var h=this.curve._mulC(this.c.redMul(this.z)).redSqr();var j=e.redSub(h).redSub(h);nx=this.curve._mulC(b.redISub(e)).redMul(j);ny=this.curve._mulC(e).redMul(c.redISub(d));nz=e.redMul(j);}return this.curve.point(nx,ny,nz);};Point.prototype.dbl=function dbl(){if(this.isInfinity())return this;if(this.curve.extended)return this._extDbl();else return this._projDbl();};Point.prototype._extAdd=function _extAdd(p){var a=this.y.redSub(this.x).redMul(p.y.redSub(p.x));var b=this.y.redAdd(this.x).redMul(p.y.redAdd(p.x));var c=this.t.redMul(this.curve.dd).redMul(p.t);var d=this.z.redMul(p.z.redAdd(p.z));var e=b.redSub(a);var f=d.redSub(c);var g=d.redAdd(c);var h=b.redAdd(a);var nx=e.redMul(f);var ny=g.redMul(h);var nt=e.redMul(h);var nz=f.redMul(g);return this.curve.point(nx,ny,nz,nt);};Point.prototype._projAdd=function _projAdd(p){var a=this.z.redMul(p.z);var b=a.redSqr();var c=this.x.redMul(p.x);var d=this.y.redMul(p.y);var e=this.curve.d.redMul(c).redMul(d);var f=b.redSub(e);var g=b.redAdd(e);var tmp=this.x.redAdd(this.y).redMul(p.x.redAdd(p.y)).redISub(c).redISub(d);var nx=a.redMul(f).redMul(tmp);var ny;var nz;if(this.curve.twisted){ny=a.redMul(g).redMul(d.redSub(this.curve._mulA(c)));nz=f.redMul(g);}else{ny=a.redMul(g).redMul(d.redSub(c));nz=this.curve._mulC(f).redMul(g);}return this.curve.point(nx,ny,nz);};Point.prototype.add=function add(p){if(this.isInfinity())return p;if(p.isInfinity())return this;if(this.curve.extended)return this._extAdd(p);else return this._projAdd(p);};Point.prototype.mul=function mul(k){if(this.precomputed&&this.precomputed.doubles)return this.curve._fixedNafMul(this,k);else return this.curve._wnafMul(this,k);};Point.prototype.mulAdd=function mulAdd(k1,p,k2){return this.curve._wnafMulAdd(1,[this,p],[k1,k2],2);};Point.prototype.normalize=function normalize(){if(this.zOne)return this;var zi=this.z.redInvm();this.x=this.x.redMul(zi);this.y=this.y.redMul(zi);if(this.t)this.t=this.t.redMul(zi);this.z=this.curve.one;this.zOne=true;return this;};Point.prototype.neg=function neg(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg());};Point.prototype.getX=function getX(){this.normalize();return this.x.fromRed();};Point.prototype.getY=function getY(){this.normalize();return this.y.fromRed();};Point.prototype.toP=Point.prototype.normalize;Point.prototype.mixedAdd=Point.prototype.add;},6234:function(module){module.exports=Object.keys||function keys(obj){var arr=[];var has=Object.prototype.hasOwnProperty;for(var i in obj){if(has.call(obj,i)){arr.push(i);}}return arr;};},6238:function(module,__unusedexports,__webpack_require__){"use strict";const toPull=__webpack_require__(4138);const isStream=__webpack_require__(36);const fileReaderStream=__webpack_require__(4627);const isPullStream=__webpack_require__(5832);const fs=__webpack_require__(662);const values=__webpack_require__(5130);const log=__webpack_require__(746)('ipfs:mfs:utils:to-pull-source');const waterfall=__webpack_require__(4265);const toPullSource=(content,options,callback)=>{if(!content){return callback(new Error('paths must start with a leading /'));}if(Buffer.isBuffer(content)){log('Content was a buffer');if(!options.length&&options.length!==0){options.length=options.length||content.length;}return callback(null,values([content]));}if(typeof content==='string'||content instanceof String){log('Content was a path');return waterfall([done=>options.length?done(null,{size:options.length}):fs.stat(content,done),(stats,done)=>{options.length=stats.size;done(null,toPull.source(fs.createReadStream(content)));}],callback);}if(global.Blob&&content instanceof global.Blob){log('Content was an HTML5 Blob');options.length=options.length||content.size;content=fileReaderStream(content);}if(isStream(content)){log('Content was a Node stream');return callback(null,toPull.source(content));}if(isPullStream.isSource(content)){log('Content was a pull-stream');return callback(null,content);}callback(new Error(`Don't know how to convert ${content} into a pull stream source`));};module.exports=toPullSource;},6244:function(module,__unusedexports,__webpack_require__){var packet=__webpack_require__(5530);var dgram=__webpack_require__(633);var thunky=__webpack_require__(8797);var events=__webpack_require__(4859);var os=__webpack_require__(4316);var noop=function(){};module.exports=function(opts){if(!opts)opts={};var that=new events.EventEmitter();var port=typeof opts.port==='number'?opts.port:5353;var type=opts.type||'udp4';var ip=opts.ip||opts.host||(type==='udp4'?'224.0.0.251':null);var me={address:ip,port:port};var memberships={};var destroyed=false;var interval=null;if(type==='udp6'&&(!ip||!opts.interface)){throw new Error('For IPv6 multicast you must specify `ip` and `interface`');}var socket=opts.socket||dgram.createSocket({type:type,reuseAddr:opts.reuseAddr!==false,toString:function(){return type;}});socket.on('error',function(err){if(err.code==='EACCES'||err.code==='EADDRINUSE')that.emit('error',err);else that.emit('warning',err);});socket.on('message',function(message,rinfo){try{message=packet.decode(message);}catch(err){that.emit('warning',err);return;}that.emit('packet',message,rinfo);if(message.type==='query')that.emit('query',message,rinfo);if(message.type==='response')that.emit('response',message,rinfo);});socket.on('listening',function(){if(!port)port=me.port=socket.address().port;if(opts.multicast!==false){that.update();interval=setInterval(that.update,5000);socket.setMulticastTTL(opts.ttl||255);socket.setMulticastLoopback(opts.loopback!==false);}});var bind=thunky(function(cb){if(!port||opts.bind===false)return cb(null);socket.once('error',cb);socket.bind(port,opts.interface,function(){socket.removeListener('error',cb);cb(null);});});bind(function(err){if(err)return that.emit('error',err);that.emit('ready');});that.send=function(value,rinfo,cb){if(typeof rinfo==='function')return that.send(value,null,rinfo);if(!cb)cb=noop;if(!rinfo)rinfo=me;else if(!rinfo.host&&!rinfo.address)rinfo.address=me.address;bind(onbind);function onbind(err){if(destroyed)return cb();if(err)return cb(err);var message=packet.encode(value);socket.send(message,0,message.length,rinfo.port,rinfo.address||rinfo.host,cb);}};that.response=that.respond=function(res,rinfo,cb){if(Array.isArray(res))res={answers:res};res.type='response';res.flags=(res.flags||0)|packet.AUTHORITATIVE_ANSWER;that.send(res,rinfo,cb);};that.query=function(q,type,rinfo,cb){if(typeof type==='function')return that.query(q,null,null,type);if(typeof type==='object'&&type&&type.port)return that.query(q,null,type,rinfo);if(typeof rinfo==='function')return that.query(q,type,null,rinfo);if(!cb)cb=noop;if(typeof q==='string')q=[{name:q,type:type||'ANY'}];if(Array.isArray(q))q={type:'query',questions:q};q.type='query';that.send(q,rinfo,cb);};that.destroy=function(cb){if(!cb)cb=noop;if(destroyed)return process.nextTick(cb);destroyed=true;clearInterval(interval);socket.once('close',cb);socket.close();};that.update=function(){var ifaces=opts.interface?[].concat(opts.interface):allInterfaces();var updated=false;for(var i=0;i<ifaces.length;i++){var addr=ifaces[i];if(memberships[addr])continue;memberships[addr]=true;updated=true;try{socket.addMembership(ip,addr);}catch(err){that.emit('warning',err);}}if(!updated||!socket.setMulticastInterface)return;socket.setMulticastInterface(opts.interface||defaultInterface());};return that;};function defaultInterface(){var networks=os.networkInterfaces();var names=Object.keys(networks);for(var i=0;i<names.length;i++){var net=networks[names[i]];for(var j=0;j<net.length;j++){var iface=net[j];if(iface.family==='IPv4'&&!iface.internal)return'0.0.0.0';}}return'127.0.0.1';}function allInterfaces(){var networks=os.networkInterfaces();var names=Object.keys(networks);var res=[];for(var i=0;i<names.length;i++){var net=networks[names[i]];for(var j=0;j<net.length;j++){var iface=net[j];if(iface.family==='IPv4'){res.push(iface.address);break;}}}return res;}},6246:function(module){var noop=function(){};function abortAll(ary,abort,cb){var n=ary.length;if(!n)return cb(abort);ary.forEach(function(f){if(f)f(abort,next);else next();});function next(){if(--n)return;cb(abort);}if(!n)next();}module.exports=function(streams){return function(abort,cb){;(function next(){if(abort)abortAll(streams,abort,cb);else if(!streams.length)cb(true);else if(!streams[0])streams.shift(),next();else streams[0](null,function(err,data){if(err){streams.shift();if(err===true)next();else abortAll(streams,err,cb);}else cb(null,data);});})();};};},6265:function(module,__unusedexports,__webpack_require__){"use strict";var WebSocket=__webpack_require__(9896);var duplex=__webpack_require__(5145);var wsurl=__webpack_require__(6127);function isFunction(f){return'function'===typeof f;}module.exports=function(addr,opts){if(isFunction(opts))opts={onConnect:opts};var location=typeof window==='undefined'?{}:window.location;var url=wsurl(addr,location);var socket=new WebSocket(url);var stream=duplex(socket,opts);stream.remoteAddress=url;stream.close=function(cb){if(isFunction(cb)){socket.addEventListener('close',cb);}socket.close();};socket.addEventListener('open',function(e){if(opts&&isFunction(opts.onConnect)){opts.onConnect(null,stream);}});return stream;};module.exports.connect=module.exports;},6290:function(module,__unusedexports,__webpack_require__){"use strict";try{let binding=require(__dirname+'//build/Release/secp256k11.node');delete binding.path;for(let key in binding){if(key.indexOf('is')!==0)continue;binding[key].toJSON=function(){return key;};}module.exports=binding;}catch(err){module.exports=__webpack_require__(5424);}},6297:function(module,__unusedexports,__webpack_require__){const bscript=__webpack_require__(5099);const OPS=__webpack_require__(9710);function check(script){const buffer=bscript.compile(script);return buffer.length===22&&buffer[0]===OPS.OP_0&&buffer[1]===0x14;}check.toJSON=function(){return'Witness pubKeyHash output';};module.exports={check};},6299:function(module,__unusedexports,__webpack_require__){"use strict";const each=__webpack_require__(4486);const many=__webpack_require__(9281);const pull=__webpack_require__(2885);const Key=__webpack_require__(759).Key;const Errors=__webpack_require__(759).Errors;const utils=__webpack_require__(759).utils;const asyncFilter=utils.asyncFilter;const asyncSort=utils.asyncSort;const replaceStartWith=utils.replaceStartWith;const Keytransform=__webpack_require__(609);class MountDatastore{constructor(mounts){this.mounts=mounts.slice();}open(callback){each(this.mounts,(m,cb)=>{m.datastore.open(cb);},callback);}_lookup(key){for(let mount of this.mounts){if(mount.prefix.toString()===key.toString()||mount.prefix.isAncestorOf(key)){const s=replaceStartWith(key.toString(),mount.prefix.toString());return{datastore:mount.datastore,mountpoint:mount.prefix,rest:new Key(s)};}}}put(key,value,callback){const match=this._lookup(key);if(match==null){return callback(Errors.dbWriteFailedError(new Error('No datastore mounted for this key')));}match.datastore.put(match.rest,value,callback);}get(key,callback){const match=this._lookup(key);if(match==null){return callback(Errors.notFoundError(new Error('No datastore mounted for this key')));}match.datastore.get(match.rest,callback);}has(key,callback){const match=this._lookup(key);if(match==null){callback(null,false);return;}match.datastore.has(match.rest,callback);}delete(key,callback){const match=this._lookup(key);if(match==null){return callback(Errors.dbDeleteFailedError(new Error('No datastore mounted for this key')));}match.datastore.delete(match.rest,callback);}close(callback){each(this.mounts,(m,cb)=>{m.datastore.close(cb);},callback);}batch(){const batchMounts={};const lookup=(key)=>{const match=this._lookup(key);if(match==null){throw new Error('No datastore mounted for this key');}const m=match.mountpoint.toString();if(batchMounts[m]==null){batchMounts[m]=match.datastore.batch();}return{batch:batchMounts[m],rest:match.rest};};return{put:(key,value)=>{const match=lookup(key);match.batch.put(match.rest,value);},delete:(key)=>{const match=lookup(key);match.batch.delete(match.rest);},commit:(callback)=>{each(Object.keys(batchMounts),(p,cb)=>{batchMounts[p].commit(cb);},callback);}};}query(q){const qs=this.mounts.map(m=>{const ks=new Keytransform(m.datastore,{convert:(key)=>{throw new Error('should never be called');},invert:(key)=>{return m.prefix.child(key);}});let prefix;if(q.prefix!=null){prefix=replaceStartWith(q.prefix,m.prefix.toString());}return ks.query({prefix:prefix,filters:q.filters,keysOnly:q.keysOnly});});let tasks=[many(qs)];if(q.filters!=null){tasks=tasks.concat(q.filters.map(f=>asyncFilter(f)));}if(q.orders!=null){tasks=tasks.concat(q.orders.map(o=>asyncSort(o)));}if(q.offset!=null){let i=0;tasks.push(pull.filter(()=>i++>=q.offset));}if(q.limit!=null){tasks.push(pull.take(q.limit));}return pull.apply(null,tasks);}}module.exports=MountDatastore;},6306:function(module,__unusedexports,__webpack_require__){"use strict";var url=__webpack_require__(774),util=__webpack_require__(649),http=__webpack_require__(3853),https=__webpack_require__(2307),crypto=__webpack_require__(2984),stream=__webpack_require__(6886),Ultron=__webpack_require__(4068),Options=__webpack_require__(7370),Sender=__webpack_require__(7534),Receiver=__webpack_require__(2825),SenderHixie=__webpack_require__(122),ReceiverHixie=__webpack_require__(2313),Extensions=__webpack_require__(4537),PerMessageDeflate=__webpack_require__(7505),EventEmitter=__webpack_require__(4859).EventEmitter;var protocolVersion=13;var closeTimeout=30*1000;function WebSocket(address,protocols,options){if(this instanceof WebSocket===false){return new WebSocket(address,protocols,options);}EventEmitter.call(this);if(protocols&&!Array.isArray(protocols)&&'object'===typeof protocols){options=protocols;protocols=null;}if('string'===typeof protocols){protocols=[protocols];}if(!Array.isArray(protocols)){protocols=[];}this._socket=null;this._ultron=null;this._closeReceived=false;this.bytesReceived=0;this.readyState=null;this.supports={};this.extensions={};this._binaryType='nodebuffer';if(Array.isArray(address)){initAsServerClient.apply(this,address.concat(options));}else{initAsClient.apply(this,[address,protocols,options]);}}util.inherits(WebSocket,EventEmitter);["CONNECTING","OPEN","CLOSING","CLOSED"].forEach(function each(state,index){WebSocket.prototype[state]=WebSocket[state]=index;});WebSocket.prototype.close=function close(code,data){if(this.readyState===WebSocket.CLOSED)return;if(this.readyState===WebSocket.CONNECTING){this.readyState=WebSocket.CLOSED;return;}if(this.readyState===WebSocket.CLOSING){if(this._closeReceived&&this._isServer){this.terminate();}return;}var self=this;try{this.readyState=WebSocket.CLOSING;this._closeCode=code;this._closeMessage=data;var mask=!this._isServer;this._sender.close(code,data,mask,function(err){if(err)self.emit('error',err);if(self._closeReceived&&self._isServer){self.terminate();}else{clearTimeout(self._closeTimer);self._closeTimer=setTimeout(cleanupWebsocketResources.bind(self,true),closeTimeout);}});}catch(e){this.emit('error',e);}};WebSocket.prototype.pause=function pauser(){if(this.readyState!==WebSocket.OPEN)throw new Error('not opened');return this._socket.pause();};WebSocket.prototype.ping=function ping(data,options,dontFailWhenClosed){if(this.readyState!==WebSocket.OPEN){if(dontFailWhenClosed===true)return;throw new Error('not opened');}options=options||{};if(typeof options.mask==='undefined')options.mask=!this._isServer;this._sender.ping(data,options);};WebSocket.prototype.pong=function(data,options,dontFailWhenClosed){if(this.readyState!==WebSocket.OPEN){if(dontFailWhenClosed===true)return;throw new Error('not opened');}options=options||{};if(typeof options.mask==='undefined')options.mask=!this._isServer;this._sender.pong(data,options);};WebSocket.prototype.resume=function resume(){if(this.readyState!==WebSocket.OPEN)throw new Error('not opened');return this._socket.resume();};WebSocket.prototype.send=function send(data,options,cb){if(typeof options==='function'){cb=options;options={};}if(this.readyState!==WebSocket.OPEN){if(typeof cb==='function')cb(new Error('not opened'));else throw new Error('not opened');return;}if(!data)data='';if(this._queue){var self=this;this._queue.push(function(){self.send(data,options,cb);});return;}options=options||{};options.fin=true;if(typeof options.binary==='undefined'){options.binary=data instanceof ArrayBuffer||data instanceof Buffer||data instanceof Uint8Array||data instanceof Uint16Array||data instanceof Uint32Array||data instanceof Int8Array||data instanceof Int16Array||data instanceof Int32Array||data instanceof Float32Array||data instanceof Float64Array;}if(typeof options.mask==='undefined')options.mask=!this._isServer;if(typeof options.compress==='undefined')options.compress=true;if(!this.extensions[PerMessageDeflate.extensionName]){options.compress=false;}var readable=typeof stream.Readable==='function'?stream.Readable:stream.Stream;if(data instanceof readable){startQueue(this);var self=this;sendStream(this,data,options,function send(error){process.nextTick(function tock(){executeQueueSends(self);});if(typeof cb==='function')cb(error);});}else{this._sender.send(data,options,cb);}};WebSocket.prototype.stream=function stream(options,cb){if(typeof options==='function'){cb=options;options={};}var self=this;if(typeof cb!=='function')throw new Error('callback must be provided');if(this.readyState!==WebSocket.OPEN){if(typeof cb==='function')cb(new Error('not opened'));else throw new Error('not opened');return;}if(this._queue){this._queue.push(function(){self.stream(options,cb);});return;}options=options||{};if(typeof options.mask==='undefined')options.mask=!this._isServer;if(typeof options.compress==='undefined')options.compress=true;if(!this.extensions[PerMessageDeflate.extensionName]){options.compress=false;}startQueue(this);function send(data,final){try{if(self.readyState!==WebSocket.OPEN)throw new Error('not opened');options.fin=final===true;self._sender.send(data,options);if(!final)process.nextTick(cb.bind(null,null,send));else executeQueueSends(self);}catch(e){if(typeof cb==='function')cb(e);else{delete self._queue;self.emit('error',e);}}}process.nextTick(cb.bind(null,null,send));};WebSocket.prototype.terminate=function terminate(){if(this.readyState===WebSocket.CLOSED)return;if(this._socket){this.readyState=WebSocket.CLOSING;try{this._socket.end();}catch(e){cleanupWebsocketResources.call(this,true);return;}if(this._closeTimer){clearTimeout(this._closeTimer);}this._closeTimer=setTimeout(cleanupWebsocketResources.bind(this,true),closeTimeout);}else if(this.readyState===WebSocket.CONNECTING){cleanupWebsocketResources.call(this,true);}};Object.defineProperty(WebSocket.prototype,'bufferedAmount',{get:function get(){var amount=0;if(this._socket){amount=this._socket.bufferSize||0;}return amount;}});Object.defineProperty(WebSocket.prototype,'binaryType',{get:function get(){return this._binaryType;},set:function set(type){if(type==='arraybuffer'||type==='nodebuffer')this._binaryType=type;else throw new SyntaxError('unsupported binaryType: must be either "nodebuffer" or "arraybuffer"');}});['open','error','close','message'].forEach(function(method){Object.defineProperty(WebSocket.prototype,'on'+method,{get:function get(){var listener=this.listeners(method)[0];return listener?listener._listener?listener._listener:listener:undefined;},set:function set(listener){this.removeAllListeners(method);this.addEventListener(method,listener);}});});WebSocket.prototype.addEventListener=function(method,listener){var target=this;function onMessage(data,flags){if(flags.binary&&this.binaryType==='arraybuffer')data=new Uint8Array(data).buffer;listener.call(target,new MessageEvent(data,!!flags.binary,target));}function onClose(code,message){listener.call(target,new CloseEvent(code,message,target));}function onError(event){event.type='error';event.target=target;listener.call(target,event);}function onOpen(){listener.call(target,new OpenEvent(target));}if(typeof listener==='function'){if(method==='message'){onMessage._listener=listener;this.on(method,onMessage);}else if(method==='close'){onClose._listener=listener;this.on(method,onClose);}else if(method==='error'){onError._listener=listener;this.on(method,onError);}else if(method==='open'){onOpen._listener=listener;this.on(method,onOpen);}else{this.on(method,listener);}}};module.exports=WebSocket;module.exports.buildHostHeader=buildHostHeader;function MessageEvent(dataArg,isBinary,target){this.type='message';this.data=dataArg;this.target=target;this.binary=isBinary;}function CloseEvent(code,reason,target){this.type='close';this.wasClean=typeof code==='undefined'||code===1000;this.code=code;this.reason=reason;this.target=target;}function OpenEvent(target){this.type='open';this.target=target;}function buildHostHeader(isSecure,hostname,port){var headerHost=hostname;if(hostname){if(isSecure&&port!=443||!isSecure&&port!=80){headerHost=headerHost+':'+port;}}return headerHost;}function initAsServerClient(req,socket,upgradeHead,options){options=new Options({protocolVersion:protocolVersion,protocol:null,extensions:{},maxPayload:0}).merge(options);this.protocol=options.value.protocol;this.protocolVersion=options.value.protocolVersion;this.extensions=options.value.extensions;this.supports.binary=this.protocolVersion!=='hixie-76';this.upgradeReq=req;this.readyState=WebSocket.CONNECTING;this._isServer=true;this.maxPayload=options.value.maxPayload;if(options.value.protocolVersion==='hixie-76'){establishConnection.call(this,ReceiverHixie,SenderHixie,socket,upgradeHead);}else{establishConnection.call(this,Receiver,Sender,socket,upgradeHead);}}function initAsClient(address,protocols,options){options=new Options({origin:null,protocolVersion:protocolVersion,host:null,headers:null,protocol:protocols.join(','),agent:null,pfx:null,key:null,passphrase:null,cert:null,ca:null,ciphers:null,rejectUnauthorized:null,perMessageDeflate:true,localAddress:null}).merge(options);if(options.value.protocolVersion!==8&&options.value.protocolVersion!==13){throw new Error('unsupported protocol version');}var serverUrl=url.parse(address);var isUnixSocket=serverUrl.protocol==='ws+unix:';if(!serverUrl.host&&!isUnixSocket)throw new Error('invalid url');var isSecure=serverUrl.protocol==='wss:'||serverUrl.protocol==='https:';var httpObj=isSecure?https:http;var port=serverUrl.port||(isSecure?443:80);var auth=serverUrl.auth;var extensionsOffer={};var perMessageDeflate;if(options.value.perMessageDeflate){perMessageDeflate=new PerMessageDeflate(typeof options.value.perMessageDeflate!==true?options.value.perMessageDeflate:{},false);extensionsOffer[PerMessageDeflate.extensionName]=perMessageDeflate.offer();}this._isServer=false;this.url=address;this.protocolVersion=options.value.protocolVersion;this.supports.binary=this.protocolVersion!=='hixie-76';var key=new Buffer(options.value.protocolVersion+'-'+Date.now()).toString('base64');var shasum=crypto.createHash('sha1');shasum.update(key+'258EAFA5-E914-47DA-95CA-C5AB0DC85B11');var expectedServerKey=shasum.digest('base64');var agent=options.value.agent;var headerHost=buildHostHeader(isSecure,serverUrl.hostname,port);var requestOptions={port:port,host:serverUrl.hostname,headers:{'Connection':'Upgrade','Upgrade':'websocket','Host':headerHost,'Sec-WebSocket-Version':options.value.protocolVersion,'Sec-WebSocket-Key':key}};if(auth){requestOptions.headers.Authorization='Basic '+new Buffer(auth).toString('base64');}if(options.value.protocol){requestOptions.headers['Sec-WebSocket-Protocol']=options.value.protocol;}if(options.value.host){requestOptions.headers.Host=options.value.host;}if(options.value.headers){for(var header in options.value.headers){if(options.value.headers.hasOwnProperty(header)){requestOptions.headers[header]=options.value.headers[header];}}}if(Object.keys(extensionsOffer).length){requestOptions.headers['Sec-WebSocket-Extensions']=Extensions.format(extensionsOffer);}if(options.isDefinedAndNonNull('pfx')||options.isDefinedAndNonNull('key')||options.isDefinedAndNonNull('passphrase')||options.isDefinedAndNonNull('cert')||options.isDefinedAndNonNull('ca')||options.isDefinedAndNonNull('ciphers')||options.isDefinedAndNonNull('rejectUnauthorized')){if(options.isDefinedAndNonNull('pfx'))requestOptions.pfx=options.value.pfx;if(options.isDefinedAndNonNull('key'))requestOptions.key=options.value.key;if(options.isDefinedAndNonNull('passphrase'))requestOptions.passphrase=options.value.passphrase;if(options.isDefinedAndNonNull('cert'))requestOptions.cert=options.value.cert;if(options.isDefinedAndNonNull('ca'))requestOptions.ca=options.value.ca;if(options.isDefinedAndNonNull('ciphers'))requestOptions.ciphers=options.value.ciphers;if(options.isDefinedAndNonNull('rejectUnauthorized'))requestOptions.rejectUnauthorized=options.value.rejectUnauthorized;if(!agent){agent=new httpObj.Agent(requestOptions);}}requestOptions.path=serverUrl.path||'/';if(agent){requestOptions.agent=agent;}if(isUnixSocket){requestOptions.socketPath=serverUrl.pathname;}if(options.value.localAddress){requestOptions.localAddress=options.value.localAddress;}if(options.value.origin){if(options.value.protocolVersion<13)requestOptions.headers['Sec-WebSocket-Origin']=options.value.origin;else requestOptions.headers.Origin=options.value.origin;}var self=this;var req=httpObj.request(requestOptions);req.on('error',function onerror(error){self.emit('error',error);cleanupWebsocketResources.call(self,error);});req.once('response',function response(res){var error;if(!self.emit('unexpected-response',req,res)){error=new Error('unexpected server response ('+res.statusCode+')');req.abort();self.emit('error',error);}cleanupWebsocketResources.call(self,error);});req.once('upgrade',function upgrade(res,socket,upgradeHead){if(self.readyState===WebSocket.CLOSED){self.emit('close');self.removeAllListeners();socket.end();return;}var serverKey=res.headers['sec-websocket-accept'];if(typeof serverKey==='undefined'||serverKey!==expectedServerKey){self.emit('error','invalid server key');self.removeAllListeners();socket.end();return;}var serverProt=res.headers['sec-websocket-protocol'];var protList=(options.value.protocol||"").split(/, */);var protError=null;if(!options.value.protocol&&serverProt){protError='server sent a subprotocol even though none requested';}else if(options.value.protocol&&!serverProt){protError='server sent no subprotocol even though requested';}else if(serverProt&&protList.indexOf(serverProt)===-1){protError='server responded with an invalid protocol';}if(protError){self.emit('error',protError);self.removeAllListeners();socket.end();return;}else if(serverProt){self.protocol=serverProt;}var serverExtensions=Extensions.parse(res.headers['sec-websocket-extensions']);if(perMessageDeflate&&serverExtensions[PerMessageDeflate.extensionName]){try{perMessageDeflate.accept(serverExtensions[PerMessageDeflate.extensionName]);}catch(err){self.emit('error','invalid extension parameter');self.removeAllListeners();socket.end();return;}self.extensions[PerMessageDeflate.extensionName]=perMessageDeflate;}establishConnection.call(self,Receiver,Sender,socket,upgradeHead);req.removeAllListeners();req=null;agent=null;});req.end();this.readyState=WebSocket.CONNECTING;}function establishConnection(ReceiverClass,SenderClass,socket,upgradeHead){var ultron=this._ultron=new Ultron(socket),called=false,self=this;socket.setTimeout(0);socket.setNoDelay(true);this._receiver=new ReceiverClass(this.extensions,this.maxPayload);this._socket=socket;ultron.on('end',cleanupWebsocketResources.bind(this));ultron.on('close',cleanupWebsocketResources.bind(this));ultron.on('error',cleanupWebsocketResources.bind(this));function firstHandler(data){if(called||self.readyState===WebSocket.CLOSED)return;called=true;socket.removeListener('data',firstHandler);ultron.on('data',realHandler);if(upgradeHead&&upgradeHead.length>0){realHandler(upgradeHead);upgradeHead=null;}if(data)realHandler(data);}function realHandler(data){self.bytesReceived+=data.length;self._receiver.add(data);}ultron.on('data',firstHandler);process.nextTick(firstHandler);self._receiver.ontext=function ontext(data,flags){flags=flags||{};self.emit('message',data,flags);};self._receiver.onbinary=function onbinary(data,flags){flags=flags||{};flags.binary=true;self.emit('message',data,flags);};self._receiver.onping=function onping(data,flags){flags=flags||{};self.pong(data,{mask:!self._isServer,binary:flags.binary===true},true);self.emit('ping',data,flags);};self._receiver.onpong=function onpong(data,flags){self.emit('pong',data,flags||{});};self._receiver.onclose=function onclose(code,data,flags){flags=flags||{};self._closeReceived=true;self.close(code,data);};self._receiver.onerror=function onerror(reason,errorCode){self.close(typeof errorCode!=='undefined'?errorCode:1002,'');self.emit('error',reason instanceof Error?reason:new Error(reason));};this._sender=new SenderClass(socket,this.extensions);this._sender.on('error',function onerror(error){self.close(1002,'');self.emit('error',error);});this.readyState=WebSocket.OPEN;this.emit('open');}function startQueue(instance){instance._queue=instance._queue||[];}function executeQueueSends(instance){var queue=instance._queue;if(typeof queue==='undefined')return;delete instance._queue;for(var i=0,l=queue.length;i<l;++i){queue[i]();}}function sendStream(instance,stream,options,cb){stream.on('data',function incoming(data){if(instance.readyState!==WebSocket.OPEN){if(typeof cb==='function')cb(new Error('not opened'));else{delete instance._queue;instance.emit('error',new Error('not opened'));}return;}options.fin=false;instance._sender.send(data,options);});stream.on('end',function end(){if(instance.readyState!==WebSocket.OPEN){if(typeof cb==='function')cb(new Error('not opened'));else{delete instance._queue;instance.emit('error',new Error('not opened'));}return;}options.fin=true;instance._sender.send(null,options);if(typeof cb==='function')cb(null);});}function cleanupWebsocketResources(error){if(this.readyState===WebSocket.CLOSED)return;this.readyState=WebSocket.CLOSED;clearTimeout(this._closeTimer);this._closeTimer=null;if(error||!this._closeReceived){this._closeCode=1006;}this.emit('close',this._closeCode||1000,this._closeMessage||'');if(this._socket){if(this._ultron)this._ultron.destroy();this._socket.on('error',function onerror(){try{this.destroy();}catch(e){}});try{if(!error)this._socket.end();else this._socket.destroy();}catch(e){}this._socket=null;this._ultron=null;}if(this._sender){this._sender.removeAllListeners();this._sender=null;}if(this._receiver){this._receiver.cleanup();this._receiver=null;}if(this.extensions[PerMessageDeflate.extensionName]){this.extensions[PerMessageDeflate.extensionName].cleanup();}this.extensions=null;this.removeAllListeners();this.on('error',function onerror(){});delete this._queue;}},6308:function(module,__unusedexports,__webpack_require__){var looper=__webpack_require__(7432);module.exports=function(writer,ender){return function(read){var queue=[],ended,error;function enqueue(data){queue.push(data);}writer=writer||function(data){this.queue(data);};ender=ender||function(){this.queue(null);};var emitter={emit:function(event,data){if(event=='data')enqueue(data);if(event=='end')ended=true,enqueue(null);if(event=='error')error=data;},queue:enqueue};var _cb;return function(end,cb){ended=ended||end;if(end)return read(end,function(){if(_cb){var t=_cb;_cb=null;t(end);}cb(end);});_cb=cb;looper(function pull(next){if(!_cb)return;cb=_cb;if(error)_cb=null,cb(error);else if(queue.length){var data=queue.shift();_cb=null,cb(data===null,data);}else{read(ended,function(end,data){if(end&&end!==true){error=end;return next();}if(ended=ended||end)ender.call(emitter);else if(data!==null){writer.call(emitter,data);if(error||ended)return read(error||ended,function(){_cb=null;cb(error||ended);});}next(pull);});}});};};};},6309:function(module){var INFINITY=1/0,MAX_SAFE_INTEGER=9007199254740991,MAX_INTEGER=1.7976931348623157e+308,NAN=0/0;var funcTag='[object Function]',genTag='[object GeneratorFunction]',symbolTag='[object Symbol]';var reTrim=/^\s+|\s+$/g;var reIsBadHex=/^[-+]0x[0-9a-f]+$/i;var reIsBinary=/^0b[01]+$/i;var reIsOctal=/^0o[0-7]+$/i;var reIsUint=/^(?:0|[1-9]\d*)$/;var freeParseInt=parseInt;var freeGlobal=typeof global=='object'&&global&&global.Object===Object&&global;var freeSelf=typeof self=='object'&&self&&self.Object===Object&&self;var root=freeGlobal||freeSelf||Function('return this')();var objectProto=Object.prototype;var objectToString=objectProto.toString;var Symbol=root.Symbol;var nativeFloor=Math.floor;var symbolProto=Symbol?Symbol.prototype:undefined,symbolToString=symbolProto?symbolProto.toString:undefined;function baseRepeat(string,n){var result='';if(!string||n<1||n>MAX_SAFE_INTEGER){return result;}do{if(n%2){result+=string;}n=nativeFloor(n/2);if(n){string+=string;}}while(n);return result;}function baseToString(value){if(typeof value=='string'){return value;}if(isSymbol(value)){return symbolToString?symbolToString.call(value):'';}var result=value+'';return result=='0'&&1/value==-INFINITY?'-0':result;}function isIndex(value,length){length=length==null?MAX_SAFE_INTEGER:length;return!!length&&(typeof value=='number'||reIsUint.test(value))&&value>-1&&value%1==0&&value<length;}function isIterateeCall(value,index,object){if(!isObject(object)){return false;}var type=typeof index;if(type=='number'?isArrayLike(object)&&isIndex(index,object.length):type=='string'&&index in object){return eq(object[index],value);}return false;}function eq(value,other){return value===other||value!==value&&other!==other;}function isArrayLike(value){return value!=null&&isLength(value.length)&&!isFunction(value);}function isFunction(value){var tag=isObject(value)?objectToString.call(value):'';return tag==funcTag||tag==genTag;}function isLength(value){return typeof value=='number'&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER;}function isObject(value){var type=typeof value;return!!value&&(type=='object'||type=='function');}function isObjectLike(value){return!!value&&typeof value=='object';}function isSymbol(value){return typeof value=='symbol'||isObjectLike(value)&&objectToString.call(value)==symbolTag;}function toFinite(value){if(!value){return value===0?value:0;}value=toNumber(value);if(value===INFINITY||value===-INFINITY){var sign=value<0?-1:1;return sign*MAX_INTEGER;}return value===value?value:0;}function toInteger(value){var result=toFinite(value),remainder=result%1;return result===result?remainder?result-remainder:result:0;}function toNumber(value){if(typeof value=='number'){return value;}if(isSymbol(value)){return NAN;}if(isObject(value)){var other=typeof value.valueOf=='function'?value.valueOf():value;value=isObject(other)?other+'':other;}if(typeof value!='string'){return value===0?value:+value;}value=value.replace(reTrim,'');var isBinary=reIsBinary.test(value);return isBinary||reIsOctal.test(value)?freeParseInt(value.slice(2),isBinary?2:8):reIsBadHex.test(value)?NAN:+value;}function toString(value){return value==null?'':baseToString(value);}function repeat(string,n,guard){if(guard?isIterateeCall(string,n,guard):n===undefined){n=1;}else{n=toInteger(n);}return baseRepeat(toString(string),n);}module.exports=repeat;},6321:function(module,__unusedexports,__webpack_require__){var forge=__webpack_require__(7938);module.exports=forge.md=forge.md||{};forge.md.algorithms=forge.md.algorithms||{};},6334:function(module,__unusedexports,__webpack_require__){var prr=__webpack_require__(8650);function init(type,message,cause){if(!!message&&typeof message!='string'){message=message.message||message.name;}prr(this,{type:type,name:type,cause:typeof message!='string'?message:cause,message:message},'ewr');}function CustomError(message,cause){Error.call(this);if(Error.captureStackTrace)Error.captureStackTrace(this,this.constructor);init.call(this,'CustomError',message,cause);}CustomError.prototype=new Error();function createError(errno,type,proto){var err=function(message,cause){init.call(this,type,message,cause);if(type=='FilesystemError'){this.code=this.cause.code;this.path=this.cause.path;this.errno=this.cause.errno;this.message=(errno.errno[this.cause.errno]?errno.errno[this.cause.errno].description:this.cause.message)+(this.cause.path?' ['+this.cause.path+']':'');}Error.call(this);if(Error.captureStackTrace)Error.captureStackTrace(this,err);};err.prototype=!!proto?new proto():new CustomError();return err;}module.exports=function(errno){var ce=function(type,proto){return createError(errno,type,proto);};return{CustomError:CustomError,FilesystemError:ce('FilesystemError'),createError:ce};};},6343:function(module,__unusedexports,__webpack_require__){"use strict";const log=__webpack_require__(746)('ipfs:mfs:utils:update-mfs:root');const waterfall=__webpack_require__(4265);const CID=__webpack_require__(9339);const{MFS_ROOT_KEY}=__webpack_require__(7514);const updateMfsRoot=(context,buffer,callback)=>{const cid=new CID(buffer);log(`New MFS root will be ${cid.toBaseEncodedString()}`);waterfall([cb=>context.repo.datastore.put(MFS_ROOT_KEY,cid.buffer,error=>cb(error))],error=>callback(error,cid));};module.exports=updateMfsRoot;},6348:function(module){module.exports=function bufferIndexOf(buf,search,offset){offset=offset||0;var m=0;var s=-1;for(var i=offset;i<buf.length;++i){if(buf[i]==search[m]){if(s==-1)s=i;++m;if(m==search.length)break;}else{s=-1;m=0;}}if(s>-1&&buf.length-s<search.length)return-1;return s;};},6363:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=eachOfLimit;var _eachOfLimit2=__webpack_require__(3177);var _eachOfLimit3=_interopRequireDefault(_eachOfLimit2);var _wrapAsync=__webpack_require__(9396);var _wrapAsync2=_interopRequireDefault(_wrapAsync);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function eachOfLimit(coll,limit,iteratee,callback){(0,_eachOfLimit3.default)(limit)(coll,(0,_wrapAsync2.default)(iteratee),callback);}module.exports=exports['default'];},6367:function(module,__unusedexports,__webpack_require__){"use strict";const ConsumableBuffer=__webpack_require__(2408);module.exports=function wrapHash(hashFn){return function hashing(value){if(value instanceof InfiniteHash){return value;}else{return new InfiniteHash(value,hashFn);}};};class InfiniteHash{constructor(value,hashFn){if(typeof value!=='string'&&!Buffer.isBuffer(value)){throw new Error('can only hash strings or buffers');}this._value=value;this._hashFn=hashFn;this._depth=-1;this._availableBits=0;this._currentBufferIndex=0;this._buffers=[];}async take(bits){let pendingBits=bits;while(this._availableBits<pendingBits){await this._produceMoreBits();}let result=0;while(pendingBits>0){const hash=this._buffers[this._currentBufferIndex];const available=Math.min(hash.availableBits(),pendingBits);const took=hash.take(available);result=(result<<available)+took;pendingBits-=available;this._availableBits-=available;if(hash.availableBits()===0){this._currentBufferIndex++;}}return result;}untake(bits){let pendingBits=bits;while(pendingBits>0){const hash=this._buffers[this._currentBufferIndex];const availableForUntake=Math.min(hash.totalBits()-hash.availableBits(),pendingBits);hash.untake(availableForUntake);pendingBits-=availableForUntake;this._availableBits+=availableForUntake;if(this._currentBufferIndex>0&&hash.totalBits()===hash.availableBits()){this._depth--;this._currentBufferIndex--;}}}async _produceMoreBits(){this._depth++;const value=this._depth?this._value+this._depth:this._value;const hashValue=await this._hashFn(value);const buffer=new ConsumableBuffer(hashValue);this._buffers.push(buffer);this._availableBits+=buffer.availableBits();}}},6373:function(module,exports,__webpack_require__){module=__webpack_require__.nmd(module);(function(global,factory){true?factory(exports):undefined;})(this,function(exports){'use strict';function slice(arrayLike,start){start=start|0;var newLen=Math.max(arrayLike.length-start,0);var newArr=Array(newLen);for(var idx=0;idx<newLen;idx++){newArr[idx]=arrayLike[start+idx];}return newArr;}var apply=function(fn){var args=slice(arguments,1);return function(){var callArgs=slice(arguments);return fn.apply(null,args.concat(callArgs));};};var initialParams=function(fn){return function(){var args=slice(arguments);var callback=args.pop();fn.call(this,args,callback);};};function isObject(value){var type=typeof value;return value!=null&&(type=='object'||type=='function');}var hasSetImmediate=typeof setImmediate==='function'&&setImmediate;var hasNextTick=typeof process==='object'&&typeof process.nextTick==='function';function fallback(fn){setTimeout(fn,0);}function wrap(defer){return function(fn){var args=slice(arguments,1);defer(function(){fn.apply(null,args);});};}var _defer;if(hasSetImmediate){_defer=setImmediate;}else if(hasNextTick){_defer=process.nextTick;}else{_defer=fallback;}var setImmediate$1=wrap(_defer);function asyncify(func){return initialParams(function(args,callback){var result;try{result=func.apply(this,args);}catch(e){return callback(e);}if(isObject(result)&&typeof result.then==='function'){result.then(function(value){invokeCallback(callback,null,value);},function(err){invokeCallback(callback,err.message?err:new Error(err));});}else{callback(null,result);}});}function invokeCallback(callback,error,value){try{callback(error,value);}catch(e){setImmediate$1(rethrow,e);}}function rethrow(error){throw error;}var supportsSymbol=typeof Symbol==='function';function isAsync(fn){return supportsSymbol&&fn[Symbol.toStringTag]==='AsyncFunction';}function wrapAsync(asyncFn){return isAsync(asyncFn)?asyncify(asyncFn):asyncFn;}function applyEach$1(eachfn){return function(fns){var args=slice(arguments,1);var go=initialParams(function(args,callback){var that=this;return eachfn(fns,function(fn,cb){wrapAsync(fn).apply(that,args.concat(cb));},callback);});if(args.length){return go.apply(this,args);}else{return go;}};}var freeGlobal=typeof global=='object'&&global&&global.Object===Object&&global;var freeSelf=typeof self=='object'&&self&&self.Object===Object&&self;var root=freeGlobal||freeSelf||Function('return this')();var Symbol$1=root.Symbol;var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;var nativeObjectToString=objectProto.toString;var symToStringTag$1=Symbol$1?Symbol$1.toStringTag:undefined;function getRawTag(value){var isOwn=hasOwnProperty.call(value,symToStringTag$1),tag=value[symToStringTag$1];try{value[symToStringTag$1]=undefined;var unmasked=true;}catch(e){}var result=nativeObjectToString.call(value);if(unmasked){if(isOwn){value[symToStringTag$1]=tag;}else{delete value[symToStringTag$1];}}return result;}var objectProto$1=Object.prototype;var nativeObjectToString$1=objectProto$1.toString;function objectToString(value){return nativeObjectToString$1.call(value);}var nullTag='[object Null]';var undefinedTag='[object Undefined]';var symToStringTag=Symbol$1?Symbol$1.toStringTag:undefined;function baseGetTag(value){if(value==null){return value===undefined?undefinedTag:nullTag;}return symToStringTag&&symToStringTag in Object(value)?getRawTag(value):objectToString(value);}var asyncTag='[object AsyncFunction]';var funcTag='[object Function]';var genTag='[object GeneratorFunction]';var proxyTag='[object Proxy]';function isFunction(value){if(!isObject(value)){return false;}var tag=baseGetTag(value);return tag==funcTag||tag==genTag||tag==asyncTag||tag==proxyTag;}var MAX_SAFE_INTEGER=9007199254740991;function isLength(value){return typeof value=='number'&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER;}function isArrayLike(value){return value!=null&&isLength(value.length)&&!isFunction(value);}var breakLoop={};function noop(){}function once(fn){return function(){if(fn===null)return;var callFn=fn;fn=null;callFn.apply(this,arguments);};}var iteratorSymbol=typeof Symbol==='function'&&Symbol.iterator;var getIterator=function(coll){return iteratorSymbol&&coll[iteratorSymbol]&&coll[iteratorSymbol]();};function baseTimes(n,iteratee){var index=-1,result=Array(n);while(++index<n){result[index]=iteratee(index);}return result;}function isObjectLike(value){return value!=null&&typeof value=='object';}var argsTag='[object Arguments]';function baseIsArguments(value){return isObjectLike(value)&&baseGetTag(value)==argsTag;}var objectProto$3=Object.prototype;var hasOwnProperty$2=objectProto$3.hasOwnProperty;var propertyIsEnumerable=objectProto$3.propertyIsEnumerable;var isArguments=baseIsArguments(function(){return arguments;}())?baseIsArguments:function(value){return isObjectLike(value)&&hasOwnProperty$2.call(value,'callee')&&!propertyIsEnumerable.call(value,'callee');};var isArray=Array.isArray;function stubFalse(){return false;}var freeExports=typeof exports=='object'&&exports&&!exports.nodeType&&exports;var freeModule=freeExports&&"object"=='object'&&module&&!module.nodeType&&module;var moduleExports=freeModule&&freeModule.exports===freeExports;var Buffer=moduleExports?root.Buffer:undefined;var nativeIsBuffer=Buffer?Buffer.isBuffer:undefined;var isBuffer=nativeIsBuffer||stubFalse;var MAX_SAFE_INTEGER$1=9007199254740991;var reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(value,length){var type=typeof value;length=length==null?MAX_SAFE_INTEGER$1:length;return!!length&&(type=='number'||type!='symbol'&&reIsUint.test(value))&&value>-1&&value%1==0&&value<length;}var argsTag$1='[object Arguments]';var arrayTag='[object Array]';var boolTag='[object Boolean]';var dateTag='[object Date]';var errorTag='[object Error]';var funcTag$1='[object Function]';var mapTag='[object Map]';var numberTag='[object Number]';var objectTag='[object Object]';var regexpTag='[object RegExp]';var setTag='[object Set]';var stringTag='[object String]';var weakMapTag='[object WeakMap]';var arrayBufferTag='[object ArrayBuffer]';var dataViewTag='[object DataView]';var float32Tag='[object Float32Array]';var float64Tag='[object Float64Array]';var int8Tag='[object Int8Array]';var int16Tag='[object Int16Array]';var int32Tag='[object Int32Array]';var uint8Tag='[object Uint8Array]';var uint8ClampedTag='[object Uint8ClampedArray]';var uint16Tag='[object Uint16Array]';var uint32Tag='[object Uint32Array]';var typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=true;typedArrayTags[argsTag$1]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag$1]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=false;function baseIsTypedArray(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[baseGetTag(value)];}function baseUnary(func){return function(value){return func(value);};}var freeExports$1=typeof exports=='object'&&exports&&!exports.nodeType&&exports;var freeModule$1=freeExports$1&&"object"=='object'&&module&&!module.nodeType&&module;var moduleExports$1=freeModule$1&&freeModule$1.exports===freeExports$1;var freeProcess=moduleExports$1&&freeGlobal.process;var nodeUtil=function(){try{var types=freeModule$1&&freeModule$1.require&&freeModule$1.require('util').types;if(types){return types;}return freeProcess&&freeProcess.binding&&freeProcess.binding('util');}catch(e){}}();var nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray;var isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray;var objectProto$2=Object.prototype;var hasOwnProperty$1=objectProto$2.hasOwnProperty;function arrayLikeKeys(value,inherited){var isArr=isArray(value),isArg=!isArr&&isArguments(value),isBuff=!isArr&&!isArg&&isBuffer(value),isType=!isArr&&!isArg&&!isBuff&&isTypedArray(value),skipIndexes=isArr||isArg||isBuff||isType,result=skipIndexes?baseTimes(value.length,String):[],length=result.length;for(var key in value){if((inherited||hasOwnProperty$1.call(value,key))&&!(skipIndexes&&(key=='length'||isBuff&&(key=='offset'||key=='parent')||isType&&(key=='buffer'||key=='byteLength'||key=='byteOffset')||isIndex(key,length)))){result.push(key);}}return result;}var objectProto$5=Object.prototype;function isPrototype(value){var Ctor=value&&value.constructor,proto=typeof Ctor=='function'&&Ctor.prototype||objectProto$5;return value===proto;}function overArg(func,transform){return function(arg){return func(transform(arg));};}var nativeKeys=overArg(Object.keys,Object);var objectProto$4=Object.prototype;var hasOwnProperty$3=objectProto$4.hasOwnProperty;function baseKeys(object){if(!isPrototype(object)){return nativeKeys(object);}var result=[];for(var key in Object(object)){if(hasOwnProperty$3.call(object,key)&&key!='constructor'){result.push(key);}}return result;}function keys(object){return isArrayLike(object)?arrayLikeKeys(object):baseKeys(object);}function createArrayIterator(coll){var i=-1;var len=coll.length;return function next(){return++i<len?{value:coll[i],key:i}:null;};}function createES2015Iterator(iterator){var i=-1;return function next(){var item=iterator.next();if(item.done)return null;i++;return{value:item.value,key:i};};}function createObjectIterator(obj){var okeys=keys(obj);var i=-1;var len=okeys.length;return function next(){var key=okeys[++i];return i<len?{value:obj[key],key:key}:null;};}function iterator(coll){if(isArrayLike(coll)){return createArrayIterator(coll);}var iterator=getIterator(coll);return iterator?createES2015Iterator(iterator):createObjectIterator(coll);}function onlyOnce(fn){return function(){if(fn===null)throw new Error("Callback was already called.");var callFn=fn;fn=null;callFn.apply(this,arguments);};}function _eachOfLimit(limit){return function(obj,iteratee,callback){callback=once(callback||noop);if(limit<=0||!obj){return callback(null);}var nextElem=iterator(obj);var done=false;var running=0;var looping=false;function iterateeCallback(err,value){running-=1;if(err){done=true;callback(err);}else if(value===breakLoop||done&&running<=0){done=true;return callback(null);}else if(!looping){replenish();}}function replenish(){looping=true;while(running<limit&&!done){var elem=nextElem();if(elem===null){done=true;if(running<=0){callback(null);}return;}running+=1;iteratee(elem.value,elem.key,onlyOnce(iterateeCallback));}looping=false;}replenish();};}function eachOfLimit(coll,limit,iteratee,callback){_eachOfLimit(limit)(coll,wrapAsync(iteratee),callback);}function doLimit(fn,limit){return function(iterable,iteratee,callback){return fn(iterable,limit,iteratee,callback);};}function eachOfArrayLike(coll,iteratee,callback){callback=once(callback||noop);var index=0,completed=0,length=coll.length;if(length===0){callback(null);}function iteratorCallback(err,value){if(err){callback(err);}else if(++completed===length||value===breakLoop){callback(null);}}for(;index<length;index++){iteratee(coll[index],index,onlyOnce(iteratorCallback));}}var eachOfGeneric=doLimit(eachOfLimit,Infinity);var eachOf=function(coll,iteratee,callback){var eachOfImplementation=isArrayLike(coll)?eachOfArrayLike:eachOfGeneric;eachOfImplementation(coll,wrapAsync(iteratee),callback);};function doParallel(fn){return function(obj,iteratee,callback){return fn(eachOf,obj,wrapAsync(iteratee),callback);};}function _asyncMap(eachfn,arr,iteratee,callback){callback=callback||noop;arr=arr||[];var results=[];var counter=0;var _iteratee=wrapAsync(iteratee);eachfn(arr,function(value,_,callback){var index=counter++;_iteratee(value,function(err,v){results[index]=v;callback(err);});},function(err){callback(err,results);});}var map=doParallel(_asyncMap);var applyEach=applyEach$1(map);function doParallelLimit(fn){return function(obj,limit,iteratee,callback){return fn(_eachOfLimit(limit),obj,wrapAsync(iteratee),callback);};}var mapLimit=doParallelLimit(_asyncMap);var mapSeries=doLimit(mapLimit,1);var applyEachSeries=applyEach$1(mapSeries);function arrayEach(array,iteratee){var index=-1,length=array==null?0:array.length;while(++index<length){if(iteratee(array[index],index,array)===false){break;}}return array;}function createBaseFor(fromRight){return function(object,iteratee,keysFunc){var index=-1,iterable=Object(object),props=keysFunc(object),length=props.length;while(length--){var key=props[fromRight?length:++index];if(iteratee(iterable[key],key,iterable)===false){break;}}return object;};}var baseFor=createBaseFor();function baseForOwn(object,iteratee){return object&&baseFor(object,iteratee,keys);}function baseFindIndex(array,predicate,fromIndex,fromRight){var length=array.length,index=fromIndex+(fromRight?1:-1);while(fromRight?index--:++index<length){if(predicate(array[index],index,array)){return index;}}return-1;}function baseIsNaN(value){return value!==value;}function strictIndexOf(array,value,fromIndex){var index=fromIndex-1,length=array.length;while(++index<length){if(array[index]===value){return index;}}return-1;}function baseIndexOf(array,value,fromIndex){return value===value?strictIndexOf(array,value,fromIndex):baseFindIndex(array,baseIsNaN,fromIndex);}var auto=function(tasks,concurrency,callback){if(typeof concurrency==='function'){callback=concurrency;concurrency=null;}callback=once(callback||noop);var keys$$1=keys(tasks);var numTasks=keys$$1.length;if(!numTasks){return callback(null);}if(!concurrency){concurrency=numTasks;}var results={};var runningTasks=0;var hasError=false;var listeners=Object.create(null);var readyTasks=[];var readyToCheck=[];var uncheckedDependencies={};baseForOwn(tasks,function(task,key){if(!isArray(task)){enqueueTask(key,[task]);readyToCheck.push(key);return;}var dependencies=task.slice(0,task.length-1);var remainingDependencies=dependencies.length;if(remainingDependencies===0){enqueueTask(key,task);readyToCheck.push(key);return;}uncheckedDependencies[key]=remainingDependencies;arrayEach(dependencies,function(dependencyName){if(!tasks[dependencyName]){throw new Error('async.auto task `'+key+'` has a non-existent dependency `'+dependencyName+'` in '+dependencies.join(', '));}addListener(dependencyName,function(){remainingDependencies--;if(remainingDependencies===0){enqueueTask(key,task);}});});});checkForDeadlocks();processQueue();function enqueueTask(key,task){readyTasks.push(function(){runTask(key,task);});}function processQueue(){if(readyTasks.length===0&&runningTasks===0){return callback(null,results);}while(readyTasks.length&&runningTasks<concurrency){var run=readyTasks.shift();run();}}function addListener(taskName,fn){var taskListeners=listeners[taskName];if(!taskListeners){taskListeners=listeners[taskName]=[];}taskListeners.push(fn);}function taskComplete(taskName){var taskListeners=listeners[taskName]||[];arrayEach(taskListeners,function(fn){fn();});processQueue();}function runTask(key,task){if(hasError)return;var taskCallback=onlyOnce(function(err,result){runningTasks--;if(arguments.length>2){result=slice(arguments,1);}if(err){var safeResults={};baseForOwn(results,function(val,rkey){safeResults[rkey]=val;});safeResults[key]=result;hasError=true;listeners=Object.create(null);callback(err,safeResults);}else{results[key]=result;taskComplete(key);}});runningTasks++;var taskFn=wrapAsync(task[task.length-1]);if(task.length>1){taskFn(results,taskCallback);}else{taskFn(taskCallback);}}function checkForDeadlocks(){var currentTask;var counter=0;while(readyToCheck.length){currentTask=readyToCheck.pop();counter++;arrayEach(getDependents(currentTask),function(dependent){if(--uncheckedDependencies[dependent]===0){readyToCheck.push(dependent);}});}if(counter!==numTasks){throw new Error('async.auto cannot execute tasks due to a recursive dependency');}}function getDependents(taskName){var result=[];baseForOwn(tasks,function(task,key){if(isArray(task)&&baseIndexOf(task,taskName,0)>=0){result.push(key);}});return result;}};function arrayMap(array,iteratee){var index=-1,length=array==null?0:array.length,result=Array(length);while(++index<length){result[index]=iteratee(array[index],index,array);}return result;}var symbolTag='[object Symbol]';function isSymbol(value){return typeof value=='symbol'||isObjectLike(value)&&baseGetTag(value)==symbolTag;}var INFINITY=1/0;var symbolProto=Symbol$1?Symbol$1.prototype:undefined;var symbolToString=symbolProto?symbolProto.toString:undefined;function baseToString(value){if(typeof value=='string'){return value;}if(isArray(value)){return arrayMap(value,baseToString)+'';}if(isSymbol(value)){return symbolToString?symbolToString.call(value):'';}var result=value+'';return result=='0'&&1/value==-INFINITY?'-0':result;}function baseSlice(array,start,end){var index=-1,length=array.length;if(start<0){start=-start>length?0:length+start;}end=end>length?length:end;if(end<0){end+=length;}length=start>end?0:end-start>>>0;start>>>=0;var result=Array(length);while(++index<length){result[index]=array[index+start];}return result;}function castSlice(array,start,end){var length=array.length;end=end===undefined?length:end;return!start&&end>=length?array:baseSlice(array,start,end);}function charsEndIndex(strSymbols,chrSymbols){var index=strSymbols.length;while(index--&&baseIndexOf(chrSymbols,strSymbols[index],0)>-1){}return index;}function charsStartIndex(strSymbols,chrSymbols){var index=-1,length=strSymbols.length;while(++index<length&&baseIndexOf(chrSymbols,strSymbols[index],0)>-1){}return index;}function asciiToArray(string){return string.split('');}var rsAstralRange='\\ud800-\\udfff';var rsComboMarksRange='\\u0300-\\u036f';var reComboHalfMarksRange='\\ufe20-\\ufe2f';var rsComboSymbolsRange='\\u20d0-\\u20ff';var rsComboRange=rsComboMarksRange+reComboHalfMarksRange+rsComboSymbolsRange;var rsVarRange='\\ufe0e\\ufe0f';var rsZWJ='\\u200d';var reHasUnicode=RegExp('['+rsZWJ+rsAstralRange+rsComboRange+rsVarRange+']');function hasUnicode(string){return reHasUnicode.test(string);}var rsAstralRange$1='\\ud800-\\udfff';var rsComboMarksRange$1='\\u0300-\\u036f';var reComboHalfMarksRange$1='\\ufe20-\\ufe2f';var rsComboSymbolsRange$1='\\u20d0-\\u20ff';var rsComboRange$1=rsComboMarksRange$1+reComboHalfMarksRange$1+rsComboSymbolsRange$1;var rsVarRange$1='\\ufe0e\\ufe0f';var rsAstral='['+rsAstralRange$1+']';var rsCombo='['+rsComboRange$1+']';var rsFitz='\\ud83c[\\udffb-\\udfff]';var rsModifier='(?:'+rsCombo+'|'+rsFitz+')';var rsNonAstral='[^'+rsAstralRange$1+']';var rsRegional='(?:\\ud83c[\\udde6-\\uddff]){2}';var rsSurrPair='[\\ud800-\\udbff][\\udc00-\\udfff]';var rsZWJ$1='\\u200d';var reOptMod=rsModifier+'?';var rsOptVar='['+rsVarRange$1+']?';var rsOptJoin='(?:'+rsZWJ$1+'(?:'+[rsNonAstral,rsRegional,rsSurrPair].join('|')+')'+rsOptVar+reOptMod+')*';var rsSeq=rsOptVar+reOptMod+rsOptJoin;var rsSymbol='(?:'+[rsNonAstral+rsCombo+'?',rsCombo,rsRegional,rsSurrPair,rsAstral].join('|')+')';var reUnicode=RegExp(rsFitz+'(?='+rsFitz+')|'+rsSymbol+rsSeq,'g');function unicodeToArray(string){return string.match(reUnicode)||[];}function stringToArray(string){return hasUnicode(string)?unicodeToArray(string):asciiToArray(string);}function toString(value){return value==null?'':baseToString(value);}var reTrim=/^\s+|\s+$/g;function trim(string,chars,guard){string=toString(string);if(string&&(guard||chars===undefined)){return string.replace(reTrim,'');}if(!string||!(chars=baseToString(chars))){return string;}var strSymbols=stringToArray(string),chrSymbols=stringToArray(chars),start=charsStartIndex(strSymbols,chrSymbols),end=charsEndIndex(strSymbols,chrSymbols)+1;return castSlice(strSymbols,start,end).join('');}var FN_ARGS=/^(?:async\s+)?(function)?\s*[^\(]*\(\s*([^\)]*)\)/m;var FN_ARG_SPLIT=/,/;var FN_ARG=/(=.+)?(\s*)$/;var STRIP_COMMENTS=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/mg;function parseParams(func){func=func.toString().replace(STRIP_COMMENTS,'');func=func.match(FN_ARGS)[2].replace(' ','');func=func?func.split(FN_ARG_SPLIT):[];func=func.map(function(arg){return trim(arg.replace(FN_ARG,''));});return func;}function autoInject(tasks,callback){var newTasks={};baseForOwn(tasks,function(taskFn,key){var params;var fnIsAsync=isAsync(taskFn);var hasNoDeps=!fnIsAsync&&taskFn.length===1||fnIsAsync&&taskFn.length===0;if(isArray(taskFn)){params=taskFn.slice(0,-1);taskFn=taskFn[taskFn.length-1];newTasks[key]=params.concat(params.length>0?newTask:taskFn);}else if(hasNoDeps){newTasks[key]=taskFn;}else{params=parseParams(taskFn);if(taskFn.length===0&&!fnIsAsync&&params.length===0){throw new Error("autoInject task functions require explicit parameters.");}if(!fnIsAsync)params.pop();newTasks[key]=params.concat(newTask);}function newTask(results,taskCb){var newArgs=arrayMap(params,function(name){return results[name];});newArgs.push(taskCb);wrapAsync(taskFn).apply(null,newArgs);}});auto(newTasks,callback);}function DLL(){this.head=this.tail=null;this.length=0;}function setInitial(dll,node){dll.length=1;dll.head=dll.tail=node;}DLL.prototype.removeLink=function(node){if(node.prev)node.prev.next=node.next;else this.head=node.next;if(node.next)node.next.prev=node.prev;else this.tail=node.prev;node.prev=node.next=null;this.length-=1;return node;};DLL.prototype.empty=function(){while(this.head)this.shift();return this;};DLL.prototype.insertAfter=function(node,newNode){newNode.prev=node;newNode.next=node.next;if(node.next)node.next.prev=newNode;else this.tail=newNode;node.next=newNode;this.length+=1;};DLL.prototype.insertBefore=function(node,newNode){newNode.prev=node.prev;newNode.next=node;if(node.prev)node.prev.next=newNode;else this.head=newNode;node.prev=newNode;this.length+=1;};DLL.prototype.unshift=function(node){if(this.head)this.insertBefore(this.head,node);else setInitial(this,node);};DLL.prototype.push=function(node){if(this.tail)this.insertAfter(this.tail,node);else setInitial(this,node);};DLL.prototype.shift=function(){return this.head&&this.removeLink(this.head);};DLL.prototype.pop=function(){return this.tail&&this.removeLink(this.tail);};DLL.prototype.toArray=function(){var arr=Array(this.length);var curr=this.head;for(var idx=0;idx<this.length;idx++){arr[idx]=curr.data;curr=curr.next;}return arr;};DLL.prototype.remove=function(testFn){var curr=this.head;while(!!curr){var next=curr.next;if(testFn(curr)){this.removeLink(curr);}curr=next;}return this;};function queue(worker,concurrency,payload){if(concurrency==null){concurrency=1;}else if(concurrency===0){throw new Error('Concurrency must not be zero');}var _worker=wrapAsync(worker);var numRunning=0;var workersList=[];var processingScheduled=false;function _insert(data,insertAtFront,callback){if(callback!=null&&typeof callback!=='function'){throw new Error('task callback must be a function');}q.started=true;if(!isArray(data)){data=[data];}if(data.length===0&&q.idle()){return setImmediate$1(function(){q.drain();});}for(var i=0,l=data.length;i<l;i++){var item={data:data[i],callback:callback||noop};if(insertAtFront){q._tasks.unshift(item);}else{q._tasks.push(item);}}if(!processingScheduled){processingScheduled=true;setImmediate$1(function(){processingScheduled=false;q.process();});}}function _next(tasks){return function(err){numRunning-=1;for(var i=0,l=tasks.length;i<l;i++){var task=tasks[i];var index=baseIndexOf(workersList,task,0);if(index===0){workersList.shift();}else if(index>0){workersList.splice(index,1);}task.callback.apply(task,arguments);if(err!=null){q.error(err,task.data);}}if(numRunning<=q.concurrency-q.buffer){q.unsaturated();}if(q.idle()){q.drain();}q.process();};}var isProcessing=false;var q={_tasks:new DLL(),concurrency:concurrency,payload:payload,saturated:noop,unsaturated:noop,buffer:concurrency/4,empty:noop,drain:noop,error:noop,started:false,paused:false,push:function(data,callback){_insert(data,false,callback);},kill:function(){q.drain=noop;q._tasks.empty();},unshift:function(data,callback){_insert(data,true,callback);},remove:function(testFn){q._tasks.remove(testFn);},process:function(){if(isProcessing){return;}isProcessing=true;while(!q.paused&&numRunning<q.concurrency&&q._tasks.length){var tasks=[],data=[];var l=q._tasks.length;if(q.payload)l=Math.min(l,q.payload);for(var i=0;i<l;i++){var node=q._tasks.shift();tasks.push(node);workersList.push(node);data.push(node.data);}numRunning+=1;if(q._tasks.length===0){q.empty();}if(numRunning===q.concurrency){q.saturated();}var cb=onlyOnce(_next(tasks));_worker(data,cb);}isProcessing=false;},length:function(){return q._tasks.length;},running:function(){return numRunning;},workersList:function(){return workersList;},idle:function(){return q._tasks.length+numRunning===0;},pause:function(){q.paused=true;},resume:function(){if(q.paused===false){return;}q.paused=false;setImmediate$1(q.process);}};return q;}function cargo(worker,payload){return queue(worker,1,payload);}var eachOfSeries=doLimit(eachOfLimit,1);function reduce(coll,memo,iteratee,callback){callback=once(callback||noop);var _iteratee=wrapAsync(iteratee);eachOfSeries(coll,function(x,i,callback){_iteratee(memo,x,function(err,v){memo=v;callback(err);});},function(err){callback(err,memo);});}function seq(){var _functions=arrayMap(arguments,wrapAsync);return function(){var args=slice(arguments);var that=this;var cb=args[args.length-1];if(typeof cb=='function'){args.pop();}else{cb=noop;}reduce(_functions,args,function(newargs,fn,cb){fn.apply(that,newargs.concat(function(err){var nextargs=slice(arguments,1);cb(err,nextargs);}));},function(err,results){cb.apply(that,[err].concat(results));});};}var compose=function(){return seq.apply(null,slice(arguments).reverse());};var _concat=Array.prototype.concat;var concatLimit=function(coll,limit,iteratee,callback){callback=callback||noop;var _iteratee=wrapAsync(iteratee);mapLimit(coll,limit,function(val,callback){_iteratee(val,function(err){if(err)return callback(err);return callback(null,slice(arguments,1));});},function(err,mapResults){var result=[];for(var i=0;i<mapResults.length;i++){if(mapResults[i]){result=_concat.apply(result,mapResults[i]);}}return callback(err,result);});};var concat=doLimit(concatLimit,Infinity);var concatSeries=doLimit(concatLimit,1);var constant=function(){var values=slice(arguments);var args=[null].concat(values);return function(){var callback=arguments[arguments.length-1];return callback.apply(this,args);};};function identity(value){return value;}function _createTester(check,getResult){return function(eachfn,arr,iteratee,cb){cb=cb||noop;var testPassed=false;var testResult;eachfn(arr,function(value,_,callback){iteratee(value,function(err,result){if(err){callback(err);}else if(check(result)&&!testResult){testPassed=true;testResult=getResult(true,value);callback(null,breakLoop);}else{callback();}});},function(err){if(err){cb(err);}else{cb(null,testPassed?testResult:getResult(false));}});};}function _findGetResult(v,x){return x;}var detect=doParallel(_createTester(identity,_findGetResult));var detectLimit=doParallelLimit(_createTester(identity,_findGetResult));var detectSeries=doLimit(detectLimit,1);function consoleFunc(name){return function(fn){var args=slice(arguments,1);args.push(function(err){var args=slice(arguments,1);if(typeof console==='object'){if(err){if(console.error){console.error(err);}}else if(console[name]){arrayEach(args,function(x){console[name](x);});}}});wrapAsync(fn).apply(null,args);};}var dir=consoleFunc('dir');function doDuring(fn,test,callback){callback=onlyOnce(callback||noop);var _fn=wrapAsync(fn);var _test=wrapAsync(test);function next(err){if(err)return callback(err);var args=slice(arguments,1);args.push(check);_test.apply(this,args);}function check(err,truth){if(err)return callback(err);if(!truth)return callback(null);_fn(next);}check(null,true);}function doWhilst(iteratee,test,callback){callback=onlyOnce(callback||noop);var _iteratee=wrapAsync(iteratee);var next=function(err){if(err)return callback(err);var args=slice(arguments,1);if(test.apply(this,args))return _iteratee(next);callback.apply(null,[null].concat(args));};_iteratee(next);}function doUntil(iteratee,test,callback){doWhilst(iteratee,function(){return!test.apply(this,arguments);},callback);}function during(test,fn,callback){callback=onlyOnce(callback||noop);var _fn=wrapAsync(fn);var _test=wrapAsync(test);function next(err){if(err)return callback(err);_test(check);}function check(err,truth){if(err)return callback(err);if(!truth)return callback(null);_fn(next);}_test(check);}function _withoutIndex(iteratee){return function(value,index,callback){return iteratee(value,callback);};}function eachLimit(coll,iteratee,callback){eachOf(coll,_withoutIndex(wrapAsync(iteratee)),callback);}function eachLimit$1(coll,limit,iteratee,callback){_eachOfLimit(limit)(coll,_withoutIndex(wrapAsync(iteratee)),callback);}var eachSeries=doLimit(eachLimit$1,1);function ensureAsync(fn){if(isAsync(fn))return fn;return initialParams(function(args,callback){var sync=true;args.push(function(){var innerArgs=arguments;if(sync){setImmediate$1(function(){callback.apply(null,innerArgs);});}else{callback.apply(null,innerArgs);}});fn.apply(this,args);sync=false;});}function notId(v){return!v;}var every=doParallel(_createTester(notId,notId));var everyLimit=doParallelLimit(_createTester(notId,notId));var everySeries=doLimit(everyLimit,1);function baseProperty(key){return function(object){return object==null?undefined:object[key];};}function filterArray(eachfn,arr,iteratee,callback){var truthValues=new Array(arr.length);eachfn(arr,function(x,index,callback){iteratee(x,function(err,v){truthValues[index]=!!v;callback(err);});},function(err){if(err)return callback(err);var results=[];for(var i=0;i<arr.length;i++){if(truthValues[i])results.push(arr[i]);}callback(null,results);});}function filterGeneric(eachfn,coll,iteratee,callback){var results=[];eachfn(coll,function(x,index,callback){iteratee(x,function(err,v){if(err){callback(err);}else{if(v){results.push({index:index,value:x});}callback();}});},function(err){if(err){callback(err);}else{callback(null,arrayMap(results.sort(function(a,b){return a.index-b.index;}),baseProperty('value')));}});}function _filter(eachfn,coll,iteratee,callback){var filter=isArrayLike(coll)?filterArray:filterGeneric;filter(eachfn,coll,wrapAsync(iteratee),callback||noop);}var filter=doParallel(_filter);var filterLimit=doParallelLimit(_filter);var filterSeries=doLimit(filterLimit,1);function forever(fn,errback){var done=onlyOnce(errback||noop);var task=wrapAsync(ensureAsync(fn));function next(err){if(err)return done(err);task(next);}next();}var groupByLimit=function(coll,limit,iteratee,callback){callback=callback||noop;var _iteratee=wrapAsync(iteratee);mapLimit(coll,limit,function(val,callback){_iteratee(val,function(err,key){if(err)return callback(err);return callback(null,{key:key,val:val});});},function(err,mapResults){var result={};var hasOwnProperty=Object.prototype.hasOwnProperty;for(var i=0;i<mapResults.length;i++){if(mapResults[i]){var key=mapResults[i].key;var val=mapResults[i].val;if(hasOwnProperty.call(result,key)){result[key].push(val);}else{result[key]=[val];}}}return callback(err,result);});};var groupBy=doLimit(groupByLimit,Infinity);var groupBySeries=doLimit(groupByLimit,1);var log=consoleFunc('log');function mapValuesLimit(obj,limit,iteratee,callback){callback=once(callback||noop);var newObj={};var _iteratee=wrapAsync(iteratee);eachOfLimit(obj,limit,function(val,key,next){_iteratee(val,key,function(err,result){if(err)return next(err);newObj[key]=result;next();});},function(err){callback(err,newObj);});}var mapValues=doLimit(mapValuesLimit,Infinity);var mapValuesSeries=doLimit(mapValuesLimit,1);function has(obj,key){return key in obj;}function memoize(fn,hasher){var memo=Object.create(null);var queues=Object.create(null);hasher=hasher||identity;var _fn=wrapAsync(fn);var memoized=initialParams(function memoized(args,callback){var key=hasher.apply(null,args);if(has(memo,key)){setImmediate$1(function(){callback.apply(null,memo[key]);});}else if(has(queues,key)){queues[key].push(callback);}else{queues[key]=[callback];_fn.apply(null,args.concat(function(){var args=slice(arguments);memo[key]=args;var q=queues[key];delete queues[key];for(var i=0,l=q.length;i<l;i++){q[i].apply(null,args);}}));}});memoized.memo=memo;memoized.unmemoized=fn;return memoized;}var _defer$1;if(hasNextTick){_defer$1=process.nextTick;}else if(hasSetImmediate){_defer$1=setImmediate;}else{_defer$1=fallback;}var nextTick=wrap(_defer$1);function _parallel(eachfn,tasks,callback){callback=callback||noop;var results=isArrayLike(tasks)?[]:{};eachfn(tasks,function(task,key,callback){wrapAsync(task)(function(err,result){if(arguments.length>2){result=slice(arguments,1);}results[key]=result;callback(err);});},function(err){callback(err,results);});}function parallelLimit(tasks,callback){_parallel(eachOf,tasks,callback);}function parallelLimit$1(tasks,limit,callback){_parallel(_eachOfLimit(limit),tasks,callback);}var queue$1=function(worker,concurrency){var _worker=wrapAsync(worker);return queue(function(items,cb){_worker(items[0],cb);},concurrency,1);};var priorityQueue=function(worker,concurrency){var q=queue$1(worker,concurrency);q.push=function(data,priority,callback){if(callback==null)callback=noop;if(typeof callback!=='function'){throw new Error('task callback must be a function');}q.started=true;if(!isArray(data)){data=[data];}if(data.length===0){return setImmediate$1(function(){q.drain();});}priority=priority||0;var nextNode=q._tasks.head;while(nextNode&&priority>=nextNode.priority){nextNode=nextNode.next;}for(var i=0,l=data.length;i<l;i++){var item={data:data[i],priority:priority,callback:callback};if(nextNode){q._tasks.insertBefore(nextNode,item);}else{q._tasks.push(item);}}setImmediate$1(q.process);};delete q.unshift;return q;};function race(tasks,callback){callback=once(callback||noop);if(!isArray(tasks))return callback(new TypeError('First argument to race must be an array of functions'));if(!tasks.length)return callback();for(var i=0,l=tasks.length;i<l;i++){wrapAsync(tasks[i])(callback);}}function reduceRight(array,memo,iteratee,callback){var reversed=slice(array).reverse();reduce(reversed,memo,iteratee,callback);}function reflect(fn){var _fn=wrapAsync(fn);return initialParams(function reflectOn(args,reflectCallback){args.push(function callback(error,cbArg){if(error){reflectCallback(null,{error:error});}else{var value;if(arguments.length<=2){value=cbArg;}else{value=slice(arguments,1);}reflectCallback(null,{value:value});}});return _fn.apply(this,args);});}function reflectAll(tasks){var results;if(isArray(tasks)){results=arrayMap(tasks,reflect);}else{results={};baseForOwn(tasks,function(task,key){results[key]=reflect.call(this,task);});}return results;}function reject$1(eachfn,arr,iteratee,callback){_filter(eachfn,arr,function(value,cb){iteratee(value,function(err,v){cb(err,!v);});},callback);}var reject=doParallel(reject$1);var rejectLimit=doParallelLimit(reject$1);var rejectSeries=doLimit(rejectLimit,1);function constant$1(value){return function(){return value;};}function retry(opts,task,callback){var DEFAULT_TIMES=5;var DEFAULT_INTERVAL=0;var options={times:DEFAULT_TIMES,intervalFunc:constant$1(DEFAULT_INTERVAL)};function parseTimes(acc,t){if(typeof t==='object'){acc.times=+t.times||DEFAULT_TIMES;acc.intervalFunc=typeof t.interval==='function'?t.interval:constant$1(+t.interval||DEFAULT_INTERVAL);acc.errorFilter=t.errorFilter;}else if(typeof t==='number'||typeof t==='string'){acc.times=+t||DEFAULT_TIMES;}else{throw new Error("Invalid arguments for async.retry");}}if(arguments.length<3&&typeof opts==='function'){callback=task||noop;task=opts;}else{parseTimes(options,opts);callback=callback||noop;}if(typeof task!=='function'){throw new Error("Invalid arguments for async.retry");}var _task=wrapAsync(task);var attempt=1;function retryAttempt(){_task(function(err){if(err&&attempt++<options.times&&(typeof options.errorFilter!='function'||options.errorFilter(err))){setTimeout(retryAttempt,options.intervalFunc(attempt));}else{callback.apply(null,arguments);}});}retryAttempt();}var retryable=function(opts,task){if(!task){task=opts;opts=null;}var _task=wrapAsync(task);return initialParams(function(args,callback){function taskFn(cb){_task.apply(null,args.concat(cb));}if(opts)retry(opts,taskFn,callback);else retry(taskFn,callback);});};function series(tasks,callback){_parallel(eachOfSeries,tasks,callback);}var some=doParallel(_createTester(Boolean,identity));var someLimit=doParallelLimit(_createTester(Boolean,identity));var someSeries=doLimit(someLimit,1);function sortBy(coll,iteratee,callback){var _iteratee=wrapAsync(iteratee);map(coll,function(x,callback){_iteratee(x,function(err,criteria){if(err)return callback(err);callback(null,{value:x,criteria:criteria});});},function(err,results){if(err)return callback(err);callback(null,arrayMap(results.sort(comparator),baseProperty('value')));});function comparator(left,right){var a=left.criteria,b=right.criteria;return a<b?-1:a>b?1:0;}}function timeout(asyncFn,milliseconds,info){var fn=wrapAsync(asyncFn);return initialParams(function(args,callback){var timedOut=false;var timer;function timeoutCallback(){var name=asyncFn.name||'anonymous';var error=new Error('Callback function "'+name+'" timed out.');error.code='ETIMEDOUT';if(info){error.info=info;}timedOut=true;callback(error);}args.push(function(){if(!timedOut){callback.apply(null,arguments);clearTimeout(timer);}});timer=setTimeout(timeoutCallback,milliseconds);fn.apply(null,args);});}var nativeCeil=Math.ceil;var nativeMax=Math.max;function baseRange(start,end,step,fromRight){var index=-1,length=nativeMax(nativeCeil((end-start)/(step||1)),0),result=Array(length);while(length--){result[fromRight?length:++index]=start;start+=step;}return result;}function timeLimit(count,limit,iteratee,callback){var _iteratee=wrapAsync(iteratee);mapLimit(baseRange(0,count,1),limit,_iteratee,callback);}var times=doLimit(timeLimit,Infinity);var timesSeries=doLimit(timeLimit,1);function transform(coll,accumulator,iteratee,callback){if(arguments.length<=3){callback=iteratee;iteratee=accumulator;accumulator=isArray(coll)?[]:{};}callback=once(callback||noop);var _iteratee=wrapAsync(iteratee);eachOf(coll,function(v,k,cb){_iteratee(accumulator,v,k,cb);},function(err){callback(err,accumulator);});}function tryEach(tasks,callback){var error=null;var result;callback=callback||noop;eachSeries(tasks,function(task,callback){wrapAsync(task)(function(err,res){if(arguments.length>2){result=slice(arguments,1);}else{result=res;}error=err;callback(!err);});},function(){callback(error,result);});}function unmemoize(fn){return function(){return(fn.unmemoized||fn).apply(null,arguments);};}function whilst(test,iteratee,callback){callback=onlyOnce(callback||noop);var _iteratee=wrapAsync(iteratee);if(!test())return callback(null);var next=function(err){if(err)return callback(err);if(test())return _iteratee(next);var args=slice(arguments,1);callback.apply(null,[null].concat(args));};_iteratee(next);}function until(test,iteratee,callback){whilst(function(){return!test.apply(this,arguments);},iteratee,callback);}var waterfall=function(tasks,callback){callback=once(callback||noop);if(!isArray(tasks))return callback(new Error('First argument to waterfall must be an array of functions'));if(!tasks.length)return callback();var taskIndex=0;function nextTask(args){var task=wrapAsync(tasks[taskIndex++]);args.push(onlyOnce(next));task.apply(null,args);}function next(err){if(err||taskIndex===tasks.length){return callback.apply(null,arguments);}nextTask(slice(arguments,1));}nextTask([]);};var index={apply:apply,applyEach:applyEach,applyEachSeries:applyEachSeries,asyncify:asyncify,auto:auto,autoInject:autoInject,cargo:cargo,compose:compose,concat:concat,concatLimit:concatLimit,concatSeries:concatSeries,constant:constant,detect:detect,detectLimit:detectLimit,detectSeries:detectSeries,dir:dir,doDuring:doDuring,doUntil:doUntil,doWhilst:doWhilst,during:during,each:eachLimit,eachLimit:eachLimit$1,eachOf:eachOf,eachOfLimit:eachOfLimit,eachOfSeries:eachOfSeries,eachSeries:eachSeries,ensureAsync:ensureAsync,every:every,everyLimit:everyLimit,everySeries:everySeries,filter:filter,filterLimit:filterLimit,filterSeries:filterSeries,forever:forever,groupBy:groupBy,groupByLimit:groupByLimit,groupBySeries:groupBySeries,log:log,map:map,mapLimit:mapLimit,mapSeries:mapSeries,mapValues:mapValues,mapValuesLimit:mapValuesLimit,mapValuesSeries:mapValuesSeries,memoize:memoize,nextTick:nextTick,parallel:parallelLimit,parallelLimit:parallelLimit$1,priorityQueue:priorityQueue,queue:queue$1,race:race,reduce:reduce,reduceRight:reduceRight,reflect:reflect,reflectAll:reflectAll,reject:reject,rejectLimit:rejectLimit,rejectSeries:rejectSeries,retry:retry,retryable:retryable,seq:seq,series:series,setImmediate:setImmediate$1,some:some,someLimit:someLimit,someSeries:someSeries,sortBy:sortBy,timeout:timeout,times:times,timesLimit:timeLimit,timesSeries:timesSeries,transform:transform,tryEach:tryEach,unmemoize:unmemoize,until:until,waterfall:waterfall,whilst:whilst,all:every,allLimit:everyLimit,allSeries:everySeries,any:some,anyLimit:someLimit,anySeries:someSeries,find:detect,findLimit:detectLimit,findSeries:detectSeries,forEach:eachLimit,forEachSeries:eachSeries,forEachLimit:eachLimit$1,forEachOf:eachOf,forEachOfSeries:eachOfSeries,forEachOfLimit:eachOfLimit,inject:reduce,foldl:reduce,foldr:reduceRight,select:filter,selectLimit:filterLimit,selectSeries:filterSeries,wrapSync:asyncify};exports['default']=index;exports.apply=apply;exports.applyEach=applyEach;exports.applyEachSeries=applyEachSeries;exports.asyncify=asyncify;exports.auto=auto;exports.autoInject=autoInject;exports.cargo=cargo;exports.compose=compose;exports.concat=concat;exports.concatLimit=concatLimit;exports.concatSeries=concatSeries;exports.constant=constant;exports.detect=detect;exports.detectLimit=detectLimit;exports.detectSeries=detectSeries;exports.dir=dir;exports.doDuring=doDuring;exports.doUntil=doUntil;exports.doWhilst=doWhilst;exports.during=during;exports.each=eachLimit;exports.eachLimit=eachLimit$1;exports.eachOf=eachOf;exports.eachOfLimit=eachOfLimit;exports.eachOfSeries=eachOfSeries;exports.eachSeries=eachSeries;exports.ensureAsync=ensureAsync;exports.every=every;exports.everyLimit=everyLimit;exports.everySeries=everySeries;exports.filter=filter;exports.filterLimit=filterLimit;exports.filterSeries=filterSeries;exports.forever=forever;exports.groupBy=groupBy;exports.groupByLimit=groupByLimit;exports.groupBySeries=groupBySeries;exports.log=log;exports.map=map;exports.mapLimit=mapLimit;exports.mapSeries=mapSeries;exports.mapValues=mapValues;exports.mapValuesLimit=mapValuesLimit;exports.mapValuesSeries=mapValuesSeries;exports.memoize=memoize;exports.nextTick=nextTick;exports.parallel=parallelLimit;exports.parallelLimit=parallelLimit$1;exports.priorityQueue=priorityQueue;exports.queue=queue$1;exports.race=race;exports.reduce=reduce;exports.reduceRight=reduceRight;exports.reflect=reflect;exports.reflectAll=reflectAll;exports.reject=reject;exports.rejectLimit=rejectLimit;exports.rejectSeries=rejectSeries;exports.retry=retry;exports.retryable=retryable;exports.seq=seq;exports.series=series;exports.setImmediate=setImmediate$1;exports.some=some;exports.someLimit=someLimit;exports.someSeries=someSeries;exports.sortBy=sortBy;exports.timeout=timeout;exports.times=times;exports.timesLimit=timeLimit;exports.timesSeries=timesSeries;exports.transform=transform;exports.tryEach=tryEach;exports.unmemoize=unmemoize;exports.until=until;exports.waterfall=waterfall;exports.whilst=whilst;exports.all=every;exports.allLimit=everyLimit;exports.allSeries=everySeries;exports.any=some;exports.anyLimit=someLimit;exports.anySeries=someSeries;exports.find=detect;exports.findLimit=detectLimit;exports.findSeries=detectSeries;exports.forEach=eachLimit;exports.forEachSeries=eachSeries;exports.forEachLimit=eachLimit$1;exports.forEachOf=eachOf;exports.forEachOfSeries=eachOfSeries;exports.forEachOfLimit=eachOfLimit;exports.inject=reduce;exports.foldl=reduce;exports.foldr=reduceRight;exports.select=filter;exports.selectLimit=filterLimit;exports.selectSeries=filterSeries;exports.wrapSync=asyncify;Object.defineProperty(exports,'__esModule',{value:true});});},6378:function(module){module.exports={"genesisGasLimit":{"v":5000,"d":"Gas limit of the Genesis block."},"genesisDifficulty":{"v":17179869184,"d":"Difficulty of the Genesis block."},"genesisNonce":{"v":"0x0000000000000042","d":"the geneis nonce"},"genesisExtraData":{"v":"0x11bbe8db4e347b4e8c937c1c8370e4b5ed33adb3db69cbdb7a38e1e50b1b82fa","d":"extra data "},"genesisHash":{"v":"0xd4e56740f876aef8c010b86a40d5f56745a118d0906a34e69aec8c0db1cb8fa3","d":"genesis hash"},"genesisStateRoot":{"v":"0xd7f8974fb5ac78d9ac099b9ad5018bedc2ce0a72dad1827a1709da30580f0544","d":"the genesis state root"},"minGasLimit":{"v":5000,"d":"Minimum the gas limit may ever be."},"gasLimitBoundDivisor":{"v":1024,"d":"The bound divisor of the gas limit, used in update calculations."},"minimumDifficulty":{"v":131072,"d":"The minimum that the difficulty may ever be."},"difficultyBoundDivisor":{"v":2048,"d":"The bound divisor of the difficulty, used in the update calculations."},"durationLimit":{"v":13,"d":"The decision boundary on the blocktime duration used to determine whether difficulty should go up or not."},"maximumExtraDataSize":{"v":32,"d":"Maximum size extra data may be after Genesis."},"epochDuration":{"v":30000,"d":"Duration between proof-of-work epochs."},"stackLimit":{"v":1024,"d":"Maximum size of VM stack allowed."},"callCreateDepth":{"v":1024,"d":"Maximum depth of call/create stack."},"tierStepGas":{"v":[0,2,3,5,8,10,20],"d":"Once per operation, for a selection of them."},"expGas":{"v":10,"d":"Once per EXP instuction."},"expByteGas":{"v":10,"d":"Times ceil(log256(exponent)) for the EXP instruction."},"sha3Gas":{"v":30,"d":"Once per SHA3 operation."},"sha3WordGas":{"v":6,"d":"Once per word of the SHA3 operation's data."},"sloadGas":{"v":50,"d":"Once per SLOAD operation."},"sstoreSetGas":{"v":20000,"d":"Once per SSTORE operation if the zeroness changes from zero."},"sstoreResetGas":{"v":5000,"d":"Once per SSTORE operation if the zeroness does not change from zero."},"sstoreRefundGas":{"v":15000,"d":"Once per SSTORE operation if the zeroness changes to zero."},"jumpdestGas":{"v":1,"d":"Refunded gas, once per SSTORE operation if the zeroness changes to zero."},"logGas":{"v":375,"d":"Per LOG* operation."},"logDataGas":{"v":8,"d":"Per byte in a LOG* operation's data."},"logTopicGas":{"v":375,"d":"Multiplied by the * of the LOG*, per LOG transaction. e.g. LOG0 incurs 0 * c_txLogTopicGas, LOG4 incurs 4 * c_txLogTopicGas."},"createGas":{"v":32000,"d":"Once per CREATE operation & contract-creation transaction."},"callGas":{"v":40,"d":"Once per CALL operation & message call transaction."},"callStipend":{"v":2300,"d":"Free gas given at beginning of call."},"callValueTransferGas":{"v":9000,"d":"Paid for CALL when the value transfor is non-zero."},"callNewAccountGas":{"v":25000,"d":"Paid for CALL when the destination address didn't exist prior."},"suicideRefundGas":{"v":24000,"d":"Refunded following a suicide operation."},"memoryGas":{"v":3,"d":"Times the address of the (highest referenced byte in memory + 1). NOTE: referencing happens on read, write and in instructions such as RETURN and CALL."},"quadCoeffDiv":{"v":512,"d":"Divisor for the quadratic particle of the memory cost equation."},"createDataGas":{"v":200,"d":""},"txGas":{"v":21000,"d":"Per transaction. NOTE: Not payable on data of calls between transactions."},"txCreation":{"v":32000,"d":"the cost of creating a contract via tx"},"txDataZeroGas":{"v":4,"d":"Per byte of data attached to a transaction that equals zero. NOTE: Not payable on data of calls between transactions."},"txDataNonZeroGas":{"v":68,"d":"Per byte of data attached to a transaction that is not equal to zero. NOTE: Not payable on data of calls between transactions."},"copyGas":{"v":3,"d":"Multiplied by the number of 32-byte words that are copied (round up) for any *COPY operation and added."},"ecrecoverGas":{"v":3000,"d":""},"sha256Gas":{"v":60,"d":""},"sha256WordGas":{"v":12,"d":""},"ripemd160Gas":{"v":600,"d":""},"ripemd160WordGas":{"v":120,"d":""},"identityGas":{"v":15,"d":""},"identityWordGas":{"v":3,"d":""},"minerReward":{"v":"5000000000000000000","d":"the amount a miner get rewarded for mining a block"},"ommerReward":{"v":"625000000000000000","d":"The amount of wei a miner of an uncle block gets for being inculded in the blockchain"},"niblingReward":{"v":"156250000000000000","d":"the amount a miner gets for inculding a uncle"},"homeSteadForkNumber":{"v":1150000,"d":"the block that the Homestead fork started at"},"homesteadRepriceForkNumber":{"v":2463000,"d":"the block that the Homestead Reprice (EIP150) fork started at"},"timebombPeriod":{"v":100000,"d":"Exponential difficulty timebomb period"},"freeBlockPeriod":{"v":2}};},6379:function(module,__unusedexports,__webpack_require__){"use strict";var _=__webpack_require__(6064);function format(message,args){return message.replace('{0}',args[0]).replace('{1}',args[1]).replace('{2}',args[2]);}var traverseNode=function(parent,errorDefinition){var NodeError=function(){if(_.isString(errorDefinition.message)){this.message=format(errorDefinition.message,arguments);}else if(_.isFunction(errorDefinition.message)){this.message=errorDefinition.message.apply(null,arguments);}else{throw new Error('Invalid error definition for '+errorDefinition.name);}this.stack=this.message+'\n'+new Error().stack;};NodeError.prototype=Object.create(parent.prototype);NodeError.prototype.name=parent.prototype.name+errorDefinition.name;parent[errorDefinition.name]=NodeError;if(errorDefinition.errors){childDefinitions(NodeError,errorDefinition.errors);}return NodeError;};var childDefinitions=function(parent,childDefinitions){_.each(childDefinitions,function(childDefinition){traverseNode(parent,childDefinition);});};var traverseRoot=function(parent,errorsDefinition){childDefinitions(parent,errorsDefinition);return parent;};var bitcore={};bitcore.Error=function(){this.message='Internal error';this.stack=this.message+'\n'+new Error().stack;};bitcore.Error.prototype=Object.create(Error.prototype);bitcore.Error.prototype.name='bitcore.Error';var data=__webpack_require__(4075);traverseRoot(bitcore.Error,data);module.exports=bitcore.Error;module.exports.extend=function(spec){return traverseNode(bitcore.Error,spec);};},6382:function(module,exports,__webpack_require__){module=__webpack_require__.nmd(module);var LARGE_ARRAY_SIZE=200;var FUNC_ERROR_TEXT='Expected a function';var HASH_UNDEFINED='__lodash_hash_undefined__';var UNORDERED_COMPARE_FLAG=1,PARTIAL_COMPARE_FLAG=2;var INFINITY=1/0,MAX_SAFE_INTEGER=9007199254740991;var argsTag='[object Arguments]',arrayTag='[object Array]',boolTag='[object Boolean]',dateTag='[object Date]',errorTag='[object Error]',funcTag='[object Function]',genTag='[object GeneratorFunction]',mapTag='[object Map]',numberTag='[object Number]',objectTag='[object Object]',promiseTag='[object Promise]',regexpTag='[object RegExp]',setTag='[object Set]',stringTag='[object String]',symbolTag='[object Symbol]',weakMapTag='[object WeakMap]';var arrayBufferTag='[object ArrayBuffer]',dataViewTag='[object DataView]',float32Tag='[object Float32Array]',float64Tag='[object Float64Array]',int8Tag='[object Int8Array]',int16Tag='[object Int16Array]',int32Tag='[object Int32Array]',uint8Tag='[object Uint8Array]',uint8ClampedTag='[object Uint8ClampedArray]',uint16Tag='[object Uint16Array]',uint32Tag='[object Uint32Array]';var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/,reLeadingDot=/^\./,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;var reRegExpChar=/[\\^$.*+?()[\]{}|]/g;var reEscapeChar=/\\(\\)?/g;var reIsHostCtor=/^\[object .+?Constructor\]$/;var reIsUint=/^(?:0|[1-9]\d*)$/;var typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=true;typedArrayTags[argsTag]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=false;var freeGlobal=typeof global=='object'&&global&&global.Object===Object&&global;var freeSelf=typeof self=='object'&&self&&self.Object===Object&&self;var root=freeGlobal||freeSelf||Function('return this')();var freeExports=true&&exports&&!exports.nodeType&&exports;var freeModule=freeExports&&"object"=='object'&&module&&!module.nodeType&&module;var moduleExports=freeModule&&freeModule.exports===freeExports;var freeProcess=moduleExports&&freeGlobal.process;var nodeUtil=function(){try{return freeProcess&&freeProcess.binding('util');}catch(e){}}();var nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray;function arrayFilter(array,predicate){var index=-1,length=array?array.length:0,resIndex=0,result=[];while(++index<length){var value=array[index];if(predicate(value,index,array)){result[resIndex++]=value;}}return result;}function arraySome(array,predicate){var index=-1,length=array?array.length:0;while(++index<length){if(predicate(array[index],index,array)){return true;}}return false;}function baseProperty(key){return function(object){return object==null?undefined:object[key];};}function baseTimes(n,iteratee){var index=-1,result=Array(n);while(++index<n){result[index]=iteratee(index);}return result;}function baseUnary(func){return function(value){return func(value);};}function getValue(object,key){return object==null?undefined:object[key];}function isHostObject(value){var result=false;if(value!=null&&typeof value.toString!='function'){try{result=!!(value+'');}catch(e){}}return result;}function mapToArray(map){var index=-1,result=Array(map.size);map.forEach(function(value,key){result[++index]=[key,value];});return result;}function overArg(func,transform){return function(arg){return func(transform(arg));};}function setToArray(set){var index=-1,result=Array(set.size);set.forEach(function(value){result[++index]=value;});return result;}var arrayProto=Array.prototype,funcProto=Function.prototype,objectProto=Object.prototype;var coreJsData=root['__core-js_shared__'];var maskSrcKey=function(){var uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||'');return uid?'Symbol(src)_1.'+uid:'';}();var funcToString=funcProto.toString;var hasOwnProperty=objectProto.hasOwnProperty;var objectToString=objectProto.toString;var reIsNative=RegExp('^'+funcToString.call(hasOwnProperty).replace(reRegExpChar,'\\$&').replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,'$1.*?')+'$');var Symbol=root.Symbol,Uint8Array=root.Uint8Array,propertyIsEnumerable=objectProto.propertyIsEnumerable,splice=arrayProto.splice;var nativeKeys=overArg(Object.keys,Object);var DataView=getNative(root,'DataView'),Map=getNative(root,'Map'),Promise=getNative(root,'Promise'),Set=getNative(root,'Set'),WeakMap=getNative(root,'WeakMap'),nativeCreate=getNative(Object,'create');var dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map),promiseCtorString=toSource(Promise),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap);var symbolProto=Symbol?Symbol.prototype:undefined,symbolValueOf=symbolProto?symbolProto.valueOf:undefined,symbolToString=symbolProto?symbolProto.toString:undefined;function Hash(entries){var index=-1,length=entries?entries.length:0;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1]);}}function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{};}function hashDelete(key){return this.has(key)&&delete this.__data__[key];}function hashGet(key){var data=this.__data__;if(nativeCreate){var result=data[key];return result===HASH_UNDEFINED?undefined:result;}return hasOwnProperty.call(data,key)?data[key]:undefined;}function hashHas(key){var data=this.__data__;return nativeCreate?data[key]!==undefined:hasOwnProperty.call(data,key);}function hashSet(key,value){var data=this.__data__;data[key]=nativeCreate&&value===undefined?HASH_UNDEFINED:value;return this;}Hash.prototype.clear=hashClear;Hash.prototype['delete']=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;function ListCache(entries){var index=-1,length=entries?entries.length:0;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1]);}}function listCacheClear(){this.__data__=[];}function listCacheDelete(key){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){return false;}var lastIndex=data.length-1;if(index==lastIndex){data.pop();}else{splice.call(data,index,1);}return true;}function listCacheGet(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?undefined:data[index][1];}function listCacheHas(key){return assocIndexOf(this.__data__,key)>-1;}function listCacheSet(key,value){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){data.push([key,value]);}else{data[index][1]=value;}return this;}ListCache.prototype.clear=listCacheClear;ListCache.prototype['delete']=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;function MapCache(entries){var index=-1,length=entries?entries.length:0;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1]);}}function mapCacheClear(){this.__data__={'hash':new Hash(),'map':new(Map||ListCache)(),'string':new Hash()};}function mapCacheDelete(key){return getMapData(this,key)['delete'](key);}function mapCacheGet(key){return getMapData(this,key).get(key);}function mapCacheHas(key){return getMapData(this,key).has(key);}function mapCacheSet(key,value){getMapData(this,key).set(key,value);return this;}MapCache.prototype.clear=mapCacheClear;MapCache.prototype['delete']=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;function SetCache(values){var index=-1,length=values?values.length:0;this.__data__=new MapCache();while(++index<length){this.add(values[index]);}}function setCacheAdd(value){this.__data__.set(value,HASH_UNDEFINED);return this;}function setCacheHas(value){return this.__data__.has(value);}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd;SetCache.prototype.has=setCacheHas;function Stack(entries){this.__data__=new ListCache(entries);}function stackClear(){this.__data__=new ListCache();}function stackDelete(key){return this.__data__['delete'](key);}function stackGet(key){return this.__data__.get(key);}function stackHas(key){return this.__data__.has(key);}function stackSet(key,value){var cache=this.__data__;if(cache instanceof ListCache){var pairs=cache.__data__;if(!Map||pairs.length<LARGE_ARRAY_SIZE-1){pairs.push([key,value]);return this;}cache=this.__data__=new MapCache(pairs);}cache.set(key,value);return this;}Stack.prototype.clear=stackClear;Stack.prototype['delete']=stackDelete;Stack.prototype.get=stackGet;Stack.prototype.has=stackHas;Stack.prototype.set=stackSet;function arrayLikeKeys(value,inherited){var result=isArray(value)||isArguments(value)?baseTimes(value.length,String):[];var length=result.length,skipIndexes=!!length;for(var key in value){if((inherited||hasOwnProperty.call(value,key))&&!(skipIndexes&&(key=='length'||isIndex(key,length)))){result.push(key);}}return result;}function assocIndexOf(array,key){var length=array.length;while(length--){if(eq(array[length][0],key)){return length;}}return-1;}var baseEach=createBaseEach(baseForOwn);function baseFilter(collection,predicate){var result=[];baseEach(collection,function(value,index,collection){if(predicate(value,index,collection)){result.push(value);}});return result;}var baseFor=createBaseFor();function baseForOwn(object,iteratee){return object&&baseFor(object,iteratee,keys);}function baseGet(object,path){path=isKey(path,object)?[path]:castPath(path);var index=0,length=path.length;while(object!=null&&index<length){object=object[toKey(path[index++])];}return index&&index==length?object:undefined;}function baseGetTag(value){return objectToString.call(value);}function baseHasIn(object,key){return object!=null&&key in Object(object);}function baseIsEqual(value,other,customizer,bitmask,stack){if(value===other){return true;}if(value==null||other==null||!isObject(value)&&!isObjectLike(other)){return value!==value&&other!==other;}return baseIsEqualDeep(value,other,baseIsEqual,customizer,bitmask,stack);}function baseIsEqualDeep(object,other,equalFunc,customizer,bitmask,stack){var objIsArr=isArray(object),othIsArr=isArray(other),objTag=arrayTag,othTag=arrayTag;if(!objIsArr){objTag=getTag(object);objTag=objTag==argsTag?objectTag:objTag;}if(!othIsArr){othTag=getTag(other);othTag=othTag==argsTag?objectTag:othTag;}var objIsObj=objTag==objectTag&&!isHostObject(object),othIsObj=othTag==objectTag&&!isHostObject(other),isSameTag=objTag==othTag;if(isSameTag&&!objIsObj){stack||(stack=new Stack());return objIsArr||isTypedArray(object)?equalArrays(object,other,equalFunc,customizer,bitmask,stack):equalByTag(object,other,objTag,equalFunc,customizer,bitmask,stack);}if(!(bitmask&PARTIAL_COMPARE_FLAG)){var objIsWrapped=objIsObj&&hasOwnProperty.call(object,'__wrapped__'),othIsWrapped=othIsObj&&hasOwnProperty.call(other,'__wrapped__');if(objIsWrapped||othIsWrapped){var objUnwrapped=objIsWrapped?object.value():object,othUnwrapped=othIsWrapped?other.value():other;stack||(stack=new Stack());return equalFunc(objUnwrapped,othUnwrapped,customizer,bitmask,stack);}}if(!isSameTag){return false;}stack||(stack=new Stack());return equalObjects(object,other,equalFunc,customizer,bitmask,stack);}function baseIsMatch(object,source,matchData,customizer){var index=matchData.length,length=index,noCustomizer=!customizer;if(object==null){return!length;}object=Object(object);while(index--){var data=matchData[index];if(noCustomizer&&data[2]?data[1]!==object[data[0]]:!(data[0]in object)){return false;}}while(++index<length){data=matchData[index];var key=data[0],objValue=object[key],srcValue=data[1];if(noCustomizer&&data[2]){if(objValue===undefined&&!(key in object)){return false;}}else{var stack=new Stack();if(customizer){var result=customizer(objValue,srcValue,key,object,source,stack);}if(!(result===undefined?baseIsEqual(srcValue,objValue,customizer,UNORDERED_COMPARE_FLAG|PARTIAL_COMPARE_FLAG,stack):result)){return false;}}}return true;}function baseIsNative(value){if(!isObject(value)||isMasked(value)){return false;}var pattern=isFunction(value)||isHostObject(value)?reIsNative:reIsHostCtor;return pattern.test(toSource(value));}function baseIsTypedArray(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[objectToString.call(value)];}function baseIteratee(value){if(typeof value=='function'){return value;}if(value==null){return identity;}if(typeof value=='object'){return isArray(value)?baseMatchesProperty(value[0],value[1]):baseMatches(value);}return property(value);}function baseKeys(object){if(!isPrototype(object)){return nativeKeys(object);}var result=[];for(var key in Object(object)){if(hasOwnProperty.call(object,key)&&key!='constructor'){result.push(key);}}return result;}function baseMatches(source){var matchData=getMatchData(source);if(matchData.length==1&&matchData[0][2]){return matchesStrictComparable(matchData[0][0],matchData[0][1]);}return function(object){return object===source||baseIsMatch(object,source,matchData);};}function baseMatchesProperty(path,srcValue){if(isKey(path)&&isStrictComparable(srcValue)){return matchesStrictComparable(toKey(path),srcValue);}return function(object){var objValue=get(object,path);return objValue===undefined&&objValue===srcValue?hasIn(object,path):baseIsEqual(srcValue,objValue,undefined,UNORDERED_COMPARE_FLAG|PARTIAL_COMPARE_FLAG);};}function basePropertyDeep(path){return function(object){return baseGet(object,path);};}function baseToString(value){if(typeof value=='string'){return value;}if(isSymbol(value)){return symbolToString?symbolToString.call(value):'';}var result=value+'';return result=='0'&&1/value==-INFINITY?'-0':result;}function castPath(value){return isArray(value)?value:stringToPath(value);}function createBaseEach(eachFunc,fromRight){return function(collection,iteratee){if(collection==null){return collection;}if(!isArrayLike(collection)){return eachFunc(collection,iteratee);}var length=collection.length,index=fromRight?length:-1,iterable=Object(collection);while(fromRight?index--:++index<length){if(iteratee(iterable[index],index,iterable)===false){break;}}return collection;};}function createBaseFor(fromRight){return function(object,iteratee,keysFunc){var index=-1,iterable=Object(object),props=keysFunc(object),length=props.length;while(length--){var key=props[fromRight?length:++index];if(iteratee(iterable[key],key,iterable)===false){break;}}return object;};}function equalArrays(array,other,equalFunc,customizer,bitmask,stack){var isPartial=bitmask&PARTIAL_COMPARE_FLAG,arrLength=array.length,othLength=other.length;if(arrLength!=othLength&&!(isPartial&&othLength>arrLength)){return false;}var stacked=stack.get(array);if(stacked&&stack.get(other)){return stacked==other;}var index=-1,result=true,seen=bitmask&UNORDERED_COMPARE_FLAG?new SetCache():undefined;stack.set(array,other);stack.set(other,array);while(++index<arrLength){var arrValue=array[index],othValue=other[index];if(customizer){var compared=isPartial?customizer(othValue,arrValue,index,other,array,stack):customizer(arrValue,othValue,index,array,other,stack);}if(compared!==undefined){if(compared){continue;}result=false;break;}if(seen){if(!arraySome(other,function(othValue,othIndex){if(!seen.has(othIndex)&&(arrValue===othValue||equalFunc(arrValue,othValue,customizer,bitmask,stack))){return seen.add(othIndex);}})){result=false;break;}}else if(!(arrValue===othValue||equalFunc(arrValue,othValue,customizer,bitmask,stack))){result=false;break;}}stack['delete'](array);stack['delete'](other);return result;}function equalByTag(object,other,tag,equalFunc,customizer,bitmask,stack){switch(tag){case dataViewTag:if(object.byteLength!=other.byteLength||object.byteOffset!=other.byteOffset){return false;}object=object.buffer;other=other.buffer;case arrayBufferTag:if(object.byteLength!=other.byteLength||!equalFunc(new Uint8Array(object),new Uint8Array(other))){return false;}return true;case boolTag:case dateTag:case numberTag:return eq(+object,+other);case errorTag:return object.name==other.name&&object.message==other.message;case regexpTag:case stringTag:return object==other+'';case mapTag:var convert=mapToArray;case setTag:var isPartial=bitmask&PARTIAL_COMPARE_FLAG;convert||(convert=setToArray);if(object.size!=other.size&&!isPartial){return false;}var stacked=stack.get(object);if(stacked){return stacked==other;}bitmask|=UNORDERED_COMPARE_FLAG;stack.set(object,other);var result=equalArrays(convert(object),convert(other),equalFunc,customizer,bitmask,stack);stack['delete'](object);return result;case symbolTag:if(symbolValueOf){return symbolValueOf.call(object)==symbolValueOf.call(other);}}return false;}function equalObjects(object,other,equalFunc,customizer,bitmask,stack){var isPartial=bitmask&PARTIAL_COMPARE_FLAG,objProps=keys(object),objLength=objProps.length,othProps=keys(other),othLength=othProps.length;if(objLength!=othLength&&!isPartial){return false;}var index=objLength;while(index--){var key=objProps[index];if(!(isPartial?key in other:hasOwnProperty.call(other,key))){return false;}}var stacked=stack.get(object);if(stacked&&stack.get(other)){return stacked==other;}var result=true;stack.set(object,other);stack.set(other,object);var skipCtor=isPartial;while(++index<objLength){key=objProps[index];var objValue=object[key],othValue=other[key];if(customizer){var compared=isPartial?customizer(othValue,objValue,key,other,object,stack):customizer(objValue,othValue,key,object,other,stack);}if(!(compared===undefined?objValue===othValue||equalFunc(objValue,othValue,customizer,bitmask,stack):compared)){result=false;break;}skipCtor||(skipCtor=key=='constructor');}if(result&&!skipCtor){var objCtor=object.constructor,othCtor=other.constructor;if(objCtor!=othCtor&&'constructor'in object&&'constructor'in other&&!(typeof objCtor=='function'&&objCtor instanceof objCtor&&typeof othCtor=='function'&&othCtor instanceof othCtor)){result=false;}}stack['delete'](object);stack['delete'](other);return result;}function getMapData(map,key){var data=map.__data__;return isKeyable(key)?data[typeof key=='string'?'string':'hash']:data.map;}function getMatchData(object){var result=keys(object),length=result.length;while(length--){var key=result[length],value=object[key];result[length]=[key,value,isStrictComparable(value)];}return result;}function getNative(object,key){var value=getValue(object,key);return baseIsNative(value)?value:undefined;}var getTag=baseGetTag;if(DataView&&getTag(new DataView(new ArrayBuffer(1)))!=dataViewTag||Map&&getTag(new Map())!=mapTag||Promise&&getTag(Promise.resolve())!=promiseTag||Set&&getTag(new Set())!=setTag||WeakMap&&getTag(new WeakMap())!=weakMapTag){getTag=function(value){var result=objectToString.call(value),Ctor=result==objectTag?value.constructor:undefined,ctorString=Ctor?toSource(Ctor):undefined;if(ctorString){switch(ctorString){case dataViewCtorString:return dataViewTag;case mapCtorString:return mapTag;case promiseCtorString:return promiseTag;case setCtorString:return setTag;case weakMapCtorString:return weakMapTag;}}return result;};}function hasPath(object,path,hasFunc){path=isKey(path,object)?[path]:castPath(path);var result,index=-1,length=path.length;while(++index<length){var key=toKey(path[index]);if(!(result=object!=null&&hasFunc(object,key))){break;}object=object[key];}if(result){return result;}var length=object?object.length:0;return!!length&&isLength(length)&&isIndex(key,length)&&(isArray(object)||isArguments(object));}function isIndex(value,length){length=length==null?MAX_SAFE_INTEGER:length;return!!length&&(typeof value=='number'||reIsUint.test(value))&&value>-1&&value%1==0&&value<length;}function isKey(value,object){if(isArray(value)){return false;}var type=typeof value;if(type=='number'||type=='symbol'||type=='boolean'||value==null||isSymbol(value)){return true;}return reIsPlainProp.test(value)||!reIsDeepProp.test(value)||object!=null&&value in Object(object);}function isKeyable(value){var type=typeof value;return type=='string'||type=='number'||type=='symbol'||type=='boolean'?value!=='__proto__':value===null;}function isMasked(func){return!!maskSrcKey&&maskSrcKey in func;}function isPrototype(value){var Ctor=value&&value.constructor,proto=typeof Ctor=='function'&&Ctor.prototype||objectProto;return value===proto;}function isStrictComparable(value){return value===value&&!isObject(value);}function matchesStrictComparable(key,srcValue){return function(object){if(object==null){return false;}return object[key]===srcValue&&(srcValue!==undefined||key in Object(object));};}var stringToPath=memoize(function(string){string=toString(string);var result=[];if(reLeadingDot.test(string)){result.push('');}string.replace(rePropName,function(match,number,quote,string){result.push(quote?string.replace(reEscapeChar,'$1'):number||match);});return result;});function toKey(value){if(typeof value=='string'||isSymbol(value)){return value;}var result=value+'';return result=='0'&&1/value==-INFINITY?'-0':result;}function toSource(func){if(func!=null){try{return funcToString.call(func);}catch(e){}try{return func+'';}catch(e){}}return'';}function filter(collection,predicate){var func=isArray(collection)?arrayFilter:baseFilter;return func(collection,baseIteratee(predicate,3));}function memoize(func,resolver){if(typeof func!='function'||resolver&&typeof resolver!='function'){throw new TypeError(FUNC_ERROR_TEXT);}var memoized=function(){var args=arguments,key=resolver?resolver.apply(this,args):args[0],cache=memoized.cache;if(cache.has(key)){return cache.get(key);}var result=func.apply(this,args);memoized.cache=cache.set(key,result);return result;};memoized.cache=new(memoize.Cache||MapCache)();return memoized;}memoize.Cache=MapCache;function eq(value,other){return value===other||value!==value&&other!==other;}function isArguments(value){return isArrayLikeObject(value)&&hasOwnProperty.call(value,'callee')&&(!propertyIsEnumerable.call(value,'callee')||objectToString.call(value)==argsTag);}var isArray=Array.isArray;function isArrayLike(value){return value!=null&&isLength(value.length)&&!isFunction(value);}function isArrayLikeObject(value){return isObjectLike(value)&&isArrayLike(value);}function isFunction(value){var tag=isObject(value)?objectToString.call(value):'';return tag==funcTag||tag==genTag;}function isLength(value){return typeof value=='number'&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER;}function isObject(value){var type=typeof value;return!!value&&(type=='object'||type=='function');}function isObjectLike(value){return!!value&&typeof value=='object';}function isSymbol(value){return typeof value=='symbol'||isObjectLike(value)&&objectToString.call(value)==symbolTag;}var isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray;function toString(value){return value==null?'':baseToString(value);}function get(object,path,defaultValue){var result=object==null?undefined:baseGet(object,path);return result===undefined?defaultValue:result;}function hasIn(object,path){return object!=null&&hasPath(object,path,baseHasIn);}function keys(object){return isArrayLike(object)?arrayLikeKeys(object):baseKeys(object);}function identity(value){return value;}function property(path){return isKey(path)?baseProperty(toKey(path)):basePropertyDeep(path);}module.exports=filter;},6393:function(__unusedmodule,exports){"use strict";const internals={};exports.errors={root:'value',key:'"{{!label}}" ',messages:{wrapArrays:true},any:{unknown:'is not allowed',invalid:'contains an invalid value',empty:'is not allowed to be empty',required:'is required',allowOnly:'must be one of {{valids}}',default:'threw an error when running default method'},alternatives:{base:'not matching any of the allowed alternatives',child:null},array:{base:'must be an array',includes:'at position {{pos}} does not match any of the allowed types',includesSingle:'single value of "{{!label}}" does not match any of the allowed types',includesOne:'at position {{pos}} fails because {{reason}}',includesOneSingle:'single value of "{{!label}}" fails because {{reason}}',includesRequiredUnknowns:'does not contain {{unknownMisses}} required value(s)',includesRequiredKnowns:'does not contain {{knownMisses}}',includesRequiredBoth:'does not contain {{knownMisses}} and {{unknownMisses}} other required value(s)',excludes:'at position {{pos}} contains an excluded value',excludesSingle:'single value of "{{!label}}" contains an excluded value',hasKnown:'does not contain at least one required match for type "{{!patternLabel}}"',hasUnknown:'does not contain at least one required match',min:'must contain at least {{limit}} items',max:'must contain less than or equal to {{limit}} items',length:'must contain {{limit}} items',ordered:'at position {{pos}} fails because {{reason}}',orderedLength:'at position {{pos}} fails because array must contain at most {{limit}} items',ref:'references "{{ref}}" which is not a positive integer',sparse:'must not be a sparse array',unique:'position {{pos}} contains a duplicate value'},boolean:{base:'must be a boolean'},binary:{base:'must be a buffer or a string',min:'must be at least {{limit}} bytes',max:'must be less than or equal to {{limit}} bytes',length:'must be {{limit}} bytes'},date:{base:'must be a number of milliseconds or valid date string',strict:'must be a valid date',min:'must be larger than or equal to "{{limit}}"',max:'must be less than or equal to "{{limit}}"',less:'must be less than "{{limit}}"',greater:'must be greater than "{{limit}}"',isoDate:'must be a valid ISO 8601 date',timestamp:{javascript:'must be a valid timestamp or number of milliseconds',unix:'must be a valid timestamp or number of seconds'},ref:'references "{{ref}}" which is not a date'},function:{base:'must be a Function',arity:'must have an arity of {{n}}',minArity:'must have an arity greater or equal to {{n}}',maxArity:'must have an arity lesser or equal to {{n}}',ref:'must be a Joi reference',class:'must be a class'},lazy:{base:'!!schema error: lazy schema must be set',schema:'!!schema error: lazy schema function must return a schema'},object:{base:'must be an object',child:'!!child "{{!child}}" fails because {{reason}}',min:'must have at least {{limit}} children',max:'must have less than or equal to {{limit}} children',length:'must have {{limit}} children',allowUnknown:'!!"{{!child}}" is not allowed',with:'!!"{{mainWithLabel}}" missing required peer "{{peerWithLabel}}"',without:'!!"{{mainWithLabel}}" conflict with forbidden peer "{{peerWithLabel}}"',missing:'must contain at least one of {{peersWithLabels}}',xor:'contains a conflict between exclusive peers {{peersWithLabels}}',oxor:'contains a conflict between optional exclusive peers {{peersWithLabels}}',and:'contains {{presentWithLabels}} without its required peers {{missingWithLabels}}',nand:'!!"{{mainWithLabel}}" must not exist simultaneously with {{peersWithLabels}}',assert:'!!"{{ref}}" validation failed because "{{ref}}" failed to {{message}}',rename:{multiple:'cannot rename child "{{from}}" because multiple renames are disabled and another key was already renamed to "{{to}}"',override:'cannot rename child "{{from}}" because override is disabled and target "{{to}}" exists',regex:{multiple:'cannot rename children {{from}} because multiple renames are disabled and another key was already renamed to "{{to}}"',override:'cannot rename children {{from}} because override is disabled and target "{{to}}" exists'}},type:'must be an instance of "{{type}}"',schema:'must be a Joi instance'},number:{base:'must be a number',unsafe:'must be a safe number',min:'must be larger than or equal to {{limit}}',max:'must be less than or equal to {{limit}}',less:'must be less than {{limit}}',greater:'must be greater than {{limit}}',integer:'must be an integer',negative:'must be a negative number',positive:'must be a positive number',precision:'must have no more than {{limit}} decimal places',ref:'references "{{ref}}" which is not a number',multiple:'must be a multiple of {{multiple}}',port:'must be a valid port'},string:{base:'must be a string',min:'length must be at least {{limit}} characters long',max:'length must be less than or equal to {{limit}} characters long',length:'length must be {{limit}} characters long',alphanum:'must only contain alpha-numeric characters',token:'must only contain alpha-numeric and underscore characters',regex:{base:'with value "{{!value}}" fails to match the required pattern: {{pattern}}',name:'with value "{{!value}}" fails to match the {{name}} pattern',invert:{base:'with value "{{!value}}" matches the inverted pattern: {{pattern}}',name:'with value "{{!value}}" matches the inverted {{name}} pattern'}},email:'must be a valid email',uri:'must be a valid uri',uriRelativeOnly:'must be a valid relative uri',uriCustomScheme:'must be a valid uri with a scheme matching the {{scheme}} pattern',isoDate:'must be a valid ISO 8601 date',guid:'must be a valid GUID',hex:'must only contain hexadecimal characters',hexAlign:'hex decoded representation must be byte aligned',base64:'must be a valid base64 string',dataUri:'must be a valid dataUri string',hostname:'must be a valid hostname',normalize:'must be unicode normalized in the {{form}} form',lowercase:'must only contain lowercase characters',uppercase:'must only contain uppercase characters',trim:'must not have leading or trailing whitespace',creditCard:'must be a credit card',ref:'references "{{ref}}" which is not a number',ip:'must be a valid ip address with a {{cidr}} CIDR',ipVersion:'must be a valid ip address of one of the following versions {{version}} with a {{cidr}} CIDR'},symbol:{base:'must be a symbol',map:'must be one of {{map}}'}};},6402:function(module,__unusedexports,__webpack_require__){module.exports=__webpack_require__(6886);},6423:function(module,__unusedexports,__webpack_require__){"use strict";const{DAGNode,DAGLink}=__webpack_require__(7421);const CID=__webpack_require__(9339);const waterfall=__webpack_require__(4265);const DirSharded=__webpack_require__(2327);const series=__webpack_require__(7644);const log=__webpack_require__(746)('ipfs:mfs:core:utils:add-link');const UnixFS=__webpack_require__(7959);const{generatePath,updateHamtDirectory}=__webpack_require__(8690);const defaultOptions={parent:undefined,cid:undefined,name:'',size:undefined,flush:true,cidVersion:0,hashAlg:'sha2-256',codec:'dag-pb',shardSplitThreshold:1000};const addLink=(context,options,callback)=>{options=Object.assign({},defaultOptions,options);if(!options.parentCid){return callback(new Error('No parent CID passed to addLink'));}if(!CID.isCID(options.parentCid)){return callback(new Error('Invalid CID passed to addLink'));}if(!options.parent){log('Loading parent node',options.parentCid.toBaseEncodedString());return waterfall([cb=>context.ipld.get(options.parentCid,cb),(result,cb)=>cb(null,result.value),(node,cb)=>addLink(context,_objectSpread2({},options,{parent:node}),cb)],callback);}if(!options.cid){return callback(new Error('No child cid passed to addLink'));}if(!options.name){return callback(new Error('No child name passed to addLink'));}if(!CID.isCID(options.cid)){options.cid=new CID(options.cid);}if(!options.size&&options.size!==0){return callback(new Error('No child size passed to addLink'));}const meta=UnixFS.unmarshal(options.parent.data);if(meta.type==='hamt-sharded-directory'){log('Adding link to sharded directory');return addToShardedDirectory(context,options,callback);}if(options.parent.links.length>=options.shardSplitThreshold){log('Converting directory to sharded directory');return convertToShardedDirectory(context,options,callback);}log(`Adding ${options.name} to regular directory`);addToDirectory(context,options,callback);};const convertToShardedDirectory=(context,options,callback)=>{createShard(context,options.parent.links.map(link=>({name:link.name,size:link.size,multihash:link.cid.buffer})).concat({name:options.name,size:options.size,multihash:options.cid.buffer}),{},(err,result)=>{if(!err){log('Converted directory to sharded directory',result.cid.toBaseEncodedString());}callback(err,result);});};const addToDirectory=(context,options,callback)=>{waterfall([done=>DAGNode.rmLink(options.parent,options.name,done),(parent,done)=>DAGNode.addLink(parent,new DAGLink(options.name,options.size,options.cid),done),(parent,done)=>{context.ipld.put(parent,{version:options.cidVersion,format:options.codec,hashAlg:options.hashAlg,hashOnly:!options.flush},(error,cid)=>done(error,{node:parent,cid}));}],callback);};const addToShardedDirectory=(context,options,callback)=>{return waterfall([cb=>generatePath(context,options.name,options.parent,cb),({rootBucket,path},cb)=>{updateShard(context,path,{name:options.name,cid:options.cid,size:options.size},options,(err,result={})=>cb(err,_objectSpread2({rootBucket},result)));},({rootBucket,node},cb)=>updateHamtDirectory(context,node.links,rootBucket,options,cb)],callback);};const updateShard=(context,positions,child,options,callback)=>{const{bucket,prefix,node}=positions.pop();const link=node.links.find(link=>link.name.substring(0,2)===prefix&&link.name!==`${prefix}${child.name}`);return waterfall([cb=>{if(link&&link.name.length>2){log(`Converting existing file ${link.name} into sub-shard for ${child.name}`);return waterfall([done=>createShard(context,[{name:link.name.substring(2),size:link.size,multihash:link.cid.buffer},{name:child.name,size:child.size,multihash:child.cid.buffer}],{},done),({node:{links:[shard]}},done)=>{return context.ipld.get(shard.cid,(err,result)=>{done(err,{cid:shard.cid,node:result&&result.value});});},(result,cb)=>updateShardParent(context,bucket,node,link.name,result.node,result.cid,prefix,options,cb)],cb);}if(link&&link.name.length===2){log(`Descending into sub-shard ${link.name} for ${child.name}`);return waterfall([cb=>updateShard(context,positions,child,options,cb),(result,cb)=>updateShardParent(context,bucket,node,link.name,result.node,result.cid,prefix,options,cb)],cb);}log(`Adding or replacing file`,prefix+child.name);updateShardParent(context,bucket,node,prefix+child.name,child,child.cid,prefix+child.name,options,cb);}],callback);};const createShard=(context,contents,options,callback)=>{const shard=new DirSharded(_objectSpread2({root:true,dir:true,parent:null,parentKey:null,path:'',dirty:true,flat:false},options));const operations=contents.map(contents=>{return cb=>{shard.put(contents.name,{size:contents.size,multihash:contents.multihash},cb);};});return series(operations,err=>{if(err){return callback(err);}shard.flush('',context.ipld,null,callback);});};const updateShardParent=(context,bucket,parent,name,node,cid,prefix,options,callback)=>{waterfall([done=>DAGNode.rmLink(parent,name,done),(parent,done)=>DAGNode.addLink(parent,new DAGLink(prefix,node.size,cid),done),(parent,done)=>updateHamtDirectory(context,parent.links,bucket,options,done)],callback);};module.exports=addLink;},6425:function(module,__unusedexports,__webpack_require__){"use strict";const dns=__webpack_require__(6907);const promisify=__webpack_require__(6955);module.exports=()=>{return promisify((domain,opts,callback)=>{if(typeof domain!=='string'){return callback(new Error('Invalid arguments, domain must be a string'));}if(typeof opts==='function'){callback=opts;opts={};}opts=opts||{};dns(domain,opts,callback);});};},6435:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=queue;var _baseIndexOf=__webpack_require__(451);var _baseIndexOf2=_interopRequireDefault(_baseIndexOf);var _isArray=__webpack_require__(1015);var _isArray2=_interopRequireDefault(_isArray);var _noop=__webpack_require__(5811);var _noop2=_interopRequireDefault(_noop);var _onlyOnce=__webpack_require__(2306);var _onlyOnce2=_interopRequireDefault(_onlyOnce);var _setImmediate=__webpack_require__(1454);var _setImmediate2=_interopRequireDefault(_setImmediate);var _DoublyLinkedList=__webpack_require__(9366);var _DoublyLinkedList2=_interopRequireDefault(_DoublyLinkedList);var _wrapAsync=__webpack_require__(9396);var _wrapAsync2=_interopRequireDefault(_wrapAsync);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function queue(worker,concurrency,payload){if(concurrency==null){concurrency=1;}else if(concurrency===0){throw new Error('Concurrency must not be zero');}var _worker=(0,_wrapAsync2.default)(worker);var numRunning=0;var workersList=[];var processingScheduled=false;function _insert(data,insertAtFront,callback){if(callback!=null&&typeof callback!=='function'){throw new Error('task callback must be a function');}q.started=true;if(!(0,_isArray2.default)(data)){data=[data];}if(data.length===0&&q.idle()){return(0,_setImmediate2.default)(function(){q.drain();});}for(var i=0,l=data.length;i<l;i++){var item={data:data[i],callback:callback||_noop2.default};if(insertAtFront){q._tasks.unshift(item);}else{q._tasks.push(item);}}if(!processingScheduled){processingScheduled=true;(0,_setImmediate2.default)(function(){processingScheduled=false;q.process();});}}function _next(tasks){return function(err){numRunning-=1;for(var i=0,l=tasks.length;i<l;i++){var task=tasks[i];var index=(0,_baseIndexOf2.default)(workersList,task,0);if(index===0){workersList.shift();}else if(index>0){workersList.splice(index,1);}task.callback.apply(task,arguments);if(err!=null){q.error(err,task.data);}}if(numRunning<=q.concurrency-q.buffer){q.unsaturated();}if(q.idle()){q.drain();}q.process();};}var isProcessing=false;var q={_tasks:new _DoublyLinkedList2.default(),concurrency:concurrency,payload:payload,saturated:_noop2.default,unsaturated:_noop2.default,buffer:concurrency/4,empty:_noop2.default,drain:_noop2.default,error:_noop2.default,started:false,paused:false,push:function(data,callback){_insert(data,false,callback);},kill:function(){q.drain=_noop2.default;q._tasks.empty();},unshift:function(data,callback){_insert(data,true,callback);},remove:function(testFn){q._tasks.remove(testFn);},process:function(){if(isProcessing){return;}isProcessing=true;while(!q.paused&&numRunning<q.concurrency&&q._tasks.length){var tasks=[],data=[];var l=q._tasks.length;if(q.payload)l=Math.min(l,q.payload);for(var i=0;i<l;i++){var node=q._tasks.shift();tasks.push(node);workersList.push(node);data.push(node.data);}numRunning+=1;if(q._tasks.length===0){q.empty();}if(numRunning===q.concurrency){q.saturated();}var cb=(0,_onlyOnce2.default)(_next(tasks));_worker(data,cb);}isProcessing=false;},length:function(){return q._tasks.length;},running:function(){return numRunning;},workersList:function(){return workersList;},idle:function(){return q._tasks.length+numRunning===0;},pause:function(){q.paused=true;},resume:function(){if(q.paused===false){return;}q.paused=false;(0,_setImmediate2.default)(q.process);}};return q;}module.exports=exports['default'];},6438:function(module,__unusedexports,__webpack_require__){var baseTimes=__webpack_require__(3075),isArguments=__webpack_require__(5108),isArray=__webpack_require__(1015),isBuffer=__webpack_require__(375),isIndex=__webpack_require__(3878),isTypedArray=__webpack_require__(4653);var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function arrayLikeKeys(value,inherited){var isArr=isArray(value),isArg=!isArr&&isArguments(value),isBuff=!isArr&&!isArg&&isBuffer(value),isType=!isArr&&!isArg&&!isBuff&&isTypedArray(value),skipIndexes=isArr||isArg||isBuff||isType,result=skipIndexes?baseTimes(value.length,String):[],length=result.length;for(var key in value){if((inherited||hasOwnProperty.call(value,key))&&!(skipIndexes&&(key=='length'||isBuff&&(key=='offset'||key=='parent')||isType&&(key=='buffer'||key=='byteLength'||key=='byteOffset')||isIndex(key,length)))){result.push(key);}}return result;}module.exports=arrayLikeKeys;},6443:function(__unusedmodule,exports,__webpack_require__){"use strict";var curves=exports;var hash=__webpack_require__(3102);var elliptic=__webpack_require__(5194);var assert=elliptic.utils.assert;function PresetCurve(options){if(options.type==='short')this.curve=new elliptic.curve.short(options);else if(options.type==='edwards')this.curve=new elliptic.curve.edwards(options);else this.curve=new elliptic.curve.mont(options);this.g=this.curve.g;this.n=this.curve.n;this.hash=options.hash;assert(this.g.validate(),'Invalid curve');assert(this.g.mul(this.n).isInfinity(),'Invalid curve, G*N != O');}curves.PresetCurve=PresetCurve;function defineCurve(name,options){Object.defineProperty(curves,name,{configurable:true,enumerable:true,get:function(){var curve=new PresetCurve(options);Object.defineProperty(curves,name,{configurable:true,enumerable:true,value:curve});return curve;}});}defineCurve('p192',{type:'short',prime:'p192',p:'ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff',a:'ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc',b:'64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1',n:'ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831',hash:hash.sha256,gRed:false,g:['188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012','07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811']});defineCurve('p224',{type:'short',prime:'p224',p:'ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001',a:'ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe',b:'b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4',n:'ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d',hash:hash.sha256,gRed:false,g:['b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21','bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34']});defineCurve('p256',{type:'short',prime:null,p:'ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff',a:'ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc',b:'5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b',n:'ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551',hash:hash.sha256,gRed:false,g:['6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296','4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5']});defineCurve('curve25519',{type:'mont',prime:'p25519',p:'7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed',a:'76d06',b:'0',n:'1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed',hash:hash.sha256,gRed:false,g:['9']});defineCurve('ed25519',{type:'edwards',prime:'p25519',p:'7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed',a:'-1',c:'1',d:'52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3',n:'1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed',hash:hash.sha256,gRed:false,g:['216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a','6666666666666666666666666666666666666666666666666666666666666658']});var pre;try{pre=__webpack_require__(6002);}catch(e){pre=undefined;}defineCurve('secp256k1',{type:'short',prime:'k256',p:'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f',a:'0',b:'7',n:'ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141',h:'1',hash:hash.sha256,beta:'7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee',lambda:'5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72',basis:[{a:'3086d221a7d46bcde86c90e49284eb15',b:'-e4437ed6010e88286f547fa90abfe4c3'},{a:'114ca50f7a8e2f3f657c1108d9d44cfd8',b:'3086d221a7d46bcde86c90e49284eb15'}],gRed:false,g:['79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798','483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8',pre]});},6464:function(module,__unusedexports,__webpack_require__){"use strict";var curve=__webpack_require__(8958);var BN=__webpack_require__(5584);var inherits=__webpack_require__(92);var Base=curve.base;var elliptic=__webpack_require__(3459);var utils=elliptic.utils;function MontCurve(conf){Base.call(this,'mont',conf);this.a=new BN(conf.a,16).toRed(this.red);this.b=new BN(conf.b,16).toRed(this.red);this.i4=new BN(4).toRed(this.red).redInvm();this.two=new BN(2).toRed(this.red);this.a24=this.i4.redMul(this.a.redAdd(this.two));}inherits(MontCurve,Base);module.exports=MontCurve;MontCurve.prototype.validate=function validate(point){var x=point.normalize().x;var x2=x.redSqr();var rhs=x2.redMul(x).redAdd(x2.redMul(this.a)).redAdd(x);var y=rhs.redSqrt();return y.redSqr().cmp(rhs)===0;};function Point(curve,x,z){Base.BasePoint.call(this,curve,'projective');if(x===null&&z===null){this.x=this.curve.one;this.z=this.curve.zero;}else{this.x=new BN(x,16);this.z=new BN(z,16);if(!this.x.red)this.x=this.x.toRed(this.curve.red);if(!this.z.red)this.z=this.z.toRed(this.curve.red);}}inherits(Point,Base.BasePoint);MontCurve.prototype.decodePoint=function decodePoint(bytes,enc){return this.point(utils.toArray(bytes,enc),1);};MontCurve.prototype.point=function point(x,z){return new Point(this,x,z);};MontCurve.prototype.pointFromJSON=function pointFromJSON(obj){return Point.fromJSON(this,obj);};Point.prototype.precompute=function precompute(){};Point.prototype._encode=function _encode(){return this.getX().toArray('be',this.curve.p.byteLength());};Point.fromJSON=function fromJSON(curve,obj){return new Point(curve,obj[0],obj[1]||curve.one);};Point.prototype.inspect=function inspect(){if(this.isInfinity())return'<EC Point Infinity>';return'<EC Point x: '+this.x.fromRed().toString(16,2)+' z: '+this.z.fromRed().toString(16,2)+'>';};Point.prototype.isInfinity=function isInfinity(){return this.z.cmpn(0)===0;};Point.prototype.dbl=function dbl(){var a=this.x.redAdd(this.z);var aa=a.redSqr();var b=this.x.redSub(this.z);var bb=b.redSqr();var c=aa.redSub(bb);var nx=aa.redMul(bb);var nz=c.redMul(bb.redAdd(this.curve.a24.redMul(c)));return this.curve.point(nx,nz);};Point.prototype.add=function add(){throw new Error('Not supported on Montgomery curve');};Point.prototype.diffAdd=function diffAdd(p,diff){var a=this.x.redAdd(this.z);var b=this.x.redSub(this.z);var c=p.x.redAdd(p.z);var d=p.x.redSub(p.z);var da=d.redMul(a);var cb=c.redMul(b);var nx=diff.z.redMul(da.redAdd(cb).redSqr());var nz=diff.x.redMul(da.redISub(cb).redSqr());return this.curve.point(nx,nz);};Point.prototype.mul=function mul(k){var t=k.clone();var a=this;var b=this.curve.point(null,null);var c=this;for(var bits=[];t.cmpn(0)!==0;t.iushrn(1))bits.push(t.andln(1));for(var i=bits.length-1;i>=0;i--){if(bits[i]===0){a=a.diffAdd(b,c);b=b.dbl();}else{b=a.diffAdd(b,c);a=a.dbl();}}return b;};Point.prototype.mulAdd=function mulAdd(){throw new Error('Not supported on Montgomery curve');};Point.prototype.jumlAdd=function jumlAdd(){throw new Error('Not supported on Montgomery curve');};Point.prototype.eq=function eq(other){return this.getX().cmp(other.getX())===0;};Point.prototype.normalize=function normalize(){this.x=this.x.redMul(this.z.redInvm());this.z=this.curve.one;return this;};Point.prototype.getX=function getX(){this.normalize();return this.x.fromRed();};},6485:function(module){"use strict";module.exports=leftPad;var cache=['',' ','  ','   ','    ','     ','      ','       ','        ','         '];function leftPad(str,len,ch){str=str+'';len=len-str.length;if(len<=0)return str;if(!ch&&ch!==0)ch=' ';ch=ch+'';if(ch===' '&&len<10)return cache[len]+str;var pad='';while(true){if(len&1)pad+=ch;len>>=1;if(len)ch+=ch;else break;}return pad+str;}},6489:function(__unusedmodule,exports,__webpack_require__){"use strict";const Bignumber=__webpack_require__(4417);const constants=__webpack_require__(7023);const SHIFT32=constants.SHIFT32;const SHIFT16=constants.SHIFT16;const MAX_SAFE_HIGH=0x1fffff;exports.parseHalf=function parseHalf(buf){var exp,mant,sign;sign=buf[0]&0x80?-1:1;exp=(buf[0]&0x7C)>>2;mant=(buf[0]&0x03)<<8|buf[1];if(!exp){return sign*5.9604644775390625e-8*mant;}else if(exp===0x1f){return sign*(mant?0/0:2e308);}else{return sign*Math.pow(2,exp-25)*(1024+mant);}};function toHex(n){if(n<16){return'0'+n.toString(16);}return n.toString(16);}exports.arrayBufferToBignumber=function(buf){const len=buf.byteLength;let res='';for(let i=0;i<len;i++){res+=toHex(buf[i]);}return new Bignumber(res,16);};exports.buildMap=obj=>{const res=new Map();const keys=Object.keys(obj);const length=keys.length;for(let i=0;i<length;i++){res.set(keys[i],obj[keys[i]]);}return res;};exports.buildInt32=(f,g)=>{return f*SHIFT16+g;};exports.buildInt64=(f1,f2,g1,g2)=>{const f=exports.buildInt32(f1,f2);const g=exports.buildInt32(g1,g2);if(f>MAX_SAFE_HIGH){return new Bignumber(f).times(SHIFT32).plus(g);}else{return f*SHIFT32+g;}};exports.writeHalf=function writeHalf(buf,half){const u32=Buffer.allocUnsafe(4);u32.writeFloatBE(half,0);const u=u32.readUInt32BE(0);if((u&0x1FFF)!==0){return false;}var s16=u>>16&0x8000;const exp=u>>23&0xff;const mant=u&0x7fffff;if(exp>=113&&exp<=142){s16+=(exp-112<<10)+(mant>>13);}else if(exp>=103&&exp<113){if(mant&(1<<126-exp)-1){return false;}s16+=mant+0x800000>>126-exp;}else{return false;}buf.writeUInt16BE(s16,0);return true;};exports.keySorter=function(a,b){var lenA=a[0].byteLength;var lenB=b[0].byteLength;if(lenA>lenB){return 1;}if(lenB>lenA){return-1;}return a[0].compare(b[0]);};exports.isNegativeZero=x=>{return x===0&&1/x<0;};exports.nextPowerOf2=n=>{let count=0;if(n&&!(n&n-1)){return n;}while(n!==0){n>>=1;count+=1;}return 1<<count;};},6496:function(module,__unusedexports,__webpack_require__){"use strict";const multiaddr=__webpack_require__(5920);const PeerInfo=__webpack_require__(9265);const PeerId=__webpack_require__(1832);const proto=__webpack_require__(5546);module.exports=function(swarm){function getB58String(peer){let b58Id=null;if(multiaddr.isMultiaddr(peer)){const relayMa=multiaddr(peer);b58Id=relayMa.getPeerId();}else if(PeerInfo.isPeerInfo(peer)){b58Id=peer.id.toB58String();}return b58Id;}function peerInfoFromMa(peer){let p;if(PeerInfo.isPeerInfo(peer)){p=peer;}else if(multiaddr.isMultiaddr(peer)){const peerIdB58Str=peer.getPeerId();try{p=swarm._peerBook.get(peerIdB58Str);}catch(err){p=new PeerInfo(PeerId.createFromB58String(peerIdB58Str));}p.multiaddrs.add(peer);}else if(PeerId.isPeerId(peer)){const peerIdB58Str=peer.toB58String();p=swarm._peerBook.has(peerIdB58Str)?swarm._peerBook.get(peerIdB58Str):peer;}return p;}function isPeerConnected(peerId){return swarm.muxedConns[peerId]||swarm.conns[peerId];}function writeResponse(streamHandler,status,cb){cb=cb||(()=>{});streamHandler.write(proto.CircuitRelay.encode({type:proto.CircuitRelay.Type.STATUS,code:status}));return cb();}function validateAddrs(msg,streamHandler,type,cb){try{msg.dstPeer.addrs.forEach(addr=>{return multiaddr(addr);});}catch(err){writeResponse(streamHandler,type===proto.CircuitRelay.Type.HOP?proto.CircuitRelay.Status.HOP_DST_MULTIADDR_INVALID:proto.CircuitRelay.Status.STOP_DST_MULTIADDR_INVALID);return cb(err);}try{msg.srcPeer.addrs.forEach(addr=>{return multiaddr(addr);});}catch(err){writeResponse(streamHandler,type===proto.CircuitRelay.Type.HOP?proto.CircuitRelay.Status.HOP_SRC_MULTIADDR_INVALID:proto.CircuitRelay.Status.STOP_SRC_MULTIADDR_INVALID);return cb(err);}return cb(null);}function peerIdFromId(id){if(typeof id==='string'){return PeerId.createFromB58String(id);}return PeerId.createFromBytes(id);}return{getB58String,peerInfoFromMa,isPeerConnected,validateAddrs,writeResponse,peerIdFromId};};},6504:function(module,__unusedexports,__webpack_require__){"use strict";var pna=__webpack_require__(88);var objectKeys=Object.keys||function(obj){var keys=[];for(var key in obj){keys.push(key);}return keys;};module.exports=Duplex;var util=__webpack_require__(5548);util.inherits=__webpack_require__(92);var Readable=__webpack_require__(1590);var Writable=__webpack_require__(4266);util.inherits(Duplex,Readable);{var keys=objectKeys(Writable.prototype);for(var v=0;v<keys.length;v++){var method=keys[v];if(!Duplex.prototype[method])Duplex.prototype[method]=Writable.prototype[method];}}function Duplex(options){if(!(this instanceof Duplex))return new Duplex(options);Readable.call(this,options);Writable.call(this,options);if(options&&options.readable===false)this.readable=false;if(options&&options.writable===false)this.writable=false;this.allowHalfOpen=true;if(options&&options.allowHalfOpen===false)this.allowHalfOpen=false;this.once('end',onend);}Object.defineProperty(Duplex.prototype,'writableHighWaterMark',{enumerable:false,get:function(){return this._writableState.highWaterMark;}});function onend(){if(this.allowHalfOpen||this._writableState.ended)return;pna.nextTick(onEndNT,this);}function onEndNT(self){self.end();}Object.defineProperty(Duplex.prototype,'destroyed',{get:function(){if(this._readableState===undefined||this._writableState===undefined){return false;}return this._readableState.destroyed&&this._writableState.destroyed;},set:function(value){if(this._readableState===undefined||this._writableState===undefined){return;}this._readableState.destroyed=value;this._writableState.destroyed=value;}});Duplex.prototype._destroy=function(err,cb){this.push(null);this.end();pna.nextTick(cb,err);};},6505:function(module,__unusedexports,__webpack_require__){"use strict";const CID=__webpack_require__(9339);const withIs=__webpack_require__(3171);class Block{constructor(data,cid){if(!data||!Buffer.isBuffer(data)){throw new Error('first argument  must be a buffer');}if(!cid||!CID.isCID(cid)){throw new Error('second argument must be a CID');}this._data=data;this._cid=cid;}get data(){return this._data;}set data(val){throw new Error('Tried to change an immutable block');}get cid(){return this._cid;}set cid(val){throw new Error('Tried to change an immutable block');}}module.exports=withIs(Block,{className:'Block',symbolName:'@ipfs/js-ipfs-block/block'});},6510:function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj;};}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return _typeof(obj);}exports.log=log;exports.formatArgs=formatArgs;exports.save=save;exports.load=load;exports.useColors=useColors;exports.storage=localstorage();exports.colors=['#0000CC','#0000FF','#0033CC','#0033FF','#0066CC','#0066FF','#0099CC','#0099FF','#00CC00','#00CC33','#00CC66','#00CC99','#00CCCC','#00CCFF','#3300CC','#3300FF','#3333CC','#3333FF','#3366CC','#3366FF','#3399CC','#3399FF','#33CC00','#33CC33','#33CC66','#33CC99','#33CCCC','#33CCFF','#6600CC','#6600FF','#6633CC','#6633FF','#66CC00','#66CC33','#9900CC','#9900FF','#9933CC','#9933FF','#99CC00','#99CC33','#CC0000','#CC0033','#CC0066','#CC0099','#CC00CC','#CC00FF','#CC3300','#CC3333','#CC3366','#CC3399','#CC33CC','#CC33FF','#CC6600','#CC6633','#CC9900','#CC9933','#CCCC00','#CCCC33','#FF0000','#FF0033','#FF0066','#FF0099','#FF00CC','#FF00FF','#FF3300','#FF3333','#FF3366','#FF3399','#FF33CC','#FF33FF','#FF6600','#FF6633','#FF9900','#FF9933','#FFCC00','#FFCC33'];function useColors(){if(typeof window!=='undefined'&&window.process&&(window.process.type==='renderer'||window.process.__nwjs)){return true;}if(typeof navigator!=='undefined'&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)){return false;}return typeof document!=='undefined'&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!=='undefined'&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!=='undefined'&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!=='undefined'&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/);}function formatArgs(args){args[0]=(this.useColors?'%c':'')+this.namespace+(this.useColors?' %c':' ')+args[0]+(this.useColors?'%c ':' ')+'+'+module.exports.humanize(this.diff);if(!this.useColors){return;}var c='color: '+this.color;args.splice(1,0,c,'color: inherit');var index=0;var lastC=0;args[0].replace(/%[a-zA-Z%]/g,function(match){if(match==='%%'){return;}index++;if(match==='%c'){lastC=index;}});args.splice(lastC,0,c);}function log(){var _console;return(typeof console==="undefined"?"undefined":_typeof(console))==='object'&&console.log&&(_console=console).log.apply(_console,arguments);}function save(namespaces){try{if(namespaces){exports.storage.setItem('debug',namespaces);}else{exports.storage.removeItem('debug');}}catch(error){}}function load(){var r;try{r=exports.storage.getItem('debug');}catch(error){}if(!r&&typeof process!=='undefined'&&'env'in process){r=process.env.DEBUG;}return r;}function localstorage(){try{return localStorage;}catch(error){}}module.exports=__webpack_require__(110)(exports);var formatters=module.exports.formatters;formatters.j=function(v){try{return JSON.stringify(v);}catch(error){return'[UnexpectedJSONParseError]: '+error.message;}};},6518:function(module,__unusedexports,__webpack_require__){"use strict";const multistream=__webpack_require__(9759);const observeConn=__webpack_require__(1179);const debug=__webpack_require__(746);const log=debug('libp2p:switch:protocol-muxer');log.error=debug('libp2p:switch:protocol-muxer:error');module.exports=function protocolMuxer(protocols,observer){return transport=>(_parentConn,msListener)=>{const ms=msListener||new multistream.Listener();let parentConn;if(transport&&!msListener){parentConn=observeConn(transport,null,_parentConn,observer);}else{parentConn=_parentConn;}Object.keys(protocols).forEach(protocol=>{if(!protocol){return;}const handler=(protocolName,_conn)=>{log(`registering handler with protocol ${protocolName}`);const protocol=protocols[protocolName];if(protocol){const handlerFunc=protocol&&protocol.handlerFunc;if(handlerFunc){const conn=observeConn(null,protocolName,_conn,observer);handlerFunc(protocol,conn);}}};ms.addHandler(protocol,handler,protocols[protocol].matchFunc);});ms.handle(parentConn,err=>{if(err){log.error(`multistream handshake failed`,err);}});};};},6534:function(module,exports,__webpack_require__){"use strict";const throttle=__webpack_require__(9107);exports=module.exports=TimeCache;function TimeCache(options){if(!(this instanceof TimeCache)){return new TimeCache(options);}options=options||{};const validity=options.validity||30;const entries=new Map();const sweep=throttle(()=>{entries.forEach((entry,key)=>{const v=entry.validity||validity;const delta=getTimeElapsed(entry.timestamp);if(delta>v){entries.delete(key);}});},200);this.put=(key,value,validity)=>{if(!this.has(key)){entries.set(key,{value:value,timestamp:new Date(),validity:validity});}sweep();};this.get=key=>{if(entries.has(key)){return entries.get(key).value;}else{throw new Error('key does not exist');}};this.has=key=>{return entries.has(key);};}function getTimeElapsed(prevTime){const currentTime=new Date();const a=currentTime.getTime()-prevTime.getTime();return Math.floor(a/1000);}},6538:function(module,__unusedexports,__webpack_require__){"use strict";const pull=__webpack_require__(2885);const toStream=__webpack_require__(864);module.exports=function(self){return(ipfsPath,options)=>{options=options||{};return toStream.source(pull(self.getPullStream(ipfsPath,options),pull.map(file=>{if(file.content){file.content=toStream.source(file.content);file.content.pause();}return file;})));};};},6549:function(module,__unusedexports,__webpack_require__){"use strict";var values=__webpack_require__(5130);var once=__webpack_require__(751);module.exports=function flatten(){return function(read){var _read;return function(abort,cb){if(abort){_read?_read(abort,function(err){read(err||abort,cb);}):read(abort,cb);}else if(_read)nextChunk();else nextStream();function nextChunk(){_read(null,function(err,data){if(err===true)nextStream();else if(err){read(true,function(abortErr){cb(err);});}else cb(null,data);});}function nextStream(){_read=null;read(null,function(end,stream){if(end)return cb(end);if(Array.isArray(stream)||stream&&'object'===typeof stream)stream=values(stream);else if('function'!=typeof stream)stream=once(stream);_read=stream;nextChunk();});}};};};},6559:function(module,__unusedexports,__webpack_require__){var ready=__webpack_require__(6172);var nextTick=typeof setImmediate!=='undefined'?setImmediate:process.nextTick;module.exports=function(socket,opts){return function(read){opts=opts||{};var closeOnEnd=opts.closeOnEnd!==false;var onClose='function'===typeof opts?opts:opts.onClose;function next(end,data){if(end){if(closeOnEnd&&socket.readyState<=1){if(onClose)socket.addEventListener('close',function(ev){if(ev.wasClean||ev.code===1006)onClose();else{var err=new Error('ws error');err.event=ev;onClose(err);}});socket.close();}return;}ready(socket,function(end){if(end){return read(end,function(){});}socket.send(data);nextTick(function(){read(null,next);});});}read(null,next);};};},6561:function(module,__unusedexports,__webpack_require__){"use strict";const mfs=__webpack_require__(285);module.exports=self=>mfs({ipld:self._ipld,repo:self._repo,repoOwner:self._options.repoOwner});},6567:function(module,__unusedexports,__webpack_require__){"use strict";var reduce=__webpack_require__(4598);module.exports=function concat(cb){return reduce(function(a,b){return a+b;},'',cb);};},6578:function(module,__unusedexports,__webpack_require__){"use strict";const tryEach=__webpack_require__(5519);const errCode=__webpack_require__(4999);module.exports=node=>{const routers=node._modules.peerRouting||[];if(node._dht){routers.unshift(node._dht);}return{findPeer:(id,options,callback)=>{if(typeof options==='function'){callback=options;options={};}if(!routers.length){callback(errCode(new Error('No peer routers available'),'NO_ROUTERS_AVAILABLE'));}const tasks=routers.map(router=>{return cb=>router.findPeer(id,options,(err,result)=>{if(err){return cb(err);}if(!result||Object.keys(result).length===0){return cb(errCode(new Error('not found'),'NOT_FOUND'),null);}cb(null,result);});});tryEach(tasks,(err,results)=>{if(err&&err.code!=='NOT_FOUND'){return callback(err);}results=results||[];callback(null,results);});}};};},6585:function(__unusedmodule,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var BN=__webpack_require__(5584);function encode(input){if(input instanceof Array){var output=[];for(var i=0;i<input.length;i++){output.push(encode(input[i]));}var buf=Buffer.concat(output);return Buffer.concat([encodeLength(buf.length,192),buf]);}else{var inputBuf=toBuffer(input);return inputBuf.length===1&&inputBuf[0]<128?inputBuf:Buffer.concat([encodeLength(inputBuf.length,128),inputBuf]);}}exports.encode=encode;function safeParseInt(v,base){if(v.slice(0,2)==='00'){throw new Error('invalid RLP: extra zeros');}return parseInt(v,base);}function encodeLength(len,offset){if(len<56){return Buffer.from([len+offset]);}else{var hexLength=intToHex(len);var lLength=hexLength.length/2;var firstByte=intToHex(offset+55+lLength);return Buffer.from(firstByte+hexLength,'hex');}}function decode(input,stream){if(stream===void 0){stream=false;}if(!input||input.length===0){return Buffer.from([]);}var inputBuffer=toBuffer(input);var decoded=_decode(inputBuffer);if(stream){return decoded;}if(decoded.remainder.length!==0){throw new Error('invalid remainder');}return decoded.data;}exports.decode=decode;function getLength(input){if(!input||input.length===0){return Buffer.from([]);}var inputBuffer=toBuffer(input);var firstByte=inputBuffer[0];if(firstByte<=0x7f){return inputBuffer.length;}else if(firstByte<=0xb7){return firstByte-0x7f;}else if(firstByte<=0xbf){return firstByte-0xb6;}else if(firstByte<=0xf7){return firstByte-0xbf;}else{var llength=firstByte-0xf6;var length=safeParseInt(inputBuffer.slice(1,llength).toString('hex'),16);return llength+length;}}exports.getLength=getLength;function _decode(input){var length,llength,data,innerRemainder,d;var decoded=[];var firstByte=input[0];if(firstByte<=0x7f){return{data:input.slice(0,1),remainder:input.slice(1)};}else if(firstByte<=0xb7){length=firstByte-0x7f;if(firstByte===0x80){data=Buffer.from([]);}else{data=input.slice(1,length);}if(length===2&&data[0]<0x80){throw new Error('invalid rlp encoding: byte must be less 0x80');}return{data:data,remainder:input.slice(length)};}else if(firstByte<=0xbf){llength=firstByte-0xb6;length=safeParseInt(input.slice(1,llength).toString('hex'),16);data=input.slice(llength,length+llength);if(data.length<length){throw new Error('invalid RLP');}return{data:data,remainder:input.slice(length+llength)};}else if(firstByte<=0xf7){length=firstByte-0xbf;innerRemainder=input.slice(1,length);while(innerRemainder.length){d=_decode(innerRemainder);decoded.push(d.data);innerRemainder=d.remainder;}return{data:decoded,remainder:input.slice(length)};}else{llength=firstByte-0xf6;length=safeParseInt(input.slice(1,llength).toString('hex'),16);var totalLength=llength+length;if(totalLength>input.length){throw new Error('invalid rlp: total length is larger than the data');}innerRemainder=input.slice(llength,totalLength);if(innerRemainder.length===0){throw new Error('invalid rlp, List has a invalid length');}while(innerRemainder.length){d=_decode(innerRemainder);decoded.push(d.data);innerRemainder=d.remainder;}return{data:decoded,remainder:input.slice(totalLength)};}}function isHexPrefixed(str){return str.slice(0,2)==='0x';}function stripHexPrefix(str){if(typeof str!=='string'){return str;}return isHexPrefixed(str)?str.slice(2):str;}function intToHex(integer){var hex=integer.toString(16);return hex.length%2?"0"+hex:hex;}function padToEven(a){return a.length%2?"0"+a:a;}function intToBuffer(integer){var hex=intToHex(integer);return Buffer.from(hex,'hex');}function toBuffer(v){if(!Buffer.isBuffer(v)){if(typeof v==='string'){if(isHexPrefixed(v)){return Buffer.from(padToEven(stripHexPrefix(v)),'hex');}else{return Buffer.from(v);}}else if(typeof v==='number'){if(!v){return Buffer.from([]);}else{return intToBuffer(v);}}else if(v===null||v===undefined){return Buffer.from([]);}else if(v instanceof Uint8Array){return Buffer.from(v);}else if(BN.isBN(v)){return Buffer.from(v.toArray());}else{throw new Error('invalid type');}}return v;}},6593:function(module,__unusedexports,__webpack_require__){"use strict";var _=__webpack_require__(6064);var $=__webpack_require__(5107);var errors=__webpack_require__(6379);var Base58Check=__webpack_require__(7341);var Networks=__webpack_require__(8368);var Hash=__webpack_require__(2442);var JSUtil=__webpack_require__(8416);var PublicKey=__webpack_require__(4721);function Address(data,network,type){if(!(this instanceof Address)){return new Address(data,network,type);}if(_.isArray(data)&&_.isNumber(network)){return Address.createMultisig(data,network,type);}if(data instanceof Address){return data;}$.checkArgument(data,'First argument is required, please include address data.','guide/address.html');if(network&&!Networks.get(network)){throw new TypeError('Second argument must be "livenet" or "testnet".');}if(type&&type!==Address.PayToPublicKeyHash&&type!==Address.PayToScriptHash){throw new TypeError('Third argument must be "pubkeyhash" or "scripthash".');}var info=this._classifyArguments(data,network,type);info.network=info.network||Networks.get(network)||Networks.defaultNetwork;info.type=info.type||type||Address.PayToPublicKeyHash;JSUtil.defineImmutable(this,{hashBuffer:info.hashBuffer,network:info.network,type:info.type});return this;}Address.prototype._classifyArguments=function(data,network,type){if((data instanceof Buffer||data instanceof Uint8Array)&&data.length===20){return Address._transformHash(data);}else if((data instanceof Buffer||data instanceof Uint8Array)&&data.length===21){return Address._transformBuffer(data,network,type);}else if(data instanceof PublicKey){return Address._transformPublicKey(data);}else if(data instanceof Script){return Address._transformScript(data,network);}else if(typeof data==='string'){return Address._transformString(data,network,type);}else if(_.isObject(data)){return Address._transformObject(data);}else{throw new TypeError('First argument is an unrecognized data format.');}};Address.PayToPublicKeyHash='pubkeyhash';Address.PayToScriptHash='scripthash';Address._transformHash=function(hash){var info={};if(!(hash instanceof Buffer)&&!(hash instanceof Uint8Array)){throw new TypeError('Address supplied is not a buffer.');}if(hash.length!==20){throw new TypeError('Address hashbuffers must be exactly 20 bytes.');}info.hashBuffer=hash;return info;};Address._transformObject=function(data){$.checkArgument(data.hash||data.hashBuffer,'Must provide a `hash` or `hashBuffer` property');$.checkArgument(data.type,'Must provide a `type` property');return{hashBuffer:data.hash?new Buffer(data.hash,'hex'):data.hashBuffer,network:Networks.get(data.network)||Networks.defaultNetwork,type:data.type};};Address._classifyFromVersion=function(buffer){var version={};var prefix=buffer[0]*256+buffer[1];var pubkeyhashNetwork=Networks.get(prefix,'pubkeyhash');var scripthashNetwork=Networks.get(prefix,'scripthash');if(pubkeyhashNetwork){version.network=pubkeyhashNetwork;version.type=Address.PayToPublicKeyHash;}else if(scripthashNetwork){version.network=scripthashNetwork;version.type=Address.PayToScriptHash;}return version;};Address._transformBuffer=function(buffer,network,type){var info={};if(!(buffer instanceof Buffer)&&!(buffer instanceof Uint8Array)){throw new TypeError('Address supplied is not a buffer.');}if(buffer.length!==2+20){throw new TypeError('Address buffers must be exactly 22 bytes.');}network=Networks.get(network);var bufferVersion=Address._classifyFromVersion(buffer);if(!bufferVersion.network||network&&network!==bufferVersion.network){throw new TypeError('Address has mismatched network type.');}if(!bufferVersion.type||type&&type!==bufferVersion.type){throw new TypeError('Address has mismatched type.');}info.hashBuffer=buffer.slice(2);info.network=bufferVersion.network;info.type=bufferVersion.type;return info;};Address._transformPublicKey=function(pubkey){var info={};if(!(pubkey instanceof PublicKey)){throw new TypeError('Address must be an instance of PublicKey.');}info.hashBuffer=Hash.sha256ripemd160(pubkey.toBuffer());info.type=Address.PayToPublicKeyHash;return info;};Address._transformScript=function(script,network){$.checkArgument(script instanceof Script,'script must be a Script instance');var info=script.getAddressInfo(network);if(!info){throw new errors.Script.CantDeriveAddress(script);}return info;};Address.createMultisig=function(publicKeys,threshold,network){network=network||publicKeys[0].network||Networks.defaultNetwork;return Address.payingTo(Script.buildMultisigOut(publicKeys,threshold),network);};Address._transformString=function(data,network,type){if(typeof data!=='string'){throw new TypeError('data parameter supplied is not a string.');}data=data.trim();var addressBuffer=Base58Check.decode(data);var info=Address._transformBuffer(addressBuffer,network,type);return info;};Address.fromPublicKey=function(data,network){var info=Address._transformPublicKey(data);network=network||Networks.defaultNetwork;return new Address(info.hashBuffer,network,info.type);};Address.fromPublicKeyHash=function(hash,network){var info=Address._transformHash(hash);return new Address(info.hashBuffer,network,Address.PayToPublicKeyHash);};Address.fromScriptHash=function(hash,network){$.checkArgument(hash,'hash parameter is required');var info=Address._transformHash(hash);return new Address(info.hashBuffer,network,Address.PayToScriptHash);};Address.payingTo=function(script,network){$.checkArgument(script,'script is required');$.checkArgument(script instanceof Script,'script must be instance of Script');return Address.fromScriptHash(Hash.sha256ripemd160(script.toBuffer()),network);};Address.fromScript=function(script,network){$.checkArgument(script instanceof Script,'script must be a Script instance');var info=Address._transformScript(script,network);return new Address(info.hashBuffer,network,info.type);};Address.fromBuffer=function(buffer,network,type){var info=Address._transformBuffer(buffer,network,type);return new Address(info.hashBuffer,info.network,info.type);};Address.fromString=function(str,network,type){var info=Address._transformString(str,network,type);return new Address(info.hashBuffer,info.network,info.type);};Address.fromObject=function fromObject(obj){$.checkState(JSUtil.isHexa(obj.hash),'Unexpected hash property, "'+obj.hash+'", expected to be hex.');var hashBuffer=new Buffer(obj.hash,'hex');return new Address(hashBuffer,obj.network,obj.type);};Address.getValidationError=function(data,network,type){var error;try{new Address(data,network,type);}catch(e){error=e;}return error;};Address.isValid=function(data,network,type){return!Address.getValidationError(data,network,type);};Address.prototype.isPayToPublicKeyHash=function(){return this.type===Address.PayToPublicKeyHash;};Address.prototype.isPayToScriptHash=function(){return this.type===Address.PayToScriptHash;};Address.prototype.toBuffer=function(){var version=new Buffer(this.network[this.type].toString(16),'hex');var buf=Buffer.concat([version,this.hashBuffer]);return buf;};Address.prototype.toObject=Address.prototype.toJSON=function toObject(){return{hash:this.hashBuffer.toString('hex'),type:this.type,network:this.network.toString()};};Address.prototype.toString=function(){return Base58Check.encode(this.toBuffer());};Address.prototype.inspect=function(){return'<Address: '+this.toString()+', type: '+this.type+', network: '+this.network+'>';};module.exports=Address;var Script=__webpack_require__(5355);},6611:function(module,__unusedexports,__webpack_require__){"use strict";var unique=__webpack_require__(2929);module.exports=function nonUnique(field){return unique(field,true);};},6614:function(module,__unusedexports,__webpack_require__){"use strict";var createHash=__webpack_require__(980);var bs58checkBase=__webpack_require__(2479);function sha256x2(buffer){var tmp=createHash('sha256').update(buffer).digest();return createHash('sha256').update(tmp).digest();}module.exports=bs58checkBase(sha256x2);},6628:function(module){var indexOf=[].indexOf;module.exports=function(arr,obj){if(indexOf)return arr.indexOf(obj);for(var i=0;i<arr.length;++i){if(arr[i]===obj)return i;}return-1;};},6641:function(module,__unusedexports,__webpack_require__){var once=__webpack_require__(7957);var eos=__webpack_require__(1201);var fs=__webpack_require__(662);var noop=function(){};var ancient=/^v?\.0/.test(process.version);var isFn=function(fn){return typeof fn==='function';};var isFS=function(stream){if(!ancient)return false;if(!fs)return false;return(stream instanceof(fs.ReadStream||noop)||stream instanceof(fs.WriteStream||noop))&&isFn(stream.close);};var isRequest=function(stream){return stream.setHeader&&isFn(stream.abort);};var destroyer=function(stream,reading,writing,callback){callback=once(callback);var closed=false;stream.on('close',function(){closed=true;});eos(stream,{readable:reading,writable:writing},function(err){if(err)return callback(err);closed=true;callback();});var destroyed=false;return function(err){if(closed)return;if(destroyed)return;destroyed=true;if(isFS(stream))return stream.close(noop);if(isRequest(stream))return stream.abort();if(isFn(stream.destroy))return stream.destroy();callback(err||new Error('stream was destroyed'));};};var call=function(fn){fn();};var pipe=function(from,to){return from.pipe(to);};var pump=function(){var streams=Array.prototype.slice.call(arguments);var callback=isFn(streams[streams.length-1]||noop)&&streams.pop()||noop;if(Array.isArray(streams[0]))streams=streams[0];if(streams.length<2)throw new Error('pump requires two streams per minimum');var error;var destroys=streams.map(function(stream,i){var reading=i<streams.length-1;var writing=i>0;return destroyer(stream,reading,writing,function(err){if(!error)error=err;if(err)destroys.forEach(call);if(reading)return;destroys.forEach(call);callback(error);});});return streams.reduce(pipe);};module.exports=pump;},6642:function(module,__unusedexports,__webpack_require__){"use strict";var varint=__webpack_require__(2572);var defined=__webpack_require__(8542).defined;function compileDecode(m,resolve,enc){var requiredFields=[];var fields={};var oneofFields=[];var vals=[];for(var i=0;i<enc.length;i++){var field=m.fields[i];fields[field.tag]=i;var def=field.options&&field.options.default;var resolved=resolve(field.type,m.id,false);vals[i]=[def,resolved&&resolved.values];m.fields[i].packed=field.repeated&&field.options&&field.options.packed&&field.options.packed!=='false';if(field.required){requiredFields.push(field.name);}if(field.oneof){oneofFields.push(field.name);}}function decodeField(e,field,obj,buf,offset,i){var name=field.name;if(field.oneof){var props=Object.keys(obj);for(var j=0;j<props.length;j++){if(oneofFields.indexOf(props[j])>-1){delete obj[props[j]];}}}if(e.message){var len=varint.decode(buf,offset);offset+=varint.decode.bytes;var decoded=e.decode(buf,offset,offset+len);if(field.map){obj[name]=obj[name]||{};obj[name][decoded.key]=decoded.value;}else if(field.repeated){obj[name]=obj[name]||[];obj[name].push(decoded);}else{obj[name]=decoded;}}else{if(field.repeated){obj[name]=obj[name]||[];obj[name].push(e.decode(buf,offset));}else{obj[name]=e.decode(buf,offset);}}offset+=e.decode.bytes;return offset;}return function decode(buf,offset,end){if(offset==null){offset=0;}if(end==null){end=buf.length;}if(!(end<=buf.length&&offset<=buf.length)){throw new Error('Decoded message is not valid');}var oldOffset=offset;var obj={};var field;while(true){if(end<=offset){var name='';var j=0;for(j=0;j<requiredFields.length;j++){name=requiredFields[j];if(!defined(obj[name])){throw new Error('Decoded message is not valid, missing required field: '+name);}}var val;var def;for(j=0;j<enc.length;j++){field=m.fields[j];def=vals[j][0];val=vals[j][1];name=field.name;if(defined(obj[name])){continue;}var done=false;if(field.oneof){var props=Object.keys(obj);for(var k=0;k<props.length;k++){if(oneofFields.indexOf(props[k])>-1){done=true;break;}}}if(done){continue;}if(val){if(field.repeated){obj[name]=[];}else{def=def&&val[def]?val[def].value:val[Object.keys(val)[0]].value;obj[name]=parseInt(def||0,10);}}else{obj[name]=defaultValue(field,def);}}decode.bytes=offset-oldOffset;return obj;}var prefix=varint.decode(buf,offset);offset+=varint.decode.bytes;var tag=prefix>>3;var i=fields[tag];if(i==null){offset=skip(prefix&7,buf,offset);continue;}var e=enc[i];field=m.fields[i];if(field.packed){var packedEnd=varint.decode(buf,offset);offset+=varint.decode.bytes;packedEnd+=offset;while(offset<packedEnd){offset=decodeField(e,field,obj,buf,offset,i);}}else{offset=decodeField(e,field,obj,buf,offset,i);}}};}var skip=function(type,buffer,offset){switch(type){case 0:varint.decode(buffer,offset);return offset+varint.decode.bytes;case 1:return offset+8;case 2:var len=varint.decode(buffer,offset);return offset+varint.decode.bytes+len;case 3:case 4:throw new Error('Groups are not supported');case 5:return offset+4;default:throw new Error('Unknown wire type: '+type);}};var defaultValue=function(f,def){if(f.map)return{};if(f.repeated)return[];switch(f.type){case'string':return def!=null?def:'';case'bool':return def==='true';case'float':case'double':case'sfixed32':case'fixed32':case'varint':case'enum':case'uint64':case'uint32':case'int64':case'int32':case'sint64':case'sint32':return parseInt(def||0,10);default:return null;}};module.exports=compileDecode;},6643:function(module,__unusedexports,__webpack_require__){module.exports={output:__webpack_require__(8812)};},6662:function(module){module.exports={"_args":[["zcash-bitcore-lib@0.13.20-rc3","/Users/romuloalves/Projects/tramonto/TramontoOne/nodejs-assets/nodejs-project"]],"_from":"zcash-bitcore-lib@0.13.20-rc3","_id":"zcash-bitcore-lib@0.13.20-rc3","_inBundle":false,"_integrity":"sha1-gToPVtz4t2vBQplRvqbRI2xQcAg=","_location":"/zcash-bitcore-lib","_phantomChildren":{},"_requested":{"type":"version","registry":true,"raw":"zcash-bitcore-lib@0.13.20-rc3","name":"zcash-bitcore-lib","escapedName":"zcash-bitcore-lib","rawSpec":"0.13.20-rc3","saveSpec":null,"fetchSpec":"0.13.20-rc3"},"_requiredBy":["/ipld-zcash"],"_resolved":"https://registry.npmjs.org/zcash-bitcore-lib/-/zcash-bitcore-lib-0.13.20-rc3.tgz","_spec":"0.13.20-rc3","_where":"/Users/romuloalves/Projects/tramonto/TramontoOne/nodejs-assets/nodejs-project","author":{"name":"BitPay","email":"dev@bitpay.com"},"browser":{"request":"browser-request"},"bugs":{"url":"https://github.com/bitmex/zcash-bitcore-lib/issues"},"contributors":[{"name":"Daniel Cousens","email":"bitcoin@dcousens.com"},{"name":"Esteban Ordano","email":"eordano@gmail.com"},{"name":"Gordon Hall","email":"gordon@bitpay.com"},{"name":"Jeff Garzik","email":"jgarzik@bitpay.com"},{"name":"Kyle Drake","email":"kyle@kyledrake.net"},{"name":"Manuel Araoz","email":"manuelaraoz@gmail.com"},{"name":"Matias Alejo Garcia","email":"ematiu@gmail.com"},{"name":"Ryan X. Charles","email":"ryanxcharles@gmail.com"},{"name":"Stefan Thomas","email":"moon@justmoon.net"},{"name":"Stephen Pair","email":"stephen@bitpay.com"},{"name":"Wei Lu","email":"luwei.here@gmail.com"},{"name":"Jack Grigg","email":"jack@z.cash"}],"dependencies":{"bn.js":"=2.0.4","bs58":"=2.0.0","buffer-compare":"=1.0.0","elliptic":"=3.0.3","inherits":"=2.0.1","lodash":"=3.10.1"},"description":"A pure and powerful JavaScript Zcash library.","devDependencies":{"brfs":"^1.2.0","chai":"^1.10.0","gulp":"^3.8.10","sinon":"^1.13.0","zcash-bitcore-build":"^0.5.4"},"homepage":"https://github.com/bitmex/zcash-bitcore-lib#readme","keywords":["zcash","transaction","address","p2p","ecies","cryptocurrency","blockchain","payment","bip21","bip32","bip37","bip69","bip70","multisig"],"license":"MIT","main":"index.js","name":"zcash-bitcore-lib","repository":{"type":"git","url":"git+https://github.com/bitmex/zcash-bitcore-lib.git"},"scripts":{"build":"gulp","coverage":"gulp coverage","lint":"gulp lint","test":"gulp test"},"version":"0.13.20-rc3"};},6663:function(module,__unusedexports,__webpack_require__){var forge=__webpack_require__(7938);__webpack_require__(1214);__webpack_require__(6816);__webpack_require__(321);(function(){if(forge.prime){module.exports=forge.prime;return;}var prime=module.exports=forge.prime=forge.prime||{};var BigInteger=forge.jsbn.BigInteger;var GCD_30_DELTA=[6,4,2,4,2,4,6,2];var THIRTY=new BigInteger(null);THIRTY.fromInt(30);var op_or=function(x,y){return x|y;};prime.generateProbablePrime=function(bits,options,callback){if(typeof options==='function'){callback=options;options={};}options=options||{};var algorithm=options.algorithm||'PRIMEINC';if(typeof algorithm==='string'){algorithm={name:algorithm};}algorithm.options=algorithm.options||{};var prng=options.prng||forge.random;var rng={nextBytes:function(x){var b=prng.getBytesSync(x.length);for(var i=0;i<x.length;++i){x[i]=b.charCodeAt(i);}}};if(algorithm.name==='PRIMEINC'){return primeincFindPrime(bits,rng,algorithm.options,callback);}throw new Error('Invalid prime generation algorithm: '+algorithm.name);};function primeincFindPrime(bits,rng,options,callback){if('workers'in options){return primeincFindPrimeWithWorkers(bits,rng,options,callback);}return primeincFindPrimeWithoutWorkers(bits,rng,options,callback);}function primeincFindPrimeWithoutWorkers(bits,rng,options,callback){var num=generateRandom(bits,rng);var deltaIdx=0;var mrTests=getMillerRabinTests(num.bitLength());if('millerRabinTests'in options){mrTests=options.millerRabinTests;}var maxBlockTime=10;if('maxBlockTime'in options){maxBlockTime=options.maxBlockTime;}_primeinc(num,bits,rng,deltaIdx,mrTests,maxBlockTime,callback);}function _primeinc(num,bits,rng,deltaIdx,mrTests,maxBlockTime,callback){var start=+new Date();do{if(num.bitLength()>bits){num=generateRandom(bits,rng);}if(num.isProbablePrime(mrTests)){return callback(null,num);}num.dAddOffset(GCD_30_DELTA[deltaIdx++%8],0);}while(maxBlockTime<0||+new Date()-start<maxBlockTime);forge.util.setImmediate(function(){_primeinc(num,bits,rng,deltaIdx,mrTests,maxBlockTime,callback);});}function primeincFindPrimeWithWorkers(bits,rng,options,callback){if(typeof Worker==='undefined'){return primeincFindPrimeWithoutWorkers(bits,rng,options,callback);}var num=generateRandom(bits,rng);var numWorkers=options.workers;var workLoad=options.workLoad||100;var range=workLoad*30/8;var workerScript=options.workerScript||'forge/prime.worker.js';if(numWorkers===-1){return forge.util.estimateCores(function(err,cores){if(err){cores=2;}numWorkers=cores-1;generate();});}generate();function generate(){numWorkers=Math.max(1,numWorkers);var workers=[];for(var i=0;i<numWorkers;++i){workers[i]=new Worker(workerScript);}var running=numWorkers;for(var i=0;i<numWorkers;++i){workers[i].addEventListener('message',workerMessage);}var found=false;function workerMessage(e){if(found){return;}--running;var data=e.data;if(data.found){for(var i=0;i<workers.length;++i){workers[i].terminate();}found=true;return callback(null,new BigInteger(data.prime,16));}if(num.bitLength()>bits){num=generateRandom(bits,rng);}var hex=num.toString(16);e.target.postMessage({hex:hex,workLoad:workLoad});num.dAddOffset(range,0);}}}function generateRandom(bits,rng){var num=new BigInteger(bits,rng);var bits1=bits-1;if(!num.testBit(bits1)){num.bitwiseTo(BigInteger.ONE.shiftLeft(bits1),op_or,num);}num.dAddOffset(31-num.mod(THIRTY).byteValue(),0);return num;}function getMillerRabinTests(bits){if(bits<=100)return 27;if(bits<=150)return 18;if(bits<=200)return 15;if(bits<=250)return 12;if(bits<=300)return 9;if(bits<=350)return 8;if(bits<=400)return 7;if(bits<=500)return 6;if(bits<=600)return 5;if(bits<=800)return 4;if(bits<=1250)return 3;return 2;}})();},6667:function(module,__unusedexports,__webpack_require__){var root=__webpack_require__(9274);var coreJsData=root['__core-js_shared__'];module.exports=coreJsData;},6679:function(__unusedmodule,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const ERRORS={INVALID_ENCODING:'Invalid encoding provided. Please specify a valid encoding the internal Node.js Buffer supports.',INVALID_SMARTBUFFER_SIZE:'Invalid size provided. Size must be a valid integer greater than zero.',INVALID_SMARTBUFFER_BUFFER:'Invalid Buffer provided in SmartBufferOptions.',INVALID_SMARTBUFFER_OBJECT:'Invalid SmartBufferOptions object supplied to SmartBuffer constructor or factory methods.',INVALID_OFFSET:'An invalid offset value was provided.',INVALID_OFFSET_NON_NUMBER:'An invalid offset value was provided. A numeric value is required.',INVALID_LENGTH:'An invalid length value was provided.',INVALID_LENGTH_NON_NUMBER:'An invalid length value was provived. A numeric value is required.',INVALID_TARGET_OFFSET:'Target offset is beyond the bounds of the internal SmartBuffer data.',INVALID_TARGET_LENGTH:'Specified length value moves cursor beyong the bounds of the internal SmartBuffer data.',INVALID_READ_BEYOND_BOUNDS:'Attempted to read beyond the bounds of the managed data.',INVALID_WRITE_BEYOND_BOUNDS:'Attempted to write beyond the bounds of the managed data.'};exports.ERRORS=ERRORS;function checkEncoding(encoding){if(!Buffer.isEncoding(encoding)){throw new Error(ERRORS.INVALID_ENCODING);}}exports.checkEncoding=checkEncoding;function isFiniteInteger(value){return typeof value==='number'&&isFinite(value)&&isInteger(value);}exports.isFiniteInteger=isFiniteInteger;function checkOffsetOrLengthValue(value,offset){if(typeof value==='number'){if(!isFiniteInteger(value)||value<0){throw new Error(offset?ERRORS.INVALID_OFFSET:ERRORS.INVALID_LENGTH);}}else{throw new Error(offset?ERRORS.INVALID_OFFSET_NON_NUMBER:ERRORS.INVALID_LENGTH_NON_NUMBER);}}function checkLengthValue(length){checkOffsetOrLengthValue(length,false);}exports.checkLengthValue=checkLengthValue;function checkOffsetValue(offset){checkOffsetOrLengthValue(offset,true);}exports.checkOffsetValue=checkOffsetValue;function checkTargetOffset(offset,buff){if(offset<0||offset>buff.length){throw new Error(ERRORS.INVALID_TARGET_OFFSET);}}exports.checkTargetOffset=checkTargetOffset;function isInteger(value){return typeof value==='number'&&isFinite(value)&&Math.floor(value)===value;}},6682:function(module){var INFINITY=1/0,MAX_SAFE_INTEGER=9007199254740991,MAX_INTEGER=1.7976931348623157e+308,NAN=0/0;var symbolTag='[object Symbol]';var reTrim=/^\s+|\s+$/g;var reIsBadHex=/^[-+]0x[0-9a-f]+$/i;var reIsBinary=/^0b[01]+$/i;var reIsOctal=/^0o[0-7]+$/i;var rsAstralRange='\\ud800-\\udfff',rsComboMarksRange='\\u0300-\\u036f\\ufe20-\\ufe23',rsComboSymbolsRange='\\u20d0-\\u20f0',rsVarRange='\\ufe0e\\ufe0f';var rsAstral='['+rsAstralRange+']',rsCombo='['+rsComboMarksRange+rsComboSymbolsRange+']',rsFitz='\\ud83c[\\udffb-\\udfff]',rsModifier='(?:'+rsCombo+'|'+rsFitz+')',rsNonAstral='[^'+rsAstralRange+']',rsRegional='(?:\\ud83c[\\udde6-\\uddff]){2}',rsSurrPair='[\\ud800-\\udbff][\\udc00-\\udfff]',rsZWJ='\\u200d';var reOptMod=rsModifier+'?',rsOptVar='['+rsVarRange+']?',rsOptJoin='(?:'+rsZWJ+'(?:'+[rsNonAstral,rsRegional,rsSurrPair].join('|')+')'+rsOptVar+reOptMod+')*',rsSeq=rsOptVar+reOptMod+rsOptJoin,rsSymbol='(?:'+[rsNonAstral+rsCombo+'?',rsCombo,rsRegional,rsSurrPair,rsAstral].join('|')+')';var reUnicode=RegExp(rsFitz+'(?='+rsFitz+')|'+rsSymbol+rsSeq,'g');var reHasUnicode=RegExp('['+rsZWJ+rsAstralRange+rsComboMarksRange+rsComboSymbolsRange+rsVarRange+']');var freeParseInt=parseInt;var freeGlobal=typeof global=='object'&&global&&global.Object===Object&&global;var freeSelf=typeof self=='object'&&self&&self.Object===Object&&self;var root=freeGlobal||freeSelf||Function('return this')();var asciiSize=baseProperty('length');function asciiToArray(string){return string.split('');}function baseProperty(key){return function(object){return object==null?undefined:object[key];};}function hasUnicode(string){return reHasUnicode.test(string);}function stringSize(string){return hasUnicode(string)?unicodeSize(string):asciiSize(string);}function stringToArray(string){return hasUnicode(string)?unicodeToArray(string):asciiToArray(string);}function unicodeSize(string){var result=reUnicode.lastIndex=0;while(reUnicode.test(string)){result++;}return result;}function unicodeToArray(string){return string.match(reUnicode)||[];}var objectProto=Object.prototype;var objectToString=objectProto.toString;var Symbol=root.Symbol;var nativeCeil=Math.ceil,nativeFloor=Math.floor;var symbolProto=Symbol?Symbol.prototype:undefined,symbolToString=symbolProto?symbolProto.toString:undefined;function baseRepeat(string,n){var result='';if(!string||n<1||n>MAX_SAFE_INTEGER){return result;}do{if(n%2){result+=string;}n=nativeFloor(n/2);if(n){string+=string;}}while(n);return result;}function baseSlice(array,start,end){var index=-1,length=array.length;if(start<0){start=-start>length?0:length+start;}end=end>length?length:end;if(end<0){end+=length;}length=start>end?0:end-start>>>0;start>>>=0;var result=Array(length);while(++index<length){result[index]=array[index+start];}return result;}function baseToString(value){if(typeof value=='string'){return value;}if(isSymbol(value)){return symbolToString?symbolToString.call(value):'';}var result=value+'';return result=='0'&&1/value==-INFINITY?'-0':result;}function castSlice(array,start,end){var length=array.length;end=end===undefined?length:end;return!start&&end>=length?array:baseSlice(array,start,end);}function createPadding(length,chars){chars=chars===undefined?' ':baseToString(chars);var charsLength=chars.length;if(charsLength<2){return charsLength?baseRepeat(chars,length):chars;}var result=baseRepeat(chars,nativeCeil(length/stringSize(chars)));return hasUnicode(chars)?castSlice(stringToArray(result),0,length).join(''):result.slice(0,length);}function isObject(value){var type=typeof value;return!!value&&(type=='object'||type=='function');}function isObjectLike(value){return!!value&&typeof value=='object';}function isSymbol(value){return typeof value=='symbol'||isObjectLike(value)&&objectToString.call(value)==symbolTag;}function toFinite(value){if(!value){return value===0?value:0;}value=toNumber(value);if(value===INFINITY||value===-INFINITY){var sign=value<0?-1:1;return sign*MAX_INTEGER;}return value===value?value:0;}function toInteger(value){var result=toFinite(value),remainder=result%1;return result===result?remainder?result-remainder:result:0;}function toNumber(value){if(typeof value=='number'){return value;}if(isSymbol(value)){return NAN;}if(isObject(value)){var other=typeof value.valueOf=='function'?value.valueOf():value;value=isObject(other)?other+'':other;}if(typeof value!='string'){return value===0?value:+value;}value=value.replace(reTrim,'');var isBinary=reIsBinary.test(value);return isBinary||reIsOctal.test(value)?freeParseInt(value.slice(2),isBinary?2:8):reIsBadHex.test(value)?NAN:+value;}function toString(value){return value==null?'':baseToString(value);}function padStart(string,length,chars){string=toString(string);length=toInteger(length);var strLength=length?stringSize(string):0;return length&&strLength<length?createPadding(length-strLength,chars)+string:string;}module.exports=padStart;},6687:function(__unusedmodule,exports,__webpack_require__){"use strict";exports.util=__webpack_require__(9273);exports.resolver=__webpack_require__(7215);},6689:function(module,__unusedexports,__webpack_require__){const xtend=__webpack_require__(7756);const AbstractIterator=__webpack_require__(5887);const AbstractChainedBatch=__webpack_require__(3232);const hasOwnProperty=Object.prototype.hasOwnProperty;const rangeOptions='start end gt gte lt lte'.split(' ');function AbstractLevelDOWN(location){if(!arguments.length||location===undefined){throw new Error('constructor requires at least a location argument');}if(typeof location!=='string'){throw new Error('constructor requires a location string argument');}this.location=location;this.status='new';}AbstractLevelDOWN.prototype.open=function(options,callback){var self=this;var oldStatus=this.status;if(typeof options==='function'){callback=options;}if(typeof callback!=='function'){throw new Error('open() requires a callback argument');}if(typeof options!=='object'){options={};}options.createIfMissing=options.createIfMissing!==false;options.errorIfExists=!!options.errorIfExists;this.status='opening';this._open(options,function(err){if(err){self.status=oldStatus;return callback(err);}self.status='open';callback();});};AbstractLevelDOWN.prototype._open=function(options,callback){process.nextTick(callback);};AbstractLevelDOWN.prototype.close=function(callback){var self=this;var oldStatus=this.status;if(typeof callback!=='function'){throw new Error('close() requires a callback argument');}this.status='closing';this._close(function(err){if(err){self.status=oldStatus;return callback(err);}self.status='closed';callback();});};AbstractLevelDOWN.prototype._close=function(callback){process.nextTick(callback);};AbstractLevelDOWN.prototype.get=function(key,options,callback){if(typeof options==='function'){callback=options;}if(typeof callback!=='function'){throw new Error('get() requires a callback argument');}var err=this._checkKey(key,'key');if(err)return process.nextTick(callback,err);key=this._serializeKey(key);if(typeof options!=='object'){options={};}options.asBuffer=options.asBuffer!==false;this._get(key,options,callback);};AbstractLevelDOWN.prototype._get=function(key,options,callback){process.nextTick(function(){callback(new Error('NotFound'));});};AbstractLevelDOWN.prototype.put=function(key,value,options,callback){if(typeof options==='function'){callback=options;}if(typeof callback!=='function'){throw new Error('put() requires a callback argument');}var err=this._checkKey(key,'key');if(err)return process.nextTick(callback,err);key=this._serializeKey(key);value=this._serializeValue(value);if(typeof options!=='object'){options={};}this._put(key,value,options,callback);};AbstractLevelDOWN.prototype._put=function(key,value,options,callback){process.nextTick(callback);};AbstractLevelDOWN.prototype.del=function(key,options,callback){if(typeof options==='function'){callback=options;}if(typeof callback!=='function'){throw new Error('del() requires a callback argument');}var err=this._checkKey(key,'key');if(err)return process.nextTick(callback,err);key=this._serializeKey(key);if(typeof options!=='object'){options={};}this._del(key,options,callback);};AbstractLevelDOWN.prototype._del=function(key,options,callback){process.nextTick(callback);};AbstractLevelDOWN.prototype.batch=function(array,options,callback){if(!arguments.length){return this._chainedBatch();}if(typeof options==='function'){callback=options;}if(typeof array==='function'){callback=array;}if(typeof callback!=='function'){throw new Error('batch(array) requires a callback argument');}if(!Array.isArray(array)){return process.nextTick(callback,new Error('batch(array) requires an array argument'));}if(!options||typeof options!=='object'){options={};}var serialized=new Array(array.length);for(var i=0;i<array.length;i++){if(typeof array[i]!=='object'||array[i]===null){return process.nextTick(callback,new Error('batch(array) element must be an object and not `null`'));}var e=xtend(array[i]);if(e.type!=='put'&&e.type!=='del'){return process.nextTick(callback,new Error("`type` must be 'put' or 'del'"));}var err=this._checkKey(e.key,'key');if(err)return process.nextTick(callback,err);e.key=this._serializeKey(e.key);if(e.type==='put'){e.value=this._serializeValue(e.value);}serialized[i]=e;}this._batch(serialized,options,callback);};AbstractLevelDOWN.prototype._batch=function(array,options,callback){process.nextTick(callback);};AbstractLevelDOWN.prototype._setupIteratorOptions=function(options){options=cleanRangeOptions(options);options.reverse=!!options.reverse;options.keys=options.keys!==false;options.values=options.values!==false;options.limit='limit'in options?options.limit:-1;options.keyAsBuffer=options.keyAsBuffer!==false;options.valueAsBuffer=options.valueAsBuffer!==false;return options;};function cleanRangeOptions(options){var result={};for(var k in options){if(!hasOwnProperty.call(options,k))continue;if(isRangeOption(k)&&isEmptyRangeOption(options[k]))continue;result[k]=options[k];}return result;}function isRangeOption(k){return rangeOptions.indexOf(k)!==-1;}function isEmptyRangeOption(v){return v===''||v==null||isEmptyBuffer(v);}function isEmptyBuffer(v){return Buffer.isBuffer(v)&&v.length===0;}AbstractLevelDOWN.prototype.iterator=function(options){if(typeof options!=='object'){options={};}options=this._setupIteratorOptions(options);return this._iterator(options);};AbstractLevelDOWN.prototype._iterator=function(options){return new AbstractIterator(this);};AbstractLevelDOWN.prototype._chainedBatch=function(){return new AbstractChainedBatch(this);};AbstractLevelDOWN.prototype._serializeKey=function(key){return Buffer.isBuffer(key)?key:String(key);};AbstractLevelDOWN.prototype._serializeValue=function(value){if(value==null)return'';return Buffer.isBuffer(value)||process.browser?value:String(value);};AbstractLevelDOWN.prototype._checkKey=function(obj,type){if(obj===null||obj===undefined){return new Error(type+' cannot be `null` or `undefined`');}if(Buffer.isBuffer(obj)&&obj.length===0){return new Error(type+' cannot be an empty Buffer');}if(String(obj)===''){return new Error(type+' cannot be an empty String');}};module.exports=AbstractLevelDOWN;},6693:function(module,__unusedexports,__webpack_require__){module.exports=__webpack_require__(4991).Duplex;},6696:function(__unusedmodule,exports){"use strict";exports.toString=function(klass){switch(klass){case 1:return'IN';case 2:return'CS';case 3:return'CH';case 4:return'HS';case 255:return'ANY';}return'UNKNOWN_'+klass;};exports.toClass=function(name){switch(name.toUpperCase()){case'IN':return 1;case'CS':return 2;case'CH':return 3;case'HS':return 4;case'ANY':return 255;}return 0;};},6709:function(module,__unusedexports,__webpack_require__){var forge=__webpack_require__(7938);__webpack_require__(6321);__webpack_require__(1214);var sha512=module.exports=forge.sha512=forge.sha512||{};forge.md.sha512=forge.md.algorithms.sha512=sha512;var sha384=forge.sha384=forge.sha512.sha384=forge.sha512.sha384||{};sha384.create=function(){return sha512.create('SHA-384');};forge.md.sha384=forge.md.algorithms.sha384=sha384;forge.sha512.sha256=forge.sha512.sha256||{create:function(){return sha512.create('SHA-512/256');}};forge.md['sha512/256']=forge.md.algorithms['sha512/256']=forge.sha512.sha256;forge.sha512.sha224=forge.sha512.sha224||{create:function(){return sha512.create('SHA-512/224');}};forge.md['sha512/224']=forge.md.algorithms['sha512/224']=forge.sha512.sha224;sha512.create=function(algorithm){if(!_initialized){_init();}if(typeof algorithm==='undefined'){algorithm='SHA-512';}if(!(algorithm in _states)){throw new Error('Invalid SHA-512 algorithm: '+algorithm);}var _state=_states[algorithm];var _h=null;var _input=forge.util.createBuffer();var _w=new Array(80);for(var wi=0;wi<80;++wi){_w[wi]=new Array(2);}var digestLength=64;switch(algorithm){case'SHA-384':digestLength=48;break;case'SHA-512/256':digestLength=32;break;case'SHA-512/224':digestLength=28;break;}var md={algorithm:algorithm.replace('-','').toLowerCase(),blockLength:128,digestLength:digestLength,messageLength:0,fullMessageLength:null,messageLengthSize:16};md.start=function(){md.messageLength=0;md.fullMessageLength=md.messageLength128=[];var int32s=md.messageLengthSize/4;for(var i=0;i<int32s;++i){md.fullMessageLength.push(0);}_input=forge.util.createBuffer();_h=new Array(_state.length);for(var i=0;i<_state.length;++i){_h[i]=_state[i].slice(0);}return md;};md.start();md.update=function(msg,encoding){if(encoding==='utf8'){msg=forge.util.encodeUtf8(msg);}var len=msg.length;md.messageLength+=len;len=[len/0x100000000>>>0,len>>>0];for(var i=md.fullMessageLength.length-1;i>=0;--i){md.fullMessageLength[i]+=len[1];len[1]=len[0]+(md.fullMessageLength[i]/0x100000000>>>0);md.fullMessageLength[i]=md.fullMessageLength[i]>>>0;len[0]=len[1]/0x100000000>>>0;}_input.putBytes(msg);_update(_h,_w,_input);if(_input.read>2048||_input.length()===0){_input.compact();}return md;};md.digest=function(){var finalBlock=forge.util.createBuffer();finalBlock.putBytes(_input.bytes());var remaining=md.fullMessageLength[md.fullMessageLength.length-1]+md.messageLengthSize;var overflow=remaining&md.blockLength-1;finalBlock.putBytes(_padding.substr(0,md.blockLength-overflow));var next,carry;var bits=md.fullMessageLength[0]*8;for(var i=0;i<md.fullMessageLength.length-1;++i){next=md.fullMessageLength[i+1]*8;carry=next/0x100000000>>>0;bits+=carry;finalBlock.putInt32(bits>>>0);bits=next>>>0;}finalBlock.putInt32(bits);var h=new Array(_h.length);for(var i=0;i<_h.length;++i){h[i]=_h[i].slice(0);}_update(h,_w,finalBlock);var rval=forge.util.createBuffer();var hlen;if(algorithm==='SHA-512'){hlen=h.length;}else if(algorithm==='SHA-384'){hlen=h.length-2;}else{hlen=h.length-4;}for(var i=0;i<hlen;++i){rval.putInt32(h[i][0]);if(i!==hlen-1||algorithm!=='SHA-512/224'){rval.putInt32(h[i][1]);}}return rval;};return md;};var _padding=null;var _initialized=false;var _k=null;var _states=null;function _init(){_padding=String.fromCharCode(128);_padding+=forge.util.fillString(String.fromCharCode(0x00),128);_k=[[0x428a2f98,0xd728ae22],[0x71374491,0x23ef65cd],[0xb5c0fbcf,0xec4d3b2f],[0xe9b5dba5,0x8189dbbc],[0x3956c25b,0xf348b538],[0x59f111f1,0xb605d019],[0x923f82a4,0xaf194f9b],[0xab1c5ed5,0xda6d8118],[0xd807aa98,0xa3030242],[0x12835b01,0x45706fbe],[0x243185be,0x4ee4b28c],[0x550c7dc3,0xd5ffb4e2],[0x72be5d74,0xf27b896f],[0x80deb1fe,0x3b1696b1],[0x9bdc06a7,0x25c71235],[0xc19bf174,0xcf692694],[0xe49b69c1,0x9ef14ad2],[0xefbe4786,0x384f25e3],[0x0fc19dc6,0x8b8cd5b5],[0x240ca1cc,0x77ac9c65],[0x2de92c6f,0x592b0275],[0x4a7484aa,0x6ea6e483],[0x5cb0a9dc,0xbd41fbd4],[0x76f988da,0x831153b5],[0x983e5152,0xee66dfab],[0xa831c66d,0x2db43210],[0xb00327c8,0x98fb213f],[0xbf597fc7,0xbeef0ee4],[0xc6e00bf3,0x3da88fc2],[0xd5a79147,0x930aa725],[0x06ca6351,0xe003826f],[0x14292967,0x0a0e6e70],[0x27b70a85,0x46d22ffc],[0x2e1b2138,0x5c26c926],[0x4d2c6dfc,0x5ac42aed],[0x53380d13,0x9d95b3df],[0x650a7354,0x8baf63de],[0x766a0abb,0x3c77b2a8],[0x81c2c92e,0x47edaee6],[0x92722c85,0x1482353b],[0xa2bfe8a1,0x4cf10364],[0xa81a664b,0xbc423001],[0xc24b8b70,0xd0f89791],[0xc76c51a3,0x0654be30],[0xd192e819,0xd6ef5218],[0xd6990624,0x5565a910],[0xf40e3585,0x5771202a],[0x106aa070,0x32bbd1b8],[0x19a4c116,0xb8d2d0c8],[0x1e376c08,0x5141ab53],[0x2748774c,0xdf8eeb99],[0x34b0bcb5,0xe19b48a8],[0x391c0cb3,0xc5c95a63],[0x4ed8aa4a,0xe3418acb],[0x5b9cca4f,0x7763e373],[0x682e6ff3,0xd6b2b8a3],[0x748f82ee,0x5defb2fc],[0x78a5636f,0x43172f60],[0x84c87814,0xa1f0ab72],[0x8cc70208,0x1a6439ec],[0x90befffa,0x23631e28],[0xa4506ceb,0xde82bde9],[0xbef9a3f7,0xb2c67915],[0xc67178f2,0xe372532b],[0xca273ece,0xea26619c],[0xd186b8c7,0x21c0c207],[0xeada7dd6,0xcde0eb1e],[0xf57d4f7f,0xee6ed178],[0x06f067aa,0x72176fba],[0x0a637dc5,0xa2c898a6],[0x113f9804,0xbef90dae],[0x1b710b35,0x131c471b],[0x28db77f5,0x23047d84],[0x32caab7b,0x40c72493],[0x3c9ebe0a,0x15c9bebc],[0x431d67c4,0x9c100d4c],[0x4cc5d4be,0xcb3e42b6],[0x597f299c,0xfc657e2a],[0x5fcb6fab,0x3ad6faec],[0x6c44198c,0x4a475817]];_states={};_states['SHA-512']=[[0x6a09e667,0xf3bcc908],[0xbb67ae85,0x84caa73b],[0x3c6ef372,0xfe94f82b],[0xa54ff53a,0x5f1d36f1],[0x510e527f,0xade682d1],[0x9b05688c,0x2b3e6c1f],[0x1f83d9ab,0xfb41bd6b],[0x5be0cd19,0x137e2179]];_states['SHA-384']=[[0xcbbb9d5d,0xc1059ed8],[0x629a292a,0x367cd507],[0x9159015a,0x3070dd17],[0x152fecd8,0xf70e5939],[0x67332667,0xffc00b31],[0x8eb44a87,0x68581511],[0xdb0c2e0d,0x64f98fa7],[0x47b5481d,0xbefa4fa4]];_states['SHA-512/256']=[[0x22312194,0xFC2BF72C],[0x9F555FA3,0xC84C64C2],[0x2393B86B,0x6F53B151],[0x96387719,0x5940EABD],[0x96283EE2,0xA88EFFE3],[0xBE5E1E25,0x53863992],[0x2B0199FC,0x2C85B8AA],[0x0EB72DDC,0x81C52CA2]];_states['SHA-512/224']=[[0x8C3D37C8,0x19544DA2],[0x73E19966,0x89DCD4D6],[0x1DFAB7AE,0x32FF9C82],[0x679DD514,0x582F9FCF],[0x0F6D2B69,0x7BD44DA8],[0x77E36F73,0x04C48942],[0x3F9D85A8,0x6A1D36C8],[0x1112E6AD,0x91D692A1]];_initialized=true;}function _update(s,w,bytes){var t1_hi,t1_lo;var t2_hi,t2_lo;var s0_hi,s0_lo;var s1_hi,s1_lo;var ch_hi,ch_lo;var maj_hi,maj_lo;var a_hi,a_lo;var b_hi,b_lo;var c_hi,c_lo;var d_hi,d_lo;var e_hi,e_lo;var f_hi,f_lo;var g_hi,g_lo;var h_hi,h_lo;var i,hi,lo,w2,w7,w15,w16;var len=bytes.length();while(len>=128){for(i=0;i<16;++i){w[i][0]=bytes.getInt32()>>>0;w[i][1]=bytes.getInt32()>>>0;}for(;i<80;++i){w2=w[i-2];hi=w2[0];lo=w2[1];t1_hi=((hi>>>19|lo<<13)^(lo>>>29|hi<<3)^hi>>>6)>>>0;t1_lo=((hi<<13|lo>>>19)^(lo<<3|hi>>>29)^(hi<<26|lo>>>6))>>>0;w15=w[i-15];hi=w15[0];lo=w15[1];t2_hi=((hi>>>1|lo<<31)^(hi>>>8|lo<<24)^hi>>>7)>>>0;t2_lo=((hi<<31|lo>>>1)^(hi<<24|lo>>>8)^(hi<<25|lo>>>7))>>>0;w7=w[i-7];w16=w[i-16];lo=t1_lo+w7[1]+t2_lo+w16[1];w[i][0]=t1_hi+w7[0]+t2_hi+w16[0]+(lo/0x100000000>>>0)>>>0;w[i][1]=lo>>>0;}a_hi=s[0][0];a_lo=s[0][1];b_hi=s[1][0];b_lo=s[1][1];c_hi=s[2][0];c_lo=s[2][1];d_hi=s[3][0];d_lo=s[3][1];e_hi=s[4][0];e_lo=s[4][1];f_hi=s[5][0];f_lo=s[5][1];g_hi=s[6][0];g_lo=s[6][1];h_hi=s[7][0];h_lo=s[7][1];for(i=0;i<80;++i){s1_hi=((e_hi>>>14|e_lo<<18)^(e_hi>>>18|e_lo<<14)^(e_lo>>>9|e_hi<<23))>>>0;s1_lo=((e_hi<<18|e_lo>>>14)^(e_hi<<14|e_lo>>>18)^(e_lo<<23|e_hi>>>9))>>>0;ch_hi=(g_hi^e_hi&(f_hi^g_hi))>>>0;ch_lo=(g_lo^e_lo&(f_lo^g_lo))>>>0;s0_hi=((a_hi>>>28|a_lo<<4)^(a_lo>>>2|a_hi<<30)^(a_lo>>>7|a_hi<<25))>>>0;s0_lo=((a_hi<<4|a_lo>>>28)^(a_lo<<30|a_hi>>>2)^(a_lo<<25|a_hi>>>7))>>>0;maj_hi=(a_hi&b_hi|c_hi&(a_hi^b_hi))>>>0;maj_lo=(a_lo&b_lo|c_lo&(a_lo^b_lo))>>>0;lo=h_lo+s1_lo+ch_lo+_k[i][1]+w[i][1];t1_hi=h_hi+s1_hi+ch_hi+_k[i][0]+w[i][0]+(lo/0x100000000>>>0)>>>0;t1_lo=lo>>>0;lo=s0_lo+maj_lo;t2_hi=s0_hi+maj_hi+(lo/0x100000000>>>0)>>>0;t2_lo=lo>>>0;h_hi=g_hi;h_lo=g_lo;g_hi=f_hi;g_lo=f_lo;f_hi=e_hi;f_lo=e_lo;lo=d_lo+t1_lo;e_hi=d_hi+t1_hi+(lo/0x100000000>>>0)>>>0;e_lo=lo>>>0;d_hi=c_hi;d_lo=c_lo;c_hi=b_hi;c_lo=b_lo;b_hi=a_hi;b_lo=a_lo;lo=t1_lo+t2_lo;a_hi=t1_hi+t2_hi+(lo/0x100000000>>>0)>>>0;a_lo=lo>>>0;}lo=s[0][1]+a_lo;s[0][0]=s[0][0]+a_hi+(lo/0x100000000>>>0)>>>0;s[0][1]=lo>>>0;lo=s[1][1]+b_lo;s[1][0]=s[1][0]+b_hi+(lo/0x100000000>>>0)>>>0;s[1][1]=lo>>>0;lo=s[2][1]+c_lo;s[2][0]=s[2][0]+c_hi+(lo/0x100000000>>>0)>>>0;s[2][1]=lo>>>0;lo=s[3][1]+d_lo;s[3][0]=s[3][0]+d_hi+(lo/0x100000000>>>0)>>>0;s[3][1]=lo>>>0;lo=s[4][1]+e_lo;s[4][0]=s[4][0]+e_hi+(lo/0x100000000>>>0)>>>0;s[4][1]=lo>>>0;lo=s[5][1]+f_lo;s[5][0]=s[5][0]+f_hi+(lo/0x100000000>>>0)>>>0;s[5][1]=lo>>>0;lo=s[6][1]+g_lo;s[6][0]=s[6][0]+g_hi+(lo/0x100000000>>>0)>>>0;s[6][1]=lo>>>0;lo=s[7][1]+h_lo;s[7][0]=s[7][0]+h_hi+(lo/0x100000000>>>0)>>>0;s[7][1]=lo>>>0;len-=128;}}},6715:function(module,__unusedexports,__webpack_require__){"use strict";const pkg=__webpack_require__(5358);const promisify=__webpack_require__(6955);module.exports=function version(self){return promisify((opts,callback)=>{if(typeof opts==='function'){callback=opts;opts={};}self.repo.version((err,repoVersion)=>{if(err){return callback(err);}callback(null,{version:pkg.version,repo:repoVersion,commit:''});});});};},6716:function(module,__unusedexports,__webpack_require__){"use strict";var bitcore=module.exports;bitcore.version='v'+__webpack_require__(6662).version;bitcore.versionGuard=function(version){if(version!==undefined){var message='More than one instance of zcash-bitcore-lib found. '+'Please make sure to require zcash-bitcore-lib and check that submodules do'+' not also include their own zcash-bitcore-lib dependency.';}};bitcore.versionGuard(global._bitcore);global._bitcore=bitcore.version;bitcore.crypto={};bitcore.crypto.BN=__webpack_require__(6122);bitcore.crypto.ECDSA=__webpack_require__(5621);bitcore.crypto.Hash=__webpack_require__(2442);bitcore.crypto.Random=__webpack_require__(3215);bitcore.crypto.Point=__webpack_require__(9933);bitcore.crypto.Signature=__webpack_require__(406);bitcore.encoding={};bitcore.encoding.Base58=__webpack_require__(8014);bitcore.encoding.Base58Check=__webpack_require__(7341);bitcore.encoding.BufferReader=__webpack_require__(412);bitcore.encoding.BufferWriter=__webpack_require__(2418);bitcore.encoding.Varint=__webpack_require__(728);bitcore.util={};bitcore.util.buffer=__webpack_require__(9657);bitcore.util.js=__webpack_require__(8416);bitcore.util.preconditions=__webpack_require__(5107);bitcore.errors=__webpack_require__(6379);bitcore.Address=__webpack_require__(6593);bitcore.Block=__webpack_require__(4254);bitcore.MerkleBlock=__webpack_require__(1002);bitcore.BlockHeader=__webpack_require__(4951);bitcore.HDPrivateKey=__webpack_require__(159);bitcore.HDPublicKey=__webpack_require__(843);bitcore.Networks=__webpack_require__(8368);bitcore.Opcode=__webpack_require__(6862);bitcore.PrivateKey=__webpack_require__(8322);bitcore.PublicKey=__webpack_require__(4721);bitcore.Script=__webpack_require__(5355);bitcore.Transaction=__webpack_require__(2548);bitcore.URI=__webpack_require__(4903);bitcore.Unit=__webpack_require__(1045);bitcore.deps={};bitcore.deps.bnjs=__webpack_require__(2420);bitcore.deps.bs58=__webpack_require__(5862);bitcore.deps.Buffer=Buffer;bitcore.deps.elliptic=__webpack_require__(5194);bitcore.deps._=__webpack_require__(6064);bitcore._HDKeyCache=__webpack_require__(5315);bitcore.Transaction.sighash=__webpack_require__(9845);},6722:function(module,__unusedexports,__webpack_require__){"use strict";module.exports={pk:__webpack_require__(2594)};},6724:function(module,exports,__webpack_require__){var tty=__webpack_require__(8859);var util=__webpack_require__(649);exports=module.exports=__webpack_require__(2805);exports.init=init;exports.log=log;exports.formatArgs=formatArgs;exports.save=save;exports.load=load;exports.useColors=useColors;exports.colors=[6,2,3,4,5,1];try{var supportsColor=__webpack_require__(8443);if(supportsColor&&supportsColor.level>=2){exports.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221];}}catch(err){}exports.inspectOpts=Object.keys(process.env).filter(function(key){return /^debug_/i.test(key);}).reduce(function(obj,key){var prop=key.substring(6).toLowerCase().replace(/_([a-z])/g,function(_,k){return k.toUpperCase();});var val=process.env[key];if(/^(yes|on|true|enabled)$/i.test(val))val=true;else if(/^(no|off|false|disabled)$/i.test(val))val=false;else if(val==='null')val=null;else val=Number(val);obj[prop]=val;return obj;},{});function useColors(){return'colors'in exports.inspectOpts?Boolean(exports.inspectOpts.colors):tty.isatty(process.stderr.fd);}exports.formatters.o=function(v){this.inspectOpts.colors=this.useColors;return util.inspect(v,this.inspectOpts).split('\n').map(function(str){return str.trim();}).join(' ');};exports.formatters.O=function(v){this.inspectOpts.colors=this.useColors;return util.inspect(v,this.inspectOpts);};function formatArgs(args){var name=this.namespace;var useColors=this.useColors;if(useColors){var c=this.color;var colorCode='\u001b[3'+(c<8?c:'8;5;'+c);var prefix='  '+colorCode+';1m'+name+' '+'\u001b[0m';args[0]=prefix+args[0].split('\n').join('\n'+prefix);args.push(colorCode+'m+'+exports.humanize(this.diff)+'\u001b[0m');}else{args[0]=getDate()+name+' '+args[0];}}function getDate(){if(exports.inspectOpts.hideDate){return'';}else{return new Date().toISOString()+' ';}}function log(){return process.stderr.write(util.format.apply(util,arguments)+'\n');}function save(namespaces){if(null==namespaces){delete process.env.DEBUG;}else{process.env.DEBUG=namespaces;}}function load(){return process.env.DEBUG;}function init(debug){debug.inspectOpts={};var keys=Object.keys(exports.inspectOpts);for(var i=0;i<keys.length;i++){debug.inspectOpts[keys[i]]=exports.inspectOpts[keys[i]];}}exports.enable(load());},6730:function(module,__unusedexports,__webpack_require__){"use strict";module.exports=PassThrough;var Transform=__webpack_require__(5160);var util=__webpack_require__(5548);util.inherits=__webpack_require__(92);util.inherits(PassThrough,Transform);function PassThrough(options){if(!(this instanceof PassThrough))return new PassThrough(options);Transform.call(this,options);}PassThrough.prototype._transform=function(chunk,encoding,cb){cb(null,chunk);};},6740:function(module){module.exports={"name":"constantinople","comment":"Postponed hardfork including EIP-1283 (SSTORE gas metering changes)","eip":{"url":"https://eips.ethereum.org/EIPS/eip-1013","status":"Final"},"gasConfig":{},"gasPrices":{"netSstoreNoopGas":{"v":200,"d":"Once per SSTORE operation if the value doesn't change"},"netSstoreInitGas":{"v":20000,"d":"Once per SSTORE operation from clean zero"},"netSstoreCleanGas":{"v":5000,"d":"Once per SSTORE operation from clean non-zero"},"netSstoreDirtyGas":{"v":200,"d":"Once per SSTORE operation from dirty"},"netSstoreClearRefund":{"v":15000,"d":"Once per SSTORE operation for clearing an originally existing storage slot"},"netSstoreResetRefund":{"v":4800,"d":"Once per SSTORE operation for resetting to the original non-zero value"},"netSstoreResetClearRefund":{"v":19800,"d":"Once per SSTORE operation for resetting to the original zero value"}},"vm":{},"pow":{"minerReward":{"v":"2000000000000000000","d":"The amount a miner gets rewarded for mining a block"}},"casper":{},"sharding":{}};},6749:function(module){"use strict";class PeerList{constructor(){this.list=[];}push(info){if(!this.has(info)){this.list.push(info);return true;}return false;}has(info){const match=this.list.find(i=>i.id.isEqual(info.id));return Boolean(match);}toArray(){return this.list.slice();}pop(){return this.list.pop();}get length(){return this.list.length;}}module.exports=PeerList;},6755:function(module){/**
 * [js-sha3]{@link https://github.com/emn178/js-sha3}
 *
 * @version 0.8.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2015-2018
 * @license MIT
 */(function(){'use strict';var INPUT_ERROR='input is invalid type';var FINALIZE_ERROR='finalize already called';var WINDOW=typeof window==='object';var root=WINDOW?window:{};if(root.JS_SHA3_NO_WINDOW){WINDOW=false;}var WEB_WORKER=!WINDOW&&typeof self==='object';var NODE_JS=!root.JS_SHA3_NO_NODE_JS&&typeof process==='object'&&process.versions&&process.versions.node;if(NODE_JS){root=global;}else if(WEB_WORKER){root=self;}var COMMON_JS=!root.JS_SHA3_NO_COMMON_JS&&"object"==='object'&&module.exports;var AMD=typeof define==='function'&&define.amd;var ARRAY_BUFFER=!root.JS_SHA3_NO_ARRAY_BUFFER&&typeof ArrayBuffer!=='undefined';var HEX_CHARS='0123456789abcdef'.split('');var SHAKE_PADDING=[31,7936,2031616,520093696];var CSHAKE_PADDING=[4,1024,262144,67108864];var KECCAK_PADDING=[1,256,65536,16777216];var PADDING=[6,1536,393216,100663296];var SHIFT=[0,8,16,24];var RC=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648];var BITS=[224,256,384,512];var SHAKE_BITS=[128,256];var OUTPUT_TYPES=['hex','buffer','arrayBuffer','array','digest'];var CSHAKE_BYTEPAD={'128':168,'256':136};if(root.JS_SHA3_NO_NODE_JS||!Array.isArray){Array.isArray=function(obj){return Object.prototype.toString.call(obj)==='[object Array]';};}if(ARRAY_BUFFER&&(root.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)){ArrayBuffer.isView=function(obj){return typeof obj==='object'&&obj.buffer&&obj.buffer.constructor===ArrayBuffer;};}var createOutputMethod=function(bits,padding,outputType){return function(message){return new Keccak(bits,padding,bits).update(message)[outputType]();};};var createShakeOutputMethod=function(bits,padding,outputType){return function(message,outputBits){return new Keccak(bits,padding,outputBits).update(message)[outputType]();};};var createCshakeOutputMethod=function(bits,padding,outputType){return function(message,outputBits,n,s){return methods['cshake'+bits].update(message,outputBits,n,s)[outputType]();};};var createKmacOutputMethod=function(bits,padding,outputType){return function(key,message,outputBits,s){return methods['kmac'+bits].update(key,message,outputBits,s)[outputType]();};};var createOutputMethods=function(method,createMethod,bits,padding){for(var i=0;i<OUTPUT_TYPES.length;++i){var type=OUTPUT_TYPES[i];method[type]=createMethod(bits,padding,type);}return method;};var createMethod=function(bits,padding){var method=createOutputMethod(bits,padding,'hex');method.create=function(){return new Keccak(bits,padding,bits);};method.update=function(message){return method.create().update(message);};return createOutputMethods(method,createOutputMethod,bits,padding);};var createShakeMethod=function(bits,padding){var method=createShakeOutputMethod(bits,padding,'hex');method.create=function(outputBits){return new Keccak(bits,padding,outputBits);};method.update=function(message,outputBits){return method.create(outputBits).update(message);};return createOutputMethods(method,createShakeOutputMethod,bits,padding);};var createCshakeMethod=function(bits,padding){var w=CSHAKE_BYTEPAD[bits];var method=createCshakeOutputMethod(bits,padding,'hex');method.create=function(outputBits,n,s){if(!n&&!s){return methods['shake'+bits].create(outputBits);}else{return new Keccak(bits,padding,outputBits).bytepad([n,s],w);}};method.update=function(message,outputBits,n,s){return method.create(outputBits,n,s).update(message);};return createOutputMethods(method,createCshakeOutputMethod,bits,padding);};var createKmacMethod=function(bits,padding){var w=CSHAKE_BYTEPAD[bits];var method=createKmacOutputMethod(bits,padding,'hex');method.create=function(key,outputBits,s){return new Kmac(bits,padding,outputBits).bytepad(['KMAC',s],w).bytepad([key],w);};method.update=function(key,message,outputBits,s){return method.create(key,outputBits,s).update(message);};return createOutputMethods(method,createKmacOutputMethod,bits,padding);};var algorithms=[{name:'keccak',padding:KECCAK_PADDING,bits:BITS,createMethod:createMethod},{name:'sha3',padding:PADDING,bits:BITS,createMethod:createMethod},{name:'shake',padding:SHAKE_PADDING,bits:SHAKE_BITS,createMethod:createShakeMethod},{name:'cshake',padding:CSHAKE_PADDING,bits:SHAKE_BITS,createMethod:createCshakeMethod},{name:'kmac',padding:CSHAKE_PADDING,bits:SHAKE_BITS,createMethod:createKmacMethod}];var methods={},methodNames=[];for(var i=0;i<algorithms.length;++i){var algorithm=algorithms[i];var bits=algorithm.bits;for(var j=0;j<bits.length;++j){var methodName=algorithm.name+'_'+bits[j];methodNames.push(methodName);methods[methodName]=algorithm.createMethod(bits[j],algorithm.padding);if(algorithm.name!=='sha3'){var newMethodName=algorithm.name+bits[j];methodNames.push(newMethodName);methods[newMethodName]=methods[methodName];}}}function Keccak(bits,padding,outputBits){this.blocks=[];this.s=[];this.padding=padding;this.outputBits=outputBits;this.reset=true;this.finalized=false;this.block=0;this.start=0;this.blockCount=1600-(bits<<1)>>5;this.byteCount=this.blockCount<<2;this.outputBlocks=outputBits>>5;this.extraBytes=(outputBits&31)>>3;for(var i=0;i<50;++i){this.s[i]=0;}}Keccak.prototype.update=function(message){if(this.finalized){throw new Error(FINALIZE_ERROR);}var notString,type=typeof message;if(type!=='string'){if(type==='object'){if(message===null){throw new Error(INPUT_ERROR);}else if(ARRAY_BUFFER&&message.constructor===ArrayBuffer){message=new Uint8Array(message);}else if(!Array.isArray(message)){if(!ARRAY_BUFFER||!ArrayBuffer.isView(message)){throw new Error(INPUT_ERROR);}}}else{throw new Error(INPUT_ERROR);}notString=true;}var blocks=this.blocks,byteCount=this.byteCount,length=message.length,blockCount=this.blockCount,index=0,s=this.s,i,code;while(index<length){if(this.reset){this.reset=false;blocks[0]=this.block;for(i=1;i<blockCount+1;++i){blocks[i]=0;}}if(notString){for(i=this.start;index<length&&i<byteCount;++index){blocks[i>>2]|=message[index]<<SHIFT[i++&3];}}else{for(i=this.start;index<length&&i<byteCount;++index){code=message.charCodeAt(index);if(code<0x80){blocks[i>>2]|=code<<SHIFT[i++&3];}else if(code<0x800){blocks[i>>2]|=(0xc0|code>>6)<<SHIFT[i++&3];blocks[i>>2]|=(0x80|code&0x3f)<<SHIFT[i++&3];}else if(code<0xd800||code>=0xe000){blocks[i>>2]|=(0xe0|code>>12)<<SHIFT[i++&3];blocks[i>>2]|=(0x80|code>>6&0x3f)<<SHIFT[i++&3];blocks[i>>2]|=(0x80|code&0x3f)<<SHIFT[i++&3];}else{code=0x10000+((code&0x3ff)<<10|message.charCodeAt(++index)&0x3ff);blocks[i>>2]|=(0xf0|code>>18)<<SHIFT[i++&3];blocks[i>>2]|=(0x80|code>>12&0x3f)<<SHIFT[i++&3];blocks[i>>2]|=(0x80|code>>6&0x3f)<<SHIFT[i++&3];blocks[i>>2]|=(0x80|code&0x3f)<<SHIFT[i++&3];}}}this.lastByteIndex=i;if(i>=byteCount){this.start=i-byteCount;this.block=blocks[blockCount];for(i=0;i<blockCount;++i){s[i]^=blocks[i];}f(s);this.reset=true;}else{this.start=i;}}return this;};Keccak.prototype.encode=function(x,right){var o=x&255,n=1;var bytes=[o];x=x>>8;o=x&255;while(o>0){bytes.unshift(o);x=x>>8;o=x&255;++n;}if(right){bytes.push(n);}else{bytes.unshift(n);}this.update(bytes);return bytes.length;};Keccak.prototype.encodeString=function(str){var notString,type=typeof str;if(type!=='string'){if(type==='object'){if(str===null){throw new Error(INPUT_ERROR);}else if(ARRAY_BUFFER&&str.constructor===ArrayBuffer){str=new Uint8Array(str);}else if(!Array.isArray(str)){if(!ARRAY_BUFFER||!ArrayBuffer.isView(str)){throw new Error(INPUT_ERROR);}}}else{throw new Error(INPUT_ERROR);}notString=true;}var bytes=0,length=str.length;if(notString){bytes=length;}else{for(var i=0;i<str.length;++i){var code=str.charCodeAt(i);if(code<0x80){bytes+=1;}else if(code<0x800){bytes+=2;}else if(code<0xd800||code>=0xe000){bytes+=3;}else{code=0x10000+((code&0x3ff)<<10|str.charCodeAt(++i)&0x3ff);bytes+=4;}}}bytes+=this.encode(bytes*8);this.update(str);return bytes;};Keccak.prototype.bytepad=function(strs,w){var bytes=this.encode(w);for(var i=0;i<strs.length;++i){bytes+=this.encodeString(strs[i]);}var paddingBytes=w-bytes%w;var zeros=[];zeros.length=paddingBytes;this.update(zeros);return this;};Keccak.prototype.finalize=function(){if(this.finalized){return;}this.finalized=true;var blocks=this.blocks,i=this.lastByteIndex,blockCount=this.blockCount,s=this.s;blocks[i>>2]|=this.padding[i&3];if(this.lastByteIndex===this.byteCount){blocks[0]=blocks[blockCount];for(i=1;i<blockCount+1;++i){blocks[i]=0;}}blocks[blockCount-1]|=0x80000000;for(i=0;i<blockCount;++i){s[i]^=blocks[i];}f(s);};Keccak.prototype.toString=Keccak.prototype.hex=function(){this.finalize();var blockCount=this.blockCount,s=this.s,outputBlocks=this.outputBlocks,extraBytes=this.extraBytes,i=0,j=0;var hex='',block;while(j<outputBlocks){for(i=0;i<blockCount&&j<outputBlocks;++i,++j){block=s[i];hex+=HEX_CHARS[block>>4&0x0F]+HEX_CHARS[block&0x0F]+HEX_CHARS[block>>12&0x0F]+HEX_CHARS[block>>8&0x0F]+HEX_CHARS[block>>20&0x0F]+HEX_CHARS[block>>16&0x0F]+HEX_CHARS[block>>28&0x0F]+HEX_CHARS[block>>24&0x0F];}if(j%blockCount===0){f(s);i=0;}}if(extraBytes){block=s[i];hex+=HEX_CHARS[block>>4&0x0F]+HEX_CHARS[block&0x0F];if(extraBytes>1){hex+=HEX_CHARS[block>>12&0x0F]+HEX_CHARS[block>>8&0x0F];}if(extraBytes>2){hex+=HEX_CHARS[block>>20&0x0F]+HEX_CHARS[block>>16&0x0F];}}return hex;};Keccak.prototype.arrayBuffer=function(){this.finalize();var blockCount=this.blockCount,s=this.s,outputBlocks=this.outputBlocks,extraBytes=this.extraBytes,i=0,j=0;var bytes=this.outputBits>>3;var buffer;if(extraBytes){buffer=new ArrayBuffer(outputBlocks+1<<2);}else{buffer=new ArrayBuffer(bytes);}var array=new Uint32Array(buffer);while(j<outputBlocks){for(i=0;i<blockCount&&j<outputBlocks;++i,++j){array[j]=s[i];}if(j%blockCount===0){f(s);}}if(extraBytes){array[i]=s[i];buffer=buffer.slice(0,bytes);}return buffer;};Keccak.prototype.buffer=Keccak.prototype.arrayBuffer;Keccak.prototype.digest=Keccak.prototype.array=function(){this.finalize();var blockCount=this.blockCount,s=this.s,outputBlocks=this.outputBlocks,extraBytes=this.extraBytes,i=0,j=0;var array=[],offset,block;while(j<outputBlocks){for(i=0;i<blockCount&&j<outputBlocks;++i,++j){offset=j<<2;block=s[i];array[offset]=block&0xFF;array[offset+1]=block>>8&0xFF;array[offset+2]=block>>16&0xFF;array[offset+3]=block>>24&0xFF;}if(j%blockCount===0){f(s);}}if(extraBytes){offset=j<<2;block=s[i];array[offset]=block&0xFF;if(extraBytes>1){array[offset+1]=block>>8&0xFF;}if(extraBytes>2){array[offset+2]=block>>16&0xFF;}}return array;};function Kmac(bits,padding,outputBits){Keccak.call(this,bits,padding,outputBits);}Kmac.prototype=new Keccak();Kmac.prototype.finalize=function(){this.encode(this.outputBits,true);return Keccak.prototype.finalize.call(this);};var f=function(s){var h,l,n,c0,c1,c2,c3,c4,c5,c6,c7,c8,c9,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b10,b11,b12,b13,b14,b15,b16,b17,b18,b19,b20,b21,b22,b23,b24,b25,b26,b27,b28,b29,b30,b31,b32,b33,b34,b35,b36,b37,b38,b39,b40,b41,b42,b43,b44,b45,b46,b47,b48,b49;for(n=0;n<48;n+=2){c0=s[0]^s[10]^s[20]^s[30]^s[40];c1=s[1]^s[11]^s[21]^s[31]^s[41];c2=s[2]^s[12]^s[22]^s[32]^s[42];c3=s[3]^s[13]^s[23]^s[33]^s[43];c4=s[4]^s[14]^s[24]^s[34]^s[44];c5=s[5]^s[15]^s[25]^s[35]^s[45];c6=s[6]^s[16]^s[26]^s[36]^s[46];c7=s[7]^s[17]^s[27]^s[37]^s[47];c8=s[8]^s[18]^s[28]^s[38]^s[48];c9=s[9]^s[19]^s[29]^s[39]^s[49];h=c8^(c2<<1|c3>>>31);l=c9^(c3<<1|c2>>>31);s[0]^=h;s[1]^=l;s[10]^=h;s[11]^=l;s[20]^=h;s[21]^=l;s[30]^=h;s[31]^=l;s[40]^=h;s[41]^=l;h=c0^(c4<<1|c5>>>31);l=c1^(c5<<1|c4>>>31);s[2]^=h;s[3]^=l;s[12]^=h;s[13]^=l;s[22]^=h;s[23]^=l;s[32]^=h;s[33]^=l;s[42]^=h;s[43]^=l;h=c2^(c6<<1|c7>>>31);l=c3^(c7<<1|c6>>>31);s[4]^=h;s[5]^=l;s[14]^=h;s[15]^=l;s[24]^=h;s[25]^=l;s[34]^=h;s[35]^=l;s[44]^=h;s[45]^=l;h=c4^(c8<<1|c9>>>31);l=c5^(c9<<1|c8>>>31);s[6]^=h;s[7]^=l;s[16]^=h;s[17]^=l;s[26]^=h;s[27]^=l;s[36]^=h;s[37]^=l;s[46]^=h;s[47]^=l;h=c6^(c0<<1|c1>>>31);l=c7^(c1<<1|c0>>>31);s[8]^=h;s[9]^=l;s[18]^=h;s[19]^=l;s[28]^=h;s[29]^=l;s[38]^=h;s[39]^=l;s[48]^=h;s[49]^=l;b0=s[0];b1=s[1];b32=s[11]<<4|s[10]>>>28;b33=s[10]<<4|s[11]>>>28;b14=s[20]<<3|s[21]>>>29;b15=s[21]<<3|s[20]>>>29;b46=s[31]<<9|s[30]>>>23;b47=s[30]<<9|s[31]>>>23;b28=s[40]<<18|s[41]>>>14;b29=s[41]<<18|s[40]>>>14;b20=s[2]<<1|s[3]>>>31;b21=s[3]<<1|s[2]>>>31;b2=s[13]<<12|s[12]>>>20;b3=s[12]<<12|s[13]>>>20;b34=s[22]<<10|s[23]>>>22;b35=s[23]<<10|s[22]>>>22;b16=s[33]<<13|s[32]>>>19;b17=s[32]<<13|s[33]>>>19;b48=s[42]<<2|s[43]>>>30;b49=s[43]<<2|s[42]>>>30;b40=s[5]<<30|s[4]>>>2;b41=s[4]<<30|s[5]>>>2;b22=s[14]<<6|s[15]>>>26;b23=s[15]<<6|s[14]>>>26;b4=s[25]<<11|s[24]>>>21;b5=s[24]<<11|s[25]>>>21;b36=s[34]<<15|s[35]>>>17;b37=s[35]<<15|s[34]>>>17;b18=s[45]<<29|s[44]>>>3;b19=s[44]<<29|s[45]>>>3;b10=s[6]<<28|s[7]>>>4;b11=s[7]<<28|s[6]>>>4;b42=s[17]<<23|s[16]>>>9;b43=s[16]<<23|s[17]>>>9;b24=s[26]<<25|s[27]>>>7;b25=s[27]<<25|s[26]>>>7;b6=s[36]<<21|s[37]>>>11;b7=s[37]<<21|s[36]>>>11;b38=s[47]<<24|s[46]>>>8;b39=s[46]<<24|s[47]>>>8;b30=s[8]<<27|s[9]>>>5;b31=s[9]<<27|s[8]>>>5;b12=s[18]<<20|s[19]>>>12;b13=s[19]<<20|s[18]>>>12;b44=s[29]<<7|s[28]>>>25;b45=s[28]<<7|s[29]>>>25;b26=s[38]<<8|s[39]>>>24;b27=s[39]<<8|s[38]>>>24;b8=s[48]<<14|s[49]>>>18;b9=s[49]<<14|s[48]>>>18;s[0]=b0^~b2&b4;s[1]=b1^~b3&b5;s[10]=b10^~b12&b14;s[11]=b11^~b13&b15;s[20]=b20^~b22&b24;s[21]=b21^~b23&b25;s[30]=b30^~b32&b34;s[31]=b31^~b33&b35;s[40]=b40^~b42&b44;s[41]=b41^~b43&b45;s[2]=b2^~b4&b6;s[3]=b3^~b5&b7;s[12]=b12^~b14&b16;s[13]=b13^~b15&b17;s[22]=b22^~b24&b26;s[23]=b23^~b25&b27;s[32]=b32^~b34&b36;s[33]=b33^~b35&b37;s[42]=b42^~b44&b46;s[43]=b43^~b45&b47;s[4]=b4^~b6&b8;s[5]=b5^~b7&b9;s[14]=b14^~b16&b18;s[15]=b15^~b17&b19;s[24]=b24^~b26&b28;s[25]=b25^~b27&b29;s[34]=b34^~b36&b38;s[35]=b35^~b37&b39;s[44]=b44^~b46&b48;s[45]=b45^~b47&b49;s[6]=b6^~b8&b0;s[7]=b7^~b9&b1;s[16]=b16^~b18&b10;s[17]=b17^~b19&b11;s[26]=b26^~b28&b20;s[27]=b27^~b29&b21;s[36]=b36^~b38&b30;s[37]=b37^~b39&b31;s[46]=b46^~b48&b40;s[47]=b47^~b49&b41;s[8]=b8^~b0&b2;s[9]=b9^~b1&b3;s[18]=b18^~b10&b12;s[19]=b19^~b11&b13;s[28]=b28^~b20&b22;s[29]=b29^~b21&b23;s[38]=b38^~b30&b32;s[39]=b39^~b31&b33;s[48]=b48^~b40&b42;s[49]=b49^~b41&b43;s[0]^=RC[n];s[1]^=RC[n+1];}};if(COMMON_JS){module.exports=methods;}else{for(i=0;i<methodNames.length;++i){root[methodNames[i]]=methods[methodNames[i]];}if(AMD){define(function(){return methods;});}}})();},6764:function(module,__unusedexports,__webpack_require__){"use strict";const PeerId=__webpack_require__(1832);const libp2pRecord=__webpack_require__(6091);const waterfall=__webpack_require__(4265);const each=__webpack_require__(4486);const timeout=__webpack_require__(171);const PeerInfo=__webpack_require__(9265);const errcode=__webpack_require__(4999);const utils=__webpack_require__(2869);const Message=__webpack_require__(6102);const c=__webpack_require__(2445);const Query=__webpack_require__(5312);const LimitedPeerList=__webpack_require__(430);const Record=libp2pRecord.Record;module.exports=dht=>({_nearestPeersToQuery(msg,callback){utils.convertBuffer(msg.key,(err,key)=>{if(err){return callback(err);}let ids;try{ids=dht.routingTable.closestPeers(key,dht.ncp);}catch(err){return callback(err);}callback(null,ids.map(p=>{if(dht.peerBook.has(p)){return dht.peerBook.get(p);}else{return dht.peerBook.put(new PeerInfo(p));}}));});},_betterPeersToQuery(msg,peer,callback){dht._log('betterPeersToQuery');dht._nearestPeersToQuery(msg,(err,closer)=>{if(err){return callback(err);}const filtered=closer.filter(closer=>{if(dht._isSelf(closer.id)){dht._log.error('trying to return self as closer');return false;}return!closer.id.isEqual(peer.id);});callback(null,filtered);});},_checkLocalDatastore(key,callback){dht._log('checkLocalDatastore: %b',key);const dsKey=utils.bufferToKey(key);dht.datastore.has(dsKey,(err,exists)=>{if(err){return callback(err);}if(!exists){return callback();}dht.datastore.get(dsKey,(err,res)=>{if(err){return callback(err);}const rawRecord=res;let record;try{record=Record.deserialize(rawRecord);}catch(err){return callback(err);}if(!record){return callback(errcode(new Error('Invalid record'),'ERR_INVALID_RECORD'));}if(record.timeReceived==null||utils.now()-record.timeReceived>c.MAX_RECORD_AGE){return dht.datastore.delete(dsKey,callback);}callback(null,record);});});},_add(peer,callback){peer=dht.peerBook.put(peer);dht.routingTable.add(peer.id,callback);},_verifyRecordLocally(record,callback){dht._log('verifyRecordLocally');libp2pRecord.validator.verifyRecord(dht.validators,record,callback);},_closerPeersSingle(key,peer,callback){dht._log('_closerPeersSingle %b from %s',key,peer.toB58String());dht._findPeerSingle(peer,new PeerId(key),(err,msg)=>{if(err){return callback(err);}const out=msg.closerPeers.filter(pInfo=>!dht._isSelf(pInfo.id)).map(pInfo=>dht.peerBook.put(pInfo));callback(null,out);});},_isSelf(other){return other&&dht.peerInfo.id.id.equals(other.id);},_findPeerSingle(peer,target,callback){dht._log('_findPeerSingle %s',peer.toB58String());const msg=new Message(Message.TYPES.FIND_NODE,target.id,0);dht.network.sendRequest(peer,msg,callback);},_putValueToPeer(key,rec,target,callback){const msg=new Message(Message.TYPES.PUT_VALUE,key,0);msg.record=rec;dht.network.sendRequest(target,msg,(err,resp)=>{if(err){return callback(err);}if(!resp.record.value.equals(Record.deserialize(rec).value)){return callback(errcode(new Error('value not put correctly'),'ERR_PUT_VALUE_INVALID'));}callback();});},_putLocal(key,rec,callback){dht.datastore.put(utils.bufferToKey(key),rec,callback);},_get(key,options,callback){dht._log('_get %b',key);waterfall([cb=>dht.getMany(key,16,options,cb),(vals,cb)=>{const recs=vals.map(v=>v.val);let i=0;try{i=libp2pRecord.selection.bestRecord(dht.selectors,key,recs);}catch(err){if(err.code!=='ERR_NO_SELECTOR_FUNCTION_FOR_RECORD_KEY'){return cb(err);}}const best=recs[i];dht._log('GetValue %b %s',key,best);if(!best){return cb(errcode(new Error('best value was not found'),'ERR_NOT_FOUND'));}waterfall([cb=>utils.createPutRecord(key,best,cb),(fixupRec,cb)=>each(vals,(v,cb)=>{if(v.val.equals(best)){return cb();}if(dht._isSelf(v.from)){return dht._putLocal(key,fixupRec,err=>{if(err){dht._log.error('Failed error correcting self',err);}cb();});}dht._putValueToPeer(key,fixupRec,v.from,err=>{if(err){dht._log.error('Failed error correcting entry',err);}cb();});},cb)],err=>cb(err,err?null:best));}],callback);},_getLocal(key,callback){dht._log('getLocal %b',key);waterfall([cb=>dht.datastore.get(utils.bufferToKey(key),cb),(raw,cb)=>{dht._log('found %b in local datastore',key);let rec;try{rec=Record.deserialize(raw);}catch(err){return cb(err);}dht._verifyRecordLocally(rec,err=>{if(err){return cb(err);}cb(null,rec);});}],callback);},_getValueOrPeers(peer,key,callback){waterfall([cb=>dht._getValueSingle(peer,key,cb),(msg,cb)=>{const peers=msg.closerPeers;const record=msg.record;if(record){return dht._verifyRecordOnline(record,err=>{if(err){const errMsg='invalid record received, discarded';dht._log(errMsg);return cb(errcode(new Error(errMsg),'ERR_INVALID_RECORD'));}return cb(null,record,peers);});}if(peers.length>0){return cb(null,null,peers);}cb(errcode(new Error('Not found'),'ERR_NOT_FOUND'));}],callback);},_getValueSingle(peer,key,callback){const msg=new Message(Message.TYPES.GET_VALUE,key,0);dht.network.sendRequest(peer,msg,callback);},_verifyRecordOnline(record,callback){libp2pRecord.validator.verifyRecord(dht.validators,record,callback);},_getPublicKeyFromNode(peer,callback){const pkKey=utils.keyForPublicKey(peer);waterfall([cb=>dht._getValueSingle(peer,pkKey,cb),(msg,cb)=>{if(!msg.record||!msg.record.value){return cb(errcode(new Error(`Node not responding with its public key: ${peer.toB58String()}`),'ERR_INVALID_RECORD'));}PeerId.createFromPubKey(msg.record.value,cb);},(recPeer,cb)=>{if(!recPeer.isEqual(peer)){return cb(errcode(new Error('public key does not match id'),'ERR_PUBLIC_KEY_DOES_NOT_MATCH_ID'));}cb(null,recPeer.pubKey);}],callback);},_findNProviders(key,providerTimeout,n,callback){let out=new LimitedPeerList(n);dht.providers.getProviders(key,(err,provs)=>{if(err){return callback(err);}provs.forEach(id=>{let info;if(dht.peerBook.has(id)){info=dht.peerBook.get(id);}else{info=dht.peerBook.put(new PeerInfo(id));}out.push(info);});if(out.length>=n){return callback(null,out.toArray());}const paths=[];const query=new Query(dht,key.buffer,(pathIndex,numPaths)=>{const pathSize=utils.pathSize(out.length-n,numPaths);const pathProviders=new LimitedPeerList(pathSize);paths.push(pathProviders);return(peer,cb)=>{waterfall([cb=>dht._findProvidersSingle(peer,key,cb),(msg,cb)=>{const provs=msg.providerPeers;dht._log('(%s) found %s provider entries',dht.peerInfo.id.toB58String(),provs.length);provs.forEach(prov=>{pathProviders.push(dht.peerBook.put(prov));});if(pathProviders.length>=pathSize){return cb(null,{success:true});}cb(null,{closerPeers:msg.closerPeers});}],cb);};});const peers=dht.routingTable.closestPeers(key.buffer,c.ALPHA);timeout(cb=>query.run(peers,cb),providerTimeout)(err=>{paths.forEach(path=>{path.toArray().forEach(peer=>{out.push(peer);});});if(err){if(err.code==='ETIMEDOUT'&&out.length>0){return callback(null,out.toArray());}return callback(err);}callback(null,out.toArray());});});},_findProvidersSingle(peer,key,callback){const msg=new Message(Message.TYPES.GET_PROVIDERS,key.buffer,0);dht.network.sendRequest(peer,msg,callback);}});},6784:function(module,__unusedexports,__webpack_require__){"use strict";module.exports=self=>__webpack_require__(1263)(self);},6785:function(module,__unusedexports,__webpack_require__){"use strict";const pull=__webpack_require__(418);const asyncMap=__webpack_require__(9720);const collect=__webpack_require__(8342);const pushable=__webpack_require__(5995);const batch=__webpack_require__(9226);const pullPair=__webpack_require__(7134);const through=__webpack_require__(6308);const pullWrite=__webpack_require__(8970);const pause=__webpack_require__(6827);module.exports=function trickleReduceToRoot(reduce,options){const pair=pullPair();const result=pushable();const pausable=pause(()=>{});let pendingResumes=0;pull(pair.source,pausable,trickle(0,-1),batch(Infinity),asyncMap(reduce),collect((err,roots)=>{if(err){result.end(err);}else{if(roots.length===1){result.push(roots[0]);result.end();}else if(roots.length>1){result.end(new Error('expected a maximum of 1 roots and got '+roots.length));}else{result.end();}}}));return{sink:pair.sink,source:result};function trickle(indent,maxDepth){let iteration=0;let depth=0;let deeper;let aborting=false;const result=pushable();return{source:result,sink:pullWrite(write,null,1,end)};function write(nodes,callback){let ended=false;const node=nodes[0];if(depth&&!deeper){deeper=pushable();pull(deeper,trickle(indent+1,depth-1),through(function(d){this.queue(d);},function(err){if(err){this.emit('error',err);return;}if(!ended){ended=true;pendingResumes++;pausable.pause();}this.queue(null);}),batch(Infinity),asyncMap(reduce),collect((err,nodes)=>{pendingResumes--;if(err){result.end(err);return;}nodes.forEach(node=>{result.push(node);});iterate();}));}if(deeper){deeper.push(node);}else{result.push(node);iterate();}callback();}function iterate(){deeper=null;iteration++;if(depth===0&&iteration===options.maxChildrenPerNode||depth>0&&iteration===options.layerRepeat){iteration=0;depth++;}if(!aborting&&maxDepth>=0&&depth>maxDepth||aborting&&!pendingResumes){aborting=true;result.end();}if(!pendingResumes){pausable.resume();}}function end(err){if(err){result.end(err);return;}if(deeper){if(!aborting){aborting=true;deeper.end();}}else{result.end();}}}};},6788:function(module){"use strict";const tokenChars=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function push(dest,name,elem){if(Object.prototype.hasOwnProperty.call(dest,name))dest[name].push(elem);else dest[name]=[elem];}function parse(header){const offers={};if(header===undefined||header==='')return offers;var params={};var mustUnescape=false;var isEscaping=false;var inQuotes=false;var extensionName;var paramName;var start=-1;var end=-1;for(var i=0;i<header.length;i++){const code=header.charCodeAt(i);if(extensionName===undefined){if(end===-1&&tokenChars[code]===1){if(start===-1)start=i;}else if(code===0x20||code===0x09){if(end===-1&&start!==-1)end=i;}else if(code===0x3b||code===0x2c){if(start===-1){throw new SyntaxError(`Unexpected character at index ${i}`);}if(end===-1)end=i;const name=header.slice(start,end);if(code===0x2c){push(offers,name,params);params={};}else{extensionName=name;}start=end=-1;}else{throw new SyntaxError(`Unexpected character at index ${i}`);}}else if(paramName===undefined){if(end===-1&&tokenChars[code]===1){if(start===-1)start=i;}else if(code===0x20||code===0x09){if(end===-1&&start!==-1)end=i;}else if(code===0x3b||code===0x2c){if(start===-1){throw new SyntaxError(`Unexpected character at index ${i}`);}if(end===-1)end=i;push(params,header.slice(start,end),true);if(code===0x2c){push(offers,extensionName,params);params={};extensionName=undefined;}start=end=-1;}else if(code===0x3d&&start!==-1&&end===-1){paramName=header.slice(start,i);start=end=-1;}else{throw new SyntaxError(`Unexpected character at index ${i}`);}}else{if(isEscaping){if(tokenChars[code]!==1){throw new SyntaxError(`Unexpected character at index ${i}`);}if(start===-1)start=i;else if(!mustUnescape)mustUnescape=true;isEscaping=false;}else if(inQuotes){if(tokenChars[code]===1){if(start===-1)start=i;}else if(code===0x22&&start!==-1){inQuotes=false;end=i;}else if(code===0x5c){isEscaping=true;}else{throw new SyntaxError(`Unexpected character at index ${i}`);}}else if(code===0x22&&header.charCodeAt(i-1)===0x3d){inQuotes=true;}else if(end===-1&&tokenChars[code]===1){if(start===-1)start=i;}else if(start!==-1&&(code===0x20||code===0x09)){if(end===-1)end=i;}else if(code===0x3b||code===0x2c){if(start===-1){throw new SyntaxError(`Unexpected character at index ${i}`);}if(end===-1)end=i;var value=header.slice(start,end);if(mustUnescape){value=value.replace(/\\/g,'');mustUnescape=false;}push(params,paramName,value);if(code===0x2c){push(offers,extensionName,params);params={};extensionName=undefined;}paramName=undefined;start=end=-1;}else{throw new SyntaxError(`Unexpected character at index ${i}`);}}}if(start===-1||inQuotes){throw new SyntaxError('Unexpected end of input');}if(end===-1)end=i;const token=header.slice(start,end);if(extensionName===undefined){push(offers,token,{});}else{if(paramName===undefined){push(params,token,true);}else if(mustUnescape){push(params,paramName,token.replace(/\\/g,''));}else{push(params,paramName,token);}push(offers,extensionName,params);}return offers;}function format(extensions){return Object.keys(extensions).map(extension=>{var configurations=extensions[extension];if(!Array.isArray(configurations))configurations=[configurations];return configurations.map(params=>{return[extension].concat(Object.keys(params).map(k=>{var values=params[k];if(!Array.isArray(values))values=[values];return values.map(v=>v===true?k:`${k}=${v}`).join('; ');})).join('; ');}).join(', ');}).join(', ');}module.exports={format,parse};},6797:function(module,__unusedexports,__webpack_require__){"use strict";module.exports=PassThrough;var Transform=__webpack_require__(6946);var util=__webpack_require__(5548);util.inherits=__webpack_require__(92);util.inherits(PassThrough,Transform);function PassThrough(options){if(!(this instanceof PassThrough))return new PassThrough(options);Transform.call(this,options);}PassThrough.prototype._transform=function(chunk,encoding,cb){cb(null,chunk);};},6799:function(module,__unusedexports,__webpack_require__){"use strict";module.exports={lock:'fs',storageBackends:{root:__webpack_require__(7711),blocks:__webpack_require__(7711),keys:__webpack_require__(7711),datastore:__webpack_require__(62)},storageBackendOptions:{root:{extension:''},blocks:{sharding:true,extension:'.data'},keys:{}}};},6814:function(module,__unusedexports,__webpack_require__){"use strict";var ERR_STREAM_PREMATURE_CLOSE=__webpack_require__(3368).codes.ERR_STREAM_PREMATURE_CLOSE;function noop(){}function isRequest(stream){return stream.setHeader&&typeof stream.abort==='function';}function once(callback){var called=false;return function(err){if(called)return;called=true;callback.call(this,err);};}function eos(stream,opts,callback){if(typeof opts==='function')return eos(stream,null,opts);if(!opts)opts={};callback=once(callback||noop);var ws=stream._writableState;var rs=stream._readableState;var readable=opts.readable||opts.readable!==false&&stream.readable;var writable=opts.writable||opts.writable!==false&&stream.writable;var onlegacyfinish=function onlegacyfinish(){if(!stream.writable)onfinish();};var onfinish=function onfinish(){writable=false;if(!readable)callback.call(stream);};var onend=function onend(){readable=false;if(!writable)callback.call(stream);};var onerror=function onerror(err){callback.call(stream,err);};var onclose=function onclose(){if(readable&&!(rs&&rs.ended)){return callback.call(stream,new ERR_STREAM_PREMATURE_CLOSE());}if(writable&&!(ws&&ws.ended)){return callback.call(stream,new ERR_STREAM_PREMATURE_CLOSE());}};var onrequest=function onrequest(){stream.req.on('finish',onfinish);};if(isRequest(stream)){stream.on('complete',onfinish);stream.on('abort',onclose);if(stream.req)onrequest();else stream.on('request',onrequest);}else if(writable&&!ws){stream.on('end',onlegacyfinish);stream.on('close',onlegacyfinish);}stream.on('end',onend);stream.on('finish',onfinish);if(opts.error!==false)stream.on('error',onerror);stream.on('close',onclose);return function(){stream.removeListener('complete',onfinish);stream.removeListener('abort',onclose);stream.removeListener('request',onrequest);if(stream.req)stream.req.removeListener('finish',onfinish);stream.removeListener('end',onlegacyfinish);stream.removeListener('close',onlegacyfinish);stream.removeListener('finish',onfinish);stream.removeListener('end',onend);stream.removeListener('error',onerror);stream.removeListener('close',onclose);};}module.exports=eos;},6816:function(module,__unusedexports,__webpack_require__){var forge=__webpack_require__(7938);module.exports=forge.jsbn=forge.jsbn||{};var dbits;var canary=0xdeadbeefcafe;var j_lm=(canary&0xffffff)==0xefcafe;function BigInteger(a,b,c){this.data=[];if(a!=null)if("number"==typeof a)this.fromNumber(a,b,c);else if(b==null&&"string"!=typeof a)this.fromString(a,256);else this.fromString(a,b);}forge.jsbn.BigInteger=BigInteger;function nbi(){return new BigInteger(null);}function am1(i,x,w,j,c,n){while(--n>=0){var v=x*this.data[i++]+w.data[j]+c;c=Math.floor(v/0x4000000);w.data[j++]=v&0x3ffffff;}return c;}function am2(i,x,w,j,c,n){var xl=x&0x7fff,xh=x>>15;while(--n>=0){var l=this.data[i]&0x7fff;var h=this.data[i++]>>15;var m=xh*l+h*xl;l=xl*l+((m&0x7fff)<<15)+w.data[j]+(c&0x3fffffff);c=(l>>>30)+(m>>>15)+xh*h+(c>>>30);w.data[j++]=l&0x3fffffff;}return c;}function am3(i,x,w,j,c,n){var xl=x&0x3fff,xh=x>>14;while(--n>=0){var l=this.data[i]&0x3fff;var h=this.data[i++]>>14;var m=xh*l+h*xl;l=xl*l+((m&0x3fff)<<14)+w.data[j]+c;c=(l>>28)+(m>>14)+xh*h;w.data[j++]=l&0xfffffff;}return c;}if(typeof navigator==='undefined'){BigInteger.prototype.am=am3;dbits=28;}else if(j_lm&&navigator.appName=="Microsoft Internet Explorer"){BigInteger.prototype.am=am2;dbits=30;}else if(j_lm&&navigator.appName!="Netscape"){BigInteger.prototype.am=am1;dbits=26;}else{BigInteger.prototype.am=am3;dbits=28;}BigInteger.prototype.DB=dbits;BigInteger.prototype.DM=(1<<dbits)-1;BigInteger.prototype.DV=1<<dbits;var BI_FP=52;BigInteger.prototype.FV=Math.pow(2,BI_FP);BigInteger.prototype.F1=BI_FP-dbits;BigInteger.prototype.F2=2*dbits-BI_FP;var BI_RM="0123456789abcdefghijklmnopqrstuvwxyz";var BI_RC=new Array();var rr,vv;rr="0".charCodeAt(0);for(vv=0;vv<=9;++vv)BI_RC[rr++]=vv;rr="a".charCodeAt(0);for(vv=10;vv<36;++vv)BI_RC[rr++]=vv;rr="A".charCodeAt(0);for(vv=10;vv<36;++vv)BI_RC[rr++]=vv;function int2char(n){return BI_RM.charAt(n);}function intAt(s,i){var c=BI_RC[s.charCodeAt(i)];return c==null?-1:c;}function bnpCopyTo(r){for(var i=this.t-1;i>=0;--i)r.data[i]=this.data[i];r.t=this.t;r.s=this.s;}function bnpFromInt(x){this.t=1;this.s=x<0?-1:0;if(x>0)this.data[0]=x;else if(x<-1)this.data[0]=x+this.DV;else this.t=0;}function nbv(i){var r=nbi();r.fromInt(i);return r;}function bnpFromString(s,b){var k;if(b==16)k=4;else if(b==8)k=3;else if(b==256)k=8;else if(b==2)k=1;else if(b==32)k=5;else if(b==4)k=2;else{this.fromRadix(s,b);return;}this.t=0;this.s=0;var i=s.length,mi=false,sh=0;while(--i>=0){var x=k==8?s[i]&0xff:intAt(s,i);if(x<0){if(s.charAt(i)=="-")mi=true;continue;}mi=false;if(sh==0)this.data[this.t++]=x;else if(sh+k>this.DB){this.data[this.t-1]|=(x&(1<<this.DB-sh)-1)<<sh;this.data[this.t++]=x>>this.DB-sh;}else this.data[this.t-1]|=x<<sh;sh+=k;if(sh>=this.DB)sh-=this.DB;}if(k==8&&(s[0]&0x80)!=0){this.s=-1;if(sh>0)this.data[this.t-1]|=(1<<this.DB-sh)-1<<sh;}this.clamp();if(mi)BigInteger.ZERO.subTo(this,this);}function bnpClamp(){var c=this.s&this.DM;while(this.t>0&&this.data[this.t-1]==c)--this.t;}function bnToString(b){if(this.s<0)return"-"+this.negate().toString(b);var k;if(b==16)k=4;else if(b==8)k=3;else if(b==2)k=1;else if(b==32)k=5;else if(b==4)k=2;else return this.toRadix(b);var km=(1<<k)-1,d,m=false,r="",i=this.t;var p=this.DB-i*this.DB%k;if(i-->0){if(p<this.DB&&(d=this.data[i]>>p)>0){m=true;r=int2char(d);}while(i>=0){if(p<k){d=(this.data[i]&(1<<p)-1)<<k-p;d|=this.data[--i]>>(p+=this.DB-k);}else{d=this.data[i]>>(p-=k)&km;if(p<=0){p+=this.DB;--i;}}if(d>0)m=true;if(m)r+=int2char(d);}}return m?r:"0";}function bnNegate(){var r=nbi();BigInteger.ZERO.subTo(this,r);return r;}function bnAbs(){return this.s<0?this.negate():this;}function bnCompareTo(a){var r=this.s-a.s;if(r!=0)return r;var i=this.t;r=i-a.t;if(r!=0)return this.s<0?-r:r;while(--i>=0)if((r=this.data[i]-a.data[i])!=0)return r;return 0;}function nbits(x){var r=1,t;if((t=x>>>16)!=0){x=t;r+=16;}if((t=x>>8)!=0){x=t;r+=8;}if((t=x>>4)!=0){x=t;r+=4;}if((t=x>>2)!=0){x=t;r+=2;}if((t=x>>1)!=0){x=t;r+=1;}return r;}function bnBitLength(){if(this.t<=0)return 0;return this.DB*(this.t-1)+nbits(this.data[this.t-1]^this.s&this.DM);}function bnpDLShiftTo(n,r){var i;for(i=this.t-1;i>=0;--i)r.data[i+n]=this.data[i];for(i=n-1;i>=0;--i)r.data[i]=0;r.t=this.t+n;r.s=this.s;}function bnpDRShiftTo(n,r){for(var i=n;i<this.t;++i)r.data[i-n]=this.data[i];r.t=Math.max(this.t-n,0);r.s=this.s;}function bnpLShiftTo(n,r){var bs=n%this.DB;var cbs=this.DB-bs;var bm=(1<<cbs)-1;var ds=Math.floor(n/this.DB),c=this.s<<bs&this.DM,i;for(i=this.t-1;i>=0;--i){r.data[i+ds+1]=this.data[i]>>cbs|c;c=(this.data[i]&bm)<<bs;}for(i=ds-1;i>=0;--i)r.data[i]=0;r.data[ds]=c;r.t=this.t+ds+1;r.s=this.s;r.clamp();}function bnpRShiftTo(n,r){r.s=this.s;var ds=Math.floor(n/this.DB);if(ds>=this.t){r.t=0;return;}var bs=n%this.DB;var cbs=this.DB-bs;var bm=(1<<bs)-1;r.data[0]=this.data[ds]>>bs;for(var i=ds+1;i<this.t;++i){r.data[i-ds-1]|=(this.data[i]&bm)<<cbs;r.data[i-ds]=this.data[i]>>bs;}if(bs>0)r.data[this.t-ds-1]|=(this.s&bm)<<cbs;r.t=this.t-ds;r.clamp();}function bnpSubTo(a,r){var i=0,c=0,m=Math.min(a.t,this.t);while(i<m){c+=this.data[i]-a.data[i];r.data[i++]=c&this.DM;c>>=this.DB;}if(a.t<this.t){c-=a.s;while(i<this.t){c+=this.data[i];r.data[i++]=c&this.DM;c>>=this.DB;}c+=this.s;}else{c+=this.s;while(i<a.t){c-=a.data[i];r.data[i++]=c&this.DM;c>>=this.DB;}c-=a.s;}r.s=c<0?-1:0;if(c<-1)r.data[i++]=this.DV+c;else if(c>0)r.data[i++]=c;r.t=i;r.clamp();}function bnpMultiplyTo(a,r){var x=this.abs(),y=a.abs();var i=x.t;r.t=i+y.t;while(--i>=0)r.data[i]=0;for(i=0;i<y.t;++i)r.data[i+x.t]=x.am(0,y.data[i],r,i,0,x.t);r.s=0;r.clamp();if(this.s!=a.s)BigInteger.ZERO.subTo(r,r);}function bnpSquareTo(r){var x=this.abs();var i=r.t=2*x.t;while(--i>=0)r.data[i]=0;for(i=0;i<x.t-1;++i){var c=x.am(i,x.data[i],r,2*i,0,1);if((r.data[i+x.t]+=x.am(i+1,2*x.data[i],r,2*i+1,c,x.t-i-1))>=x.DV){r.data[i+x.t]-=x.DV;r.data[i+x.t+1]=1;}}if(r.t>0)r.data[r.t-1]+=x.am(i,x.data[i],r,2*i,0,1);r.s=0;r.clamp();}function bnpDivRemTo(m,q,r){var pm=m.abs();if(pm.t<=0)return;var pt=this.abs();if(pt.t<pm.t){if(q!=null)q.fromInt(0);if(r!=null)this.copyTo(r);return;}if(r==null)r=nbi();var y=nbi(),ts=this.s,ms=m.s;var nsh=this.DB-nbits(pm.data[pm.t-1]);if(nsh>0){pm.lShiftTo(nsh,y);pt.lShiftTo(nsh,r);}else{pm.copyTo(y);pt.copyTo(r);}var ys=y.t;var y0=y.data[ys-1];if(y0==0)return;var yt=y0*(1<<this.F1)+(ys>1?y.data[ys-2]>>this.F2:0);var d1=this.FV/yt,d2=(1<<this.F1)/yt,e=1<<this.F2;var i=r.t,j=i-ys,t=q==null?nbi():q;y.dlShiftTo(j,t);if(r.compareTo(t)>=0){r.data[r.t++]=1;r.subTo(t,r);}BigInteger.ONE.dlShiftTo(ys,t);t.subTo(y,y);while(y.t<ys)y.data[y.t++]=0;while(--j>=0){var qd=r.data[--i]==y0?this.DM:Math.floor(r.data[i]*d1+(r.data[i-1]+e)*d2);if((r.data[i]+=y.am(0,qd,r,j,0,ys))<qd){y.dlShiftTo(j,t);r.subTo(t,r);while(r.data[i]<--qd)r.subTo(t,r);}}if(q!=null){r.drShiftTo(ys,q);if(ts!=ms)BigInteger.ZERO.subTo(q,q);}r.t=ys;r.clamp();if(nsh>0)r.rShiftTo(nsh,r);if(ts<0)BigInteger.ZERO.subTo(r,r);}function bnMod(a){var r=nbi();this.abs().divRemTo(a,null,r);if(this.s<0&&r.compareTo(BigInteger.ZERO)>0)a.subTo(r,r);return r;}function Classic(m){this.m=m;}function cConvert(x){if(x.s<0||x.compareTo(this.m)>=0)return x.mod(this.m);else return x;}function cRevert(x){return x;}function cReduce(x){x.divRemTo(this.m,null,x);}function cMulTo(x,y,r){x.multiplyTo(y,r);this.reduce(r);}function cSqrTo(x,r){x.squareTo(r);this.reduce(r);}Classic.prototype.convert=cConvert;Classic.prototype.revert=cRevert;Classic.prototype.reduce=cReduce;Classic.prototype.mulTo=cMulTo;Classic.prototype.sqrTo=cSqrTo;function bnpInvDigit(){if(this.t<1)return 0;var x=this.data[0];if((x&1)==0)return 0;var y=x&3;y=y*(2-(x&0xf)*y)&0xf;y=y*(2-(x&0xff)*y)&0xff;y=y*(2-((x&0xffff)*y&0xffff))&0xffff;y=y*(2-x*y%this.DV)%this.DV;return y>0?this.DV-y:-y;}function Montgomery(m){this.m=m;this.mp=m.invDigit();this.mpl=this.mp&0x7fff;this.mph=this.mp>>15;this.um=(1<<m.DB-15)-1;this.mt2=2*m.t;}function montConvert(x){var r=nbi();x.abs().dlShiftTo(this.m.t,r);r.divRemTo(this.m,null,r);if(x.s<0&&r.compareTo(BigInteger.ZERO)>0)this.m.subTo(r,r);return r;}function montRevert(x){var r=nbi();x.copyTo(r);this.reduce(r);return r;}function montReduce(x){while(x.t<=this.mt2)x.data[x.t++]=0;for(var i=0;i<this.m.t;++i){var j=x.data[i]&0x7fff;var u0=j*this.mpl+((j*this.mph+(x.data[i]>>15)*this.mpl&this.um)<<15)&x.DM;j=i+this.m.t;x.data[j]+=this.m.am(0,u0,x,i,0,this.m.t);while(x.data[j]>=x.DV){x.data[j]-=x.DV;x.data[++j]++;}}x.clamp();x.drShiftTo(this.m.t,x);if(x.compareTo(this.m)>=0)x.subTo(this.m,x);}function montSqrTo(x,r){x.squareTo(r);this.reduce(r);}function montMulTo(x,y,r){x.multiplyTo(y,r);this.reduce(r);}Montgomery.prototype.convert=montConvert;Montgomery.prototype.revert=montRevert;Montgomery.prototype.reduce=montReduce;Montgomery.prototype.mulTo=montMulTo;Montgomery.prototype.sqrTo=montSqrTo;function bnpIsEven(){return(this.t>0?this.data[0]&1:this.s)==0;}function bnpExp(e,z){if(e>0xffffffff||e<1)return BigInteger.ONE;var r=nbi(),r2=nbi(),g=z.convert(this),i=nbits(e)-1;g.copyTo(r);while(--i>=0){z.sqrTo(r,r2);if((e&1<<i)>0)z.mulTo(r2,g,r);else{var t=r;r=r2;r2=t;}}return z.revert(r);}function bnModPowInt(e,m){var z;if(e<256||m.isEven())z=new Classic(m);else z=new Montgomery(m);return this.exp(e,z);}BigInteger.prototype.copyTo=bnpCopyTo;BigInteger.prototype.fromInt=bnpFromInt;BigInteger.prototype.fromString=bnpFromString;BigInteger.prototype.clamp=bnpClamp;BigInteger.prototype.dlShiftTo=bnpDLShiftTo;BigInteger.prototype.drShiftTo=bnpDRShiftTo;BigInteger.prototype.lShiftTo=bnpLShiftTo;BigInteger.prototype.rShiftTo=bnpRShiftTo;BigInteger.prototype.subTo=bnpSubTo;BigInteger.prototype.multiplyTo=bnpMultiplyTo;BigInteger.prototype.squareTo=bnpSquareTo;BigInteger.prototype.divRemTo=bnpDivRemTo;BigInteger.prototype.invDigit=bnpInvDigit;BigInteger.prototype.isEven=bnpIsEven;BigInteger.prototype.exp=bnpExp;BigInteger.prototype.toString=bnToString;BigInteger.prototype.negate=bnNegate;BigInteger.prototype.abs=bnAbs;BigInteger.prototype.compareTo=bnCompareTo;BigInteger.prototype.bitLength=bnBitLength;BigInteger.prototype.mod=bnMod;BigInteger.prototype.modPowInt=bnModPowInt;BigInteger.ZERO=nbv(0);BigInteger.ONE=nbv(1);function bnClone(){var r=nbi();this.copyTo(r);return r;}function bnIntValue(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;else if(this.t==0)return-1;}else if(this.t==1)return this.data[0];else if(this.t==0)return 0;return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0];}function bnByteValue(){return this.t==0?this.s:this.data[0]<<24>>24;}function bnShortValue(){return this.t==0?this.s:this.data[0]<<16>>16;}function bnpChunkSize(r){return Math.floor(Math.LN2*this.DB/Math.log(r));}function bnSigNum(){if(this.s<0)return-1;else if(this.t<=0||this.t==1&&this.data[0]<=0)return 0;else return 1;}function bnpToRadix(b){if(b==null)b=10;if(this.signum()==0||b<2||b>36)return"0";var cs=this.chunkSize(b);var a=Math.pow(b,cs);var d=nbv(a),y=nbi(),z=nbi(),r="";this.divRemTo(d,y,z);while(y.signum()>0){r=(a+z.intValue()).toString(b).substr(1)+r;y.divRemTo(d,y,z);}return z.intValue().toString(b)+r;}function bnpFromRadix(s,b){this.fromInt(0);if(b==null)b=10;var cs=this.chunkSize(b);var d=Math.pow(b,cs),mi=false,j=0,w=0;for(var i=0;i<s.length;++i){var x=intAt(s,i);if(x<0){if(s.charAt(i)=="-"&&this.signum()==0)mi=true;continue;}w=b*w+x;if(++j>=cs){this.dMultiply(d);this.dAddOffset(w,0);j=0;w=0;}}if(j>0){this.dMultiply(Math.pow(b,j));this.dAddOffset(w,0);}if(mi)BigInteger.ZERO.subTo(this,this);}function bnpFromNumber(a,b,c){if("number"==typeof b){if(a<2)this.fromInt(1);else{this.fromNumber(a,c);if(!this.testBit(a-1))this.bitwiseTo(BigInteger.ONE.shiftLeft(a-1),op_or,this);if(this.isEven())this.dAddOffset(1,0);while(!this.isProbablePrime(b)){this.dAddOffset(2,0);if(this.bitLength()>a)this.subTo(BigInteger.ONE.shiftLeft(a-1),this);}}}else{var x=new Array(),t=a&7;x.length=(a>>3)+1;b.nextBytes(x);if(t>0)x[0]&=(1<<t)-1;else x[0]=0;this.fromString(x,256);}}function bnToByteArray(){var i=this.t,r=new Array();r[0]=this.s;var p=this.DB-i*this.DB%8,d,k=0;if(i-->0){if(p<this.DB&&(d=this.data[i]>>p)!=(this.s&this.DM)>>p)r[k++]=d|this.s<<this.DB-p;while(i>=0){if(p<8){d=(this.data[i]&(1<<p)-1)<<8-p;d|=this.data[--i]>>(p+=this.DB-8);}else{d=this.data[i]>>(p-=8)&0xff;if(p<=0){p+=this.DB;--i;}}if((d&0x80)!=0)d|=-256;if(k==0&&(this.s&0x80)!=(d&0x80))++k;if(k>0||d!=this.s)r[k++]=d;}}return r;}function bnEquals(a){return this.compareTo(a)==0;}function bnMin(a){return this.compareTo(a)<0?this:a;}function bnMax(a){return this.compareTo(a)>0?this:a;}function bnpBitwiseTo(a,op,r){var i,f,m=Math.min(a.t,this.t);for(i=0;i<m;++i)r.data[i]=op(this.data[i],a.data[i]);if(a.t<this.t){f=a.s&this.DM;for(i=m;i<this.t;++i)r.data[i]=op(this.data[i],f);r.t=this.t;}else{f=this.s&this.DM;for(i=m;i<a.t;++i)r.data[i]=op(f,a.data[i]);r.t=a.t;}r.s=op(this.s,a.s);r.clamp();}function op_and(x,y){return x&y;}function bnAnd(a){var r=nbi();this.bitwiseTo(a,op_and,r);return r;}function op_or(x,y){return x|y;}function bnOr(a){var r=nbi();this.bitwiseTo(a,op_or,r);return r;}function op_xor(x,y){return x^y;}function bnXor(a){var r=nbi();this.bitwiseTo(a,op_xor,r);return r;}function op_andnot(x,y){return x&~y;}function bnAndNot(a){var r=nbi();this.bitwiseTo(a,op_andnot,r);return r;}function bnNot(){var r=nbi();for(var i=0;i<this.t;++i)r.data[i]=this.DM&~this.data[i];r.t=this.t;r.s=~this.s;return r;}function bnShiftLeft(n){var r=nbi();if(n<0)this.rShiftTo(-n,r);else this.lShiftTo(n,r);return r;}function bnShiftRight(n){var r=nbi();if(n<0)this.lShiftTo(-n,r);else this.rShiftTo(n,r);return r;}function lbit(x){if(x==0)return-1;var r=0;if((x&0xffff)==0){x>>=16;r+=16;}if((x&0xff)==0){x>>=8;r+=8;}if((x&0xf)==0){x>>=4;r+=4;}if((x&3)==0){x>>=2;r+=2;}if((x&1)==0)++r;return r;}function bnGetLowestSetBit(){for(var i=0;i<this.t;++i)if(this.data[i]!=0)return i*this.DB+lbit(this.data[i]);if(this.s<0)return this.t*this.DB;return-1;}function cbit(x){var r=0;while(x!=0){x&=x-1;++r;}return r;}function bnBitCount(){var r=0,x=this.s&this.DM;for(var i=0;i<this.t;++i)r+=cbit(this.data[i]^x);return r;}function bnTestBit(n){var j=Math.floor(n/this.DB);if(j>=this.t)return this.s!=0;return(this.data[j]&1<<n%this.DB)!=0;}function bnpChangeBit(n,op){var r=BigInteger.ONE.shiftLeft(n);this.bitwiseTo(r,op,r);return r;}function bnSetBit(n){return this.changeBit(n,op_or);}function bnClearBit(n){return this.changeBit(n,op_andnot);}function bnFlipBit(n){return this.changeBit(n,op_xor);}function bnpAddTo(a,r){var i=0,c=0,m=Math.min(a.t,this.t);while(i<m){c+=this.data[i]+a.data[i];r.data[i++]=c&this.DM;c>>=this.DB;}if(a.t<this.t){c+=a.s;while(i<this.t){c+=this.data[i];r.data[i++]=c&this.DM;c>>=this.DB;}c+=this.s;}else{c+=this.s;while(i<a.t){c+=a.data[i];r.data[i++]=c&this.DM;c>>=this.DB;}c+=a.s;}r.s=c<0?-1:0;if(c>0)r.data[i++]=c;else if(c<-1)r.data[i++]=this.DV+c;r.t=i;r.clamp();}function bnAdd(a){var r=nbi();this.addTo(a,r);return r;}function bnSubtract(a){var r=nbi();this.subTo(a,r);return r;}function bnMultiply(a){var r=nbi();this.multiplyTo(a,r);return r;}function bnDivide(a){var r=nbi();this.divRemTo(a,r,null);return r;}function bnRemainder(a){var r=nbi();this.divRemTo(a,null,r);return r;}function bnDivideAndRemainder(a){var q=nbi(),r=nbi();this.divRemTo(a,q,r);return new Array(q,r);}function bnpDMultiply(n){this.data[this.t]=this.am(0,n-1,this,0,0,this.t);++this.t;this.clamp();}function bnpDAddOffset(n,w){if(n==0)return;while(this.t<=w)this.data[this.t++]=0;this.data[w]+=n;while(this.data[w]>=this.DV){this.data[w]-=this.DV;if(++w>=this.t)this.data[this.t++]=0;++this.data[w];}}function NullExp(){}function nNop(x){return x;}function nMulTo(x,y,r){x.multiplyTo(y,r);}function nSqrTo(x,r){x.squareTo(r);}NullExp.prototype.convert=nNop;NullExp.prototype.revert=nNop;NullExp.prototype.mulTo=nMulTo;NullExp.prototype.sqrTo=nSqrTo;function bnPow(e){return this.exp(e,new NullExp());}function bnpMultiplyLowerTo(a,n,r){var i=Math.min(this.t+a.t,n);r.s=0;r.t=i;while(i>0)r.data[--i]=0;var j;for(j=r.t-this.t;i<j;++i)r.data[i+this.t]=this.am(0,a.data[i],r,i,0,this.t);for(j=Math.min(a.t,n);i<j;++i)this.am(0,a.data[i],r,i,0,n-i);r.clamp();}function bnpMultiplyUpperTo(a,n,r){--n;var i=r.t=this.t+a.t-n;r.s=0;while(--i>=0)r.data[i]=0;for(i=Math.max(n-this.t,0);i<a.t;++i)r.data[this.t+i-n]=this.am(n-i,a.data[i],r,0,0,this.t+i-n);r.clamp();r.drShiftTo(1,r);}function Barrett(m){this.r2=nbi();this.q3=nbi();BigInteger.ONE.dlShiftTo(2*m.t,this.r2);this.mu=this.r2.divide(m);this.m=m;}function barrettConvert(x){if(x.s<0||x.t>2*this.m.t)return x.mod(this.m);else if(x.compareTo(this.m)<0)return x;else{var r=nbi();x.copyTo(r);this.reduce(r);return r;}}function barrettRevert(x){return x;}function barrettReduce(x){x.drShiftTo(this.m.t-1,this.r2);if(x.t>this.m.t+1){x.t=this.m.t+1;x.clamp();}this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3);this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);while(x.compareTo(this.r2)<0)x.dAddOffset(1,this.m.t+1);x.subTo(this.r2,x);while(x.compareTo(this.m)>=0)x.subTo(this.m,x);}function barrettSqrTo(x,r){x.squareTo(r);this.reduce(r);}function barrettMulTo(x,y,r){x.multiplyTo(y,r);this.reduce(r);}Barrett.prototype.convert=barrettConvert;Barrett.prototype.revert=barrettRevert;Barrett.prototype.reduce=barrettReduce;Barrett.prototype.mulTo=barrettMulTo;Barrett.prototype.sqrTo=barrettSqrTo;function bnModPow(e,m){var i=e.bitLength(),k,r=nbv(1),z;if(i<=0)return r;else if(i<18)k=1;else if(i<48)k=3;else if(i<144)k=4;else if(i<768)k=5;else k=6;if(i<8)z=new Classic(m);else if(m.isEven())z=new Barrett(m);else z=new Montgomery(m);var g=new Array(),n=3,k1=k-1,km=(1<<k)-1;g[1]=z.convert(this);if(k>1){var g2=nbi();z.sqrTo(g[1],g2);while(n<=km){g[n]=nbi();z.mulTo(g2,g[n-2],g[n]);n+=2;}}var j=e.t-1,w,is1=true,r2=nbi(),t;i=nbits(e.data[j])-1;while(j>=0){if(i>=k1)w=e.data[j]>>i-k1&km;else{w=(e.data[j]&(1<<i+1)-1)<<k1-i;if(j>0)w|=e.data[j-1]>>this.DB+i-k1;}n=k;while((w&1)==0){w>>=1;--n;}if((i-=n)<0){i+=this.DB;--j;}if(is1){g[w].copyTo(r);is1=false;}else{while(n>1){z.sqrTo(r,r2);z.sqrTo(r2,r);n-=2;}if(n>0)z.sqrTo(r,r2);else{t=r;r=r2;r2=t;}z.mulTo(r2,g[w],r);}while(j>=0&&(e.data[j]&1<<i)==0){z.sqrTo(r,r2);t=r;r=r2;r2=t;if(--i<0){i=this.DB-1;--j;}}}return z.revert(r);}function bnGCD(a){var x=this.s<0?this.negate():this.clone();var y=a.s<0?a.negate():a.clone();if(x.compareTo(y)<0){var t=x;x=y;y=t;}var i=x.getLowestSetBit(),g=y.getLowestSetBit();if(g<0)return x;if(i<g)g=i;if(g>0){x.rShiftTo(g,x);y.rShiftTo(g,y);}while(x.signum()>0){if((i=x.getLowestSetBit())>0)x.rShiftTo(i,x);if((i=y.getLowestSetBit())>0)y.rShiftTo(i,y);if(x.compareTo(y)>=0){x.subTo(y,x);x.rShiftTo(1,x);}else{y.subTo(x,y);y.rShiftTo(1,y);}}if(g>0)y.lShiftTo(g,y);return y;}function bnpModInt(n){if(n<=0)return 0;var d=this.DV%n,r=this.s<0?n-1:0;if(this.t>0)if(d==0)r=this.data[0]%n;else for(var i=this.t-1;i>=0;--i)r=(d*r+this.data[i])%n;return r;}function bnModInverse(m){var ac=m.isEven();if(this.isEven()&&ac||m.signum()==0)return BigInteger.ZERO;var u=m.clone(),v=this.clone();var a=nbv(1),b=nbv(0),c=nbv(0),d=nbv(1);while(u.signum()!=0){while(u.isEven()){u.rShiftTo(1,u);if(ac){if(!a.isEven()||!b.isEven()){a.addTo(this,a);b.subTo(m,b);}a.rShiftTo(1,a);}else if(!b.isEven())b.subTo(m,b);b.rShiftTo(1,b);}while(v.isEven()){v.rShiftTo(1,v);if(ac){if(!c.isEven()||!d.isEven()){c.addTo(this,c);d.subTo(m,d);}c.rShiftTo(1,c);}else if(!d.isEven())d.subTo(m,d);d.rShiftTo(1,d);}if(u.compareTo(v)>=0){u.subTo(v,u);if(ac)a.subTo(c,a);b.subTo(d,b);}else{v.subTo(u,v);if(ac)c.subTo(a,c);d.subTo(b,d);}}if(v.compareTo(BigInteger.ONE)!=0)return BigInteger.ZERO;if(d.compareTo(m)>=0)return d.subtract(m);if(d.signum()<0)d.addTo(m,d);else return d;if(d.signum()<0)return d.add(m);else return d;}var lowprimes=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509];var lplim=(1<<26)/lowprimes[lowprimes.length-1];function bnIsProbablePrime(t){var i,x=this.abs();if(x.t==1&&x.data[0]<=lowprimes[lowprimes.length-1]){for(i=0;i<lowprimes.length;++i)if(x.data[0]==lowprimes[i])return true;return false;}if(x.isEven())return false;i=1;while(i<lowprimes.length){var m=lowprimes[i],j=i+1;while(j<lowprimes.length&&m<lplim)m*=lowprimes[j++];m=x.modInt(m);while(i<j)if(m%lowprimes[i++]==0)return false;}return x.millerRabin(t);}function bnpMillerRabin(t){var n1=this.subtract(BigInteger.ONE);var k=n1.getLowestSetBit();if(k<=0)return false;var r=n1.shiftRight(k);var prng=bnGetPrng();var a;for(var i=0;i<t;++i){do{a=new BigInteger(this.bitLength(),prng);}while(a.compareTo(BigInteger.ONE)<=0||a.compareTo(n1)>=0);var y=a.modPow(r,this);if(y.compareTo(BigInteger.ONE)!=0&&y.compareTo(n1)!=0){var j=1;while(j++<k&&y.compareTo(n1)!=0){y=y.modPowInt(2,this);if(y.compareTo(BigInteger.ONE)==0)return false;}if(y.compareTo(n1)!=0)return false;}}return true;}function bnGetPrng(){return{nextBytes:function(x){for(var i=0;i<x.length;++i){x[i]=Math.floor(Math.random()*0x0100);}}};}BigInteger.prototype.chunkSize=bnpChunkSize;BigInteger.prototype.toRadix=bnpToRadix;BigInteger.prototype.fromRadix=bnpFromRadix;BigInteger.prototype.fromNumber=bnpFromNumber;BigInteger.prototype.bitwiseTo=bnpBitwiseTo;BigInteger.prototype.changeBit=bnpChangeBit;BigInteger.prototype.addTo=bnpAddTo;BigInteger.prototype.dMultiply=bnpDMultiply;BigInteger.prototype.dAddOffset=bnpDAddOffset;BigInteger.prototype.multiplyLowerTo=bnpMultiplyLowerTo;BigInteger.prototype.multiplyUpperTo=bnpMultiplyUpperTo;BigInteger.prototype.modInt=bnpModInt;BigInteger.prototype.millerRabin=bnpMillerRabin;BigInteger.prototype.clone=bnClone;BigInteger.prototype.intValue=bnIntValue;BigInteger.prototype.byteValue=bnByteValue;BigInteger.prototype.shortValue=bnShortValue;BigInteger.prototype.signum=bnSigNum;BigInteger.prototype.toByteArray=bnToByteArray;BigInteger.prototype.equals=bnEquals;BigInteger.prototype.min=bnMin;BigInteger.prototype.max=bnMax;BigInteger.prototype.and=bnAnd;BigInteger.prototype.or=bnOr;BigInteger.prototype.xor=bnXor;BigInteger.prototype.andNot=bnAndNot;BigInteger.prototype.not=bnNot;BigInteger.prototype.shiftLeft=bnShiftLeft;BigInteger.prototype.shiftRight=bnShiftRight;BigInteger.prototype.getLowestSetBit=bnGetLowestSetBit;BigInteger.prototype.bitCount=bnBitCount;BigInteger.prototype.testBit=bnTestBit;BigInteger.prototype.setBit=bnSetBit;BigInteger.prototype.clearBit=bnClearBit;BigInteger.prototype.flipBit=bnFlipBit;BigInteger.prototype.add=bnAdd;BigInteger.prototype.subtract=bnSubtract;BigInteger.prototype.multiply=bnMultiply;BigInteger.prototype.divide=bnDivide;BigInteger.prototype.remainder=bnRemainder;BigInteger.prototype.divideAndRemainder=bnDivideAndRemainder;BigInteger.prototype.modPow=bnModPow;BigInteger.prototype.modInverse=bnModInverse;BigInteger.prototype.pow=bnPow;BigInteger.prototype.gcd=bnGCD;BigInteger.prototype.isProbablePrime=bnIsProbablePrime;},6827:function(module){module.exports=function(onPause){var wait,read,paused;function reader(_read){read=_read;return function(abort,cb){if(!paused)read(abort,cb);else wait=[abort,cb];};}reader.pause=function(){if(paused)return;paused=true;onPause&&onPause(paused);};reader.resume=function(){if(!paused)return;paused=false;onPause&&onPause(paused);if(wait){var _wait=wait;wait=null;read(_wait[0],_wait[1]);}};return reader;};},6851:function(module,__unusedexports,__webpack_require__){"use strict";const pull=__webpack_require__(418);const assert=__webpack_require__(3930);const select=__webpack_require__(2154);const selectHandler=__webpack_require__(8292);const lsHandler=__webpack_require__(7236);const matchExact=__webpack_require__(4112);const util=__webpack_require__(4639);const Connection=__webpack_require__(378).Connection;const PROTOCOL_ID=__webpack_require__(1875).PROTOCOL_ID;class Listener{constructor(){this.handlers={ls:{handlerFunc:(protocol,conn)=>lsHandler(this,conn),matchFunc:matchExact}};this.log=util.log.listener();}handle(rawConn,callback){this.log('listener handle conn');const selectStream=select(PROTOCOL_ID,(err,conn)=>{if(err){return callback(err);}const shConn=new Connection(conn,rawConn);const sh=selectHandler(shConn,this.handlers,this.log);pull(shConn,sh,shConn);callback();},this.log);pull(rawConn,selectStream,rawConn);}addHandler(protocol,handlerFunc,matchFunc){this.log('adding handler: '+protocol);assert(typeof handlerFunc==='function','handler must be a function');if(this.handlers[protocol]){this.log('overwriting handler for '+protocol);}if(!matchFunc){matchFunc=matchExact;}this.handlers[protocol]={handlerFunc:handlerFunc,matchFunc:matchFunc};}}module.exports=Listener;},6857:function(module){"use strict";module.exports=()=>({Addresses:{Swarm:['/ip4/0.0.0.0/tcp/4002','/ip4/127.0.0.1/tcp/4003/ws'],API:'/ip4/127.0.0.1/tcp/5002',Gateway:'/ip4/127.0.0.1/tcp/9090'},Discovery:{MDNS:{Enabled:true,Interval:10},webRTCStar:{Enabled:true}},Bootstrap:['/ip4/104.236.176.52/tcp/4001/ipfs/QmSoLnSGccFuZQJzRadHn95W2CrSFmZuTdDWP8HXaHca9z','/ip4/104.131.131.82/tcp/4001/ipfs/QmaCpDMGvV2BGHeYERUEnRQAwe3N8SzbUtfsmvsqQLuvuJ','/ip4/104.236.179.241/tcp/4001/ipfs/QmSoLPppuBtQSGwKDZT2M73ULpjvfd3aZ6ha4oFGL1KrGM','/ip4/162.243.248.213/tcp/4001/ipfs/QmSoLueR4xBeUbY9WZ9xGUUxunbKWcrNFTDAadQJmocnWm','/ip4/128.199.219.111/tcp/4001/ipfs/QmSoLSafTMBsPKadTEgaXctDQVcqN88CNLHXMkTNwMKPnu','/ip4/104.236.76.40/tcp/4001/ipfs/QmSoLV4Bbm51jM9C4gDYZQ9Cy3U6aXMJDAbzgu2fzaDs64','/ip4/178.62.158.247/tcp/4001/ipfs/QmSoLer265NRgSp2LA3dPaeykiS1J6DifTC88f5uVQKNAd','/ip4/178.62.61.185/tcp/4001/ipfs/QmSoLMeWqB7YGVLJN3pNLQpmmEk35v6wYtsMGLzSr5QBU3','/ip4/104.236.151.122/tcp/4001/ipfs/QmSoLju6m7xTh3DuokvT3886QRYqxAzb1kShaanJgW36yx','/ip6/2604:a880:1:20::1f9:9001/tcp/4001/ipfs/QmSoLnSGccFuZQJzRadHn95W2CrSFmZuTdDWP8HXaHca9z','/ip6/2604:a880:1:20::203:d001/tcp/4001/ipfs/QmSoLPppuBtQSGwKDZT2M73ULpjvfd3aZ6ha4oFGL1KrGM','/ip6/2604:a880:0:1010::23:d001/tcp/4001/ipfs/QmSoLueR4xBeUbY9WZ9xGUUxunbKWcrNFTDAadQJmocnWm','/ip6/2400:6180:0:d0::151:6001/tcp/4001/ipfs/QmSoLSafTMBsPKadTEgaXctDQVcqN88CNLHXMkTNwMKPnu','/ip6/2604:a880:800:10::4a:5001/tcp/4001/ipfs/QmSoLV4Bbm51jM9C4gDYZQ9Cy3U6aXMJDAbzgu2fzaDs64','/ip6/2a03:b0c0:0:1010::23:1001/tcp/4001/ipfs/QmSoLer265NRgSp2LA3dPaeykiS1J6DifTC88f5uVQKNAd','/ip6/2a03:b0c0:1:d0::e7:1/tcp/4001/ipfs/QmSoLMeWqB7YGVLJN3pNLQpmmEk35v6wYtsMGLzSr5QBU3','/ip6/2604:a880:1:20::1d9:6001/tcp/4001/ipfs/QmSoLju6m7xTh3DuokvT3886QRYqxAzb1kShaanJgW36yx','/dns4/node0.preload.ipfs.io/tcp/443/wss/ipfs/QmZMxNdpMkewiVZLMRxaNxUeZpDUb34pWjZ1kZvsd16Zic','/dns4/node1.preload.ipfs.io/tcp/443/wss/ipfs/Qmbut9Ywz9YEDrz8ySBSgWyJk41Uvm2QJPhwDJzJyGFsD6']});},6862:function(module,__unusedexports,__webpack_require__){"use strict";var _=__webpack_require__(6064);var $=__webpack_require__(5107);var BufferUtil=__webpack_require__(9657);var JSUtil=__webpack_require__(8416);function Opcode(num){if(!(this instanceof Opcode)){return new Opcode(num);}var value;if(_.isNumber(num)){value=num;}else if(_.isString(num)){value=Opcode.map[num];}else{throw new TypeError('Unrecognized num type: "'+typeof num+'" for Opcode');}JSUtil.defineImmutable(this,{num:value});return this;}Opcode.fromBuffer=function(buf){$.checkArgument(BufferUtil.isBuffer(buf));return new Opcode(Number('0x'+buf.toString('hex')));};Opcode.fromNumber=function(num){$.checkArgument(_.isNumber(num));return new Opcode(num);};Opcode.fromString=function(str){$.checkArgument(_.isString(str));var value=Opcode.map[str];if(typeof value==='undefined'){throw new TypeError('Invalid opcodestr');}return new Opcode(value);};Opcode.prototype.toHex=function(){return this.num.toString(16);};Opcode.prototype.toBuffer=function(){return new Buffer(this.toHex(),'hex');};Opcode.prototype.toNumber=function(){return this.num;};Opcode.prototype.toString=function(){var str=Opcode.reverseMap[this.num];if(typeof str==='undefined'){throw new Error('Opcode does not have a string representation');}return str;};Opcode.smallInt=function(n){$.checkArgument(_.isNumber(n),'Invalid Argument: n should be number');$.checkArgument(n>=0&&n<=16,'Invalid Argument: n must be between 0 and 16');if(n===0){return Opcode('OP_0');}return new Opcode(Opcode.map.OP_1+n-1);};Opcode.map={OP_FALSE:0,OP_0:0,OP_PUSHDATA1:76,OP_PUSHDATA2:77,OP_PUSHDATA4:78,OP_1NEGATE:79,OP_RESERVED:80,OP_TRUE:81,OP_1:81,OP_2:82,OP_3:83,OP_4:84,OP_5:85,OP_6:86,OP_7:87,OP_8:88,OP_9:89,OP_10:90,OP_11:91,OP_12:92,OP_13:93,OP_14:94,OP_15:95,OP_16:96,OP_NOP:97,OP_VER:98,OP_IF:99,OP_NOTIF:100,OP_VERIF:101,OP_VERNOTIF:102,OP_ELSE:103,OP_ENDIF:104,OP_VERIFY:105,OP_RETURN:106,OP_TOALTSTACK:107,OP_FROMALTSTACK:108,OP_2DROP:109,OP_2DUP:110,OP_3DUP:111,OP_2OVER:112,OP_2ROT:113,OP_2SWAP:114,OP_IFDUP:115,OP_DEPTH:116,OP_DROP:117,OP_DUP:118,OP_NIP:119,OP_OVER:120,OP_PICK:121,OP_ROLL:122,OP_ROT:123,OP_SWAP:124,OP_TUCK:125,OP_CAT:126,OP_SUBSTR:127,OP_LEFT:128,OP_RIGHT:129,OP_SIZE:130,OP_INVERT:131,OP_AND:132,OP_OR:133,OP_XOR:134,OP_EQUAL:135,OP_EQUALVERIFY:136,OP_RESERVED1:137,OP_RESERVED2:138,OP_1ADD:139,OP_1SUB:140,OP_2MUL:141,OP_2DIV:142,OP_NEGATE:143,OP_ABS:144,OP_NOT:145,OP_0NOTEQUAL:146,OP_ADD:147,OP_SUB:148,OP_MUL:149,OP_DIV:150,OP_MOD:151,OP_LSHIFT:152,OP_RSHIFT:153,OP_BOOLAND:154,OP_BOOLOR:155,OP_NUMEQUAL:156,OP_NUMEQUALVERIFY:157,OP_NUMNOTEQUAL:158,OP_LESSTHAN:159,OP_GREATERTHAN:160,OP_LESSTHANOREQUAL:161,OP_GREATERTHANOREQUAL:162,OP_MIN:163,OP_MAX:164,OP_WITHIN:165,OP_RIPEMD160:166,OP_SHA1:167,OP_SHA256:168,OP_HASH160:169,OP_HASH256:170,OP_CODESEPARATOR:171,OP_CHECKSIG:172,OP_CHECKSIGVERIFY:173,OP_CHECKMULTISIG:174,OP_CHECKMULTISIGVERIFY:175,OP_CHECKLOCKTIMEVERIFY:177,OP_NOP1:176,OP_NOP2:177,OP_NOP3:178,OP_NOP4:179,OP_NOP5:180,OP_NOP6:181,OP_NOP7:182,OP_NOP8:183,OP_NOP9:184,OP_NOP10:185,OP_PUBKEYHASH:253,OP_PUBKEY:254,OP_INVALIDOPCODE:255};Opcode.reverseMap=[];for(var k in Opcode.map){Opcode.reverseMap[Opcode.map[k]]=k;}_.extend(Opcode,Opcode.map);Opcode.isSmallIntOp=function(opcode){if(opcode instanceof Opcode){opcode=opcode.toNumber();}return opcode===Opcode.map.OP_0||opcode>=Opcode.map.OP_1&&opcode<=Opcode.map.OP_16;};Opcode.prototype.inspect=function(){return'<Opcode: '+this.toString()+', hex: '+this.toHex()+', decimal: '+this.num+'>';};module.exports=Opcode;},6877:function(module,__unusedexports,__webpack_require__){"use strict";var _=__webpack_require__(6064);var $=__webpack_require__(5107);var inherits=__webpack_require__(2915);var BufferUtil=__webpack_require__(9657);var JSUtil=__webpack_require__(8416);var PublicKey=__webpack_require__(4721);var errors=__webpack_require__(6379);var Signature=__webpack_require__(406);function TransactionSignature(arg){if(!(this instanceof TransactionSignature)){return new TransactionSignature(arg);}if(arg instanceof TransactionSignature){return arg;}if(_.isObject(arg)){return this._fromObject(arg);}throw new errors.InvalidArgument('TransactionSignatures must be instantiated from an object');}inherits(TransactionSignature,Signature);TransactionSignature.prototype._fromObject=function(arg){this._checkObjectArgs(arg);this.publicKey=new PublicKey(arg.publicKey);this.prevTxId=BufferUtil.isBuffer(arg.prevTxId)?arg.prevTxId:new Buffer(arg.prevTxId,'hex');this.outputIndex=arg.outputIndex;this.inputIndex=arg.inputIndex;this.signature=arg.signature instanceof Signature?arg.signature:BufferUtil.isBuffer(arg.signature)?Signature.fromBuffer(arg.signature):Signature.fromString(arg.signature);this.sigtype=arg.sigtype;return this;};TransactionSignature.prototype._checkObjectArgs=function(arg){$.checkArgument(PublicKey(arg.publicKey),'publicKey');$.checkArgument(!_.isUndefined(arg.inputIndex),'inputIndex');$.checkArgument(!_.isUndefined(arg.outputIndex),'outputIndex');$.checkState(_.isNumber(arg.inputIndex),'inputIndex must be a number');$.checkState(_.isNumber(arg.outputIndex),'outputIndex must be a number');$.checkArgument(arg.signature,'signature');$.checkArgument(arg.prevTxId,'prevTxId');$.checkState(arg.signature instanceof Signature||BufferUtil.isBuffer(arg.signature)||JSUtil.isHexa(arg.signature),'signature must be a buffer or hexa value');$.checkState(BufferUtil.isBuffer(arg.prevTxId)||JSUtil.isHexa(arg.prevTxId),'prevTxId must be a buffer or hexa value');$.checkArgument(arg.sigtype,'sigtype');$.checkState(_.isNumber(arg.sigtype),'sigtype must be a number');};TransactionSignature.prototype.toObject=TransactionSignature.prototype.toJSON=function toObject(){return{publicKey:this.publicKey.toString(),prevTxId:this.prevTxId.toString('hex'),outputIndex:this.outputIndex,inputIndex:this.inputIndex,signature:this.signature.toString(),sigtype:this.sigtype};};TransactionSignature.fromObject=function(object){$.checkArgument(object);return new TransactionSignature(object);};module.exports=TransactionSignature;},6886:function(module){module.exports=require("stream");},6891:function(module,__unusedexports,__webpack_require__){"use strict";var pna=__webpack_require__(88);module.exports=Readable;var isArray=__webpack_require__(4797);var Duplex;Readable.ReadableState=ReadableState;var EE=__webpack_require__(4859).EventEmitter;var EElistenerCount=function(emitter,type){return emitter.listeners(type).length;};var Stream=__webpack_require__(6402);var Buffer=__webpack_require__(7572).Buffer;var OurUint8Array=global.Uint8Array||function(){};function _uint8ArrayToBuffer(chunk){return Buffer.from(chunk);}function _isUint8Array(obj){return Buffer.isBuffer(obj)||obj instanceof OurUint8Array;}var util=__webpack_require__(5548);util.inherits=__webpack_require__(92);var debugUtil=__webpack_require__(649);var debug=void 0;if(debugUtil&&debugUtil.debuglog){debug=debugUtil.debuglog('stream');}else{debug=function(){};}var BufferList=__webpack_require__(4770);var destroyImpl=__webpack_require__(865);var StringDecoder;util.inherits(Readable,Stream);var kProxyEvents=['error','close','destroy','pause','resume'];function prependListener(emitter,event,fn){if(typeof emitter.prependListener==='function')return emitter.prependListener(event,fn);if(!emitter._events||!emitter._events[event])emitter.on(event,fn);else if(isArray(emitter._events[event]))emitter._events[event].unshift(fn);else emitter._events[event]=[fn,emitter._events[event]];}function ReadableState(options,stream){Duplex=Duplex||__webpack_require__(7896);options=options||{};var isDuplex=stream instanceof Duplex;this.objectMode=!!options.objectMode;if(isDuplex)this.objectMode=this.objectMode||!!options.readableObjectMode;var hwm=options.highWaterMark;var readableHwm=options.readableHighWaterMark;var defaultHwm=this.objectMode?16:16*1024;if(hwm||hwm===0)this.highWaterMark=hwm;else if(isDuplex&&(readableHwm||readableHwm===0))this.highWaterMark=readableHwm;else this.highWaterMark=defaultHwm;this.highWaterMark=Math.floor(this.highWaterMark);this.buffer=new BufferList();this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.ended=false;this.endEmitted=false;this.reading=false;this.sync=true;this.needReadable=false;this.emittedReadable=false;this.readableListening=false;this.resumeScheduled=false;this.destroyed=false;this.defaultEncoding=options.defaultEncoding||'utf8';this.awaitDrain=0;this.readingMore=false;this.decoder=null;this.encoding=null;if(options.encoding){if(!StringDecoder)StringDecoder=__webpack_require__(1235).StringDecoder;this.decoder=new StringDecoder(options.encoding);this.encoding=options.encoding;}}function Readable(options){Duplex=Duplex||__webpack_require__(7896);if(!(this instanceof Readable))return new Readable(options);this._readableState=new ReadableState(options,this);this.readable=true;if(options){if(typeof options.read==='function')this._read=options.read;if(typeof options.destroy==='function')this._destroy=options.destroy;}Stream.call(this);}Object.defineProperty(Readable.prototype,'destroyed',{get:function(){if(this._readableState===undefined){return false;}return this._readableState.destroyed;},set:function(value){if(!this._readableState){return;}this._readableState.destroyed=value;}});Readable.prototype.destroy=destroyImpl.destroy;Readable.prototype._undestroy=destroyImpl.undestroy;Readable.prototype._destroy=function(err,cb){this.push(null);cb(err);};Readable.prototype.push=function(chunk,encoding){var state=this._readableState;var skipChunkCheck;if(!state.objectMode){if(typeof chunk==='string'){encoding=encoding||state.defaultEncoding;if(encoding!==state.encoding){chunk=Buffer.from(chunk,encoding);encoding='';}skipChunkCheck=true;}}else{skipChunkCheck=true;}return readableAddChunk(this,chunk,encoding,false,skipChunkCheck);};Readable.prototype.unshift=function(chunk){return readableAddChunk(this,chunk,null,true,false);};function readableAddChunk(stream,chunk,encoding,addToFront,skipChunkCheck){var state=stream._readableState;if(chunk===null){state.reading=false;onEofChunk(stream,state);}else{var er;if(!skipChunkCheck)er=chunkInvalid(state,chunk);if(er){stream.emit('error',er);}else if(state.objectMode||chunk&&chunk.length>0){if(typeof chunk!=='string'&&!state.objectMode&&Object.getPrototypeOf(chunk)!==Buffer.prototype){chunk=_uint8ArrayToBuffer(chunk);}if(addToFront){if(state.endEmitted)stream.emit('error',new Error('stream.unshift() after end event'));else addChunk(stream,state,chunk,true);}else if(state.ended){stream.emit('error',new Error('stream.push() after EOF'));}else{state.reading=false;if(state.decoder&&!encoding){chunk=state.decoder.write(chunk);if(state.objectMode||chunk.length!==0)addChunk(stream,state,chunk,false);else maybeReadMore(stream,state);}else{addChunk(stream,state,chunk,false);}}}else if(!addToFront){state.reading=false;}}return needMoreData(state);}function addChunk(stream,state,chunk,addToFront){if(state.flowing&&state.length===0&&!state.sync){stream.emit('data',chunk);stream.read(0);}else{state.length+=state.objectMode?1:chunk.length;if(addToFront)state.buffer.unshift(chunk);else state.buffer.push(chunk);if(state.needReadable)emitReadable(stream);}maybeReadMore(stream,state);}function chunkInvalid(state,chunk){var er;if(!_isUint8Array(chunk)&&typeof chunk!=='string'&&chunk!==undefined&&!state.objectMode){er=new TypeError('Invalid non-string/buffer chunk');}return er;}function needMoreData(state){return!state.ended&&(state.needReadable||state.length<state.highWaterMark||state.length===0);}Readable.prototype.isPaused=function(){return this._readableState.flowing===false;};Readable.prototype.setEncoding=function(enc){if(!StringDecoder)StringDecoder=__webpack_require__(1235).StringDecoder;this._readableState.decoder=new StringDecoder(enc);this._readableState.encoding=enc;return this;};var MAX_HWM=0x800000;function computeNewHighWaterMark(n){if(n>=MAX_HWM){n=MAX_HWM;}else{n--;n|=n>>>1;n|=n>>>2;n|=n>>>4;n|=n>>>8;n|=n>>>16;n++;}return n;}function howMuchToRead(n,state){if(n<=0||state.length===0&&state.ended)return 0;if(state.objectMode)return 1;if(n!==n){if(state.flowing&&state.length)return state.buffer.head.data.length;else return state.length;}if(n>state.highWaterMark)state.highWaterMark=computeNewHighWaterMark(n);if(n<=state.length)return n;if(!state.ended){state.needReadable=true;return 0;}return state.length;}Readable.prototype.read=function(n){debug('read',n);n=parseInt(n,10);var state=this._readableState;var nOrig=n;if(n!==0)state.emittedReadable=false;if(n===0&&state.needReadable&&(state.length>=state.highWaterMark||state.ended)){debug('read: emitReadable',state.length,state.ended);if(state.length===0&&state.ended)endReadable(this);else emitReadable(this);return null;}n=howMuchToRead(n,state);if(n===0&&state.ended){if(state.length===0)endReadable(this);return null;}var doRead=state.needReadable;debug('need readable',doRead);if(state.length===0||state.length-n<state.highWaterMark){doRead=true;debug('length less than watermark',doRead);}if(state.ended||state.reading){doRead=false;debug('reading or ended',doRead);}else if(doRead){debug('do read');state.reading=true;state.sync=true;if(state.length===0)state.needReadable=true;this._read(state.highWaterMark);state.sync=false;if(!state.reading)n=howMuchToRead(nOrig,state);}var ret;if(n>0)ret=fromList(n,state);else ret=null;if(ret===null){state.needReadable=true;n=0;}else{state.length-=n;}if(state.length===0){if(!state.ended)state.needReadable=true;if(nOrig!==n&&state.ended)endReadable(this);}if(ret!==null)this.emit('data',ret);return ret;};function onEofChunk(stream,state){if(state.ended)return;if(state.decoder){var chunk=state.decoder.end();if(chunk&&chunk.length){state.buffer.push(chunk);state.length+=state.objectMode?1:chunk.length;}}state.ended=true;emitReadable(stream);}function emitReadable(stream){var state=stream._readableState;state.needReadable=false;if(!state.emittedReadable){debug('emitReadable',state.flowing);state.emittedReadable=true;if(state.sync)pna.nextTick(emitReadable_,stream);else emitReadable_(stream);}}function emitReadable_(stream){debug('emit readable');stream.emit('readable');flow(stream);}function maybeReadMore(stream,state){if(!state.readingMore){state.readingMore=true;pna.nextTick(maybeReadMore_,stream,state);}}function maybeReadMore_(stream,state){var len=state.length;while(!state.reading&&!state.flowing&&!state.ended&&state.length<state.highWaterMark){debug('maybeReadMore read 0');stream.read(0);if(len===state.length)break;else len=state.length;}state.readingMore=false;}Readable.prototype._read=function(n){this.emit('error',new Error('_read() is not implemented'));};Readable.prototype.pipe=function(dest,pipeOpts){var src=this;var state=this._readableState;switch(state.pipesCount){case 0:state.pipes=dest;break;case 1:state.pipes=[state.pipes,dest];break;default:state.pipes.push(dest);break;}state.pipesCount+=1;debug('pipe count=%d opts=%j',state.pipesCount,pipeOpts);var doEnd=(!pipeOpts||pipeOpts.end!==false)&&dest!==process.stdout&&dest!==process.stderr;var endFn=doEnd?onend:unpipe;if(state.endEmitted)pna.nextTick(endFn);else src.once('end',endFn);dest.on('unpipe',onunpipe);function onunpipe(readable,unpipeInfo){debug('onunpipe');if(readable===src){if(unpipeInfo&&unpipeInfo.hasUnpiped===false){unpipeInfo.hasUnpiped=true;cleanup();}}}function onend(){debug('onend');dest.end();}var ondrain=pipeOnDrain(src);dest.on('drain',ondrain);var cleanedUp=false;function cleanup(){debug('cleanup');dest.removeListener('close',onclose);dest.removeListener('finish',onfinish);dest.removeListener('drain',ondrain);dest.removeListener('error',onerror);dest.removeListener('unpipe',onunpipe);src.removeListener('end',onend);src.removeListener('end',unpipe);src.removeListener('data',ondata);cleanedUp=true;if(state.awaitDrain&&(!dest._writableState||dest._writableState.needDrain))ondrain();}var increasedAwaitDrain=false;src.on('data',ondata);function ondata(chunk){debug('ondata');increasedAwaitDrain=false;var ret=dest.write(chunk);if(false===ret&&!increasedAwaitDrain){if((state.pipesCount===1&&state.pipes===dest||state.pipesCount>1&&indexOf(state.pipes,dest)!==-1)&&!cleanedUp){debug('false write response, pause',src._readableState.awaitDrain);src._readableState.awaitDrain++;increasedAwaitDrain=true;}src.pause();}}function onerror(er){debug('onerror',er);unpipe();dest.removeListener('error',onerror);if(EElistenerCount(dest,'error')===0)dest.emit('error',er);}prependListener(dest,'error',onerror);function onclose(){dest.removeListener('finish',onfinish);unpipe();}dest.once('close',onclose);function onfinish(){debug('onfinish');dest.removeListener('close',onclose);unpipe();}dest.once('finish',onfinish);function unpipe(){debug('unpipe');src.unpipe(dest);}dest.emit('pipe',src);if(!state.flowing){debug('pipe resume');src.resume();}return dest;};function pipeOnDrain(src){return function(){var state=src._readableState;debug('pipeOnDrain',state.awaitDrain);if(state.awaitDrain)state.awaitDrain--;if(state.awaitDrain===0&&EElistenerCount(src,'data')){state.flowing=true;flow(src);}};}Readable.prototype.unpipe=function(dest){var state=this._readableState;var unpipeInfo={hasUnpiped:false};if(state.pipesCount===0)return this;if(state.pipesCount===1){if(dest&&dest!==state.pipes)return this;if(!dest)dest=state.pipes;state.pipes=null;state.pipesCount=0;state.flowing=false;if(dest)dest.emit('unpipe',this,unpipeInfo);return this;}if(!dest){var dests=state.pipes;var len=state.pipesCount;state.pipes=null;state.pipesCount=0;state.flowing=false;for(var i=0;i<len;i++){dests[i].emit('unpipe',this,unpipeInfo);}return this;}var index=indexOf(state.pipes,dest);if(index===-1)return this;state.pipes.splice(index,1);state.pipesCount-=1;if(state.pipesCount===1)state.pipes=state.pipes[0];dest.emit('unpipe',this,unpipeInfo);return this;};Readable.prototype.on=function(ev,fn){var res=Stream.prototype.on.call(this,ev,fn);if(ev==='data'){if(this._readableState.flowing!==false)this.resume();}else if(ev==='readable'){var state=this._readableState;if(!state.endEmitted&&!state.readableListening){state.readableListening=state.needReadable=true;state.emittedReadable=false;if(!state.reading){pna.nextTick(nReadingNextTick,this);}else if(state.length){emitReadable(this);}}}return res;};Readable.prototype.addListener=Readable.prototype.on;function nReadingNextTick(self){debug('readable nexttick read 0');self.read(0);}Readable.prototype.resume=function(){var state=this._readableState;if(!state.flowing){debug('resume');state.flowing=true;resume(this,state);}return this;};function resume(stream,state){if(!state.resumeScheduled){state.resumeScheduled=true;pna.nextTick(resume_,stream,state);}}function resume_(stream,state){if(!state.reading){debug('resume read 0');stream.read(0);}state.resumeScheduled=false;state.awaitDrain=0;stream.emit('resume');flow(stream);if(state.flowing&&!state.reading)stream.read(0);}Readable.prototype.pause=function(){debug('call pause flowing=%j',this._readableState.flowing);if(false!==this._readableState.flowing){debug('pause');this._readableState.flowing=false;this.emit('pause');}return this;};function flow(stream){var state=stream._readableState;debug('flow',state.flowing);while(state.flowing&&stream.read()!==null){}}Readable.prototype.wrap=function(stream){var _this=this;var state=this._readableState;var paused=false;stream.on('end',function(){debug('wrapped end');if(state.decoder&&!state.ended){var chunk=state.decoder.end();if(chunk&&chunk.length)_this.push(chunk);}_this.push(null);});stream.on('data',function(chunk){debug('wrapped data');if(state.decoder)chunk=state.decoder.write(chunk);if(state.objectMode&&(chunk===null||chunk===undefined))return;else if(!state.objectMode&&(!chunk||!chunk.length))return;var ret=_this.push(chunk);if(!ret){paused=true;stream.pause();}});for(var i in stream){if(this[i]===undefined&&typeof stream[i]==='function'){this[i]=function(method){return function(){return stream[method].apply(stream,arguments);};}(i);}}for(var n=0;n<kProxyEvents.length;n++){stream.on(kProxyEvents[n],this.emit.bind(this,kProxyEvents[n]));}this._read=function(n){debug('wrapped _read',n);if(paused){paused=false;stream.resume();}};return this;};Object.defineProperty(Readable.prototype,'readableHighWaterMark',{enumerable:false,get:function(){return this._readableState.highWaterMark;}});Readable._fromList=fromList;function fromList(n,state){if(state.length===0)return null;var ret;if(state.objectMode)ret=state.buffer.shift();else if(!n||n>=state.length){if(state.decoder)ret=state.buffer.join('');else if(state.buffer.length===1)ret=state.buffer.head.data;else ret=state.buffer.concat(state.length);state.buffer.clear();}else{ret=fromListPartial(n,state.buffer,state.decoder);}return ret;}function fromListPartial(n,list,hasStrings){var ret;if(n<list.head.data.length){ret=list.head.data.slice(0,n);list.head.data=list.head.data.slice(n);}else if(n===list.head.data.length){ret=list.shift();}else{ret=hasStrings?copyFromBufferString(n,list):copyFromBuffer(n,list);}return ret;}function copyFromBufferString(n,list){var p=list.head;var c=1;var ret=p.data;n-=ret.length;while(p=p.next){var str=p.data;var nb=n>str.length?str.length:n;if(nb===str.length)ret+=str;else ret+=str.slice(0,n);n-=nb;if(n===0){if(nb===str.length){++c;if(p.next)list.head=p.next;else list.head=list.tail=null;}else{list.head=p;p.data=str.slice(nb);}break;}++c;}list.length-=c;return ret;}function copyFromBuffer(n,list){var ret=Buffer.allocUnsafe(n);var p=list.head;var c=1;p.data.copy(ret);n-=p.data.length;while(p=p.next){var buf=p.data;var nb=n>buf.length?buf.length:n;buf.copy(ret,ret.length-n,0,nb);n-=nb;if(n===0){if(nb===buf.length){++c;if(p.next)list.head=p.next;else list.head=list.tail=null;}else{list.head=p;p.data=buf.slice(nb);}break;}++c;}list.length-=c;return ret;}function endReadable(stream){var state=stream._readableState;if(state.length>0)throw new Error('"endReadable()" called on non-empty stream');if(!state.endEmitted){state.ended=true;pna.nextTick(endReadableNT,state,stream);}}function endReadableNT(state,stream){if(!state.endEmitted&&state.length===0){state.endEmitted=true;stream.readable=false;stream.emit('end');}}function indexOf(xs,x){for(var i=0,l=xs.length;i<l;i++){if(xs[i]===x)return i;}return-1;}},6893:function(module,__unusedexports,__webpack_require__){"use strict";var fs=__webpack_require__(662);var Decoder=__webpack_require__(4053);module.exports=function(filename,opts){var mode=opts&&opts.mode||0x1B6;var bufferSize=opts&&(opts.bufferSize||opts.buffer&&opts.buffer.length)||1024*64;var start=opts&&opts.start||0;var end=opts&&opts.end||Number.MAX_SAFE_INTEGER;var fd=opts&&opts.fd;var ended,closeNext,busy;var _buffer=opts&&opts.buffer||new Buffer(bufferSize);var live=opts&&!!opts.live;var liveCb,closeCb;var watcher;if(live){watcher=fs.watch(filename,{persistent:opts.persistent!==false},function(event){if(liveCb&&event==='change'){var cb=liveCb;liveCb=null;closeNext=false;readNext(cb);}});}var flags=opts&&opts.flags||'r';function readNext(cb){if(closeNext){if(!live)close(cb);else liveCb=cb;return;}var toRead=Math.min(end-start,bufferSize);busy=true;fs.read(fd,_buffer,0,toRead,start,function(err,count,buffer){busy=false;start+=count;if(closeNext&&!live){close(closeCb);return cb(closeNext);}if(ended){return cb(err||ended);}if(err){return cb(err);}if(count===buffer.length){cb(null,buffer);}else if(count===0&&live){liveCb=cb;closeNext=true;}else{closeNext=true;cb(null,buffer.slice(0,count));}});_buffer=opts&&opts.buffer||new Buffer(Math.min(end-start,bufferSize));}function open(cb){busy=true;fs.open(filename,flags,mode,function(err,descriptor){fd=descriptor;busy=false;if(closeNext){close(closeCb);return cb(closeNext);}if(err){return cb(err);}return readNext(cb);});}function close(cb){if(!cb)throw new Error('close must have cb');if(watcher)watcher.close();if(opts&&opts.autoClose===false)return cb(true);else if(busy){closeCb=cb;return closeNext=true;}else if(!fd){return cb(true);}else{fs.close(fd,function(err){fd=null;cb(err||true);});}}function source(end,cb){if(end){ended=end;live=false;if(liveCb){liveCb(end||true);}close(cb);}else if(ended){cb(ended);}else if(!fd){open(cb);}else readNext(cb);};if(opts&&opts.encoding)return Decoder(opts.encoding)(source);return source;};},6899:function(module){"use strict";function Protocols(proto){if(typeof proto==='number'){if(Protocols.codes[proto]){return Protocols.codes[proto];}throw new Error('no protocol with code: '+proto);}else if(typeof proto==='string'||proto instanceof String){if(Protocols.names[proto]){return Protocols.names[proto];}throw new Error('no protocol with name: '+proto);}throw new Error('invalid protocol id type: '+proto);}const V=-1;Protocols.lengthPrefixedVarSize=V;Protocols.V=V;Protocols.table=[[4,32,'ip4'],[6,16,'tcp'],[33,16,'dccp'],[41,128,'ip6'],[42,V,'ip6zone'],[53,V,'dns','resolvable'],[54,V,'dns4','resolvable'],[55,V,'dns6','resolvable'],[56,V,'dnsaddr','resolvable'],[132,16,'sctp'],[273,16,'udp'],[275,0,'p2p-webrtc-star'],[276,0,'p2p-webrtc-direct'],[277,0,'p2p-stardust'],[290,0,'p2p-circuit'],[301,0,'udt'],[302,0,'utp'],[400,V,'unix',false,'path'],[421,V,'p2p'],[421,V,'ipfs'],[443,0,'https'],[444,96,'onion'],[445,296,'onion3'],[446,V,'garlic64'],[460,0,'quic'],[477,0,'ws'],[478,0,'wss'],[479,0,'p2p-websocket-star'],[480,0,'http']];Protocols.names={};Protocols.codes={};Protocols.table.map(row=>{const proto=p.apply(null,row);Protocols.codes[proto.code]=proto;Protocols.names[proto.name]=proto;});Protocols.object=p;function p(code,size,name,resolvable,path){return{code:code,size:size,name:name,resolvable:Boolean(resolvable),path:Boolean(path)};}module.exports=Protocols;},6904:function(module,__unusedexports,__webpack_require__){"use strict";const PeerId=__webpack_require__(1832);const PeerInfo=__webpack_require__(9265);const multiaddr=__webpack_require__(5920);function getPeerInfo(peer,peerBook){let peerInfo;if(PeerInfo.isPeerInfo(peer)){return peer;}if(multiaddr.isMultiaddr(peer)){const peerIdB58Str=peer.getPeerId();try{peerInfo=peerBook.get(peerIdB58Str);}catch(err){peerInfo=new PeerInfo(PeerId.createFromB58String(peerIdB58Str));}peerInfo.multiaddrs.add(peer);return peerInfo;}if(PeerId.isPeerId(peer)){const peerIdB58Str=peer.toB58String();try{return peerBook.get(peerIdB58Str);}catch(err){throw new Error('Couldnt get PeerInfo');}}throw new Error('peer type not recognized');}module.exports=getPeerInfo;},6906:function(module,exports,__webpack_require__){"use strict";exports=module.exports;exports.multicodec='/ipfs/id/1.0.0';exports.listener=__webpack_require__(2501);exports.dialer=__webpack_require__(7994);exports.message=__webpack_require__(8933);},6907:function(module,__unusedexports,__webpack_require__){"use strict";const dns=__webpack_require__(9897);const _=__webpack_require__(8154);const errcode=__webpack_require__(4999);module.exports=(domain,opts,callback)=>{resolveDnslink(domain).catch(err=>{if(err.code!=='ENOTFOUND'&&err.code!=='ERR_DNSLINK_NOT_FOUND')throw err;if(domain.startsWith('_dnslink.')){const rootDomain=domain.replace('_dnslink.','');return resolveDnslink(rootDomain);}const _dnslinkDomain=`_dnslink.${domain}`;return resolveDnslink(_dnslinkDomain);}).then(dnslinkRecord=>{callback(null,dnslinkRecord.replace('dnslink=',''));}).catch(callback);};function resolveDnslink(domain){const DNSLINK_REGEX=/^dnslink=.+$/;return new Promise((resolve,reject)=>{dns.resolveTxt(domain,(err,records)=>{if(err)return reject(err);resolve(records);});}).then(records=>{return _.chain(records).flatten().filter(record=>{return DNSLINK_REGEX.test(record);}).value();}).then(dnslinkRecords=>{if(dnslinkRecords.length===0){throw errcode(`No dnslink records found for domain: ${domain}`,'ERR_DNSLINK_NOT_FOUND');}return dnslinkRecords[0];});}},6917:function(module,__unusedexports,__webpack_require__){"use strict";var assert=__webpack_require__(7529);var der=__webpack_require__(3014);var messages=__webpack_require__(4110);function initCompressedValue(value,defaultValue){if(value===undefined)return defaultValue;assert.isBoolean(value,messages.COMPRESSED_TYPE_INVALID);return value;}module.exports=function(secp256k1){return{privateKeyVerify:function(privateKey){assert.isBuffer(privateKey,messages.EC_PRIVATE_KEY_TYPE_INVALID);return privateKey.length===32&&secp256k1.privateKeyVerify(privateKey);},privateKeyExport:function(privateKey,compressed){assert.isBuffer(privateKey,messages.EC_PRIVATE_KEY_TYPE_INVALID);assert.isBufferLength(privateKey,32,messages.EC_PRIVATE_KEY_LENGTH_INVALID);compressed=initCompressedValue(compressed,true);var publicKey=secp256k1.privateKeyExport(privateKey,compressed);return der.privateKeyExport(privateKey,publicKey,compressed);},privateKeyImport:function(privateKey){assert.isBuffer(privateKey,messages.EC_PRIVATE_KEY_TYPE_INVALID);privateKey=der.privateKeyImport(privateKey);if(privateKey&&privateKey.length===32&&secp256k1.privateKeyVerify(privateKey))return privateKey;throw new Error(messages.EC_PRIVATE_KEY_IMPORT_DER_FAIL);},privateKeyNegate:function(privateKey){assert.isBuffer(privateKey,messages.EC_PRIVATE_KEY_TYPE_INVALID);assert.isBufferLength(privateKey,32,messages.EC_PRIVATE_KEY_LENGTH_INVALID);return secp256k1.privateKeyNegate(privateKey);},privateKeyModInverse:function(privateKey){assert.isBuffer(privateKey,messages.EC_PRIVATE_KEY_TYPE_INVALID);assert.isBufferLength(privateKey,32,messages.EC_PRIVATE_KEY_LENGTH_INVALID);return secp256k1.privateKeyModInverse(privateKey);},privateKeyTweakAdd:function(privateKey,tweak){assert.isBuffer(privateKey,messages.EC_PRIVATE_KEY_TYPE_INVALID);assert.isBufferLength(privateKey,32,messages.EC_PRIVATE_KEY_LENGTH_INVALID);assert.isBuffer(tweak,messages.TWEAK_TYPE_INVALID);assert.isBufferLength(tweak,32,messages.TWEAK_LENGTH_INVALID);return secp256k1.privateKeyTweakAdd(privateKey,tweak);},privateKeyTweakMul:function(privateKey,tweak){assert.isBuffer(privateKey,messages.EC_PRIVATE_KEY_TYPE_INVALID);assert.isBufferLength(privateKey,32,messages.EC_PRIVATE_KEY_LENGTH_INVALID);assert.isBuffer(tweak,messages.TWEAK_TYPE_INVALID);assert.isBufferLength(tweak,32,messages.TWEAK_LENGTH_INVALID);return secp256k1.privateKeyTweakMul(privateKey,tweak);},publicKeyCreate:function(privateKey,compressed){assert.isBuffer(privateKey,messages.EC_PRIVATE_KEY_TYPE_INVALID);assert.isBufferLength(privateKey,32,messages.EC_PRIVATE_KEY_LENGTH_INVALID);compressed=initCompressedValue(compressed,true);return secp256k1.publicKeyCreate(privateKey,compressed);},publicKeyConvert:function(publicKey,compressed){assert.isBuffer(publicKey,messages.EC_PUBLIC_KEY_TYPE_INVALID);assert.isBufferLength2(publicKey,33,65,messages.EC_PUBLIC_KEY_LENGTH_INVALID);compressed=initCompressedValue(compressed,true);return secp256k1.publicKeyConvert(publicKey,compressed);},publicKeyVerify:function(publicKey){assert.isBuffer(publicKey,messages.EC_PUBLIC_KEY_TYPE_INVALID);return secp256k1.publicKeyVerify(publicKey);},publicKeyTweakAdd:function(publicKey,tweak,compressed){assert.isBuffer(publicKey,messages.EC_PUBLIC_KEY_TYPE_INVALID);assert.isBufferLength2(publicKey,33,65,messages.EC_PUBLIC_KEY_LENGTH_INVALID);assert.isBuffer(tweak,messages.TWEAK_TYPE_INVALID);assert.isBufferLength(tweak,32,messages.TWEAK_LENGTH_INVALID);compressed=initCompressedValue(compressed,true);return secp256k1.publicKeyTweakAdd(publicKey,tweak,compressed);},publicKeyTweakMul:function(publicKey,tweak,compressed){assert.isBuffer(publicKey,messages.EC_PUBLIC_KEY_TYPE_INVALID);assert.isBufferLength2(publicKey,33,65,messages.EC_PUBLIC_KEY_LENGTH_INVALID);assert.isBuffer(tweak,messages.TWEAK_TYPE_INVALID);assert.isBufferLength(tweak,32,messages.TWEAK_LENGTH_INVALID);compressed=initCompressedValue(compressed,true);return secp256k1.publicKeyTweakMul(publicKey,tweak,compressed);},publicKeyCombine:function(publicKeys,compressed){assert.isArray(publicKeys,messages.EC_PUBLIC_KEYS_TYPE_INVALID);assert.isLengthGTZero(publicKeys,messages.EC_PUBLIC_KEYS_LENGTH_INVALID);for(var i=0;i<publicKeys.length;++i){assert.isBuffer(publicKeys[i],messages.EC_PUBLIC_KEY_TYPE_INVALID);assert.isBufferLength2(publicKeys[i],33,65,messages.EC_PUBLIC_KEY_LENGTH_INVALID);}compressed=initCompressedValue(compressed,true);return secp256k1.publicKeyCombine(publicKeys,compressed);},signatureNormalize:function(signature){assert.isBuffer(signature,messages.ECDSA_SIGNATURE_TYPE_INVALID);assert.isBufferLength(signature,64,messages.ECDSA_SIGNATURE_LENGTH_INVALID);return secp256k1.signatureNormalize(signature);},signatureExport:function(signature){assert.isBuffer(signature,messages.ECDSA_SIGNATURE_TYPE_INVALID);assert.isBufferLength(signature,64,messages.ECDSA_SIGNATURE_LENGTH_INVALID);var sigObj=secp256k1.signatureExport(signature);return der.signatureExport(sigObj);},signatureImport:function(sig){assert.isBuffer(sig,messages.ECDSA_SIGNATURE_TYPE_INVALID);assert.isLengthGTZero(sig,messages.ECDSA_SIGNATURE_LENGTH_INVALID);var sigObj=der.signatureImport(sig);if(sigObj)return secp256k1.signatureImport(sigObj);throw new Error(messages.ECDSA_SIGNATURE_PARSE_DER_FAIL);},signatureImportLax:function(sig){assert.isBuffer(sig,messages.ECDSA_SIGNATURE_TYPE_INVALID);assert.isLengthGTZero(sig,messages.ECDSA_SIGNATURE_LENGTH_INVALID);var sigObj=der.signatureImportLax(sig);if(sigObj)return secp256k1.signatureImport(sigObj);throw new Error(messages.ECDSA_SIGNATURE_PARSE_DER_FAIL);},sign:function(message,privateKey,options){assert.isBuffer(message,messages.MSG32_TYPE_INVALID);assert.isBufferLength(message,32,messages.MSG32_LENGTH_INVALID);assert.isBuffer(privateKey,messages.EC_PRIVATE_KEY_TYPE_INVALID);assert.isBufferLength(privateKey,32,messages.EC_PRIVATE_KEY_LENGTH_INVALID);var data=null;var noncefn=null;if(options!==undefined){assert.isObject(options,messages.OPTIONS_TYPE_INVALID);if(options.data!==undefined){assert.isBuffer(options.data,messages.OPTIONS_DATA_TYPE_INVALID);assert.isBufferLength(options.data,32,messages.OPTIONS_DATA_LENGTH_INVALID);data=options.data;}if(options.noncefn!==undefined){assert.isFunction(options.noncefn,messages.OPTIONS_NONCEFN_TYPE_INVALID);noncefn=options.noncefn;}}return secp256k1.sign(message,privateKey,noncefn,data);},verify:function(message,signature,publicKey){assert.isBuffer(message,messages.MSG32_TYPE_INVALID);assert.isBufferLength(message,32,messages.MSG32_LENGTH_INVALID);assert.isBuffer(signature,messages.ECDSA_SIGNATURE_TYPE_INVALID);assert.isBufferLength(signature,64,messages.ECDSA_SIGNATURE_LENGTH_INVALID);assert.isBuffer(publicKey,messages.EC_PUBLIC_KEY_TYPE_INVALID);assert.isBufferLength2(publicKey,33,65,messages.EC_PUBLIC_KEY_LENGTH_INVALID);return secp256k1.verify(message,signature,publicKey);},recover:function(message,signature,recovery,compressed){assert.isBuffer(message,messages.MSG32_TYPE_INVALID);assert.isBufferLength(message,32,messages.MSG32_LENGTH_INVALID);assert.isBuffer(signature,messages.ECDSA_SIGNATURE_TYPE_INVALID);assert.isBufferLength(signature,64,messages.ECDSA_SIGNATURE_LENGTH_INVALID);assert.isNumber(recovery,messages.RECOVERY_ID_TYPE_INVALID);assert.isNumberInInterval(recovery,-1,4,messages.RECOVERY_ID_VALUE_INVALID);compressed=initCompressedValue(compressed,true);return secp256k1.recover(message,signature,recovery,compressed);},ecdh:function(publicKey,privateKey){assert.isBuffer(publicKey,messages.EC_PUBLIC_KEY_TYPE_INVALID);assert.isBufferLength2(publicKey,33,65,messages.EC_PUBLIC_KEY_LENGTH_INVALID);assert.isBuffer(privateKey,messages.EC_PRIVATE_KEY_TYPE_INVALID);assert.isBufferLength(privateKey,32,messages.EC_PRIVATE_KEY_LENGTH_INVALID);return secp256k1.ecdh(publicKey,privateKey);},ecdhUnsafe:function(publicKey,privateKey,compressed){assert.isBuffer(publicKey,messages.EC_PUBLIC_KEY_TYPE_INVALID);assert.isBufferLength2(publicKey,33,65,messages.EC_PUBLIC_KEY_LENGTH_INVALID);assert.isBuffer(privateKey,messages.EC_PRIVATE_KEY_TYPE_INVALID);assert.isBufferLength(privateKey,32,messages.EC_PRIVATE_KEY_LENGTH_INVALID);compressed=initCompressedValue(compressed,true);return secp256k1.ecdhUnsafe(publicKey,privateKey,compressed);}};};},6921:function(module,__unusedexports,__webpack_require__){var forge=__webpack_require__(7938);__webpack_require__(6321);__webpack_require__(1214);var hmac=module.exports=forge.hmac=forge.hmac||{};hmac.create=function(){var _key=null;var _md=null;var _ipadding=null;var _opadding=null;var ctx={};ctx.start=function(md,key){if(md!==null){if(typeof md==='string'){md=md.toLowerCase();if(md in forge.md.algorithms){_md=forge.md.algorithms[md].create();}else{throw new Error('Unknown hash algorithm "'+md+'"');}}else{_md=md;}}if(key===null){key=_key;}else{if(typeof key==='string'){key=forge.util.createBuffer(key);}else if(forge.util.isArray(key)){var tmp=key;key=forge.util.createBuffer();for(var i=0;i<tmp.length;++i){key.putByte(tmp[i]);}}var keylen=key.length();if(keylen>_md.blockLength){_md.start();_md.update(key.bytes());key=_md.digest();}_ipadding=forge.util.createBuffer();_opadding=forge.util.createBuffer();keylen=key.length();for(var i=0;i<keylen;++i){var tmp=key.at(i);_ipadding.putByte(0x36^tmp);_opadding.putByte(0x5C^tmp);}if(keylen<_md.blockLength){var tmp=_md.blockLength-keylen;for(var i=0;i<tmp;++i){_ipadding.putByte(0x36);_opadding.putByte(0x5C);}}_key=key;_ipadding=_ipadding.bytes();_opadding=_opadding.bytes();}_md.start();_md.update(_ipadding);};ctx.update=function(bytes){_md.update(bytes);};ctx.getMac=function(){var inner=_md.digest().bytes();_md.start();_md.update(_opadding);_md.update(inner);return _md.digest();};ctx.digest=ctx.getMac;return ctx;};},6946:function(module,__unusedexports,__webpack_require__){"use strict";module.exports=Transform;var Duplex=__webpack_require__(1283);var util=__webpack_require__(5548);util.inherits=__webpack_require__(92);util.inherits(Transform,Duplex);function afterTransform(er,data){var ts=this._transformState;ts.transforming=false;var cb=ts.writecb;if(!cb){return this.emit('error',new Error('write callback called multiple times'));}ts.writechunk=null;ts.writecb=null;if(data!=null)this.push(data);cb(er);var rs=this._readableState;rs.reading=false;if(rs.needReadable||rs.length<rs.highWaterMark){this._read(rs.highWaterMark);}}function Transform(options){if(!(this instanceof Transform))return new Transform(options);Duplex.call(this,options);this._transformState={afterTransform:afterTransform.bind(this),needTransform:false,transforming:false,writecb:null,writechunk:null,writeencoding:null};this._readableState.needReadable=true;this._readableState.sync=false;if(options){if(typeof options.transform==='function')this._transform=options.transform;if(typeof options.flush==='function')this._flush=options.flush;}this.on('prefinish',prefinish);}function prefinish(){var _this=this;if(typeof this._flush==='function'){this._flush(function(er,data){done(_this,er,data);});}else{done(this,null,null);}}Transform.prototype.push=function(chunk,encoding){this._transformState.needTransform=false;return Duplex.prototype.push.call(this,chunk,encoding);};Transform.prototype._transform=function(chunk,encoding,cb){throw new Error('_transform() is not implemented');};Transform.prototype._write=function(chunk,encoding,cb){var ts=this._transformState;ts.writecb=cb;ts.writechunk=chunk;ts.writeencoding=encoding;if(!ts.transforming){var rs=this._readableState;if(ts.needTransform||rs.needReadable||rs.length<rs.highWaterMark)this._read(rs.highWaterMark);}};Transform.prototype._read=function(n){var ts=this._transformState;if(ts.writechunk!==null&&ts.writecb&&!ts.transforming){ts.transforming=true;this._transform(ts.writechunk,ts.writeencoding,ts.afterTransform);}else{ts.needTransform=true;}};Transform.prototype._destroy=function(err,cb){var _this2=this;Duplex.prototype._destroy.call(this,err,function(err2){cb(err2);_this2.emit('close');});};function done(stream,er,data){if(er)return stream.emit('error',er);if(data!=null)stream.push(data);if(stream._writableState.length)throw new Error('Calling transform done when ws.length != 0');if(stream._transformState.transforming)throw new Error('Calling transform done when still transforming');return stream.push(null);}},6950:function(module,exports,__webpack_require__){var tty=__webpack_require__(8859);var util=__webpack_require__(649);exports=module.exports=__webpack_require__(3005);exports.init=init;exports.log=log;exports.formatArgs=formatArgs;exports.save=save;exports.load=load;exports.useColors=useColors;exports.colors=[6,2,3,4,5,1];exports.inspectOpts=Object.keys(process.env).filter(function(key){return /^debug_/i.test(key);}).reduce(function(obj,key){var prop=key.substring(6).toLowerCase().replace(/_([a-z])/g,function(_,k){return k.toUpperCase();});var val=process.env[key];if(/^(yes|on|true|enabled)$/i.test(val))val=true;else if(/^(no|off|false|disabled)$/i.test(val))val=false;else if(val==='null')val=null;else val=Number(val);obj[prop]=val;return obj;},{});var fd=parseInt(process.env.DEBUG_FD,10)||2;if(1!==fd&&2!==fd){util.deprecate(function(){},'except for stderr(2) and stdout(1), any other usage of DEBUG_FD is deprecated. Override debug.log if you want to use a different log function (https://git.io/debug_fd)')();}var stream=1===fd?process.stdout:2===fd?process.stderr:createWritableStdioStream(fd);function useColors(){return'colors'in exports.inspectOpts?Boolean(exports.inspectOpts.colors):tty.isatty(fd);}exports.formatters.o=function(v){this.inspectOpts.colors=this.useColors;return util.inspect(v,this.inspectOpts).split('\n').map(function(str){return str.trim();}).join(' ');};exports.formatters.O=function(v){this.inspectOpts.colors=this.useColors;return util.inspect(v,this.inspectOpts);};function formatArgs(args){var name=this.namespace;var useColors=this.useColors;if(useColors){var c=this.color;var prefix='  \u001b[3'+c+';1m'+name+' '+'\u001b[0m';args[0]=prefix+args[0].split('\n').join('\n'+prefix);args.push('\u001b[3'+c+'m+'+exports.humanize(this.diff)+'\u001b[0m');}else{args[0]=new Date().toUTCString()+' '+name+' '+args[0];}}function log(){return stream.write(util.format.apply(util,arguments)+'\n');}function save(namespaces){if(null==namespaces){delete process.env.DEBUG;}else{process.env.DEBUG=namespaces;}}function load(){return process.env.DEBUG;}function createWritableStdioStream(fd){var stream;var tty_wrap=process.binding('tty_wrap');switch(tty_wrap.guessHandleType(fd)){case'TTY':stream=new tty.WriteStream(fd);stream._type='tty';if(stream._handle&&stream._handle.unref){stream._handle.unref();}break;case'FILE':var fs=__webpack_require__(662);stream=new fs.SyncWriteStream(fd,{autoClose:false});stream._type='fs';break;case'PIPE':case'TCP':var net=__webpack_require__(1939);stream=new net.Socket({fd:fd,readable:false,writable:true});stream.readable=false;stream.read=null;stream._type='pipe';if(stream._handle&&stream._handle.unref){stream._handle.unref();}break;default:throw new Error('Implement me. Unknown stream file type!');}stream.fd=fd;stream._isStdio=true;return stream;}function init(debug){debug.inspectOpts={};var keys=Object.keys(exports.inspectOpts);for(var i=0;i<keys.length;i++){debug.inspectOpts[keys[i]]=exports.inspectOpts[keys[i]];}}exports.enable(load());},6955:function(module){/** PROMISIFY CALLBACK-STYLE FUNCTIONS TO ES6 PROMISES
*
* EXAMPLE:
* const fn = promisify( (callback) => callback(null, "Hello world!") );
* fn((err, str) => console.log(str));
* fn().then((str) => console.log(str));
* //Both functions, will log 'Hello world!'
*
* Note: The function you pass, may have any arguments you want, but the latest
* have to be the callback, which you will call with: next(err, value)
*
* @param method: Function/Array/Map = The function(s) to promisify
* @param options: Map =
*  "context" (default is function): The context which to apply the called function
*  "replace" (default is falsy): When passed an array/map, if to replace the original object
*
* @return: A promise if passed a function, otherwise the object with the promises
*
* @license: MIT
* @version: 1.0.3
* @author: Manuel Di Iorio
**/var createCallback=function(method,context){return function(){var args=Array.prototype.slice.call(arguments);var lastIndex=args.length-1;var lastArg=args&&args.length>0?args[lastIndex]:null;var cb=typeof lastArg==='function'?lastArg:null;if(cb){return method.apply(context,args);}return new Promise(function(resolve,reject){args.push(function(err,val){if(err)return reject(err);resolve(val);});method.apply(context,args);});};};if(false){}module.exports=function(methods,options){options=options||{};var type=Object.prototype.toString.call(methods);if(type==="[object Object]"||type==="[object Array]"){var obj=options.replace?methods:{};for(var key in methods){if(methods.hasOwnProperty(key))obj[key]=createCallback(methods[key]);}return obj;}return createCallback(methods,options.context||methods);};if(false){}},6957:function(module,__unusedexports,__webpack_require__){var Transport=__webpack_require__(4910);var parseqs=__webpack_require__(2887);var parser=__webpack_require__(5410);var inherit=__webpack_require__(1199);var yeast=__webpack_require__(2968);var debug=__webpack_require__(3114)('engine.io-client:polling');module.exports=Polling;var hasXHR2=function(){var XMLHttpRequest=__webpack_require__(5999);var xhr=new XMLHttpRequest({xdomain:false});return null!=xhr.responseType;}();function Polling(opts){var forceBase64=opts&&opts.forceBase64;if(!hasXHR2||forceBase64){this.supportsBinary=false;}Transport.call(this,opts);}inherit(Polling,Transport);Polling.prototype.name='polling';Polling.prototype.doOpen=function(){this.poll();};Polling.prototype.pause=function(onPause){var self=this;this.readyState='pausing';function pause(){debug('paused');self.readyState='paused';onPause();}if(this.polling||!this.writable){var total=0;if(this.polling){debug('we are currently polling - waiting to pause');total++;this.once('pollComplete',function(){debug('pre-pause polling complete');--total||pause();});}if(!this.writable){debug('we are currently writing - waiting to pause');total++;this.once('drain',function(){debug('pre-pause writing complete');--total||pause();});}}else{pause();}};Polling.prototype.poll=function(){debug('polling');this.polling=true;this.doPoll();this.emit('poll');};Polling.prototype.onData=function(data){var self=this;debug('polling got data %s',data);var callback=function(packet,index,total){if('opening'===self.readyState){self.onOpen();}if('close'===packet.type){self.onClose();return false;}self.onPacket(packet);};parser.decodePayload(data,this.socket.binaryType,callback);if('closed'!==this.readyState){this.polling=false;this.emit('pollComplete');if('open'===this.readyState){this.poll();}else{debug('ignoring poll - transport state "%s"',this.readyState);}}};Polling.prototype.doClose=function(){var self=this;function close(){debug('writing close packet');self.write([{type:'close'}]);}if('open'===this.readyState){debug('transport open - closing');close();}else{debug('transport not open - deferring close');this.once('open',close);}};Polling.prototype.write=function(packets){var self=this;this.writable=false;var callbackfn=function(){self.writable=true;self.emit('drain');};parser.encodePayload(packets,this.supportsBinary,function(data){self.doWrite(data,callbackfn);});};Polling.prototype.uri=function(){var query=this.query||{};var schema=this.secure?'https':'http';var port='';if(false!==this.timestampRequests){query[this.timestampParam]=yeast();}if(!this.supportsBinary&&!query.sid){query.b64=1;}query=parseqs.encode(query);if(this.port&&('https'===schema&&Number(this.port)!==443||'http'===schema&&Number(this.port)!==80)){port=':'+this.port;}if(query.length){query='?'+query;}var ipv6=this.hostname.indexOf(':')!==-1;return schema+'://'+(ipv6?'['+this.hostname+']':this.hostname)+port+this.path+query;};},6970:function(module,__unusedexports,__webpack_require__){const lazy=__webpack_require__(8643);const typef=__webpack_require__(2809);const OPS=__webpack_require__(9710);const ecc=__webpack_require__(6290);const bscript=__webpack_require__(5099);const BITCOIN_NETWORK=__webpack_require__(1215).bitcoin;const OP_INT_BASE=OPS.OP_RESERVED;function stacksEqual(a,b){if(a.length!==b.length)return false;return a.every(function(x,i){return x.equals(b[i]);});}function p2ms(a,opts){if(!a.input&&!a.output&&!(a.pubkeys&&a.m!==undefined)&&!a.signatures)throw new TypeError('Not enough data');opts=Object.assign({validate:true},opts||{});function isAcceptableSignature(x){return bscript.isCanonicalScriptSignature(x)||opts.allowIncomplete&&x===OPS.OP_0;}typef({network:typef.maybe(typef.Object),m:typef.maybe(typef.Number),n:typef.maybe(typef.Number),output:typef.maybe(typef.Buffer),pubkeys:typef.maybe(typef.arrayOf(ecc.isPoint)),signatures:typef.maybe(typef.arrayOf(isAcceptableSignature)),input:typef.maybe(typef.Buffer)},a);const network=a.network||BITCOIN_NETWORK;const o={network};let chunks;let decoded=false;function decode(output){if(decoded)return;decoded=true;chunks=bscript.decompile(output);o.m=chunks[0]-OP_INT_BASE;o.n=chunks[chunks.length-2]-OP_INT_BASE;o.pubkeys=chunks.slice(1,-2);}lazy.prop(o,'output',function(){if(!a.m)return;if(!o.n)return;if(!a.pubkeys)return;return bscript.compile([].concat(OP_INT_BASE+a.m,a.pubkeys,OP_INT_BASE+o.n,OPS.OP_CHECKMULTISIG));});lazy.prop(o,'m',function(){if(!o.output)return;decode(o.output);return o.m;});lazy.prop(o,'n',function(){if(!o.pubkeys)return;return o.pubkeys.length;});lazy.prop(o,'pubkeys',function(){if(!a.output)return;decode(a.output);return o.pubkeys;});lazy.prop(o,'signatures',function(){if(!a.input)return;return bscript.decompile(a.input).slice(1);});lazy.prop(o,'input',function(){if(!a.signatures)return;return bscript.compile([OPS.OP_0].concat(a.signatures));});lazy.prop(o,'witness',function(){if(!o.input)return;return[];});if(opts.validate){if(a.output){decode(a.output);if(!typef.Number(chunks[0]))throw new TypeError('Output is invalid');if(!typef.Number(chunks[chunks.length-2]))throw new TypeError('Output is invalid');if(chunks[chunks.length-1]!==OPS.OP_CHECKMULTISIG)throw new TypeError('Output is invalid');if(o.m<=0||o.n>16||o.m>o.n||o.n!==chunks.length-3)throw new TypeError('Output is invalid');if(!o.pubkeys.every(x=>ecc.isPoint(x)))throw new TypeError('Output is invalid');if(a.m!==undefined&&a.m!==o.m)throw new TypeError('m mismatch');if(a.n!==undefined&&a.n!==o.n)throw new TypeError('n mismatch');if(a.pubkeys&&!stacksEqual(a.pubkeys,o.pubkeys))throw new TypeError('Pubkeys mismatch');}if(a.pubkeys){if(a.n!==undefined&&a.n!==a.pubkeys.length)throw new TypeError('Pubkey count mismatch');o.n=a.pubkeys.length;if(o.n<o.m)throw new TypeError('Pubkey count cannot be less than m');}if(a.signatures){if(a.signatures.length<o.m)throw new TypeError('Not enough signatures provided');if(a.signatures.length>o.m)throw new TypeError('Too many signatures provided');}if(a.input){if(a.input[0]!==OPS.OP_0)throw new TypeError('Input is invalid');if(o.signatures.length===0||!o.signatures.every(isAcceptableSignature))throw new TypeError('Input has invalid signature(s)');if(a.signatures&&!stacksEqual(a.signatures,o.signatures))throw new TypeError('Signature mismatch');if(a.m!==undefined&&a.m!==a.signatures.length)throw new TypeError('Signature count mismatch');}}return Object.assign(o,a);}module.exports=p2ms;},6972:function(module,__unusedexports,__webpack_require__){var util=__webpack_require__(7552);function ADD64AA(v,a,b){var o0=v[a]+v[b];var o1=v[a+1]+v[b+1];if(o0>=0x100000000){o1++;}v[a]=o0;v[a+1]=o1;}function ADD64AC(v,a,b0,b1){var o0=v[a]+b0;if(b0<0){o0+=0x100000000;}var o1=v[a+1]+b1;if(o0>=0x100000000){o1++;}v[a]=o0;v[a+1]=o1;}function B2B_GET32(arr,i){return arr[i]^arr[i+1]<<8^arr[i+2]<<16^arr[i+3]<<24;}function B2B_G(a,b,c,d,ix,iy){var x0=m[ix];var x1=m[ix+1];var y0=m[iy];var y1=m[iy+1];ADD64AA(v,a,b);ADD64AC(v,a,x0,x1);var xor0=v[d]^v[a];var xor1=v[d+1]^v[a+1];v[d]=xor1;v[d+1]=xor0;ADD64AA(v,c,d);xor0=v[b]^v[c];xor1=v[b+1]^v[c+1];v[b]=xor0>>>24^xor1<<8;v[b+1]=xor1>>>24^xor0<<8;ADD64AA(v,a,b);ADD64AC(v,a,y0,y1);xor0=v[d]^v[a];xor1=v[d+1]^v[a+1];v[d]=xor0>>>16^xor1<<16;v[d+1]=xor1>>>16^xor0<<16;ADD64AA(v,c,d);xor0=v[b]^v[c];xor1=v[b+1]^v[c+1];v[b]=xor1>>>31^xor0<<1;v[b+1]=xor0>>>31^xor1<<1;}var BLAKE2B_IV32=new Uint32Array([0xF3BCC908,0x6A09E667,0x84CAA73B,0xBB67AE85,0xFE94F82B,0x3C6EF372,0x5F1D36F1,0xA54FF53A,0xADE682D1,0x510E527F,0x2B3E6C1F,0x9B05688C,0xFB41BD6B,0x1F83D9AB,0x137E2179,0x5BE0CD19]);var SIGMA8=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3];var SIGMA82=new Uint8Array(SIGMA8.map(function(x){return x*2;}));var v=new Uint32Array(32);var m=new Uint32Array(32);function blake2bCompress(ctx,last){var i=0;for(i=0;i<16;i++){v[i]=ctx.h[i];v[i+16]=BLAKE2B_IV32[i];}v[24]=v[24]^ctx.t;v[25]=v[25]^ctx.t/0x100000000;if(last){v[28]=~v[28];v[29]=~v[29];}for(i=0;i<32;i++){m[i]=B2B_GET32(ctx.b,4*i);}for(i=0;i<12;i++){B2B_G(0,8,16,24,SIGMA82[i*16+0],SIGMA82[i*16+1]);B2B_G(2,10,18,26,SIGMA82[i*16+2],SIGMA82[i*16+3]);B2B_G(4,12,20,28,SIGMA82[i*16+4],SIGMA82[i*16+5]);B2B_G(6,14,22,30,SIGMA82[i*16+6],SIGMA82[i*16+7]);B2B_G(0,10,20,30,SIGMA82[i*16+8],SIGMA82[i*16+9]);B2B_G(2,12,22,24,SIGMA82[i*16+10],SIGMA82[i*16+11]);B2B_G(4,14,16,26,SIGMA82[i*16+12],SIGMA82[i*16+13]);B2B_G(6,8,18,28,SIGMA82[i*16+14],SIGMA82[i*16+15]);}for(i=0;i<16;i++){ctx.h[i]=ctx.h[i]^v[i]^v[i+16];}}function blake2bInit(outlen,key){if(outlen===0||outlen>64){throw new Error('Illegal output length, expected 0 < length <= 64');}if(key&&key.length>64){throw new Error('Illegal key, expected Uint8Array with 0 < length <= 64');}var ctx={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:outlen};for(var i=0;i<16;i++){ctx.h[i]=BLAKE2B_IV32[i];}var keylen=key?key.length:0;ctx.h[0]^=0x01010000^keylen<<8^outlen;if(key){blake2bUpdate(ctx,key);ctx.c=128;}return ctx;}function blake2bUpdate(ctx,input){for(var i=0;i<input.length;i++){if(ctx.c===128){ctx.t+=ctx.c;blake2bCompress(ctx,false);ctx.c=0;}ctx.b[ctx.c++]=input[i];}}function blake2bFinal(ctx){ctx.t+=ctx.c;while(ctx.c<128){ctx.b[ctx.c++]=0;}blake2bCompress(ctx,true);var out=new Uint8Array(ctx.outlen);for(var i=0;i<ctx.outlen;i++){out[i]=ctx.h[i>>2]>>8*(i&3);}return out;}function blake2b(input,key,outlen){outlen=outlen||64;input=util.normalizeInput(input);var ctx=blake2bInit(outlen,key);blake2bUpdate(ctx,input);return blake2bFinal(ctx);}function blake2bHex(input,key,outlen){var output=blake2b(input,key,outlen);return util.toHex(output);}module.exports={blake2b:blake2b,blake2bHex:blake2bHex,blake2bInit:blake2bInit,blake2bUpdate:blake2bUpdate,blake2bFinal:blake2bFinal};},6983:function(module,__unusedexports,__webpack_require__){"use strict";const setImmediate=__webpack_require__(7368);const multicodec=__webpack_require__(9275);const EE=__webpack_require__(4859).EventEmitter;const multiaddr=__webpack_require__(5920);const mafmt=__webpack_require__(7511);const Stop=__webpack_require__(4023);const Hop=__webpack_require__(8678);const proto=__webpack_require__(5546);const utilsFactory=__webpack_require__(6496);const StreamHandler=__webpack_require__(9511);const debug=__webpack_require__(746);const log=debug('libp2p:circuit:listener');log.err=debug('libp2p:circuit:error:listener');module.exports=(swarm,options,connHandler)=>{const listener=new EE();const utils=utilsFactory(swarm);listener.stopHandler=new Stop(swarm);listener.stopHandler.on('connection',conn=>listener.emit('connection',conn));listener.hopHandler=new Hop(swarm,options.hop);listener.listen=(ma,callback)=>{callback=callback||(()=>{});swarm.handle(multicodec.relay,(_,conn)=>{const sh=new StreamHandler(conn);sh.read((err,msg)=>{if(err){log.err(err);return;}let request=null;try{request=proto.CircuitRelay.decode(msg);}catch(err){return utils.writeResponse(sh,proto.CircuitRelay.Status.MALFORMED_MESSAGE);}switch(request.type){case proto.CircuitRelay.Type.CAN_HOP:case proto.CircuitRelay.Type.HOP:{return listener.hopHandler.handle(request,sh);}case proto.CircuitRelay.Type.STOP:{return listener.stopHandler.handle(request,sh,connHandler);}default:{utils.writeResponse(sh,proto.CircuitRelay.Status.INVALID_MSG_TYPE);return sh.close();}}});});setImmediate(()=>listener.emit('listen'));callback();};listener.close=cb=>{swarm.unhandle(multicodec.relay);setImmediate(()=>listener.emit('close'));cb();};listener.getAddrs=callback=>{let addrs=swarm._peerInfo.multiaddrs.toArray();let p2pAddrs=addrs.filter(addr=>{return mafmt.Circuit.matches(addr)&&!addr.toString().includes(swarm._peerInfo.id.toB58String());});if(p2pAddrs.length){addrs=p2pAddrs;}let listenAddrs=[];addrs.forEach(addr=>{const peerMa=`/p2p-circuit/ipfs/${swarm._peerInfo.id.toB58String()}`;if(addr.toString()===peerMa){listenAddrs.push(multiaddr(peerMa));return;}if(!mafmt.Circuit.matches(addr)){if(addr.getPeerId()){listenAddrs.push(multiaddr(`/p2p-circuit`).encapsulate(addr));}else{const ma=`${addr}/ipfs/${swarm._peerInfo.id.toB58String()}`;listenAddrs.push(multiaddr(`/p2p-circuit`).encapsulate(ma));}}else{listenAddrs.push(addr.encapsulate(`/ipfs/${swarm._peerInfo.id.toB58String()}`));}});callback(null,listenAddrs);};return listener;};},6990:function(module,__unusedexports,__webpack_require__){var parseuri=__webpack_require__(1400);var debug=__webpack_require__(9771)('socket.io-client:url');module.exports=url;function url(uri,loc){var obj=uri;loc=loc||typeof location!=='undefined'&&location;if(null==uri)uri=loc.protocol+'//'+loc.host;if('string'===typeof uri){if('/'===uri.charAt(0)){if('/'===uri.charAt(1)){uri=loc.protocol+uri;}else{uri=loc.host+uri;}}if(!/^(https?|wss?):\/\//.test(uri)){debug('protocol-less url %s',uri);if('undefined'!==typeof loc){uri=loc.protocol+'//'+uri;}else{uri='https://'+uri;}}debug('parse %s',uri);obj=parseuri(uri);}if(!obj.port){if(/^(http|ws)$/.test(obj.protocol)){obj.port='80';}else if(/^(http|ws)s$/.test(obj.protocol)){obj.port='443';}}obj.path=obj.path||'/';var ipv6=obj.host.indexOf(':')!==-1;var host=ipv6?'['+obj.host+']':obj.host;obj.id=obj.protocol+'://'+host+':'+obj.port;obj.href=obj.protocol+'://'+host+(loc&&loc.port===obj.port?'':':'+obj.port);return obj;}},6995:function(module,__unusedexports,__webpack_require__){var getNative=__webpack_require__(4708),root=__webpack_require__(9274);var Map=getNative(root,'Map');module.exports=Map;},6998:function(module){module.exports={"name":"mainnet","chainId":1,"networkId":1,"comment":"The Ethereum main chain","url":"https://ethstats.net/","genesis":{"hash":"0xd4e56740f876aef8c010b86a40d5f56745a118d0906a34e69aec8c0db1cb8fa3","timestamp":null,"gasLimit":5000,"difficulty":17179869184,"nonce":"0x0000000000000042","extraData":"0x11bbe8db4e347b4e8c937c1c8370e4b5ed33adb3db69cbdb7a38e1e50b1b82fa","stateRoot":"0xd7f8974fb5ac78d9ac099b9ad5018bedc2ce0a72dad1827a1709da30580f0544"},"hardforks":[{"name":"chainstart","block":0,"consensus":"pow","finality":null},{"name":"homestead","block":1150000,"consensus":"pow","finality":null},{"name":"dao","block":1920000,"consensus":"pow","finality":null},{"name":"tangerineWhistle","block":2463000,"consensus":"pow","finality":null},{"name":"spuriousDragon","block":2675000,"consensus":"pow","finality":null},{"name":"byzantium","block":4370000,"consensus":"pow","finality":null},{"name":"constantinople","block":7280000,"consensus":"pow","finality":null},{"name":"petersburg","block":7280000,"consensus":"pow","finality":null}],"bootstrapNodes":[{"ip":"13.93.211.84","port":30303,"id":"3f1d12044546b76342d59d4a05532c14b85aa669704bfe1f864fe079415aa2c02d743e03218e57a33fb94523adb54032871a6c51b2cc5514cb7c7e35b3ed0a99","location":"US-WEST","comment":"Go Bootnode"},{"ip":"191.235.84.50","port":30303,"id":"78de8a0916848093c73790ead81d1928bec737d565119932b98c6b100d944b7a95e94f847f689fc723399d2e31129d182f7ef3863f2b4c820abbf3ab2722344d","location":"BR","comment":"Go Bootnode"},{"ip":"13.75.154.138","port":30303,"id":"158f8aab45f6d19c6cbf4a089c2670541a8da11978a2f90dbf6a502a4a3bab80d288afdbeb7ec0ef6d92de563767f3b1ea9e8e334ca711e9f8e2df5a0385e8e6","location":"AU","comment":"Go Bootnode"},{"ip":"52.74.57.123","port":30303,"id":"1118980bf48b0a3640bdba04e0fe78b1add18e1cd99bf22d53daac1fd9972ad650df52176e7c7d89d1114cfef2bc23a2959aa54998a46afcf7d91809f0855082","location":"SG","comment":"Go Bootnode"}]};},7005:function(module,__unusedexports,__webpack_require__){"use strict";const ecdh=__webpack_require__(4832);module.exports=(curve,callback)=>{ecdh.generateEphmeralKeyPair(curve,callback);};},7011:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _doParallel=__webpack_require__(5847);var _doParallel2=_interopRequireDefault(_doParallel);var _map=__webpack_require__(8409);var _map2=_interopRequireDefault(_map);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}exports.default=(0,_doParallel2.default)(_map2.default);module.exports=exports['default'];},7012:function(module){module.exports=after;function after(count,callback,err_cb){var bail=false;err_cb=err_cb||noop;proxy.count=count;return count===0?callback():proxy;function proxy(err,result){if(proxy.count<=0){throw new Error('after called too many times');}--proxy.count;if(err){bail=true;callback(err);callback=err_cb;}else if(proxy.count===0&&!bail){callback(null,result);}}}function noop(){}},7019:function(__unusedmodule,exports,__webpack_require__){"use strict";exports.sha1=__webpack_require__(1264);exports.sha224=__webpack_require__(8006);exports.sha256=__webpack_require__(7971);exports.sha384=__webpack_require__(4677);exports.sha512=__webpack_require__(4082);},7023:function(__unusedmodule,exports,__webpack_require__){"use strict";const Bignumber=__webpack_require__(4417);exports.MT={POS_INT:0,NEG_INT:1,BYTE_STRING:2,UTF8_STRING:3,ARRAY:4,MAP:5,TAG:6,SIMPLE_FLOAT:7};exports.TAG={DATE_STRING:0,DATE_EPOCH:1,POS_BIGINT:2,NEG_BIGINT:3,DECIMAL_FRAC:4,BIGFLOAT:5,BASE64URL_EXPECTED:21,BASE64_EXPECTED:22,BASE16_EXPECTED:23,CBOR:24,URI:32,BASE64URL:33,BASE64:34,REGEXP:35,MIME:36};exports.NUMBYTES={ZERO:0,ONE:24,TWO:25,FOUR:26,EIGHT:27,INDEFINITE:31};exports.SIMPLE={FALSE:20,TRUE:21,NULL:22,UNDEFINED:23};exports.SYMS={NULL:Symbol('null'),UNDEFINED:Symbol('undef'),PARENT:Symbol('parent'),BREAK:Symbol('break'),STREAM:Symbol('stream')};exports.SHIFT32=Math.pow(2,32);exports.SHIFT16=Math.pow(2,16);exports.MAX_SAFE_HIGH=0x1fffff;exports.NEG_ONE=new Bignumber(-1);exports.TEN=new Bignumber(10);exports.TWO=new Bignumber(2);exports.PARENT={ARRAY:0,OBJECT:1,MAP:2,TAG:3,BYTE_STRING:4,UTF8_STRING:5};},7025:function(module){"use strict";module.exports=require(__dirname+'//build/Release/secp256k1.node');},7028:function(module,__unusedexports,__webpack_require__){var baseGetTag=__webpack_require__(2339),isObject=__webpack_require__(2988);var asyncTag='[object AsyncFunction]',funcTag='[object Function]',genTag='[object GeneratorFunction]',proxyTag='[object Proxy]';function isFunction(value){if(!isObject(value)){return false;}var tag=baseGetTag(value);return tag==funcTag||tag==genTag||tag==asyncTag||tag==proxyTag;}module.exports=isFunction;},7032:function(module,__unusedexports,__webpack_require__){const EventEmitter=__webpack_require__(4859).EventEmitter;const assert=__webpack_require__(3930);const fsm=__webpack_require__(8055);module.exports=fsmEvent;function fsmEvent(start,events){if(typeof start==='object'){events=start;start='START';}assert.equal(typeof start,'string');assert.equal(typeof events,'object');assert.ok(events[start],'invalid starting state '+start);assert.ok(fsm.validate(events));const emitter=new EventEmitter();emit._graph=fsm.reachable(events);emit._emitter=emitter;emit._events=events;emit._state=start;emit.emit=emit;emit.on=on;return emit;function on(event,cb){emitter.on(event,cb);}function emit(str){const nwState=emit._events[emit._state][str];if(!reach(emit._state,nwState,emit._graph)){const err='invalid transition: '+emit._state+' -> '+str;return emitter.emit('error',err);}const leaveEv=emit._state+':leave';const enterEv=nwState+':enter';if(!emit._state)return enter();return leave();function leave(){if(!emitter._events[leaveEv])enter();else emitter.emit(leaveEv,enter);}function enter(){if(!emitter._events[enterEv])done();else emitter.emit(enterEv,done);}function done(){emit._state=nwState;emitter.emit(nwState);emitter.emit('done');}}}function reach(curr,next,reachable){if(!next)return false;if(!curr)return true;const here=reachable[curr];if(!here||!here[next])return false;return here[next].length===1;}},7055:function(module,__unusedexports,__webpack_require__){"use strict";const dagNodeUtil=__webpack_require__(974);const cloneLinks=dagNodeUtil.cloneLinks;const cloneData=dagNodeUtil.cloneData;const create=__webpack_require__(3426);function clone(dagNode,callback){const data=cloneData(dagNode);const links=cloneLinks(dagNode);create(data,links,callback);}module.exports=clone;},7060:function(module){module.exports=function(xs,fn){var res=[];for(var i=0;i<xs.length;i++){var x=fn(xs[i],i);if(isArray(x))res.push.apply(res,x);else res.push(x);}return res;};var isArray=Array.isArray||function(xs){return Object.prototype.toString.call(xs)==='[object Array]';};},7066:function(module,__unusedexports,__webpack_require__){"use strict";const cidFromHash=__webpack_require__(5855);module.exports=cidFromEthObj;function cidFromEthObj(multicodec,ethObj,options){const hashBuffer=ethObj.hash();const cid=cidFromHash(multicodec,hashBuffer,options);return cid;}},7086:function(module){"use strict";module.exports=function empty(){return function(abort,cb){cb(true);};};},7108:function(module){"use strict";module.exports=`message Data {
  enum DataType {
    Raw = 0;
    Directory = 1;
    File = 2;
    Metadata = 3;
    Symlink = 4;
    HAMTShard = 5;
  }

  required DataType Type = 1;
  optional bytes Data = 2;
  optional uint64 filesize = 3;
  repeated uint64 blocksizes = 4;

  optional uint64 hashType = 5;
  optional uint64 fanout = 6;
}

message Metadata {
  optional string MimeType = 1;
}`;},7110:function(module,__unusedexports,__webpack_require__){"use strict";const EE=__webpack_require__(4859).EventEmitter;function DataQueue(){const ee=new EE();let q=[];let ed;function unleak(){ee.removeAllListeners("err");ee.removeAllListeners("data");}return{append:data=>{if(ed)return ed;q.push(data);ee.emit("data");},prepend:data=>{if(ed)return ed;q.unshift(data);},error:e=>{ed=e;ee.emit("err",e);},get:cb=>{unleak();if(ed)return cb(ed);if(q.length)return cb(null,q.shift());ee.once("err",e=>{unleak();cb(e);});ee.once("data",()=>{unleak();return cb(null,q.shift());});},height:()=>q.length};}module.exports=DataQueue;},7116:function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function(coll){return iteratorSymbol&&coll[iteratorSymbol]&&coll[iteratorSymbol]();};var iteratorSymbol=typeof Symbol==='function'&&Symbol.iterator;module.exports=exports['default'];},7120:function(module,__unusedexports,__webpack_require__){"use strict";const varint=__webpack_require__(2572);module.exports={numberToBuffer,bufferToNumber,varintBufferEncode,varintBufferDecode};function bufferToNumber(buf){return parseInt(buf.toString('hex'),16);}function numberToBuffer(num){let hexString=num.toString(16);if(hexString.length%2===1){hexString='0'+hexString;}return Buffer.from(hexString,'hex');}function varintBufferEncode(input){return Buffer.from(varint.encode(bufferToNumber(input)));}function varintBufferDecode(input){return numberToBuffer(varint.decode(input));}},7127:function(module,exports,__webpack_require__){"use strict";const ipns=__webpack_require__(3843);const crypto=__webpack_require__(318);const PeerId=__webpack_require__(1832);const errcode=__webpack_require__(4999);const debug=__webpack_require__(746);const log=debug('jsipfs:ipns:resolver');log.error=debug('jsipfs:ipns:resolver:error');const defaultMaximumRecursiveDepth=32;class IpnsResolver{constructor(routing){this._routing=routing;}resolve(name,options,callback){if(typeof options==='function'){callback=options;options={};}if(typeof name!=='string'){const errMsg=`one or more of the provided parameters are not valid`;log.error(errMsg);return callback(errcode(new Error(errMsg),'ERR_INVALID_PARAMETER'));}options=options||{};const recursive=options.recursive&&options.recursive.toString()==='true';const nameSegments=name.split('/');if(nameSegments.length!==3||nameSegments[0]!==''){const errMsg=`invalid name syntax for ${name}`;log.error(errMsg);return callback(errcode(new Error(errMsg),'ERR_INVALID_NAME_SYNTAX'));}const key=nameSegments[2];let depth;if(recursive){depth=defaultMaximumRecursiveDepth;}this.resolver(key,depth,(err,res)=>{if(err){return callback(err);}log(`${name} was locally resolved correctly`);callback(null,res);});}resolver(name,depth,callback){if(depth===0){const errMsg=`could not resolve name (recursion limit of ${defaultMaximumRecursiveDepth} exceeded)`;log.error(errMsg);return callback(errcode(new Error(errMsg),'ERR_RESOLVE_RECURSION_LIMIT'));}this._resolveName(name,(err,res)=>{if(err){return callback(err);}const nameSegments=res.split('/');if(nameSegments[1]==='ipfs'||!depth){return callback(null,res);}this.resolver(nameSegments[2],depth-1,callback);});}_resolveName(name,callback){let peerId;try{peerId=PeerId.createFromB58String(name);}catch(err){return callback(err);}const{routingKey,routingPubKey}=ipns.getIdKeys(peerId.toBytes());this._routing.get(routingKey.toBuffer(),(err,record)=>{if(err){if(err.code!=='ERR_NOT_FOUND'){const errMsg=`unexpected error getting the ipns record ${peerId.id}`;log.error(errMsg);return callback(errcode(new Error(errMsg),'ERR_UNEXPECTED_ERROR_GETTING_RECORD'));}const errMsg=`record requested was not found for ${name} (${routingKey}) in the network`;log.error(errMsg);return callback(errcode(new Error(errMsg),'ERR_NO_RECORD_FOUND'));}let ipnsEntry;try{ipnsEntry=ipns.unmarshal(record);}catch(err){const errMsg=`found ipns record that we couldn't convert to a value`;log.error(errMsg);return callback(errcode(new Error(errMsg),'ERR_INVALID_RECORD_RECEIVED'));}if(ipnsEntry.pubKey){return this._validateRecord(peerId,ipnsEntry,callback);}this._routing.get(routingKey.toBuffer(),(err,pubKey)=>{if(err){if(err.code!=='ERR_NOT_FOUND'){const errMsg=`unexpected error getting the public key for the ipns record ${peerId.id}`;log.error(errMsg);return callback(errcode(new Error(errMsg),'ERR_UNEXPECTED_ERROR_GETTING_PUB_KEY'));}const errMsg=`public key requested was not found for ${name} (${routingPubKey}) in the network`;log.error(errMsg);return callback(errcode(new Error(errMsg),'ERR_NO_RECORD_FOUND'));}try{peerId.pubKey=crypto.keys.unmarshalPublicKey(pubKey);}catch(err){const errMsg=`found public key record that we couldn't convert to a value`;log.error(errMsg);return callback(errcode(new Error(errMsg),'ERR_INVALID_PUB_KEY_RECEIVED'));}this._validateRecord(peerId,ipnsEntry,callback);});});}_validateRecord(peerId,ipnsEntry,callback){ipns.extractPublicKey(peerId,ipnsEntry,(err,pubKey)=>{if(err){return callback(err);}ipns.validate(pubKey,ipnsEntry,err=>{if(err){return callback(err);}callback(null,ipnsEntry.value.toString());});});}}exports=module.exports=IpnsResolver;},7129:function(module,__unusedexports,__webpack_require__){"use strict";const base58=__webpack_require__(4967);const multihash=__webpack_require__(8757);const multibase=__webpack_require__(1849);const CID=__webpack_require__(9339);const urlPattern=/^https?:\/\/[^/]+\/(ip(f|n)s)\/((\w+).*)/;const pathPattern=/^\/(ip(f|n)s)\/((\w+).*)/;const defaultProtocolMatch=1;const defaultHashMath=4;const fqdnPattern=/^https?:\/\/([^/]+)\.(ip(?:f|n)s)\.[^/]+/;const fqdnHashMatch=1;const fqdnProtocolMatch=2;function isMultihash(hash){const formatted=convertToString(hash);try{const buffer=Buffer.from(base58.decode(formatted));multihash.decode(buffer);return true;}catch(e){return false;}}function isMultibase(hash){try{return multibase.isEncoded(hash);}catch(e){return false;}}function isCID(hash){try{return CID.isCID(new CID(hash));}catch(e){return false;}}function isIpfs(input,pattern,protocolMatch=defaultProtocolMatch,hashMatch=defaultHashMath){const formatted=convertToString(input);if(!formatted){return false;}const match=formatted.match(pattern);if(!match){return false;}if(match[protocolMatch]!=='ipfs'){return false;}let hash=match[hashMatch];if(hash&&pattern===fqdnPattern){hash=hash.toLowerCase();}return isCID(hash);}function isIpns(input,pattern,protocolMatch=defaultProtocolMatch,hashMatch){const formatted=convertToString(input);if(!formatted){return false;}const match=formatted.match(pattern);if(!match){return false;}if(match[protocolMatch]!=='ipns'){return false;}if(hashMatch&&pattern===fqdnPattern){let hash=match[hashMatch];hash=hash.toLowerCase();return isCID(hash);}return true;}function convertToString(input){if(Buffer.isBuffer(input)){return base58.encode(input);}if(typeof input==='string'){return input;}return false;}const ipfsSubdomain=url=>isIpfs(url,fqdnPattern,fqdnProtocolMatch,fqdnHashMatch);const ipnsSubdomain=url=>isIpns(url,fqdnPattern,fqdnProtocolMatch,fqdnHashMatch);module.exports={multihash:isMultihash,cid:isCID,base32cid:cid=>isMultibase(cid)==='base32'&&isCID(cid),ipfsSubdomain:ipfsSubdomain,ipnsSubdomain:ipnsSubdomain,subdomain:url=>ipfsSubdomain(url)||ipnsSubdomain(url),subdomainPattern:fqdnPattern,ipfsUrl:url=>isIpfs(url,urlPattern),ipnsUrl:url=>isIpns(url,urlPattern),url:url=>isIpfs(url,urlPattern)||isIpns(url,urlPattern),urlPattern:urlPattern,ipfsPath:path=>isIpfs(path,pathPattern),ipnsPath:path=>isIpns(path,pathPattern),path:path=>isIpfs(path,pathPattern)||isIpns(path,pathPattern),pathPattern:pathPattern,urlOrPath:x=>isIpfs(x,urlPattern)||isIpns(x,urlPattern)||isIpfs(x,pathPattern)||isIpns(x,pathPattern)};},7134:function(module){"use strict";module.exports=function(){var _read,waiting;function sink(read){if('function'!==typeof read)throw new Error('read must be function');if(_read)throw new Error('already piped');_read=read;if(waiting){var _waiting=waiting;waiting=null;_read.apply(null,_waiting);}}function source(abort,cb){if(_read)_read(abort,cb);else waiting=[abort,cb];}return{source:source,sink:sink};};},7135:function(module,exports,__webpack_require__){"use strict";var tty=__webpack_require__(8859);var util=__webpack_require__(649);exports.init=init;exports.log=log;exports.formatArgs=formatArgs;exports.save=save;exports.load=load;exports.useColors=useColors;exports.colors=[6,2,3,4,5,1];try{var supportsColor=__webpack_require__(8443);if(supportsColor&&(supportsColor.stderr||supportsColor).level>=2){exports.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221];}}catch(error){}exports.inspectOpts=Object.keys(process.env).filter(function(key){return /^debug_/i.test(key);}).reduce(function(obj,key){var prop=key.substring(6).toLowerCase().replace(/_([a-z])/g,function(_,k){return k.toUpperCase();});var val=process.env[key];if(/^(yes|on|true|enabled)$/i.test(val)){val=true;}else if(/^(no|off|false|disabled)$/i.test(val)){val=false;}else if(val==='null'){val=null;}else{val=Number(val);}obj[prop]=val;return obj;},{});function useColors(){return'colors'in exports.inspectOpts?Boolean(exports.inspectOpts.colors):tty.isatty(process.stderr.fd);}function formatArgs(args){var name=this.namespace,useColors=this.useColors;if(useColors){var c=this.color;var colorCode="\x1B[3"+(c<8?c:'8;5;'+c);var prefix="  ".concat(colorCode,";1m").concat(name," \x1B[0m");args[0]=prefix+args[0].split('\n').join('\n'+prefix);args.push(colorCode+'m+'+module.exports.humanize(this.diff)+"\x1B[0m");}else{args[0]=getDate()+name+' '+args[0];}}function getDate(){if(exports.inspectOpts.hideDate){return'';}return new Date().toISOString()+' ';}function log(){return process.stderr.write(util.format.apply(util,arguments)+'\n');}function save(namespaces){if(namespaces){process.env.DEBUG=namespaces;}else{delete process.env.DEBUG;}}function load(){return process.env.DEBUG;}function init(debug){debug.inspectOpts={};var keys=Object.keys(exports.inspectOpts);for(var i=0;i<keys.length;i++){debug.inspectOpts[keys[i]]=exports.inspectOpts[keys[i]];}}module.exports=__webpack_require__(110)(exports);var formatters=module.exports.formatters;formatters.o=function(v){this.inspectOpts.colors=this.useColors;return util.inspect(v,this.inspectOpts).replace(/\s*\n\s*/g,' ');};formatters.O=function(v){this.inspectOpts.colors=this.useColors;return util.inspect(v,this.inspectOpts);};},7137:function(module){function strictIndexOf(array,value,fromIndex){var index=fromIndex-1,length=array.length;while(++index<length){if(array[index]===value){return index;}}return-1;}module.exports=strictIndexOf;},7141:function(module,__unusedexports,__webpack_require__){"use strict";const map=__webpack_require__(7011);const debug=__webpack_require__(746);const once=__webpack_require__(7957);const log=debug('libp2p:switch:dialer');const DialQueue=__webpack_require__(6195);class LimitDialer{constructor(perPeerLimit,dialTimeout){log('create: %s peer limit, %s dial timeout',perPeerLimit,dialTimeout);this.perPeerLimit=perPeerLimit;this.dialTimeout=dialTimeout;this.queues=new Map();}dialMany(peer,transport,addrs,callback){log('dialMany:start');const token={cancel:false};callback=once(callback);map(addrs,(m,cb)=>{this.dialSingle(peer,transport,m,token,cb);},(err,results)=>{if(err){return callback(err);}const success=results.filter(res=>res.conn);if(success.length>0){log('dialMany:success');return callback(null,success[0]);}log('dialMany:error');const error=new Error('Failed to dial any provided address');error.errors=results.filter(res=>res.error).map(res=>res.error);return callback(error);});}dialSingle(peer,transport,addr,token,callback){const ps=peer.toB58String();log('dialSingle: %s:%s',ps,addr.toString());let q;if(this.queues.has(ps)){q=this.queues.get(ps);}else{q=new DialQueue(this.perPeerLimit,this.dialTimeout);this.queues.set(ps,q);}q.push(transport,addr,token,callback);}}module.exports=LimitDialer;},7144:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=asyncify;var _isObject=__webpack_require__(2988);var _isObject2=_interopRequireDefault(_isObject);var _initialParams=__webpack_require__(8084);var _initialParams2=_interopRequireDefault(_initialParams);var _setImmediate=__webpack_require__(1454);var _setImmediate2=_interopRequireDefault(_setImmediate);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function asyncify(func){return(0,_initialParams2.default)(function(args,callback){var result;try{result=func.apply(this,args);}catch(e){return callback(e);}if((0,_isObject2.default)(result)&&typeof result.then==='function'){result.then(function(value){invokeCallback(callback,null,value);},function(err){invokeCallback(callback,err.message?err:new Error(err));});}else{callback(null,result);}});}function invokeCallback(callback,error,value){try{callback(error,value);}catch(e){(0,_setImmediate2.default)(rethrow,e);}}function rethrow(error){throw error;}module.exports=exports['default'];},7146:function(module,__unusedexports,__webpack_require__){var path=__webpack_require__(5897);var fs=__webpack_require__(662);var _0777=parseInt('0777',8);module.exports=mkdirP.mkdirp=mkdirP.mkdirP=mkdirP;function mkdirP(p,opts,f,made){if(typeof opts==='function'){f=opts;opts={};}else if(!opts||typeof opts!=='object'){opts={mode:opts};}var mode=opts.mode;var xfs=opts.fs||fs;if(mode===undefined){mode=_0777&~process.umask();}if(!made)made=null;var cb=f||function(){};p=path.resolve(p);xfs.mkdir(p,mode,function(er){if(!er){made=made||p;return cb(null,made);}switch(er.code){case'ENOENT':mkdirP(path.dirname(p),opts,function(er,made){if(er)cb(er,made);else mkdirP(p,opts,cb,made);});break;default:xfs.stat(p,function(er2,stat){if(er2||!stat.isDirectory())cb(er,made);else cb(null,made);});break;}});}mkdirP.sync=function sync(p,opts,made){if(!opts||typeof opts!=='object'){opts={mode:opts};}var mode=opts.mode;var xfs=opts.fs||fs;if(mode===undefined){mode=_0777&~process.umask();}if(!made)made=null;p=path.resolve(p);try{xfs.mkdirSync(p,mode);made=made||p;}catch(err0){switch(err0.code){case'ENOENT':made=sync(path.dirname(p),opts,made);sync(p,opts,made);break;default:var stat;try{stat=xfs.statSync(p);}catch(err1){throw err0;}if(!stat.isDirectory())throw err0;break;}}return made;};},7152:function(module,__unusedexports,__webpack_require__){"use strict";const varint=__webpack_require__(2572);const pull=__webpack_require__(418);const map=__webpack_require__(569);const collect=__webpack_require__(8342);const take=__webpack_require__(5878);const pullLP=__webpack_require__(8585);const Connection=__webpack_require__(378).Connection;const util=__webpack_require__(4639);const select=__webpack_require__(2154);const once=__webpack_require__(7957);const PROTOCOL_ID=__webpack_require__(1875).PROTOCOL_ID;class Dialer{constructor(){this.conn=null;this.log=util.log.dialer();}handle(rawConn,callback){this.log('dialer handle conn');callback=once(callback);const s=select(PROTOCOL_ID,(err,conn)=>{if(err){return callback(err);}this.log('handshake success');this.conn=new Connection(conn,rawConn);callback();},this.log);try{pull(rawConn,s,rawConn);}catch(err){this.log.error(err);callback(err);}}select(protocol,callback){this.log('dialer select '+protocol);callback=once(callback);if(!this.conn){return callback(new Error('multistream handshake has not finalized yet'));}const s=select(protocol,(err,conn)=>{if(err){this.conn=new Connection(conn,this.conn);return callback(err);}callback(null,new Connection(conn,this.conn));},this.log);pull(this.conn,s,this.conn);}ls(callback){callback=once(callback);const lsStream=select('ls',(err,conn)=>{if(err){return callback(err);}pull(conn,pullLP.decode(),collectLs(conn),map(stringify),collect((err,list)=>{if(err){return callback(err);}callback(null,list.slice(1));}));},this.log);pull(this.conn,lsStream,this.conn);}}function stringify(buf){return buf.toString().slice(0,-1);}function collectLs(conn){let first=true;let counter=0;return take(msg=>{if(first){varint.decode(msg);counter=varint.decode(msg,varint.decode.bytes);return true;}return counter-->0;});}module.exports=Dialer;},7154:function(module,__unusedexports,__webpack_require__){"use strict";const WebSocket=__webpack_require__(657);WebSocket.Server=__webpack_require__(7517);WebSocket.Receiver=__webpack_require__(2274);WebSocket.Sender=__webpack_require__(5237);module.exports=WebSocket;},7166:function(module,__unusedexports,__webpack_require__){"use strict";const CID=__webpack_require__(9339);module.exports=(cid,base)=>{if(Buffer.isBuffer(cid)){cid=new CID(cid);}if(base==='base58btc'){return cid.toBaseEncodedString();}return cid.toV1().toBaseEncodedString(base);};},7173:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _setImmediate=__webpack_require__(1454);var _defer;if(_setImmediate.hasNextTick){_defer=process.nextTick;}else if(_setImmediate.hasSetImmediate){_defer=setImmediate;}else{_defer=_setImmediate.fallback;}exports.default=(0,_setImmediate.wrap)(_defer);module.exports=exports['default'];},7174:function(module,__unusedexports,__webpack_require__){"use strict";module.exports=PassThrough;var Transform=__webpack_require__(306);var util=__webpack_require__(5548);util.inherits=__webpack_require__(92);util.inherits(PassThrough,Transform);function PassThrough(options){if(!(this instanceof PassThrough))return new PassThrough(options);Transform.call(this,options);}PassThrough.prototype._transform=function(chunk,encoding,cb){cb(null,chunk);};},7177:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _filter=__webpack_require__(7256);var _filter2=_interopRequireDefault(_filter);var _doParallel=__webpack_require__(5847);var _doParallel2=_interopRequireDefault(_doParallel);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}exports.default=(0,_doParallel2.default)(_filter2.default);module.exports=exports['default'];},7181:function(module,__unusedexports,__webpack_require__){"use strict";const connect=__webpack_require__(6265);const mafmt=__webpack_require__(7511);const withIs=__webpack_require__(3171);const Connection=__webpack_require__(378).Connection;const toUri=__webpack_require__(3819);const debug=__webpack_require__(746);const log=debug('libp2p:websockets:dialer');const createListener=__webpack_require__(4801);class WebSockets{dial(ma,options,callback){if(typeof options==='function'){callback=options;options={};}callback=callback||function(){};const url=toUri(ma);log('dialing %s',url);const socket=connect(url,{binary:true,onConnect:err=>{callback(err);}});const conn=new Connection(socket);conn.getObservedAddrs=cb=>cb(null,[ma]);conn.close=cb=>socket.close(cb);return conn;}createListener(options,handler){if(typeof options==='function'){handler=options;options={};}return createListener(options,handler);}filter(multiaddrs){if(!Array.isArray(multiaddrs)){multiaddrs=[multiaddrs];}return multiaddrs.filter(ma=>{if(ma.protoNames().includes('p2p-circuit')){return false;}if(ma.protoNames().includes('ipfs')){ma=ma.decapsulate('ipfs');}return mafmt.WebSockets.matches(ma)||mafmt.WebSocketsSecure.matches(ma);});}}module.exports=withIs(WebSockets,{className:'WebSockets',symbolName:'@libp2p/js-libp2p-websockets/websockets'});},7189:function(module,__unusedexports,__webpack_require__){"use strict";const debug=__webpack_require__(746);const errcode=__webpack_require__(4999);const promisify=__webpack_require__(6955);const IpnsPubsubDatastore=__webpack_require__(856);const log=debug('jsipfs:name-pubsub');log.error=debug('jsipfs:name-pubsub:error');const isNamePubsubEnabled=node=>{try{return Boolean(getPubsubRouting(node));}catch(err){return false;}};const getPubsubRouting=node=>{if(!node._ipns||!node._options.EXPERIMENTAL.ipnsPubsub){const errMsg='IPNS pubsub subsystem is not enabled';throw errcode(errMsg,'ERR_IPNS_PUBSUB_NOT_ENABLED');}if(IpnsPubsubDatastore.isIpnsPubsubDatastore(node._ipns.routing)){return node._ipns.routing;}const pubsub=(node._ipns.routing.stores||[]).find(s=>IpnsPubsubDatastore.isIpnsPubsubDatastore(s));if(!pubsub){const errMsg='IPNS pubsub datastore not found';throw errcode(errMsg,'ERR_PUBSUB_DATASTORE_NOT_FOUND');}return pubsub;};module.exports=function namePubsub(self){return{state:promisify(callback=>{callback(null,{enabled:isNamePubsubEnabled(self)});}),cancel:promisify((name,callback)=>{let pubsub;try{pubsub=getPubsubRouting(self);}catch(err){return callback(err);}pubsub.cancel(name,callback);}),subs:promisify(callback=>{let pubsub;try{pubsub=getPubsubRouting(self);}catch(err){return callback(err);}pubsub.getSubscriptions(callback);})};};},7201:function(module,__unusedexports,__webpack_require__){"use strict";const pull=__webpack_require__(2885);const setImmediate=__webpack_require__(7368);const asyncFilter=__webpack_require__(4035).asyncFilter;const asyncSort=__webpack_require__(4035).asyncSort;const Key=__webpack_require__(7761);const Errors=__webpack_require__(1860);class MemoryDatastore{constructor(){this.data={};}open(callback){setImmediate(callback);}put(key,val,callback){this.data[key.toString()]=val;setImmediate(callback);}get(key,callback){this.has(key,(err,exists)=>{if(err){return callback(err);}if(!exists){return callback(Errors.notFoundError());}callback(null,this.data[key.toString()]);});}has(key,callback){setImmediate(()=>{callback(null,this.data[key.toString()]!==undefined);});}delete(key,callback){delete this.data[key.toString()];setImmediate(()=>{callback();});}batch(){let puts=[];let dels=[];return{put(key,value){puts.push([key,value]);},delete(key){dels.push(key);},commit:(callback)=>{puts.forEach(v=>{this.data[v[0].toString()]=v[1];});puts=[];dels.forEach(key=>{delete this.data[key.toString()];});dels=[];setImmediate(callback);}};}query(q){let tasks=[pull.keys(this.data),pull.map(k=>({key:new Key(k),value:this.data[k]}))];let filters=[];if(q.prefix!=null){const prefix=q.prefix;filters.push((e,cb)=>cb(null,e.key.toString().startsWith(prefix)));}if(q.filters!=null){filters=filters.concat(q.filters);}tasks=tasks.concat(filters.map(f=>asyncFilter(f)));if(q.orders!=null){tasks=tasks.concat(q.orders.map(o=>asyncSort(o)));}if(q.offset!=null){let i=0;tasks.push(pull.filter(()=>i++>=q.offset));}if(q.limit!=null){tasks.push(pull.take(q.limit));}if(q.keysOnly===true){tasks.push(pull.map(e=>({key:e.key})));}return pull.apply(null,tasks);}close(callback){setImmediate(callback);}}module.exports=MemoryDatastore;},7215:function(module,exports,__webpack_require__){"use strict";const util=__webpack_require__(9273);const traverse=__webpack_require__(2706);exports=module.exports;exports.multicodec='git-raw';exports.defaultHashAlg='sha1';const personInfoPaths=['original','name','email','date'];exports.resolve=(binaryBlob,path,callback)=>{if(typeof path==='function'){callback=path;path=undefined;}util.deserialize(binaryBlob,(err,node)=>{if(err){return callback(err);}if(!path||path==='/'){return callback(null,{value:node,remainderPath:''});}if(Buffer.isBuffer(node)){return callback(null,{value:node,remainderPath:path});}const parts=path.split('/');const val=traverse(node).get(parts);if(val){return callback(null,{value:val,remainderPath:''});}let value;let len=parts.length;for(let i=0;i<len;i++){const partialPath=parts.shift();if(Array.isArray(node)){value=node[Number(partialPath)];}if(node[partialPath]){value=node[partialPath];}else{if(!value){return callback(new Error('path not available at root'));}else{parts.unshift(partialPath);return callback(null,{value:value,remainderPath:parts.join('/')});}}node=value;}});};exports.tree=(binaryBlob,options,callback)=>{if(typeof options==='function'){callback=options;options=undefined;}options=options||{};util.deserialize(binaryBlob,(err,node)=>{if(err){return callback(err);}if(Buffer.isBuffer(node)){return callback(null,[]);}let paths=[];switch(node.gitType){case'commit':paths=['message','tree'];paths=paths.concat(personInfoPaths.map(e=>'author/'+e));paths=paths.concat(personInfoPaths.map(e=>'committer/'+e));paths=paths.concat(node.parents.map((_,e)=>'parents/'+e));if(node.encoding){paths.push('encoding');}break;case'tag':paths=['object','type','tag','message'];if(node.tagger){paths=paths.concat(personInfoPaths.map(e=>'tagger/'+e));}break;default:Object.keys(node).forEach(dir=>{paths.push(dir);paths.push(dir+'/hash');paths.push(dir+'/mode');});}callback(null,paths);});};exports.isLink=(binaryBlob,path,callback)=>{exports.resolve(binaryBlob,path,(err,result)=>{if(err){return callback(err);}if(result.remainderPath.length>0){return callback(new Error('path out of scope'));}if(typeof result.value==='object'&&result.value['/']){callback(null,result.value);}else{callback(null,false);}});};},7231:function(module,__unusedexports,__webpack_require__){"use strict";const CID=__webpack_require__(9339);const multihash=__webpack_require__(9424);module.exports={resolver:{multicodec:'raw',defaultHashAlg:'sha2-256',resolve:(binaryBlob,path,callback)=>{callback(null,{value:binaryBlob,remainderPath:''});},tree:(binaryBlob,options,callback)=>{if(typeof options==='function'){callback=options;}callback(null,[]);}},util:{deserialize:(data,cb)=>{cb(null,data);},serialize:(data,cb)=>{cb(null,data);},cid:(data,options,cb)=>{if(typeof options==='function'){cb=options;options={};}options=options||{};const hashAlg=options.hashAlg||'sha2-256';const version=typeof options.version==='undefined'?1:options.version;multihash(data,hashAlg,(err,mh)=>{if(err)return cb(err);cb(null,new CID(version,'raw',mh));});}}};},7236:function(module,__unusedexports,__webpack_require__){"use strict";const pull=__webpack_require__(418);const values=__webpack_require__(5130);const pullLP=__webpack_require__(8585);const varint=__webpack_require__(2572);function lsHandler(self,conn){const protos=Object.keys(self.handlers).filter(key=>key!=='ls');const nProtos=protos.length;const size=protos.reduce((size,proto)=>{const p=Buffer.from(proto+'\n');const el=varint.encodingLength(p.length);return size+el;},0);const buf=Buffer.concat([Buffer.from(varint.encode(nProtos)),Buffer.from(varint.encode(size)),Buffer.from('\n')]);const encodedProtos=protos.map(proto=>{return Buffer.from(proto+'\n');});pull(values([buf].concat(encodedProtos)),pullLP.encode(),conn);}module.exports=lsHandler;},7255:function(module,__unusedexports,__webpack_require__){var r;module.exports=function rand(len){if(!r)r=new Rand(null);return r.generate(len);};function Rand(rand){this.rand=rand;}module.exports.Rand=Rand;Rand.prototype.generate=function generate(len){return this._rand(len);};Rand.prototype._rand=function _rand(n){if(this.rand.getBytes)return this.rand.getBytes(n);var res=new Uint8Array(n);for(var i=0;i<res.length;i++)res[i]=this.rand.getByte();return res;};if(typeof self==='object'){if(self.crypto&&self.crypto.getRandomValues){Rand.prototype._rand=function _rand(n){var arr=new Uint8Array(n);self.crypto.getRandomValues(arr);return arr;};}else if(self.msCrypto&&self.msCrypto.getRandomValues){Rand.prototype._rand=function _rand(n){var arr=new Uint8Array(n);self.msCrypto.getRandomValues(arr);return arr;};}else if(typeof window==='object'){Rand.prototype._rand=function(){throw new Error('Not implemented yet');};}}else{try{var crypto=__webpack_require__(2984);if(typeof crypto.randomBytes!=='function')throw new Error('Not supported');Rand.prototype._rand=function _rand(n){return crypto.randomBytes(n);};}catch(e){}}},7256:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=_filter;var _arrayMap=__webpack_require__(6016);var _arrayMap2=_interopRequireDefault(_arrayMap);var _isArrayLike=__webpack_require__(4356);var _isArrayLike2=_interopRequireDefault(_isArrayLike);var _baseProperty=__webpack_require__(705);var _baseProperty2=_interopRequireDefault(_baseProperty);var _noop=__webpack_require__(5811);var _noop2=_interopRequireDefault(_noop);var _wrapAsync=__webpack_require__(9396);var _wrapAsync2=_interopRequireDefault(_wrapAsync);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function filterArray(eachfn,arr,iteratee,callback){var truthValues=new Array(arr.length);eachfn(arr,function(x,index,callback){iteratee(x,function(err,v){truthValues[index]=!!v;callback(err);});},function(err){if(err)return callback(err);var results=[];for(var i=0;i<arr.length;i++){if(truthValues[i])results.push(arr[i]);}callback(null,results);});}function filterGeneric(eachfn,coll,iteratee,callback){var results=[];eachfn(coll,function(x,index,callback){iteratee(x,function(err,v){if(err){callback(err);}else{if(v){results.push({index:index,value:x});}callback();}});},function(err){if(err){callback(err);}else{callback(null,(0,_arrayMap2.default)(results.sort(function(a,b){return a.index-b.index;}),(0,_baseProperty2.default)('value')));}});}function _filter(eachfn,coll,iteratee,callback){var filter=(0,_isArrayLike2.default)(coll)?filterArray:filterGeneric;filter(eachfn,coll,(0,_wrapAsync2.default)(iteratee),callback||_noop2.default);}module.exports=exports['default'];},7263:function(module,__unusedexports,__webpack_require__){"use strict";const trickleReducer=__webpack_require__(6785);const defaultOptions={maxChildrenPerNode:174,layerRepeat:4};module.exports=function(reduce,_options){const options=Object.assign({},defaultOptions,_options);return trickleReducer(reduce,options);};},7276:function(__unusedmodule,exports,__webpack_require__){"use strict";var utils=exports;var BN=__webpack_require__(5584);var minAssert=__webpack_require__(809);var minUtils=__webpack_require__(2973);utils.assert=minAssert;utils.toArray=minUtils.toArray;utils.zero2=minUtils.zero2;utils.toHex=minUtils.toHex;utils.encode=minUtils.encode;function getNAF(num,w){var naf=[];var ws=1<<w+1;var k=num.clone();while(k.cmpn(1)>=0){var z;if(k.isOdd()){var mod=k.andln(ws-1);if(mod>(ws>>1)-1)z=(ws>>1)-mod;else z=mod;k.isubn(z);}else{z=0;}naf.push(z);var shift=k.cmpn(0)!==0&&k.andln(ws-1)===0?w+1:1;for(var i=1;i<shift;i++)naf.push(0);k.iushrn(shift);}return naf;}utils.getNAF=getNAF;function getJSF(k1,k2){var jsf=[[],[]];k1=k1.clone();k2=k2.clone();var d1=0;var d2=0;while(k1.cmpn(-d1)>0||k2.cmpn(-d2)>0){var m14=k1.andln(3)+d1&3;var m24=k2.andln(3)+d2&3;if(m14===3)m14=-1;if(m24===3)m24=-1;var u1;if((m14&1)===0){u1=0;}else{var m8=k1.andln(7)+d1&7;if((m8===3||m8===5)&&m24===2)u1=-m14;else u1=m14;}jsf[0].push(u1);var u2;if((m24&1)===0){u2=0;}else{var m8=k2.andln(7)+d2&7;if((m8===3||m8===5)&&m14===2)u2=-m24;else u2=m24;}jsf[1].push(u2);if(2*d1===u1+1)d1=1-d1;if(2*d2===u2+1)d2=1-d2;k1.iushrn(1);k2.iushrn(1);}return jsf;}utils.getJSF=getJSF;function cachedProperty(obj,name,computer){var key='_'+name;obj.prototype[name]=function cachedProperty(){return this[key]!==undefined?this[key]:this[key]=computer.call(this);};}utils.cachedProperty=cachedProperty;function parseBytes(bytes){return typeof bytes==='string'?utils.toArray(bytes,'hex'):bytes;}utils.parseBytes=parseBytes;function intFromLE(bytes){return new BN(bytes,'hex','le');}utils.intFromLE=intFromLE;},7279:function(module,__unusedexports,__webpack_require__){"use strict";var hash=__webpack_require__(2543);var elliptic=__webpack_require__(3459);var utils=elliptic.utils;var assert=utils.assert;var parseBytes=utils.parseBytes;var KeyPair=__webpack_require__(5430);var Signature=__webpack_require__(3299);function EDDSA(curve){assert(curve==='ed25519','only tested with ed25519 so far');if(!(this instanceof EDDSA))return new EDDSA(curve);var curve=elliptic.curves[curve].curve;this.curve=curve;this.g=curve.g;this.g.precompute(curve.n.bitLength()+1);this.pointClass=curve.point().constructor;this.encodingLength=Math.ceil(curve.n.bitLength()/8);this.hash=hash.sha512;}module.exports=EDDSA;EDDSA.prototype.sign=function sign(message,secret){message=parseBytes(message);var key=this.keyFromSecret(secret);var r=this.hashInt(key.messagePrefix(),message);var R=this.g.mul(r);var Rencoded=this.encodePoint(R);var s_=this.hashInt(Rencoded,key.pubBytes(),message).mul(key.priv());var S=r.add(s_).umod(this.curve.n);return this.makeSignature({R:R,S:S,Rencoded:Rencoded});};EDDSA.prototype.verify=function verify(message,sig,pub){message=parseBytes(message);sig=this.makeSignature(sig);var key=this.keyFromPublic(pub);var h=this.hashInt(sig.Rencoded(),key.pubBytes(),message);var SG=this.g.mul(sig.S());var RplusAh=sig.R().add(key.pub().mul(h));return RplusAh.eq(SG);};EDDSA.prototype.hashInt=function hashInt(){var hash=this.hash();for(var i=0;i<arguments.length;i++)hash.update(arguments[i]);return utils.intFromLE(hash.digest()).umod(this.curve.n);};EDDSA.prototype.keyFromPublic=function keyFromPublic(pub){return KeyPair.fromPublic(this,pub);};EDDSA.prototype.keyFromSecret=function keyFromSecret(secret){return KeyPair.fromSecret(this,secret);};EDDSA.prototype.makeSignature=function makeSignature(sig){if(sig instanceof Signature)return sig;return new Signature(this,sig);};EDDSA.prototype.encodePoint=function encodePoint(point){var enc=point.getY().toArray('le',this.encodingLength);enc[this.encodingLength-1]|=point.getX().isOdd()?0x80:0;return enc;};EDDSA.prototype.decodePoint=function decodePoint(bytes){bytes=utils.parseBytes(bytes);var lastIx=bytes.length-1;var normed=bytes.slice(0,lastIx).concat(bytes[lastIx]&~0x80);var xIsOdd=(bytes[lastIx]&0x80)!==0;var y=utils.intFromLE(normed);return this.curve.pointFromY(y,xIsOdd);};EDDSA.prototype.encodeInt=function encodeInt(num){return num.toArray('le',this.encodingLength);};EDDSA.prototype.decodeInt=function decodeInt(bytes){return utils.intFromLE(bytes);};EDDSA.prototype.isPoint=function isPoint(val){return val instanceof this.pointClass;};},7288:function(module,__unusedexports,__webpack_require__){"use strict";const Hoek=__webpack_require__(2850);const internals={};module.exports=class Topo{constructor(){this._items=[];this.nodes=[];}add(nodes,options){options=options||{};const before=[].concat(options.before||[]);const after=[].concat(options.after||[]);const group=options.group||'?';const sort=options.sort||0;Hoek.assert(!before.includes(group),`Item cannot come before itself: ${group}`);Hoek.assert(!before.includes('?'),'Item cannot come before unassociated items');Hoek.assert(!after.includes(group),`Item cannot come after itself: ${group}`);Hoek.assert(!after.includes('?'),'Item cannot come after unassociated items');[].concat(nodes).forEach((node,i)=>{const item={seq:this._items.length,sort,before,after,group,node};this._items.push(item);});const error=this._sort();Hoek.assert(!error,'item',group!=='?'?`added into group ${group}`:'','created a dependencies error');return this.nodes;}merge(others){others=[].concat(others);for(let i=0;i<others.length;++i){const other=others[i];if(other){for(let j=0;j<other._items.length;++j){const item=Object.assign({},other._items[j]);this._items.push(item);}}}this._items.sort(internals.mergeSort);for(let i=0;i<this._items.length;++i){this._items[i].seq=i;}const error=this._sort();Hoek.assert(!error,'merge created a dependencies error');return this.nodes;}_sort(){const graph={};const graphAfters=Object.create(null);const groups=Object.create(null);for(let i=0;i<this._items.length;++i){const item=this._items[i];const seq=item.seq;const group=item.group;groups[group]=groups[group]||[];groups[group].push(seq);graph[seq]=item.before;const after=item.after;for(let j=0;j<after.length;++j){graphAfters[after[j]]=(graphAfters[after[j]]||[]).concat(seq);}}let graphNodes=Object.keys(graph);for(let i=0;i<graphNodes.length;++i){const node=graphNodes[i];const expandedGroups=[];const graphNodeItems=Object.keys(graph[node]);for(let j=0;j<graphNodeItems.length;++j){const group=graph[node][graphNodeItems[j]];groups[group]=groups[group]||[];for(let k=0;k<groups[group].length;++k){expandedGroups.push(groups[group][k]);}}graph[node]=expandedGroups;}const afterNodes=Object.keys(graphAfters);for(let i=0;i<afterNodes.length;++i){const group=afterNodes[i];if(groups[group]){for(let j=0;j<groups[group].length;++j){const node=groups[group][j];graph[node]=graph[node].concat(graphAfters[group]);}}}let children;const ancestors={};graphNodes=Object.keys(graph);for(let i=0;i<graphNodes.length;++i){const node=graphNodes[i];children=graph[node];for(let j=0;j<children.length;++j){ancestors[children[j]]=(ancestors[children[j]]||[]).concat(node);}}const visited={};const sorted=[];for(let i=0;i<this._items.length;++i){let next=i;if(ancestors[i]){next=null;for(let j=0;j<this._items.length;++j){if(visited[j]===true){continue;}if(!ancestors[j]){ancestors[j]=[];}const shouldSeeCount=ancestors[j].length;let seenCount=0;for(let k=0;k<shouldSeeCount;++k){if(visited[ancestors[j][k]]){++seenCount;}}if(seenCount===shouldSeeCount){next=j;break;}}}if(next!==null){visited[next]=true;sorted.push(next);}}if(sorted.length!==this._items.length){return new Error('Invalid dependencies');}const seqIndex={};for(let i=0;i<this._items.length;++i){const item=this._items[i];seqIndex[item.seq]=item;}const sortedNodes=[];this._items=sorted.map(value=>{const sortedItem=seqIndex[value];sortedNodes.push(sortedItem.node);return sortedItem;});this.nodes=sortedNodes;}};internals.mergeSort=(a,b)=>{return a.sort===b.sort?0:a.sort<b.sort?-1:1;};},7291:function(module,__unusedexports,__webpack_require__){"use strict";try{module.exports=__webpack_require__(7025);}catch(err){if(process.env.DEBUG){console.error('Secp256k1 bindings are not compiled. Pure JS implementation will be used.');}module.exports=__webpack_require__(2640);}},7293:function(__unusedmodule,exports,__webpack_require__){"use strict";exports.Address4=__webpack_require__(9464);exports.Address6=__webpack_require__(8514);exports.v6={helpers:__webpack_require__(3747)};},7301:function(module,__unusedexports,__webpack_require__){var ws=__webpack_require__(8540);var WebSocket=__webpack_require__(5437);var url=__webpack_require__(774);var http=__webpack_require__(3853);var https=__webpack_require__(2307);var EventEmitter=__webpack_require__(4859).EventEmitter;module.exports=!WebSocket.Server?null:function(opts,onConnection){var emitter=new EventEmitter();var server;if(typeof opts==='function'){onConnection=opts;opts=null;}opts=opts||{};if(onConnection)emitter.on('connection',onConnection);function proxy(server,event){return server.on(event,function(){var args=[].slice.call(arguments);args.unshift(event);emitter.emit.apply(emitter,args);});}var server=opts.server||(opts.key&&opts.cert?https.createServer(opts):http.createServer());var wsServer=new WebSocket.Server({server:server,perMessageDeflate:false,verifyClient:opts.verifyClient});proxy(server,'listening');proxy(server,'request');proxy(server,'close');wsServer.on('connection',function(socket){var stream=ws(socket);stream.remoteAddress=socket.upgradeReq.socket.remoteAddress;emitter.emit('connection',stream);});emitter.listen=function(addr,onListening){if(onListening)emitter.once('listening',onListening);server.listen(addr.port||addr);return emitter;};emitter.close=function(onClose){server.close(onClose);wsServer.close();return emitter;};emitter.address=server.address.bind(server);return emitter;};},7304:function(module,__unusedexports,__webpack_require__){"use strict";const Joi=__webpack_require__(463);const ModuleSchema=Joi.alternatives().try(Joi.func(),Joi.object());const OptionsSchema=Joi.object({connectionManager:Joi.object(),datastore:Joi.object(),peerInfo:Joi.object().required(),peerBook:Joi.object(),modules:Joi.object().keys({connEncryption:Joi.array().items(ModuleSchema).allow(null),connProtector:Joi.object().keys({protect:Joi.func().required()}).unknown(),contentRouting:Joi.array().items(Joi.object()).allow(null),dht:ModuleSchema.allow(null),peerDiscovery:Joi.array().items(ModuleSchema).allow(null),peerRouting:Joi.array().items(Joi.object()).allow(null),streamMuxer:Joi.array().items(ModuleSchema).allow(null),transport:Joi.array().items(ModuleSchema).min(1).required()}).required(),config:Joi.object().keys({peerDiscovery:Joi.object().allow(null),relay:Joi.object().keys({enabled:Joi.boolean().default(true),hop:Joi.object().keys({enabled:Joi.boolean().default(false),active:Joi.boolean().default(false)})}).default(),dht:Joi.object().keys({kBucketSize:Joi.number().default(20),enabledDiscovery:Joi.boolean().default(true),validators:Joi.object().allow(null),selectors:Joi.object().allow(null)}).default(),EXPERIMENTAL:Joi.object().keys({dht:Joi.boolean().default(false),pubsub:Joi.boolean().default(false)}).default()}).default()});module.exports.validate=options=>{options=Joi.attempt(options,OptionsSchema);if(options.config.EXPERIMENTAL.dht){Joi.assert(options.modules.dht,ModuleSchema.required());}return options;};},7306:function(__unusedmodule,exports,__webpack_require__){"use strict";const path=__webpack_require__(5897);const debug=__webpack_require__(746);const{lock}=__webpack_require__(2797);const log=debug('repo:lock');const lockFile='repo.lock';const STALE_TIME=20000;exports.lock=(dir,callback)=>{const file=path.join(dir,lockFile);log('locking %s',file);lock(dir,{lockfilePath:file,stale:STALE_TIME}).then(release=>{callback(null,{close:cb=>{release().then(()=>cb()).catch(err=>cb(err));}});},callback).catch(err=>{log(err);});};},7314:function(__unusedmodule,exports,__webpack_require__){"use strict";const protons=__webpack_require__(817);const PeerId=__webpack_require__(1832);const crypto=__webpack_require__(318);const parallel=__webpack_require__(4876);const waterfall=__webpack_require__(4265);const debug=__webpack_require__(746);const log=debug('libp2p:secio');log.error=debug('libp2p:secio:error');const pbm=protons(__webpack_require__(4115));const support=__webpack_require__(2457);const nonceSize=16;exports.createProposal=state=>{state.proposal.out={rand:crypto.randomBytes(nonceSize),pubkey:state.key.local.public.bytes,exchanges:support.exchanges.join(','),ciphers:support.ciphers.join(','),hashes:support.hashes.join(',')};state.proposalEncoded.out=pbm.Propose.encode(state.proposal.out);return state.proposalEncoded.out;};exports.createExchange=(state,callback)=>{crypto.keys.generateEphemeralKeyPair(state.protocols.local.curveT,(err,res)=>{if(err){return callback(err);}state.ephemeralKey.local=res.key;state.shared.generate=res.genSharedKey;const selectionOut=Buffer.concat([state.proposalEncoded.out,state.proposalEncoded.in,state.ephemeralKey.local]);state.key.local.sign(selectionOut,(err,sig)=>{if(err){return callback(err);}state.exchange.out={epubkey:state.ephemeralKey.local,signature:sig};callback(null,pbm.Exchange.encode(state.exchange.out));});});};exports.identify=(state,msg,callback)=>{log('1.1 identify');state.proposalEncoded.in=msg;state.proposal.in=pbm.Propose.decode(msg);const pubkey=state.proposal.in.pubkey;state.key.remote=crypto.keys.unmarshalPublicKey(pubkey);PeerId.createFromPubKey(pubkey.toString('base64'),(err,remoteId)=>{if(err){return callback(err);}if(state.id.remote){if(state.id.remote.toB58String()!==remoteId.toB58String()){return callback(new Error('dialed to the wrong peer, Ids do not match'));}}else{state.id.remote=remoteId;}log('1.1 identify - %s - identified remote peer as %s',state.id.local.toB58String(),state.id.remote.toB58String());callback();});};exports.selectProtocols=(state,callback)=>{log('1.2 selection');const local={pubKeyBytes:state.key.local.public.bytes,exchanges:support.exchanges,hashes:support.hashes,ciphers:support.ciphers,nonce:state.proposal.out.rand};const remote={pubKeyBytes:state.proposal.in.pubkey,exchanges:state.proposal.in.exchanges.split(','),hashes:state.proposal.in.hashes.split(','),ciphers:state.proposal.in.ciphers.split(','),nonce:state.proposal.in.rand};support.selectBest(local,remote,(err,selected)=>{if(err){return callback(err);}state.protocols.remote={order:selected.order,curveT:selected.curveT,cipherT:selected.cipherT,hashT:selected.hashT};state.protocols.local={order:selected.order,curveT:selected.curveT,cipherT:selected.cipherT,hashT:selected.hashT};callback();});};exports.verify=(state,msg,callback)=>{log('2.1. verify');state.exchange.in=pbm.Exchange.decode(msg);state.ephemeralKey.remote=state.exchange.in.epubkey;const selectionIn=Buffer.concat([state.proposalEncoded.in,state.proposalEncoded.out,state.ephemeralKey.remote]);state.key.remote.verify(selectionIn,state.exchange.in.signature,(err,sigOk)=>{if(err){return callback(err);}if(!sigOk){return callback(new Error('Bad signature'));}log('2.1. verify - signature verified');callback();});};exports.generateKeys=(state,callback)=>{log('2.2. keys');waterfall([cb=>state.shared.generate(state.exchange.in.epubkey,cb),(secret,cb)=>{state.shared.secret=secret;crypto.keys.keyStretcher(state.protocols.local.cipherT,state.protocols.local.hashT,state.shared.secret,cb);},(keys,cb)=>{if(state.protocols.local.order>0){state.protocols.local.keys=keys.k1;state.protocols.remote.keys=keys.k2;}else if(state.protocols.local.order<0){state.protocols.local.keys=keys.k2;state.protocols.remote.keys=keys.k1;}else{return cb(new Error('you are trying to talk to yourself'));}log('2.3. mac + cipher');parallel([_cb=>support.makeMacAndCipher(state.protocols.local,_cb),_cb=>support.makeMacAndCipher(state.protocols.remote,_cb)],cb);}],callback);};exports.verifyNonce=(state,n2)=>{const n1=state.proposal.out.rand;if(n1.equals(n2))return;throw new Error(`Failed to read our encrypted nonce: ${n1.toString('hex')} != ${n2.toString('hex')}`);};},7329:function(module,__unusedexports,__webpack_require__){"use strict";const promisify=__webpack_require__(6955);const Big=__webpack_require__(4417);const Pushable=__webpack_require__(5995);const human=__webpack_require__(3595);const toStream=__webpack_require__(864);const errCode=__webpack_require__(4999);function bandwidthStats(self,opts){return new Promise((resolve,reject)=>{let stats;if(opts.peer){stats=self.libp2p.stats.forPeer(opts.peer);}else if(opts.proto){stats=self.libp2p.stats.forProtocol(opts.proto);}else{stats=self.libp2p.stats.global;}if(!stats){resolve({totalIn:new Big(0),totalOut:new Big(0),rateIn:new Big(0),rateOut:new Big(0)});return;}resolve({totalIn:stats.snapshot.dataReceived,totalOut:stats.snapshot.dataSent,rateIn:new Big(stats.movingAverages.dataReceived['60000'].movingAverage()/60),rateOut:new Big(stats.movingAverages.dataSent['60000'].movingAverage()/60)});});}module.exports=function stats(self){const _bwPullStream=opts=>{opts=opts||{};let interval=null;let stream=Pushable(true,()=>{if(interval){clearInterval(interval);}});if(opts.poll){human(opts.interval||'1s',(err,value)=>{if(err){return stream.end(errCode(err,'ERR_INVALID_POLL_INTERVAL'));}interval=setInterval(()=>{bandwidthStats(self,opts).then(stats=>stream.push(stats)).catch(err=>stream.end(err));},value);});}else{bandwidthStats(self,opts).then(stats=>{stream.push(stats);stream.end();}).catch(err=>stream.end(err));}return stream.source;};return{bitswap:__webpack_require__(9678)(self).stat,repo:__webpack_require__(8011)(self).stat,bw:promisify((opts,callback)=>{if(typeof opts==='function'){callback=opts;opts={};}opts=opts||{};bandwidthStats(self,opts).then(stats=>callback(null,stats)).catch(err=>callback(err));}),bwReadableStream:opts=>toStream.source(_bwPullStream(opts)),bwPullStream:_bwPullStream};};},7335:function(module,__unusedexports,__webpack_require__){"use strict";const PeerId=__webpack_require__(1832);const PeerInfo=__webpack_require__(9265);const multiaddr=__webpack_require__(5920);const errCode=__webpack_require__(4999);module.exports=node=>{return function(peer,callback){let p;if(PeerInfo.isPeerInfo(peer)){p=peer;}else if(multiaddr.isMultiaddr(peer)||typeof peer==='string'){if(typeof peer==='string'){try{peer=multiaddr(peer);}catch(err){return callback(errCode(err,'ERR_INVALID_MULTIADDR'));}}const peerIdB58Str=peer.getPeerId();if(!peerIdB58Str){return callback(errCode(new Error('peer multiaddr instance or string must include peerId'),'ERR_INVALID_MULTIADDR'));}try{p=node.peerBook.get(peerIdB58Str);}catch(err){p=new PeerInfo(PeerId.createFromB58String(peerIdB58Str));}p.multiaddrs.add(peer);}else if(PeerId.isPeerId(peer)){const peerIdB58Str=peer.toB58String();try{p=node.peerBook.get(peerIdB58Str);}catch(err){return node.peerRouting.findPeer(peer,callback);}}else{return callback(errCode(new Error(`${p} is not a valid peer type`),'ERR_INVALID_PEER_TYPE'));}callback(null,p);};};},7341:function(module,__unusedexports,__webpack_require__){"use strict";var _=__webpack_require__(6064);var Base58=__webpack_require__(8014);var buffer=__webpack_require__(9423);var sha256sha256=__webpack_require__(2442).sha256sha256;var Base58Check=function Base58Check(obj){if(!(this instanceof Base58Check))return new Base58Check(obj);if(Buffer.isBuffer(obj)){var buf=obj;this.fromBuffer(buf);}else if(typeof obj==='string'){var str=obj;this.fromString(str);}else if(obj){this.set(obj);}};Base58Check.prototype.set=function(obj){this.buf=obj.buf||this.buf||undefined;return this;};Base58Check.validChecksum=function validChecksum(data,checksum){if(_.isString(data)){data=new buffer.Buffer(Base58.decode(data));}if(_.isString(checksum)){checksum=new buffer.Buffer(Base58.decode(checksum));}if(!checksum){checksum=data.slice(-4);data=data.slice(0,-4);}return Base58Check.checksum(data).toString('hex')===checksum.toString('hex');};Base58Check.decode=function(s){if(typeof s!=='string')throw new Error('Input must be a string');var buf=new Buffer(Base58.decode(s));if(buf.length<4)throw new Error("Input string too short");var data=buf.slice(0,-4);var csum=buf.slice(-4);var hash=sha256sha256(data);var hash4=hash.slice(0,4);if(csum.toString('hex')!==hash4.toString('hex'))throw new Error("Checksum mismatch");return data;};Base58Check.checksum=function(buffer){return sha256sha256(buffer).slice(0,4);};Base58Check.encode=function(buf){if(!Buffer.isBuffer(buf))throw new Error('Input must be a buffer');var checkedBuf=new Buffer(buf.length+4);var hash=Base58Check.checksum(buf);buf.copy(checkedBuf);hash.copy(checkedBuf,buf.length);return Base58.encode(checkedBuf);};Base58Check.prototype.fromBuffer=function(buf){this.buf=buf;return this;};Base58Check.prototype.fromString=function(str){var buf=Base58Check.decode(str);this.buf=buf;return this;};Base58Check.prototype.toBuffer=function(){return this.buf;};Base58Check.prototype.toString=function(){return Base58Check.encode(this.buf);};module.exports=Base58Check;},7360:function(module,__unusedexports,__webpack_require__){const EventEmitter=__webpack_require__(4859).EventEmitter;const shortid=__webpack_require__(5299);const{WORKER_REQUEST_READ_LOCK,WORKER_RELEASE_READ_LOCK,MASTER_GRANT_READ_LOCK,WORKER_REQUEST_WRITE_LOCK,WORKER_RELEASE_WRITE_LOCK,MASTER_GRANT_WRITE_LOCK}=__webpack_require__(2713);const observer=__webpack_require__(9264);const handleWorkerLockRequest=(emitter,masterEvent,requestType,releaseType,grantType)=>{return(worker,event)=>{if(!event||!event.data||event.data.type!==requestType){return;}const requestEvent={type:event.data.type,name:event.data.name,identifier:event.data.identifier};emitter.emit(masterEvent,requestEvent.name,()=>{worker.postMessage({type:grantType,name:requestEvent.name,identifier:requestEvent.identifier});return new Promise(resolve=>{const releaseEventListener=event=>{if(!event||!event.data){return;}const releaseEvent={type:event.data.type,name:event.data.name,identifier:event.data.identifier};if(releaseEvent&&releaseEvent.type===releaseType&&releaseEvent.identifier===requestEvent.identifier){worker.removeEventListener('message',releaseEventListener);resolve();}};worker.addEventListener('message',releaseEventListener);});});};};const makeWorkerLockRequest=(global,name,requestType,grantType,releaseType)=>{return fn=>{const id=shortid.generate();global.postMessage({type:requestType,identifier:id,name});return new Promise((resolve,reject)=>{const listener=event=>{if(!event||!event.data){return;}const responseEvent={type:event.data.type,identifier:event.data.identifier};if(responseEvent&&responseEvent.type===grantType&&responseEvent.identifier===id){global.removeEventListener('message',listener);let error;fn().catch(err=>{error=err;}).then(result=>{global.postMessage({type:releaseType,identifier:id,name});if(error){return reject(error);}return resolve(result);});}};global.addEventListener('message',listener);});};};const defaultOptions={global:global,singleProcess:false};module.exports=options=>{options=Object.assign({},defaultOptions,options);const isMaster=!!options.global.document||options.singleProcess;if(isMaster){const emitter=new EventEmitter();observer.addEventListener('message',handleWorkerLockRequest(emitter,'requestReadLock',WORKER_REQUEST_READ_LOCK,WORKER_RELEASE_READ_LOCK,MASTER_GRANT_READ_LOCK));observer.addEventListener('message',handleWorkerLockRequest(emitter,'requestWriteLock',WORKER_REQUEST_WRITE_LOCK,WORKER_RELEASE_WRITE_LOCK,MASTER_GRANT_WRITE_LOCK));return emitter;}return{isWorker:true,readLock:(name,options)=>makeWorkerLockRequest(options.global,name,WORKER_REQUEST_READ_LOCK,MASTER_GRANT_READ_LOCK,WORKER_RELEASE_READ_LOCK),writeLock:(name,options)=>makeWorkerLockRequest(options.global,name,WORKER_REQUEST_WRITE_LOCK,MASTER_GRANT_WRITE_LOCK,WORKER_RELEASE_WRITE_LOCK)};};},7368:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _setImmediate=__webpack_require__(1454);var _setImmediate2=_interopRequireDefault(_setImmediate);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}exports.default=_setImmediate2.default;module.exports=exports['default'];},7370:function(module,__unusedexports,__webpack_require__){var fs=__webpack_require__(662);function Options(defaults){var internalValues={};var values=this.value={};Object.keys(defaults).forEach(function(key){internalValues[key]=defaults[key];Object.defineProperty(values,key,{get:function(){return internalValues[key];},configurable:false,enumerable:true});});this.reset=function(){Object.keys(defaults).forEach(function(key){internalValues[key]=defaults[key];});return this;};this.merge=function(options,required){options=options||{};if(Object.prototype.toString.call(required)==='[object Array]'){var missing=[];for(var i=0,l=required.length;i<l;++i){var key=required[i];if(!(key in options)){missing.push(key);}}if(missing.length>0){if(missing.length>1){throw new Error('options '+missing.slice(0,missing.length-1).join(', ')+' and '+missing[missing.length-1]+' must be defined');}else throw new Error('option '+missing[0]+' must be defined');}}Object.keys(options).forEach(function(key){if(key in internalValues){internalValues[key]=options[key];}});return this;};this.copy=function(keys){var obj={};Object.keys(defaults).forEach(function(key){if(keys.indexOf(key)!==-1){obj[key]=values[key];}});return obj;};this.read=function(filename,cb){if(typeof cb=='function'){var self=this;fs.readFile(filename,function(error,data){if(error)return cb(error);var conf=JSON.parse(data);self.merge(conf);cb();});}else{var conf=JSON.parse(fs.readFileSync(filename));this.merge(conf);}return this;};this.isDefined=function(key){return typeof values[key]!='undefined';};this.isDefinedAndNonNull=function(key){return typeof values[key]!='undefined'&&values[key]!==null;};Object.freeze(values);Object.freeze(this);}module.exports=Options;},7371:function(module,__unusedexports,__webpack_require__){"use strict";var pna=__webpack_require__(88);var objectKeys=Object.keys||function(obj){var keys=[];for(var key in obj){keys.push(key);}return keys;};module.exports=Duplex;var util=__webpack_require__(5548);util.inherits=__webpack_require__(92);var Readable=__webpack_require__(3431);var Writable=__webpack_require__(2039);util.inherits(Duplex,Readable);{var keys=objectKeys(Writable.prototype);for(var v=0;v<keys.length;v++){var method=keys[v];if(!Duplex.prototype[method])Duplex.prototype[method]=Writable.prototype[method];}}function Duplex(options){if(!(this instanceof Duplex))return new Duplex(options);Readable.call(this,options);Writable.call(this,options);if(options&&options.readable===false)this.readable=false;if(options&&options.writable===false)this.writable=false;this.allowHalfOpen=true;if(options&&options.allowHalfOpen===false)this.allowHalfOpen=false;this.once('end',onend);}Object.defineProperty(Duplex.prototype,'writableHighWaterMark',{enumerable:false,get:function(){return this._writableState.highWaterMark;}});function onend(){if(this.allowHalfOpen||this._writableState.ended)return;pna.nextTick(onEndNT,this);}function onEndNT(self){self.end();}Object.defineProperty(Duplex.prototype,'destroyed',{get:function(){if(this._readableState===undefined||this._writableState===undefined){return false;}return this._readableState.destroyed&&this._writableState.destroyed;},set:function(value){if(this._readableState===undefined||this._writableState===undefined){return;}this._readableState.destroyed=value;this._writableState.destroyed=value;}});Duplex.prototype._destroy=function(err,cb){this.push(null);this.end();pna.nextTick(cb,err);};},7388:function(__unusedmodule,exports){"use strict";exports.ERR_IPNS_EXPIRED_RECORD='ERR_IPNS_EXPIRED_RECORD';exports.ERR_UNRECOGNIZED_VALIDITY='ERR_UNRECOGNIZED_VALIDITY';exports.ERR_SIGNATURE_CREATION='ERR_SIGNATURE_CREATION';exports.ERR_SIGNATURE_VERIFICATION='ERR_SIGNATURE_VERIFICATION';exports.ERR_UNRECOGNIZED_FORMAT='ERR_UNRECOGNIZED_FORMAT';exports.ERR_PEER_ID_FROM_PUBLIC_KEY='ERR_PEER_ID_FROM_PUBLIC_KEY';exports.ERR_PUBLIC_KEY_FROM_ID='ERR_PUBLIC_KEY_FROM_ID';exports.ERR_UNDEFINED_PARAMETER='ERR_UNDEFINED_PARAMETER';},7404:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _timesLimit=__webpack_require__(4928);var _timesLimit2=_interopRequireDefault(_timesLimit);var _doLimit=__webpack_require__(9817);var _doLimit2=_interopRequireDefault(_doLimit);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}exports.default=(0,_doLimit2.default)(_timesLimit2.default,Infinity);module.exports=exports['default'];},7415:function(module,__unusedexports,__webpack_require__){"use strict";const promisify=__webpack_require__(6955);const pull=__webpack_require__(2885);module.exports=function(self){return promisify((ipfsPath,options,callback)=>{if(typeof options==='function'){callback=options;options={};}options=options||{};pull(self.lsPullStream(ipfsPath,options),pull.collect((err,values)=>{if(err){return callback(err);}callback(null,values);}));});};},7419:function(__unusedmodule,exports){"use strict";exports.names=Object.freeze({'id':0x0,'sha1':0x11,'sha2-256':0x12,'sha2-512':0x13,'dbl-sha2-256':0x56,'sha3-224':0x17,'sha3-256':0x16,'sha3-384':0x15,'sha3-512':0x14,'shake-128':0x18,'shake-256':0x19,'keccak-224':0x1A,'keccak-256':0x1B,'keccak-384':0x1C,'keccak-512':0x1D,'murmur3-128':0x22,'murmur3-32':0x23,'blake2b-8':0xb201,'blake2b-16':0xb202,'blake2b-24':0xb203,'blake2b-32':0xb204,'blake2b-40':0xb205,'blake2b-48':0xb206,'blake2b-56':0xb207,'blake2b-64':0xb208,'blake2b-72':0xb209,'blake2b-80':0xb20a,'blake2b-88':0xb20b,'blake2b-96':0xb20c,'blake2b-104':0xb20d,'blake2b-112':0xb20e,'blake2b-120':0xb20f,'blake2b-128':0xb210,'blake2b-136':0xb211,'blake2b-144':0xb212,'blake2b-152':0xb213,'blake2b-160':0xb214,'blake2b-168':0xb215,'blake2b-176':0xb216,'blake2b-184':0xb217,'blake2b-192':0xb218,'blake2b-200':0xb219,'blake2b-208':0xb21a,'blake2b-216':0xb21b,'blake2b-224':0xb21c,'blake2b-232':0xb21d,'blake2b-240':0xb21e,'blake2b-248':0xb21f,'blake2b-256':0xb220,'blake2b-264':0xb221,'blake2b-272':0xb222,'blake2b-280':0xb223,'blake2b-288':0xb224,'blake2b-296':0xb225,'blake2b-304':0xb226,'blake2b-312':0xb227,'blake2b-320':0xb228,'blake2b-328':0xb229,'blake2b-336':0xb22a,'blake2b-344':0xb22b,'blake2b-352':0xb22c,'blake2b-360':0xb22d,'blake2b-368':0xb22e,'blake2b-376':0xb22f,'blake2b-384':0xb230,'blake2b-392':0xb231,'blake2b-400':0xb232,'blake2b-408':0xb233,'blake2b-416':0xb234,'blake2b-424':0xb235,'blake2b-432':0xb236,'blake2b-440':0xb237,'blake2b-448':0xb238,'blake2b-456':0xb239,'blake2b-464':0xb23a,'blake2b-472':0xb23b,'blake2b-480':0xb23c,'blake2b-488':0xb23d,'blake2b-496':0xb23e,'blake2b-504':0xb23f,'blake2b-512':0xb240,'blake2s-8':0xb241,'blake2s-16':0xb242,'blake2s-24':0xb243,'blake2s-32':0xb244,'blake2s-40':0xb245,'blake2s-48':0xb246,'blake2s-56':0xb247,'blake2s-64':0xb248,'blake2s-72':0xb249,'blake2s-80':0xb24a,'blake2s-88':0xb24b,'blake2s-96':0xb24c,'blake2s-104':0xb24d,'blake2s-112':0xb24e,'blake2s-120':0xb24f,'blake2s-128':0xb250,'blake2s-136':0xb251,'blake2s-144':0xb252,'blake2s-152':0xb253,'blake2s-160':0xb254,'blake2s-168':0xb255,'blake2s-176':0xb256,'blake2s-184':0xb257,'blake2s-192':0xb258,'blake2s-200':0xb259,'blake2s-208':0xb25a,'blake2s-216':0xb25b,'blake2s-224':0xb25c,'blake2s-232':0xb25d,'blake2s-240':0xb25e,'blake2s-248':0xb25f,'blake2s-256':0xb260,'Skein256-8':0xb301,'Skein256-16':0xb302,'Skein256-24':0xb303,'Skein256-32':0xb304,'Skein256-40':0xb305,'Skein256-48':0xb306,'Skein256-56':0xb307,'Skein256-64':0xb308,'Skein256-72':0xb309,'Skein256-80':0xb30a,'Skein256-88':0xb30b,'Skein256-96':0xb30c,'Skein256-104':0xb30d,'Skein256-112':0xb30e,'Skein256-120':0xb30f,'Skein256-128':0xb310,'Skein256-136':0xb311,'Skein256-144':0xb312,'Skein256-152':0xb313,'Skein256-160':0xb314,'Skein256-168':0xb315,'Skein256-176':0xb316,'Skein256-184':0xb317,'Skein256-192':0xb318,'Skein256-200':0xb319,'Skein256-208':0xb31a,'Skein256-216':0xb31b,'Skein256-224':0xb31c,'Skein256-232':0xb31d,'Skein256-240':0xb31e,'Skein256-248':0xb31f,'Skein256-256':0xb320,'Skein512-8':0xb321,'Skein512-16':0xb322,'Skein512-24':0xb323,'Skein512-32':0xb324,'Skein512-40':0xb325,'Skein512-48':0xb326,'Skein512-56':0xb327,'Skein512-64':0xb328,'Skein512-72':0xb329,'Skein512-80':0xb32a,'Skein512-88':0xb32b,'Skein512-96':0xb32c,'Skein512-104':0xb32d,'Skein512-112':0xb32e,'Skein512-120':0xb32f,'Skein512-128':0xb330,'Skein512-136':0xb331,'Skein512-144':0xb332,'Skein512-152':0xb333,'Skein512-160':0xb334,'Skein512-168':0xb335,'Skein512-176':0xb336,'Skein512-184':0xb337,'Skein512-192':0xb338,'Skein512-200':0xb339,'Skein512-208':0xb33a,'Skein512-216':0xb33b,'Skein512-224':0xb33c,'Skein512-232':0xb33d,'Skein512-240':0xb33e,'Skein512-248':0xb33f,'Skein512-256':0xb340,'Skein512-264':0xb341,'Skein512-272':0xb342,'Skein512-280':0xb343,'Skein512-288':0xb344,'Skein512-296':0xb345,'Skein512-304':0xb346,'Skein512-312':0xb347,'Skein512-320':0xb348,'Skein512-328':0xb349,'Skein512-336':0xb34a,'Skein512-344':0xb34b,'Skein512-352':0xb34c,'Skein512-360':0xb34d,'Skein512-368':0xb34e,'Skein512-376':0xb34f,'Skein512-384':0xb350,'Skein512-392':0xb351,'Skein512-400':0xb352,'Skein512-408':0xb353,'Skein512-416':0xb354,'Skein512-424':0xb355,'Skein512-432':0xb356,'Skein512-440':0xb357,'Skein512-448':0xb358,'Skein512-456':0xb359,'Skein512-464':0xb35a,'Skein512-472':0xb35b,'Skein512-480':0xb35c,'Skein512-488':0xb35d,'Skein512-496':0xb35e,'Skein512-504':0xb35f,'Skein512-512':0xb360,'Skein1024-8':0xb361,'Skein1024-16':0xb362,'Skein1024-24':0xb363,'Skein1024-32':0xb364,'Skein1024-40':0xb365,'Skein1024-48':0xb366,'Skein1024-56':0xb367,'Skein1024-64':0xb368,'Skein1024-72':0xb369,'Skein1024-80':0xb36a,'Skein1024-88':0xb36b,'Skein1024-96':0xb36c,'Skein1024-104':0xb36d,'Skein1024-112':0xb36e,'Skein1024-120':0xb36f,'Skein1024-128':0xb370,'Skein1024-136':0xb371,'Skein1024-144':0xb372,'Skein1024-152':0xb373,'Skein1024-160':0xb374,'Skein1024-168':0xb375,'Skein1024-176':0xb376,'Skein1024-184':0xb377,'Skein1024-192':0xb378,'Skein1024-200':0xb379,'Skein1024-208':0xb37a,'Skein1024-216':0xb37b,'Skein1024-224':0xb37c,'Skein1024-232':0xb37d,'Skein1024-240':0xb37e,'Skein1024-248':0xb37f,'Skein1024-256':0xb380,'Skein1024-264':0xb381,'Skein1024-272':0xb382,'Skein1024-280':0xb383,'Skein1024-288':0xb384,'Skein1024-296':0xb385,'Skein1024-304':0xb386,'Skein1024-312':0xb387,'Skein1024-320':0xb388,'Skein1024-328':0xb389,'Skein1024-336':0xb38a,'Skein1024-344':0xb38b,'Skein1024-352':0xb38c,'Skein1024-360':0xb38d,'Skein1024-368':0xb38e,'Skein1024-376':0xb38f,'Skein1024-384':0xb390,'Skein1024-392':0xb391,'Skein1024-400':0xb392,'Skein1024-408':0xb393,'Skein1024-416':0xb394,'Skein1024-424':0xb395,'Skein1024-432':0xb396,'Skein1024-440':0xb397,'Skein1024-448':0xb398,'Skein1024-456':0xb399,'Skein1024-464':0xb39a,'Skein1024-472':0xb39b,'Skein1024-480':0xb39c,'Skein1024-488':0xb39d,'Skein1024-496':0xb39e,'Skein1024-504':0xb39f,'Skein1024-512':0xb3a0,'Skein1024-520':0xb3a1,'Skein1024-528':0xb3a2,'Skein1024-536':0xb3a3,'Skein1024-544':0xb3a4,'Skein1024-552':0xb3a5,'Skein1024-560':0xb3a6,'Skein1024-568':0xb3a7,'Skein1024-576':0xb3a8,'Skein1024-584':0xb3a9,'Skein1024-592':0xb3aa,'Skein1024-600':0xb3ab,'Skein1024-608':0xb3ac,'Skein1024-616':0xb3ad,'Skein1024-624':0xb3ae,'Skein1024-632':0xb3af,'Skein1024-640':0xb3b0,'Skein1024-648':0xb3b1,'Skein1024-656':0xb3b2,'Skein1024-664':0xb3b3,'Skein1024-672':0xb3b4,'Skein1024-680':0xb3b5,'Skein1024-688':0xb3b6,'Skein1024-696':0xb3b7,'Skein1024-704':0xb3b8,'Skein1024-712':0xb3b9,'Skein1024-720':0xb3ba,'Skein1024-728':0xb3bb,'Skein1024-736':0xb3bc,'Skein1024-744':0xb3bd,'Skein1024-752':0xb3be,'Skein1024-760':0xb3bf,'Skein1024-768':0xb3c0,'Skein1024-776':0xb3c1,'Skein1024-784':0xb3c2,'Skein1024-792':0xb3c3,'Skein1024-800':0xb3c4,'Skein1024-808':0xb3c5,'Skein1024-816':0xb3c6,'Skein1024-824':0xb3c7,'Skein1024-832':0xb3c8,'Skein1024-840':0xb3c9,'Skein1024-848':0xb3ca,'Skein1024-856':0xb3cb,'Skein1024-864':0xb3cc,'Skein1024-872':0xb3cd,'Skein1024-880':0xb3ce,'Skein1024-888':0xb3cf,'Skein1024-896':0xb3d0,'Skein1024-904':0xb3d1,'Skein1024-912':0xb3d2,'Skein1024-920':0xb3d3,'Skein1024-928':0xb3d4,'Skein1024-936':0xb3d5,'Skein1024-944':0xb3d6,'Skein1024-952':0xb3d7,'Skein1024-960':0xb3d8,'Skein1024-968':0xb3d9,'Skein1024-976':0xb3da,'Skein1024-984':0xb3db,'Skein1024-992':0xb3dc,'Skein1024-1000':0xb3dd,'Skein1024-1008':0xb3de,'Skein1024-1016':0xb3df,'Skein1024-1024':0xb3e0});exports.codes=Object.freeze({0x11:'sha1',0x12:'sha2-256',0x13:'sha2-512',0x56:'dbl-sha2-256',0x17:'sha3-224',0x16:'sha3-256',0x15:'sha3-384',0x14:'sha3-512',0x18:'shake-128',0x19:'shake-256',0x1A:'keccak-224',0x1B:'keccak-256',0x1C:'keccak-384',0x1D:'keccak-512',0x22:'murmur3-128',0x23:'murmur3-32',0xb201:'blake2b-8',0xb202:'blake2b-16',0xb203:'blake2b-24',0xb204:'blake2b-32',0xb205:'blake2b-40',0xb206:'blake2b-48',0xb207:'blake2b-56',0xb208:'blake2b-64',0xb209:'blake2b-72',0xb20a:'blake2b-80',0xb20b:'blake2b-88',0xb20c:'blake2b-96',0xb20d:'blake2b-104',0xb20e:'blake2b-112',0xb20f:'blake2b-120',0xb210:'blake2b-128',0xb211:'blake2b-136',0xb212:'blake2b-144',0xb213:'blake2b-152',0xb214:'blake2b-160',0xb215:'blake2b-168',0xb216:'blake2b-176',0xb217:'blake2b-184',0xb218:'blake2b-192',0xb219:'blake2b-200',0xb21a:'blake2b-208',0xb21b:'blake2b-216',0xb21c:'blake2b-224',0xb21d:'blake2b-232',0xb21e:'blake2b-240',0xb21f:'blake2b-248',0xb220:'blake2b-256',0xb221:'blake2b-264',0xb222:'blake2b-272',0xb223:'blake2b-280',0xb224:'blake2b-288',0xb225:'blake2b-296',0xb226:'blake2b-304',0xb227:'blake2b-312',0xb228:'blake2b-320',0xb229:'blake2b-328',0xb22a:'blake2b-336',0xb22b:'blake2b-344',0xb22c:'blake2b-352',0xb22d:'blake2b-360',0xb22e:'blake2b-368',0xb22f:'blake2b-376',0xb230:'blake2b-384',0xb231:'blake2b-392',0xb232:'blake2b-400',0xb233:'blake2b-408',0xb234:'blake2b-416',0xb235:'blake2b-424',0xb236:'blake2b-432',0xb237:'blake2b-440',0xb238:'blake2b-448',0xb239:'blake2b-456',0xb23a:'blake2b-464',0xb23b:'blake2b-472',0xb23c:'blake2b-480',0xb23d:'blake2b-488',0xb23e:'blake2b-496',0xb23f:'blake2b-504',0xb240:'blake2b-512',0xb241:'blake2s-8',0xb242:'blake2s-16',0xb243:'blake2s-24',0xb244:'blake2s-32',0xb245:'blake2s-40',0xb246:'blake2s-48',0xb247:'blake2s-56',0xb248:'blake2s-64',0xb249:'blake2s-72',0xb24a:'blake2s-80',0xb24b:'blake2s-88',0xb24c:'blake2s-96',0xb24d:'blake2s-104',0xb24e:'blake2s-112',0xb24f:'blake2s-120',0xb250:'blake2s-128',0xb251:'blake2s-136',0xb252:'blake2s-144',0xb253:'blake2s-152',0xb254:'blake2s-160',0xb255:'blake2s-168',0xb256:'blake2s-176',0xb257:'blake2s-184',0xb258:'blake2s-192',0xb259:'blake2s-200',0xb25a:'blake2s-208',0xb25b:'blake2s-216',0xb25c:'blake2s-224',0xb25d:'blake2s-232',0xb25e:'blake2s-240',0xb25f:'blake2s-248',0xb260:'blake2s-256',0xb301:'Skein256-8',0xb302:'Skein256-16',0xb303:'Skein256-24',0xb304:'Skein256-32',0xb305:'Skein256-40',0xb306:'Skein256-48',0xb307:'Skein256-56',0xb308:'Skein256-64',0xb309:'Skein256-72',0xb30a:'Skein256-80',0xb30b:'Skein256-88',0xb30c:'Skein256-96',0xb30d:'Skein256-104',0xb30e:'Skein256-112',0xb30f:'Skein256-120',0xb310:'Skein256-128',0xb311:'Skein256-136',0xb312:'Skein256-144',0xb313:'Skein256-152',0xb314:'Skein256-160',0xb315:'Skein256-168',0xb316:'Skein256-176',0xb317:'Skein256-184',0xb318:'Skein256-192',0xb319:'Skein256-200',0xb31a:'Skein256-208',0xb31b:'Skein256-216',0xb31c:'Skein256-224',0xb31d:'Skein256-232',0xb31e:'Skein256-240',0xb31f:'Skein256-248',0xb320:'Skein256-256',0xb321:'Skein512-8',0xb322:'Skein512-16',0xb323:'Skein512-24',0xb324:'Skein512-32',0xb325:'Skein512-40',0xb326:'Skein512-48',0xb327:'Skein512-56',0xb328:'Skein512-64',0xb329:'Skein512-72',0xb32a:'Skein512-80',0xb32b:'Skein512-88',0xb32c:'Skein512-96',0xb32d:'Skein512-104',0xb32e:'Skein512-112',0xb32f:'Skein512-120',0xb330:'Skein512-128',0xb331:'Skein512-136',0xb332:'Skein512-144',0xb333:'Skein512-152',0xb334:'Skein512-160',0xb335:'Skein512-168',0xb336:'Skein512-176',0xb337:'Skein512-184',0xb338:'Skein512-192',0xb339:'Skein512-200',0xb33a:'Skein512-208',0xb33b:'Skein512-216',0xb33c:'Skein512-224',0xb33d:'Skein512-232',0xb33e:'Skein512-240',0xb33f:'Skein512-248',0xb340:'Skein512-256',0xb341:'Skein512-264',0xb342:'Skein512-272',0xb343:'Skein512-280',0xb344:'Skein512-288',0xb345:'Skein512-296',0xb346:'Skein512-304',0xb347:'Skein512-312',0xb348:'Skein512-320',0xb349:'Skein512-328',0xb34a:'Skein512-336',0xb34b:'Skein512-344',0xb34c:'Skein512-352',0xb34d:'Skein512-360',0xb34e:'Skein512-368',0xb34f:'Skein512-376',0xb350:'Skein512-384',0xb351:'Skein512-392',0xb352:'Skein512-400',0xb353:'Skein512-408',0xb354:'Skein512-416',0xb355:'Skein512-424',0xb356:'Skein512-432',0xb357:'Skein512-440',0xb358:'Skein512-448',0xb359:'Skein512-456',0xb35a:'Skein512-464',0xb35b:'Skein512-472',0xb35c:'Skein512-480',0xb35d:'Skein512-488',0xb35e:'Skein512-496',0xb35f:'Skein512-504',0xb360:'Skein512-512',0xb361:'Skein1024-8',0xb362:'Skein1024-16',0xb363:'Skein1024-24',0xb364:'Skein1024-32',0xb365:'Skein1024-40',0xb366:'Skein1024-48',0xb367:'Skein1024-56',0xb368:'Skein1024-64',0xb369:'Skein1024-72',0xb36a:'Skein1024-80',0xb36b:'Skein1024-88',0xb36c:'Skein1024-96',0xb36d:'Skein1024-104',0xb36e:'Skein1024-112',0xb36f:'Skein1024-120',0xb370:'Skein1024-128',0xb371:'Skein1024-136',0xb372:'Skein1024-144',0xb373:'Skein1024-152',0xb374:'Skein1024-160',0xb375:'Skein1024-168',0xb376:'Skein1024-176',0xb377:'Skein1024-184',0xb378:'Skein1024-192',0xb379:'Skein1024-200',0xb37a:'Skein1024-208',0xb37b:'Skein1024-216',0xb37c:'Skein1024-224',0xb37d:'Skein1024-232',0xb37e:'Skein1024-240',0xb37f:'Skein1024-248',0xb380:'Skein1024-256',0xb381:'Skein1024-264',0xb382:'Skein1024-272',0xb383:'Skein1024-280',0xb384:'Skein1024-288',0xb385:'Skein1024-296',0xb386:'Skein1024-304',0xb387:'Skein1024-312',0xb388:'Skein1024-320',0xb389:'Skein1024-328',0xb38a:'Skein1024-336',0xb38b:'Skein1024-344',0xb38c:'Skein1024-352',0xb38d:'Skein1024-360',0xb38e:'Skein1024-368',0xb38f:'Skein1024-376',0xb390:'Skein1024-384',0xb391:'Skein1024-392',0xb392:'Skein1024-400',0xb393:'Skein1024-408',0xb394:'Skein1024-416',0xb395:'Skein1024-424',0xb396:'Skein1024-432',0xb397:'Skein1024-440',0xb398:'Skein1024-448',0xb399:'Skein1024-456',0xb39a:'Skein1024-464',0xb39b:'Skein1024-472',0xb39c:'Skein1024-480',0xb39d:'Skein1024-488',0xb39e:'Skein1024-496',0xb39f:'Skein1024-504',0xb3a0:'Skein1024-512',0xb3a1:'Skein1024-520',0xb3a2:'Skein1024-528',0xb3a3:'Skein1024-536',0xb3a4:'Skein1024-544',0xb3a5:'Skein1024-552',0xb3a6:'Skein1024-560',0xb3a7:'Skein1024-568',0xb3a8:'Skein1024-576',0xb3a9:'Skein1024-584',0xb3aa:'Skein1024-592',0xb3ab:'Skein1024-600',0xb3ac:'Skein1024-608',0xb3ad:'Skein1024-616',0xb3ae:'Skein1024-624',0xb3af:'Skein1024-632',0xb3b0:'Skein1024-640',0xb3b1:'Skein1024-648',0xb3b2:'Skein1024-656',0xb3b3:'Skein1024-664',0xb3b4:'Skein1024-672',0xb3b5:'Skein1024-680',0xb3b6:'Skein1024-688',0xb3b7:'Skein1024-696',0xb3b8:'Skein1024-704',0xb3b9:'Skein1024-712',0xb3ba:'Skein1024-720',0xb3bb:'Skein1024-728',0xb3bc:'Skein1024-736',0xb3bd:'Skein1024-744',0xb3be:'Skein1024-752',0xb3bf:'Skein1024-760',0xb3c0:'Skein1024-768',0xb3c1:'Skein1024-776',0xb3c2:'Skein1024-784',0xb3c3:'Skein1024-792',0xb3c4:'Skein1024-800',0xb3c5:'Skein1024-808',0xb3c6:'Skein1024-816',0xb3c7:'Skein1024-824',0xb3c8:'Skein1024-832',0xb3c9:'Skein1024-840',0xb3ca:'Skein1024-848',0xb3cb:'Skein1024-856',0xb3cc:'Skein1024-864',0xb3cd:'Skein1024-872',0xb3ce:'Skein1024-880',0xb3cf:'Skein1024-888',0xb3d0:'Skein1024-896',0xb3d1:'Skein1024-904',0xb3d2:'Skein1024-912',0xb3d3:'Skein1024-920',0xb3d4:'Skein1024-928',0xb3d5:'Skein1024-936',0xb3d6:'Skein1024-944',0xb3d7:'Skein1024-952',0xb3d8:'Skein1024-960',0xb3d9:'Skein1024-968',0xb3da:'Skein1024-976',0xb3db:'Skein1024-984',0xb3dc:'Skein1024-992',0xb3dd:'Skein1024-1000',0xb3de:'Skein1024-1008',0xb3df:'Skein1024-1016',0xb3e0:'Skein1024-1024'});exports.defaultLengths=Object.freeze({0x11:20,0x12:32,0x13:64,0x56:32,0x17:28,0x16:32,0x15:48,0x14:64,0x18:32,0x19:64,0x1A:28,0x1B:32,0x1C:48,0x1D:64,0x22:32,0xb201:0x01,0xb202:0x02,0xb203:0x03,0xb204:0x04,0xb205:0x05,0xb206:0x06,0xb207:0x07,0xb208:0x08,0xb209:0x09,0xb20a:0x0a,0xb20b:0x0b,0xb20c:0x0c,0xb20d:0x0d,0xb20e:0x0e,0xb20f:0x0f,0xb210:0x10,0xb211:0x11,0xb212:0x12,0xb213:0x13,0xb214:0x14,0xb215:0x15,0xb216:0x16,0xb217:0x17,0xb218:0x18,0xb219:0x19,0xb21a:0x1a,0xb21b:0x1b,0xb21c:0x1c,0xb21d:0x1d,0xb21e:0x1e,0xb21f:0x1f,0xb220:0x20,0xb221:0x21,0xb222:0x22,0xb223:0x23,0xb224:0x24,0xb225:0x25,0xb226:0x26,0xb227:0x27,0xb228:0x28,0xb229:0x29,0xb22a:0x2a,0xb22b:0x2b,0xb22c:0x2c,0xb22d:0x2d,0xb22e:0x2e,0xb22f:0x2f,0xb230:0x30,0xb231:0x31,0xb232:0x32,0xb233:0x33,0xb234:0x34,0xb235:0x35,0xb236:0x36,0xb237:0x37,0xb238:0x38,0xb239:0x39,0xb23a:0x3a,0xb23b:0x3b,0xb23c:0x3c,0xb23d:0x3d,0xb23e:0x3e,0xb23f:0x3f,0xb240:0x40,0xb241:0x01,0xb242:0x02,0xb243:0x03,0xb244:0x04,0xb245:0x05,0xb246:0x06,0xb247:0x07,0xb248:0x08,0xb249:0x09,0xb24a:0x0a,0xb24b:0x0b,0xb24c:0x0c,0xb24d:0x0d,0xb24e:0x0e,0xb24f:0x0f,0xb250:0x10,0xb251:0x11,0xb252:0x12,0xb253:0x13,0xb254:0x14,0xb255:0x15,0xb256:0x16,0xb257:0x17,0xb258:0x18,0xb259:0x19,0xb25a:0x1a,0xb25b:0x1b,0xb25c:0x1c,0xb25d:0x1d,0xb25e:0x1e,0xb25f:0x1f,0xb260:0x20,0xb301:0x01,0xb302:0x02,0xb303:0x03,0xb304:0x04,0xb305:0x05,0xb306:0x06,0xb307:0x07,0xb308:0x08,0xb309:0x09,0xb30a:0x0a,0xb30b:0x0b,0xb30c:0x0c,0xb30d:0x0d,0xb30e:0x0e,0xb30f:0x0f,0xb310:0x10,0xb311:0x11,0xb312:0x12,0xb313:0x13,0xb314:0x14,0xb315:0x15,0xb316:0x16,0xb317:0x17,0xb318:0x18,0xb319:0x19,0xb31a:0x1a,0xb31b:0x1b,0xb31c:0x1c,0xb31d:0x1d,0xb31e:0x1e,0xb31f:0x1f,0xb320:0x20,0xb321:0x01,0xb322:0x02,0xb323:0x03,0xb324:0x04,0xb325:0x05,0xb326:0x06,0xb327:0x07,0xb328:0x08,0xb329:0x09,0xb32a:0x0a,0xb32b:0x0b,0xb32c:0x0c,0xb32d:0x0d,0xb32e:0x0e,0xb32f:0x0f,0xb330:0x10,0xb331:0x11,0xb332:0x12,0xb333:0x13,0xb334:0x14,0xb335:0x15,0xb336:0x16,0xb337:0x17,0xb338:0x18,0xb339:0x19,0xb33a:0x1a,0xb33b:0x1b,0xb33c:0x1c,0xb33d:0x1d,0xb33e:0x1e,0xb33f:0x1f,0xb340:0x20,0xb341:0x21,0xb342:0x22,0xb343:0x23,0xb344:0x24,0xb345:0x25,0xb346:0x26,0xb347:0x27,0xb348:0x28,0xb349:0x29,0xb34a:0x2a,0xb34b:0x2b,0xb34c:0x2c,0xb34d:0x2d,0xb34e:0x2e,0xb34f:0x2f,0xb350:0x30,0xb351:0x31,0xb352:0x32,0xb353:0x33,0xb354:0x34,0xb355:0x35,0xb356:0x36,0xb357:0x37,0xb358:0x38,0xb359:0x39,0xb35a:0x3a,0xb35b:0x3b,0xb35c:0x3c,0xb35d:0x3d,0xb35e:0x3e,0xb35f:0x3f,0xb360:0x40,0xb361:0x01,0xb362:0x02,0xb363:0x03,0xb364:0x04,0xb365:0x05,0xb366:0x06,0xb367:0x07,0xb368:0x08,0xb369:0x09,0xb36a:0x0a,0xb36b:0x0b,0xb36c:0x0c,0xb36d:0x0d,0xb36e:0x0e,0xb36f:0x0f,0xb370:0x10,0xb371:0x11,0xb372:0x12,0xb373:0x13,0xb374:0x14,0xb375:0x15,0xb376:0x16,0xb377:0x17,0xb378:0x18,0xb379:0x19,0xb37a:0x1a,0xb37b:0x1b,0xb37c:0x1c,0xb37d:0x1d,0xb37e:0x1e,0xb37f:0x1f,0xb380:0x20,0xb381:0x21,0xb382:0x22,0xb383:0x23,0xb384:0x24,0xb385:0x25,0xb386:0x26,0xb387:0x27,0xb388:0x28,0xb389:0x29,0xb38a:0x2a,0xb38b:0x2b,0xb38c:0x2c,0xb38d:0x2d,0xb38e:0x2e,0xb38f:0x2f,0xb390:0x30,0xb391:0x31,0xb392:0x32,0xb393:0x33,0xb394:0x34,0xb395:0x35,0xb396:0x36,0xb397:0x37,0xb398:0x38,0xb399:0x39,0xb39a:0x3a,0xb39b:0x3b,0xb39c:0x3c,0xb39d:0x3d,0xb39e:0x3e,0xb39f:0x3f,0xb3a0:0x40,0xb3a1:0x41,0xb3a2:0x42,0xb3a3:0x43,0xb3a4:0x44,0xb3a5:0x45,0xb3a6:0x46,0xb3a7:0x47,0xb3a8:0x48,0xb3a9:0x49,0xb3aa:0x4a,0xb3ab:0x4b,0xb3ac:0x4c,0xb3ad:0x4d,0xb3ae:0x4e,0xb3af:0x4f,0xb3b0:0x50,0xb3b1:0x51,0xb3b2:0x52,0xb3b3:0x53,0xb3b4:0x54,0xb3b5:0x55,0xb3b6:0x56,0xb3b7:0x57,0xb3b8:0x58,0xb3b9:0x59,0xb3ba:0x5a,0xb3bb:0x5b,0xb3bc:0x5c,0xb3bd:0x5d,0xb3be:0x5e,0xb3bf:0x5f,0xb3c0:0x60,0xb3c1:0x61,0xb3c2:0x62,0xb3c3:0x63,0xb3c4:0x64,0xb3c5:0x65,0xb3c6:0x66,0xb3c7:0x67,0xb3c8:0x68,0xb3c9:0x69,0xb3ca:0x6a,0xb3cb:0x6b,0xb3cc:0x6c,0xb3cd:0x6d,0xb3ce:0x6e,0xb3cf:0x6f,0xb3d0:0x70,0xb3d1:0x71,0xb3d2:0x72,0xb3d3:0x73,0xb3d4:0x74,0xb3d5:0x75,0xb3d6:0x76,0xb3d7:0x77,0xb3d8:0x78,0xb3d9:0x79,0xb3da:0x7a,0xb3db:0x7b,0xb3dc:0x7c,0xb3dd:0x7d,0xb3de:0x7e,0xb3df:0x7f,0xb3e0:0x80});},7421:function(__unusedmodule,exports,__webpack_require__){"use strict";exports.DAGNode=__webpack_require__(1758);exports.DAGLink=__webpack_require__(7545);exports.resolver=__webpack_require__(806);exports.util=__webpack_require__(7954);},7430:function(module,__unusedexports,__webpack_require__){"use strict";const pull=__webpack_require__(418);const values=__webpack_require__(5130);const filter=__webpack_require__(708);const map=__webpack_require__(569);const cat=__webpack_require__(6246);module.exports=dirExporter;function dirExporter(cid,node,name,path,pathRest,resolve,size,dag,parent,depth,options){const accepts=pathRest[0];const dir={name:name,depth:depth,path:path,multihash:cid.buffer,size:node.size,type:'dir'};if(options.maxDepth&&options.maxDepth<=depth){return values([dir]);}const streams=[pull(values(node.links),filter(item=>accepts===undefined||item.name===accepts),map(link=>({depth:depth+1,size:link.size,name:link.name,path:path+'/'+link.name,multihash:link.cid.buffer,linkName:link.name,pathRest:pathRest.slice(1),type:'dir'})),resolve)];if(!pathRest.length||options.fullPath){streams.unshift(values([dir]));}return cat(streams);}},7432:function(module){var looper=module.exports=function(fun){(function next(){var loop=true,returned=false,sync=false;do{sync=true;loop=false;fun.call(this,function(){if(sync)loop=true;else next();});sync=false;}while(loop);})();};},7434:function(module,__unusedexports,__webpack_require__){"use strict";const waterfall=__webpack_require__(4265);const each=__webpack_require__(4486);const asyncify=__webpack_require__(7144);const RLP=__webpack_require__(6585);const EthBlockHead=__webpack_require__(5506);const multihash=__webpack_require__(9424);const cidFromHash=__webpack_require__(5855);const ethBlockResolver=__webpack_require__(289).resolver;const createResolver=__webpack_require__(7656);const ethBlockListResolver=createResolver('eth-block-list',undefined,mapFromEthObj);const util=ethBlockListResolver.util;util.serialize=asyncify(ethBlockList=>{const rawOmmers=ethBlockList.map(ethBlock=>ethBlock.raw);return RLP.encode(rawOmmers);});util.deserialize=asyncify(serialized=>{const rawOmmers=RLP.decode(serialized);return rawOmmers.map(rawBlock=>new EthBlockHead(rawBlock));});util.cid=(blockList,options,callback)=>{if(typeof options==='function'){callback=options;options={};}options=options||{};const hashAlg=options.hashAlg||'keccak-256';const version=typeof options.version==='undefined'?1:options.version;waterfall([cb=>util.serialize(blockList,cb),(data,cb)=>multihash.digest(data,hashAlg,cb),asyncify(mhash=>cidFromHash('eth-block-list',mhash,options))],callback);};module.exports=ethBlockListResolver;function mapFromEthObj(ethBlockList,options,callback){let paths=[];paths.push({path:'count',value:ethBlockList.length});each(ethBlockList,(ethBlock,next)=>{const index=ethBlockList.indexOf(ethBlock);const blockPath=index.toString();paths.push({path:blockPath,value:ethBlock});ethBlockResolver._mapFromEthObject(ethBlock,{},(err,subpaths)=>{if(err)return next(err);subpaths.forEach(path=>path.path=blockPath+'/'+path.path);paths=paths.concat(subpaths);next();});},err=>{if(err)return callback(err);callback(null,paths);});}},7438:function(module,__unusedexports,__webpack_require__){"use strict";var isValidUTF8;try{isValidUTF8=__webpack_require__(9412);}catch(e){isValidUTF8=__webpack_require__(5703);}module.exports=typeof isValidUTF8==='object'?isValidUTF8.Validation.isValidUTF8:isValidUTF8;},7442:function(module,__unusedexports,__webpack_require__){"use strict";const Hoek=__webpack_require__(2850);const Any=__webpack_require__(7492);const Cast=__webpack_require__(7622);const Ref=__webpack_require__(1937);const State=__webpack_require__(7941);const internals={};internals.fastSplice=function(arr,i){let pos=i;while(pos<arr.length){arr[pos++]=arr[pos];}--arr.length;};internals.Array=class extends Any{constructor(){super();this._type='array';this._inner.items=[];this._inner.ordereds=[];this._inner.inclusions=[];this._inner.exclusions=[];this._inner.requireds=[];this._flags.sparse=false;}_base(value,state,options){const result={value};if(typeof value==='string'&&options.convert){internals.safeParse(value,result);}let isArray=Array.isArray(result.value);const wasArray=isArray;if(options.convert&&this._flags.single&&!isArray){result.value=[result.value];isArray=true;}if(!isArray){result.errors=this.createError('array.base',null,state,options);return result;}if(this._inner.inclusions.length||this._inner.exclusions.length||this._inner.requireds.length||this._inner.ordereds.length||!this._flags.sparse){if(wasArray){result.value=result.value.slice(0);}result.errors=this._checkItems(result.value,wasArray,state,options);if(result.errors&&wasArray&&options.convert&&this._flags.single){const previousErrors=result.errors;result.value=[result.value];result.errors=this._checkItems(result.value,wasArray,state,options);if(result.errors){result.errors=previousErrors;result.value=result.value[0];}}}return result;}_checkItems(items,wasArray,state,options){const errors=[];let errored;const requireds=this._inner.requireds.slice();const ordereds=this._inner.ordereds.slice();const inclusions=[...this._inner.inclusions,...requireds];let il=items.length;for(let i=0;i<il;++i){errored=false;const item=items[i];let isValid=false;const key=wasArray?i:state.key;const path=wasArray?[...state.path,i]:state.path;const localState=new State(key,path,state.parent,state.reference);let res;if(!this._flags.sparse&&item===undefined){errors.push(this.createError('array.sparse',null,{key:state.key,path:localState.path,pos:i},options));if(options.abortEarly){return errors;}ordereds.shift();continue;}for(let j=0;j<this._inner.exclusions.length;++j){res=this._inner.exclusions[j]._validate(item,localState,{});if(!res.errors){errors.push(this.createError(wasArray?'array.excludes':'array.excludesSingle',{pos:i,value:item},{key:state.key,path:localState.path},options));errored=true;if(options.abortEarly){return errors;}ordereds.shift();break;}}if(errored){continue;}if(this._inner.ordereds.length){if(ordereds.length>0){const ordered=ordereds.shift();res=ordered._validate(item,localState,options);if(!res.errors){if(ordered._flags.strip){internals.fastSplice(items,i);--i;--il;}else if(!this._flags.sparse&&res.value===undefined){errors.push(this.createError('array.sparse',null,{key:state.key,path:localState.path,pos:i},options));if(options.abortEarly){return errors;}continue;}else{items[i]=res.value;}}else{errors.push(this.createError('array.ordered',{pos:i,reason:res.errors,value:item},{key:state.key,path:localState.path},options));if(options.abortEarly){return errors;}}continue;}else if(!this._inner.items.length){errors.push(this.createError('array.orderedLength',{pos:i,limit:this._inner.ordereds.length},{key:state.key,path:localState.path},options));if(options.abortEarly){return errors;}continue;}}const requiredChecks=[];let jl=requireds.length;for(let j=0;j<jl;++j){res=requiredChecks[j]=requireds[j]._validate(item,localState,options);if(!res.errors){items[i]=res.value;isValid=true;internals.fastSplice(requireds,j);--j;--jl;if(!this._flags.sparse&&res.value===undefined){errors.push(this.createError('array.sparse',null,{key:state.key,path:localState.path,pos:i},options));if(options.abortEarly){return errors;}}break;}}if(isValid){continue;}const stripUnknown=options.stripUnknown&&!!options.stripUnknown.arrays||false;jl=inclusions.length;for(let j=0;j<jl;++j){const inclusion=inclusions[j];const previousCheck=requireds.indexOf(inclusion);if(previousCheck!==-1){res=requiredChecks[previousCheck];}else{res=inclusion._validate(item,localState,options);if(!res.errors){if(inclusion._flags.strip){internals.fastSplice(items,i);--i;--il;}else if(!this._flags.sparse&&res.value===undefined){errors.push(this.createError('array.sparse',null,{key:state.key,path:localState.path,pos:i},options));errored=true;}else{items[i]=res.value;}isValid=true;break;}}if(jl===1){if(stripUnknown){internals.fastSplice(items,i);--i;--il;isValid=true;break;}errors.push(this.createError(wasArray?'array.includesOne':'array.includesOneSingle',{pos:i,reason:res.errors,value:item},{key:state.key,path:localState.path},options));errored=true;if(options.abortEarly){return errors;}break;}}if(errored){continue;}if(this._inner.inclusions.length&&!isValid){if(stripUnknown){internals.fastSplice(items,i);--i;--il;continue;}errors.push(this.createError(wasArray?'array.includes':'array.includesSingle',{pos:i,value:item},{key:state.key,path:localState.path},options));if(options.abortEarly){return errors;}}}if(requireds.length){this._fillMissedErrors(errors,requireds,state,options);}if(ordereds.length){this._fillOrderedErrors(errors,ordereds,state,options);}return errors.length?errors:null;}describe(){const description=super.describe();if(this._inner.ordereds.length){description.orderedItems=[];for(let i=0;i<this._inner.ordereds.length;++i){description.orderedItems.push(this._inner.ordereds[i].describe());}}if(this._inner.items.length){description.items=[];for(let i=0;i<this._inner.items.length;++i){description.items.push(this._inner.items[i].describe());}}if(description.rules){for(let i=0;i<description.rules.length;++i){const rule=description.rules[i];if(rule.name==='has'){rule.arg=rule.arg.describe();}}}return description;}items(...schemas){const obj=this.clone();Hoek.flatten(schemas).forEach((type,index)=>{try{type=Cast.schema(this._currentJoi,type);}catch(castErr){if(castErr.hasOwnProperty('path')){castErr.path=index+'.'+castErr.path;}else{castErr.path=index;}castErr.message=`${castErr.message}(${castErr.path})`;throw castErr;}obj._inner.items.push(type);if(type._flags.presence==='required'){obj._inner.requireds.push(type);}else if(type._flags.presence==='forbidden'){obj._inner.exclusions.push(type.optional());}else{obj._inner.inclusions.push(type);}});return obj;}ordered(...schemas){const obj=this.clone();Hoek.flatten(schemas).forEach((type,index)=>{try{type=Cast.schema(this._currentJoi,type);}catch(castErr){if(castErr.hasOwnProperty('path')){castErr.path=index+'.'+castErr.path;}else{castErr.path=index;}castErr.message=`${castErr.message}(${castErr.path})`;throw castErr;}obj._inner.ordereds.push(type);});return obj;}min(limit){const isRef=Ref.isRef(limit);Hoek.assert(Number.isSafeInteger(limit)&&limit>=0||isRef,'limit must be a positive integer or reference');return this._testUnique('min',limit,function(value,state,options){let compareTo;if(isRef){compareTo=limit(state.reference||state.parent,options);if(!(Number.isSafeInteger(compareTo)&&compareTo>=0)){return this.createError('array.ref',{ref:limit,value:compareTo},state,options);}}else{compareTo=limit;}if(value.length>=compareTo){return value;}return this.createError('array.min',{limit,value},state,options);});}max(limit){const isRef=Ref.isRef(limit);Hoek.assert(Number.isSafeInteger(limit)&&limit>=0||isRef,'limit must be a positive integer or reference');return this._testUnique('max',limit,function(value,state,options){let compareTo;if(isRef){compareTo=limit(state.reference||state.parent,options);if(!(Number.isSafeInteger(compareTo)&&compareTo>=0)){return this.createError('array.ref',{ref:limit.key},state,options);}}else{compareTo=limit;}if(value.length<=compareTo){return value;}return this.createError('array.max',{limit,value},state,options);});}length(limit){const isRef=Ref.isRef(limit);Hoek.assert(Number.isSafeInteger(limit)&&limit>=0||isRef,'limit must be a positive integer or reference');return this._testUnique('length',limit,function(value,state,options){let compareTo;if(isRef){compareTo=limit(state.reference||state.parent,options);if(!(Number.isSafeInteger(compareTo)&&compareTo>=0)){return this.createError('array.ref',{ref:limit.key},state,options);}}else{compareTo=limit;}if(value.length===compareTo){return value;}return this.createError('array.length',{limit,value},state,options);});}has(schema){try{schema=Cast.schema(this._currentJoi,schema);}catch(castErr){if(castErr.hasOwnProperty('path')){castErr.message=`${castErr.message}(${castErr.path})`;}throw castErr;}return this._test('has',schema,function(value,state,options){const isValid=value.some((item,idx)=>{const localState=new State(idx,[...state.path,idx],state.key,state.reference);return!schema._validate(item,localState,options).errors;});if(isValid){return value;}const patternLabel=schema._getLabel();if(patternLabel){return this.createError('array.hasKnown',{patternLabel},state,options);}return this.createError('array.hasUnknown',null,state,options);});}unique(comparator,configs){Hoek.assert(comparator===undefined||typeof comparator==='function'||typeof comparator==='string','comparator must be a function or a string');Hoek.assert(configs===undefined||typeof configs==='object','configs must be an object');const settings={ignoreUndefined:configs&&configs.ignoreUndefined||false};if(typeof comparator==='string'){settings.path=comparator;}else if(typeof comparator==='function'){settings.comparator=comparator;}return this._test('unique',settings,function(value,state,options){const found={string:Object.create(null),number:Object.create(null),undefined:Object.create(null),boolean:Object.create(null),object:new Map(),function:new Map(),custom:new Map()};const compare=settings.comparator||Hoek.deepEqual;const ignoreUndefined=settings.ignoreUndefined;for(let i=0;i<value.length;++i){const item=settings.path?Hoek.reach(value[i],settings.path):value[i];const records=settings.comparator?found.custom:found[typeof item];if(records){if(records instanceof Map){const entries=records.entries();let current;while(!(current=entries.next()).done){if(compare(current.value[0],item)){const localState=new State(state.key,[...state.path,i],state.parent,state.reference);const context={pos:i,value:value[i],dupePos:current.value[1],dupeValue:value[current.value[1]]};if(settings.path){context.path=settings.path;}return this.createError('array.unique',context,localState,options);}}records.set(item,i);}else{if((!ignoreUndefined||item!==undefined)&&records[item]!==undefined){const localState=new State(state.key,[...state.path,i],state.parent,state.reference);const context={pos:i,value:value[i],dupePos:records[item],dupeValue:value[records[item]]};if(settings.path){context.path=settings.path;}return this.createError('array.unique',context,localState,options);}records[item]=i;}}}return value;});}sparse(enabled){const value=enabled===undefined?true:!!enabled;if(this._flags.sparse===value){return this;}const obj=this.clone();obj._flags.sparse=value;return obj;}single(enabled){const value=enabled===undefined?true:!!enabled;if(this._flags.single===value){return this;}const obj=this.clone();obj._flags.single=value;return obj;}_fillMissedErrors(errors,requireds,state,options){const knownMisses=[];let unknownMisses=0;for(let i=0;i<requireds.length;++i){const label=requireds[i]._getLabel();if(label){knownMisses.push(label);}else{++unknownMisses;}}if(knownMisses.length){if(unknownMisses){errors.push(this.createError('array.includesRequiredBoth',{knownMisses,unknownMisses},{key:state.key,path:state.path},options));}else{errors.push(this.createError('array.includesRequiredKnowns',{knownMisses},{key:state.key,path:state.path},options));}}else{errors.push(this.createError('array.includesRequiredUnknowns',{unknownMisses},{key:state.key,path:state.path},options));}}_fillOrderedErrors(errors,ordereds,state,options){const requiredOrdereds=[];for(let i=0;i<ordereds.length;++i){const presence=Hoek.reach(ordereds[i],'_flags.presence');if(presence==='required'){requiredOrdereds.push(ordereds[i]);}}if(requiredOrdereds.length){this._fillMissedErrors(errors,requiredOrdereds,state,options);}}};internals.safeParse=function(value,result){try{const converted=JSON.parse(value);if(Array.isArray(converted)){result.value=converted;}}catch(e){}};module.exports=new internals.Array();},7454:function(module,__unusedexports,__webpack_require__){var stream=__webpack_require__(8768);var eos=__webpack_require__(1201);var inherits=__webpack_require__(92);var shift=__webpack_require__(5801);var SIGNAL_FLUSH=Buffer.from&&Buffer.from!==Uint8Array.from?Buffer.from([0]):new Buffer([0]);var onuncork=function(self,fn){if(self._corked)self.once('uncork',fn);else fn();};var autoDestroy=function(self,err){if(self._autoDestroy)self.destroy(err);};var destroyer=function(self,end){return function(err){if(err)autoDestroy(self,err.message==='premature close'?null:err);else if(end&&!self._ended)self.end();};};var end=function(ws,fn){if(!ws)return fn();if(ws._writableState&&ws._writableState.finished)return fn();if(ws._writableState)return ws.end(fn);ws.end();fn();};var toStreams2=function(rs){return new stream.Readable({objectMode:true,highWaterMark:16}).wrap(rs);};var Duplexify=function(writable,readable,opts){if(!(this instanceof Duplexify))return new Duplexify(writable,readable,opts);stream.Duplex.call(this,opts);this._writable=null;this._readable=null;this._readable2=null;this._autoDestroy=!opts||opts.autoDestroy!==false;this._forwardDestroy=!opts||opts.destroy!==false;this._forwardEnd=!opts||opts.end!==false;this._corked=1;this._ondrain=null;this._drained=false;this._forwarding=false;this._unwrite=null;this._unread=null;this._ended=false;this.destroyed=false;if(writable)this.setWritable(writable);if(readable)this.setReadable(readable);};inherits(Duplexify,stream.Duplex);Duplexify.obj=function(writable,readable,opts){if(!opts)opts={};opts.objectMode=true;opts.highWaterMark=16;return new Duplexify(writable,readable,opts);};Duplexify.prototype.cork=function(){if(++this._corked===1)this.emit('cork');};Duplexify.prototype.uncork=function(){if(this._corked&&--this._corked===0)this.emit('uncork');};Duplexify.prototype.setWritable=function(writable){if(this._unwrite)this._unwrite();if(this.destroyed){if(writable&&writable.destroy)writable.destroy();return;}if(writable===null||writable===false){this.end();return;}var self=this;var unend=eos(writable,{writable:true,readable:false},destroyer(this,this._forwardEnd));var ondrain=function(){var ondrain=self._ondrain;self._ondrain=null;if(ondrain)ondrain();};var clear=function(){self._writable.removeListener('drain',ondrain);unend();};if(this._unwrite)process.nextTick(ondrain);this._writable=writable;this._writable.on('drain',ondrain);this._unwrite=clear;this.uncork();};Duplexify.prototype.setReadable=function(readable){if(this._unread)this._unread();if(this.destroyed){if(readable&&readable.destroy)readable.destroy();return;}if(readable===null||readable===false){this.push(null);this.resume();return;}var self=this;var unend=eos(readable,{writable:false,readable:true},destroyer(this));var onreadable=function(){self._forward();};var onend=function(){self.push(null);};var clear=function(){self._readable2.removeListener('readable',onreadable);self._readable2.removeListener('end',onend);unend();};this._drained=true;this._readable=readable;this._readable2=readable._readableState?readable:toStreams2(readable);this._readable2.on('readable',onreadable);this._readable2.on('end',onend);this._unread=clear;this._forward();};Duplexify.prototype._read=function(){this._drained=true;this._forward();};Duplexify.prototype._forward=function(){if(this._forwarding||!this._readable2||!this._drained)return;this._forwarding=true;var data;while(this._drained&&(data=shift(this._readable2))!==null){if(this.destroyed)continue;this._drained=this.push(data);}this._forwarding=false;};Duplexify.prototype.destroy=function(err){if(this.destroyed)return;this.destroyed=true;var self=this;process.nextTick(function(){self._destroy(err);});};Duplexify.prototype._destroy=function(err){if(err){var ondrain=this._ondrain;this._ondrain=null;if(ondrain)ondrain(err);else this.emit('error',err);}if(this._forwardDestroy){if(this._readable&&this._readable.destroy)this._readable.destroy();if(this._writable&&this._writable.destroy)this._writable.destroy();}this.emit('close');};Duplexify.prototype._write=function(data,enc,cb){if(this.destroyed)return cb();if(this._corked)return onuncork(this,this._write.bind(this,data,enc,cb));if(data===SIGNAL_FLUSH)return this._finish(cb);if(!this._writable)return cb();if(this._writable.write(data)===false)this._ondrain=cb;else cb();};Duplexify.prototype._finish=function(cb){var self=this;this.emit('preend');onuncork(this,function(){end(self._forwardEnd&&self._writable,function(){if(self._writableState.prefinished===false)self._writableState.prefinished=true;self.emit('prefinish');onuncork(self,cb);});});};Duplexify.prototype.end=function(data,enc,cb){if(typeof data==='function')return this.end(null,null,data);if(typeof enc==='function')return this.end(data,null,enc);this._ended=true;if(data)this.write(data);if(!this._writableState.ending)this.write(SIGNAL_FLUSH);return stream.Writable.prototype.end.call(this,cb);};module.exports=Duplexify;},7464:function(module){var N1=Math.pow(2,7);var N2=Math.pow(2,14);var N3=Math.pow(2,21);var N4=Math.pow(2,28);var N5=Math.pow(2,35);var N6=Math.pow(2,42);var N7=Math.pow(2,49);var N8=Math.pow(2,56);var N9=Math.pow(2,63);module.exports=function(value){return value<N1?1:value<N2?2:value<N3?3:value<N4?4:value<N5?5:value<N6?6:value<N7?7:value<N8?8:value<N9?9:10;};},7467:function(module,exports,__webpack_require__){module=__webpack_require__.nmd(module);var LARGE_ARRAY_SIZE=200;var HASH_UNDEFINED='__lodash_hash_undefined__';var UNORDERED_COMPARE_FLAG=1,PARTIAL_COMPARE_FLAG=2;var MAX_SAFE_INTEGER=9007199254740991;var argsTag='[object Arguments]',arrayTag='[object Array]',boolTag='[object Boolean]',dateTag='[object Date]',errorTag='[object Error]',funcTag='[object Function]',genTag='[object GeneratorFunction]',mapTag='[object Map]',numberTag='[object Number]',objectTag='[object Object]',promiseTag='[object Promise]',regexpTag='[object RegExp]',setTag='[object Set]',stringTag='[object String]',symbolTag='[object Symbol]',weakMapTag='[object WeakMap]';var arrayBufferTag='[object ArrayBuffer]',dataViewTag='[object DataView]',float32Tag='[object Float32Array]',float64Tag='[object Float64Array]',int8Tag='[object Int8Array]',int16Tag='[object Int16Array]',int32Tag='[object Int32Array]',uint8Tag='[object Uint8Array]',uint8ClampedTag='[object Uint8ClampedArray]',uint16Tag='[object Uint16Array]',uint32Tag='[object Uint32Array]';var reRegExpChar=/[\\^$.*+?()[\]{}|]/g;var reIsHostCtor=/^\[object .+?Constructor\]$/;var reIsUint=/^(?:0|[1-9]\d*)$/;var typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=true;typedArrayTags[argsTag]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=false;var freeGlobal=typeof global=='object'&&global&&global.Object===Object&&global;var freeSelf=typeof self=='object'&&self&&self.Object===Object&&self;var root=freeGlobal||freeSelf||Function('return this')();var freeExports=true&&exports&&!exports.nodeType&&exports;var freeModule=freeExports&&"object"=='object'&&module&&!module.nodeType&&module;var moduleExports=freeModule&&freeModule.exports===freeExports;var freeProcess=moduleExports&&freeGlobal.process;var nodeUtil=function(){try{return freeProcess&&freeProcess.binding('util');}catch(e){}}();var nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray;function arraySome(array,predicate){var index=-1,length=array?array.length:0;while(++index<length){if(predicate(array[index],index,array)){return true;}}return false;}function baseTimes(n,iteratee){var index=-1,result=Array(n);while(++index<n){result[index]=iteratee(index);}return result;}function baseUnary(func){return function(value){return func(value);};}function getValue(object,key){return object==null?undefined:object[key];}function isHostObject(value){var result=false;if(value!=null&&typeof value.toString!='function'){try{result=!!(value+'');}catch(e){}}return result;}function mapToArray(map){var index=-1,result=Array(map.size);map.forEach(function(value,key){result[++index]=[key,value];});return result;}function overArg(func,transform){return function(arg){return func(transform(arg));};}function setToArray(set){var index=-1,result=Array(set.size);set.forEach(function(value){result[++index]=value;});return result;}var arrayProto=Array.prototype,funcProto=Function.prototype,objectProto=Object.prototype;var coreJsData=root['__core-js_shared__'];var maskSrcKey=function(){var uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||'');return uid?'Symbol(src)_1.'+uid:'';}();var funcToString=funcProto.toString;var hasOwnProperty=objectProto.hasOwnProperty;var objectToString=objectProto.toString;var reIsNative=RegExp('^'+funcToString.call(hasOwnProperty).replace(reRegExpChar,'\\$&').replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,'$1.*?')+'$');var Symbol=root.Symbol,Uint8Array=root.Uint8Array,propertyIsEnumerable=objectProto.propertyIsEnumerable,splice=arrayProto.splice;var nativeKeys=overArg(Object.keys,Object);var DataView=getNative(root,'DataView'),Map=getNative(root,'Map'),Promise=getNative(root,'Promise'),Set=getNative(root,'Set'),WeakMap=getNative(root,'WeakMap'),nativeCreate=getNative(Object,'create');var dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map),promiseCtorString=toSource(Promise),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap);var symbolProto=Symbol?Symbol.prototype:undefined,symbolValueOf=symbolProto?symbolProto.valueOf:undefined;function Hash(entries){var index=-1,length=entries?entries.length:0;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1]);}}function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{};}function hashDelete(key){return this.has(key)&&delete this.__data__[key];}function hashGet(key){var data=this.__data__;if(nativeCreate){var result=data[key];return result===HASH_UNDEFINED?undefined:result;}return hasOwnProperty.call(data,key)?data[key]:undefined;}function hashHas(key){var data=this.__data__;return nativeCreate?data[key]!==undefined:hasOwnProperty.call(data,key);}function hashSet(key,value){var data=this.__data__;data[key]=nativeCreate&&value===undefined?HASH_UNDEFINED:value;return this;}Hash.prototype.clear=hashClear;Hash.prototype['delete']=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;function ListCache(entries){var index=-1,length=entries?entries.length:0;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1]);}}function listCacheClear(){this.__data__=[];}function listCacheDelete(key){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){return false;}var lastIndex=data.length-1;if(index==lastIndex){data.pop();}else{splice.call(data,index,1);}return true;}function listCacheGet(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?undefined:data[index][1];}function listCacheHas(key){return assocIndexOf(this.__data__,key)>-1;}function listCacheSet(key,value){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){data.push([key,value]);}else{data[index][1]=value;}return this;}ListCache.prototype.clear=listCacheClear;ListCache.prototype['delete']=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;function MapCache(entries){var index=-1,length=entries?entries.length:0;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1]);}}function mapCacheClear(){this.__data__={'hash':new Hash(),'map':new(Map||ListCache)(),'string':new Hash()};}function mapCacheDelete(key){return getMapData(this,key)['delete'](key);}function mapCacheGet(key){return getMapData(this,key).get(key);}function mapCacheHas(key){return getMapData(this,key).has(key);}function mapCacheSet(key,value){getMapData(this,key).set(key,value);return this;}MapCache.prototype.clear=mapCacheClear;MapCache.prototype['delete']=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;function SetCache(values){var index=-1,length=values?values.length:0;this.__data__=new MapCache();while(++index<length){this.add(values[index]);}}function setCacheAdd(value){this.__data__.set(value,HASH_UNDEFINED);return this;}function setCacheHas(value){return this.__data__.has(value);}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd;SetCache.prototype.has=setCacheHas;function Stack(entries){this.__data__=new ListCache(entries);}function stackClear(){this.__data__=new ListCache();}function stackDelete(key){return this.__data__['delete'](key);}function stackGet(key){return this.__data__.get(key);}function stackHas(key){return this.__data__.has(key);}function stackSet(key,value){var cache=this.__data__;if(cache instanceof ListCache){var pairs=cache.__data__;if(!Map||pairs.length<LARGE_ARRAY_SIZE-1){pairs.push([key,value]);return this;}cache=this.__data__=new MapCache(pairs);}cache.set(key,value);return this;}Stack.prototype.clear=stackClear;Stack.prototype['delete']=stackDelete;Stack.prototype.get=stackGet;Stack.prototype.has=stackHas;Stack.prototype.set=stackSet;function arrayLikeKeys(value,inherited){var result=isArray(value)||isArguments(value)?baseTimes(value.length,String):[];var length=result.length,skipIndexes=!!length;for(var key in value){if((inherited||hasOwnProperty.call(value,key))&&!(skipIndexes&&(key=='length'||isIndex(key,length)))){result.push(key);}}return result;}function assocIndexOf(array,key){var length=array.length;while(length--){if(eq(array[length][0],key)){return length;}}return-1;}function baseGetTag(value){return objectToString.call(value);}function baseIsEqual(value,other,customizer,bitmask,stack){if(value===other){return true;}if(value==null||other==null||!isObject(value)&&!isObjectLike(other)){return value!==value&&other!==other;}return baseIsEqualDeep(value,other,baseIsEqual,customizer,bitmask,stack);}function baseIsEqualDeep(object,other,equalFunc,customizer,bitmask,stack){var objIsArr=isArray(object),othIsArr=isArray(other),objTag=arrayTag,othTag=arrayTag;if(!objIsArr){objTag=getTag(object);objTag=objTag==argsTag?objectTag:objTag;}if(!othIsArr){othTag=getTag(other);othTag=othTag==argsTag?objectTag:othTag;}var objIsObj=objTag==objectTag&&!isHostObject(object),othIsObj=othTag==objectTag&&!isHostObject(other),isSameTag=objTag==othTag;if(isSameTag&&!objIsObj){stack||(stack=new Stack());return objIsArr||isTypedArray(object)?equalArrays(object,other,equalFunc,customizer,bitmask,stack):equalByTag(object,other,objTag,equalFunc,customizer,bitmask,stack);}if(!(bitmask&PARTIAL_COMPARE_FLAG)){var objIsWrapped=objIsObj&&hasOwnProperty.call(object,'__wrapped__'),othIsWrapped=othIsObj&&hasOwnProperty.call(other,'__wrapped__');if(objIsWrapped||othIsWrapped){var objUnwrapped=objIsWrapped?object.value():object,othUnwrapped=othIsWrapped?other.value():other;stack||(stack=new Stack());return equalFunc(objUnwrapped,othUnwrapped,customizer,bitmask,stack);}}if(!isSameTag){return false;}stack||(stack=new Stack());return equalObjects(object,other,equalFunc,customizer,bitmask,stack);}function baseIsNative(value){if(!isObject(value)||isMasked(value)){return false;}var pattern=isFunction(value)||isHostObject(value)?reIsNative:reIsHostCtor;return pattern.test(toSource(value));}function baseIsTypedArray(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[objectToString.call(value)];}function baseKeys(object){if(!isPrototype(object)){return nativeKeys(object);}var result=[];for(var key in Object(object)){if(hasOwnProperty.call(object,key)&&key!='constructor'){result.push(key);}}return result;}function equalArrays(array,other,equalFunc,customizer,bitmask,stack){var isPartial=bitmask&PARTIAL_COMPARE_FLAG,arrLength=array.length,othLength=other.length;if(arrLength!=othLength&&!(isPartial&&othLength>arrLength)){return false;}var stacked=stack.get(array);if(stacked&&stack.get(other)){return stacked==other;}var index=-1,result=true,seen=bitmask&UNORDERED_COMPARE_FLAG?new SetCache():undefined;stack.set(array,other);stack.set(other,array);while(++index<arrLength){var arrValue=array[index],othValue=other[index];if(customizer){var compared=isPartial?customizer(othValue,arrValue,index,other,array,stack):customizer(arrValue,othValue,index,array,other,stack);}if(compared!==undefined){if(compared){continue;}result=false;break;}if(seen){if(!arraySome(other,function(othValue,othIndex){if(!seen.has(othIndex)&&(arrValue===othValue||equalFunc(arrValue,othValue,customizer,bitmask,stack))){return seen.add(othIndex);}})){result=false;break;}}else if(!(arrValue===othValue||equalFunc(arrValue,othValue,customizer,bitmask,stack))){result=false;break;}}stack['delete'](array);stack['delete'](other);return result;}function equalByTag(object,other,tag,equalFunc,customizer,bitmask,stack){switch(tag){case dataViewTag:if(object.byteLength!=other.byteLength||object.byteOffset!=other.byteOffset){return false;}object=object.buffer;other=other.buffer;case arrayBufferTag:if(object.byteLength!=other.byteLength||!equalFunc(new Uint8Array(object),new Uint8Array(other))){return false;}return true;case boolTag:case dateTag:case numberTag:return eq(+object,+other);case errorTag:return object.name==other.name&&object.message==other.message;case regexpTag:case stringTag:return object==other+'';case mapTag:var convert=mapToArray;case setTag:var isPartial=bitmask&PARTIAL_COMPARE_FLAG;convert||(convert=setToArray);if(object.size!=other.size&&!isPartial){return false;}var stacked=stack.get(object);if(stacked){return stacked==other;}bitmask|=UNORDERED_COMPARE_FLAG;stack.set(object,other);var result=equalArrays(convert(object),convert(other),equalFunc,customizer,bitmask,stack);stack['delete'](object);return result;case symbolTag:if(symbolValueOf){return symbolValueOf.call(object)==symbolValueOf.call(other);}}return false;}function equalObjects(object,other,equalFunc,customizer,bitmask,stack){var isPartial=bitmask&PARTIAL_COMPARE_FLAG,objProps=keys(object),objLength=objProps.length,othProps=keys(other),othLength=othProps.length;if(objLength!=othLength&&!isPartial){return false;}var index=objLength;while(index--){var key=objProps[index];if(!(isPartial?key in other:hasOwnProperty.call(other,key))){return false;}}var stacked=stack.get(object);if(stacked&&stack.get(other)){return stacked==other;}var result=true;stack.set(object,other);stack.set(other,object);var skipCtor=isPartial;while(++index<objLength){key=objProps[index];var objValue=object[key],othValue=other[key];if(customizer){var compared=isPartial?customizer(othValue,objValue,key,other,object,stack):customizer(objValue,othValue,key,object,other,stack);}if(!(compared===undefined?objValue===othValue||equalFunc(objValue,othValue,customizer,bitmask,stack):compared)){result=false;break;}skipCtor||(skipCtor=key=='constructor');}if(result&&!skipCtor){var objCtor=object.constructor,othCtor=other.constructor;if(objCtor!=othCtor&&'constructor'in object&&'constructor'in other&&!(typeof objCtor=='function'&&objCtor instanceof objCtor&&typeof othCtor=='function'&&othCtor instanceof othCtor)){result=false;}}stack['delete'](object);stack['delete'](other);return result;}function getMapData(map,key){var data=map.__data__;return isKeyable(key)?data[typeof key=='string'?'string':'hash']:data.map;}function getNative(object,key){var value=getValue(object,key);return baseIsNative(value)?value:undefined;}var getTag=baseGetTag;if(DataView&&getTag(new DataView(new ArrayBuffer(1)))!=dataViewTag||Map&&getTag(new Map())!=mapTag||Promise&&getTag(Promise.resolve())!=promiseTag||Set&&getTag(new Set())!=setTag||WeakMap&&getTag(new WeakMap())!=weakMapTag){getTag=function(value){var result=objectToString.call(value),Ctor=result==objectTag?value.constructor:undefined,ctorString=Ctor?toSource(Ctor):undefined;if(ctorString){switch(ctorString){case dataViewCtorString:return dataViewTag;case mapCtorString:return mapTag;case promiseCtorString:return promiseTag;case setCtorString:return setTag;case weakMapCtorString:return weakMapTag;}}return result;};}function isIndex(value,length){length=length==null?MAX_SAFE_INTEGER:length;return!!length&&(typeof value=='number'||reIsUint.test(value))&&value>-1&&value%1==0&&value<length;}function isKeyable(value){var type=typeof value;return type=='string'||type=='number'||type=='symbol'||type=='boolean'?value!=='__proto__':value===null;}function isMasked(func){return!!maskSrcKey&&maskSrcKey in func;}function isPrototype(value){var Ctor=value&&value.constructor,proto=typeof Ctor=='function'&&Ctor.prototype||objectProto;return value===proto;}function toSource(func){if(func!=null){try{return funcToString.call(func);}catch(e){}try{return func+'';}catch(e){}}return'';}function eq(value,other){return value===other||value!==value&&other!==other;}function isArguments(value){return isArrayLikeObject(value)&&hasOwnProperty.call(value,'callee')&&(!propertyIsEnumerable.call(value,'callee')||objectToString.call(value)==argsTag);}var isArray=Array.isArray;function isArrayLike(value){return value!=null&&isLength(value.length)&&!isFunction(value);}function isArrayLikeObject(value){return isObjectLike(value)&&isArrayLike(value);}function isEqualWith(value,other,customizer){customizer=typeof customizer=='function'?customizer:undefined;var result=customizer?customizer(value,other):undefined;return result===undefined?baseIsEqual(value,other,customizer):!!result;}function isFunction(value){var tag=isObject(value)?objectToString.call(value):'';return tag==funcTag||tag==genTag;}function isLength(value){return typeof value=='number'&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER;}function isObject(value){var type=typeof value;return!!value&&(type=='object'||type=='function');}function isObjectLike(value){return!!value&&typeof value=='object';}var isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray;function keys(object){return isArrayLike(object)?arrayLikeKeys(object):baseKeys(object);}module.exports=isEqualWith;},7471:function(module,__unusedexports,__webpack_require__){let createHash=__webpack_require__(980);let createHmac=__webpack_require__(2125);function hash160(buffer){return createHash('rmd160').update(createHash('sha256').update(buffer).digest()).digest();}function hmacSHA512(key,data){return createHmac('sha512',key).update(data).digest();}module.exports={hash160,hmacSHA512};},7473:function(module,__unusedexports,__webpack_require__){var nativeCreate=__webpack_require__(6119);var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function hashHas(key){var data=this.__data__;return nativeCreate?data[key]!==undefined:hasOwnProperty.call(data,key);}module.exports=hashHas;},7491:function(module,__unusedexports,__webpack_require__){"use strict";const secp256k1=__webpack_require__(7291);const multihashing=__webpack_require__(9424);const setImmediate=__webpack_require__(7368);const HASH_ALGORITHM='sha2-256';module.exports=randomBytes=>{const privateKeyLength=32;function generateKey(callback){const done=(err,res)=>setImmediate(()=>callback(err,res));let privateKey;do{privateKey=randomBytes(32);}while(!secp256k1.privateKeyVerify(privateKey));done(null,privateKey);}function hashAndSign(key,msg,callback){const done=(err,res)=>setImmediate(()=>callback(err,res));multihashing.digest(msg,HASH_ALGORITHM,(err,digest)=>{if(err){return done(err);}try{const sig=secp256k1.sign(digest,key);const sigDER=secp256k1.signatureExport(sig.signature);return done(null,sigDER);}catch(err){done(err);}});}function hashAndVerify(key,sig,msg,callback){const done=(err,res)=>setImmediate(()=>callback(err,res));multihashing.digest(msg,HASH_ALGORITHM,(err,digest)=>{if(err){return done(err);}try{sig=secp256k1.signatureImport(sig);const valid=secp256k1.verify(digest,sig,key);return done(null,valid);}catch(err){done(err);}});}function compressPublicKey(key){if(!secp256k1.publicKeyVerify(key)){throw new Error('Invalid public key');}return secp256k1.publicKeyConvert(key,true);}function decompressPublicKey(key){return secp256k1.publicKeyConvert(key,false);}function validatePrivateKey(key){if(!secp256k1.privateKeyVerify(key)){throw new Error('Invalid private key');}}function validatePublicKey(key){if(!secp256k1.publicKeyVerify(key)){throw new Error('Invalid public key');}}function computePublicKey(privateKey){validatePrivateKey(privateKey);return secp256k1.publicKeyCreate(privateKey);}return{generateKey:generateKey,privateKeyLength:privateKeyLength,hashAndSign:hashAndSign,hashAndVerify:hashAndVerify,compressPublicKey:compressPublicKey,decompressPublicKey:decompressPublicKey,validatePrivateKey:validatePrivateKey,validatePublicKey:validatePublicKey,computePublicKey:computePublicKey};};},7492:function(module,__unusedexports,__webpack_require__){"use strict";const Hoek=__webpack_require__(2850);const Settings=__webpack_require__(4086);const Ref=__webpack_require__(1937);const Errors=__webpack_require__(1729);const State=__webpack_require__(7941);const Symbols=__webpack_require__(4678);let Alternatives=null;let Cast=null;let Schemas=null;const internals={Set:__webpack_require__(2605)};internals.defaults={abortEarly:true,convert:true,allowUnknown:false,skipFunctions:false,stripUnknown:false,language:{},presence:'optional',strip:false,noDefaults:false,escapeHtml:false};module.exports=internals.Any=class{constructor(){Cast=Cast||__webpack_require__(7622);this.isJoi=true;this._type='any';this._settings=null;this._valids=new internals.Set();this._invalids=new internals.Set();this._tests=[];this._refs=[];this._flags={};this._description=null;this._unit=null;this._notes=[];this._tags=[];this._examples=[];this._meta=[];this._inner={};}_init(){return this;}get schemaType(){return this._type;}createError(type,context,state,options,flags=this._flags){return Errors.create(type,context,state,options,flags);}createOverrideError(type,context,state,options,message,template){return Errors.create(type,context,state,options,this._flags,message,template);}checkOptions(options){Schemas=Schemas||__webpack_require__(1302);const result=Schemas.options.validate(options);if(result.error){throw new Error(result.error.details[0].message);}}clone(){const obj=Object.create(Object.getPrototypeOf(this));obj.isJoi=true;obj._currentJoi=this._currentJoi;obj._type=this._type;obj._settings=this._settings;obj._baseType=this._baseType;obj._valids=this._valids.slice();obj._invalids=this._invalids.slice();obj._tests=this._tests.slice();obj._refs=this._refs.slice();obj._flags=Hoek.clone(this._flags);obj._description=this._description;obj._unit=this._unit;obj._notes=this._notes.slice();obj._tags=this._tags.slice();obj._examples=this._examples.slice();obj._meta=this._meta.slice();obj._inner={};const inners=Object.keys(this._inner);for(let i=0;i<inners.length;++i){const key=inners[i];obj._inner[key]=this._inner[key]?this._inner[key].slice():null;}return obj;}concat(schema){Hoek.assert(schema instanceof internals.Any,'Invalid schema object');Hoek.assert(this._type==='any'||schema._type==='any'||schema._type===this._type,'Cannot merge type',this._type,'with another type:',schema._type);let obj=this.clone();if(this._type==='any'&&schema._type!=='any'){const tmpObj=schema.clone();const keysToRestore=['_settings','_valids','_invalids','_tests','_refs','_flags','_description','_unit','_notes','_tags','_examples','_meta','_inner'];for(let i=0;i<keysToRestore.length;++i){tmpObj[keysToRestore[i]]=obj[keysToRestore[i]];}obj=tmpObj;}obj._settings=obj._settings?Settings.concat(obj._settings,schema._settings):schema._settings;obj._valids.merge(schema._valids,schema._invalids);obj._invalids.merge(schema._invalids,schema._valids);obj._tests.push(...schema._tests);obj._refs.push(...schema._refs);if(obj._flags.empty&&schema._flags.empty){obj._flags.empty=obj._flags.empty.concat(schema._flags.empty);const flags=Object.assign({},schema._flags);delete flags.empty;Hoek.merge(obj._flags,flags);}else if(schema._flags.empty){obj._flags.empty=schema._flags.empty;const flags=Object.assign({},schema._flags);delete flags.empty;Hoek.merge(obj._flags,flags);}else{Hoek.merge(obj._flags,schema._flags);}obj._description=schema._description||obj._description;obj._unit=schema._unit||obj._unit;obj._notes.push(...schema._notes);obj._tags.push(...schema._tags);obj._examples.push(...schema._examples);obj._meta.push(...schema._meta);const inners=Object.keys(schema._inner);const isObject=obj._type==='object';for(let i=0;i<inners.length;++i){const key=inners[i];const source=schema._inner[key];if(source){const target=obj._inner[key];if(target){if(isObject&&key==='children'){const keys={};for(let j=0;j<target.length;++j){keys[target[j].key]=j;}for(let j=0;j<source.length;++j){const sourceKey=source[j].key;if(keys[sourceKey]>=0){target[keys[sourceKey]]={key:sourceKey,schema:target[keys[sourceKey]].schema.concat(source[j].schema)};}else{target.push(source[j]);}}}else{obj._inner[key]=obj._inner[key].concat(source);}}else{obj._inner[key]=source.slice();}}}return obj;}_test(name,arg,func,options){const obj=this.clone();obj._tests.push({func,name,arg,options});return obj;}_testUnique(name,arg,func,options){const obj=this.clone();obj._tests=obj._tests.filter(test=>test.name!==name);obj._tests.push({func,name,arg,options});return obj;}options(options){Hoek.assert(!options.context,'Cannot override context');this.checkOptions(options);const obj=this.clone();obj._settings=Settings.concat(obj._settings,options);return obj;}strict(isStrict){const obj=this.clone();const convert=isStrict===undefined?false:!isStrict;obj._settings=Settings.concat(obj._settings,{convert});return obj;}raw(isRaw){const value=isRaw===undefined?true:isRaw;if(this._flags.raw===value){return this;}const obj=this.clone();obj._flags.raw=value;return obj;}error(err,options={self:false}){Hoek.assert(err&&(err instanceof Error||typeof err==='function'),'Must provide a valid Error object or a function');const unknownKeys=Object.keys(options).filter(k=>!['self'].includes(k));Hoek.assert(unknownKeys.length===0,`Options ${unknownKeys} are unknown`);const obj=this.clone();obj._flags.error=err;if(options.self){obj._flags.selfError=true;}return obj;}allow(...values){const obj=this.clone();values=Hoek.flatten(values);for(let i=0;i<values.length;++i){const value=values[i];Hoek.assert(value!==undefined,'Cannot call allow/valid/invalid with undefined');obj._invalids.remove(value);obj._valids.add(value,obj._refs);}return obj;}valid(...values){const obj=this.allow(...values);obj._flags.allowOnly=true;return obj;}invalid(...values){const obj=this.clone();values=Hoek.flatten(values);for(let i=0;i<values.length;++i){const value=values[i];Hoek.assert(value!==undefined,'Cannot call allow/valid/invalid with undefined');obj._valids.remove(value);obj._invalids.add(value,obj._refs);}return obj;}required(){if(this._flags.presence==='required'){return this;}const obj=this.clone();obj._flags.presence='required';return obj;}optional(){if(this._flags.presence==='optional'){return this;}const obj=this.clone();obj._flags.presence='optional';return obj;}forbidden(){if(this._flags.presence==='forbidden'){return this;}const obj=this.clone();obj._flags.presence='forbidden';return obj;}strip(){if(this._flags.strip){return this;}const obj=this.clone();obj._flags.strip=true;return obj;}applyFunctionToChildren(children,fn,args=[],root){children=[].concat(children);if(children.length!==1||children[0]!==''){root=root?root+'.':'';const extraChildren=(children[0]===''?children.slice(1):children).map(child=>{return root+child;});throw new Error('unknown key(s) '+extraChildren.join(', '));}return this[fn](...args);}default(value,description){if(typeof value==='function'&&!Ref.isRef(value)){if(!value.description&&description){value.description=description;}if(!this._flags.func){Hoek.assert(typeof value.description==='string'&&value.description.length>0,'description must be provided when default value is a function');}}const obj=this.clone();obj._flags.default=value;Ref.push(obj._refs,value);return obj;}empty(schema){const obj=this.clone();if(schema===undefined){delete obj._flags.empty;}else{obj._flags.empty=Cast.schema(this._currentJoi,schema);}return obj;}when(condition,options){Hoek.assert(options&&typeof options==='object','Invalid options');Hoek.assert(options.then!==undefined||options.otherwise!==undefined,'options must have at least one of "then" or "otherwise"');const then=options.hasOwnProperty('then')?this.concat(Cast.schema(this._currentJoi,options.then)):undefined;const otherwise=options.hasOwnProperty('otherwise')?this.concat(Cast.schema(this._currentJoi,options.otherwise)):undefined;Alternatives=Alternatives||__webpack_require__(2008);const alternativeOptions={then,otherwise};if(Object.prototype.hasOwnProperty.call(options,'is')){alternativeOptions.is=options.is;}const obj=Alternatives.when(condition,alternativeOptions);obj._flags.presence='ignore';obj._baseType=this;return obj;}description(desc){Hoek.assert(desc&&typeof desc==='string','Description must be a non-empty string');const obj=this.clone();obj._description=desc;return obj;}notes(notes){Hoek.assert(notes&&(typeof notes==='string'||Array.isArray(notes)),'Notes must be a non-empty string or array');const obj=this.clone();obj._notes=obj._notes.concat(notes);return obj;}tags(tags){Hoek.assert(tags&&(typeof tags==='string'||Array.isArray(tags)),'Tags must be a non-empty string or array');const obj=this.clone();obj._tags=obj._tags.concat(tags);return obj;}meta(meta){Hoek.assert(meta!==undefined,'Meta cannot be undefined');const obj=this.clone();obj._meta=obj._meta.concat(meta);return obj;}example(...examples){Hoek.assert(examples.length>0,'Missing examples');const processed=[];for(let i=0;i<examples.length;++i){const example=[].concat(examples[i]);Hoek.assert(example.length<=2,`Bad example format at index ${i}`);const value=example[0];let options=example[1];if(options!==undefined){Hoek.assert(options&&typeof options==='object',`Options for example at index ${i} must be an object`);const unknownOptions=Object.keys(options).filter(option=>!['parent','context'].includes(option));Hoek.assert(unknownOptions.length===0,`Unknown example options ${unknownOptions} at index ${i}`);}else{options={};}const localState=new State('',[],options.parent||null);const result=this._validate(value,localState,Settings.concat(internals.defaults,options.context?{context:options.context}:null));Hoek.assert(!result.errors,`Bad example at index ${i}:`,result.errors&&Errors.process(result.errors,value));const ex={value};if(Object.keys(options).length){ex.options=options;}processed.push(ex);}const obj=this.clone();obj._examples=processed;return obj;}unit(name){Hoek.assert(name&&typeof name==='string','Unit name must be a non-empty string');const obj=this.clone();obj._unit=name;return obj;}_prepareEmptyValue(value){if(typeof value==='string'&&this._flags.trim){return value.trim();}return value;}_validate(value,state,options,reference){const originalValue=value;state=state||new State('',[],null,reference);if(this._settings){const isDefaultOptions=options===internals.defaults;if(isDefaultOptions&&this._settings[Symbols.settingsCache]){options=this._settings[Symbols.settingsCache];}else{options=Settings.concat(options,this._settings);if(isDefaultOptions){this._settings[Symbols.settingsCache]=options;}}}let errors=[];if(this._coerce){const coerced=this._coerce(value,state,options);if(coerced.errors){value=coerced.value;errors=errors.concat(coerced.errors);return this._finalizeValue(value,originalValue,errors,state,options);}value=coerced.value;}if(this._flags.empty&&!this._flags.empty._validate(this._prepareEmptyValue(value),null,internals.defaults).errors){value=undefined;}const presence=this._flags.presence||options.presence;if(presence==='optional'){if(value===undefined){const isDeepDefault=this._flags.hasOwnProperty('default')&&this._flags.default===undefined;if(isDeepDefault&&this._type==='object'){value={};}else{return this._finalizeValue(value,originalValue,errors,state,options);}}}else if(presence==='required'&&value===undefined){errors.push(this.createError('any.required',null,state,options));return this._finalizeValue(value,originalValue,errors,state,options);}else if(presence==='forbidden'){if(value===undefined){return this._finalizeValue(value,originalValue,errors,state,options);}errors.push(this.createError('any.unknown',null,state,options));return this._finalizeValue(value,originalValue,errors,state,options);}let match=this._valids.get(value,state,options,this._flags.insensitive);if(match){if(options.convert){value=match.value;}return this._finalizeValue(value,originalValue,errors,state,options);}if(this._invalids.has(value,state,options,this._flags.insensitive)){errors.push(this.createError(value===''?'any.empty':'any.invalid',{value,invalids:this._invalids.values({stripUndefined:true})},state,options));if(options.abortEarly){return this._finalizeValue(value,originalValue,errors,state,options);}}if(this._base){const base=this._base(value,state,options);if(base.errors){value=base.value;errors=errors.concat(base.errors);return this._finalizeValue(value,originalValue,errors,state,options);}if(base.value!==value){value=base.value;match=this._valids.get(value,state,options,this._flags.insensitive);if(match){value=match.value;return this._finalizeValue(value,originalValue,errors,state,options);}if(this._invalids.has(value,state,options,this._flags.insensitive)){errors.push(this.createError(value===''?'any.empty':'any.invalid',{value,invalids:this._invalids.values({stripUndefined:true})},state,options));if(options.abortEarly){return this._finalizeValue(value,originalValue,errors,state,options);}}}}if(this._flags.allowOnly){errors.push(this.createError('any.allowOnly',{value,valids:this._valids.values({stripUndefined:true})},state,options));if(options.abortEarly){return this._finalizeValue(value,originalValue,errors,state,options);}}for(let i=0;i<this._tests.length;++i){const test=this._tests[i];const ret=test.func.call(this,value,state,options);if(ret instanceof Errors.Err){errors.push(ret);if(options.abortEarly){return this._finalizeValue(value,originalValue,errors,state,options);}}else{value=ret;}}return this._finalizeValue(value,originalValue,errors,state,options);}_finalizeValue(value,originalValue,errors,state,options){let finalValue;if(value!==undefined){finalValue=this._flags.raw?originalValue:value;}else if(options.noDefaults){finalValue=value;}else if(Ref.isRef(this._flags.default)){finalValue=this._flags.default(state.parent,options);}else if(typeof this._flags.default==='function'&&!(this._flags.func&&!this._flags.default.description)){let args;if(state.parent!==null&&this._flags.default.length>0){args=[Hoek.clone(state.parent),options];}const defaultValue=internals._try(this._flags.default,args);finalValue=defaultValue.value;if(defaultValue.error){errors.push(this.createError('any.default',{error:defaultValue.error},state,options));}}else{finalValue=Hoek.clone(this._flags.default);}if(errors.length&&typeof this._flags.error==='function'&&(!this._flags.selfError||errors.some(e=>state.path.length===e.path.length))){const change=this._flags.error.call(this,errors);if(typeof change==='string'){errors=[this.createOverrideError('override',{reason:errors},state,options,change)];}else{errors=[].concat(change).map(err=>{return err instanceof Error?err:this.createOverrideError(err.type||'override',err.context,state,options,err.message,err.template);});}}return{value:this._flags.strip?undefined:finalValue,finalValue,errors:errors.length?errors:null};}_validateWithOptions(value,options,callback){if(options){this.checkOptions(options);}const settings=Settings.concat(internals.defaults,options);const result=this._validate(value,null,settings);const errors=Errors.process(result.errors,value);if(callback){return callback(errors,result.value);}return{error:errors,value:result.value,then(resolve,reject){if(errors){return Promise.reject(errors).catch(reject);}return Promise.resolve(result.value).then(resolve);},catch(reject){if(errors){return Promise.reject(errors).catch(reject);}return Promise.resolve(result.value);}};}validate(value,options,callback){if(typeof options==='function'){return this._validateWithOptions(value,null,options);}return this._validateWithOptions(value,options,callback);}describe(){const description={type:this._type};const flags=Object.keys(this._flags);if(flags.length){if(['empty','default','lazy','label'].some(flag=>this._flags.hasOwnProperty(flag))){description.flags={};for(let i=0;i<flags.length;++i){const flag=flags[i];if(flag==='empty'){description.flags[flag]=this._flags[flag].describe();}else if(flag==='default'){if(Ref.isRef(this._flags[flag])){description.flags[flag]=this._flags[flag].toString();}else if(typeof this._flags[flag]==='function'){description.flags[flag]={description:this._flags[flag].description,function:this._flags[flag]};}else{description.flags[flag]=this._flags[flag];}}else if(flag==='lazy'||flag==='label'){}else{description.flags[flag]=this._flags[flag];}}}else{description.flags=this._flags;}}if(this._settings){description.options=Hoek.clone(this._settings);}if(this._baseType){description.base=this._baseType.describe();}if(this._description){description.description=this._description;}if(this._notes.length){description.notes=this._notes;}if(this._tags.length){description.tags=this._tags;}if(this._meta.length){description.meta=this._meta;}if(this._examples.length){description.examples=this._examples;}if(this._unit){description.unit=this._unit;}const valids=this._valids.values();if(valids.length){description.valids=valids.map(v=>{return Ref.isRef(v)?v.toString():v;});}const invalids=this._invalids.values();if(invalids.length){description.invalids=invalids.map(v=>{return Ref.isRef(v)?v.toString():v;});}description.rules=[];for(let i=0;i<this._tests.length;++i){const validator=this._tests[i];const item={name:validator.name};if(validator.arg!==void 0){item.arg=Ref.isRef(validator.arg)?validator.arg.toString():validator.arg;}const options=validator.options;if(options){if(options.hasRef){item.arg={};const keys=Object.keys(validator.arg);for(let j=0;j<keys.length;++j){const key=keys[j];const value=validator.arg[key];item.arg[key]=Ref.isRef(value)?value.toString():value;}}if(typeof options.description==='string'){item.description=options.description;}else if(typeof options.description==='function'){item.description=options.description(item.arg);}}description.rules.push(item);}if(!description.rules.length){delete description.rules;}const label=this._getLabel();if(label){description.label=label;}return description;}label(name){Hoek.assert(name&&typeof name==='string','Label name must be a non-empty string');const obj=this.clone();obj._flags.label=name;return obj;}_getLabel(def){return this._flags.label||def;}};internals.Any.prototype.isImmutable=true;internals.Any.prototype.only=internals.Any.prototype.equal=internals.Any.prototype.valid;internals.Any.prototype.disallow=internals.Any.prototype.not=internals.Any.prototype.invalid;internals.Any.prototype.exist=internals.Any.prototype.required;internals._try=function(fn,args=[]){let err;let result;try{result=fn(...args);}catch(e){err=e;}return{value:result,error:err};};},7496:function(module){"use strict";module.exports=function count(max){var i=0;max=max||Infinity;return function(end,cb){if(end)return cb&&cb(end);if(i>max)return cb(true);cb(null,i++);};};},7502:function(module,__unusedexports,__webpack_require__){"use strict";var pna=__webpack_require__(88);module.exports=Writable;function WriteReq(chunk,encoding,cb){this.chunk=chunk;this.encoding=encoding;this.callback=cb;this.next=null;}function CorkedRequest(state){var _this=this;this.next=null;this.entry=null;this.finish=function(){onCorkedFinish(_this,state);};}var asyncWrite=!process.browser&&['v0.10','v0.9.'].indexOf(process.version.slice(0,5))>-1?setImmediate:pna.nextTick;var Duplex;Writable.WritableState=WritableState;var util=__webpack_require__(5548);util.inherits=__webpack_require__(92);var internalUtil={deprecate:__webpack_require__(8008)};var Stream=__webpack_require__(6402);var Buffer=__webpack_require__(7572).Buffer;var OurUint8Array=global.Uint8Array||function(){};function _uint8ArrayToBuffer(chunk){return Buffer.from(chunk);}function _isUint8Array(obj){return Buffer.isBuffer(obj)||obj instanceof OurUint8Array;}var destroyImpl=__webpack_require__(865);util.inherits(Writable,Stream);function nop(){}function WritableState(options,stream){Duplex=Duplex||__webpack_require__(7896);options=options||{};var isDuplex=stream instanceof Duplex;this.objectMode=!!options.objectMode;if(isDuplex)this.objectMode=this.objectMode||!!options.writableObjectMode;var hwm=options.highWaterMark;var writableHwm=options.writableHighWaterMark;var defaultHwm=this.objectMode?16:16*1024;if(hwm||hwm===0)this.highWaterMark=hwm;else if(isDuplex&&(writableHwm||writableHwm===0))this.highWaterMark=writableHwm;else this.highWaterMark=defaultHwm;this.highWaterMark=Math.floor(this.highWaterMark);this.finalCalled=false;this.needDrain=false;this.ending=false;this.ended=false;this.finished=false;this.destroyed=false;var noDecode=options.decodeStrings===false;this.decodeStrings=!noDecode;this.defaultEncoding=options.defaultEncoding||'utf8';this.length=0;this.writing=false;this.corked=0;this.sync=true;this.bufferProcessing=false;this.onwrite=function(er){onwrite(stream,er);};this.writecb=null;this.writelen=0;this.bufferedRequest=null;this.lastBufferedRequest=null;this.pendingcb=0;this.prefinished=false;this.errorEmitted=false;this.bufferedRequestCount=0;this.corkedRequestsFree=new CorkedRequest(this);}WritableState.prototype.getBuffer=function getBuffer(){var current=this.bufferedRequest;var out=[];while(current){out.push(current);current=current.next;}return out;};(function(){try{Object.defineProperty(WritableState.prototype,'buffer',{get:internalUtil.deprecate(function(){return this.getBuffer();},'_writableState.buffer is deprecated. Use _writableState.getBuffer '+'instead.','DEP0003')});}catch(_){}})();var realHasInstance;if(typeof Symbol==='function'&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]==='function'){realHasInstance=Function.prototype[Symbol.hasInstance];Object.defineProperty(Writable,Symbol.hasInstance,{value:function(object){if(realHasInstance.call(this,object))return true;if(this!==Writable)return false;return object&&object._writableState instanceof WritableState;}});}else{realHasInstance=function(object){return object instanceof this;};}function Writable(options){Duplex=Duplex||__webpack_require__(7896);if(!realHasInstance.call(Writable,this)&&!(this instanceof Duplex)){return new Writable(options);}this._writableState=new WritableState(options,this);this.writable=true;if(options){if(typeof options.write==='function')this._write=options.write;if(typeof options.writev==='function')this._writev=options.writev;if(typeof options.destroy==='function')this._destroy=options.destroy;if(typeof options.final==='function')this._final=options.final;}Stream.call(this);}Writable.prototype.pipe=function(){this.emit('error',new Error('Cannot pipe, not readable'));};function writeAfterEnd(stream,cb){var er=new Error('write after end');stream.emit('error',er);pna.nextTick(cb,er);}function validChunk(stream,state,chunk,cb){var valid=true;var er=false;if(chunk===null){er=new TypeError('May not write null values to stream');}else if(typeof chunk!=='string'&&chunk!==undefined&&!state.objectMode){er=new TypeError('Invalid non-string/buffer chunk');}if(er){stream.emit('error',er);pna.nextTick(cb,er);valid=false;}return valid;}Writable.prototype.write=function(chunk,encoding,cb){var state=this._writableState;var ret=false;var isBuf=!state.objectMode&&_isUint8Array(chunk);if(isBuf&&!Buffer.isBuffer(chunk)){chunk=_uint8ArrayToBuffer(chunk);}if(typeof encoding==='function'){cb=encoding;encoding=null;}if(isBuf)encoding='buffer';else if(!encoding)encoding=state.defaultEncoding;if(typeof cb!=='function')cb=nop;if(state.ended)writeAfterEnd(this,cb);else if(isBuf||validChunk(this,state,chunk,cb)){state.pendingcb++;ret=writeOrBuffer(this,state,isBuf,chunk,encoding,cb);}return ret;};Writable.prototype.cork=function(){var state=this._writableState;state.corked++;};Writable.prototype.uncork=function(){var state=this._writableState;if(state.corked){state.corked--;if(!state.writing&&!state.corked&&!state.finished&&!state.bufferProcessing&&state.bufferedRequest)clearBuffer(this,state);}};Writable.prototype.setDefaultEncoding=function setDefaultEncoding(encoding){if(typeof encoding==='string')encoding=encoding.toLowerCase();if(!(['hex','utf8','utf-8','ascii','binary','base64','ucs2','ucs-2','utf16le','utf-16le','raw'].indexOf((encoding+'').toLowerCase())>-1))throw new TypeError('Unknown encoding: '+encoding);this._writableState.defaultEncoding=encoding;return this;};function decodeChunk(state,chunk,encoding){if(!state.objectMode&&state.decodeStrings!==false&&typeof chunk==='string'){chunk=Buffer.from(chunk,encoding);}return chunk;}Object.defineProperty(Writable.prototype,'writableHighWaterMark',{enumerable:false,get:function(){return this._writableState.highWaterMark;}});function writeOrBuffer(stream,state,isBuf,chunk,encoding,cb){if(!isBuf){var newChunk=decodeChunk(state,chunk,encoding);if(chunk!==newChunk){isBuf=true;encoding='buffer';chunk=newChunk;}}var len=state.objectMode?1:chunk.length;state.length+=len;var ret=state.length<state.highWaterMark;if(!ret)state.needDrain=true;if(state.writing||state.corked){var last=state.lastBufferedRequest;state.lastBufferedRequest={chunk:chunk,encoding:encoding,isBuf:isBuf,callback:cb,next:null};if(last){last.next=state.lastBufferedRequest;}else{state.bufferedRequest=state.lastBufferedRequest;}state.bufferedRequestCount+=1;}else{doWrite(stream,state,false,len,chunk,encoding,cb);}return ret;}function doWrite(stream,state,writev,len,chunk,encoding,cb){state.writelen=len;state.writecb=cb;state.writing=true;state.sync=true;if(writev)stream._writev(chunk,state.onwrite);else stream._write(chunk,encoding,state.onwrite);state.sync=false;}function onwriteError(stream,state,sync,er,cb){--state.pendingcb;if(sync){pna.nextTick(cb,er);pna.nextTick(finishMaybe,stream,state);stream._writableState.errorEmitted=true;stream.emit('error',er);}else{cb(er);stream._writableState.errorEmitted=true;stream.emit('error',er);finishMaybe(stream,state);}}function onwriteStateUpdate(state){state.writing=false;state.writecb=null;state.length-=state.writelen;state.writelen=0;}function onwrite(stream,er){var state=stream._writableState;var sync=state.sync;var cb=state.writecb;onwriteStateUpdate(state);if(er)onwriteError(stream,state,sync,er,cb);else{var finished=needFinish(state);if(!finished&&!state.corked&&!state.bufferProcessing&&state.bufferedRequest){clearBuffer(stream,state);}if(sync){asyncWrite(afterWrite,stream,state,finished,cb);}else{afterWrite(stream,state,finished,cb);}}}function afterWrite(stream,state,finished,cb){if(!finished)onwriteDrain(stream,state);state.pendingcb--;cb();finishMaybe(stream,state);}function onwriteDrain(stream,state){if(state.length===0&&state.needDrain){state.needDrain=false;stream.emit('drain');}}function clearBuffer(stream,state){state.bufferProcessing=true;var entry=state.bufferedRequest;if(stream._writev&&entry&&entry.next){var l=state.bufferedRequestCount;var buffer=new Array(l);var holder=state.corkedRequestsFree;holder.entry=entry;var count=0;var allBuffers=true;while(entry){buffer[count]=entry;if(!entry.isBuf)allBuffers=false;entry=entry.next;count+=1;}buffer.allBuffers=allBuffers;doWrite(stream,state,true,state.length,buffer,'',holder.finish);state.pendingcb++;state.lastBufferedRequest=null;if(holder.next){state.corkedRequestsFree=holder.next;holder.next=null;}else{state.corkedRequestsFree=new CorkedRequest(state);}state.bufferedRequestCount=0;}else{while(entry){var chunk=entry.chunk;var encoding=entry.encoding;var cb=entry.callback;var len=state.objectMode?1:chunk.length;doWrite(stream,state,false,len,chunk,encoding,cb);entry=entry.next;state.bufferedRequestCount--;if(state.writing){break;}}if(entry===null)state.lastBufferedRequest=null;}state.bufferedRequest=entry;state.bufferProcessing=false;}Writable.prototype._write=function(chunk,encoding,cb){cb(new Error('_write() is not implemented'));};Writable.prototype._writev=null;Writable.prototype.end=function(chunk,encoding,cb){var state=this._writableState;if(typeof chunk==='function'){cb=chunk;chunk=null;encoding=null;}else if(typeof encoding==='function'){cb=encoding;encoding=null;}if(chunk!==null&&chunk!==undefined)this.write(chunk,encoding);if(state.corked){state.corked=1;this.uncork();}if(!state.ending&&!state.finished)endWritable(this,state,cb);};function needFinish(state){return state.ending&&state.length===0&&state.bufferedRequest===null&&!state.finished&&!state.writing;}function callFinal(stream,state){stream._final(function(err){state.pendingcb--;if(err){stream.emit('error',err);}state.prefinished=true;stream.emit('prefinish');finishMaybe(stream,state);});}function prefinish(stream,state){if(!state.prefinished&&!state.finalCalled){if(typeof stream._final==='function'){state.pendingcb++;state.finalCalled=true;pna.nextTick(callFinal,stream,state);}else{state.prefinished=true;stream.emit('prefinish');}}}function finishMaybe(stream,state){var need=needFinish(state);if(need){prefinish(stream,state);if(state.pendingcb===0){state.finished=true;stream.emit('finish');}}return need;}function endWritable(stream,state,cb){state.ending=true;finishMaybe(stream,state);if(cb){if(state.finished)pna.nextTick(cb);else stream.once('finish',cb);}state.ended=true;stream.writable=false;}function onCorkedFinish(corkReq,state,err){var entry=corkReq.entry;corkReq.entry=null;while(entry){var cb=entry.callback;state.pendingcb--;cb(err);entry=entry.next;}if(state.corkedRequestsFree){state.corkedRequestsFree.next=corkReq;}else{state.corkedRequestsFree=corkReq;}}Object.defineProperty(Writable.prototype,'destroyed',{get:function(){if(this._writableState===undefined){return false;}return this._writableState.destroyed;},set:function(value){if(!this._writableState){return;}this._writableState.destroyed=value;}});Writable.prototype.destroy=destroyImpl.destroy;Writable.prototype._undestroy=destroyImpl.undestroy;Writable.prototype._destroy=function(err,cb){this.end();cb(err);};},7503:function(module,__unusedexports,__webpack_require__){"use strict";const toSources=__webpack_require__(8613);function toSourcesAndDestination(context,args,defaultOptions,callback){toSources(context,args,defaultOptions,(err,result)=>{if(err){return callback(err);}const destination=result.sources.pop();callback(null,_objectSpread2({destination},result));});}module.exports=toSourcesAndDestination;},7505:function(module,__unusedexports,__webpack_require__){var zlib=__webpack_require__(2673);var AVAILABLE_WINDOW_BITS=[8,9,10,11,12,13,14,15];var DEFAULT_WINDOW_BITS=15;var DEFAULT_MEM_LEVEL=8;PerMessageDeflate.extensionName='permessage-deflate';function PerMessageDeflate(options,isServer,maxPayload){if(this instanceof PerMessageDeflate===false){throw new TypeError("Classes can't be function-called");}this._options=options||{};this._isServer=!!isServer;this._inflate=null;this._deflate=null;this.params=null;this._maxPayload=maxPayload||0;}PerMessageDeflate.prototype.offer=function(){var params={};if(this._options.serverNoContextTakeover){params.server_no_context_takeover=true;}if(this._options.clientNoContextTakeover){params.client_no_context_takeover=true;}if(this._options.serverMaxWindowBits){params.server_max_window_bits=this._options.serverMaxWindowBits;}if(this._options.clientMaxWindowBits){params.client_max_window_bits=this._options.clientMaxWindowBits;}else if(this._options.clientMaxWindowBits==null){params.client_max_window_bits=true;}return params;};PerMessageDeflate.prototype.accept=function(paramsList){paramsList=this.normalizeParams(paramsList);var params;if(this._isServer){params=this.acceptAsServer(paramsList);}else{params=this.acceptAsClient(paramsList);}this.params=params;return params;};PerMessageDeflate.prototype.cleanup=function(){if(this._inflate){if(this._inflate.writeInProgress){this._inflate.pendingClose=true;}else{if(this._inflate.close)this._inflate.close();this._inflate=null;}}if(this._deflate){if(this._deflate.writeInProgress){this._deflate.pendingClose=true;}else{if(this._deflate.close)this._deflate.close();this._deflate=null;}}};PerMessageDeflate.prototype.acceptAsServer=function(paramsList){var accepted={};var result=paramsList.some(function(params){accepted={};if(this._options.serverNoContextTakeover===false&&params.server_no_context_takeover){return;}if(this._options.serverMaxWindowBits===false&&params.server_max_window_bits){return;}if(typeof this._options.serverMaxWindowBits==='number'&&typeof params.server_max_window_bits==='number'&&this._options.serverMaxWindowBits>params.server_max_window_bits){return;}if(typeof this._options.clientMaxWindowBits==='number'&&!params.client_max_window_bits){return;}if(this._options.serverNoContextTakeover||params.server_no_context_takeover){accepted.server_no_context_takeover=true;}if(this._options.clientNoContextTakeover){accepted.client_no_context_takeover=true;}if(this._options.clientNoContextTakeover!==false&&params.client_no_context_takeover){accepted.client_no_context_takeover=true;}if(typeof this._options.serverMaxWindowBits==='number'){accepted.server_max_window_bits=this._options.serverMaxWindowBits;}else if(typeof params.server_max_window_bits==='number'){accepted.server_max_window_bits=params.server_max_window_bits;}if(typeof this._options.clientMaxWindowBits==='number'){accepted.client_max_window_bits=this._options.clientMaxWindowBits;}else if(this._options.clientMaxWindowBits!==false&&typeof params.client_max_window_bits==='number'){accepted.client_max_window_bits=params.client_max_window_bits;}return true;},this);if(!result){throw new Error('Doesn\'t support the offered configuration');}return accepted;};PerMessageDeflate.prototype.acceptAsClient=function(paramsList){var params=paramsList[0];if(this._options.clientNoContextTakeover!=null){if(this._options.clientNoContextTakeover===false&&params.client_no_context_takeover){throw new Error('Invalid value for "client_no_context_takeover"');}}if(this._options.clientMaxWindowBits!=null){if(this._options.clientMaxWindowBits===false&&params.client_max_window_bits){throw new Error('Invalid value for "client_max_window_bits"');}if(typeof this._options.clientMaxWindowBits==='number'&&(!params.client_max_window_bits||params.client_max_window_bits>this._options.clientMaxWindowBits)){throw new Error('Invalid value for "client_max_window_bits"');}}return params;};PerMessageDeflate.prototype.normalizeParams=function(paramsList){return paramsList.map(function(params){Object.keys(params).forEach(function(key){var value=params[key];if(value.length>1){throw new Error('Multiple extension parameters for '+key);}value=value[0];switch(key){case'server_no_context_takeover':case'client_no_context_takeover':if(value!==true){throw new Error('invalid extension parameter value for '+key+' ('+value+')');}params[key]=true;break;case'server_max_window_bits':case'client_max_window_bits':if(typeof value==='string'){value=parseInt(value,10);if(!~AVAILABLE_WINDOW_BITS.indexOf(value)){throw new Error('invalid extension parameter value for '+key+' ('+value+')');}}if(!this._isServer&&value===true){throw new Error('Missing extension parameter value for '+key);}params[key]=value;break;default:throw new Error('Not defined extension parameter ('+key+')');}},this);return params;},this);};PerMessageDeflate.prototype.decompress=function(data,fin,callback){var endpoint=this._isServer?'client':'server';if(!this._inflate){var maxWindowBits=this.params[endpoint+'_max_window_bits'];this._inflate=zlib.createInflateRaw({windowBits:'number'===typeof maxWindowBits?maxWindowBits:DEFAULT_WINDOW_BITS});}this._inflate.writeInProgress=true;var self=this;var buffers=[];var cumulativeBufferLength=0;this._inflate.on('error',onError).on('data',onData);this._inflate.write(data);if(fin){this._inflate.write(new Buffer([0x00,0x00,0xff,0xff]));}this._inflate.flush(function(){cleanup();callback(null,Buffer.concat(buffers));});function onError(err){cleanup();callback(err);}function onData(data){if(self._maxPayload!==undefined&&self._maxPayload!==null&&self._maxPayload>0){cumulativeBufferLength+=data.length;if(cumulativeBufferLength>self._maxPayload){buffers=[];cleanup();var err={type:1009};callback(err);return;}}buffers.push(data);}function cleanup(){if(!self._inflate)return;self._inflate.removeListener('error',onError);self._inflate.removeListener('data',onData);self._inflate.writeInProgress=false;if(fin&&self.params[endpoint+'_no_context_takeover']||self._inflate.pendingClose){if(self._inflate.close)self._inflate.close();self._inflate=null;}}};PerMessageDeflate.prototype.compress=function(data,fin,callback){var endpoint=this._isServer?'server':'client';if(!this._deflate){var maxWindowBits=this.params[endpoint+'_max_window_bits'];this._deflate=zlib.createDeflateRaw({flush:zlib.Z_SYNC_FLUSH,windowBits:'number'===typeof maxWindowBits?maxWindowBits:DEFAULT_WINDOW_BITS,memLevel:this._options.memLevel||DEFAULT_MEM_LEVEL});}this._deflate.writeInProgress=true;var self=this;var buffers=[];this._deflate.on('error',onError).on('data',onData);this._deflate.write(data);this._deflate.flush(function(){cleanup();var data=Buffer.concat(buffers);if(fin){data=data.slice(0,data.length-4);}callback(null,data);});function onError(err){cleanup();callback(err);}function onData(data){buffers.push(data);}function cleanup(){if(!self._deflate)return;self._deflate.removeListener('error',onError);self._deflate.removeListener('data',onData);self._deflate.writeInProgress=false;if(fin&&self.params[endpoint+'_no_context_takeover']||self._deflate.pendingClose){if(self._deflate.close)self._deflate.close();self._deflate=null;}}};module.exports=PerMessageDeflate;},7506:function(module,__unusedexports,__webpack_require__){"use strict";const util=__webpack_require__(497);const resolve=(binaryBlob,path,callback)=>{if(typeof path==='function'){callback=path;path=undefined;}util.deserialize(binaryBlob,(err,dagNode)=>{if(err){return callback(err);}if(!path){return callback(null,{value:dagNode,remainderPath:''});}const pathArray=path.split('/');const value=resolveField(dagNode,pathArray[0]);if(value===null){return callback(new Error('No such path'),null);}let remainderPath=pathArray.slice(1).join('/');if(value['/']!==undefined){return callback(null,{value:value,remainderPath:remainderPath});}else{if(remainderPath.length>0){return callback(new Error('No such path'),null);}else{return callback(null,{value:value,remainderPath:''});}}});};const tree=(binaryBlob,options,callback)=>{if(typeof options==='function'){callback=options;options=undefined;}options=options||{};util.deserialize(binaryBlob,(err,dagNode)=>{if(err){return callback(err);}const paths=['version','timestamp','difficulty','nonce','solution','reserved','parent','tx'];if(options.values===true){const pathValues={};for(let path of paths){pathValues[path]=resolveField(dagNode,path);}return callback(null,pathValues);}else{return callback(null,paths);}});};const resolveField=(header,field)=>{switch(field){case'version':return header.version;case'timestamp':return header.time;case'difficulty':return header.bits;case'nonce':return header.nonce;case'solution':return header.solution;case'reserved':return header.reserved;case'parent':return{'/':util.hashToCid(header.prevHash)};case'tx':return{'/':util.hashToCid(header.merkleRoot)};default:return null;}};module.exports={multicodec:'zcash-block',defaultHashAlg:'dbl-sha2-256',resolve:resolve,tree:tree};},7508:function(module,__unusedexports,__webpack_require__){"use strict";var iconvLite=__webpack_require__(3903);var Iconv=__webpack_require__(3430);module.exports.convert=convert;function convert(str,to,from,useLite){from=checkEncoding(from||'UTF-8');to=checkEncoding(to||'UTF-8');str=str||'';var result;if(from!=='UTF-8'&&typeof str==='string'){str=new Buffer(str,'binary');}if(from===to){if(typeof str==='string'){result=new Buffer(str);}else{result=str;}}else if(Iconv&&!useLite){try{result=convertIconv(str,to,from);}catch(E){console.error(E);try{result=convertIconvLite(str,to,from);}catch(E){console.error(E);result=str;}}}else{try{result=convertIconvLite(str,to,from);}catch(E){console.error(E);result=str;}}if(typeof result==='string'){result=new Buffer(result,'utf-8');}return result;}function convertIconv(str,to,from){var response,iconv;iconv=new Iconv(from,to+'//TRANSLIT//IGNORE');response=iconv.convert(str);return response.slice(0,response.length);}function convertIconvLite(str,to,from){if(to==='UTF-8'){return iconvLite.decode(str,from);}else if(from==='UTF-8'){return iconvLite.encode(str,to);}else{return iconvLite.encode(iconvLite.decode(str,from),to);}}function checkEncoding(name){return(name||'').toString().trim().replace(/^latin[\-_]?(\d+)$/i,'ISO-8859-$1').replace(/^win(?:dows)?[\-_]?(\d+)$/i,'WINDOWS-$1').replace(/^utf[\-_]?(\d+)$/i,'UTF-$1').replace(/^ks_c_5601\-1987$/i,'CP949').replace(/^us[\-_]?ascii$/i,'ASCII').toUpperCase();}},7511:function(__unusedmodule,exports,__webpack_require__){"use strict";const multiaddr=__webpack_require__(5920);const DNS4=base('dns4');const DNS6=base('dns6');const _DNS=or(base('dnsaddr'),DNS4,DNS6);const IP=or(base('ip4'),base('ip6'));const TCP=or(and(IP,base('tcp')),and(_DNS,base('tcp')));const UDP=and(IP,base('udp'));const UTP=and(UDP,base('utp'));const DNS=or(and(_DNS,base('tcp')),_DNS);const WebSockets=or(and(TCP,base('ws')),and(DNS,base('ws')));const WebSocketsSecure=or(and(TCP,base('wss')),and(DNS,base('wss')));const HTTP=or(and(TCP,base('http')),and(IP,base('http')),and(DNS,base('http')),and(DNS));const HTTPS=or(and(TCP,base('https')),and(IP,base('https')),and(DNS,base('https')));const WebRTCStar=or(and(WebSockets,base('p2p-webrtc-star'),base('ipfs')),and(WebSocketsSecure,base('p2p-webrtc-star'),base('ipfs')));const WebSocketStar=or(and(WebSockets,base('p2p-websocket-star'),base('ipfs')),and(WebSocketsSecure,base('p2p-websocket-star'),base('ipfs')),and(WebSockets,base('p2p-websocket-star')),and(WebSocketsSecure,base('p2p-websocket-star')));const WebRTCDirect=or(and(HTTP,base('p2p-webrtc-direct')),and(HTTPS,base('p2p-webrtc-direct')));const Reliable=or(WebSockets,WebSocketsSecure,HTTP,HTTPS,WebRTCStar,WebRTCDirect,TCP,UTP);const Stardust=or(and(Reliable,base('p2p-stardust'),base('ipfs')),and(Reliable,base('p2p-stardust')));let _IPFS=or(and(Reliable,base('ipfs')),WebRTCStar,base('ipfs'));const _Circuit=or(and(_IPFS,base('p2p-circuit'),_IPFS),and(_IPFS,base('p2p-circuit')),and(base('p2p-circuit'),_IPFS),and(Reliable,base('p2p-circuit')),and(base('p2p-circuit'),Reliable),base('p2p-circuit'));const CircuitRecursive=()=>or(and(_Circuit,CircuitRecursive),_Circuit);const Circuit=CircuitRecursive();const IPFS=or(and(Circuit,_IPFS,Circuit),and(_IPFS,Circuit),and(Circuit,_IPFS),Circuit,_IPFS);exports.DNS=DNS;exports.DNS4=DNS4;exports.DNS6=DNS6;exports.IP=IP;exports.TCP=TCP;exports.UDP=UDP;exports.UTP=UTP;exports.HTTP=HTTP;exports.HTTPS=HTTPS;exports.WebSockets=WebSockets;exports.WebSocketsSecure=WebSocketsSecure;exports.WebSocketStar=WebSocketStar;exports.WebRTCStar=WebRTCStar;exports.WebRTCDirect=WebRTCDirect;exports.Reliable=Reliable;exports.Stardust=Stardust;exports.Circuit=Circuit;exports.IPFS=IPFS;function makeMatchesFunction(partialMatch){return function matches(a){if(!multiaddr.isMultiaddr(a)){try{a=multiaddr(a);}catch(err){return false;}}let out=partialMatch(a.protoNames());if(out===null){return false;}return out.length===0;};}function and(){const args=Array.from(arguments);function partialMatch(a){if(a.length<args.length){return null;}args.some(arg=>{a=typeof arg==='function'?arg().partialMatch(a):arg.partialMatch(a);if(a===null){return true;}});return a;}return{toString:function(){return'{ '+args.join(' ')+' }';},input:args,matches:makeMatchesFunction(partialMatch),partialMatch:partialMatch};}function or(){const args=Array.from(arguments);function partialMatch(a){let out=null;args.some(arg=>{const res=typeof arg==='function'?arg().partialMatch(a):arg.partialMatch(a);if(res){out=res;return true;}});return out;}const result={toString:function(){return'{ '+args.join(' ')+' }';},input:args,matches:makeMatchesFunction(partialMatch),partialMatch:partialMatch};return result;}function base(n){const name=n;function matches(a){if(typeof a==='string'){try{a=multiaddr(a);}catch(err){return false;}}const pnames=a.protoNames();if(pnames.length===1&&pnames[0]===name){return true;}return false;}function partialMatch(protos){if(protos.length===0){return null;}if(protos[0]===name){return protos.slice(1);}return null;}return{toString:function(){return name;},matches:matches,partialMatch:partialMatch};}},7514:function(module,__unusedexports,__webpack_require__){"use strict";const Key=__webpack_require__(759).Key;const FILE_TYPES={file:0,directory:1,'hamt-sharded-directory':1};module.exports={FILE_SEPARATOR:'/',MFS_ROOT_KEY:new Key('/local/filesroot'),MAX_CHUNK_SIZE:262144,MAX_LINKS:174,FILE_TYPES};},7517:function(module,__unusedexports,__webpack_require__){"use strict";const EventEmitter=__webpack_require__(4859);const crypto=__webpack_require__(2984);const http=__webpack_require__(3853);const PerMessageDeflate=__webpack_require__(8904);const extension=__webpack_require__(6788);const constants=__webpack_require__(6198);const WebSocket=__webpack_require__(657);class WebSocketServer extends EventEmitter{constructor(options,callback){super();options=Object.assign({maxPayload:100*1024*1024,perMessageDeflate:false,handleProtocols:null,clientTracking:true,verifyClient:null,noServer:false,backlog:null,server:null,host:null,path:null,port:null},options);if(options.port==null&&!options.server&&!options.noServer){throw new TypeError('One of the "port", "server", or "noServer" options must be specified');}if(options.port!=null){this._server=http.createServer((req,res)=>{const body=http.STATUS_CODES[426];res.writeHead(426,{'Content-Length':body.length,'Content-Type':'text/plain'});res.end(body);});this._server.listen(options.port,options.host,options.backlog,callback);}else if(options.server){this._server=options.server;}if(this._server){this._removeListeners=addListeners(this._server,{listening:this.emit.bind(this,'listening'),error:this.emit.bind(this,'error'),upgrade:(req,socket,head)=>{this.handleUpgrade(req,socket,head,ws=>{this.emit('connection',ws,req);});}});}if(options.perMessageDeflate===true)options.perMessageDeflate={};if(options.clientTracking)this.clients=new Set();this.options=options;}address(){if(this.options.noServer){throw new Error('The server is operating in "noServer" mode');}if(!this._server)return null;return this._server.address();}close(cb){if(cb)this.once('close',cb);if(this.clients){for(const client of this.clients)client.terminate();}const server=this._server;if(server){this._removeListeners();this._removeListeners=this._server=null;if(this.options.port!=null){server.close(()=>this.emit('close'));return;}}process.nextTick(emitClose,this);}shouldHandle(req){if(this.options.path){const index=req.url.indexOf('?');const pathname=index!==-1?req.url.slice(0,index):req.url;if(pathname!==this.options.path)return false;}return true;}handleUpgrade(req,socket,head,cb){socket.on('error',socketOnError);const version=+req.headers['sec-websocket-version'];const extensions={};if(req.method!=='GET'||req.headers.upgrade.toLowerCase()!=='websocket'||!req.headers['sec-websocket-key']||version!==8&&version!==13||!this.shouldHandle(req)){return abortHandshake(socket,400);}if(this.options.perMessageDeflate){const perMessageDeflate=new PerMessageDeflate(this.options.perMessageDeflate,true,this.options.maxPayload);try{const offers=extension.parse(req.headers['sec-websocket-extensions']);if(offers[PerMessageDeflate.extensionName]){perMessageDeflate.accept(offers[PerMessageDeflate.extensionName]);extensions[PerMessageDeflate.extensionName]=perMessageDeflate;}}catch(err){return abortHandshake(socket,400);}}if(this.options.verifyClient){const info={origin:req.headers[`${version===8?'sec-websocket-origin':'origin'}`],secure:!!(req.connection.authorized||req.connection.encrypted),req};if(this.options.verifyClient.length===2){this.options.verifyClient(info,(verified,code,message,headers)=>{if(!verified){return abortHandshake(socket,code||401,message,headers);}this.completeUpgrade(extensions,req,socket,head,cb);});return;}if(!this.options.verifyClient(info))return abortHandshake(socket,401);}this.completeUpgrade(extensions,req,socket,head,cb);}completeUpgrade(extensions,req,socket,head,cb){if(!socket.readable||!socket.writable)return socket.destroy();const key=crypto.createHash('sha1').update(req.headers['sec-websocket-key']+constants.GUID,'binary').digest('base64');const headers=['HTTP/1.1 101 Switching Protocols','Upgrade: websocket','Connection: Upgrade',`Sec-WebSocket-Accept: ${key}`];const ws=new WebSocket(null);var protocol=req.headers['sec-websocket-protocol'];if(protocol){protocol=protocol.trim().split(/ *, */);if(this.options.handleProtocols){protocol=this.options.handleProtocols(protocol,req);}else{protocol=protocol[0];}if(protocol){headers.push(`Sec-WebSocket-Protocol: ${protocol}`);ws.protocol=protocol;}}if(extensions[PerMessageDeflate.extensionName]){const params=extensions[PerMessageDeflate.extensionName].params;const value=extension.format({[PerMessageDeflate.extensionName]:[params]});headers.push(`Sec-WebSocket-Extensions: ${value}`);ws._extensions=extensions;}this.emit('headers',headers,req);socket.write(headers.concat('\r\n').join('\r\n'));socket.removeListener('error',socketOnError);ws.setSocket(socket,head,this.options.maxPayload);if(this.clients){this.clients.add(ws);ws.on('close',()=>this.clients.delete(ws));}cb(ws);}}module.exports=WebSocketServer;function addListeners(server,map){for(const event of Object.keys(map))server.on(event,map[event]);return function removeListeners(){for(const event of Object.keys(map)){server.removeListener(event,map[event]);}};}function emitClose(server){server.emit('close');}function socketOnError(){this.destroy();}function abortHandshake(socket,code,message,headers){if(socket.writable){message=message||http.STATUS_CODES[code];headers=Object.assign({Connection:'close','Content-type':'text/html','Content-Length':Buffer.byteLength(message)},headers);socket.write(`HTTP/1.1 ${code} ${http.STATUS_CODES[code]}\r\n`+Object.keys(headers).map(h=>`${h}: ${headers[h]}`).join('\r\n')+'\r\n\r\n'+message);}socket.removeListener('error',socketOnError);socket.destroy();}},7526:function(module,__unusedexports,__webpack_require__){"use strict";var base32=__webpack_require__(8996);var finalizeDecode=base32.Decoder.prototype.finalize;base32.Decoder.prototype.finalize=function(buf){var bytes=finalizeDecode.call(this,buf);return new Buffer(bytes);};module.exports=base32;},7529:function(__unusedmodule,exports){"use strict";var toString=Object.prototype.toString;exports.isArray=function(value,message){if(!Array.isArray(value))throw TypeError(message);};exports.isBoolean=function(value,message){if(toString.call(value)!=='[object Boolean]')throw TypeError(message);};exports.isBuffer=function(value,message){if(!Buffer.isBuffer(value))throw TypeError(message);};exports.isFunction=function(value,message){if(toString.call(value)!=='[object Function]')throw TypeError(message);};exports.isNumber=function(value,message){if(toString.call(value)!=='[object Number]')throw TypeError(message);};exports.isObject=function(value,message){if(toString.call(value)!=='[object Object]')throw TypeError(message);};exports.isBufferLength=function(buffer,length,message){if(buffer.length!==length)throw RangeError(message);};exports.isBufferLength2=function(buffer,length1,length2,message){if(buffer.length!==length1&&buffer.length!==length2)throw RangeError(message);};exports.isLengthGTZero=function(value,message){if(value.length===0)throw RangeError(message);};exports.isNumberInInterval=function(number,x,y,message){if(number<=x||number>=y)throw RangeError(message);};},7530:function(module,__unusedexports,__webpack_require__){"use strict";const promisify=__webpack_require__(6955);const pull=__webpack_require__(2885);module.exports=function(self){return promisify((ipfsPath,options,callback)=>{if(typeof options==='function'){callback=options;options={};}pull(self.catPullStream(ipfsPath,options),pull.collect((err,buffers)=>{if(err){return callback(err);}callback(null,Buffer.concat(buffers));}));});};},7534:function(module,__unusedexports,__webpack_require__){var events=__webpack_require__(4859),util=__webpack_require__(649),crypto=__webpack_require__(2984),EventEmitter=events.EventEmitter,ErrorCodes=__webpack_require__(4083),bufferUtil=__webpack_require__(4855),PerMessageDeflate=__webpack_require__(7505);function Sender(socket,extensions){if(this instanceof Sender===false){throw new TypeError("Classes can't be function-called");}events.EventEmitter.call(this);this._socket=socket;this.extensions=extensions||{};this.firstFragment=true;this.compress=false;this.messageHandlers=[];this.processing=false;}util.inherits(Sender,events.EventEmitter);Sender.prototype.close=function(code,data,mask,cb){if(typeof code!=='undefined'){if(typeof code!=='number'||!ErrorCodes.isValidErrorCode(code))throw new Error('first argument must be a valid error code number');}code=code||1000;var dataBuffer=new Buffer(2+(data?Buffer.byteLength(data):0));writeUInt16BE.call(dataBuffer,code,0);if(dataBuffer.length>2)dataBuffer.write(data,2);var self=this;this.messageHandlers.push(function(){self.frameAndSend(0x8,dataBuffer,true,mask);if(typeof cb=='function')cb();});this.flush();};Sender.prototype.ping=function(data,options){var mask=options&&options.mask;var self=this;this.messageHandlers.push(function(){self.frameAndSend(0x9,data||'',true,mask);});this.flush();};Sender.prototype.pong=function(data,options){var mask=options&&options.mask;var self=this;this.messageHandlers.push(function(){self.frameAndSend(0xa,data||'',true,mask);});this.flush();};Sender.prototype.send=function(data,options,cb){var finalFragment=options&&options.fin===false?false:true;var mask=options&&options.mask;var compress=options&&options.compress;var opcode=options&&options.binary?2:1;if(this.firstFragment===false){opcode=0;compress=false;}else{this.firstFragment=false;this.compress=compress;}if(finalFragment)this.firstFragment=true;var compressFragment=this.compress;var self=this;this.messageHandlers.push(function(){if(!data||!compressFragment){self.frameAndSend(opcode,data,finalFragment,mask,compress,cb);return;}self.processing=true;self.applyExtensions(data,finalFragment,compressFragment,function(err,data){if(err){if(typeof cb=='function')cb(err);else self.emit('error',err);return;}self.frameAndSend(opcode,data,finalFragment,mask,compress,cb);self.processing=false;self.flush();});});this.flush();};Sender.prototype.frameAndSend=function(opcode,data,finalFragment,maskData,compressed,cb){var canModifyData=false;if(!data){try{this._socket.write(new Buffer([opcode|(finalFragment?0x80:0),0|(maskData?0x80:0)].concat(maskData?[0,0,0,0]:[])),'binary',cb);}catch(e){if(typeof cb=='function')cb(e);else this.emit('error',e);}return;}if(!Buffer.isBuffer(data)){canModifyData=true;if(data&&(typeof data.byteLength!=='undefined'||typeof data.buffer!=='undefined')){data=getArrayBuffer(data);}else{if(typeof data==='number')data=data.toString();data=new Buffer(data);}}var dataLength=data.length,dataOffset=maskData?6:2,secondByte=dataLength;if(dataLength>=65536){dataOffset+=8;secondByte=127;}else if(dataLength>125){dataOffset+=2;secondByte=126;}var mergeBuffers=dataLength<32768||maskData&&!canModifyData;var totalLength=mergeBuffers?dataLength+dataOffset:dataOffset;var outputBuffer=new Buffer(totalLength);outputBuffer[0]=finalFragment?opcode|0x80:opcode;if(compressed)outputBuffer[0]|=0x40;switch(secondByte){case 126:writeUInt16BE.call(outputBuffer,dataLength,2);break;case 127:writeUInt32BE.call(outputBuffer,0,2);writeUInt32BE.call(outputBuffer,dataLength,6);}if(maskData){outputBuffer[1]=secondByte|0x80;var mask=getRandomMask();outputBuffer[dataOffset-4]=mask[0];outputBuffer[dataOffset-3]=mask[1];outputBuffer[dataOffset-2]=mask[2];outputBuffer[dataOffset-1]=mask[3];if(mergeBuffers){bufferUtil.mask(data,mask,outputBuffer,dataOffset,dataLength);try{this._socket.write(outputBuffer,'binary',cb);}catch(e){if(typeof cb=='function')cb(e);else this.emit('error',e);}}else{bufferUtil.mask(data,mask,data,0,dataLength);try{this._socket.write(outputBuffer,'binary');this._socket.write(data,'binary',cb);}catch(e){if(typeof cb=='function')cb(e);else this.emit('error',e);}}}else{outputBuffer[1]=secondByte;if(mergeBuffers){data.copy(outputBuffer,dataOffset);try{this._socket.write(outputBuffer,'binary',cb);}catch(e){if(typeof cb=='function')cb(e);else this.emit('error',e);}}else{try{this._socket.write(outputBuffer,'binary');this._socket.write(data,'binary',cb);}catch(e){if(typeof cb=='function')cb(e);else this.emit('error',e);}}}};Sender.prototype.flush=function(){while(!this.processing&&this.messageHandlers.length){this.messageHandlers.shift()();}};Sender.prototype.applyExtensions=function(data,fin,compress,callback){if((data.buffer||data)instanceof ArrayBuffer){data=getArrayBuffer(data);}this.extensions[PerMessageDeflate.extensionName].compress(data,fin,callback);};module.exports=Sender;function writeUInt16BE(value,offset){this[offset]=(value&0xff00)>>8;this[offset+1]=value&0xff;}function writeUInt32BE(value,offset){this[offset]=(value&0xff000000)>>24;this[offset+1]=(value&0xff0000)>>16;this[offset+2]=(value&0xff00)>>8;this[offset+3]=value&0xff;}function getArrayBuffer(data){var array=new Uint8Array(data.buffer||data),l=data.byteLength||data.length,o=data.byteOffset||0,buffer=new Buffer(l);for(var i=0;i<l;++i){buffer[i]=array[o+i];}return buffer;}function getRandomMask(){return crypto.randomBytes(4);}},7538:function(module,__unusedexports,__webpack_require__){"use strict";const protons=__webpack_require__(817);const message=`
message IpnsEntry {
  enum ValidityType {
		EOL = 0; // setting an EOL says "this record is valid until..."
	}

  required bytes value = 1;
	required bytes signature = 2;

	optional ValidityType validityType = 3;
	optional bytes validity = 4;

	optional uint64 sequence = 5;

	optional uint64 ttl = 6;

	// in order for nodes to properly validate a record upon receipt, they need the public
	// key associated with it. For old RSA keys, its easiest if we just send this as part of
	// the record itself. For newer ed25519 keys, the public key can be embedded in the
	// peerID, making this field unnecessary.
	optional bytes pubKey = 7;
}
`;module.exports=protons(message).IpnsEntry;},7545:function(module,exports,__webpack_require__){"use strict";const CID=__webpack_require__(9339);const assert=__webpack_require__(3930);const withIs=__webpack_require__(3171);class DAGLink{constructor(name,size,cid){assert(cid,'A link requires a cid to point to');this._name=name||'';this._nameBuf=null;this._size=size;this._cid=new CID(cid);}toString(){return`DAGLink <${this._cid.toBaseEncodedString()} - name: "${this.name}", size: ${this.size}>`;}toJSON(){if(!this._json){this._json=Object.freeze({name:this.name,size:this.size,cid:this._cid.toBaseEncodedString()});}return Object.assign({},this._json);}get name(){return this._name;}get nameAsBuffer(){if(this._nameBuf!==null){return this._nameBuf;}this._nameBuf=Buffer.from(this._name);return this._nameBuf;}set name(name){throw new Error("Can't set property: 'name' is immutable");}get size(){return this._size;}set size(size){throw new Error("Can't set property: 'size' is immutable");}get cid(){return this._cid;}set cid(cid){throw new Error("Can't set property: 'cid' is immutable");}}exports=module.exports=withIs(DAGLink,{className:'DAGLink',symbolName:'@ipld/js-ipld-dag-pb/daglink'});exports.create=__webpack_require__(8244);exports.util=__webpack_require__(8175);},7550:function(module,__unusedexports,__webpack_require__){"use strict";const waterfall=__webpack_require__(4265);const UnixFS=__webpack_require__(7959);const{DAGNode}=__webpack_require__(7421);const createNode=(context,type,options,callback)=>{waterfall([done=>DAGNode.create(new UnixFS(type).marshal(),[],done),(node,done)=>context.ipld.put(node,{version:options.cidVersion,format:options.format,hashAlg:options.hashAlg},(err,cid)=>done(err,{cid,node}))],callback);};module.exports=createNode;},7552:function(module){var ERROR_MSG_INPUT='Input must be an string, Buffer or Uint8Array';function normalizeInput(input){var ret;if(input instanceof Uint8Array){ret=input;}else if(input instanceof Buffer){ret=new Uint8Array(input);}else if(typeof input==='string'){ret=new Uint8Array(Buffer.from(input,'utf8'));}else{throw new Error(ERROR_MSG_INPUT);}return ret;}function toHex(bytes){return Array.prototype.map.call(bytes,function(n){return(n<16?'0':'')+n.toString(16);}).join('');}function uint32ToHex(val){return(0x100000000+val).toString(16).substring(1);}function debugPrint(label,arr,size){var msg='\n'+label+' = ';for(var i=0;i<arr.length;i+=2){if(size===32){msg+=uint32ToHex(arr[i]).toUpperCase();msg+=' ';msg+=uint32ToHex(arr[i+1]).toUpperCase();}else if(size===64){msg+=uint32ToHex(arr[i+1]).toUpperCase();msg+=uint32ToHex(arr[i]).toUpperCase();}else throw new Error('Invalid size '+size);if(i%6===4){msg+='\n'+new Array(label.length+4).join(' ');}else if(i<arr.length-2){msg+=' ';}}console.log(msg);}function testSpeed(hashFn,N,M){var startMs=new Date().getTime();var input=new Uint8Array(N);for(var i=0;i<N;i++){input[i]=i%256;}var genMs=new Date().getTime();console.log('Generated random input in '+(genMs-startMs)+'ms');startMs=genMs;for(i=0;i<M;i++){var hashHex=hashFn(input);var hashMs=new Date().getTime();var ms=hashMs-startMs;startMs=hashMs;console.log('Hashed in '+ms+'ms: '+hashHex.substring(0,20)+'...');console.log(Math.round(N/(1<<20)/(ms/1000)*100)/100+' MB PER SECOND');}}module.exports={normalizeInput:normalizeInput,toHex:toHex,debugPrint:debugPrint,testSpeed:testSpeed};},7560:function(module){module.exports={"name":"rinkeby","chainId":4,"networkId":4,"comment":"PoA test network","url":"https://www.rinkeby.io","genesis":{"hash":"0x6341fd3daf94b748c72ced5a5b26028f2474f5f00d824504e4fa37a75767e177","timestamp":"0x58ee40ba","gasLimit":4700000,"difficulty":1,"nonce":"0x0000000000000000","extraData":"0x52657370656374206d7920617574686f7269746168207e452e436172746d616e42eb768f2244c8811c63729a21a3569731535f067ffc57839b00206d1ad20c69a1981b489f772031b279182d99e65703f0076e4812653aab85fca0f00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","stateRoot":"0x53580584816f617295ea26c0e17641e0120cab2f0a8ffb53a866fd53aa8e8c2d"},"hardforks":[{"name":"chainstart","block":0,"consensus":"poa","finality":null},{"name":"homestead","block":1,"consensus":"poa","finality":null},{"name":"dao","block":null,"consensus":"poa","finality":null},{"name":"tangerineWhistle","block":2,"consensus":"poa","finality":null},{"name":"spuriousDragon","block":3,"consensus":"poa","finality":null},{"name":"byzantium","block":1035301,"consensus":"poa","finality":null},{"name":"constantinople","block":null,"consensus":"poa","finality":null}],"bootstrapNodes":[{"ip":"52.169.42.101","port":30303,"id":"a24ac7c5484ef4ed0c5eb2d36620ba4e4aa13b8c84684e1b4aab0cebea2ae45cb4d375b77eab56516d34bfbd3c1a833fc51296ff084b770b94fb9028c4d25ccf","location":"IE","comment":""},{"ip":"52.3.158.184","port":30303,"id":"343149e4feefa15d882d9fe4ac7d88f885bd05ebb735e547f12e12080a9fa07c8014ca6fd7f373123488102fe5e34111f8509cf0b7de3f5b44339c9f25e87cb8","location":"","comment":"INFURA"}]};},7572:function(module,exports,__webpack_require__){var buffer=__webpack_require__(9423);var Buffer=buffer.Buffer;function copyProps(src,dst){for(var key in src){dst[key]=src[key];}}if(Buffer.from&&Buffer.alloc&&Buffer.allocUnsafe&&Buffer.allocUnsafeSlow){module.exports=buffer;}else{copyProps(buffer,exports);exports.Buffer=SafeBuffer;}function SafeBuffer(arg,encodingOrOffset,length){return Buffer(arg,encodingOrOffset,length);}copyProps(Buffer,SafeBuffer);SafeBuffer.from=function(arg,encodingOrOffset,length){if(typeof arg==='number'){throw new TypeError('Argument must not be a number');}return Buffer(arg,encodingOrOffset,length);};SafeBuffer.alloc=function(size,fill,encoding){if(typeof size!=='number'){throw new TypeError('Argument must be a number');}var buf=Buffer(size);if(fill!==undefined){if(typeof encoding==='string'){buf.fill(fill,encoding);}else{buf.fill(fill);}}else{buf.fill(0);}return buf;};SafeBuffer.allocUnsafe=function(size){if(typeof size!=='number'){throw new TypeError('Argument must be a number');}return Buffer(size);};SafeBuffer.allocUnsafeSlow=function(size){if(typeof size!=='number'){throw new TypeError('Argument must be a number');}return buffer.SlowBuffer(size);};},7573:function(__unusedmodule,exports,__webpack_require__){"use strict";var curve=exports;curve.base=__webpack_require__(2964);curve.short=__webpack_require__(2227);curve.mont=__webpack_require__(3285);curve.edwards=__webpack_require__(6223);},7586:function(__unusedmodule,exports){(function(window){'use strict';var re={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[\+\-]/};function sprintf(){var key=arguments[0],cache=sprintf.cache;if(!cache[key]){cache[key]=sprintf.parse(key);}return sprintf.format.call(null,cache[key],arguments);}sprintf.format=function(parse_tree,argv){var cursor=1,tree_length=parse_tree.length,node_type='',arg,output=[],i,k,match,pad,pad_character,pad_length,is_positive=true,sign='';for(i=0;i<tree_length;i++){node_type=get_type(parse_tree[i]);if(node_type==='string'){output[output.length]=parse_tree[i];}else if(node_type==='array'){match=parse_tree[i];if(match[2]){arg=argv[cursor];for(k=0;k<match[2].length;k++){if(!arg.hasOwnProperty(match[2][k])){throw new Error(sprintf('[sprintf] property "%s" does not exist',match[2][k]));}arg=arg[match[2][k]];}}else if(match[1]){arg=argv[match[1]];}else{arg=argv[cursor++];}if(re.not_type.test(match[8])&&re.not_primitive.test(match[8])&&get_type(arg)=='function'){arg=arg();}if(re.numeric_arg.test(match[8])&&get_type(arg)!='number'&&isNaN(arg)){throw new TypeError(sprintf("[sprintf] expecting number but found %s",get_type(arg)));}if(re.number.test(match[8])){is_positive=arg>=0;}switch(match[8]){case'b':arg=parseInt(arg,10).toString(2);break;case'c':arg=String.fromCharCode(parseInt(arg,10));break;case'd':case'i':arg=parseInt(arg,10);break;case'j':arg=JSON.stringify(arg,null,match[6]?parseInt(match[6]):0);break;case'e':arg=match[7]?parseFloat(arg).toExponential(match[7]):parseFloat(arg).toExponential();break;case'f':arg=match[7]?parseFloat(arg).toFixed(match[7]):parseFloat(arg);break;case'g':arg=match[7]?parseFloat(arg).toPrecision(match[7]):parseFloat(arg);break;case'o':arg=arg.toString(8);break;case's':arg=String(arg);arg=match[7]?arg.substring(0,match[7]):arg;break;case't':arg=String(!!arg);arg=match[7]?arg.substring(0,match[7]):arg;break;case'T':arg=get_type(arg);arg=match[7]?arg.substring(0,match[7]):arg;break;case'u':arg=parseInt(arg,10)>>>0;break;case'v':arg=arg.valueOf();arg=match[7]?arg.substring(0,match[7]):arg;break;case'x':arg=parseInt(arg,10).toString(16);break;case'X':arg=parseInt(arg,10).toString(16).toUpperCase();break;}if(re.json.test(match[8])){output[output.length]=arg;}else{if(re.number.test(match[8])&&(!is_positive||match[3])){sign=is_positive?'+':'-';arg=arg.toString().replace(re.sign,'');}else{sign='';}pad_character=match[4]?match[4]==='0'?'0':match[4].charAt(1):' ';pad_length=match[6]-(sign+arg).length;pad=match[6]?pad_length>0?str_repeat(pad_character,pad_length):'':'';output[output.length]=match[5]?sign+arg+pad:pad_character==='0'?sign+pad+arg:pad+sign+arg;}}}return output.join('');};sprintf.cache=Object.create(null);sprintf.parse=function(fmt){var _fmt=fmt,match=[],parse_tree=[],arg_names=0;while(_fmt){if((match=re.text.exec(_fmt))!==null){parse_tree[parse_tree.length]=match[0];}else if((match=re.modulo.exec(_fmt))!==null){parse_tree[parse_tree.length]='%';}else if((match=re.placeholder.exec(_fmt))!==null){if(match[2]){arg_names|=1;var field_list=[],replacement_field=match[2],field_match=[];if((field_match=re.key.exec(replacement_field))!==null){field_list[field_list.length]=field_match[1];while((replacement_field=replacement_field.substring(field_match[0].length))!==''){if((field_match=re.key_access.exec(replacement_field))!==null){field_list[field_list.length]=field_match[1];}else if((field_match=re.index_access.exec(replacement_field))!==null){field_list[field_list.length]=field_match[1];}else{throw new SyntaxError("[sprintf] failed to parse named argument key");}}}else{throw new SyntaxError("[sprintf] failed to parse named argument key");}match[2]=field_list;}else{arg_names|=2;}if(arg_names===3){throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");}parse_tree[parse_tree.length]=match;}else{throw new SyntaxError("[sprintf] unexpected placeholder");}_fmt=_fmt.substring(match[0].length);}return parse_tree;};var vsprintf=function(fmt,argv,_argv){_argv=(argv||[]).slice(0);_argv.splice(0,0,fmt);return sprintf.apply(null,_argv);};function get_type(variable){if(typeof variable==='number'){return'number';}else if(typeof variable==='string'){return'string';}else{return Object.prototype.toString.call(variable).slice(8,-1).toLowerCase();}}var preformattedPadding={'0':['','0','00','000','0000','00000','000000','0000000'],' ':['',' ','  ','   ','    ','     ','      ','       '],'_':['','_','__','___','____','_____','______','_______']};function str_repeat(input,multiplier){if(multiplier>=0&&multiplier<=7&&preformattedPadding[input]){return preformattedPadding[input][multiplier];}return Array(multiplier+1).join(input);}if(true){exports.sprintf=sprintf;exports.vsprintf=vsprintf;}if(typeof window!=='undefined'){window.sprintf=sprintf;window.vsprintf=vsprintf;if(typeof define==='function'&&define.amd){define(function(){return{sprintf:sprintf,vsprintf:vsprintf};});}}})(typeof window==='undefined'?this:window);},7593:function(module,__unusedexports,__webpack_require__){"use strict";var _=__webpack_require__(6064);var $=__webpack_require__(5107);var buffer=__webpack_require__(9423);var compare=Buffer.compare||__webpack_require__(5491);var errors=__webpack_require__(6379);var BufferUtil=__webpack_require__(9657);var JSUtil=__webpack_require__(8416);var BufferReader=__webpack_require__(412);var BufferWriter=__webpack_require__(2418);var Hash=__webpack_require__(2442);var Signature=__webpack_require__(406);var Sighash=__webpack_require__(9845);var Address=__webpack_require__(6593);var UnspentOutput=__webpack_require__(4406);var Input=__webpack_require__(4517);var PublicKeyHashInput=Input.PublicKeyHash;var PublicKeyInput=Input.PublicKey;var MultiSigScriptHashInput=Input.MultiSigScriptHash;var MultiSigInput=Input.MultiSig;var Output=__webpack_require__(1143);var Script=__webpack_require__(5355);var PrivateKey=__webpack_require__(8322);var BN=__webpack_require__(6122);var JSDescription=__webpack_require__(5989);function Transaction(serialized){if(!(this instanceof Transaction)){return new Transaction(serialized);}this.inputs=[];this.outputs=[];this.joinSplits=[];this._inputAmount=undefined;this._outputAmount=undefined;if(serialized){if(serialized instanceof Transaction){return Transaction.shallowCopy(serialized);}else if(JSUtil.isHexa(serialized)){this.fromString(serialized);}else if(BufferUtil.isBuffer(serialized)){this.fromBuffer(serialized);}else if(_.isObject(serialized)){this.fromObject(serialized);}else{throw new errors.InvalidArgument('Must provide an object or string to deserialize a transaction');}}else{this._newTransaction();}}var CURRENT_VERSION=1;var DEFAULT_NLOCKTIME=0;var MAX_BLOCK_SIZE=1000000;Transaction.DUST_AMOUNT=546;Transaction.FEE_SECURITY_MARGIN=15;Transaction.MAX_MONEY=21000000*1e8;Transaction.NLOCKTIME_BLOCKHEIGHT_LIMIT=5e8;Transaction.NLOCKTIME_MAX_VALUE=4294967295;Transaction.FEE_PER_KB=10000;Transaction.CHANGE_OUTPUT_MAX_SIZE=20+4+34+4;Transaction.MAXIMUM_EXTRA_SIZE=4+9+9+4;Transaction.shallowCopy=function(transaction){var copy=new Transaction(transaction.toBuffer());return copy;};var hashProperty={configurable:false,enumerable:true,get:function(){return new BufferReader(this._getHash()).readReverse().toString('hex');}};Object.defineProperty(Transaction.prototype,'hash',hashProperty);Object.defineProperty(Transaction.prototype,'id',hashProperty);var ioProperty={configurable:false,enumerable:true,get:function(){return this._getInputAmount();}};Object.defineProperty(Transaction.prototype,'inputAmount',ioProperty);ioProperty.get=function(){return this._getOutputAmount();};Object.defineProperty(Transaction.prototype,'outputAmount',ioProperty);Transaction.prototype._getHash=function(){return Hash.sha256sha256(this.toBuffer());};Transaction.prototype.serialize=function(unsafe){if(true===unsafe||unsafe&&unsafe.disableAll){return this.uncheckedSerialize();}else{return this.checkedSerialize(unsafe);}};Transaction.prototype.uncheckedSerialize=Transaction.prototype.toString=function(){return this.toBuffer().toString('hex');};Transaction.prototype.checkedSerialize=function(opts){var serializationError=this.getSerializationError(opts);if(serializationError){serializationError.message+=' Use Transaction#uncheckedSerialize if you want to skip security checks. '+'See http://bitcore.io/guide/transaction.html#Serialization for more info.';throw serializationError;}return this.uncheckedSerialize();};Transaction.prototype.invalidSatoshis=function(){var invalid=false;for(var i=0;i<this.outputs.length;i++){if(this.outputs[i].invalidSatoshis()){invalid=true;}}return invalid;};Transaction.prototype.getSerializationError=function(opts){opts=opts||{};if(this.invalidSatoshis()){return new errors.Transaction.InvalidSatoshis();}var unspent=this._getUnspentValue();var unspentError;if(unspent<0){if(!opts.disableMoreOutputThanInput){unspentError=new errors.Transaction.InvalidOutputAmountSum();}}else{unspentError=this._hasFeeError(opts,unspent);}return unspentError||this._hasDustOutputs(opts)||this._isMissingSignatures(opts);};Transaction.prototype._hasFeeError=function(opts,unspent){if(!_.isUndefined(this._fee)&&this._fee!==unspent){return new errors.Transaction.FeeError.Different('Unspent value is '+unspent+' but specified fee is '+this._fee);}if(!opts.disableLargeFees){var maximumFee=Math.floor(Transaction.FEE_SECURITY_MARGIN*this._estimateFee());if(unspent>maximumFee){if(this._missingChange()){return new errors.Transaction.ChangeAddressMissing('Fee is too large and no change address was provided');}return new errors.Transaction.FeeError.TooLarge('expected less than '+maximumFee+' but got '+unspent);}}if(!opts.disableSmallFees){var minimumFee=Math.ceil(this._estimateFee()/Transaction.FEE_SECURITY_MARGIN);if(unspent<minimumFee){return new errors.Transaction.FeeError.TooSmall('expected more than '+minimumFee+' but got '+unspent);}}};Transaction.prototype._missingChange=function(){return!this._changeScript;};Transaction.prototype._hasDustOutputs=function(opts){if(opts.disableDustOutputs){return;}var index,output;for(index in this.outputs){output=this.outputs[index];if(output.satoshis<Transaction.DUST_AMOUNT&&!output.script.isDataOut()){return new errors.Transaction.DustOutputs();}}};Transaction.prototype._isMissingSignatures=function(opts){if(opts.disableIsFullySigned){return;}if(!this.isFullySigned()){return new errors.Transaction.MissingSignatures();}};Transaction.prototype.inspect=function(){return'<Transaction: '+this.uncheckedSerialize()+'>';};Transaction.prototype.toBuffer=function(){var writer=new BufferWriter();return this.toBufferWriter(writer).toBuffer();};Transaction.prototype.toBufferWriter=function(writer){writer.writeUInt32LE(this.version);writer.writeVarintNum(this.inputs.length);_.each(this.inputs,function(input){input.toBufferWriter(writer);});writer.writeVarintNum(this.outputs.length);_.each(this.outputs,function(output){output.toBufferWriter(writer);});writer.writeUInt32LE(this.nLockTime);if(this.version>=2){writer.writeVarintNum(this.joinSplits.length);_.each(this.joinSplits,function(jsdesc){jsdesc.toBufferWriter(writer);});if(this.joinSplits.length>0){writer.write(this.joinSplitPubKey);writer.write(this.joinSplitSig);}}return writer;};Transaction.prototype.fromBuffer=function(buffer){var reader=new BufferReader(buffer);return this.fromBufferReader(reader);};Transaction.prototype.fromBufferReader=function(reader){$.checkArgument(!reader.finished(),'No transaction data received');var i,sizeTxIns,sizeTxOuts,sizeJSDescs;this.version=reader.readUInt32LE();sizeTxIns=reader.readVarintNum();for(i=0;i<sizeTxIns;i++){var input=Input.fromBufferReader(reader);this.inputs.push(input);}sizeTxOuts=reader.readVarintNum();for(i=0;i<sizeTxOuts;i++){this.outputs.push(Output.fromBufferReader(reader));}this.nLockTime=reader.readUInt32LE();if(this.version>=2){sizeJSDescs=reader.readVarintNum();for(i=0;i<sizeJSDescs;i++){this.joinSplits.push(JSDescription.fromBufferReader(reader));}if(sizeJSDescs>0){this.joinSplitPubKey=reader.read(32);this.joinSplitSig=reader.read(64);}}return this;};Transaction.prototype.toObject=Transaction.prototype.toJSON=function toObject(){var inputs=[];this.inputs.forEach(function(input){inputs.push(input.toObject());});var outputs=[];this.outputs.forEach(function(output){outputs.push(output.toObject());});var obj={hash:this.hash,version:this.version,inputs:inputs,outputs:outputs,nLockTime:this.nLockTime};if(this.version>=2){var joinSplits=[];this.joinSplits.forEach(function(joinSplit){joinSplits.push(joinSplit.toObject());});obj.joinSplits=joinSplits;if(this.joinSplits.length>0){obj.joinSplitPubKey=BufferUtil.reverse(this.joinSplitPubKey).toString('hex');obj.joinSplitSig=this.joinSplitSig.toString('hex');}}if(this._changeScript){obj.changeScript=this._changeScript.toString();}if(!_.isUndefined(this._changeIndex)){obj.changeIndex=this._changeIndex;}if(!_.isUndefined(this._fee)){obj.fee=this._fee;}return obj;};Transaction.prototype.fromObject=function fromObject(arg){$.checkArgument(_.isObject(arg)||arg instanceof Transaction);var self=this;var transaction;if(arg instanceof Transaction){transaction=transaction.toObject();}else{transaction=arg;}_.each(transaction.inputs,function(input){if(!input.output||!input.output.script){self.uncheckedAddInput(new Input(input));return;}var script=new Script(input.output.script);var txin;if(script.isPublicKeyHashOut()){txin=new Input.PublicKeyHash(input);}else if(script.isScriptHashOut()&&input.publicKeys&&input.threshold){txin=new Input.MultiSigScriptHash(input,input.publicKeys,input.threshold,input.signatures);}else if(script.isPublicKeyOut()){txin=new Input.PublicKey(input);}else{throw new errors.Transaction.Input.UnsupportedScript(input.output.script);}self.addInput(txin);});_.each(transaction.outputs,function(output){self.addOutput(new Output(output));});if(transaction.changeIndex){this._changeIndex=transaction.changeIndex;}if(transaction.changeScript){this._changeScript=new Script(transaction.changeScript);}if(transaction.fee){this._fee=transaction.fee;}this.nLockTime=transaction.nLockTime;this.version=transaction.version;if(this.version>=2){_.each(transaction.joinSplits,function(joinSplit){self.joinSplits.push(new JSDescription(joinSplit));});if(self.joinSplits.length>0){self.joinSplitPubKey=BufferUtil.reverse(new Buffer(transaction.joinSplitPubKey,'hex'));self.joinSplitSig=new Buffer(transaction.joinSplitSig,'hex');}}this._checkConsistency(arg);return this;};Transaction.prototype._checkConsistency=function(arg){if(!_.isUndefined(this._changeIndex)){$.checkState(this._changeScript);$.checkState(this.outputs[this._changeIndex]);$.checkState(this.outputs[this._changeIndex].script.toString()===this._changeScript.toString());}if(arg&&arg.hash){$.checkState(arg.hash===this.hash,'Hash in object does not match transaction hash');}};Transaction.prototype.lockUntilDate=function(time){$.checkArgument(time);if(_.isNumber(time)&&time<Transaction.NLOCKTIME_BLOCKHEIGHT_LIMIT){throw new errors.Transaction.LockTimeTooEarly();}if(_.isDate(time)){time=time.getTime()/1000;}for(var i=0;i<this.inputs.length;i++){if(this.inputs[i].sequenceNumber===Input.DEFAULT_SEQNUMBER){this.inputs[i].sequenceNumber=Input.DEFAULT_LOCKTIME_SEQNUMBER;}}this.nLockTime=time;return this;};Transaction.prototype.lockUntilBlockHeight=function(height){$.checkArgument(_.isNumber(height));if(height>=Transaction.NLOCKTIME_BLOCKHEIGHT_LIMIT){throw new errors.Transaction.BlockHeightTooHigh();}if(height<0){throw new errors.Transaction.NLockTimeOutOfRange();}for(var i=0;i<this.inputs.length;i++){if(this.inputs[i].sequenceNumber===Input.DEFAULT_SEQNUMBER){this.inputs[i].sequenceNumber=Input.DEFAULT_LOCKTIME_SEQNUMBER;}}this.nLockTime=height;return this;};Transaction.prototype.getLockTime=function(){if(!this.nLockTime){return null;}if(this.nLockTime<Transaction.NLOCKTIME_BLOCKHEIGHT_LIMIT){return this.nLockTime;}return new Date(1000*this.nLockTime);};Transaction.prototype.fromString=function(string){this.fromBuffer(new buffer.Buffer(string,'hex'));};Transaction.prototype._newTransaction=function(){this.version=CURRENT_VERSION;this.nLockTime=DEFAULT_NLOCKTIME;};Transaction.prototype.from=function(utxo,pubkeys,threshold){if(_.isArray(utxo)){var self=this;_.each(utxo,function(utxo){self.from(utxo,pubkeys,threshold);});return this;}var exists=_.any(this.inputs,function(input){return input.prevTxId.toString('hex')===utxo.txId&&input.outputIndex===utxo.outputIndex;});if(exists){return this;}if(pubkeys&&threshold){this._fromMultisigUtxo(utxo,pubkeys,threshold);}else{this._fromNonP2SH(utxo);}return this;};Transaction.prototype._fromNonP2SH=function(utxo){var clazz;utxo=new UnspentOutput(utxo);if(utxo.script.isPublicKeyHashOut()){clazz=PublicKeyHashInput;}else if(utxo.script.isPublicKeyOut()){clazz=PublicKeyInput;}else{clazz=Input;}this.addInput(new clazz({output:new Output({script:utxo.script,satoshis:utxo.satoshis}),prevTxId:utxo.txId,outputIndex:utxo.outputIndex,script:Script.empty()}));};Transaction.prototype._fromMultisigUtxo=function(utxo,pubkeys,threshold){$.checkArgument(threshold<=pubkeys.length,'Number of required signatures must be greater than the number of public keys');var clazz;utxo=new UnspentOutput(utxo);if(utxo.script.isMultisigOut()){clazz=MultiSigInput;}else if(utxo.script.isScriptHashOut()){clazz=MultiSigScriptHashInput;}else{throw new Error("@TODO");}this.addInput(new clazz({output:new Output({script:utxo.script,satoshis:utxo.satoshis}),prevTxId:utxo.txId,outputIndex:utxo.outputIndex,script:Script.empty()},pubkeys,threshold));};Transaction.prototype.addInput=function(input,outputScript,satoshis){$.checkArgumentType(input,Input,'input');if(!input.output&&(_.isUndefined(outputScript)||_.isUndefined(satoshis))){throw new errors.Transaction.NeedMoreInfo('Need information about the UTXO script and satoshis');}if(!input.output&&outputScript&&!_.isUndefined(satoshis)){outputScript=outputScript instanceof Script?outputScript:new Script(outputScript);$.checkArgumentType(satoshis,'number','satoshis');input.output=new Output({script:outputScript,satoshis:satoshis});}return this.uncheckedAddInput(input);};Transaction.prototype.uncheckedAddInput=function(input){$.checkArgumentType(input,Input,'input');this.inputs.push(input);this._inputAmount=undefined;this._updateChangeOutput();return this;};Transaction.prototype.hasAllUtxoInfo=function(){return _.all(this.inputs.map(function(input){return!!input.output;}));};Transaction.prototype.fee=function(amount){$.checkArgument(_.isNumber(amount),'amount must be a number');this._fee=amount;this._updateChangeOutput();return this;};Transaction.prototype.feePerKb=function(amount){$.checkArgument(_.isNumber(amount),'amount must be a number');this._feePerKb=amount;this._updateChangeOutput();return this;};Transaction.prototype.change=function(address){$.checkArgument(address,'address is required');this._changeScript=Script.fromAddress(address);this._updateChangeOutput();return this;};Transaction.prototype.getChangeOutput=function(){if(!_.isUndefined(this._changeIndex)){return this.outputs[this._changeIndex];}return null;};Transaction.prototype.to=function(address,amount){if(_.isArray(address)){var self=this;_.each(address,function(to){self.to(to.address,to.satoshis);});return this;}$.checkArgument(JSUtil.isNaturalNumber(amount),'Amount is expected to be a positive integer');this.addOutput(new Output({script:Script(new Address(address)),satoshis:amount}));return this;};Transaction.prototype.addData=function(value){this.addOutput(new Output({script:Script.buildDataOut(value),satoshis:0}));return this;};Transaction.prototype.addOutput=function(output){$.checkArgumentType(output,Output,'output');this._addOutput(output);this._updateChangeOutput();return this;};Transaction.prototype.clearOutputs=function(){this.outputs=[];this._clearSignatures();this._outputAmount=undefined;this._changeIndex=undefined;this._updateChangeOutput();return this;};Transaction.prototype._addOutput=function(output){this.outputs.push(output);this._outputAmount=undefined;};Transaction.prototype._getOutputAmount=function(){if(_.isUndefined(this._outputAmount)){var self=this;this._outputAmount=0;_.each(this.outputs,function(output){self._outputAmount+=output.satoshis;});}return this._outputAmount;};Transaction.prototype._getInputAmount=function(){if(_.isUndefined(this._inputAmount)){var self=this;this._inputAmount=0;_.each(this.inputs,function(input){if(_.isUndefined(input.output)){throw new errors.Transaction.Input.MissingPreviousOutput();}self._inputAmount+=input.output.satoshis;});}return this._inputAmount;};Transaction.prototype._updateChangeOutput=function(){if(!this._changeScript){return;}this._clearSignatures();if(!_.isUndefined(this._changeIndex)){this._removeOutput(this._changeIndex);}var available=this._getUnspentValue();var fee=this.getFee();var changeAmount=available-fee;if(changeAmount>0){this._changeIndex=this.outputs.length;this._addOutput(new Output({script:this._changeScript,satoshis:changeAmount}));}else{this._changeIndex=undefined;}};Transaction.prototype.getFee=function(){if(this.isCoinbase()){return 0;}if(!_.isUndefined(this._fee)){return this._fee;}if(!this._changeScript){return this._getUnspentValue();}return this._estimateFee();};Transaction.prototype._estimateFee=function(){var estimatedSize=this._estimateSize();var available=this._getUnspentValue();return Transaction._estimateFee(estimatedSize,available,this._feePerKb);};Transaction.prototype._getUnspentValue=function(){return this._getInputAmount()-this._getOutputAmount();};Transaction.prototype._clearSignatures=function(){_.each(this.inputs,function(input){input.clearSignatures();});};Transaction._estimateFee=function(size,amountAvailable,feePerKb){var fee=Math.ceil(size/1000)*(feePerKb||Transaction.FEE_PER_KB);if(amountAvailable>fee){size+=Transaction.CHANGE_OUTPUT_MAX_SIZE;}return Math.ceil(size/1000)*(feePerKb||Transaction.FEE_PER_KB);};Transaction.prototype._estimateSize=function(){var result=Transaction.MAXIMUM_EXTRA_SIZE;_.each(this.inputs,function(input){result+=input._estimateSize();});_.each(this.outputs,function(output){result+=output.script.toBuffer().length+9;});return result;};Transaction.prototype._removeOutput=function(index){var output=this.outputs[index];this.outputs=_.without(this.outputs,output);this._outputAmount=undefined;};Transaction.prototype.removeOutput=function(index){this._removeOutput(index);this._updateChangeOutput();};Transaction.prototype.sort=function(){this.sortInputs(function(inputs){var copy=Array.prototype.concat.apply([],inputs);copy.sort(function(first,second){return compare(first.prevTxId,second.prevTxId)||first.outputIndex-second.outputIndex;});return copy;});this.sortOutputs(function(outputs){var copy=Array.prototype.concat.apply([],outputs);copy.sort(function(first,second){return first.satoshis-second.satoshis||compare(first.script.toBuffer(),second.script.toBuffer());});return copy;});return this;};Transaction.prototype.shuffleOutputs=function(){return this.sortOutputs(_.shuffle);};Transaction.prototype.sortOutputs=function(sortingFunction){var outs=sortingFunction(this.outputs);return this._newOutputOrder(outs);};Transaction.prototype.sortInputs=function(sortingFunction){this.inputs=sortingFunction(this.inputs);this._clearSignatures();return this;};Transaction.prototype._newOutputOrder=function(newOutputs){var isInvalidSorting=this.outputs.length!==newOutputs.length||_.difference(this.outputs,newOutputs).length!==0;if(isInvalidSorting){throw new errors.Transaction.InvalidSorting();}if(!_.isUndefined(this._changeIndex)){var changeOutput=this.outputs[this._changeIndex];this._changeIndex=_.findIndex(newOutputs,changeOutput);}this.outputs=newOutputs;return this;};Transaction.prototype.removeInput=function(txId,outputIndex){var index;if(!outputIndex&&_.isNumber(txId)){index=txId;}else{index=_.findIndex(this.inputs,function(input){return input.prevTxId.toString('hex')===txId&&input.outputIndex===outputIndex;});}if(index<0||index>=this.inputs.length){throw new errors.Transaction.InvalidIndex(index,this.inputs.length);}var input=this.inputs[index];this.inputs=_.without(this.inputs,input);this._inputAmount=undefined;this._updateChangeOutput();};Transaction.prototype.sign=function(privateKey,sigtype){$.checkState(this.hasAllUtxoInfo());var self=this;if(_.isArray(privateKey)){_.each(privateKey,function(privateKey){self.sign(privateKey,sigtype);});return this;}_.each(this.getSignatures(privateKey,sigtype),function(signature){self.applySignature(signature);});return this;};Transaction.prototype.getSignatures=function(privKey,sigtype){privKey=new PrivateKey(privKey);sigtype=sigtype||Signature.SIGHASH_ALL;var transaction=this;var results=[];var hashData=Hash.sha256ripemd160(privKey.publicKey.toBuffer());_.each(this.inputs,function forEachInput(input,index){_.each(input.getSignatures(transaction,privKey,index,sigtype,hashData),function(signature){results.push(signature);});});return results;};Transaction.prototype.applySignature=function(signature){this.inputs[signature.inputIndex].addSignature(this,signature);return this;};Transaction.prototype.isFullySigned=function(){_.each(this.inputs,function(input){if(input.isFullySigned===Input.prototype.isFullySigned){throw new errors.Transaction.UnableToVerifySignature('Unrecognized script kind, or not enough information to execute script.'+'This usually happens when creating a transaction from a serialized transaction');}});return _.all(_.map(this.inputs,function(input){return input.isFullySigned();}));};Transaction.prototype.isValidSignature=function(signature){var self=this;if(this.inputs[signature.inputIndex].isValidSignature===Input.prototype.isValidSignature){throw new errors.Transaction.UnableToVerifySignature('Unrecognized script kind, or not enough information to execute script.'+'This usually happens when creating a transaction from a serialized transaction');}return this.inputs[signature.inputIndex].isValidSignature(self,signature);};Transaction.prototype.verifySignature=function(sig,pubkey,nin,subscript){return Sighash.verify(this,sig,pubkey,nin,subscript);};Transaction.prototype.verify=function(){if(this.inputs.length===0){return'transaction txins empty';}if(this.outputs.length===0){return'transaction txouts empty';}var valueoutbn=new BN(0);for(var i=0;i<this.outputs.length;i++){var txout=this.outputs[i];if(txout.invalidSatoshis()){return'transaction txout '+i+' satoshis is invalid';}if(txout._satoshisBN.gt(new BN(Transaction.MAX_MONEY,10))){return'transaction txout '+i+' greater than MAX_MONEY';}valueoutbn=valueoutbn.add(txout._satoshisBN);if(valueoutbn.gt(new BN(Transaction.MAX_MONEY))){return'transaction txout '+i+' total output greater than MAX_MONEY';}}if(this.toBuffer().length>MAX_BLOCK_SIZE){return'transaction over the maximum block size';}var txinmap={};for(i=0;i<this.inputs.length;i++){var txin=this.inputs[i];var inputid=txin.prevTxId+':'+txin.outputIndex;if(!_.isUndefined(txinmap[inputid])){return'transaction input '+i+' duplicate input';}txinmap[inputid]=true;}var isCoinbase=this.isCoinbase();if(isCoinbase){var buf=this.inputs[0]._scriptBuffer;if(buf.length<2||buf.length>100){return'coinbase transaction script size invalid';}}else{for(i=0;i<this.inputs.length;i++){if(this.inputs[i].isNull()){return'transaction input '+i+' has null input';}}}return true;};Transaction.prototype.isCoinbase=function(){return this.inputs.length===1&&this.inputs[0].isNull();};Transaction.prototype.isRBF=function(){for(var i=0;i<this.inputs.length;i++){var input=this.inputs[i];if(input.sequenceNumber<Input.MAXINT-1){return true;}}return false;};Transaction.prototype.enableRBF=function(){for(var i=0;i<this.inputs.length;i++){var input=this.inputs[i];if(input.sequenceNumber>=Input.MAXINT-1){input.sequenceNumber=Input.DEFAULT_RBF_SEQNUMBER;}}return this;};module.exports=Transaction;},7618:function(module,__unusedexports,__webpack_require__){module.exports=glob;var fs=__webpack_require__(662);var rp=__webpack_require__(8761);var minimatch=__webpack_require__(472);var Minimatch=minimatch.Minimatch;var inherits=__webpack_require__(92);var EE=__webpack_require__(4859).EventEmitter;var path=__webpack_require__(5897);var assert=__webpack_require__(3930);var isAbsolute=__webpack_require__(8778);var globSync=__webpack_require__(3648);var common=__webpack_require__(2265);var alphasort=common.alphasort;var alphasorti=common.alphasorti;var setopts=common.setopts;var ownProp=common.ownProp;var inflight=__webpack_require__(3403);var util=__webpack_require__(649);var childrenIgnored=common.childrenIgnored;var isIgnored=common.isIgnored;var once=__webpack_require__(7957);function glob(pattern,options,cb){if(typeof options==='function')cb=options,options={};if(!options)options={};if(options.sync){if(cb)throw new TypeError('callback provided to sync glob');return globSync(pattern,options);}return new Glob(pattern,options,cb);}glob.sync=globSync;var GlobSync=glob.GlobSync=globSync.GlobSync;glob.glob=glob;function extend(origin,add){if(add===null||typeof add!=='object'){return origin;}var keys=Object.keys(add);var i=keys.length;while(i--){origin[keys[i]]=add[keys[i]];}return origin;}glob.hasMagic=function(pattern,options_){var options=extend({},options_);options.noprocess=true;var g=new Glob(pattern,options);var set=g.minimatch.set;if(!pattern)return false;if(set.length>1)return true;for(var j=0;j<set[0].length;j++){if(typeof set[0][j]!=='string')return true;}return false;};glob.Glob=Glob;inherits(Glob,EE);function Glob(pattern,options,cb){if(typeof options==='function'){cb=options;options=null;}if(options&&options.sync){if(cb)throw new TypeError('callback provided to sync glob');return new GlobSync(pattern,options);}if(!(this instanceof Glob))return new Glob(pattern,options,cb);setopts(this,pattern,options);this._didRealPath=false;var n=this.minimatch.set.length;this.matches=new Array(n);if(typeof cb==='function'){cb=once(cb);this.on('error',cb);this.on('end',function(matches){cb(null,matches);});}var self=this;this._processing=0;this._emitQueue=[];this._processQueue=[];this.paused=false;if(this.noprocess)return this;if(n===0)return done();var sync=true;for(var i=0;i<n;i++){this._process(this.minimatch.set[i],i,false,done);}sync=false;function done(){--self._processing;if(self._processing<=0){if(sync){process.nextTick(function(){self._finish();});}else{self._finish();}}}}Glob.prototype._finish=function(){assert(this instanceof Glob);if(this.aborted)return;if(this.realpath&&!this._didRealpath)return this._realpath();common.finish(this);this.emit('end',this.found);};Glob.prototype._realpath=function(){if(this._didRealpath)return;this._didRealpath=true;var n=this.matches.length;if(n===0)return this._finish();var self=this;for(var i=0;i<this.matches.length;i++)this._realpathSet(i,next);function next(){if(--n===0)self._finish();}};Glob.prototype._realpathSet=function(index,cb){var matchset=this.matches[index];if(!matchset)return cb();var found=Object.keys(matchset);var self=this;var n=found.length;if(n===0)return cb();var set=this.matches[index]=Object.create(null);found.forEach(function(p,i){p=self._makeAbs(p);rp.realpath(p,self.realpathCache,function(er,real){if(!er)set[real]=true;else if(er.syscall==='stat')set[p]=true;else self.emit('error',er);if(--n===0){self.matches[index]=set;cb();}});});};Glob.prototype._mark=function(p){return common.mark(this,p);};Glob.prototype._makeAbs=function(f){return common.makeAbs(this,f);};Glob.prototype.abort=function(){this.aborted=true;this.emit('abort');};Glob.prototype.pause=function(){if(!this.paused){this.paused=true;this.emit('pause');}};Glob.prototype.resume=function(){if(this.paused){this.emit('resume');this.paused=false;if(this._emitQueue.length){var eq=this._emitQueue.slice(0);this._emitQueue.length=0;for(var i=0;i<eq.length;i++){var e=eq[i];this._emitMatch(e[0],e[1]);}}if(this._processQueue.length){var pq=this._processQueue.slice(0);this._processQueue.length=0;for(var i=0;i<pq.length;i++){var p=pq[i];this._processing--;this._process(p[0],p[1],p[2],p[3]);}}}};Glob.prototype._process=function(pattern,index,inGlobStar,cb){assert(this instanceof Glob);assert(typeof cb==='function');if(this.aborted)return;this._processing++;if(this.paused){this._processQueue.push([pattern,index,inGlobStar,cb]);return;}var n=0;while(typeof pattern[n]==='string'){n++;}var prefix;switch(n){case pattern.length:this._processSimple(pattern.join('/'),index,cb);return;case 0:prefix=null;break;default:prefix=pattern.slice(0,n).join('/');break;}var remain=pattern.slice(n);var read;if(prefix===null)read='.';else if(isAbsolute(prefix)||isAbsolute(pattern.join('/'))){if(!prefix||!isAbsolute(prefix))prefix='/'+prefix;read=prefix;}else read=prefix;var abs=this._makeAbs(read);if(childrenIgnored(this,read))return cb();var isGlobStar=remain[0]===minimatch.GLOBSTAR;if(isGlobStar)this._processGlobStar(prefix,read,abs,remain,index,inGlobStar,cb);else this._processReaddir(prefix,read,abs,remain,index,inGlobStar,cb);};Glob.prototype._processReaddir=function(prefix,read,abs,remain,index,inGlobStar,cb){var self=this;this._readdir(abs,inGlobStar,function(er,entries){return self._processReaddir2(prefix,read,abs,remain,index,inGlobStar,entries,cb);});};Glob.prototype._processReaddir2=function(prefix,read,abs,remain,index,inGlobStar,entries,cb){if(!entries)return cb();var pn=remain[0];var negate=!!this.minimatch.negate;var rawGlob=pn._glob;var dotOk=this.dot||rawGlob.charAt(0)==='.';var matchedEntries=[];for(var i=0;i<entries.length;i++){var e=entries[i];if(e.charAt(0)!=='.'||dotOk){var m;if(negate&&!prefix){m=!e.match(pn);}else{m=e.match(pn);}if(m)matchedEntries.push(e);}}var len=matchedEntries.length;if(len===0)return cb();if(remain.length===1&&!this.mark&&!this.stat){if(!this.matches[index])this.matches[index]=Object.create(null);for(var i=0;i<len;i++){var e=matchedEntries[i];if(prefix){if(prefix!=='/')e=prefix+'/'+e;else e=prefix+e;}if(e.charAt(0)==='/'&&!this.nomount){e=path.join(this.root,e);}this._emitMatch(index,e);}return cb();}remain.shift();for(var i=0;i<len;i++){var e=matchedEntries[i];var newPattern;if(prefix){if(prefix!=='/')e=prefix+'/'+e;else e=prefix+e;}this._process([e].concat(remain),index,inGlobStar,cb);}cb();};Glob.prototype._emitMatch=function(index,e){if(this.aborted)return;if(isIgnored(this,e))return;if(this.paused){this._emitQueue.push([index,e]);return;}var abs=isAbsolute(e)?e:this._makeAbs(e);if(this.mark)e=this._mark(e);if(this.absolute)e=abs;if(this.matches[index][e])return;if(this.nodir){var c=this.cache[abs];if(c==='DIR'||Array.isArray(c))return;}this.matches[index][e]=true;var st=this.statCache[abs];if(st)this.emit('stat',e,st);this.emit('match',e);};Glob.prototype._readdirInGlobStar=function(abs,cb){if(this.aborted)return;if(this.follow)return this._readdir(abs,false,cb);var lstatkey='lstat\0'+abs;var self=this;var lstatcb=inflight(lstatkey,lstatcb_);if(lstatcb)fs.lstat(abs,lstatcb);function lstatcb_(er,lstat){if(er&&er.code==='ENOENT')return cb();var isSym=lstat&&lstat.isSymbolicLink();self.symlinks[abs]=isSym;if(!isSym&&lstat&&!lstat.isDirectory()){self.cache[abs]='FILE';cb();}else self._readdir(abs,false,cb);}};Glob.prototype._readdir=function(abs,inGlobStar,cb){if(this.aborted)return;cb=inflight('readdir\0'+abs+'\0'+inGlobStar,cb);if(!cb)return;if(inGlobStar&&!ownProp(this.symlinks,abs))return this._readdirInGlobStar(abs,cb);if(ownProp(this.cache,abs)){var c=this.cache[abs];if(!c||c==='FILE')return cb();if(Array.isArray(c))return cb(null,c);}var self=this;fs.readdir(abs,readdirCb(this,abs,cb));};function readdirCb(self,abs,cb){return function(er,entries){if(er)self._readdirError(abs,er,cb);else self._readdirEntries(abs,entries,cb);};}Glob.prototype._readdirEntries=function(abs,entries,cb){if(this.aborted)return;if(!this.mark&&!this.stat){for(var i=0;i<entries.length;i++){var e=entries[i];if(abs==='/')e=abs+e;else e=abs+'/'+e;this.cache[e]=true;}}this.cache[abs]=entries;return cb(null,entries);};Glob.prototype._readdirError=function(f,er,cb){if(this.aborted)return;switch(er.code){case'ENOTSUP':case'ENOTDIR':var abs=this._makeAbs(f);this.cache[abs]='FILE';if(abs===this.cwdAbs){var error=new Error(er.code+' invalid cwd '+this.cwd);error.path=this.cwd;error.code=er.code;this.emit('error',error);this.abort();}break;case'ENOENT':case'ELOOP':case'ENAMETOOLONG':case'UNKNOWN':this.cache[this._makeAbs(f)]=false;break;default:this.cache[this._makeAbs(f)]=false;if(this.strict){this.emit('error',er);this.abort();}if(!this.silent)console.error('glob error',er);break;}return cb();};Glob.prototype._processGlobStar=function(prefix,read,abs,remain,index,inGlobStar,cb){var self=this;this._readdir(abs,inGlobStar,function(er,entries){self._processGlobStar2(prefix,read,abs,remain,index,inGlobStar,entries,cb);});};Glob.prototype._processGlobStar2=function(prefix,read,abs,remain,index,inGlobStar,entries,cb){if(!entries)return cb();var remainWithoutGlobStar=remain.slice(1);var gspref=prefix?[prefix]:[];var noGlobStar=gspref.concat(remainWithoutGlobStar);this._process(noGlobStar,index,false,cb);var isSym=this.symlinks[abs];var len=entries.length;if(isSym&&inGlobStar)return cb();for(var i=0;i<len;i++){var e=entries[i];if(e.charAt(0)==='.'&&!this.dot)continue;var instead=gspref.concat(entries[i],remainWithoutGlobStar);this._process(instead,index,true,cb);var below=gspref.concat(entries[i],remain);this._process(below,index,true,cb);}cb();};Glob.prototype._processSimple=function(prefix,index,cb){var self=this;this._stat(prefix,function(er,exists){self._processSimple2(prefix,index,er,exists,cb);});};Glob.prototype._processSimple2=function(prefix,index,er,exists,cb){if(!this.matches[index])this.matches[index]=Object.create(null);if(!exists)return cb();if(prefix&&isAbsolute(prefix)&&!this.nomount){var trail=/[\/\\]$/.test(prefix);if(prefix.charAt(0)==='/'){prefix=path.join(this.root,prefix);}else{prefix=path.resolve(this.root,prefix);if(trail)prefix+='/';}}if(process.platform==='win32')prefix=prefix.replace(/\\/g,'/');this._emitMatch(index,prefix);cb();};Glob.prototype._stat=function(f,cb){var abs=this._makeAbs(f);var needDir=f.slice(-1)==='/';if(f.length>this.maxLength)return cb();if(!this.stat&&ownProp(this.cache,abs)){var c=this.cache[abs];if(Array.isArray(c))c='DIR';if(!needDir||c==='DIR')return cb(null,c);if(needDir&&c==='FILE')return cb();}var exists;var stat=this.statCache[abs];if(stat!==undefined){if(stat===false)return cb(null,stat);else{var type=stat.isDirectory()?'DIR':'FILE';if(needDir&&type==='FILE')return cb();else return cb(null,type,stat);}}var self=this;var statcb=inflight('stat\0'+abs,lstatcb_);if(statcb)fs.lstat(abs,statcb);function lstatcb_(er,lstat){if(lstat&&lstat.isSymbolicLink()){return fs.stat(abs,function(er,stat){if(er)self._stat2(f,abs,null,lstat,cb);else self._stat2(f,abs,er,stat,cb);});}else{self._stat2(f,abs,er,lstat,cb);}}};Glob.prototype._stat2=function(f,abs,er,stat,cb){if(er&&(er.code==='ENOENT'||er.code==='ENOTDIR')){this.statCache[abs]=false;return cb();}var needDir=f.slice(-1)==='/';this.statCache[abs]=stat;if(abs.slice(-1)==='/'&&stat&&!stat.isDirectory())return cb(null,false,stat);var c=true;if(stat)c=stat.isDirectory()?'DIR':'FILE';this.cache[abs]=this.cache[abs]||c;if(needDir&&c==='FILE')return cb();return cb(null,c,stat);};},7622:function(__unusedmodule,exports,__webpack_require__){"use strict";const Hoek=__webpack_require__(2850);const Ref=__webpack_require__(1937);const internals={};exports.schema=function(Joi,config){if(config!==undefined&&config!==null&&typeof config==='object'){if(config.isJoi){return config;}if(Array.isArray(config)){return Joi.alternatives().try(config);}if(config instanceof RegExp){return Joi.string().regex(config);}if(config instanceof Date){return Joi.date().valid(config);}return Joi.object().keys(config);}if(typeof config==='string'){return Joi.string().valid(config);}if(typeof config==='number'){return Joi.number().valid(config);}if(typeof config==='boolean'){return Joi.boolean().valid(config);}if(Ref.isRef(config)){return Joi.valid(config);}Hoek.assert(config===null,'Invalid schema content:',config);return Joi.valid(null);};exports.ref=function(id){return Ref.isRef(id)?id:Ref.create(id);};},7623:function(module,__unusedexports,__webpack_require__){"use strict";const pull=__webpack_require__(418);const values=__webpack_require__(5130);const error=__webpack_require__(5619);const filter=__webpack_require__(708);const map=__webpack_require__(569);const CID=__webpack_require__(9339);const createResolver=__webpack_require__(3278).createResolver;function pathBaseAndRest(path){let pathBase=path;let pathRest='/';if(Buffer.isBuffer(path)){pathBase=new CID(path).toBaseEncodedString();}if(typeof path==='string'){if(path.indexOf('/ipfs/')===0){path=pathBase=path.substring(6);}const subtreeStart=path.indexOf('/');if(subtreeStart>0){pathBase=path.substring(0,subtreeStart);pathRest=path.substring(subtreeStart);}}else if(CID.isCID(pathBase)){pathBase=pathBase.toBaseEncodedString();}pathBase=new CID(pathBase).toBaseEncodedString();return{base:pathBase,rest:toPathComponents(pathRest)};}const defaultOptions={maxDepth:Infinity,offset:undefined,length:undefined,fullPath:false};module.exports=(path,dag,options)=>{options=Object.assign({},defaultOptions,options);let dPath;try{dPath=pathBaseAndRest(path);}catch(err){return error(err);}const pathLengthToCut=join([dPath.base].concat(dPath.rest.slice(0,dPath.rest.length-1))).length;const cid=new CID(dPath.base);return pull(values([{multihash:cid.buffer,name:dPath.base,path:dPath.base,pathRest:dPath.rest,depth:0}]),createResolver(dag,options),filter(Boolean),map(node=>{return{depth:node.depth,name:node.name,path:options.fullPath?node.path:finalPathFor(node),size:node.size,hash:node.multihash,content:node.content,type:node.type};}));function finalPathFor(node){if(!dPath.rest.length){return node.path;}let retPath=node.path.substring(pathLengthToCut);if(retPath.charAt(0)==='/'){retPath=retPath.substring(1);}if(!retPath){retPath=dPath.rest[dPath.rest.length-1]||dPath.base;}return retPath;}};function join(paths){return paths.reduce((acc,path)=>{if(acc.length){acc+='/';}return acc+path;},'');}const toPathComponents=(path='')=>{return(path.trim().match(/([^\\^/]|\\\/)+/g)||[]).filter(Boolean);};},7644:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=series;var _parallel=__webpack_require__(177);var _parallel2=_interopRequireDefault(_parallel);var _eachOfSeries=__webpack_require__(5643);var _eachOfSeries2=_interopRequireDefault(_eachOfSeries);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function series(tasks,callback){(0,_parallel2.default)(_eachOfSeries2.default,tasks,callback);}module.exports=exports['default'];},7651:function(module){"use strict";module.exports=function getTime(){var t=process.hrtime();return Math.floor(t[0]*1000+t[1]/1000000);};},7656:function(module,__unusedexports,__webpack_require__){"use strict";const waterfall=__webpack_require__(4265);const createIsLink=__webpack_require__(2740);const createUtil=__webpack_require__(4246);module.exports=createResolver;function createResolver(multicodec,EthObjClass,mapFromEthObject){const util=createUtil(multicodec,EthObjClass);const resolver={multicodec:multicodec,defaultHashAlg:'keccak-256',resolve:resolve,tree:tree,isLink:createIsLink(resolve),_resolveFromEthObject:resolveFromEthObject,_treeFromEthObject:treeFromEthObject,_mapFromEthObject:mapFromEthObject};return{resolver:resolver,util:util};function tree(binaryBlob,options,callback){if(typeof options==='function'){callback=options;options=undefined;}if(!options){options={};}waterfall([cb=>util.deserialize(binaryBlob,cb),(ethObj,cb)=>treeFromEthObject(ethObj,options,cb)],callback);}function treeFromEthObject(ethObj,options,callback){waterfall([cb=>mapFromEthObject(ethObj,options,cb),(tuples,cb)=>cb(null,tuples.map(tuple=>tuple.path))],callback);}function resolve(binaryBlob,path,callback){waterfall([cb=>util.deserialize(binaryBlob,cb),(ethObj,cb)=>resolveFromEthObject(ethObj,path,cb)],callback);}function resolveFromEthObject(ethObj,path,callback){if(!path||path==='/'){const result={value:ethObj,remainderPath:''};return callback(null,result);}mapFromEthObject(ethObj,{},(err,paths)=>{if(err)return callback(err);const pathParts=path.split('/');let matches=paths.filter(child=>child.path===path.slice(0,child.path.length));matches=matches.filter(child=>child.path.split('/').every((part,index)=>part===pathParts[index]));const sortedMatches=matches.sort((a,b)=>b.path.length-a.path.length);const treeResult=sortedMatches[0];if(!treeResult){let err=new Error('Path not found ("'+path+'").');return callback(err);}const remainderPath=path.slice(treeResult.path.length+1);const result={value:treeResult.value,remainderPath:remainderPath};return callback(null,result);});}}},7659:function(module){module.exports=debounce;function debounce(fn,wait,callFirst){var timeout;return function(){if(!wait){return fn.apply(this,arguments);}var context=this;var args=arguments;var callNow=callFirst&&!timeout;clearTimeout(timeout);timeout=setTimeout(function(){timeout=null;if(!callNow){return fn.apply(context,args);}},wait);if(callNow){return fn.apply(this,arguments);}};}},7679:function(module){module.exports={doubles:{step:4,points:[['e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a','f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821'],['8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508','11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf'],['175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739','d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695'],['363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640','4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9'],['8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c','4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36'],['723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda','96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f'],['eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa','5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999'],['100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0','cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09'],['e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d','9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d'],['feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d','e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088'],['da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1','9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d'],['53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0','5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8'],['8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047','10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a'],['385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862','283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453'],['6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7','7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160'],['3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd','56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0'],['85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83','7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6'],['948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a','53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589'],['6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8','bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17'],['e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d','4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda'],['e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725','7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd'],['213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754','4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2'],['4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c','17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6'],['fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6','6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f'],['76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39','c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01'],['c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891','893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3'],['d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b','febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f'],['b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03','2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7'],['e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d','eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78'],['a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070','7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1'],['90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4','e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150'],['8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da','662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82'],['e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11','1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc'],['8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e','efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b'],['e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41','2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51'],['b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef','67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45'],['d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8','db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120'],['324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d','648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84'],['4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96','35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d'],['9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd','ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d'],['6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5','9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8'],['a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266','40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8'],['7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71','34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac'],['928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac','c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f'],['85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751','1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962'],['ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e','493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907'],['827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241','c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec'],['eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3','be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d'],['e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f','4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414'],['1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19','aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd'],['146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be','b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0'],['fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9','6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811'],['da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2','8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1'],['a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13','7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c'],['174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c','ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73'],['959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba','2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd'],['d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151','e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405'],['64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073','d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589'],['8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458','38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e'],['13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b','69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27'],['bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366','d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1'],['8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa','40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482'],['8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0','620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945'],['dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787','7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573'],['f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e','ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82']]},naf:{wnd:7,points:[['f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9','388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672'],['2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4','d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6'],['5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc','6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da'],['acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe','cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37'],['774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb','d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b'],['f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8','ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81'],['d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e','581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58'],['defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34','4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77'],['2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c','85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a'],['352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5','321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c'],['2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f','2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67'],['9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714','73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402'],['daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729','a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55'],['c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db','2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482'],['6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4','e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82'],['1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5','b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396'],['605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479','2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49'],['62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d','80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf'],['80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f','1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a'],['7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb','d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7'],['d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9','eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933'],['49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963','758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a'],['77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74','958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6'],['f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530','e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37'],['463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b','5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e'],['f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247','cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6'],['caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1','cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476'],['2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120','4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40'],['7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435','91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61'],['754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18','673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683'],['e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8','59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5'],['186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb','3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b'],['df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f','55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417'],['5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143','efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868'],['290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba','e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a'],['af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45','f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6'],['766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a','744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996'],['59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e','c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e'],['f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8','e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d'],['7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c','30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2'],['948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519','e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e'],['7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab','100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437'],['3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca','ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311'],['d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf','8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4'],['1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610','68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575'],['733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4','f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d'],['15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c','d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d'],['a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940','edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629'],['e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980','a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06'],['311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3','66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374'],['34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf','9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee'],['f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63','4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1'],['d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448','fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b'],['32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf','5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661'],['7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5','8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6'],['ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6','8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e'],['16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5','5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d'],['eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99','f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc'],['78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51','f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4'],['494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5','42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c'],['a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5','204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b'],['c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997','4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913'],['841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881','73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154'],['5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5','39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865'],['36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66','d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc'],['336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726','ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224'],['8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede','6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e'],['1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94','60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6'],['85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31','3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511'],['29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51','b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b'],['a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252','ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2'],['4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5','cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c'],['d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b','6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3'],['ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4','322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d'],['af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f','6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700'],['e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889','2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4'],['591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246','b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196'],['11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984','998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4'],['3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a','b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257'],['cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030','bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13'],['c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197','6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096'],['c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593','c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38'],['a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef','21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f'],['347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38','60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448'],['da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a','49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a'],['c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111','5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4'],['4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502','7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437'],['3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea','be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7'],['cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26','8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d'],['b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986','39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a'],['d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e','62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54'],['48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4','25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77'],['dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda','ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517'],['6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859','cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10'],['e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f','f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125'],['eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c','6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e'],['13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942','fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1'],['ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a','1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2'],['b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80','5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423'],['ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d','438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8'],['8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1','cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758'],['52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63','c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375'],['e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352','6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d'],['7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193','ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec'],['5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00','9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0'],['32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58','ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c'],['e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7','d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4'],['8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8','c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f'],['4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e','67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649'],['3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d','cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826'],['674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b','299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5'],['d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f','f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87'],['30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6','462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b'],['be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297','62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc'],['93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a','7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c'],['b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c','ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f'],['d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52','4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a'],['d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb','bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46'],['463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065','bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f'],['7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917','603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03'],['74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9','cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08'],['30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3','553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8'],['9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57','712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373'],['176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66','ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3'],['75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8','9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8'],['809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721','9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1'],['1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180','4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9']]}};},7683:function(module){module.exports=function(){var _read,_cb,abortCb,_end;var read=function(end,cb){if(!_read){if(end){_end=end;abortCb=cb;}else _cb=cb;}else _read(end,cb);};read.resolve=function(read){if(_read)throw new Error('already resolved');_read=read;if(!_read)throw new Error('no read cannot resolve!'+_read);if(_cb)read(null,_cb);if(abortCb)read(_end,abortCb);};read.abort=function(err){read.resolve(function(_,cb){cb(err||true);});};return read;};},7687:function(module,__unusedexports,__webpack_require__){"use strict";const EventEmitter=__webpack_require__(4859).EventEmitter;const Connection=__webpack_require__(378).Connection;const toPull=__webpack_require__(4138);const pull=__webpack_require__(2885);const pullCatch=__webpack_require__(3894);const setImmediate=__webpack_require__(7368);const debug=__webpack_require__(746);const log=debug('mplex');log.error=debug('mplex:error');const MULTIPLEX_CODEC=__webpack_require__(9524);function noop(){}function catchError(stream){return{source:pull(stream.source,pullCatch(err=>{if(err.message==='Channel destroyed'){return;}return false;})),sink:stream.sink};}class MultiplexMuxer extends EventEmitter{constructor(conn,multiplex){super();this.multiplex=multiplex;this.conn=conn;this.multicodec=MULTIPLEX_CODEC;multiplex.on('close',()=>this.emit('close'));multiplex.on('error',err=>this.emit('error',err));multiplex.on('stream',(stream,id)=>{const muxedConn=new Connection(catchError(toPull.duplex(stream)),this.conn);this.emit('stream',muxedConn);});}emit(eventName,...args){if(eventName==='error'&&!this._events.error){log.error('error',...args);}else{super.emit(eventName,...args);}}newStream(callback){callback=callback||noop;let stream;try{stream=this.multiplex.createStream();}catch(err){return setImmediate(()=>callback(err));}const conn=new Connection(catchError(toPull.duplex(stream)),this.conn);setImmediate(()=>callback(null,conn));return conn;}end(err,callback){if(typeof err==='function'){callback=err;err=null;}callback=callback||noop;this.multiplex.destroy(err);callback();}}module.exports=MultiplexMuxer;},7702:function(module){var toString={}.toString;module.exports=Array.isArray||function(arr){return toString.call(arr)=='[object Array]';};},7704:function(module,__unusedexports,__webpack_require__){"use strict";const debug=__webpack_require__(746);const log=debug('libp2p:websocket-star:listener');const multiaddr=__webpack_require__(5920);const io=__webpack_require__(8721);const sp=__webpack_require__(1028);const uuid=__webpack_require__(1245);const series=__webpack_require__(7644);const EE=__webpack_require__(4859).EventEmitter;const Connection=__webpack_require__(378).Connection;const once=__webpack_require__(7957);const setImmediate=__webpack_require__(7368);const utils=__webpack_require__(3850);const cleanUrlSIO=utils.cleanUrlSIO;const crypto=__webpack_require__(318);const pull=__webpack_require__(418);const through=__webpack_require__(300);const ERRORS=__webpack_require__(1226);const noop=once(()=>{});const sioOptions={transports:['websocket'],'force new connection':true};class Listener extends EE{constructor(options){super();this.id=options.id;this.log=log.bind(log,'listener#offline');this.canCrypto=Boolean(options.id);this._handler=options.handler||noop;this.listeners_list=options.listeners||{};this.flag=options.flag;this.conns=[];this.connected=false;}_up(cb){cb=cb?once(cb):noop;if(this.io){return cb();}this.log=log.bind(log,'listener#'+this.server);this.log('dialing to signalling server');const _io=this.io=io.connect(this.server,sioOptions);sp(_io,{codec:'buffer'});_io.once('error',cb);_io.once('connect_error',cb);_io.once('connect',cb);const proto=new utils.Protocol(this.log);proto.addRequest('ws-peer',['multiaddr'],(socket,peer)=>this.emit('peer',peer));proto.addRequest('ss-incomming',['string','multiaddr','function'],this._incommingDial.bind(this));proto.handleSocket(_io);}_down(){if(!this.io){return;}this.io.disconnect();this.emit('close');delete this.io;}_cryptoChallenge(callback){if(!this.io){return callback(new Error('Not connected'));}const pubKeyStr=this.canCrypto?crypto.keys.marshalPublicKey(this.id.pubKey).toString('hex'):'';const maStr=this.ma.toString();this.io.emit('ss-join',maStr,pubKeyStr,(err,sig,peers)=>{if(err){return callback(err);}if(sig){if(!this.canCrypto){this._down();return callback(new Error("Can't sign cryptoChallenge: No id provided"));}this.log('performing cryptoChallenge');this.id.privKey.sign(Buffer.from(sig),(err,signature)=>{if(err){return callback(err);}this.signature=signature.toString('hex');this._join(callback);});}else{if(!this.flag){this._down();return callback(new Error('Tried to listen on a server with crypto challenge disabled!\n    This is prohibited by default and can lead to security issues!\n    Please set "allowJoinWithDisabledChallenge" to true in the constructor options (but only if you know what you are doing)!'));}this.signature='_';callback(null,null,peers);}});}_crypto(cb){cb=cb?once(cb):noop;this.log('joining');if(!this.io){return cb(new Error('Not connected'));}if(this.signature){this._join(cb);}else{this._cryptoChallenge(cb);}}_join(cb){this.io.emit('ss-join',this.ma.toString(),this.signature,cb);}_incommingDial(socket,dialId,dialFrom,cb){this.log('dial#'+dialId+' incomming from',dialFrom);const ma=multiaddr(dialFrom);const source=this.io.createSource(dialId+'.dialer');const sink=this.io.createSink(dialId+'.listener');cb();const conn=new Connection({sink:sink,source:source},{getObservedAddrs:cb=>cb(null,[ma])});this.emit('connection',conn);this._handler(conn);}listen(ma,callback){this.ma=ma;this.server=cleanUrlSIO(ma);this.listeners_list[this.server]=this;callback=callback?once(callback):noop;if(this.connected){this.closing=false;return setImmediate(()=>callback());}series([cb=>this._up(cb),cb=>this._crypto((err,ignore,peers)=>cb(err,peers))],(err,[ignore,peers])=>{if(err){if(err.description&&err.description.code==='ENOTFOUND'){const hostname=err.description.hostname;err=Object.assign(new Error(`WebSocket connection failed on ${hostname}`),{code:ERRORS.ERR_WS_STAR_WEBSOCKET_CONNECTION});}this.log('error',err);if(!(err instanceof Error))err=new Error(err);this._down();this.emit('error',err);this.emit('close');return callback(err);}this.log('success');this.connected=true;this.io.on('reconnect',()=>{this.signature=null;this._crypto((err,ignore,reconnectPeers)=>{if(err){this.log('reconnect error',err);this.emit('error',err);}else{this.log('reconnected');for(const p of reconnectPeers||[]){this.emit('peer',p);}}});});this.emit('listening');for(const p of peers||[]){this.emit('peer',p);}callback();});}getAddrs(callback){setImmediate(()=>callback(null,this.ma?[this.ma]:[]));}get activeConnections(){this.conns=this.conns.filter(c=>c.sink||c.source);return Boolean(this.conns.length);}maybeClose(){if(!this.activeConnections&&this.closing){this.connected=false;this.closing=false;this.log('no more connections and listener is offline - closing');this._down();}}close(callback){callback=callback?once(callback):noop;this.closing=true;this.maybeClose();callback();}stateWatch(sink,source){let cstate={sink:true,source:true};const watch=name=>through(v=>v,e=>{cstate[name]=false;if(!cstate.sink&&!cstate.source){this.maybeClose();}});this.conns.push(cstate);return{sink:pull(watch('sink'),sink),source:pull(source,watch('source'))};}dial(ma,options,callback){if(typeof options==='function'){callback=options;options={};}const _ma=multiaddr(ma);const conn=new Connection(null);const dialId=uuid();const dlog=this.log.bind(log,'dial#'+dialId);callback=callback?once(callback):noop;let io=this.io;if(!io){return callback(new Error('Not listening'));}const sink=io.createSink(dialId+'.dialer');dlog('dialing',ma.toString());io.emit('ss-dial',this.ma.toString(),ma.toString(),dialId,err=>{if(err)return callback(err instanceof Error?err:new Error(err));dlog(err?'error: '+err.toString():'success');const source=io.createSource(dialId+'.listener');conn.setInnerConn(this.stateWatch(sink,source),{getObservedAddrs:cb=>cb(null,[_ma])});callback(null,conn);});return conn;}}module.exports=Listener;},7708:function(module,__unusedexports,__webpack_require__){"use strict";const setImmediate=__webpack_require__(7368);module.exports={tag:'/plaintext/1.0.0',encrypt(myId,conn,remoteId,callback){if(typeof remoteId==='function'){callback=remoteId;remoteId=undefined;}setImmediate(()=>callback());return conn;}};},7711:function(module,__unusedexports,__webpack_require__){"use strict";const fs=__webpack_require__(2756);const pull=__webpack_require__(2885);const glob=__webpack_require__(7618);const setImmediate=__webpack_require__(7368);const waterfall=__webpack_require__(7644);const each=__webpack_require__(4486);const mkdirp=__webpack_require__(7146);const writeFile=__webpack_require__(2839);const path=__webpack_require__(5897);const asyncFilter=__webpack_require__(759).utils.asyncFilter;const asyncSort=__webpack_require__(759).utils.asyncSort;const IDatastore=__webpack_require__(759);const Key=IDatastore.Key;const Errors=IDatastore.Errors;class FsDatastore{constructor(location,opts){this.path=path.resolve(location);this.opts=Object.assign({},{createIfMissing:true,errorIfExists:false,extension:'.data'},opts);if(this.opts.createIfMissing){this._openOrCreate();}else{this._open();}}open(callback){this._openOrCreate();setImmediate(callback);}_open(){if(!fs.existsSync(this.path)){throw new Error(`Datastore directory: ${this.path} does not exist`);}if(this.opts.errorIfExists){throw new Error(`Datastore directory: ${this.path} already exists`);}}_create(){mkdirp.sync(this.path,{fs:fs});}_openOrCreate(){try{this._open();}catch(err){if(err.message.match('does not exist')){this._create();return;}throw err;}}_encode(key){const parent=key.parent().toString();const dir=path.join(this.path,parent);const name=key.toString().slice(parent.length);const file=path.join(dir,name+this.opts.extension);return{dir:dir,file:file};}_decode(file){const ext=this.opts.extension;if(path.extname(file)!==ext){throw new Error(`Invalid extension: ${path.extname(file)}`);}const keyname=file.slice(this.path.length,-ext.length).split(path.sep).join('/');return new Key(keyname);}putRaw(key,val,callback){const parts=this._encode(key);const file=parts.file.slice(0,-this.opts.extension.length);waterfall([cb=>mkdirp(parts.dir,{fs:fs},cb),cb=>writeFile(file,val,cb)],err=>callback(err));}put(key,val,callback){const parts=this._encode(key);waterfall([cb=>mkdirp(parts.dir,{fs:fs},cb),cb=>writeFile(parts.file,val,cb)],err=>{if(err){return callback(Errors.dbWriteFailedError(err));}callback();});}getRaw(key,callback){const parts=this._encode(key);let file=parts.file;file=file.slice(0,-this.opts.extension.length);fs.readFile(file,(err,data)=>{if(err){return callback(Errors.notFoundError(err));}callback(null,data);});}get(key,callback){const parts=this._encode(key);fs.readFile(parts.file,(err,data)=>{if(err){return callback(Errors.notFoundError(err));}callback(null,data);});}has(key,callback){const parts=this._encode(key);fs.access(parts.file,err=>{callback(null,!err);});}delete(key,callback){const parts=this._encode(key);fs.unlink(parts.file,err=>{if(err){return callback(Errors.dbDeleteFailedError(err));}callback();});}batch(){const puts=[];const deletes=[];return{put(key,value){puts.push({key:key,value:value});},delete(key){deletes.push(key);},commit:(callback)=>{waterfall([cb=>each(puts,(p,cb)=>{this.put(p.key,p.value,cb);},cb),cb=>each(deletes,(k,cb)=>{this.delete(k,cb);},cb)],err=>callback(err));}};}query(q){let prefix=q.prefix||'**';let pattern=path.join(this.path,prefix,'*'+this.opts.extension).split(path.sep).join('/');let tasks=[pull.values(glob.sync(pattern))];if(!q.keysOnly){tasks.push(pull.asyncMap((f,cb)=>{fs.readFile(f,(err,buf)=>{if(err){return cb(err);}cb(null,{key:this._decode(f),value:buf});});}));}else{tasks.push(pull.map(f=>({key:this._decode(f)})));}if(q.filters!=null){tasks=tasks.concat(q.filters.map(asyncFilter));}if(q.orders!=null){tasks=tasks.concat(q.orders.map(asyncSort));}if(q.offset!=null){let i=0;tasks.push(pull.filter(()=>i++>=q.offset));}if(q.limit!=null){tasks.push(pull.take(q.limit));}return pull.apply(null,tasks);}close(callback){setImmediate(callback);}}module.exports=FsDatastore;},7721:function(module,__unusedexports,__webpack_require__){"use strict";const{importer}=__webpack_require__(3021);const pull=__webpack_require__(2885);const toPull=__webpack_require__(4138);const waterfall=__webpack_require__(4265);const isStream=__webpack_require__(36);const isSource=__webpack_require__(5832).isSource;const CID=__webpack_require__(9339);const{parseChunkerString}=__webpack_require__(8170);const WRAPPER='wrapper/';function noop(){}function prepareFile(file,self,opts,callback){opts=opts||{};let cid=new CID(file.multihash);if(opts.cidVersion===1){cid=cid.toV1();}waterfall([cb=>opts.onlyHash?cb(null,file):self.object.get(file.multihash,Object.assign({},opts,{preload:false}),cb),(node,cb)=>{const b58Hash=cid.toBaseEncodedString();let size=node.size;if(Buffer.isBuffer(node)){size=node.length;}cb(null,{path:opts.wrapWithDirectory?file.path.substring(WRAPPER.length):file.path||b58Hash,hash:b58Hash,size});}],callback);}function normalizeContent(content,opts){if(!Array.isArray(content)){content=[content];}return content.map(data=>{if(Buffer.isBuffer(data)){data={path:'',content:pull.values([data])};}if(isStream.readable(data)){data={path:'',content:toPull.source(data)};}if(isSource(data)){data={path:'',content:data};}if(data&&data.content&&typeof data.content!=='function'){if(Buffer.isBuffer(data.content)){data.content=pull.values([data.content]);}if(isStream.readable(data.content)){data.content=toPull.source(data.content);}}if(opts.wrapWithDirectory&&!data.path){throw new Error('Must provide a path when wrapping with a directory');}if(opts.wrapWithDirectory){data.path=WRAPPER+data.path;}return data;});}function preloadFile(file,self,opts){const isRootFile=opts.wrapWithDirectory?file.path==='':!file.path.includes('/');const shouldPreload=isRootFile&&!opts.onlyHash&&opts.preload!==false;if(shouldPreload){self._preload(file.hash);}return file;}function pinFile(file,self,opts,cb){const pin='pin'in opts?opts.pin:true;const isRootDir=!file.path.includes('/');const shouldPin=pin&&isRootDir&&!opts.onlyHash&&!opts.hashAlg;if(shouldPin){return self.pin.add(file.hash,{preload:false},err=>cb(err,file));}else{cb(null,file);}}module.exports=function(self){return function addPullStream(options){options=options||{};let chunkerOptions;try{chunkerOptions=parseChunkerString(options.chunker);}catch(err){return pull.map(()=>{throw err;});}const opts=Object.assign({},{shardSplitThreshold:self._options.EXPERIMENTAL.sharding?1000:Infinity},options,chunkerOptions);if(opts.hashAlg&&opts.cidVersion!==1){opts.cidVersion=1;}let total=0;const prog=opts.progress||noop;const progress=bytes=>{total+=bytes;prog(total);};opts.progress=progress;return pull(pull.map(content=>normalizeContent(content,opts)),pull.flatten(),importer(self._ipld,opts),pull.asyncMap((file,cb)=>prepareFile(file,self,opts,cb)),pull.map(file=>preloadFile(file,self,opts)),pull.asyncMap((file,cb)=>pinFile(file,self,opts,cb)));};};},7722:function(module,__unusedexports,__webpack_require__){module.exports={input:__webpack_require__(2961),output:__webpack_require__(2475)};},7730:function(module,__unusedexports,__webpack_require__){"use strict";const{util:{cid}}=__webpack_require__(7421);const defaultOptions={cidVersion:0,hashAlg:'sha2-256',codec:'dag-pb'};const persist=(node,ipld,options,callback)=>{let cidVersion=options.cidVersion||defaultOptions.cidVersion;let hashAlg=options.hashAlg||defaultOptions.hashAlg;let codec=options.codec||defaultOptions.codec;if(Buffer.isBuffer(node)){cidVersion=1;codec='raw';}if(hashAlg!=='sha2-256'){cidVersion=1;}if(options.onlyHash){return cid(node,{version:cidVersion,hashAlg:hashAlg},(err,cid)=>{callback(err,{cid,node});});}ipld.put(node,{version:cidVersion,hashAlg:hashAlg,format:codec},(error,cid)=>{callback(error,{cid,node});});};module.exports=persist;},7741:function(module,__unusedexports,__webpack_require__){"use strict";const debug=__webpack_require__(746);const log=debug('jsipfs:mfs-preload');log.error=debug('jsipfs:mfs-preload:error');module.exports=self=>{const options=self._options.preload||{};options.interval=options.interval||30*1000;if(!options.enabled){log('MFS preload disabled');return{start:cb=>setImmediate(cb),stop:cb=>setImmediate(cb)};}let rootCid;let timeoutId;const preloadMfs=()=>{self.files.stat('/',(err,stats)=>{if(err){timeoutId=setTimeout(preloadMfs,options.interval);return log.error('failed to stat MFS root for preload',err);}if(rootCid!==stats.hash){log(`preloading updated MFS root ${rootCid} -> ${stats.hash}`);return self._preload(stats.hash,err=>{timeoutId=setTimeout(preloadMfs,options.interval);if(err)return log.error(`failed to preload MFS root ${stats.hash}`,err);rootCid=stats.hash;});}timeoutId=setTimeout(preloadMfs,options.interval);});};return{start(cb){self.files.stat('/',(err,stats)=>{if(err)return cb(err);rootCid=stats.hash;log(`monitoring MFS root ${rootCid}`);timeoutId=setTimeout(preloadMfs,options.interval);cb();});},stop(cb){clearTimeout(timeoutId);cb();}};};},7756:function(module){module.exports=extend;var hasOwnProperty=Object.prototype.hasOwnProperty;function extend(){var target={};for(var i=0;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;}},7757:function(module,__unusedexports,__webpack_require__){"use strict";const pull=__webpack_require__(418);const Connection=__webpack_require__(378).Connection;const assert=__webpack_require__(3930);const PeerInfo=__webpack_require__(9265);const debug=__webpack_require__(746);const once=__webpack_require__(7957);const log=debug('libp2p:secio');log.error=debug('libp2p:secio:error');const handshake=__webpack_require__(4462);const State=__webpack_require__(3505);module.exports={tag:'/secio/1.0.0',encrypt(localId,conn,remoteId,callback){assert(localId,'no local private key provided');assert(conn,'no connection for the handshake  provided');if(typeof remoteId==='function'){callback=remoteId;remoteId=undefined;}callback=once(callback||function(err){if(err){log.error(err);}});const timeout=60*1000*5;const state=new State(localId,remoteId,timeout,callback);function finish(err){if(err){return callback(err);}conn.getPeerInfo((err,peerInfo)=>{encryptedConnection.setInnerConn(new Connection(state.secure,conn));if(err){encryptedConnection.setPeerInfo(new PeerInfo(state.id.remote));}callback();});}const encryptedConnection=new Connection(undefined,conn);pull(conn,handshake(state,finish),conn);return encryptedConnection;}};},7761:function(module,__unusedexports,__webpack_require__){"use strict";const uuid=__webpack_require__(5292);const withIs=__webpack_require__(3171);const pathSepS='/';const pathSepB=Buffer.from(pathSepS);const pathSep=pathSepB[0];class Key{constructor(s,clean){if(typeof s==='string'){this._buf=Buffer.from(s);}else if(Buffer.isBuffer(s)){this._buf=s;}if(clean==null){clean=true;}if(clean){this.clean();}if(this._buf.length===0||this._buf[0]!==pathSep){throw new Error(`Invalid key: ${this.toString()}`);}}toString(encoding){return this._buf.toString(encoding||'utf8');}toBuffer(){return this._buf;}get[Symbol.toStringTag](){return`[Key ${this.toString()}]`;}static withNamespaces(list){return new _Key(list.join(pathSepS));}static random(){return new _Key(uuid().replace(/-/g,''));}clean(){if(!this._buf||this._buf.length===0){this._buf=Buffer.from(pathSepS);}if(this._buf[0]!==pathSep){this._buf=Buffer.concat([pathSepB,this._buf]);}while(this._buf.length>1&&this._buf[this._buf.length-1]===pathSep){this._buf=this._buf.slice(0,-1);}}less(key){const list1=this.list();const list2=key.list();for(let i=0;i<list1.length;i++){if(list2.length<i+1){return false;}const c1=list1[i];const c2=list2[i];if(c1<c2){return true;}else if(c1>c2){return false;}}return list1.length<list2.length;}reverse(){return Key.withNamespaces(this.list().slice().reverse());}namespaces(){return this.list();}baseNamespace(){const ns=this.namespaces();return ns[ns.length-1];}list(){return this.toString().split(pathSepS).slice(1);}type(){return namespaceType(this.baseNamespace());}name(){return namespaceValue(this.baseNamespace());}instance(s){return new _Key(this.toString()+':'+s);}path(){let p=this.parent().toString();if(!p.endsWith(pathSepS)){p+=pathSepS;}p+=this.type();return new _Key(p);}parent(){const list=this.list();if(list.length===1){return new _Key(pathSepS);}return new _Key(list.slice(0,-1).join(pathSepS));}child(key){if(this.toString()===pathSepS){return key;}else if(key.toString()===pathSepS){return this;}return new _Key(this.toString()+key.toString(),false);}isAncestorOf(other){if(other.toString()===this.toString()){return false;}return other.toString().startsWith(this.toString());}isDecendantOf(other){if(other.toString()===this.toString()){return false;}return this.toString().startsWith(other.toString());}isTopLevel(){return this.list().length===1;}}function namespaceType(ns){const parts=ns.split(':');if(parts.length<2){return'';}return parts.slice(0,-1).join(':');}function namespaceValue(ns){const parts=ns.split(':');return parts[parts.length-1];}const _Key=withIs(Key,{className:'Key',symbolName:'@ipfs/interface-datastore/key'});module.exports=_Key;},7769:function(module,__unusedexports,__webpack_require__){const ecc=__webpack_require__(6290);const randomBytes=__webpack_require__(4989);const typeforce=__webpack_require__(2809);const types=__webpack_require__(8781);const wif=__webpack_require__(5411);const NETWORKS=__webpack_require__(1215);const isOptions=typeforce.maybe(typeforce.compile({compressed:types.maybe(types.Boolean),network:types.maybe(types.Network)}));function ECPair(d,Q,options){options=options||{};this.compressed=options.compressed===undefined?true:options.compressed;this.network=options.network||NETWORKS.bitcoin;this.__d=d||null;this.__Q=null;if(Q)this.__Q=ecc.pointCompress(Q,this.compressed);}Object.defineProperty(ECPair.prototype,'privateKey',{enumerable:false,get:function(){return this.__d;}});Object.defineProperty(ECPair.prototype,'publicKey',{get:function(){if(!this.__Q)this.__Q=ecc.pointFromScalar(this.__d,this.compressed);return this.__Q;}});ECPair.prototype.toWIF=function(){if(!this.__d)throw new Error('Missing private key');return wif.encode(this.network.wif,this.__d,this.compressed);};ECPair.prototype.sign=function(hash){if(!this.__d)throw new Error('Missing private key');return ecc.sign(hash,this.__d);};ECPair.prototype.verify=function(hash,signature){return ecc.verify(hash,this.publicKey,signature);};function fromPrivateKey(buffer,options){typeforce(types.Buffer256bit,buffer);if(!ecc.isPrivate(buffer))throw new TypeError('Private key not in range [1, n)');typeforce(isOptions,options);return new ECPair(buffer,null,options);}function fromPublicKey(buffer,options){typeforce(ecc.isPoint,buffer);typeforce(isOptions,options);return new ECPair(null,buffer,options);}function fromWIF(string,network){const decoded=wif.decode(string);const version=decoded.version;if(types.Array(network)){network=network.filter(function(x){return version===x.wif;}).pop();if(!network)throw new Error('Unknown network version');}else{network=network||NETWORKS.bitcoin;if(version!==network.wif)throw new Error('Invalid network version');}return fromPrivateKey(decoded.privateKey,{compressed:decoded.compressed,network:network});}function makeRandom(options){typeforce(isOptions,options);options=options||{};const rng=options.rng||randomBytes;let d;do{d=rng(32);typeforce(types.Buffer256bit,d);}while(!ecc.isPrivate(d));return fromPrivateKey(d,options);}module.exports={makeRandom,fromPrivateKey,fromPublicKey,fromWIF};},7777:function(module,__unusedexports,__webpack_require__){"use strict";const constants=__webpack_require__(7514);module.exports={addLink:__webpack_require__(6423),countStreamBytes:__webpack_require__(1764),createLock:__webpack_require__(9078),createNode:__webpack_require__(7550),formatCid:__webpack_require__(7166),limitStreamBytes:__webpack_require__(3166),loadNode:__webpack_require__(2796),removeLink:__webpack_require__(4348),toMfsPath:__webpack_require__(278),toPathComponents:__webpack_require__(8551),toPullSource:__webpack_require__(6238),toSourcesAndDestination:__webpack_require__(7503),toSources:__webpack_require__(8613),toTrail:__webpack_require__(3778),updateMfsRoot:__webpack_require__(6343),updateTree:__webpack_require__(9701),withMfsRoot:__webpack_require__(5502),zeros:__webpack_require__(3273),FILE_SEPARATOR:constants.FILE_SEPARATOR,MAX_CHUNK_SIZE:constants.MAX_CHUNK_SIZE,MAX_LINKS:constants.MAX_LINKS,FILE_TYPES:constants.FILE_TYPES};},7783:function(module,__unusedexports,__webpack_require__){"use strict";const multibase=__webpack_require__(1849);const errcode=__webpack_require__(4999);const namespace='/record/';const base64urlCode='u';module.exports.encodeBase32=buf=>{return multibase.encode('base32',buf).slice(1);};module.exports.keyToTopic=key=>{const b64url=multibase.encode('base64url',key).slice(1).toString();return`${namespace}${b64url}`;};module.exports.topicToKey=topic=>{if(topic.substring(0,namespace.length)!==namespace){throw errcode(new Error('topic received is not from a record'),'ERR_TOPIC_IS_NOT_FROM_RECORD_NAMESPACE');}const key=`${base64urlCode}${topic.substring(namespace.length)}`;return multibase.decode(key).toString();};},7789:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createTester=__webpack_require__(476);var _createTester2=_interopRequireDefault(_createTester);var _doParallel=__webpack_require__(5847);var _doParallel2=_interopRequireDefault(_doParallel);var _notId=__webpack_require__(4175);var _notId2=_interopRequireDefault(_notId);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}exports.default=(0,_doParallel2.default)((0,_createTester2.default)(_notId2.default,_notId2.default));module.exports=exports['default'];},7798:function(module,__unusedexports,__webpack_require__){"use strict";const{URLWithLegacySupport,format}=__webpack_require__(9141);module.exports=(url,location={},protocolMap={},defaultProtocol)=>{let protocol=location.protocol?location.protocol.replace(':',''):'http';protocol=(protocolMap[protocol]||defaultProtocol||protocol)+':';let urlParsed;try{urlParsed=new URLWithLegacySupport(url);}catch(err){urlParsed={};}const base=Object.assign({},location,{protocol:protocol||urlParsed.protocol,host:location.host||urlParsed.host});return new URLWithLegacySupport(url,format(base)).toString();};},7807:function(module,__unusedexports,__webpack_require__){"use strict";const pull=__webpack_require__(418);const pullError=__webpack_require__(5619);const handshake=__webpack_require__(9346);const debug=__webpack_require__(746);const log=debug('libp2p:secio');log.error=debug('libp2p:secio:error');const etm=__webpack_require__(2531);const crypto=__webpack_require__(7314);module.exports=function finish(state,callback){log('3. finish - start');const proto=state.protocols;const stream=state.shake.rest();const shake=handshake({timeout:state.timeout},err=>{if(err){throw err;}});pull(stream,etm.createUnboxStream(proto.remote.cipher,proto.remote.mac),shake,etm.createBoxStream(proto.local.cipher,proto.local.mac),stream);shake.handshake.write(state.proposal.in.rand);shake.handshake.read(state.proposal.in.rand.length,(err,nonceBack)=>{const fail=err=>{log.error(err);state.secure.resolve({source:pullError(err),sink(read){}});callback(err);};if(err)return fail(err);try{crypto.verifyNonce(state,nonceBack);}catch(err){return fail(err);}log('3. finish - finish');state.secure.resolve(shake.handshake.rest());callback();});};},7810:function(module,__unusedexports,__webpack_require__){module.exports=__webpack_require__(6886);},7819:function(module){var types={Array:function(value){return value!==null&&value!==undefined&&value.constructor===Array;},Boolean:function(value){return typeof value==='boolean';},Function:function(value){return typeof value==='function';},Nil:function(value){return value===undefined||value===null;},Number:function(value){return typeof value==='number';},Object:function(value){return typeof value==='object';},String:function(value){return typeof value==='string';},'':function(){return true;}};types.Null=types.Nil;for(var typeName in types){types[typeName].toJSON=function(t){return t;}.bind(null,typeName);}module.exports=types;},7834:function(module,__unusedexports,__webpack_require__){"use strict";const Hoek=__webpack_require__(2850);const Topo=__webpack_require__(7288);const Any=__webpack_require__(7492);const Errors=__webpack_require__(1729);const Cast=__webpack_require__(7622);const State=__webpack_require__(7941);const internals={};internals.Object=class extends Any{constructor(){super();this._type='object';this._inner.children=null;this._inner.renames=[];this._inner.dependencies=[];this._inner.patterns=[];}_init(...args){return args.length?this.keys(...args):this;}_base(value,state,options){let target=value;const errors=[];const finish=()=>{return{value:target,errors:errors.length?errors:null};};if(typeof value==='string'&&options.convert){value=internals.safeParse(value);}const type=this._flags.func?'function':'object';if(!value||typeof value!==type||Array.isArray(value)){errors.push(this.createError(type+'.base',{value},state,options));return finish();}if(!this._inner.renames.length&&!this._inner.dependencies.length&&!this._inner.children&&!this._inner.patterns.length){target=value;return finish();}if(target===value){if(type==='object'){target=Object.create(Object.getPrototypeOf(value));}else{target=function(...args){return value.apply(this,args);};target.prototype=Hoek.clone(value.prototype);}const valueKeys=Object.keys(value);for(let i=0;i<valueKeys.length;++i){target[valueKeys[i]]=value[valueKeys[i]];}}else{target=value;}const renamed={};for(let i=0;i<this._inner.renames.length;++i){const rename=this._inner.renames[i];if(rename.isRegExp){const targetKeys=Object.keys(target);const matchedTargetKeys=[];for(let j=0;j<targetKeys.length;++j){if(rename.from.test(targetKeys[j])){matchedTargetKeys.push(targetKeys[j]);}}const allUndefined=matchedTargetKeys.every(key=>target[key]===undefined);if(rename.options.ignoreUndefined&&allUndefined){continue;}if(!rename.options.multiple&&renamed[rename.to]){errors.push(this.createError('object.rename.regex.multiple',{from:matchedTargetKeys,to:rename.to},state,options));if(options.abortEarly){return finish();}}if(Object.prototype.hasOwnProperty.call(target,rename.to)&&!rename.options.override&&!renamed[rename.to]){errors.push(this.createError('object.rename.regex.override',{from:matchedTargetKeys,to:rename.to},state,options));if(options.abortEarly){return finish();}}if(allUndefined){delete target[rename.to];}else{target[rename.to]=target[matchedTargetKeys[matchedTargetKeys.length-1]];}renamed[rename.to]=true;if(!rename.options.alias){for(let j=0;j<matchedTargetKeys.length;++j){delete target[matchedTargetKeys[j]];}}}else{if(rename.options.ignoreUndefined&&target[rename.from]===undefined){continue;}if(!rename.options.multiple&&renamed[rename.to]){errors.push(this.createError('object.rename.multiple',{from:rename.from,to:rename.to},state,options));if(options.abortEarly){return finish();}}if(Object.prototype.hasOwnProperty.call(target,rename.to)&&!rename.options.override&&!renamed[rename.to]){errors.push(this.createError('object.rename.override',{from:rename.from,to:rename.to},state,options));if(options.abortEarly){return finish();}}if(target[rename.from]===undefined){delete target[rename.to];}else{target[rename.to]=target[rename.from];}renamed[rename.to]=true;if(!rename.options.alias){delete target[rename.from];}}}if(!this._inner.children&&!this._inner.patterns.length&&!this._inner.dependencies.length){return finish();}const unprocessed=new Set(Object.keys(target));if(this._inner.children){const stripProps=[];for(let i=0;i<this._inner.children.length;++i){const child=this._inner.children[i];const key=child.key;const item=target[key];unprocessed.delete(key);const localState=new State(key,[...state.path,key],target,state.reference);const result=child.schema._validate(item,localState,options);if(result.errors){errors.push(this.createError('object.child',{key,child:child.schema._getLabel(key),reason:result.errors},localState,options));if(options.abortEarly){return finish();}}else{if(child.schema._flags.strip||result.value===undefined&&result.value!==item){stripProps.push(key);target[key]=result.finalValue;}else if(result.value!==undefined){target[key]=result.value;}}}for(let i=0;i<stripProps.length;++i){delete target[stripProps[i]];}}if(unprocessed.size&&this._inner.patterns.length){for(const key of unprocessed){const localState=new State(key,[...state.path,key],target,state.reference);const item=target[key];for(let i=0;i<this._inner.patterns.length;++i){const pattern=this._inner.patterns[i];if(pattern.regex?pattern.regex.test(key):!pattern.schema.validate(key).error){unprocessed.delete(key);const result=pattern.rule._validate(item,localState,options);if(result.errors){errors.push(this.createError('object.child',{key,child:pattern.rule._getLabel(key),reason:result.errors},localState,options));if(options.abortEarly){return finish();}}target[key]=result.value;}}}}if(unprocessed.size&&(this._inner.children||this._inner.patterns.length)){if(options.stripUnknown&&this._flags.allowUnknown!==true||options.skipFunctions){const stripUnknown=options.stripUnknown?options.stripUnknown===true?true:!!options.stripUnknown.objects:false;for(const key of unprocessed){if(stripUnknown){delete target[key];unprocessed.delete(key);}else if(typeof target[key]==='function'){unprocessed.delete(key);}}}if(this._flags.allowUnknown!==undefined?!this._flags.allowUnknown:!options.allowUnknown){for(const unprocessedKey of unprocessed){errors.push(this.createError('object.allowUnknown',{child:unprocessedKey,value:target[unprocessedKey]},{key:unprocessedKey,path:[...state.path,unprocessedKey]},options,{}));}}}for(let i=0;i<this._inner.dependencies.length;++i){const dep=this._inner.dependencies[i];const hasKey=dep.key!==null;const splitKey=hasKey&&dep.key.split('.');const localState=hasKey?new State(splitKey[splitKey.length-1],[...state.path,...splitKey]):new State(null,state.path);const err=internals[dep.type].call(this,dep.key,hasKey&&Hoek.reach(target,dep.key,{functions:true}),dep.peers,target,localState,options);if(err instanceof Errors.Err){errors.push(err);if(options.abortEarly){return finish();}}}return finish();}keys(schema){Hoek.assert(schema===null||schema===undefined||typeof schema==='object','Object schema must be a valid object');Hoek.assert(!schema||!(schema instanceof Any),'Object schema cannot be a joi schema');const obj=this.clone();if(!schema){obj._inner.children=null;return obj;}const children=Object.keys(schema);if(!children.length){obj._inner.children=[];return obj;}const topo=new Topo();if(obj._inner.children){for(let i=0;i<obj._inner.children.length;++i){const child=obj._inner.children[i];if(!children.includes(child.key)){topo.add(child,{after:child._refs,group:child.key});}}}for(let i=0;i<children.length;++i){const key=children[i];const child=schema[key];try{const cast=Cast.schema(this._currentJoi,child);topo.add({key,schema:cast},{after:cast._refs,group:key});}catch(castErr){if(castErr.hasOwnProperty('path')){castErr.path=key+'.'+castErr.path;}else{castErr.path=key;}throw castErr;}}obj._inner.children=topo.nodes;return obj;}append(schema){if(schema===null||schema===undefined||Object.keys(schema).length===0){return this;}return this.keys(schema);}unknown(allow){const value=allow!==false;if(this._flags.allowUnknown===value){return this;}const obj=this.clone();obj._flags.allowUnknown=value;return obj;}length(limit){Hoek.assert(Number.isSafeInteger(limit)&&limit>=0,'limit must be a positive integer');return this._test('length',limit,function(value,state,options){if(Object.keys(value).length===limit){return value;}return this.createError('object.length',{limit,value},state,options);});}min(limit){Hoek.assert(Number.isSafeInteger(limit)&&limit>=0,'limit must be a positive integer');return this._test('min',limit,function(value,state,options){if(Object.keys(value).length>=limit){return value;}return this.createError('object.min',{limit,value},state,options);});}max(limit){Hoek.assert(Number.isSafeInteger(limit)&&limit>=0,'limit must be a positive integer');return this._test('max',limit,function(value,state,options){if(Object.keys(value).length<=limit){return value;}return this.createError('object.max',{limit,value},state,options);});}pattern(pattern,schema){const isRegExp=pattern instanceof RegExp;Hoek.assert(isRegExp||pattern instanceof Any,'pattern must be a regex or schema');Hoek.assert(schema!==undefined,'Invalid rule');if(isRegExp){Hoek.assert(!pattern.flags.includes('g')&&!pattern.flags.includes('y'),'pattern should not use global or sticky mode');}try{schema=Cast.schema(this._currentJoi,schema);}catch(castErr){if(castErr.hasOwnProperty('path')){castErr.message=`${castErr.message}(${castErr.path})`;}throw castErr;}const obj=this.clone();if(isRegExp){obj._inner.patterns.push({regex:pattern,rule:schema});}else{obj._inner.patterns.push({schema:pattern,rule:schema});}return obj;}schema(){return this._test('schema',null,function(value,state,options){if(value instanceof Any){return value;}return this.createError('object.schema',null,state,options);});}with(key,peers){Hoek.assert(arguments.length===2,'Invalid number of arguments, expected 2.');return this._dependency('with',key,peers);}without(key,peers){Hoek.assert(arguments.length===2,'Invalid number of arguments, expected 2.');return this._dependency('without',key,peers);}xor(...peers){peers=Hoek.flatten(peers);return this._dependency('xor',null,peers);}oxor(...peers){return this._dependency('oxor',null,peers);}or(...peers){peers=Hoek.flatten(peers);return this._dependency('or',null,peers);}and(...peers){peers=Hoek.flatten(peers);return this._dependency('and',null,peers);}nand(...peers){peers=Hoek.flatten(peers);return this._dependency('nand',null,peers);}requiredKeys(...children){children=Hoek.flatten(children);return this.applyFunctionToChildren(children,'required');}optionalKeys(...children){children=Hoek.flatten(children);return this.applyFunctionToChildren(children,'optional');}forbiddenKeys(...children){children=Hoek.flatten(children);return this.applyFunctionToChildren(children,'forbidden');}rename(from,to,options){Hoek.assert(typeof from==='string'||from instanceof RegExp,'Rename missing the from argument');Hoek.assert(typeof to==='string','Rename missing the to argument');Hoek.assert(to!==from,'Cannot rename key to same name:',from);for(let i=0;i<this._inner.renames.length;++i){Hoek.assert(this._inner.renames[i].from!==from,'Cannot rename the same key multiple times');}const obj=this.clone();obj._inner.renames.push({from,to,options:Hoek.applyToDefaults(internals.renameDefaults,options||{}),isRegExp:from instanceof RegExp});return obj;}applyFunctionToChildren(children,fn,args=[],root){children=[].concat(children);Hoek.assert(children.length>0,'expected at least one children');const groupedChildren=internals.groupChildren(children);let obj;if(''in groupedChildren){obj=this[fn](...args);delete groupedChildren[''];}else{obj=this.clone();}if(obj._inner.children){root=root?root+'.':'';for(let i=0;i<obj._inner.children.length;++i){const child=obj._inner.children[i];const group=groupedChildren[child.key];if(group){obj._inner.children[i]={key:child.key,_refs:child._refs,schema:child.schema.applyFunctionToChildren(group,fn,args,root+child.key)};delete groupedChildren[child.key];}}}const remaining=Object.keys(groupedChildren);Hoek.assert(remaining.length===0,'unknown key(s)',remaining.join(', '));return obj;}_dependency(type,key,peers){peers=[].concat(peers);for(let i=0;i<peers.length;++i){Hoek.assert(typeof peers[i]==='string',type,'peers must be a string or array of strings');}const obj=this.clone();obj._inner.dependencies.push({type,key,peers});return obj;}describe(shallow){const description=super.describe();if(description.rules){for(let i=0;i<description.rules.length;++i){const rule=description.rules[i];if(rule.arg&&typeof rule.arg==='object'&&rule.arg.schema&&rule.arg.ref){rule.arg={schema:rule.arg.schema.describe(),ref:rule.arg.ref.toString()};}}}if(this._inner.children&&!shallow){description.children={};for(let i=0;i<this._inner.children.length;++i){const child=this._inner.children[i];description.children[child.key]=child.schema.describe();}}if(this._inner.dependencies.length){description.dependencies=Hoek.clone(this._inner.dependencies);}if(this._inner.patterns.length){description.patterns=[];for(let i=0;i<this._inner.patterns.length;++i){const pattern=this._inner.patterns[i];if(pattern.regex){description.patterns.push({regex:pattern.regex.toString(),rule:pattern.rule.describe()});}else{description.patterns.push({schema:pattern.schema.describe(),rule:pattern.rule.describe()});}}}if(this._inner.renames.length>0){description.renames=Hoek.clone(this._inner.renames);}return description;}assert(ref,schema,message){ref=Cast.ref(ref);Hoek.assert(ref.isContext||ref.depth>1,'Cannot use assertions for root level references - use direct key rules instead');message=message||'pass the assertion test';Hoek.assert(typeof message==='string','Message must be a string');try{schema=Cast.schema(this._currentJoi,schema);}catch(castErr){if(castErr.hasOwnProperty('path')){castErr.message=`${castErr.message}(${castErr.path})`;}throw castErr;}const key=ref.path[ref.path.length-1];const path=ref.path.join('.');return this._test('assert',{schema,ref},function(value,state,options){const result=schema._validate(ref(value),null,options,value);if(!result.errors){return value;}const localState=new State(key,ref.path,state.parent,state.reference);return this.createError('object.assert',{ref:path,message},localState,options);});}type(constructor,name=constructor.name){Hoek.assert(typeof constructor==='function','type must be a constructor function');const typeData={name,ctor:constructor};return this._test('type',typeData,function(value,state,options){if(value instanceof constructor){return value;}return this.createError('object.type',{type:typeData.name,value},state,options);});}};internals.safeParse=function(value){try{return JSON.parse(value);}catch(parseErr){}return value;};internals.renameDefaults={alias:false,multiple:false,override:false};internals.groupChildren=function(children){children.sort();const grouped={};for(let i=0;i<children.length;++i){const child=children[i];Hoek.assert(typeof child==='string','children must be strings');const group=child.split('.')[0];const childGroup=grouped[group]=grouped[group]||[];childGroup.push(child.substring(group.length+1));}return grouped;};internals.keysToLabels=function(schema,keys){const children=schema._inner.children;if(!children){return keys;}const findLabel=function(key){const matchingChild=schema._currentJoi.reach(schema,key);return matchingChild?matchingChild._getLabel(key):key;};if(Array.isArray(keys)){return keys.map(findLabel);}return findLabel(keys);};internals.with=function(key,value,peers,parent,state,options){if(value===undefined){return;}for(let i=0;i<peers.length;++i){const peer=peers[i];const keysExist=Hoek.reach(parent,peer,{functions:true});if(keysExist===undefined){return this.createError('object.with',{main:key,mainWithLabel:internals.keysToLabels(this,key),peer,peerWithLabel:internals.keysToLabels(this,peer)},state,options);}}};internals.without=function(key,value,peers,parent,state,options){if(value===undefined){return;}for(let i=0;i<peers.length;++i){const peer=peers[i];const keysExist=Hoek.reach(parent,peer,{functions:true});if(keysExist!==undefined){return this.createError('object.without',{main:key,mainWithLabel:internals.keysToLabels(this,key),peer,peerWithLabel:internals.keysToLabels(this,peer)},state,options);}}};internals.xor=function(key,value,peers,parent,state,options){const present=[];for(let i=0;i<peers.length;++i){const peer=peers[i];const keysExist=Hoek.reach(parent,peer,{functions:true});if(keysExist!==undefined){present.push(peer);}}if(present.length===1){return;}const context={peers,peersWithLabels:internals.keysToLabels(this,peers)};if(present.length===0){return this.createError('object.missing',context,state,options);}context.present=present;context.presentWithLabels=internals.keysToLabels(this,present);return this.createError('object.xor',context,state,options);};internals.oxor=function(key,value,peers,parent,state,options){const present=[];for(let i=0;i<peers.length;++i){const peer=peers[i];const keysExist=Hoek.reach(parent,peer,{functions:true});if(keysExist!==undefined){present.push(peer);}}if(!present.length||present.length===1){return;}const context={peers,peersWithLabels:internals.keysToLabels(this,peers)};context.present=present;context.presentWithLabels=internals.keysToLabels(this,present);return this.createError('object.oxor',context,state,options);};internals.or=function(key,value,peers,parent,state,options){for(let i=0;i<peers.length;++i){const peer=peers[i];const keysExist=Hoek.reach(parent,peer,{functions:true});if(keysExist!==undefined){return;}}return this.createError('object.missing',{peers,peersWithLabels:internals.keysToLabels(this,peers)},state,options);};internals.and=function(key,value,peers,parent,state,options){const missing=[];const present=[];const count=peers.length;for(let i=0;i<count;++i){const peer=peers[i];const keysExist=Hoek.reach(parent,peer,{functions:true});if(keysExist===undefined){missing.push(peer);}else{present.push(peer);}}const aon=missing.length===count||present.length===count;if(!aon){return this.createError('object.and',{present,presentWithLabels:internals.keysToLabels(this,present),missing,missingWithLabels:internals.keysToLabels(this,missing)},state,options);}};internals.nand=function(key,value,peers,parent,state,options){const present=[];for(let i=0;i<peers.length;++i){const peer=peers[i];const keysExist=Hoek.reach(parent,peer,{functions:true});if(keysExist!==undefined){present.push(peer);}}const main=peers[0];const values=peers.slice(1);const allPresent=present.length===peers.length;return allPresent?this.createError('object.nand',{main,mainWithLabel:internals.keysToLabels(this,main),peers:values,peersWithLabels:internals.keysToLabels(this,values)},state,options):null;};module.exports=new internals.Object();},7837:function(module){module.exports={"name":"petersburg","comment":"Aka constantinopleFix, removes EIP-1283, activate together with or after constantinople","eip":{"url":"https://github.com/ethereum/EIPs/pull/1716","status":"Draft"},"gasConfig":{},"gasPrices":{"netSstoreNoopGas":{"v":null,"d":"Removed along EIP-1283"},"netSstoreInitGas":{"v":null,"d":"Removed along EIP-1283"},"netSstoreCleanGas":{"v":null,"d":"Removed along EIP-1283"},"netSstoreDirtyGas":{"v":null,"d":"Removed along EIP-1283"},"netSstoreClearRefund":{"v":null,"d":"Removed along EIP-1283"},"netSstoreResetRefund":{"v":null,"d":"Removed along EIP-1283"},"netSstoreResetClearRefund":{"v":null,"d":"Removed along EIP-1283"}},"vm":{},"pow":{},"casper":{},"sharding":{}};},7858:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,'__esModule',{value:true});function _interopDefault(ex){return ex&&typeof ex==='object'&&'default'in ex?ex['default']:ex;}var Stream=_interopDefault(__webpack_require__(6886));var http=_interopDefault(__webpack_require__(3853));var Url=_interopDefault(__webpack_require__(774));var https=_interopDefault(__webpack_require__(2307));var zlib=_interopDefault(__webpack_require__(2673));const BUFFER=Symbol('buffer');const TYPE=Symbol('type');class Blob{constructor(){this[TYPE]='';const blobParts=arguments[0];const options=arguments[1];const buffers=[];if(blobParts){const a=blobParts;const length=Number(a.length);for(let i=0;i<length;i++){const element=a[i];let buffer;if(element instanceof Buffer){buffer=element;}else if(ArrayBuffer.isView(element)){buffer=Buffer.from(element.buffer,element.byteOffset,element.byteLength);}else if(element instanceof ArrayBuffer){buffer=Buffer.from(element);}else if(element instanceof Blob){buffer=element[BUFFER];}else{buffer=Buffer.from(typeof element==='string'?element:String(element));}buffers.push(buffer);}}this[BUFFER]=Buffer.concat(buffers);let type=options&&options.type!==undefined&&String(options.type).toLowerCase();if(type&&!/[^\u0020-\u007E]/.test(type)){this[TYPE]=type;}}get size(){return this[BUFFER].length;}get type(){return this[TYPE];}slice(){const size=this.size;const start=arguments[0];const end=arguments[1];let relativeStart,relativeEnd;if(start===undefined){relativeStart=0;}else if(start<0){relativeStart=Math.max(size+start,0);}else{relativeStart=Math.min(start,size);}if(end===undefined){relativeEnd=size;}else if(end<0){relativeEnd=Math.max(size+end,0);}else{relativeEnd=Math.min(end,size);}const span=Math.max(relativeEnd-relativeStart,0);const buffer=this[BUFFER];const slicedBuffer=buffer.slice(relativeStart,relativeStart+span);const blob=new Blob([],{type:arguments[2]});blob[BUFFER]=slicedBuffer;return blob;}}Object.defineProperties(Blob.prototype,{size:{enumerable:true},type:{enumerable:true},slice:{enumerable:true}});Object.defineProperty(Blob.prototype,Symbol.toStringTag,{value:'Blob',writable:false,enumerable:false,configurable:true});function FetchError(message,type,systemError){Error.call(this,message);this.message=message;this.type=type;if(systemError){this.code=this.errno=systemError.code;}Error.captureStackTrace(this,this.constructor);}FetchError.prototype=Object.create(Error.prototype);FetchError.prototype.constructor=FetchError;FetchError.prototype.name='FetchError';let convert;try{convert=__webpack_require__(7508).convert;}catch(e){}const INTERNALS=Symbol('Body internals');const PassThrough=Stream.PassThrough;function Body(body){var _this=this;var _ref=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},_ref$size=_ref.size;let size=_ref$size===undefined?0:_ref$size;var _ref$timeout=_ref.timeout;let timeout=_ref$timeout===undefined?0:_ref$timeout;if(body==null){body=null;}else if(typeof body==='string');else if(isURLSearchParams(body));else if(body instanceof Blob);else if(Buffer.isBuffer(body));else if(Object.prototype.toString.call(body)==='[object ArrayBuffer]');else if(ArrayBuffer.isView(body));else if(body instanceof Stream);else{body=String(body);}this[INTERNALS]={body,disturbed:false,error:null};this.size=size;this.timeout=timeout;if(body instanceof Stream){body.on('error',function(err){const error=err.name==='AbortError'?err:new FetchError(`Invalid response body while trying to fetch ${_this.url}: ${err.message}`,'system',err);_this[INTERNALS].error=error;});}}Body.prototype={get body(){return this[INTERNALS].body;},get bodyUsed(){return this[INTERNALS].disturbed;},arrayBuffer(){return consumeBody.call(this).then(function(buf){return buf.buffer.slice(buf.byteOffset,buf.byteOffset+buf.byteLength);});},blob(){let ct=this.headers&&this.headers.get('content-type')||'';return consumeBody.call(this).then(function(buf){return Object.assign(new Blob([],{type:ct.toLowerCase()}),{[BUFFER]:buf});});},json(){var _this2=this;return consumeBody.call(this).then(function(buffer){try{return JSON.parse(buffer.toString());}catch(err){return Body.Promise.reject(new FetchError(`invalid json response body at ${_this2.url} reason: ${err.message}`,'invalid-json'));}});},text(){return consumeBody.call(this).then(function(buffer){return buffer.toString();});},buffer(){return consumeBody.call(this);},textConverted(){var _this3=this;return consumeBody.call(this).then(function(buffer){return convertBody(buffer,_this3.headers);});}};Object.defineProperties(Body.prototype,{body:{enumerable:true},bodyUsed:{enumerable:true},arrayBuffer:{enumerable:true},blob:{enumerable:true},json:{enumerable:true},text:{enumerable:true}});Body.mixIn=function(proto){for(const name of Object.getOwnPropertyNames(Body.prototype)){if(!(name in proto)){const desc=Object.getOwnPropertyDescriptor(Body.prototype,name);Object.defineProperty(proto,name,desc);}}};function consumeBody(){var _this4=this;if(this[INTERNALS].disturbed){return Body.Promise.reject(new TypeError(`body used already for: ${this.url}`));}this[INTERNALS].disturbed=true;if(this[INTERNALS].error){return Body.Promise.reject(this[INTERNALS].error);}if(this.body===null){return Body.Promise.resolve(Buffer.alloc(0));}if(typeof this.body==='string'){return Body.Promise.resolve(Buffer.from(this.body));}if(this.body instanceof Blob){return Body.Promise.resolve(this.body[BUFFER]);}if(Buffer.isBuffer(this.body)){return Body.Promise.resolve(this.body);}if(Object.prototype.toString.call(this.body)==='[object ArrayBuffer]'){return Body.Promise.resolve(Buffer.from(this.body));}if(ArrayBuffer.isView(this.body)){return Body.Promise.resolve(Buffer.from(this.body.buffer,this.body.byteOffset,this.body.byteLength));}if(!(this.body instanceof Stream)){return Body.Promise.resolve(Buffer.alloc(0));}let accum=[];let accumBytes=0;let abort=false;return new Body.Promise(function(resolve,reject){let resTimeout;if(_this4.timeout){resTimeout=setTimeout(function(){abort=true;reject(new FetchError(`Response timeout while trying to fetch ${_this4.url} (over ${_this4.timeout}ms)`,'body-timeout'));},_this4.timeout);}_this4.body.on('error',function(err){if(err.name==='AbortError'){abort=true;reject(err);}else{reject(new FetchError(`Invalid response body while trying to fetch ${_this4.url}: ${err.message}`,'system',err));}});_this4.body.on('data',function(chunk){if(abort||chunk===null){return;}if(_this4.size&&accumBytes+chunk.length>_this4.size){abort=true;reject(new FetchError(`content size at ${_this4.url} over limit: ${_this4.size}`,'max-size'));return;}accumBytes+=chunk.length;accum.push(chunk);});_this4.body.on('end',function(){if(abort){return;}clearTimeout(resTimeout);try{resolve(Buffer.concat(accum));}catch(err){reject(new FetchError(`Could not create Buffer from response body for ${_this4.url}: ${err.message}`,'system',err));}});});}function convertBody(buffer,headers){if(typeof convert!=='function'){throw new Error('The package `encoding` must be installed to use the textConverted() function');}const ct=headers.get('content-type');let charset='utf-8';let res,str;if(ct){res=/charset=([^;]*)/i.exec(ct);}str=buffer.slice(0,1024).toString();if(!res&&str){res=/<meta.+?charset=(['"])(.+?)\1/i.exec(str);}if(!res&&str){res=/<meta[\s]+?http-equiv=(['"])content-type\1[\s]+?content=(['"])(.+?)\2/i.exec(str);if(res){res=/charset=(.*)/i.exec(res.pop());}}if(!res&&str){res=/<\?xml.+?encoding=(['"])(.+?)\1/i.exec(str);}if(res){charset=res.pop();if(charset==='gb2312'||charset==='gbk'){charset='gb18030';}}return convert(buffer,'UTF-8',charset).toString();}function isURLSearchParams(obj){if(typeof obj!=='object'||typeof obj.append!=='function'||typeof obj.delete!=='function'||typeof obj.get!=='function'||typeof obj.getAll!=='function'||typeof obj.has!=='function'||typeof obj.set!=='function'){return false;}return obj.constructor.name==='URLSearchParams'||Object.prototype.toString.call(obj)==='[object URLSearchParams]'||typeof obj.sort==='function';}function clone(instance){let p1,p2;let body=instance.body;if(instance.bodyUsed){throw new Error('cannot clone body after it is used');}if(body instanceof Stream&&typeof body.getBoundary!=='function'){p1=new PassThrough();p2=new PassThrough();body.pipe(p1);body.pipe(p2);instance[INTERNALS].body=p1;body=p2;}return body;}function extractContentType(instance){const body=instance.body;if(body===null){return null;}else if(typeof body==='string'){return'text/plain;charset=UTF-8';}else if(isURLSearchParams(body)){return'application/x-www-form-urlencoded;charset=UTF-8';}else if(body instanceof Blob){return body.type||null;}else if(Buffer.isBuffer(body)){return null;}else if(Object.prototype.toString.call(body)==='[object ArrayBuffer]'){return null;}else if(ArrayBuffer.isView(body)){return null;}else if(typeof body.getBoundary==='function'){return`multipart/form-data;boundary=${body.getBoundary()}`;}else{return null;}}function getTotalBytes(instance){const body=instance.body;if(body===null){return 0;}else if(typeof body==='string'){return Buffer.byteLength(body);}else if(isURLSearchParams(body)){return Buffer.byteLength(String(body));}else if(body instanceof Blob){return body.size;}else if(Buffer.isBuffer(body)){return body.length;}else if(Object.prototype.toString.call(body)==='[object ArrayBuffer]'){return body.byteLength;}else if(ArrayBuffer.isView(body)){return body.byteLength;}else if(body&&typeof body.getLengthSync==='function'){if(body._lengthRetrievers&&body._lengthRetrievers.length==0||body.hasKnownLength&&body.hasKnownLength()){return body.getLengthSync();}return null;}else{return null;}}function writeToStream(dest,instance){const body=instance.body;if(body===null){dest.end();}else if(typeof body==='string'){dest.write(body);dest.end();}else if(isURLSearchParams(body)){dest.write(Buffer.from(String(body)));dest.end();}else if(body instanceof Blob){dest.write(body[BUFFER]);dest.end();}else if(Buffer.isBuffer(body)){dest.write(body);dest.end();}else if(Object.prototype.toString.call(body)==='[object ArrayBuffer]'){dest.write(Buffer.from(body));dest.end();}else if(ArrayBuffer.isView(body)){dest.write(Buffer.from(body.buffer,body.byteOffset,body.byteLength));dest.end();}else{body.pipe(dest);}}Body.Promise=global.Promise;const invalidTokenRegex=/[^\^_`a-zA-Z\-0-9!#$%&'*+.|~]/;const invalidHeaderCharRegex=/[^\t\x20-\x7e\x80-\xff]/;function validateName(name){name=`${name}`;if(invalidTokenRegex.test(name)){throw new TypeError(`${name} is not a legal HTTP header name`);}}function validateValue(value){value=`${value}`;if(invalidHeaderCharRegex.test(value)){throw new TypeError(`${value} is not a legal HTTP header value`);}}function find(map,name){name=name.toLowerCase();for(const key in map){if(key.toLowerCase()===name){return key;}}return undefined;}const MAP=Symbol('map');class Headers{constructor(){let init=arguments.length>0&&arguments[0]!==undefined?arguments[0]:undefined;this[MAP]=Object.create(null);if(init instanceof Headers){const rawHeaders=init.raw();const headerNames=Object.keys(rawHeaders);for(const headerName of headerNames){for(const value of rawHeaders[headerName]){this.append(headerName,value);}}return;}if(init==null);else if(typeof init==='object'){const method=init[Symbol.iterator];if(method!=null){if(typeof method!=='function'){throw new TypeError('Header pairs must be iterable');}const pairs=[];for(const pair of init){if(typeof pair!=='object'||typeof pair[Symbol.iterator]!=='function'){throw new TypeError('Each header pair must be iterable');}pairs.push(Array.from(pair));}for(const pair of pairs){if(pair.length!==2){throw new TypeError('Each header pair must be a name/value tuple');}this.append(pair[0],pair[1]);}}else{for(const key of Object.keys(init)){const value=init[key];this.append(key,value);}}}else{throw new TypeError('Provided initializer must be an object');}}get(name){name=`${name}`;validateName(name);const key=find(this[MAP],name);if(key===undefined){return null;}return this[MAP][key].join(', ');}forEach(callback){let thisArg=arguments.length>1&&arguments[1]!==undefined?arguments[1]:undefined;let pairs=getHeaders(this);let i=0;while(i<pairs.length){var _pairs$i=pairs[i];const name=_pairs$i[0],value=_pairs$i[1];callback.call(thisArg,value,name,this);pairs=getHeaders(this);i++;}}set(name,value){name=`${name}`;value=`${value}`;validateName(name);validateValue(value);const key=find(this[MAP],name);this[MAP][key!==undefined?key:name]=[value];}append(name,value){name=`${name}`;value=`${value}`;validateName(name);validateValue(value);const key=find(this[MAP],name);if(key!==undefined){this[MAP][key].push(value);}else{this[MAP][name]=[value];}}has(name){name=`${name}`;validateName(name);return find(this[MAP],name)!==undefined;}delete(name){name=`${name}`;validateName(name);const key=find(this[MAP],name);if(key!==undefined){delete this[MAP][key];}}raw(){return this[MAP];}keys(){return createHeadersIterator(this,'key');}values(){return createHeadersIterator(this,'value');}[Symbol.iterator](){return createHeadersIterator(this,'key+value');}}Headers.prototype.entries=Headers.prototype[Symbol.iterator];Object.defineProperty(Headers.prototype,Symbol.toStringTag,{value:'Headers',writable:false,enumerable:false,configurable:true});Object.defineProperties(Headers.prototype,{get:{enumerable:true},forEach:{enumerable:true},set:{enumerable:true},append:{enumerable:true},has:{enumerable:true},delete:{enumerable:true},keys:{enumerable:true},values:{enumerable:true},entries:{enumerable:true}});function getHeaders(headers){let kind=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'key+value';const keys=Object.keys(headers[MAP]).sort();return keys.map(kind==='key'?function(k){return k.toLowerCase();}:kind==='value'?function(k){return headers[MAP][k].join(', ');}:function(k){return[k.toLowerCase(),headers[MAP][k].join(', ')];});}const INTERNAL=Symbol('internal');function createHeadersIterator(target,kind){const iterator=Object.create(HeadersIteratorPrototype);iterator[INTERNAL]={target,kind,index:0};return iterator;}const HeadersIteratorPrototype=Object.setPrototypeOf({next(){if(!this||Object.getPrototypeOf(this)!==HeadersIteratorPrototype){throw new TypeError('Value of `this` is not a HeadersIterator');}var _INTERNAL=this[INTERNAL];const target=_INTERNAL.target,kind=_INTERNAL.kind,index=_INTERNAL.index;const values=getHeaders(target,kind);const len=values.length;if(index>=len){return{value:undefined,done:true};}this[INTERNAL].index=index+1;return{value:values[index],done:false};}},Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]())));Object.defineProperty(HeadersIteratorPrototype,Symbol.toStringTag,{value:'HeadersIterator',writable:false,enumerable:false,configurable:true});function exportNodeCompatibleHeaders(headers){const obj=Object.assign({__proto__:null},headers[MAP]);const hostHeaderKey=find(headers[MAP],'Host');if(hostHeaderKey!==undefined){obj[hostHeaderKey]=obj[hostHeaderKey][0];}return obj;}function createHeadersLenient(obj){const headers=new Headers();for(const name of Object.keys(obj)){if(invalidTokenRegex.test(name)){continue;}if(Array.isArray(obj[name])){for(const val of obj[name]){if(invalidHeaderCharRegex.test(val)){continue;}if(headers[MAP][name]===undefined){headers[MAP][name]=[val];}else{headers[MAP][name].push(val);}}}else if(!invalidHeaderCharRegex.test(obj[name])){headers[MAP][name]=[obj[name]];}}return headers;}const INTERNALS$1=Symbol('Response internals');const STATUS_CODES=http.STATUS_CODES;class Response{constructor(){let body=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;let opts=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};Body.call(this,body,opts);const status=opts.status||200;this[INTERNALS$1]={url:opts.url,status,statusText:opts.statusText||STATUS_CODES[status],headers:new Headers(opts.headers)};}get url(){return this[INTERNALS$1].url;}get status(){return this[INTERNALS$1].status;}get ok(){return this[INTERNALS$1].status>=200&&this[INTERNALS$1].status<300;}get statusText(){return this[INTERNALS$1].statusText;}get headers(){return this[INTERNALS$1].headers;}clone(){return new Response(clone(this),{url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok});}}Body.mixIn(Response.prototype);Object.defineProperties(Response.prototype,{url:{enumerable:true},status:{enumerable:true},ok:{enumerable:true},statusText:{enumerable:true},headers:{enumerable:true},clone:{enumerable:true}});Object.defineProperty(Response.prototype,Symbol.toStringTag,{value:'Response',writable:false,enumerable:false,configurable:true});const INTERNALS$2=Symbol('Request internals');const parse_url=Url.parse;const format_url=Url.format;const streamDestructionSupported='destroy'in Stream.Readable.prototype;function isRequest(input){return typeof input==='object'&&typeof input[INTERNALS$2]==='object';}function isAbortSignal(signal){const proto=signal&&typeof signal==='object'&&Object.getPrototypeOf(signal);return!!(proto&&proto.constructor.name==='AbortSignal');}class Request{constructor(input){let init=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};let parsedURL;if(!isRequest(input)){if(input&&input.href){parsedURL=parse_url(input.href);}else{parsedURL=parse_url(`${input}`);}input={};}else{parsedURL=parse_url(input.url);}let method=init.method||input.method||'GET';method=method.toUpperCase();if((init.body!=null||isRequest(input)&&input.body!==null)&&(method==='GET'||method==='HEAD')){throw new TypeError('Request with GET/HEAD method cannot have body');}let inputBody=init.body!=null?init.body:isRequest(input)&&input.body!==null?clone(input):null;Body.call(this,inputBody,{timeout:init.timeout||input.timeout||0,size:init.size||input.size||0});const headers=new Headers(init.headers||input.headers||{});if(init.body!=null){const contentType=extractContentType(this);if(contentType!==null&&!headers.has('Content-Type')){headers.append('Content-Type',contentType);}}let signal=isRequest(input)?input.signal:null;if('signal'in init)signal=init.signal;if(signal!=null&&!isAbortSignal(signal)){throw new TypeError('Expected signal to be an instanceof AbortSignal');}this[INTERNALS$2]={method,redirect:init.redirect||input.redirect||'follow',headers,parsedURL,signal};this.follow=init.follow!==undefined?init.follow:input.follow!==undefined?input.follow:20;this.compress=init.compress!==undefined?init.compress:input.compress!==undefined?input.compress:true;this.counter=init.counter||input.counter||0;this.agent=init.agent||input.agent;}get method(){return this[INTERNALS$2].method;}get url(){return format_url(this[INTERNALS$2].parsedURL);}get headers(){return this[INTERNALS$2].headers;}get redirect(){return this[INTERNALS$2].redirect;}get signal(){return this[INTERNALS$2].signal;}clone(){return new Request(this);}}Body.mixIn(Request.prototype);Object.defineProperty(Request.prototype,Symbol.toStringTag,{value:'Request',writable:false,enumerable:false,configurable:true});Object.defineProperties(Request.prototype,{method:{enumerable:true},url:{enumerable:true},headers:{enumerable:true},redirect:{enumerable:true},clone:{enumerable:true},signal:{enumerable:true}});function getNodeRequestOptions(request){const parsedURL=request[INTERNALS$2].parsedURL;const headers=new Headers(request[INTERNALS$2].headers);if(!headers.has('Accept')){headers.set('Accept','*/*');}if(!parsedURL.protocol||!parsedURL.hostname){throw new TypeError('Only absolute URLs are supported');}if(!/^https?:$/.test(parsedURL.protocol)){throw new TypeError('Only HTTP(S) protocols are supported');}if(request.signal&&request.body instanceof Stream.Readable&&!streamDestructionSupported){throw new Error('Cancellation of streamed requests with AbortSignal is not supported in node < 8');}let contentLengthValue=null;if(request.body==null&&/^(POST|PUT)$/i.test(request.method)){contentLengthValue='0';}if(request.body!=null){const totalBytes=getTotalBytes(request);if(typeof totalBytes==='number'){contentLengthValue=String(totalBytes);}}if(contentLengthValue){headers.set('Content-Length',contentLengthValue);}if(!headers.has('User-Agent')){headers.set('User-Agent','node-fetch/1.0 (+https://github.com/bitinn/node-fetch)');}if(request.compress&&!headers.has('Accept-Encoding')){headers.set('Accept-Encoding','gzip,deflate');}if(!headers.has('Connection')&&!request.agent){headers.set('Connection','close');}return Object.assign({},parsedURL,{method:request.method,headers:exportNodeCompatibleHeaders(headers),agent:request.agent});}function AbortError(message){Error.call(this,message);this.type='aborted';this.message=message;Error.captureStackTrace(this,this.constructor);}AbortError.prototype=Object.create(Error.prototype);AbortError.prototype.constructor=AbortError;AbortError.prototype.name='AbortError';const PassThrough$1=Stream.PassThrough;const resolve_url=Url.resolve;function fetch(url,opts){if(!fetch.Promise){throw new Error('native promise missing, set fetch.Promise to your favorite alternative');}Body.Promise=fetch.Promise;return new fetch.Promise(function(resolve,reject){const request=new Request(url,opts);const options=getNodeRequestOptions(request);const send=(options.protocol==='https:'?https:http).request;const signal=request.signal;let response=null;const abort=function abort(){let error=new AbortError('The user aborted a request.');reject(error);if(request.body&&request.body instanceof Stream.Readable){request.body.destroy(error);}if(!response||!response.body)return;response.body.emit('error',error);};if(signal&&signal.aborted){abort();return;}const abortAndFinalize=function abortAndFinalize(){abort();finalize();};const req=send(options);let reqTimeout;if(signal){signal.addEventListener('abort',abortAndFinalize);}function finalize(){req.abort();if(signal)signal.removeEventListener('abort',abortAndFinalize);clearTimeout(reqTimeout);}if(request.timeout){req.once('socket',function(socket){reqTimeout=setTimeout(function(){reject(new FetchError(`network timeout at: ${request.url}`,'request-timeout'));finalize();},request.timeout);});}req.on('error',function(err){reject(new FetchError(`request to ${request.url} failed, reason: ${err.message}`,'system',err));finalize();});req.on('response',function(res){clearTimeout(reqTimeout);const headers=createHeadersLenient(res.headers);if(fetch.isRedirect(res.statusCode)){const location=headers.get('Location');const locationURL=location===null?null:resolve_url(request.url,location);switch(request.redirect){case'error':reject(new FetchError(`redirect mode is set to error: ${request.url}`,'no-redirect'));finalize();return;case'manual':if(locationURL!==null){try{headers.set('Location',locationURL);}catch(err){reject(err);}}break;case'follow':if(locationURL===null){break;}if(request.counter>=request.follow){reject(new FetchError(`maximum redirect reached at: ${request.url}`,'max-redirect'));finalize();return;}const requestOpts={headers:new Headers(request.headers),follow:request.follow,counter:request.counter+1,agent:request.agent,compress:request.compress,method:request.method,body:request.body,signal:request.signal};if(res.statusCode!==303&&request.body&&getTotalBytes(request)===null){reject(new FetchError('Cannot follow redirect with body being a readable stream','unsupported-redirect'));finalize();return;}if(res.statusCode===303||(res.statusCode===301||res.statusCode===302)&&request.method==='POST'){requestOpts.method='GET';requestOpts.body=undefined;requestOpts.headers.delete('content-length');}resolve(fetch(new Request(locationURL,requestOpts)));finalize();return;}}res.once('end',function(){if(signal)signal.removeEventListener('abort',abortAndFinalize);});let body=res.pipe(new PassThrough$1());const response_options={url:request.url,status:res.statusCode,statusText:res.statusMessage,headers:headers,size:request.size,timeout:request.timeout};const codings=headers.get('Content-Encoding');if(!request.compress||request.method==='HEAD'||codings===null||res.statusCode===204||res.statusCode===304){response=new Response(body,response_options);resolve(response);return;}const zlibOptions={flush:zlib.Z_SYNC_FLUSH,finishFlush:zlib.Z_SYNC_FLUSH};if(codings=='gzip'||codings=='x-gzip'){body=body.pipe(zlib.createGunzip(zlibOptions));response=new Response(body,response_options);resolve(response);return;}if(codings=='deflate'||codings=='x-deflate'){const raw=res.pipe(new PassThrough$1());raw.once('data',function(chunk){if((chunk[0]&0x0F)===0x08){body=body.pipe(zlib.createInflate());}else{body=body.pipe(zlib.createInflateRaw());}response=new Response(body,response_options);resolve(response);});return;}response=new Response(body,response_options);resolve(response);});writeToStream(req,request);});}fetch.isRedirect=function(code){return code===301||code===302||code===303||code===307||code===308;};fetch.Promise=global.Promise;module.exports=exports=fetch;Object.defineProperty(exports,"__esModule",{value:true});exports.default=exports;exports.Headers=Headers;exports.Request=Request;exports.Response=Response;exports.FetchError=FetchError;},7866:function(module,__unusedexports,__webpack_require__){var encodings=__webpack_require__(5396);module.exports=Codec;function Codec(opts){if(!(this instanceof Codec)){return new Codec(opts);}this.opts=opts||{};this.encodings=encodings;}Codec.prototype._encoding=function(encoding){if(typeof encoding==='string')encoding=encodings[encoding];if(!encoding)encoding=encodings.id;return encoding;};Codec.prototype._keyEncoding=function(opts,batchOpts){return this._encoding(batchOpts&&batchOpts.keyEncoding||opts&&opts.keyEncoding||this.opts.keyEncoding);};Codec.prototype._valueEncoding=function(opts,batchOpts){return this._encoding(batchOpts&&(batchOpts.valueEncoding||batchOpts.encoding)||opts&&(opts.valueEncoding||opts.encoding)||this.opts.valueEncoding||this.opts.encoding);};Codec.prototype.encodeKey=function(key,opts,batchOpts){return this._keyEncoding(opts,batchOpts).encode(key);};Codec.prototype.encodeValue=function(value,opts,batchOpts){return this._valueEncoding(opts,batchOpts).encode(value);};Codec.prototype.decodeKey=function(key,opts){return this._keyEncoding(opts).decode(key);};Codec.prototype.decodeValue=function(value,opts){return this._valueEncoding(opts).decode(value);};Codec.prototype.encodeBatch=function(ops,opts){var self=this;return ops.map(function(_op){var op={type:_op.type,key:self.encodeKey(_op.key,opts,_op)};if(self.keyAsBuffer(opts,_op))op.keyEncoding='binary';if(_op.prefix)op.prefix=_op.prefix;if('value'in _op){op.value=self.encodeValue(_op.value,opts,_op);if(self.valueAsBuffer(opts,_op))op.valueEncoding='binary';}return op;});};var ltgtKeys=['lt','gt','lte','gte','start','end'];Codec.prototype.encodeLtgt=function(ltgt){var self=this;var ret={};Object.keys(ltgt).forEach(function(key){ret[key]=ltgtKeys.indexOf(key)>-1?self.encodeKey(ltgt[key],ltgt):ltgt[key];});return ret;};Codec.prototype.createStreamDecoder=function(opts){var self=this;if(opts.keys&&opts.values){return function(key,value){return{key:self.decodeKey(key,opts),value:self.decodeValue(value,opts)};};}else if(opts.keys){return function(key){return self.decodeKey(key,opts);};}else if(opts.values){return function(_,value){return self.decodeValue(value,opts);};}else{return function(){};}};Codec.prototype.keyAsBuffer=function(opts){return this._keyEncoding(opts).buffer;};Codec.prototype.valueAsBuffer=function(opts){return this._valueEncoding(opts).buffer;};},7868:function(module,exports,__webpack_require__){var parser=__webpack_require__(3837);var Emitter=__webpack_require__(3649);var toArray=__webpack_require__(4513);var on=__webpack_require__(8051);var bind=__webpack_require__(4628);var debug=__webpack_require__(9771)('socket.io-client:socket');var parseqs=__webpack_require__(2887);var hasBin=__webpack_require__(9096);module.exports=exports=Socket;var events={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1};var emit=Emitter.prototype.emit;function Socket(io,nsp,opts){this.io=io;this.nsp=nsp;this.json=this;this.ids=0;this.acks={};this.receiveBuffer=[];this.sendBuffer=[];this.connected=false;this.disconnected=true;this.flags={};if(opts&&opts.query){this.query=opts.query;}if(this.io.autoConnect)this.open();}Emitter(Socket.prototype);Socket.prototype.subEvents=function(){if(this.subs)return;var io=this.io;this.subs=[on(io,'open',bind(this,'onopen')),on(io,'packet',bind(this,'onpacket')),on(io,'close',bind(this,'onclose'))];};Socket.prototype.open=Socket.prototype.connect=function(){if(this.connected)return this;this.subEvents();this.io.open();if('open'===this.io.readyState)this.onopen();this.emit('connecting');return this;};Socket.prototype.send=function(){var args=toArray(arguments);args.unshift('message');this.emit.apply(this,args);return this;};Socket.prototype.emit=function(ev){if(events.hasOwnProperty(ev)){emit.apply(this,arguments);return this;}var args=toArray(arguments);var packet={type:(this.flags.binary!==undefined?this.flags.binary:hasBin(args))?parser.BINARY_EVENT:parser.EVENT,data:args};packet.options={};packet.options.compress=!this.flags||false!==this.flags.compress;if('function'===typeof args[args.length-1]){debug('emitting packet with ack id %d',this.ids);this.acks[this.ids]=args.pop();packet.id=this.ids++;}if(this.connected){this.packet(packet);}else{this.sendBuffer.push(packet);}this.flags={};return this;};Socket.prototype.packet=function(packet){packet.nsp=this.nsp;this.io.packet(packet);};Socket.prototype.onopen=function(){debug('transport is open - connecting');if('/'!==this.nsp){if(this.query){var query=typeof this.query==='object'?parseqs.encode(this.query):this.query;debug('sending connect packet with query %s',query);this.packet({type:parser.CONNECT,query:query});}else{this.packet({type:parser.CONNECT});}}};Socket.prototype.onclose=function(reason){debug('close (%s)',reason);this.connected=false;this.disconnected=true;delete this.id;this.emit('disconnect',reason);};Socket.prototype.onpacket=function(packet){var sameNamespace=packet.nsp===this.nsp;var rootNamespaceError=packet.type===parser.ERROR&&packet.nsp==='/';if(!sameNamespace&&!rootNamespaceError)return;switch(packet.type){case parser.CONNECT:this.onconnect();break;case parser.EVENT:this.onevent(packet);break;case parser.BINARY_EVENT:this.onevent(packet);break;case parser.ACK:this.onack(packet);break;case parser.BINARY_ACK:this.onack(packet);break;case parser.DISCONNECT:this.ondisconnect();break;case parser.ERROR:this.emit('error',packet.data);break;}};Socket.prototype.onevent=function(packet){var args=packet.data||[];debug('emitting event %j',args);if(null!=packet.id){debug('attaching ack callback to event');args.push(this.ack(packet.id));}if(this.connected){emit.apply(this,args);}else{this.receiveBuffer.push(args);}};Socket.prototype.ack=function(id){var self=this;var sent=false;return function(){if(sent)return;sent=true;var args=toArray(arguments);debug('sending ack %j',args);self.packet({type:hasBin(args)?parser.BINARY_ACK:parser.ACK,id:id,data:args});};};Socket.prototype.onack=function(packet){var ack=this.acks[packet.id];if('function'===typeof ack){debug('calling ack %s with %j',packet.id,packet.data);ack.apply(this,packet.data);delete this.acks[packet.id];}else{debug('bad ack %s',packet.id);}};Socket.prototype.onconnect=function(){this.connected=true;this.disconnected=false;this.emit('connect');this.emitBuffered();};Socket.prototype.emitBuffered=function(){var i;for(i=0;i<this.receiveBuffer.length;i++){emit.apply(this,this.receiveBuffer[i]);}this.receiveBuffer=[];for(i=0;i<this.sendBuffer.length;i++){this.packet(this.sendBuffer[i]);}this.sendBuffer=[];};Socket.prototype.ondisconnect=function(){debug('server disconnect (%s)',this.nsp);this.destroy();this.onclose('io server disconnect');};Socket.prototype.destroy=function(){if(this.subs){for(var i=0;i<this.subs.length;i++){this.subs[i].destroy();}this.subs=null;}this.io.destroy(this);};Socket.prototype.close=Socket.prototype.disconnect=function(){if(this.connected){debug('performing disconnect (%s)',this.nsp);this.packet({type:parser.DISCONNECT});}this.destroy();if(this.connected){this.onclose('io client disconnect');}return this;};Socket.prototype.compress=function(compress){this.flags.compress=compress;return this;};Socket.prototype.binary=function(binary){this.flags.binary=binary;return this;};},7874:function(__unusedmodule,exports,__webpack_require__){"use strict";var utils=__webpack_require__(1702);var assert=__webpack_require__(809);function BlockHash(){this.pending=null;this.pendingTotal=0;this.blockSize=this.constructor.blockSize;this.outSize=this.constructor.outSize;this.hmacStrength=this.constructor.hmacStrength;this.padLength=this.constructor.padLength/8;this.endian='big';this._delta8=this.blockSize/8;this._delta32=this.blockSize/32;}exports.BlockHash=BlockHash;BlockHash.prototype.update=function update(msg,enc){msg=utils.toArray(msg,enc);if(!this.pending)this.pending=msg;else this.pending=this.pending.concat(msg);this.pendingTotal+=msg.length;if(this.pending.length>=this._delta8){msg=this.pending;var r=msg.length%this._delta8;this.pending=msg.slice(msg.length-r,msg.length);if(this.pending.length===0)this.pending=null;msg=utils.join32(msg,0,msg.length-r,this.endian);for(var i=0;i<msg.length;i+=this._delta32)this._update(msg,i,i+this._delta32);}return this;};BlockHash.prototype.digest=function digest(enc){this.update(this._pad());assert(this.pending===null);return this._digest(enc);};BlockHash.prototype._pad=function pad(){var len=this.pendingTotal;var bytes=this._delta8;var k=bytes-(len+this.padLength)%bytes;var res=new Array(k+this.padLength);res[0]=0x80;for(var i=1;i<k;i++)res[i]=0;len<<=3;if(this.endian==='big'){for(var t=8;t<this.padLength;t++)res[i++]=0;res[i++]=0;res[i++]=0;res[i++]=0;res[i++]=0;res[i++]=len>>>24&0xff;res[i++]=len>>>16&0xff;res[i++]=len>>>8&0xff;res[i++]=len&0xff;}else{res[i++]=len&0xff;res[i++]=len>>>8&0xff;res[i++]=len>>>16&0xff;res[i++]=len>>>24&0xff;res[i++]=0;res[i++]=0;res[i++]=0;res[i++]=0;for(t=8;t<this.padLength;t++)res[i++]=0;}return res;};},7891:function(__unusedmodule,exports,__webpack_require__){"use strict";exports.ethAccountSnapshot=__webpack_require__(1300);exports.ethBlock=__webpack_require__(289);exports.ethBlockList=__webpack_require__(7434);exports.ethStateTrie=__webpack_require__(3710);exports.ethStorageTrie=__webpack_require__(5696);exports.ethTx=__webpack_require__(4394);exports.ethTxTrie=__webpack_require__(2324);},7892:function(module,__unusedexports,__webpack_require__){var forge=__webpack_require__(7938);__webpack_require__(5947);__webpack_require__(1214);var asn1=forge.asn1;var p7v=module.exports=forge.pkcs7asn1=forge.pkcs7asn1||{};forge.pkcs7=forge.pkcs7||{};forge.pkcs7.asn1=p7v;var contentInfoValidator={name:'ContentInfo',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:true,value:[{name:'ContentInfo.ContentType',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.OID,constructed:false,capture:'contentType'},{name:'ContentInfo.content',tagClass:asn1.Class.CONTEXT_SPECIFIC,type:0,constructed:true,optional:true,captureAsn1:'content'}]};p7v.contentInfoValidator=contentInfoValidator;var encryptedContentInfoValidator={name:'EncryptedContentInfo',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:true,value:[{name:'EncryptedContentInfo.contentType',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.OID,constructed:false,capture:'contentType'},{name:'EncryptedContentInfo.contentEncryptionAlgorithm',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:true,value:[{name:'EncryptedContentInfo.contentEncryptionAlgorithm.algorithm',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.OID,constructed:false,capture:'encAlgorithm'},{name:'EncryptedContentInfo.contentEncryptionAlgorithm.parameter',tagClass:asn1.Class.UNIVERSAL,captureAsn1:'encParameter'}]},{name:'EncryptedContentInfo.encryptedContent',tagClass:asn1.Class.CONTEXT_SPECIFIC,type:0,capture:'encryptedContent',captureAsn1:'encryptedContentAsn1'}]};p7v.envelopedDataValidator={name:'EnvelopedData',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:true,value:[{name:'EnvelopedData.Version',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.INTEGER,constructed:false,capture:'version'},{name:'EnvelopedData.RecipientInfos',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SET,constructed:true,captureAsn1:'recipientInfos'}].concat(encryptedContentInfoValidator)};p7v.encryptedDataValidator={name:'EncryptedData',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:true,value:[{name:'EncryptedData.Version',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.INTEGER,constructed:false,capture:'version'}].concat(encryptedContentInfoValidator)};var signerValidator={name:'SignerInfo',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:true,value:[{name:'SignerInfo.version',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.INTEGER,constructed:false},{name:'SignerInfo.issuerAndSerialNumber',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:true,value:[{name:'SignerInfo.issuerAndSerialNumber.issuer',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:true,captureAsn1:'issuer'},{name:'SignerInfo.issuerAndSerialNumber.serialNumber',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.INTEGER,constructed:false,capture:'serial'}]},{name:'SignerInfo.digestAlgorithm',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:true,value:[{name:'SignerInfo.digestAlgorithm.algorithm',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.OID,constructed:false,capture:'digestAlgorithm'},{name:'SignerInfo.digestAlgorithm.parameter',tagClass:asn1.Class.UNIVERSAL,constructed:false,captureAsn1:'digestParameter',optional:true}]},{name:'SignerInfo.authenticatedAttributes',tagClass:asn1.Class.CONTEXT_SPECIFIC,type:0,constructed:true,optional:true,capture:'authenticatedAttributes'},{name:'SignerInfo.digestEncryptionAlgorithm',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:true,capture:'signatureAlgorithm'},{name:'SignerInfo.encryptedDigest',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.OCTETSTRING,constructed:false,capture:'signature'},{name:'SignerInfo.unauthenticatedAttributes',tagClass:asn1.Class.CONTEXT_SPECIFIC,type:1,constructed:true,optional:true,capture:'unauthenticatedAttributes'}]};p7v.signedDataValidator={name:'SignedData',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:true,value:[{name:'SignedData.Version',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.INTEGER,constructed:false,capture:'version'},{name:'SignedData.DigestAlgorithms',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SET,constructed:true,captureAsn1:'digestAlgorithms'},contentInfoValidator,{name:'SignedData.Certificates',tagClass:asn1.Class.CONTEXT_SPECIFIC,type:0,optional:true,captureAsn1:'certificates'},{name:'SignedData.CertificateRevocationLists',tagClass:asn1.Class.CONTEXT_SPECIFIC,type:1,optional:true,captureAsn1:'crls'},{name:'SignedData.SignerInfos',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SET,capture:'signerInfos',optional:true,value:[signerValidator]}]};p7v.recipientInfoValidator={name:'RecipientInfo',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:true,value:[{name:'RecipientInfo.version',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.INTEGER,constructed:false,capture:'version'},{name:'RecipientInfo.issuerAndSerial',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:true,value:[{name:'RecipientInfo.issuerAndSerial.issuer',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:true,captureAsn1:'issuer'},{name:'RecipientInfo.issuerAndSerial.serialNumber',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.INTEGER,constructed:false,capture:'serial'}]},{name:'RecipientInfo.keyEncryptionAlgorithm',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:true,value:[{name:'RecipientInfo.keyEncryptionAlgorithm.algorithm',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.OID,constructed:false,capture:'encAlgorithm'},{name:'RecipientInfo.keyEncryptionAlgorithm.parameter',tagClass:asn1.Class.UNIVERSAL,constructed:false,captureAsn1:'encParameter'}]},{name:'RecipientInfo.encryptedKey',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.OCTETSTRING,constructed:false,capture:'encKey'}]};},7896:function(module,__unusedexports,__webpack_require__){"use strict";var pna=__webpack_require__(88);var objectKeys=Object.keys||function(obj){var keys=[];for(var key in obj){keys.push(key);}return keys;};module.exports=Duplex;var util=__webpack_require__(5548);util.inherits=__webpack_require__(92);var Readable=__webpack_require__(6891);var Writable=__webpack_require__(7502);util.inherits(Duplex,Readable);{var keys=objectKeys(Writable.prototype);for(var v=0;v<keys.length;v++){var method=keys[v];if(!Duplex.prototype[method])Duplex.prototype[method]=Writable.prototype[method];}}function Duplex(options){if(!(this instanceof Duplex))return new Duplex(options);Readable.call(this,options);Writable.call(this,options);if(options&&options.readable===false)this.readable=false;if(options&&options.writable===false)this.writable=false;this.allowHalfOpen=true;if(options&&options.allowHalfOpen===false)this.allowHalfOpen=false;this.once('end',onend);}Object.defineProperty(Duplex.prototype,'writableHighWaterMark',{enumerable:false,get:function(){return this._writableState.highWaterMark;}});function onend(){if(this.allowHalfOpen||this._writableState.ended)return;pna.nextTick(onEndNT,this);}function onEndNT(self){self.end();}Object.defineProperty(Duplex.prototype,'destroyed',{get:function(){if(this._readableState===undefined||this._writableState===undefined){return false;}return this._readableState.destroyed&&this._writableState.destroyed;},set:function(value){if(this._readableState===undefined||this._writableState===undefined){return;}this._readableState.destroyed=value;this._writableState.destroyed=value;}});Duplex.prototype._destroy=function(err,cb){this.push(null);this.end();pna.nextTick(cb,err);};},7911:function(module,exports,__webpack_require__){"use strict";const PeerId=__webpack_require__(1832);const PeerInfo=__webpack_require__(9265);const multiaddr=__webpack_require__(5920);const mafmt=__webpack_require__(7511);const EventEmitter=__webpack_require__(4859).EventEmitter;const debug=__webpack_require__(746);const nextTick=__webpack_require__(7173);const log=debug('libp2p:bootstrap');log.error=debug('libp2p:bootstrap:error');function isIPFS(addr){try{return mafmt.IPFS.matches(addr);}catch(e){return false;}}class Bootstrap extends EventEmitter{constructor(options){super();this._list=options.list;this._interval=options.interval||10000;this._timer=null;}start(callback){if(this._timer){return nextTick(()=>callback());}this._timer=setInterval(()=>this._discoverBootstrapPeers(),this._interval);nextTick(()=>{callback();this._discoverBootstrapPeers();});}_discoverBootstrapPeers(){this._list.forEach(candidate=>{if(!isIPFS(candidate)){return log.error('Invalid multiaddr');}const ma=multiaddr(candidate);const peerId=PeerId.createFromB58String(ma.getPeerId());PeerInfo.create(peerId,(err,peerInfo)=>{if(err){return log.error('Invalid bootstrap peer id',err);}peerInfo.multiaddrs.add(ma);this.emit('peer',peerInfo);});});}stop(callback){nextTick(callback);if(this._timer){clearInterval(this._timer);this._timer=null;}}}exports=module.exports=Bootstrap;exports.tag='bootstrap';},7913:function(module,__unusedexports,__webpack_require__){"use strict";const toStream=__webpack_require__(864);module.exports=function(self){return(ipfsPath,options)=>toStream.source(self.catPullStream(ipfsPath,options));};},7914:function(module,__unusedexports,__webpack_require__){"use strict";const core=__webpack_require__(4184);const ShardingStore=core.ShardingDatastore;const Key=__webpack_require__(759).Key;const base32=__webpack_require__(7526);const Block=__webpack_require__(6505);const setImmediate=__webpack_require__(7368);const reject=__webpack_require__(3901);const CID=__webpack_require__(9339);const pull=__webpack_require__(2885);const keyFromBuffer=rawKey=>{const enc=new base32.Encoder();return new Key('/'+enc.write(rawKey).finalize(),false);};const cidToDsKey=cid=>{return keyFromBuffer(cid.buffer);};module.exports=(filestore,options,callback)=>{maybeWithSharding(filestore,options,(err,store)=>{if(err){return callback(err);}callback(null,createBaseStore(store));});};function maybeWithSharding(filestore,options,callback){if(options.sharding){const shard=new core.shard.NextToLast(2);ShardingStore.createOrOpen(filestore,shard,callback);}else{setImmediate(()=>callback(null,filestore));}}function createBaseStore(store){return{query(query,callback){pull(store.query(query),pull.collect(callback));},get(cid,callback){if(!CID.isCID(cid)){return setImmediate(()=>{callback(new Error('Not a valid cid'));});}const key=cidToDsKey(cid);store.get(key,(err,blockData)=>{if(err){if(err.code==='ERR_NOT_FOUND'){const otherCid=cidToOtherVersion(cid);if(!otherCid)return callback(err);const otherKey=cidToDsKey(otherCid);return store.get(otherKey,(err,blockData)=>{if(err)return callback(err);store.put(key,blockData,err=>{if(err)return callback(err);callback(null,new Block(blockData,cid));});});}return callback(err);}callback(null,new Block(blockData,cid));});},put(block,callback){if(!Block.isBlock(block)){return setImmediate(()=>{callback(new Error('invalid block'));});}const k=cidToDsKey(block.cid);store.has(k,(err,exists)=>{if(err){return callback(err);}if(exists){return callback();}store.put(k,block.data,callback);});},putMany(blocks,callback){const keys=blocks.map(b=>({key:cidToDsKey(b.cid),block:b}));const batch=store.batch();reject(keys,(k,cb)=>store.has(k.key,cb),(err,newKeys)=>{if(err){return callback(err);}newKeys.forEach(k=>{batch.put(k.key,k.block.data);});batch.commit(callback);});},has(cid,callback){if(!CID.isCID(cid)){return setImmediate(()=>{callback(new Error('Not a valid cid'));});}store.has(cidToDsKey(cid),(err,exists)=>{if(err)return callback(err);if(exists)return callback(null,true);const otherCid=cidToOtherVersion(cid);if(!otherCid)return callback(null,false);store.has(cidToDsKey(otherCid),callback);});},delete(cid,callback){if(!CID.isCID(cid)){return setImmediate(()=>{callback(new Error('Not a valid cid'));});}store.delete(cidToDsKey(cid),callback);},close(callback){store.close(callback);}};}function cidToOtherVersion(cid){try{return cid.version===0?cid.toV1():cid.toV0();}catch(err){return null;}}},7917:function(module,__unusedexports,__webpack_require__){var bufferIndexOf=__webpack_require__(6348);module.exports=function(buf,splitBuf,includeDelim){var search=-1,lines=[],move=includeDelim?splitBuf.length:0;while((search=bufferIndexOf(buf,splitBuf))>-1){lines.push(buf.slice(0,search+move));buf=buf.slice(search+splitBuf.length,buf.length);}lines.push(buf);return lines;};},7925:function(module){module.exports=wrappy;function wrappy(fn,cb){if(fn&&cb)return wrappy(fn)(cb);if(typeof fn!=='function')throw new TypeError('need wrapper function');Object.keys(fn).forEach(function(k){wrapper[k]=fn[k];});return wrapper;function wrapper(){var args=new Array(arguments.length);for(var i=0;i<args.length;i++){args[i]=arguments[i];}var ret=fn.apply(this,args);var cb=args[args.length-1];if(typeof ret==='function'&&ret!==cb){Object.keys(cb).forEach(function(k){ret[k]=cb[k];});}return ret;}}},7927:function(module){function AbstractChainedBatch(db){this._db=db;this._operations=[];this._written=false;}AbstractChainedBatch.prototype._serializeKey=function(key){return this._db._serializeKey(key);};AbstractChainedBatch.prototype._serializeValue=function(value){return this._db._serializeValue(value);};AbstractChainedBatch.prototype._checkWritten=function(){if(this._written){throw new Error('write() already called on this batch');}};AbstractChainedBatch.prototype.put=function(key,value){this._checkWritten();var err=this._db._checkKey(key,'key');if(err){throw err;}key=this._serializeKey(key);value=this._serializeValue(value);this._put(key,value);return this;};AbstractChainedBatch.prototype._put=function(key,value){this._operations.push({type:'put',key:key,value:value});};AbstractChainedBatch.prototype.del=function(key){this._checkWritten();var err=this._db._checkKey(key,'key');if(err){throw err;}key=this._serializeKey(key);this._del(key);return this;};AbstractChainedBatch.prototype._del=function(key){this._operations.push({type:'del',key:key});};AbstractChainedBatch.prototype.clear=function(){this._checkWritten();this._operations=[];this._clear();return this;};AbstractChainedBatch.prototype._clear=function noop(){};AbstractChainedBatch.prototype.write=function(options,callback){this._checkWritten();if(typeof options==='function'){callback=options;}if(typeof callback!=='function'){throw new Error('write() requires a callback argument');}if(typeof options!=='object'){options={};}this._written=true;if(typeof this._write==='function'){return this._write(callback);}if(typeof this._db._batch==='function'){return this._db._batch(this._operations,options,callback);}process.nextTick(callback);};module.exports=AbstractChainedBatch;},7938:function(module){module.exports={options:{usePureJavaScript:false}};},7941:function(module){"use strict";module.exports=class{constructor(key,path,parent,reference){this.key=key;this.path=path;this.parent=parent;this.reference=reference;}};},7948:function(module,__unusedexports,__webpack_require__){"use strict";const map=__webpack_require__(3037);function Protocols(proto){if(typeof proto==='number'){if(Protocols.codes[proto]){return Protocols.codes[proto];}throw new Error('no protocol with code: '+proto);}else if(typeof proto==='string'||proto instanceof String){if(Protocols.names[proto]){return Protocols.names[proto];}throw new Error('no protocol with name: '+proto);}throw new Error('invalid protocol id type: '+proto);}const V=-1;Protocols.lengthPrefixedVarSize=V;Protocols.V=V;Protocols.table=[[4,32,'ip4'],[6,16,'tcp'],[17,16,'udp'],[33,16,'dccp'],[41,128,'ip6'],[54,V,'dns4','resolvable'],[55,V,'dns6','resolvable'],[56,V,'dnsaddr','resolvable'],[132,16,'sctp'],[302,0,'utp'],[421,Protocols.lengthPrefixedVarSize,'ipfs'],[480,0,'http'],[443,0,'https'],[460,0,'quic'],[477,0,'ws'],[478,0,'wss'],[479,0,'p2p-websocket-star'],[275,0,'p2p-webrtc-star'],[276,0,'p2p-webrtc-direct'],[290,0,'p2p-circuit']];Protocols.names={};Protocols.codes={};map(Protocols.table,function(row){const proto=p.apply(null,row);Protocols.codes[proto.code]=proto;Protocols.names[proto.name]=proto;});Protocols.object=p;function p(code,size,name,resolvable){return{code:code,size:size,name:name,resolvable:Boolean(resolvable)};}module.exports=Protocols;},7954:function(module,exports,__webpack_require__){"use strict";const CID=__webpack_require__(9339);const protons=__webpack_require__(817);const proto=protons(__webpack_require__(8885));const resolver=__webpack_require__(806);const DAGLink=__webpack_require__(7545);const DAGNode=__webpack_require__(1758);const multihashing=__webpack_require__(9424);const waterfall=__webpack_require__(4265);exports=module.exports;function cid(dagNode,options,callback){if(typeof options==='function'){callback=options;options={};}options=options||{};const hashAlg=options.hashAlg||resolver.defaultHashAlg;let version=options.version;if(typeof version==='undefined'){version=hashAlg==='sha2-256'?0:1;}waterfall([cb=>{if(Buffer.isBuffer(dagNode)){return cb(null,dagNode);}serialize(dagNode,cb);},(serialized,cb)=>multihashing(serialized,hashAlg,cb),(mh,cb)=>cb(null,new CID(version,resolver.multicodec,mh))],callback);}function serialize(node,callback){let serialized;let{data,links=[]}=node;if(!DAGNode.isDAGNode(node)&&links){links=links.map(link=>{return DAGLink.isDAGLink(link)?link:DAGLink.util.createDagLinkFromB58EncodedHash(link);});}try{serialized=proto.PBNode.encode(toProtoBuf({data,links}));}catch(err){return callback(err);}callback(null,serialized);}function deserialize(buffer,callback){const pbn=proto.PBNode.decode(buffer);const links=pbn.Links.map(link=>{return new DAGLink(link.Name,link.Tsize,link.Hash);});const data=pbn.Data==null?Buffer.alloc(0):pbn.Data;setImmediate(()=>callback(null,new DAGNode(data,links,buffer.length)));}function toProtoBuf(node){const pbn={};if(node.data&&node.data.length>0){pbn.Data=node.data;}else{pbn.Data=null;}if(node.links&&node.links.length>0){pbn.Links=node.links.map(link=>({Hash:link.cid.buffer,Name:link.name,Tsize:link.size}));}else{pbn.Links=null;}return pbn;}exports.serialize=serialize;exports.deserialize=deserialize;exports.cid=cid;},7957:function(module,__unusedexports,__webpack_require__){var wrappy=__webpack_require__(7925);module.exports=wrappy(once);module.exports.strict=wrappy(onceStrict);once.proto=once(function(){Object.defineProperty(Function.prototype,'once',{value:function(){return once(this);},configurable:true});Object.defineProperty(Function.prototype,'onceStrict',{value:function(){return onceStrict(this);},configurable:true});});function once(fn){var f=function(){if(f.called)return f.value;f.called=true;return f.value=fn.apply(this,arguments);};f.called=false;return f;}function onceStrict(fn){var f=function(){if(f.called)throw new Error(f.onceError);f.called=true;return f.value=fn.apply(this,arguments);};var name=fn.name||'Function wrapped with `once`';f.onceError=name+" shouldn't be called more than once";f.called=false;return f;}},7959:function(module,exports,__webpack_require__){"use strict";const protons=__webpack_require__(817);const pb=protons(__webpack_require__(7108));const unixfsData=pb.Data;const types=['raw','directory','file','metadata','symlink','hamt-sharded-directory'];const dirTypes=['directory','hamt-sharded-directory'];function Data(type,data){if(!(this instanceof Data)){return new Data(type,data);}if(types.indexOf(type)===-1){throw new Error('Type: '+type+' is not valid');}this.type=type;this.data=data;this.blockSizes=[];this.addBlockSize=size=>{this.blockSizes.push(size);};this.removeBlockSize=index=>{this.blockSizes.splice(index,1);};this.fileSize=()=>{if(dirTypes.indexOf(this.type)>=0){return undefined;}let sum=0;this.blockSizes.forEach(size=>{sum+=size;});if(data){sum+=data.length;}return sum;};this.marshal=()=>{let type;switch(this.type){case'raw':type=unixfsData.DataType.Raw;break;case'directory':type=unixfsData.DataType.Directory;break;case'file':type=unixfsData.DataType.File;break;case'metadata':type=unixfsData.DataType.Metadata;break;case'symlink':type=unixfsData.DataType.Symlink;break;case'hamt-sharded-directory':type=unixfsData.DataType.HAMTShard;break;default:throw new Error(`Unkown type: "${this.type}"`);}let fileSize=this.fileSize();let data=this.data;if(!this.data||!this.data.length){data=undefined;}let blockSizes=this.blockSizes;if(!this.blockSizes||!this.blockSizes.length){blockSizes=undefined;}return unixfsData.encode({Type:type,Data:data,filesize:fileSize,blocksizes:blockSizes,hashType:this.hashType,fanout:this.fanout});};}Data.unmarshal=marsheled=>{const decoded=unixfsData.decode(marsheled);if(!decoded.Data){decoded.Data=undefined;}const obj=new Data(types[decoded.Type],decoded.Data);obj.blockSizes=decoded.blocksizes;return obj;};exports=module.exports=Data;},7968:function(module,__unusedexports,__webpack_require__){"use strict";const promisify=__webpack_require__(6955);const pull=__webpack_require__(2885);const sort=__webpack_require__(3462);const isStream=__webpack_require__(36);const isSource=__webpack_require__(5832).isSource;const isString=__webpack_require__(230);module.exports=function(self){const add=promisify((data,options,callback)=>{if(typeof options==='function'){callback=options;options={};}options=options||{};const isBufferOrStream=obj=>Buffer.isBuffer(obj)||isStream.readable(obj)||isSource(obj);const isContentObject=obj=>{if(typeof obj!=='object')return false;if(obj.content)return isBufferOrStream(obj.content);return Boolean(obj.path)&&isString(obj.path);};const isInput=obj=>isBufferOrStream(obj)||isContentObject(obj);const ok=isInput(data)||Array.isArray(data)&&data.every(isInput);if(!ok){return callback(new Error('invalid input: expected buffer, readable stream, pull stream, object or array of objects'));}pull(pull.values([data]),self.addPullStream(options),sort((a,b)=>{if(a.path<b.path)return 1;if(a.path>b.path)return-1;return 0;}),pull.collect(callback));});return function(){const args=Array.from(arguments);if(args.length===1&&isSource(args[0])){args.push({});}return add.apply(null,args);};};},7971:function(module,__unusedexports,__webpack_require__){"use strict";var utils=__webpack_require__(1702);var common=__webpack_require__(7874);var shaCommon=__webpack_require__(296);var assert=__webpack_require__(809);var sum32=utils.sum32;var sum32_4=utils.sum32_4;var sum32_5=utils.sum32_5;var ch32=shaCommon.ch32;var maj32=shaCommon.maj32;var s0_256=shaCommon.s0_256;var s1_256=shaCommon.s1_256;var g0_256=shaCommon.g0_256;var g1_256=shaCommon.g1_256;var BlockHash=common.BlockHash;var sha256_K=[0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0x0fc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x06ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2];function SHA256(){if(!(this instanceof SHA256))return new SHA256();BlockHash.call(this);this.h=[0x6a09e667,0xbb67ae85,0x3c6ef372,0xa54ff53a,0x510e527f,0x9b05688c,0x1f83d9ab,0x5be0cd19];this.k=sha256_K;this.W=new Array(64);}utils.inherits(SHA256,BlockHash);module.exports=SHA256;SHA256.blockSize=512;SHA256.outSize=256;SHA256.hmacStrength=192;SHA256.padLength=64;SHA256.prototype._update=function _update(msg,start){var W=this.W;for(var i=0;i<16;i++)W[i]=msg[start+i];for(;i<W.length;i++)W[i]=sum32_4(g1_256(W[i-2]),W[i-7],g0_256(W[i-15]),W[i-16]);var a=this.h[0];var b=this.h[1];var c=this.h[2];var d=this.h[3];var e=this.h[4];var f=this.h[5];var g=this.h[6];var h=this.h[7];assert(this.k.length===W.length);for(i=0;i<W.length;i++){var T1=sum32_5(h,s1_256(e),ch32(e,f,g),this.k[i],W[i]);var T2=sum32(s0_256(a),maj32(a,b,c));h=g;g=f;f=e;e=sum32(d,T1);d=c;c=b;b=a;a=sum32(T1,T2);}this.h[0]=sum32(this.h[0],a);this.h[1]=sum32(this.h[1],b);this.h[2]=sum32(this.h[2],c);this.h[3]=sum32(this.h[3],d);this.h[4]=sum32(this.h[4],e);this.h[5]=sum32(this.h[5],f);this.h[6]=sum32(this.h[6],g);this.h[7]=sum32(this.h[7],h);};SHA256.prototype._digest=function digest(enc){if(enc==='hex')return utils.toHex32(this.h,'big');else return utils.split32(this.h,'big');};},7980:function(module,__unusedexports,__webpack_require__){"use strict";const setImmediate=__webpack_require__(7368);const NOT_STARTED_YET=__webpack_require__(4857).NOT_STARTED_YET;const FloodSub=__webpack_require__(3161);module.exports=node=>{const floodSub=new FloodSub(node);node._floodSub=floodSub;return{subscribe:(topic,options,handler,callback)=>{if(typeof options==='function'){callback=handler;handler=options;options={};}if(!node.isStarted()&&!floodSub.started){return setImmediate(()=>callback(new Error(NOT_STARTED_YET)));}function subscribe(cb){if(floodSub.listenerCount(topic)===0){floodSub.subscribe(topic);}floodSub.on(topic,handler);setImmediate(cb);}subscribe(callback);},unsubscribe:(topic,handler)=>{if(!node.isStarted()&&!floodSub.started){throw new Error(NOT_STARTED_YET);}floodSub.removeListener(topic,handler);if(floodSub.listenerCount(topic)===0){floodSub.unsubscribe(topic);}},publish:(topic,data,callback)=>{if(!node.isStarted()&&!floodSub.started){return setImmediate(()=>callback(new Error(NOT_STARTED_YET)));}if(!Buffer.isBuffer(data)){return setImmediate(()=>callback(new Error('data must be a Buffer')));}floodSub.publish(topic,data);setImmediate(()=>callback());},ls:callback=>{if(!node.isStarted()&&!floodSub.started){return setImmediate(()=>callback(new Error(NOT_STARTED_YET)));}const subscriptions=Array.from(floodSub.subscriptions);setImmediate(()=>callback(null,subscriptions));},peers:(topic,callback)=>{if(!node.isStarted()&&!floodSub.started){return setImmediate(()=>callback(new Error(NOT_STARTED_YET)));}if(typeof topic==='function'){callback=topic;topic=null;}const peers=Array.from(floodSub.peers.values()).filter(peer=>topic?peer.topics.has(topic):true).map(peer=>peer.info.id.toB58String());setImmediate(()=>callback(null,peers));},setMaxListeners(n){return floodSub.setMaxListeners(n);}};};},7991:function(module,__unusedexports,__webpack_require__){var getMapData=__webpack_require__(4749);function mapCacheHas(key){return getMapData(this,key).has(key);}module.exports=mapCacheHas;},7994:function(module,__unusedexports,__webpack_require__){"use strict";const PeerInfo=__webpack_require__(9265);const PeerId=__webpack_require__(1832);const multiaddr=__webpack_require__(5920);const pull=__webpack_require__(418);const take=__webpack_require__(5878);const collect=__webpack_require__(8342);const lp=__webpack_require__(8585);const msg=__webpack_require__(8933);module.exports=(conn,expectedPeerInfo,callback)=>{if(typeof expectedPeerInfo==='function'){callback=expectedPeerInfo;expectedPeerInfo=null;console.warn('WARNING: no expected peer info was given, identify will not be able to verify peer integrity');}pull(conn,lp.decode(),take(1),collect((err,data)=>{if(err){return callback(err);}if(data.length===0){return callback(new Error('conn was closed, did not receive data'));}const input=msg.decode(data[0]);PeerId.createFromPubKey(input.publicKey,(err,id)=>{if(err){return callback(err);}const peerInfo=new PeerInfo(id);if(expectedPeerInfo&&expectedPeerInfo.id.toB58String()!==id.toB58String()){return callback(new Error('invalid peer'));}try{input.listenAddrs.map(multiaddr).forEach(ma=>peerInfo.multiaddrs.add(ma));}catch(err){return callback(err);}let observedAddr;try{observedAddr=getObservedAddrs(input);}catch(err){return callback(err);}callback(null,peerInfo,observedAddr);});}));};function getObservedAddrs(input){if(!hasObservedAddr(input)){return[];}let addrs=input.observedAddr;if(!Array.isArray(addrs)){addrs=[addrs];}return addrs.map(oa=>multiaddr(oa));}function hasObservedAddr(input){return input.observedAddr&&input.observedAddr.length>0;}},8006:function(module,__unusedexports,__webpack_require__){"use strict";var utils=__webpack_require__(1702);var SHA256=__webpack_require__(7971);function SHA224(){if(!(this instanceof SHA224))return new SHA224();SHA256.call(this);this.h=[0xc1059ed8,0x367cd507,0x3070dd17,0xf70e5939,0xffc00b31,0x68581511,0x64f98fa7,0xbefa4fa4];}utils.inherits(SHA224,SHA256);module.exports=SHA224;SHA224.blockSize=512;SHA224.outSize=224;SHA224.hmacStrength=192;SHA224.padLength=64;SHA224.prototype._digest=function digest(enc){if(enc==='hex')return utils.toHex32(this.h.slice(0,7),'big');else return utils.split32(this.h.slice(0,7),'big');};},8008:function(module,__unusedexports,__webpack_require__){module.exports=__webpack_require__(649).deprecate;},8010:function(module,__unusedexports,__webpack_require__){"use strict";const baseTable=__webpack_require__(322);const nameTable={};module.exports=nameTable;for(let encodingName in baseTable){let code=baseTable[encodingName];nameTable[code.toString('hex')]=encodingName;}},8011:function(module,__unusedexports,__webpack_require__){"use strict";const promisify=__webpack_require__(6955);const repoVersion=__webpack_require__(3279).repoVersion;module.exports=function repo(self){return{init:(bits,empty,callback)=>{},version:promisify(callback=>{self._repo._isInitialized(err=>{if(err){const match=[/Key not found in database \[\/version\]/,/ENOENT/,/repo is not initialized yet/].some(m=>{return m.test(err.message);});if(match){return callback(null,repoVersion);}return callback(err);}self._repo.version.get(callback);});}),gc:promisify((options,callback)=>{if(typeof options==='function'){callback=options;options={};}callback(new Error('Not implemented'));}),stat:promisify((options,callback)=>{if(typeof options==='function'){callback=options;options={};}self._repo.stat(options,(err,stats)=>{if(err)return callback(err);callback(null,{numObjects:stats.numObjects,repoSize:stats.repoSize,repoPath:stats.repoPath,version:stats.version.toString(),storageMax:stats.storageMax});});}),path:()=>self._repo.path};};},8012:function(module,__unusedexports,__webpack_require__){"use strict";const ieee754=__webpack_require__(8155);const Bignumber=__webpack_require__(4417);const parser=__webpack_require__(5526);const utils=__webpack_require__(6489);const c=__webpack_require__(7023);const Simple=__webpack_require__(3749);const Tagged=__webpack_require__(3967);const{URL}=__webpack_require__(4969);class Decoder{constructor(opts){opts=opts||{};if(!opts.size||opts.size<0x10000){opts.size=0x10000;}else{opts.size=utils.nextPowerOf2(opts.size);}this._heap=new ArrayBuffer(opts.size);this._heap8=new Uint8Array(this._heap);this._buffer=Buffer.from(this._heap);this._reset();this._knownTags=Object.assign({0:val=>new Date(val),1:val=>new Date(val*1000),2:val=>utils.arrayBufferToBignumber(val),3:val=>c.NEG_ONE.minus(utils.arrayBufferToBignumber(val)),4:v=>{return c.TEN.pow(v[0]).times(v[1]);},5:v=>{return c.TWO.pow(v[0]).times(v[1]);},32:val=>new URL(val),35:val=>new RegExp(val)},opts.tags);this.parser=parser(global,{log:console.log.bind(console),pushInt:this.pushInt.bind(this),pushInt32:this.pushInt32.bind(this),pushInt32Neg:this.pushInt32Neg.bind(this),pushInt64:this.pushInt64.bind(this),pushInt64Neg:this.pushInt64Neg.bind(this),pushFloat:this.pushFloat.bind(this),pushFloatSingle:this.pushFloatSingle.bind(this),pushFloatDouble:this.pushFloatDouble.bind(this),pushTrue:this.pushTrue.bind(this),pushFalse:this.pushFalse.bind(this),pushUndefined:this.pushUndefined.bind(this),pushNull:this.pushNull.bind(this),pushInfinity:this.pushInfinity.bind(this),pushInfinityNeg:this.pushInfinityNeg.bind(this),pushNaN:this.pushNaN.bind(this),pushNaNNeg:this.pushNaNNeg.bind(this),pushArrayStart:this.pushArrayStart.bind(this),pushArrayStartFixed:this.pushArrayStartFixed.bind(this),pushArrayStartFixed32:this.pushArrayStartFixed32.bind(this),pushArrayStartFixed64:this.pushArrayStartFixed64.bind(this),pushObjectStart:this.pushObjectStart.bind(this),pushObjectStartFixed:this.pushObjectStartFixed.bind(this),pushObjectStartFixed32:this.pushObjectStartFixed32.bind(this),pushObjectStartFixed64:this.pushObjectStartFixed64.bind(this),pushByteString:this.pushByteString.bind(this),pushByteStringStart:this.pushByteStringStart.bind(this),pushUtf8String:this.pushUtf8String.bind(this),pushUtf8StringStart:this.pushUtf8StringStart.bind(this),pushSimpleUnassigned:this.pushSimpleUnassigned.bind(this),pushTagUnassigned:this.pushTagUnassigned.bind(this),pushTagStart:this.pushTagStart.bind(this),pushTagStart4:this.pushTagStart4.bind(this),pushTagStart8:this.pushTagStart8.bind(this),pushBreak:this.pushBreak.bind(this)},this._heap);}get _depth(){return this._parents.length;}get _currentParent(){return this._parents[this._depth-1];}get _ref(){return this._currentParent.ref;}_closeParent(){var p=this._parents.pop();if(p.length>0){throw new Error(`Missing ${p.length} elements`);}switch(p.type){case c.PARENT.TAG:this._push(this.createTag(p.ref[0],p.ref[1]));break;case c.PARENT.BYTE_STRING:this._push(this.createByteString(p.ref,p.length));break;case c.PARENT.UTF8_STRING:this._push(this.createUtf8String(p.ref,p.length));break;case c.PARENT.MAP:if(p.values%2>0){throw new Error('Odd number of elements in the map');}this._push(this.createMap(p.ref,p.length));break;case c.PARENT.OBJECT:if(p.values%2>0){throw new Error('Odd number of elements in the map');}this._push(this.createObject(p.ref,p.length));break;case c.PARENT.ARRAY:this._push(this.createArray(p.ref,p.length));break;default:break;}if(this._currentParent&&this._currentParent.type===c.PARENT.TAG){this._dec();}}_dec(){const p=this._currentParent;if(p.length<0){return;}p.length--;if(p.length===0){this._closeParent();}}_push(val,hasChildren){const p=this._currentParent;p.values++;switch(p.type){case c.PARENT.ARRAY:case c.PARENT.BYTE_STRING:case c.PARENT.UTF8_STRING:if(p.length>-1){this._ref[this._ref.length-p.length]=val;}else{this._ref.push(val);}this._dec();break;case c.PARENT.OBJECT:if(p.tmpKey!=null){this._ref[p.tmpKey]=val;p.tmpKey=null;this._dec();}else{p.tmpKey=val;if(typeof p.tmpKey!=='string'){p.type=c.PARENT.MAP;p.ref=utils.buildMap(p.ref);}}break;case c.PARENT.MAP:if(p.tmpKey!=null){this._ref.set(p.tmpKey,val);p.tmpKey=null;this._dec();}else{p.tmpKey=val;}break;case c.PARENT.TAG:this._ref.push(val);if(!hasChildren){this._dec();}break;default:throw new Error('Unknown parent type');}}_createParent(obj,type,len){this._parents[this._depth]={type:type,length:len,ref:obj,values:0,tmpKey:null};}_reset(){this._res=[];this._parents=[{type:c.PARENT.ARRAY,length:-1,ref:this._res,values:0,tmpKey:null}];}createTag(tagNumber,value){const typ=this._knownTags[tagNumber];if(!typ){return new Tagged(tagNumber,value);}return typ(value);}createMap(obj,len){return obj;}createObject(obj,len){return obj;}createArray(arr,len){return arr;}createByteString(raw,len){return Buffer.concat(raw);}createByteStringFromHeap(start,end){if(start===end){return Buffer.alloc(0);}return Buffer.from(this._heap.slice(start,end));}createInt(val){return val;}createInt32(f,g){return utils.buildInt32(f,g);}createInt64(f1,f2,g1,g2){return utils.buildInt64(f1,f2,g1,g2);}createFloat(val){return val;}createFloatSingle(a,b,c,d){return ieee754.read([a,b,c,d],0,false,23,4);}createFloatDouble(a,b,c,d,e,f,g,h){return ieee754.read([a,b,c,d,e,f,g,h],0,false,52,8);}createInt32Neg(f,g){return-1-utils.buildInt32(f,g);}createInt64Neg(f1,f2,g1,g2){const f=utils.buildInt32(f1,f2);const g=utils.buildInt32(g1,g2);if(f>c.MAX_SAFE_HIGH){return c.NEG_ONE.minus(new Bignumber(f).times(c.SHIFT32).plus(g));}return-1-(f*c.SHIFT32+g);}createTrue(){return true;}createFalse(){return false;}createNull(){return null;}createUndefined(){return void 0;}createInfinity(){return Infinity;}createInfinityNeg(){return-Infinity;}createNaN(){return NaN;}createNaNNeg(){return-NaN;}createUtf8String(raw,len){return raw.join('');}createUtf8StringFromHeap(start,end){if(start===end){return'';}return this._buffer.toString('utf8',start,end);}createSimpleUnassigned(val){return new Simple(val);}pushInt(val){this._push(this.createInt(val));}pushInt32(f,g){this._push(this.createInt32(f,g));}pushInt64(f1,f2,g1,g2){this._push(this.createInt64(f1,f2,g1,g2));}pushFloat(val){this._push(this.createFloat(val));}pushFloatSingle(a,b,c,d){this._push(this.createFloatSingle(a,b,c,d));}pushFloatDouble(a,b,c,d,e,f,g,h){this._push(this.createFloatDouble(a,b,c,d,e,f,g,h));}pushInt32Neg(f,g){this._push(this.createInt32Neg(f,g));}pushInt64Neg(f1,f2,g1,g2){this._push(this.createInt64Neg(f1,f2,g1,g2));}pushTrue(){this._push(this.createTrue());}pushFalse(){this._push(this.createFalse());}pushNull(){this._push(this.createNull());}pushUndefined(){this._push(this.createUndefined());}pushInfinity(){this._push(this.createInfinity());}pushInfinityNeg(){this._push(this.createInfinityNeg());}pushNaN(){this._push(this.createNaN());}pushNaNNeg(){this._push(this.createNaNNeg());}pushArrayStart(){this._createParent([],c.PARENT.ARRAY,-1);}pushArrayStartFixed(len){this._createArrayStartFixed(len);}pushArrayStartFixed32(len1,len2){const len=utils.buildInt32(len1,len2);this._createArrayStartFixed(len);}pushArrayStartFixed64(len1,len2,len3,len4){const len=utils.buildInt64(len1,len2,len3,len4);this._createArrayStartFixed(len);}pushObjectStart(){this._createObjectStartFixed(-1);}pushObjectStartFixed(len){this._createObjectStartFixed(len);}pushObjectStartFixed32(len1,len2){const len=utils.buildInt32(len1,len2);this._createObjectStartFixed(len);}pushObjectStartFixed64(len1,len2,len3,len4){const len=utils.buildInt64(len1,len2,len3,len4);this._createObjectStartFixed(len);}pushByteStringStart(){this._parents[this._depth]={type:c.PARENT.BYTE_STRING,length:-1,ref:[],values:0,tmpKey:null};}pushByteString(start,end){this._push(this.createByteStringFromHeap(start,end));}pushUtf8StringStart(){this._parents[this._depth]={type:c.PARENT.UTF8_STRING,length:-1,ref:[],values:0,tmpKey:null};}pushUtf8String(start,end){this._push(this.createUtf8StringFromHeap(start,end));}pushSimpleUnassigned(val){this._push(this.createSimpleUnassigned(val));}pushTagStart(tag){this._parents[this._depth]={type:c.PARENT.TAG,length:1,ref:[tag]};}pushTagStart4(f,g){this.pushTagStart(utils.buildInt32(f,g));}pushTagStart8(f1,f2,g1,g2){this.pushTagStart(utils.buildInt64(f1,f2,g1,g2));}pushTagUnassigned(tagNumber){this._push(this.createTag(tagNumber));}pushBreak(){if(this._currentParent.length>-1){throw new Error('Unexpected break');}this._closeParent();}_createObjectStartFixed(len){if(len===0){this._push(this.createObject({}));return;}this._createParent({},c.PARENT.OBJECT,len);}_createArrayStartFixed(len){if(len===0){this._push(this.createArray([]));return;}this._createParent(new Array(len),c.PARENT.ARRAY,len);}_decode(input){if(input.byteLength===0){throw new Error('Input too short');}this._reset();this._heap8.set(input);const code=this.parser.parse(input.byteLength);if(this._depth>1){while(this._currentParent.length===0){this._closeParent();}if(this._depth>1){throw new Error('Undeterminated nesting');}}if(code>0){throw new Error('Failed to parse');}if(this._res.length===0){throw new Error('No valid result');}}decodeFirst(input){this._decode(input);return this._res[0];}decodeAll(input){this._decode(input);return this._res;}static decode(input,enc){if(typeof input==='string'){input=Buffer.from(input,enc||'hex');}const dec=new Decoder({size:input.length});return dec.decodeFirst(input);}static decodeAll(input,enc){if(typeof input==='string'){input=Buffer.from(input,enc||'hex');}const dec=new Decoder({size:input.length});return dec.decodeAll(input);}}Decoder.decodeFirst=Decoder.decode;module.exports=Decoder;},8014:function(module,__unusedexports,__webpack_require__){"use strict";var _=__webpack_require__(6064);var bs58=__webpack_require__(5862);var buffer=__webpack_require__(9423);var ALPHABET='123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz'.split('');var Base58=function Base58(obj){if(!(this instanceof Base58)){return new Base58(obj);}if(Buffer.isBuffer(obj)){var buf=obj;this.fromBuffer(buf);}else if(typeof obj==='string'){var str=obj;this.fromString(str);}else if(obj){this.set(obj);}};Base58.validCharacters=function validCharacters(chars){if(buffer.Buffer.isBuffer(chars)){chars=chars.toString();}return _.all(_.map(chars,function(char){return _.contains(ALPHABET,char);}));};Base58.prototype.set=function(obj){this.buf=obj.buf||this.buf||undefined;return this;};Base58.encode=function(buf){if(!buffer.Buffer.isBuffer(buf)){throw new Error('Input should be a buffer');}return bs58.encode(buf);};Base58.decode=function(str){if(typeof str!=='string'){throw new Error('Input should be a string');}return new Buffer(bs58.decode(str));};Base58.prototype.fromBuffer=function(buf){this.buf=buf;return this;};Base58.prototype.fromString=function(str){var buf=Base58.decode(str);this.buf=buf;return this;};Base58.prototype.toBuffer=function(){return this.buf;};Base58.prototype.toString=function(){return Base58.encode(this.buf);};module.exports=Base58;},8017:function(module,__unusedexports,__webpack_require__){module.exports=__webpack_require__(6886);},8032:function(module,__unusedexports,__webpack_require__){"use strict";const Key=__webpack_require__(759).Key;const KeytransformDatastore=__webpack_require__(609);class NamespaceDatastore extends KeytransformDatastore{constructor(child,prefix){super(child,{convert(key){return prefix.child(key);},invert(key){if(prefix.toString()==='/'){return key;}if(!prefix.isAncestorOf(key)){throw new Error(`Expected prefix: (${prefix.toString()}) in key: ${key.toString()}`);}return new Key(key.toString().slice(prefix.toString().length),false);}});this.prefix=prefix;}query(q){if(q.prefix&&this.prefix.toString()!=='/'){return super.query(Object.assign({},q,{prefix:this.prefix.child(new Key(q.prefix)).toString()}));}return super.query(q);}}module.exports=NamespaceDatastore;},8036:function(module){function listCacheClear(){this.__data__=[];this.size=0;}module.exports=listCacheClear;},8044:function(__unusedmodule,exports,__webpack_require__){var utils=exports;var inherits=__webpack_require__(2915);function toArray(msg,enc){if(Array.isArray(msg))return msg.slice();if(!msg)return[];var res=[];if(typeof msg==='string'){if(!enc){for(var i=0;i<msg.length;i++){var c=msg.charCodeAt(i);var hi=c>>8;var lo=c&0xff;if(hi)res.push(hi,lo);else res.push(lo);}}else if(enc==='hex'){msg=msg.replace(/[^a-z0-9]+/ig,'');if(msg.length%2!==0)msg='0'+msg;for(var i=0;i<msg.length;i+=2)res.push(parseInt(msg[i]+msg[i+1],16));}}else{for(var i=0;i<msg.length;i++)res[i]=msg[i]|0;}return res;}utils.toArray=toArray;function toHex(msg){var res='';for(var i=0;i<msg.length;i++)res+=zero2(msg[i].toString(16));return res;}utils.toHex=toHex;function htonl(w){var res=w>>>24|w>>>8&0xff00|w<<8&0xff0000|(w&0xff)<<24;return res>>>0;}utils.htonl=htonl;function toHex32(msg,endian){var res='';for(var i=0;i<msg.length;i++){var w=msg[i];if(endian==='little')w=htonl(w);res+=zero8(w.toString(16));}return res;}utils.toHex32=toHex32;function zero2(word){if(word.length===1)return'0'+word;else return word;}utils.zero2=zero2;function zero8(word){if(word.length===7)return'0'+word;else if(word.length===6)return'00'+word;else if(word.length===5)return'000'+word;else if(word.length===4)return'0000'+word;else if(word.length===3)return'00000'+word;else if(word.length===2)return'000000'+word;else if(word.length===1)return'0000000'+word;else return word;}utils.zero8=zero8;function join32(msg,start,end,endian){var len=end-start;assert(len%4===0);var res=new Array(len/4);for(var i=0,k=start;i<res.length;i++,k+=4){var w;if(endian==='big')w=msg[k]<<24|msg[k+1]<<16|msg[k+2]<<8|msg[k+3];else w=msg[k+3]<<24|msg[k+2]<<16|msg[k+1]<<8|msg[k];res[i]=w>>>0;}return res;}utils.join32=join32;function split32(msg,endian){var res=new Array(msg.length*4);for(var i=0,k=0;i<msg.length;i++,k+=4){var m=msg[i];if(endian==='big'){res[k]=m>>>24;res[k+1]=m>>>16&0xff;res[k+2]=m>>>8&0xff;res[k+3]=m&0xff;}else{res[k+3]=m>>>24;res[k+2]=m>>>16&0xff;res[k+1]=m>>>8&0xff;res[k]=m&0xff;}}return res;}utils.split32=split32;function rotr32(w,b){return w>>>b|w<<32-b;}utils.rotr32=rotr32;function rotl32(w,b){return w<<b|w>>>32-b;}utils.rotl32=rotl32;function sum32(a,b){return a+b>>>0;}utils.sum32=sum32;function sum32_3(a,b,c){return a+b+c>>>0;}utils.sum32_3=sum32_3;function sum32_4(a,b,c,d){return a+b+c+d>>>0;}utils.sum32_4=sum32_4;function sum32_5(a,b,c,d,e){return a+b+c+d+e>>>0;}utils.sum32_5=sum32_5;function assert(cond,msg){if(!cond)throw new Error(msg||'Assertion failed');}utils.assert=assert;utils.inherits=inherits;function sum64(buf,pos,ah,al){var bh=buf[pos];var bl=buf[pos+1];var lo=al+bl>>>0;var hi=(lo<al?1:0)+ah+bh;buf[pos]=hi>>>0;buf[pos+1]=lo;}exports.sum64=sum64;function sum64_hi(ah,al,bh,bl){var lo=al+bl>>>0;var hi=(lo<al?1:0)+ah+bh;return hi>>>0;};exports.sum64_hi=sum64_hi;function sum64_lo(ah,al,bh,bl){var lo=al+bl;return lo>>>0;};exports.sum64_lo=sum64_lo;function sum64_4_hi(ah,al,bh,bl,ch,cl,dh,dl){var carry=0;var lo=al;lo=lo+bl>>>0;carry+=lo<al?1:0;lo=lo+cl>>>0;carry+=lo<cl?1:0;lo=lo+dl>>>0;carry+=lo<dl?1:0;var hi=ah+bh+ch+dh+carry;return hi>>>0;};exports.sum64_4_hi=sum64_4_hi;function sum64_4_lo(ah,al,bh,bl,ch,cl,dh,dl){var lo=al+bl+cl+dl;return lo>>>0;};exports.sum64_4_lo=sum64_4_lo;function sum64_5_hi(ah,al,bh,bl,ch,cl,dh,dl,eh,el){var carry=0;var lo=al;lo=lo+bl>>>0;carry+=lo<al?1:0;lo=lo+cl>>>0;carry+=lo<cl?1:0;lo=lo+dl>>>0;carry+=lo<dl?1:0;lo=lo+el>>>0;carry+=lo<el?1:0;var hi=ah+bh+ch+dh+eh+carry;return hi>>>0;};exports.sum64_5_hi=sum64_5_hi;function sum64_5_lo(ah,al,bh,bl,ch,cl,dh,dl,eh,el){var lo=al+bl+cl+dl+el;return lo>>>0;};exports.sum64_5_lo=sum64_5_lo;function rotr64_hi(ah,al,num){var r=al<<32-num|ah>>>num;return r>>>0;};exports.rotr64_hi=rotr64_hi;function rotr64_lo(ah,al,num){var r=ah<<32-num|al>>>num;return r>>>0;};exports.rotr64_lo=rotr64_lo;function shr64_hi(ah,al,num){return ah>>>num;};exports.shr64_hi=shr64_hi;function shr64_lo(ah,al,num){var r=ah<<32-num|al>>>num;return r>>>0;};exports.shr64_lo=shr64_lo;},8046:function(module,exports,__webpack_require__){exports=module.exports=createDebug.debug=createDebug['default']=createDebug;exports.coerce=coerce;exports.disable=disable;exports.enable=enable;exports.enabled=enabled;exports.humanize=__webpack_require__(1746);exports.names=[];exports.skips=[];exports.formatters={};var prevTime;function selectColor(namespace){var hash=0,i;for(i in namespace){hash=(hash<<5)-hash+namespace.charCodeAt(i);hash|=0;}return exports.colors[Math.abs(hash)%exports.colors.length];}function createDebug(namespace){function debug(){if(!debug.enabled)return;var self=debug;var curr=+new Date();var ms=curr-(prevTime||curr);self.diff=ms;self.prev=prevTime;self.curr=curr;prevTime=curr;var args=new Array(arguments.length);for(var i=0;i<args.length;i++){args[i]=arguments[i];}args[0]=exports.coerce(args[0]);if('string'!==typeof args[0]){args.unshift('%O');}var index=0;args[0]=args[0].replace(/%([a-zA-Z%])/g,function(match,format){if(match==='%%')return match;index++;var formatter=exports.formatters[format];if('function'===typeof formatter){var val=args[index];match=formatter.call(self,val);args.splice(index,1);index--;}return match;});exports.formatArgs.call(self,args);var logFn=debug.log||exports.log||console.log.bind(console);logFn.apply(self,args);}debug.namespace=namespace;debug.enabled=exports.enabled(namespace);debug.useColors=exports.useColors();debug.color=selectColor(namespace);if('function'===typeof exports.init){exports.init(debug);}return debug;}function enable(namespaces){exports.save(namespaces);exports.names=[];exports.skips=[];var split=(typeof namespaces==='string'?namespaces:'').split(/[\s,]+/);var len=split.length;for(var i=0;i<len;i++){if(!split[i])continue;namespaces=split[i].replace(/\*/g,'.*?');if(namespaces[0]==='-'){exports.skips.push(new RegExp('^'+namespaces.substr(1)+'$'));}else{exports.names.push(new RegExp('^'+namespaces+'$'));}}}function disable(){exports.enable('');}function enabled(name){var i,len;for(i=0,len=exports.skips.length;i<len;i++){if(exports.skips[i].test(name)){return false;}}for(i=0,len=exports.names.length;i<len;i++){if(exports.names[i].test(name)){return true;}}return false;}function coerce(val){if(val instanceof Error)return val.stack||val.message;return val;}},8047:function(module,__unusedexports,__webpack_require__){"use strict";const debug=__webpack_require__(746);const logger=(id,subsystem)=>{const name=['bitswap'];if(subsystem){name.push(subsystem);}if(id){name.push(`${id.toB58String().slice(0,8)}`);}const logger=debug(name.join(':'));logger.error=debug(name.concat(['error']).join(':'));return logger;};const includesWith=(pred,x,list)=>{let idx=0;const len=list.length;while(idx<len){if(pred(x,list[idx])){return true;}idx+=1;}return false;};const uniqWith=(pred,list)=>{let idx=0;const len=list.length;const result=[];let item;while(idx<len){item=list[idx];if(!includesWith(pred,item,result)){result[result.length]=item;}idx+=1;}return result;};const groupBy=(pred,list)=>{return list.reduce((acc,v)=>{const k=pred(v);if(acc[k]){acc[k].push(v);}else{acc[k]=[v];}return acc;},{});};const pullAllWith=(pred,list,values)=>{return list.filter(i=>{return!includesWith(pred,i,values);});};const sortBy=(fn,list)=>{return Array.prototype.slice.call(list,0).sort((a,b)=>{const aa=fn(a);const bb=fn(b);return aa<bb?-1:aa>bb?1:0;});};module.exports={logger,includesWith,uniqWith,groupBy,pullAllWith,sortBy};},8051:function(module){module.exports=on;function on(obj,ev,fn){obj.on(ev,fn);return{destroy:function(){obj.removeListener(ev,fn);}};}},8053:function(module){module.exports=require("punycode");},8055:function(__unusedmodule,exports){function each(obj,iter){for(var key in obj){var value=obj[key];iter(value,key,obj);}}function keys(obj){return Object.keys(obj).sort();}function contains(a,v){return~a.indexOf(v);}function union(a,b){return a.filter(function(v){return contains(b,v);});}function disunion1(a,b){return a.filter(function(v){return!contains(b,v);});}function disunion(a,b){return a.filter(function(v){return!contains(b,v);}).concat(b.filter(function(v){return!contains(a,v);})).sort();}function equal(a,b){if(a.length!=b.length)return false;for(var i in a)if(b[i]!==a[i])return false;}function empty(v){for(var k in v)return false;return true;}var validate=exports.validate=function(fsm){var states=Object.keys(fsm);each(fsm,function(state,name){each(state,function(_state,event){if(!fsm[_state])throw new Error('invalid transition from state:'+name+' to state:'+_state+' on event:'+event);});});return true;};var reachable=exports.reachable=function(fsm){var reachable={};var added=false;do{added=false;each(fsm,function(state,name){var reach=reachable[name]=reachable[name]||{};each(state,function(_name,event){if(!reach[_name])reach[_name]=[event],added=true;});each(state,function(_name,event){var _state=reachable[_name];each(_state,function(path,_name){if(!reach[_name])reach[_name]=[event].concat(path),added=true;});});});}while(added);return reachable;};exports.terminal=exports.deadlock=function(fsm){var dead=[];each(fsm,function(state,name){if(empty(state))dead.push(name);});return dead;};var livelock=exports.livelock=function(fsm,terminals){var reach=reachable(fsm),locked=[];each(reach,function(reaches,name){if(contains(terminals,name))return;each(terminals,function(_name){if(!reaches[_name]&&!contains(locked,name))locked.push(name);});});return locked.sort();};function events(fsm){var events=[];each(fsm,function(state,name){each(state,function(_state,event){if(!contains(events,event))events.push(event);});});return events.sort();}var combine=exports.combine=function(fsm1,fsm2,start1,start2){var combined={};var events1=events(fsm1);var events2=events(fsm2);var independent=disunion(events1,events2);function expand(name1,name2){var cName=name1+'-'+name2,state;if(!combined[cName])combined[cName]={};state=combined[cName];var trans1=keys(fsm1[name1]),trans2=keys(fsm2[name2]);var allowed=union(trans1,trans2);allowed.forEach(function(event){state[event]=fsm1[name1][event]+'-'+fsm2[name2][event];if(!combined[state[event]])expand(fsm1[name1][event],fsm2[name2][event]);});union(independent,trans1).forEach(function(event){state[event]=fsm1[name1][event]+'-'+name2;if(!combined[state[event]])expand(fsm1[name1][event],name2);});union(independent,trans2).forEach(function(event){state[event]=name1+'-'+fsm2[name2][event];if(!combined[state[event]])expand(name1,fsm2[name2][event]);});return combined[cName];}expand(start1,start2);return combined;};},8059:function(module,__unusedexports,__webpack_require__){"use strict";const pullPushable=__webpack_require__(5995);const pullWrite=__webpack_require__(8970);module.exports=function createBuildStream(createStrategy,_ipld,options){const source=pullPushable();const sink=pullWrite(createStrategy(source),null,options.highWaterMark,err=>source.end(err));return{source:source,sink:sink};};},8060:function(module){module.exports=require("tls");},8065:function(module,__unusedexports,__webpack_require__){var getMapData=__webpack_require__(4749);function mapCacheSet(key,value){var data=getMapData(this,key),size=data.size;data.set(key,value);this.size+=data.size==size?0:1;return this;}module.exports=mapCacheSet;},8074:function(module,__unusedexports,__webpack_require__){"use strict";const EventEmitter=__webpack_require__(4859);const Big=__webpack_require__(4417);const MovingAverage=__webpack_require__(6114);class Stats extends EventEmitter{constructor(initialCounters,options){super();this._options=options;this._queue=[];this._stats={};this._frequencyLastTime=Date.now();this._frequencyAccumulators={};this._movingAverages={};this._update=this._update.bind(this);initialCounters.forEach(key=>{this._stats[key]=Big(0);this._movingAverages[key]={};this._options.movingAverageIntervals.forEach(interval=>{const ma=this._movingAverages[key][interval]=MovingAverage(interval);ma.push(this._frequencyLastTime,0);});});this._enabled=this._options.enabled;}enable(){this._enabled=true;}disable(){this._disabled=true;}stop(){if(this._timeout){clearTimeout(this._timeout);}}get snapshot(){return Object.assign({},this._stats);}get movingAverages(){return Object.assign({},this._movingAverages);}push(counter,inc){if(this._enabled){this._queue.push([counter,inc,Date.now()]);this._resetComputeTimeout();}}_resetComputeTimeout(){if(this._timeout){clearTimeout(this._timeout);}this._timeout=setTimeout(this._update,this._nextTimeout());}_nextTimeout(){const urgency=this._queue.length/this._options.computeThrottleMaxQueueSize;return Math.max(this._options.computeThrottleTimeout*(1-urgency),0);}_update(){this._timeout=null;if(this._queue.length){let last;while(this._queue.length){const op=last=this._queue.shift();this._applyOp(op);}this._updateFrequency(last[2]);this.emit('update',this._stats);}}_updateFrequency(latestTime){const timeDiff=latestTime-this._frequencyLastTime;Object.keys(this._stats).forEach(key=>{this._updateFrequencyFor(key,timeDiff,latestTime);});this._frequencyLastTime=latestTime;}_updateFrequencyFor(key,timeDiffMS,latestTime){const count=this._frequencyAccumulators[key]||0;this._frequencyAccumulators[key]=0;const hz=count/timeDiffMS*1000;let movingAverages=this._movingAverages[key];if(!movingAverages){movingAverages=this._movingAverages[key]={};}this._options.movingAverageIntervals.forEach(movingAverageInterval=>{let movingAverage=movingAverages[movingAverageInterval];if(!movingAverage){movingAverage=movingAverages[movingAverageInterval]=MovingAverage(movingAverageInterval);}movingAverage.push(latestTime,hz);});}_applyOp(op){const key=op[0];const inc=op[1];if(typeof inc!=='number'){throw new Error('invalid increment number:',inc);}let n;if(!this._stats.hasOwnProperty(key)){n=this._stats[key]=Big(0);}else{n=this._stats[key];}this._stats[key]=n.plus(inc);if(!this._frequencyAccumulators[key]){this._frequencyAccumulators[key]=0;}this._frequencyAccumulators[key]+=inc;}}module.exports=Stats;},8081:function(module,__unusedexports,__webpack_require__){"use strict";const balancedReducer=__webpack_require__(9320);const defaultOptions={maxChildrenPerNode:174};module.exports=function(reduce,_options){const options=Object.assign({},defaultOptions,_options);return balancedReducer(reduce,options);};},8084:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function(fn){return function(){var args=(0,_slice2.default)(arguments);var callback=args.pop();fn.call(this,args,callback);};};var _slice=__webpack_require__(3404);var _slice2=_interopRequireDefault(_slice);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}module.exports=exports['default'];},8095:function(__unusedmodule,exports,__webpack_require__){"use strict";var Buffer=__webpack_require__(1173).Buffer;exports._dbcs=DBCSCodec;var UNASSIGNED=-1,GB18030_CODE=-2,SEQ_START=-10,NODE_START=-1000,UNASSIGNED_NODE=new Array(0x100),DEF_CHAR=-1;for(var i=0;i<0x100;i++)UNASSIGNED_NODE[i]=UNASSIGNED;function DBCSCodec(codecOptions,iconv){this.encodingName=codecOptions.encodingName;if(!codecOptions)throw new Error("DBCS codec is called without the data.");if(!codecOptions.table)throw new Error("Encoding '"+this.encodingName+"' has no data.");var mappingTable=codecOptions.table();this.decodeTables=[];this.decodeTables[0]=UNASSIGNED_NODE.slice(0);this.decodeTableSeq=[];for(var i=0;i<mappingTable.length;i++)this._addDecodeChunk(mappingTable[i]);this.defaultCharUnicode=iconv.defaultCharUnicode;this.encodeTable=[];this.encodeTableSeq=[];var skipEncodeChars={};if(codecOptions.encodeSkipVals)for(var i=0;i<codecOptions.encodeSkipVals.length;i++){var val=codecOptions.encodeSkipVals[i];if(typeof val==='number')skipEncodeChars[val]=true;else for(var j=val.from;j<=val.to;j++)skipEncodeChars[j]=true;}this._fillEncodeTable(0,0,skipEncodeChars);if(codecOptions.encodeAdd){for(var uChar in codecOptions.encodeAdd)if(Object.prototype.hasOwnProperty.call(codecOptions.encodeAdd,uChar))this._setEncodeChar(uChar.charCodeAt(0),codecOptions.encodeAdd[uChar]);}this.defCharSB=this.encodeTable[0][iconv.defaultCharSingleByte.charCodeAt(0)];if(this.defCharSB===UNASSIGNED)this.defCharSB=this.encodeTable[0]['?'];if(this.defCharSB===UNASSIGNED)this.defCharSB="?".charCodeAt(0);if(typeof codecOptions.gb18030==='function'){this.gb18030=codecOptions.gb18030();var thirdByteNodeIdx=this.decodeTables.length;var thirdByteNode=this.decodeTables[thirdByteNodeIdx]=UNASSIGNED_NODE.slice(0);var fourthByteNodeIdx=this.decodeTables.length;var fourthByteNode=this.decodeTables[fourthByteNodeIdx]=UNASSIGNED_NODE.slice(0);for(var i=0x81;i<=0xFE;i++){var secondByteNodeIdx=NODE_START-this.decodeTables[0][i];var secondByteNode=this.decodeTables[secondByteNodeIdx];for(var j=0x30;j<=0x39;j++)secondByteNode[j]=NODE_START-thirdByteNodeIdx;}for(var i=0x81;i<=0xFE;i++)thirdByteNode[i]=NODE_START-fourthByteNodeIdx;for(var i=0x30;i<=0x39;i++)fourthByteNode[i]=GB18030_CODE;}}DBCSCodec.prototype.encoder=DBCSEncoder;DBCSCodec.prototype.decoder=DBCSDecoder;DBCSCodec.prototype._getDecodeTrieNode=function(addr){var bytes=[];for(;addr>0;addr>>=8)bytes.push(addr&0xFF);if(bytes.length==0)bytes.push(0);var node=this.decodeTables[0];for(var i=bytes.length-1;i>0;i--){var val=node[bytes[i]];if(val==UNASSIGNED){node[bytes[i]]=NODE_START-this.decodeTables.length;this.decodeTables.push(node=UNASSIGNED_NODE.slice(0));}else if(val<=NODE_START){node=this.decodeTables[NODE_START-val];}else throw new Error("Overwrite byte in "+this.encodingName+", addr: "+addr.toString(16));}return node;};DBCSCodec.prototype._addDecodeChunk=function(chunk){var curAddr=parseInt(chunk[0],16);var writeTable=this._getDecodeTrieNode(curAddr);curAddr=curAddr&0xFF;for(var k=1;k<chunk.length;k++){var part=chunk[k];if(typeof part==="string"){for(var l=0;l<part.length;){var code=part.charCodeAt(l++);if(0xD800<=code&&code<0xDC00){var codeTrail=part.charCodeAt(l++);if(0xDC00<=codeTrail&&codeTrail<0xE000)writeTable[curAddr++]=0x10000+(code-0xD800)*0x400+(codeTrail-0xDC00);else throw new Error("Incorrect surrogate pair in "+this.encodingName+" at chunk "+chunk[0]);}else if(0x0FF0<code&&code<=0x0FFF){var len=0xFFF-code+2;var seq=[];for(var m=0;m<len;m++)seq.push(part.charCodeAt(l++));writeTable[curAddr++]=SEQ_START-this.decodeTableSeq.length;this.decodeTableSeq.push(seq);}else writeTable[curAddr++]=code;}}else if(typeof part==="number"){var charCode=writeTable[curAddr-1]+1;for(var l=0;l<part;l++)writeTable[curAddr++]=charCode++;}else throw new Error("Incorrect type '"+typeof part+"' given in "+this.encodingName+" at chunk "+chunk[0]);}if(curAddr>0xFF)throw new Error("Incorrect chunk in "+this.encodingName+" at addr "+chunk[0]+": too long"+curAddr);};DBCSCodec.prototype._getEncodeBucket=function(uCode){var high=uCode>>8;if(this.encodeTable[high]===undefined)this.encodeTable[high]=UNASSIGNED_NODE.slice(0);return this.encodeTable[high];};DBCSCodec.prototype._setEncodeChar=function(uCode,dbcsCode){var bucket=this._getEncodeBucket(uCode);var low=uCode&0xFF;if(bucket[low]<=SEQ_START)this.encodeTableSeq[SEQ_START-bucket[low]][DEF_CHAR]=dbcsCode;else if(bucket[low]==UNASSIGNED)bucket[low]=dbcsCode;};DBCSCodec.prototype._setEncodeSequence=function(seq,dbcsCode){var uCode=seq[0];var bucket=this._getEncodeBucket(uCode);var low=uCode&0xFF;var node;if(bucket[low]<=SEQ_START){node=this.encodeTableSeq[SEQ_START-bucket[low]];}else{node={};if(bucket[low]!==UNASSIGNED)node[DEF_CHAR]=bucket[low];bucket[low]=SEQ_START-this.encodeTableSeq.length;this.encodeTableSeq.push(node);}for(var j=1;j<seq.length-1;j++){var oldVal=node[uCode];if(typeof oldVal==='object')node=oldVal;else{node=node[uCode]={};if(oldVal!==undefined)node[DEF_CHAR]=oldVal;}}uCode=seq[seq.length-1];node[uCode]=dbcsCode;};DBCSCodec.prototype._fillEncodeTable=function(nodeIdx,prefix,skipEncodeChars){var node=this.decodeTables[nodeIdx];for(var i=0;i<0x100;i++){var uCode=node[i];var mbCode=prefix+i;if(skipEncodeChars[mbCode])continue;if(uCode>=0)this._setEncodeChar(uCode,mbCode);else if(uCode<=NODE_START)this._fillEncodeTable(NODE_START-uCode,mbCode<<8,skipEncodeChars);else if(uCode<=SEQ_START)this._setEncodeSequence(this.decodeTableSeq[SEQ_START-uCode],mbCode);}};function DBCSEncoder(options,codec){this.leadSurrogate=-1;this.seqObj=undefined;this.encodeTable=codec.encodeTable;this.encodeTableSeq=codec.encodeTableSeq;this.defaultCharSingleByte=codec.defCharSB;this.gb18030=codec.gb18030;}DBCSEncoder.prototype.write=function(str){var newBuf=Buffer.alloc(str.length*(this.gb18030?4:3)),leadSurrogate=this.leadSurrogate,seqObj=this.seqObj,nextChar=-1,i=0,j=0;while(true){if(nextChar===-1){if(i==str.length)break;var uCode=str.charCodeAt(i++);}else{var uCode=nextChar;nextChar=-1;}if(0xD800<=uCode&&uCode<0xE000){if(uCode<0xDC00){if(leadSurrogate===-1){leadSurrogate=uCode;continue;}else{leadSurrogate=uCode;uCode=UNASSIGNED;}}else{if(leadSurrogate!==-1){uCode=0x10000+(leadSurrogate-0xD800)*0x400+(uCode-0xDC00);leadSurrogate=-1;}else{uCode=UNASSIGNED;}}}else if(leadSurrogate!==-1){nextChar=uCode;uCode=UNASSIGNED;leadSurrogate=-1;}var dbcsCode=UNASSIGNED;if(seqObj!==undefined&&uCode!=UNASSIGNED){var resCode=seqObj[uCode];if(typeof resCode==='object'){seqObj=resCode;continue;}else if(typeof resCode=='number'){dbcsCode=resCode;}else if(resCode==undefined){resCode=seqObj[DEF_CHAR];if(resCode!==undefined){dbcsCode=resCode;nextChar=uCode;}else{}}seqObj=undefined;}else if(uCode>=0){var subtable=this.encodeTable[uCode>>8];if(subtable!==undefined)dbcsCode=subtable[uCode&0xFF];if(dbcsCode<=SEQ_START){seqObj=this.encodeTableSeq[SEQ_START-dbcsCode];continue;}if(dbcsCode==UNASSIGNED&&this.gb18030){var idx=findIdx(this.gb18030.uChars,uCode);if(idx!=-1){var dbcsCode=this.gb18030.gbChars[idx]+(uCode-this.gb18030.uChars[idx]);newBuf[j++]=0x81+Math.floor(dbcsCode/12600);dbcsCode=dbcsCode%12600;newBuf[j++]=0x30+Math.floor(dbcsCode/1260);dbcsCode=dbcsCode%1260;newBuf[j++]=0x81+Math.floor(dbcsCode/10);dbcsCode=dbcsCode%10;newBuf[j++]=0x30+dbcsCode;continue;}}}if(dbcsCode===UNASSIGNED)dbcsCode=this.defaultCharSingleByte;if(dbcsCode<0x100){newBuf[j++]=dbcsCode;}else if(dbcsCode<0x10000){newBuf[j++]=dbcsCode>>8;newBuf[j++]=dbcsCode&0xFF;}else{newBuf[j++]=dbcsCode>>16;newBuf[j++]=dbcsCode>>8&0xFF;newBuf[j++]=dbcsCode&0xFF;}}this.seqObj=seqObj;this.leadSurrogate=leadSurrogate;return newBuf.slice(0,j);};DBCSEncoder.prototype.end=function(){if(this.leadSurrogate===-1&&this.seqObj===undefined)return;var newBuf=Buffer.alloc(10),j=0;if(this.seqObj){var dbcsCode=this.seqObj[DEF_CHAR];if(dbcsCode!==undefined){if(dbcsCode<0x100){newBuf[j++]=dbcsCode;}else{newBuf[j++]=dbcsCode>>8;newBuf[j++]=dbcsCode&0xFF;}}else{}this.seqObj=undefined;}if(this.leadSurrogate!==-1){newBuf[j++]=this.defaultCharSingleByte;this.leadSurrogate=-1;}return newBuf.slice(0,j);};DBCSEncoder.prototype.findIdx=findIdx;function DBCSDecoder(options,codec){this.nodeIdx=0;this.prevBuf=Buffer.alloc(0);this.decodeTables=codec.decodeTables;this.decodeTableSeq=codec.decodeTableSeq;this.defaultCharUnicode=codec.defaultCharUnicode;this.gb18030=codec.gb18030;}DBCSDecoder.prototype.write=function(buf){var newBuf=Buffer.alloc(buf.length*2),nodeIdx=this.nodeIdx,prevBuf=this.prevBuf,prevBufOffset=this.prevBuf.length,seqStart=-this.prevBuf.length,uCode;if(prevBufOffset>0)prevBuf=Buffer.concat([prevBuf,buf.slice(0,10)]);for(var i=0,j=0;i<buf.length;i++){var curByte=i>=0?buf[i]:prevBuf[i+prevBufOffset];var uCode=this.decodeTables[nodeIdx][curByte];if(uCode>=0){}else if(uCode===UNASSIGNED){i=seqStart;uCode=this.defaultCharUnicode.charCodeAt(0);}else if(uCode===GB18030_CODE){var curSeq=seqStart>=0?buf.slice(seqStart,i+1):prevBuf.slice(seqStart+prevBufOffset,i+1+prevBufOffset);var ptr=(curSeq[0]-0x81)*12600+(curSeq[1]-0x30)*1260+(curSeq[2]-0x81)*10+(curSeq[3]-0x30);var idx=findIdx(this.gb18030.gbChars,ptr);uCode=this.gb18030.uChars[idx]+ptr-this.gb18030.gbChars[idx];}else if(uCode<=NODE_START){nodeIdx=NODE_START-uCode;continue;}else if(uCode<=SEQ_START){var seq=this.decodeTableSeq[SEQ_START-uCode];for(var k=0;k<seq.length-1;k++){uCode=seq[k];newBuf[j++]=uCode&0xFF;newBuf[j++]=uCode>>8;}uCode=seq[seq.length-1];}else throw new Error("iconv-lite internal error: invalid decoding table value "+uCode+" at "+nodeIdx+"/"+curByte);if(uCode>0xFFFF){uCode-=0x10000;var uCodeLead=0xD800+Math.floor(uCode/0x400);newBuf[j++]=uCodeLead&0xFF;newBuf[j++]=uCodeLead>>8;uCode=0xDC00+uCode%0x400;}newBuf[j++]=uCode&0xFF;newBuf[j++]=uCode>>8;nodeIdx=0;seqStart=i+1;}this.nodeIdx=nodeIdx;this.prevBuf=seqStart>=0?buf.slice(seqStart):prevBuf.slice(seqStart+prevBufOffset);return newBuf.slice(0,j).toString('ucs2');};DBCSDecoder.prototype.end=function(){var ret='';while(this.prevBuf.length>0){ret+=this.defaultCharUnicode;var buf=this.prevBuf.slice(1);this.prevBuf=Buffer.alloc(0);this.nodeIdx=0;if(buf.length>0)ret+=this.write(buf);}this.nodeIdx=0;return ret;};function findIdx(table,val){if(table[0]>val)return-1;var l=0,r=table.length;while(l<r-1){var mid=l+Math.floor((r-l+1)/2);if(table[mid]<=val)l=mid;else r=mid;}return l;}},8107:function(module){module.exports=isBuf;var withNativeBuffer=typeof Buffer==='function'&&typeof Buffer.isBuffer==='function';var withNativeArrayBuffer=typeof ArrayBuffer==='function';var isView=function(obj){return typeof ArrayBuffer.isView==='function'?ArrayBuffer.isView(obj):obj.buffer instanceof ArrayBuffer;};function isBuf(obj){return withNativeBuffer&&Buffer.isBuffer(obj)||withNativeArrayBuffer&&(obj instanceof ArrayBuffer||isView(obj));}},8113:function(module,__unusedexports,__webpack_require__){"use strict";module.exports=__webpack_require__(5524)(require(__dirname+'//build/Release/keccak.node'));},8136:function(module){var nativeCeil=Math.ceil,nativeMax=Math.max;function baseRange(start,end,step,fromRight){var index=-1,length=nativeMax(nativeCeil((end-start)/(step||1)),0),result=Array(length);while(length--){result[fromRight?length:++index]=start;start+=step;}return result;}module.exports=baseRange;},8143:function(module,__unusedexports,__webpack_require__){"use strict";var truncate=__webpack_require__(4690);var getLength=Buffer.byteLength.bind(Buffer);module.exports=truncate.bind(null,getLength);},8145:function(module){module.exports=function prop(key){return key&&('string'==typeof key?function(data){return data[key];}:'object'===typeof key&&'function'===typeof key.exec?function(data){var v=key.exec(data);return v&&v[0];}:key);};},8154:function(module,exports,__webpack_require__){module=__webpack_require__.nmd(module);/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright JS Foundation and other contributors <https://js.foundation/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */;(function(){var undefined;var VERSION='4.17.11';var LARGE_ARRAY_SIZE=200;var CORE_ERROR_TEXT='Unsupported core-js use. Try https://npms.io/search?q=ponyfill.',FUNC_ERROR_TEXT='Expected a function';var HASH_UNDEFINED='__lodash_hash_undefined__';var MAX_MEMOIZE_SIZE=500;var PLACEHOLDER='__lodash_placeholder__';var CLONE_DEEP_FLAG=1,CLONE_FLAT_FLAG=2,CLONE_SYMBOLS_FLAG=4;var COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;var WRAP_BIND_FLAG=1,WRAP_BIND_KEY_FLAG=2,WRAP_CURRY_BOUND_FLAG=4,WRAP_CURRY_FLAG=8,WRAP_CURRY_RIGHT_FLAG=16,WRAP_PARTIAL_FLAG=32,WRAP_PARTIAL_RIGHT_FLAG=64,WRAP_ARY_FLAG=128,WRAP_REARG_FLAG=256,WRAP_FLIP_FLAG=512;var DEFAULT_TRUNC_LENGTH=30,DEFAULT_TRUNC_OMISSION='...';var HOT_COUNT=800,HOT_SPAN=16;var LAZY_FILTER_FLAG=1,LAZY_MAP_FLAG=2,LAZY_WHILE_FLAG=3;var INFINITY=1/0,MAX_SAFE_INTEGER=9007199254740991,MAX_INTEGER=1.7976931348623157e+308,NAN=0/0;var MAX_ARRAY_LENGTH=4294967295,MAX_ARRAY_INDEX=MAX_ARRAY_LENGTH-1,HALF_MAX_ARRAY_LENGTH=MAX_ARRAY_LENGTH>>>1;var wrapFlags=[['ary',WRAP_ARY_FLAG],['bind',WRAP_BIND_FLAG],['bindKey',WRAP_BIND_KEY_FLAG],['curry',WRAP_CURRY_FLAG],['curryRight',WRAP_CURRY_RIGHT_FLAG],['flip',WRAP_FLIP_FLAG],['partial',WRAP_PARTIAL_FLAG],['partialRight',WRAP_PARTIAL_RIGHT_FLAG],['rearg',WRAP_REARG_FLAG]];var argsTag='[object Arguments]',arrayTag='[object Array]',asyncTag='[object AsyncFunction]',boolTag='[object Boolean]',dateTag='[object Date]',domExcTag='[object DOMException]',errorTag='[object Error]',funcTag='[object Function]',genTag='[object GeneratorFunction]',mapTag='[object Map]',numberTag='[object Number]',nullTag='[object Null]',objectTag='[object Object]',promiseTag='[object Promise]',proxyTag='[object Proxy]',regexpTag='[object RegExp]',setTag='[object Set]',stringTag='[object String]',symbolTag='[object Symbol]',undefinedTag='[object Undefined]',weakMapTag='[object WeakMap]',weakSetTag='[object WeakSet]';var arrayBufferTag='[object ArrayBuffer]',dataViewTag='[object DataView]',float32Tag='[object Float32Array]',float64Tag='[object Float64Array]',int8Tag='[object Int8Array]',int16Tag='[object Int16Array]',int32Tag='[object Int32Array]',uint8Tag='[object Uint8Array]',uint8ClampedTag='[object Uint8ClampedArray]',uint16Tag='[object Uint16Array]',uint32Tag='[object Uint32Array]';var reEmptyStringLeading=/\b__p \+= '';/g,reEmptyStringMiddle=/\b(__p \+=) '' \+/g,reEmptyStringTrailing=/(__e\(.*?\)|\b__t\)) \+\n'';/g;var reEscapedHtml=/&(?:amp|lt|gt|quot|#39);/g,reUnescapedHtml=/[&<>"']/g,reHasEscapedHtml=RegExp(reEscapedHtml.source),reHasUnescapedHtml=RegExp(reUnescapedHtml.source);var reEscape=/<%-([\s\S]+?)%>/g,reEvaluate=/<%([\s\S]+?)%>/g,reInterpolate=/<%=([\s\S]+?)%>/g;var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;var reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reHasRegExpChar=RegExp(reRegExpChar.source);var reTrim=/^\s+|\s+$/g,reTrimStart=/^\s+/,reTrimEnd=/\s+$/;var reWrapComment=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,reWrapDetails=/\{\n\/\* \[wrapped with (.+)\] \*/,reSplitDetails=/,? & /;var reAsciiWord=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;var reEscapeChar=/\\(\\)?/g;var reEsTemplate=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g;var reFlags=/\w*$/;var reIsBadHex=/^[-+]0x[0-9a-f]+$/i;var reIsBinary=/^0b[01]+$/i;var reIsHostCtor=/^\[object .+?Constructor\]$/;var reIsOctal=/^0o[0-7]+$/i;var reIsUint=/^(?:0|[1-9]\d*)$/;var reLatin=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g;var reNoMatch=/($^)/;var reUnescapedString=/['\n\r\u2028\u2029\\]/g;var rsAstralRange='\\ud800-\\udfff',rsComboMarksRange='\\u0300-\\u036f',reComboHalfMarksRange='\\ufe20-\\ufe2f',rsComboSymbolsRange='\\u20d0-\\u20ff',rsComboRange=rsComboMarksRange+reComboHalfMarksRange+rsComboSymbolsRange,rsDingbatRange='\\u2700-\\u27bf',rsLowerRange='a-z\\xdf-\\xf6\\xf8-\\xff',rsMathOpRange='\\xac\\xb1\\xd7\\xf7',rsNonCharRange='\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf',rsPunctuationRange='\\u2000-\\u206f',rsSpaceRange=' \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000',rsUpperRange='A-Z\\xc0-\\xd6\\xd8-\\xde',rsVarRange='\\ufe0e\\ufe0f',rsBreakRange=rsMathOpRange+rsNonCharRange+rsPunctuationRange+rsSpaceRange;var rsApos="['\u2019]",rsAstral='['+rsAstralRange+']',rsBreak='['+rsBreakRange+']',rsCombo='['+rsComboRange+']',rsDigits='\\d+',rsDingbat='['+rsDingbatRange+']',rsLower='['+rsLowerRange+']',rsMisc='[^'+rsAstralRange+rsBreakRange+rsDigits+rsDingbatRange+rsLowerRange+rsUpperRange+']',rsFitz='\\ud83c[\\udffb-\\udfff]',rsModifier='(?:'+rsCombo+'|'+rsFitz+')',rsNonAstral='[^'+rsAstralRange+']',rsRegional='(?:\\ud83c[\\udde6-\\uddff]){2}',rsSurrPair='[\\ud800-\\udbff][\\udc00-\\udfff]',rsUpper='['+rsUpperRange+']',rsZWJ='\\u200d';var rsMiscLower='(?:'+rsLower+'|'+rsMisc+')',rsMiscUpper='(?:'+rsUpper+'|'+rsMisc+')',rsOptContrLower='(?:'+rsApos+'(?:d|ll|m|re|s|t|ve))?',rsOptContrUpper='(?:'+rsApos+'(?:D|LL|M|RE|S|T|VE))?',reOptMod=rsModifier+'?',rsOptVar='['+rsVarRange+']?',rsOptJoin='(?:'+rsZWJ+'(?:'+[rsNonAstral,rsRegional,rsSurrPair].join('|')+')'+rsOptVar+reOptMod+')*',rsOrdLower='\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])',rsOrdUpper='\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])',rsSeq=rsOptVar+reOptMod+rsOptJoin,rsEmoji='(?:'+[rsDingbat,rsRegional,rsSurrPair].join('|')+')'+rsSeq,rsSymbol='(?:'+[rsNonAstral+rsCombo+'?',rsCombo,rsRegional,rsSurrPair,rsAstral].join('|')+')';var reApos=RegExp(rsApos,'g');var reComboMark=RegExp(rsCombo,'g');var reUnicode=RegExp(rsFitz+'(?='+rsFitz+')|'+rsSymbol+rsSeq,'g');var reUnicodeWord=RegExp([rsUpper+'?'+rsLower+'+'+rsOptContrLower+'(?='+[rsBreak,rsUpper,'$'].join('|')+')',rsMiscUpper+'+'+rsOptContrUpper+'(?='+[rsBreak,rsUpper+rsMiscLower,'$'].join('|')+')',rsUpper+'?'+rsMiscLower+'+'+rsOptContrLower,rsUpper+'+'+rsOptContrUpper,rsOrdUpper,rsOrdLower,rsDigits,rsEmoji].join('|'),'g');var reHasUnicode=RegExp('['+rsZWJ+rsAstralRange+rsComboRange+rsVarRange+']');var reHasUnicodeWord=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;var contextProps=['Array','Buffer','DataView','Date','Error','Float32Array','Float64Array','Function','Int8Array','Int16Array','Int32Array','Map','Math','Object','Promise','RegExp','Set','String','Symbol','TypeError','Uint8Array','Uint8ClampedArray','Uint16Array','Uint32Array','WeakMap','_','clearTimeout','isFinite','parseInt','setTimeout'];var templateCounter=-1;var typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=true;typedArrayTags[argsTag]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=false;var cloneableTags={};cloneableTags[argsTag]=cloneableTags[arrayTag]=cloneableTags[arrayBufferTag]=cloneableTags[dataViewTag]=cloneableTags[boolTag]=cloneableTags[dateTag]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[mapTag]=cloneableTags[numberTag]=cloneableTags[objectTag]=cloneableTags[regexpTag]=cloneableTags[setTag]=cloneableTags[stringTag]=cloneableTags[symbolTag]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=true;cloneableTags[errorTag]=cloneableTags[funcTag]=cloneableTags[weakMapTag]=false;var deburredLetters={'\xc0':'A','\xc1':'A','\xc2':'A','\xc3':'A','\xc4':'A','\xc5':'A','\xe0':'a','\xe1':'a','\xe2':'a','\xe3':'a','\xe4':'a','\xe5':'a','\xc7':'C','\xe7':'c','\xd0':'D','\xf0':'d','\xc8':'E','\xc9':'E','\xca':'E','\xcb':'E','\xe8':'e','\xe9':'e','\xea':'e','\xeb':'e','\xcc':'I','\xcd':'I','\xce':'I','\xcf':'I','\xec':'i','\xed':'i','\xee':'i','\xef':'i','\xd1':'N','\xf1':'n','\xd2':'O','\xd3':'O','\xd4':'O','\xd5':'O','\xd6':'O','\xd8':'O','\xf2':'o','\xf3':'o','\xf4':'o','\xf5':'o','\xf6':'o','\xf8':'o','\xd9':'U','\xda':'U','\xdb':'U','\xdc':'U','\xf9':'u','\xfa':'u','\xfb':'u','\xfc':'u','\xdd':'Y','\xfd':'y','\xff':'y','\xc6':'Ae','\xe6':'ae','\xde':'Th','\xfe':'th','\xdf':'ss','\u0100':'A','\u0102':'A','\u0104':'A','\u0101':'a','\u0103':'a','\u0105':'a','\u0106':'C','\u0108':'C','\u010a':'C','\u010c':'C','\u0107':'c','\u0109':'c','\u010b':'c','\u010d':'c','\u010e':'D','\u0110':'D','\u010f':'d','\u0111':'d','\u0112':'E','\u0114':'E','\u0116':'E','\u0118':'E','\u011a':'E','\u0113':'e','\u0115':'e','\u0117':'e','\u0119':'e','\u011b':'e','\u011c':'G','\u011e':'G','\u0120':'G','\u0122':'G','\u011d':'g','\u011f':'g','\u0121':'g','\u0123':'g','\u0124':'H','\u0126':'H','\u0125':'h','\u0127':'h','\u0128':'I','\u012a':'I','\u012c':'I','\u012e':'I','\u0130':'I','\u0129':'i','\u012b':'i','\u012d':'i','\u012f':'i','\u0131':'i','\u0134':'J','\u0135':'j','\u0136':'K','\u0137':'k','\u0138':'k','\u0139':'L','\u013b':'L','\u013d':'L','\u013f':'L','\u0141':'L','\u013a':'l','\u013c':'l','\u013e':'l','\u0140':'l','\u0142':'l','\u0143':'N','\u0145':'N','\u0147':'N','\u014a':'N','\u0144':'n','\u0146':'n','\u0148':'n','\u014b':'n','\u014c':'O','\u014e':'O','\u0150':'O','\u014d':'o','\u014f':'o','\u0151':'o','\u0154':'R','\u0156':'R','\u0158':'R','\u0155':'r','\u0157':'r','\u0159':'r','\u015a':'S','\u015c':'S','\u015e':'S','\u0160':'S','\u015b':'s','\u015d':'s','\u015f':'s','\u0161':'s','\u0162':'T','\u0164':'T','\u0166':'T','\u0163':'t','\u0165':'t','\u0167':'t','\u0168':'U','\u016a':'U','\u016c':'U','\u016e':'U','\u0170':'U','\u0172':'U','\u0169':'u','\u016b':'u','\u016d':'u','\u016f':'u','\u0171':'u','\u0173':'u','\u0174':'W','\u0175':'w','\u0176':'Y','\u0177':'y','\u0178':'Y','\u0179':'Z','\u017b':'Z','\u017d':'Z','\u017a':'z','\u017c':'z','\u017e':'z','\u0132':'IJ','\u0133':'ij','\u0152':'Oe','\u0153':'oe','\u0149':"'n",'\u017f':'s'};var htmlEscapes={'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'};var htmlUnescapes={'&amp;':'&','&lt;':'<','&gt;':'>','&quot;':'"','&#39;':"'"};var stringEscapes={'\\':'\\',"'":"'",'\n':'n','\r':'r','\u2028':'u2028','\u2029':'u2029'};var freeParseFloat=parseFloat,freeParseInt=parseInt;var freeGlobal=typeof global=='object'&&global&&global.Object===Object&&global;var freeSelf=typeof self=='object'&&self&&self.Object===Object&&self;var root=freeGlobal||freeSelf||Function('return this')();var freeExports=true&&exports&&!exports.nodeType&&exports;var freeModule=freeExports&&"object"=='object'&&module&&!module.nodeType&&module;var moduleExports=freeModule&&freeModule.exports===freeExports;var freeProcess=moduleExports&&freeGlobal.process;var nodeUtil=function(){try{var types=freeModule&&freeModule.require&&freeModule.require('util').types;if(types){return types;}return freeProcess&&freeProcess.binding&&freeProcess.binding('util');}catch(e){}}();var nodeIsArrayBuffer=nodeUtil&&nodeUtil.isArrayBuffer,nodeIsDate=nodeUtil&&nodeUtil.isDate,nodeIsMap=nodeUtil&&nodeUtil.isMap,nodeIsRegExp=nodeUtil&&nodeUtil.isRegExp,nodeIsSet=nodeUtil&&nodeUtil.isSet,nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray;function apply(func,thisArg,args){switch(args.length){case 0:return func.call(thisArg);case 1:return func.call(thisArg,args[0]);case 2:return func.call(thisArg,args[0],args[1]);case 3:return func.call(thisArg,args[0],args[1],args[2]);}return func.apply(thisArg,args);}function arrayAggregator(array,setter,iteratee,accumulator){var index=-1,length=array==null?0:array.length;while(++index<length){var value=array[index];setter(accumulator,value,iteratee(value),array);}return accumulator;}function arrayEach(array,iteratee){var index=-1,length=array==null?0:array.length;while(++index<length){if(iteratee(array[index],index,array)===false){break;}}return array;}function arrayEachRight(array,iteratee){var length=array==null?0:array.length;while(length--){if(iteratee(array[length],length,array)===false){break;}}return array;}function arrayEvery(array,predicate){var index=-1,length=array==null?0:array.length;while(++index<length){if(!predicate(array[index],index,array)){return false;}}return true;}function arrayFilter(array,predicate){var index=-1,length=array==null?0:array.length,resIndex=0,result=[];while(++index<length){var value=array[index];if(predicate(value,index,array)){result[resIndex++]=value;}}return result;}function arrayIncludes(array,value){var length=array==null?0:array.length;return!!length&&baseIndexOf(array,value,0)>-1;}function arrayIncludesWith(array,value,comparator){var index=-1,length=array==null?0:array.length;while(++index<length){if(comparator(value,array[index])){return true;}}return false;}function arrayMap(array,iteratee){var index=-1,length=array==null?0:array.length,result=Array(length);while(++index<length){result[index]=iteratee(array[index],index,array);}return result;}function arrayPush(array,values){var index=-1,length=values.length,offset=array.length;while(++index<length){array[offset+index]=values[index];}return array;}function arrayReduce(array,iteratee,accumulator,initAccum){var index=-1,length=array==null?0:array.length;if(initAccum&&length){accumulator=array[++index];}while(++index<length){accumulator=iteratee(accumulator,array[index],index,array);}return accumulator;}function arrayReduceRight(array,iteratee,accumulator,initAccum){var length=array==null?0:array.length;if(initAccum&&length){accumulator=array[--length];}while(length--){accumulator=iteratee(accumulator,array[length],length,array);}return accumulator;}function arraySome(array,predicate){var index=-1,length=array==null?0:array.length;while(++index<length){if(predicate(array[index],index,array)){return true;}}return false;}var asciiSize=baseProperty('length');function asciiToArray(string){return string.split('');}function asciiWords(string){return string.match(reAsciiWord)||[];}function baseFindKey(collection,predicate,eachFunc){var result;eachFunc(collection,function(value,key,collection){if(predicate(value,key,collection)){result=key;return false;}});return result;}function baseFindIndex(array,predicate,fromIndex,fromRight){var length=array.length,index=fromIndex+(fromRight?1:-1);while(fromRight?index--:++index<length){if(predicate(array[index],index,array)){return index;}}return-1;}function baseIndexOf(array,value,fromIndex){return value===value?strictIndexOf(array,value,fromIndex):baseFindIndex(array,baseIsNaN,fromIndex);}function baseIndexOfWith(array,value,fromIndex,comparator){var index=fromIndex-1,length=array.length;while(++index<length){if(comparator(array[index],value)){return index;}}return-1;}function baseIsNaN(value){return value!==value;}function baseMean(array,iteratee){var length=array==null?0:array.length;return length?baseSum(array,iteratee)/length:NAN;}function baseProperty(key){return function(object){return object==null?undefined:object[key];};}function basePropertyOf(object){return function(key){return object==null?undefined:object[key];};}function baseReduce(collection,iteratee,accumulator,initAccum,eachFunc){eachFunc(collection,function(value,index,collection){accumulator=initAccum?(initAccum=false,value):iteratee(accumulator,value,index,collection);});return accumulator;}function baseSortBy(array,comparer){var length=array.length;array.sort(comparer);while(length--){array[length]=array[length].value;}return array;}function baseSum(array,iteratee){var result,index=-1,length=array.length;while(++index<length){var current=iteratee(array[index]);if(current!==undefined){result=result===undefined?current:result+current;}}return result;}function baseTimes(n,iteratee){var index=-1,result=Array(n);while(++index<n){result[index]=iteratee(index);}return result;}function baseToPairs(object,props){return arrayMap(props,function(key){return[key,object[key]];});}function baseUnary(func){return function(value){return func(value);};}function baseValues(object,props){return arrayMap(props,function(key){return object[key];});}function cacheHas(cache,key){return cache.has(key);}function charsStartIndex(strSymbols,chrSymbols){var index=-1,length=strSymbols.length;while(++index<length&&baseIndexOf(chrSymbols,strSymbols[index],0)>-1){}return index;}function charsEndIndex(strSymbols,chrSymbols){var index=strSymbols.length;while(index--&&baseIndexOf(chrSymbols,strSymbols[index],0)>-1){}return index;}function countHolders(array,placeholder){var length=array.length,result=0;while(length--){if(array[length]===placeholder){++result;}}return result;}var deburrLetter=basePropertyOf(deburredLetters);var escapeHtmlChar=basePropertyOf(htmlEscapes);function escapeStringChar(chr){return'\\'+stringEscapes[chr];}function getValue(object,key){return object==null?undefined:object[key];}function hasUnicode(string){return reHasUnicode.test(string);}function hasUnicodeWord(string){return reHasUnicodeWord.test(string);}function iteratorToArray(iterator){var data,result=[];while(!(data=iterator.next()).done){result.push(data.value);}return result;}function mapToArray(map){var index=-1,result=Array(map.size);map.forEach(function(value,key){result[++index]=[key,value];});return result;}function overArg(func,transform){return function(arg){return func(transform(arg));};}function replaceHolders(array,placeholder){var index=-1,length=array.length,resIndex=0,result=[];while(++index<length){var value=array[index];if(value===placeholder||value===PLACEHOLDER){array[index]=PLACEHOLDER;result[resIndex++]=index;}}return result;}function setToArray(set){var index=-1,result=Array(set.size);set.forEach(function(value){result[++index]=value;});return result;}function setToPairs(set){var index=-1,result=Array(set.size);set.forEach(function(value){result[++index]=[value,value];});return result;}function strictIndexOf(array,value,fromIndex){var index=fromIndex-1,length=array.length;while(++index<length){if(array[index]===value){return index;}}return-1;}function strictLastIndexOf(array,value,fromIndex){var index=fromIndex+1;while(index--){if(array[index]===value){return index;}}return index;}function stringSize(string){return hasUnicode(string)?unicodeSize(string):asciiSize(string);}function stringToArray(string){return hasUnicode(string)?unicodeToArray(string):asciiToArray(string);}var unescapeHtmlChar=basePropertyOf(htmlUnescapes);function unicodeSize(string){var result=reUnicode.lastIndex=0;while(reUnicode.test(string)){++result;}return result;}function unicodeToArray(string){return string.match(reUnicode)||[];}function unicodeWords(string){return string.match(reUnicodeWord)||[];}var runInContext=function runInContext(context){context=context==null?root:_.defaults(root.Object(),context,_.pick(root,contextProps));var Array=context.Array,Date=context.Date,Error=context.Error,Function=context.Function,Math=context.Math,Object=context.Object,RegExp=context.RegExp,String=context.String,TypeError=context.TypeError;var arrayProto=Array.prototype,funcProto=Function.prototype,objectProto=Object.prototype;var coreJsData=context['__core-js_shared__'];var funcToString=funcProto.toString;var hasOwnProperty=objectProto.hasOwnProperty;var idCounter=0;var maskSrcKey=function(){var uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||'');return uid?'Symbol(src)_1.'+uid:'';}();var nativeObjectToString=objectProto.toString;var objectCtorString=funcToString.call(Object);var oldDash=root._;var reIsNative=RegExp('^'+funcToString.call(hasOwnProperty).replace(reRegExpChar,'\\$&').replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,'$1.*?')+'$');var Buffer=moduleExports?context.Buffer:undefined,Symbol=context.Symbol,Uint8Array=context.Uint8Array,allocUnsafe=Buffer?Buffer.allocUnsafe:undefined,getPrototype=overArg(Object.getPrototypeOf,Object),objectCreate=Object.create,propertyIsEnumerable=objectProto.propertyIsEnumerable,splice=arrayProto.splice,spreadableSymbol=Symbol?Symbol.isConcatSpreadable:undefined,symIterator=Symbol?Symbol.iterator:undefined,symToStringTag=Symbol?Symbol.toStringTag:undefined;var defineProperty=function(){try{var func=getNative(Object,'defineProperty');func({},'',{});return func;}catch(e){}}();var ctxClearTimeout=context.clearTimeout!==root.clearTimeout&&context.clearTimeout,ctxNow=Date&&Date.now!==root.Date.now&&Date.now,ctxSetTimeout=context.setTimeout!==root.setTimeout&&context.setTimeout;var nativeCeil=Math.ceil,nativeFloor=Math.floor,nativeGetSymbols=Object.getOwnPropertySymbols,nativeIsBuffer=Buffer?Buffer.isBuffer:undefined,nativeIsFinite=context.isFinite,nativeJoin=arrayProto.join,nativeKeys=overArg(Object.keys,Object),nativeMax=Math.max,nativeMin=Math.min,nativeNow=Date.now,nativeParseInt=context.parseInt,nativeRandom=Math.random,nativeReverse=arrayProto.reverse;var DataView=getNative(context,'DataView'),Map=getNative(context,'Map'),Promise=getNative(context,'Promise'),Set=getNative(context,'Set'),WeakMap=getNative(context,'WeakMap'),nativeCreate=getNative(Object,'create');var metaMap=WeakMap&&new WeakMap();var realNames={};var dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map),promiseCtorString=toSource(Promise),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap);var symbolProto=Symbol?Symbol.prototype:undefined,symbolValueOf=symbolProto?symbolProto.valueOf:undefined,symbolToString=symbolProto?symbolProto.toString:undefined;function lodash(value){if(isObjectLike(value)&&!isArray(value)&&!(value instanceof LazyWrapper)){if(value instanceof LodashWrapper){return value;}if(hasOwnProperty.call(value,'__wrapped__')){return wrapperClone(value);}}return new LodashWrapper(value);}var baseCreate=function(){function object(){}return function(proto){if(!isObject(proto)){return{};}if(objectCreate){return objectCreate(proto);}object.prototype=proto;var result=new object();object.prototype=undefined;return result;};}();function baseLodash(){}function LodashWrapper(value,chainAll){this.__wrapped__=value;this.__actions__=[];this.__chain__=!!chainAll;this.__index__=0;this.__values__=undefined;}lodash.templateSettings={'escape':reEscape,'evaluate':reEvaluate,'interpolate':reInterpolate,'variable':'','imports':{'_':lodash}};lodash.prototype=baseLodash.prototype;lodash.prototype.constructor=lodash;LodashWrapper.prototype=baseCreate(baseLodash.prototype);LodashWrapper.prototype.constructor=LodashWrapper;function LazyWrapper(value){this.__wrapped__=value;this.__actions__=[];this.__dir__=1;this.__filtered__=false;this.__iteratees__=[];this.__takeCount__=MAX_ARRAY_LENGTH;this.__views__=[];}function lazyClone(){var result=new LazyWrapper(this.__wrapped__);result.__actions__=copyArray(this.__actions__);result.__dir__=this.__dir__;result.__filtered__=this.__filtered__;result.__iteratees__=copyArray(this.__iteratees__);result.__takeCount__=this.__takeCount__;result.__views__=copyArray(this.__views__);return result;}function lazyReverse(){if(this.__filtered__){var result=new LazyWrapper(this);result.__dir__=-1;result.__filtered__=true;}else{result=this.clone();result.__dir__*=-1;}return result;}function lazyValue(){var array=this.__wrapped__.value(),dir=this.__dir__,isArr=isArray(array),isRight=dir<0,arrLength=isArr?array.length:0,view=getView(0,arrLength,this.__views__),start=view.start,end=view.end,length=end-start,index=isRight?end:start-1,iteratees=this.__iteratees__,iterLength=iteratees.length,resIndex=0,takeCount=nativeMin(length,this.__takeCount__);if(!isArr||!isRight&&arrLength==length&&takeCount==length){return baseWrapperValue(array,this.__actions__);}var result=[];outer:while(length--&&resIndex<takeCount){index+=dir;var iterIndex=-1,value=array[index];while(++iterIndex<iterLength){var data=iteratees[iterIndex],iteratee=data.iteratee,type=data.type,computed=iteratee(value);if(type==LAZY_MAP_FLAG){value=computed;}else if(!computed){if(type==LAZY_FILTER_FLAG){continue outer;}else{break outer;}}}result[resIndex++]=value;}return result;}LazyWrapper.prototype=baseCreate(baseLodash.prototype);LazyWrapper.prototype.constructor=LazyWrapper;function Hash(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1]);}}function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{};this.size=0;}function hashDelete(key){var result=this.has(key)&&delete this.__data__[key];this.size-=result?1:0;return result;}function hashGet(key){var data=this.__data__;if(nativeCreate){var result=data[key];return result===HASH_UNDEFINED?undefined:result;}return hasOwnProperty.call(data,key)?data[key]:undefined;}function hashHas(key){var data=this.__data__;return nativeCreate?data[key]!==undefined:hasOwnProperty.call(data,key);}function hashSet(key,value){var data=this.__data__;this.size+=this.has(key)?0:1;data[key]=nativeCreate&&value===undefined?HASH_UNDEFINED:value;return this;}Hash.prototype.clear=hashClear;Hash.prototype['delete']=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;function ListCache(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1]);}}function listCacheClear(){this.__data__=[];this.size=0;}function listCacheDelete(key){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){return false;}var lastIndex=data.length-1;if(index==lastIndex){data.pop();}else{splice.call(data,index,1);}--this.size;return true;}function listCacheGet(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?undefined:data[index][1];}function listCacheHas(key){return assocIndexOf(this.__data__,key)>-1;}function listCacheSet(key,value){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){++this.size;data.push([key,value]);}else{data[index][1]=value;}return this;}ListCache.prototype.clear=listCacheClear;ListCache.prototype['delete']=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;function MapCache(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1]);}}function mapCacheClear(){this.size=0;this.__data__={'hash':new Hash(),'map':new(Map||ListCache)(),'string':new Hash()};}function mapCacheDelete(key){var result=getMapData(this,key)['delete'](key);this.size-=result?1:0;return result;}function mapCacheGet(key){return getMapData(this,key).get(key);}function mapCacheHas(key){return getMapData(this,key).has(key);}function mapCacheSet(key,value){var data=getMapData(this,key),size=data.size;data.set(key,value);this.size+=data.size==size?0:1;return this;}MapCache.prototype.clear=mapCacheClear;MapCache.prototype['delete']=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;function SetCache(values){var index=-1,length=values==null?0:values.length;this.__data__=new MapCache();while(++index<length){this.add(values[index]);}}function setCacheAdd(value){this.__data__.set(value,HASH_UNDEFINED);return this;}function setCacheHas(value){return this.__data__.has(value);}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd;SetCache.prototype.has=setCacheHas;function Stack(entries){var data=this.__data__=new ListCache(entries);this.size=data.size;}function stackClear(){this.__data__=new ListCache();this.size=0;}function stackDelete(key){var data=this.__data__,result=data['delete'](key);this.size=data.size;return result;}function stackGet(key){return this.__data__.get(key);}function stackHas(key){return this.__data__.has(key);}function stackSet(key,value){var data=this.__data__;if(data instanceof ListCache){var pairs=data.__data__;if(!Map||pairs.length<LARGE_ARRAY_SIZE-1){pairs.push([key,value]);this.size=++data.size;return this;}data=this.__data__=new MapCache(pairs);}data.set(key,value);this.size=data.size;return this;}Stack.prototype.clear=stackClear;Stack.prototype['delete']=stackDelete;Stack.prototype.get=stackGet;Stack.prototype.has=stackHas;Stack.prototype.set=stackSet;function arrayLikeKeys(value,inherited){var isArr=isArray(value),isArg=!isArr&&isArguments(value),isBuff=!isArr&&!isArg&&isBuffer(value),isType=!isArr&&!isArg&&!isBuff&&isTypedArray(value),skipIndexes=isArr||isArg||isBuff||isType,result=skipIndexes?baseTimes(value.length,String):[],length=result.length;for(var key in value){if((inherited||hasOwnProperty.call(value,key))&&!(skipIndexes&&(key=='length'||isBuff&&(key=='offset'||key=='parent')||isType&&(key=='buffer'||key=='byteLength'||key=='byteOffset')||isIndex(key,length)))){result.push(key);}}return result;}function arraySample(array){var length=array.length;return length?array[baseRandom(0,length-1)]:undefined;}function arraySampleSize(array,n){return shuffleSelf(copyArray(array),baseClamp(n,0,array.length));}function arrayShuffle(array){return shuffleSelf(copyArray(array));}function assignMergeValue(object,key,value){if(value!==undefined&&!eq(object[key],value)||value===undefined&&!(key in object)){baseAssignValue(object,key,value);}}function assignValue(object,key,value){var objValue=object[key];if(!(hasOwnProperty.call(object,key)&&eq(objValue,value))||value===undefined&&!(key in object)){baseAssignValue(object,key,value);}}function assocIndexOf(array,key){var length=array.length;while(length--){if(eq(array[length][0],key)){return length;}}return-1;}function baseAggregator(collection,setter,iteratee,accumulator){baseEach(collection,function(value,key,collection){setter(accumulator,value,iteratee(value),collection);});return accumulator;}function baseAssign(object,source){return object&&copyObject(source,keys(source),object);}function baseAssignIn(object,source){return object&&copyObject(source,keysIn(source),object);}function baseAssignValue(object,key,value){if(key=='__proto__'&&defineProperty){defineProperty(object,key,{'configurable':true,'enumerable':true,'value':value,'writable':true});}else{object[key]=value;}}function baseAt(object,paths){var index=-1,length=paths.length,result=Array(length),skip=object==null;while(++index<length){result[index]=skip?undefined:get(object,paths[index]);}return result;}function baseClamp(number,lower,upper){if(number===number){if(upper!==undefined){number=number<=upper?number:upper;}if(lower!==undefined){number=number>=lower?number:lower;}}return number;}function baseClone(value,bitmask,customizer,key,object,stack){var result,isDeep=bitmask&CLONE_DEEP_FLAG,isFlat=bitmask&CLONE_FLAT_FLAG,isFull=bitmask&CLONE_SYMBOLS_FLAG;if(customizer){result=object?customizer(value,key,object,stack):customizer(value);}if(result!==undefined){return result;}if(!isObject(value)){return value;}var isArr=isArray(value);if(isArr){result=initCloneArray(value);if(!isDeep){return copyArray(value,result);}}else{var tag=getTag(value),isFunc=tag==funcTag||tag==genTag;if(isBuffer(value)){return cloneBuffer(value,isDeep);}if(tag==objectTag||tag==argsTag||isFunc&&!object){result=isFlat||isFunc?{}:initCloneObject(value);if(!isDeep){return isFlat?copySymbolsIn(value,baseAssignIn(result,value)):copySymbols(value,baseAssign(result,value));}}else{if(!cloneableTags[tag]){return object?value:{};}result=initCloneByTag(value,tag,isDeep);}}stack||(stack=new Stack());var stacked=stack.get(value);if(stacked){return stacked;}stack.set(value,result);if(isSet(value)){value.forEach(function(subValue){result.add(baseClone(subValue,bitmask,customizer,subValue,value,stack));});return result;}if(isMap(value)){value.forEach(function(subValue,key){result.set(key,baseClone(subValue,bitmask,customizer,key,value,stack));});return result;}var keysFunc=isFull?isFlat?getAllKeysIn:getAllKeys:isFlat?keysIn:keys;var props=isArr?undefined:keysFunc(value);arrayEach(props||value,function(subValue,key){if(props){key=subValue;subValue=value[key];}assignValue(result,key,baseClone(subValue,bitmask,customizer,key,value,stack));});return result;}function baseConforms(source){var props=keys(source);return function(object){return baseConformsTo(object,source,props);};}function baseConformsTo(object,source,props){var length=props.length;if(object==null){return!length;}object=Object(object);while(length--){var key=props[length],predicate=source[key],value=object[key];if(value===undefined&&!(key in object)||!predicate(value)){return false;}}return true;}function baseDelay(func,wait,args){if(typeof func!='function'){throw new TypeError(FUNC_ERROR_TEXT);}return setTimeout(function(){func.apply(undefined,args);},wait);}function baseDifference(array,values,iteratee,comparator){var index=-1,includes=arrayIncludes,isCommon=true,length=array.length,result=[],valuesLength=values.length;if(!length){return result;}if(iteratee){values=arrayMap(values,baseUnary(iteratee));}if(comparator){includes=arrayIncludesWith;isCommon=false;}else if(values.length>=LARGE_ARRAY_SIZE){includes=cacheHas;isCommon=false;values=new SetCache(values);}outer:while(++index<length){var value=array[index],computed=iteratee==null?value:iteratee(value);value=comparator||value!==0?value:0;if(isCommon&&computed===computed){var valuesIndex=valuesLength;while(valuesIndex--){if(values[valuesIndex]===computed){continue outer;}}result.push(value);}else if(!includes(values,computed,comparator)){result.push(value);}}return result;}var baseEach=createBaseEach(baseForOwn);var baseEachRight=createBaseEach(baseForOwnRight,true);function baseEvery(collection,predicate){var result=true;baseEach(collection,function(value,index,collection){result=!!predicate(value,index,collection);return result;});return result;}function baseExtremum(array,iteratee,comparator){var index=-1,length=array.length;while(++index<length){var value=array[index],current=iteratee(value);if(current!=null&&(computed===undefined?current===current&&!isSymbol(current):comparator(current,computed))){var computed=current,result=value;}}return result;}function baseFill(array,value,start,end){var length=array.length;start=toInteger(start);if(start<0){start=-start>length?0:length+start;}end=end===undefined||end>length?length:toInteger(end);if(end<0){end+=length;}end=start>end?0:toLength(end);while(start<end){array[start++]=value;}return array;}function baseFilter(collection,predicate){var result=[];baseEach(collection,function(value,index,collection){if(predicate(value,index,collection)){result.push(value);}});return result;}function baseFlatten(array,depth,predicate,isStrict,result){var index=-1,length=array.length;predicate||(predicate=isFlattenable);result||(result=[]);while(++index<length){var value=array[index];if(depth>0&&predicate(value)){if(depth>1){baseFlatten(value,depth-1,predicate,isStrict,result);}else{arrayPush(result,value);}}else if(!isStrict){result[result.length]=value;}}return result;}var baseFor=createBaseFor();var baseForRight=createBaseFor(true);function baseForOwn(object,iteratee){return object&&baseFor(object,iteratee,keys);}function baseForOwnRight(object,iteratee){return object&&baseForRight(object,iteratee,keys);}function baseFunctions(object,props){return arrayFilter(props,function(key){return isFunction(object[key]);});}function baseGet(object,path){path=castPath(path,object);var index=0,length=path.length;while(object!=null&&index<length){object=object[toKey(path[index++])];}return index&&index==length?object:undefined;}function baseGetAllKeys(object,keysFunc,symbolsFunc){var result=keysFunc(object);return isArray(object)?result:arrayPush(result,symbolsFunc(object));}function baseGetTag(value){if(value==null){return value===undefined?undefinedTag:nullTag;}return symToStringTag&&symToStringTag in Object(value)?getRawTag(value):objectToString(value);}function baseGt(value,other){return value>other;}function baseHas(object,key){return object!=null&&hasOwnProperty.call(object,key);}function baseHasIn(object,key){return object!=null&&key in Object(object);}function baseInRange(number,start,end){return number>=nativeMin(start,end)&&number<nativeMax(start,end);}function baseIntersection(arrays,iteratee,comparator){var includes=comparator?arrayIncludesWith:arrayIncludes,length=arrays[0].length,othLength=arrays.length,othIndex=othLength,caches=Array(othLength),maxLength=Infinity,result=[];while(othIndex--){var array=arrays[othIndex];if(othIndex&&iteratee){array=arrayMap(array,baseUnary(iteratee));}maxLength=nativeMin(array.length,maxLength);caches[othIndex]=!comparator&&(iteratee||length>=120&&array.length>=120)?new SetCache(othIndex&&array):undefined;}array=arrays[0];var index=-1,seen=caches[0];outer:while(++index<length&&result.length<maxLength){var value=array[index],computed=iteratee?iteratee(value):value;value=comparator||value!==0?value:0;if(!(seen?cacheHas(seen,computed):includes(result,computed,comparator))){othIndex=othLength;while(--othIndex){var cache=caches[othIndex];if(!(cache?cacheHas(cache,computed):includes(arrays[othIndex],computed,comparator))){continue outer;}}if(seen){seen.push(computed);}result.push(value);}}return result;}function baseInverter(object,setter,iteratee,accumulator){baseForOwn(object,function(value,key,object){setter(accumulator,iteratee(value),key,object);});return accumulator;}function baseInvoke(object,path,args){path=castPath(path,object);object=parent(object,path);var func=object==null?object:object[toKey(last(path))];return func==null?undefined:apply(func,object,args);}function baseIsArguments(value){return isObjectLike(value)&&baseGetTag(value)==argsTag;}function baseIsArrayBuffer(value){return isObjectLike(value)&&baseGetTag(value)==arrayBufferTag;}function baseIsDate(value){return isObjectLike(value)&&baseGetTag(value)==dateTag;}function baseIsEqual(value,other,bitmask,customizer,stack){if(value===other){return true;}if(value==null||other==null||!isObjectLike(value)&&!isObjectLike(other)){return value!==value&&other!==other;}return baseIsEqualDeep(value,other,bitmask,customizer,baseIsEqual,stack);}function baseIsEqualDeep(object,other,bitmask,customizer,equalFunc,stack){var objIsArr=isArray(object),othIsArr=isArray(other),objTag=objIsArr?arrayTag:getTag(object),othTag=othIsArr?arrayTag:getTag(other);objTag=objTag==argsTag?objectTag:objTag;othTag=othTag==argsTag?objectTag:othTag;var objIsObj=objTag==objectTag,othIsObj=othTag==objectTag,isSameTag=objTag==othTag;if(isSameTag&&isBuffer(object)){if(!isBuffer(other)){return false;}objIsArr=true;objIsObj=false;}if(isSameTag&&!objIsObj){stack||(stack=new Stack());return objIsArr||isTypedArray(object)?equalArrays(object,other,bitmask,customizer,equalFunc,stack):equalByTag(object,other,objTag,bitmask,customizer,equalFunc,stack);}if(!(bitmask&COMPARE_PARTIAL_FLAG)){var objIsWrapped=objIsObj&&hasOwnProperty.call(object,'__wrapped__'),othIsWrapped=othIsObj&&hasOwnProperty.call(other,'__wrapped__');if(objIsWrapped||othIsWrapped){var objUnwrapped=objIsWrapped?object.value():object,othUnwrapped=othIsWrapped?other.value():other;stack||(stack=new Stack());return equalFunc(objUnwrapped,othUnwrapped,bitmask,customizer,stack);}}if(!isSameTag){return false;}stack||(stack=new Stack());return equalObjects(object,other,bitmask,customizer,equalFunc,stack);}function baseIsMap(value){return isObjectLike(value)&&getTag(value)==mapTag;}function baseIsMatch(object,source,matchData,customizer){var index=matchData.length,length=index,noCustomizer=!customizer;if(object==null){return!length;}object=Object(object);while(index--){var data=matchData[index];if(noCustomizer&&data[2]?data[1]!==object[data[0]]:!(data[0]in object)){return false;}}while(++index<length){data=matchData[index];var key=data[0],objValue=object[key],srcValue=data[1];if(noCustomizer&&data[2]){if(objValue===undefined&&!(key in object)){return false;}}else{var stack=new Stack();if(customizer){var result=customizer(objValue,srcValue,key,object,source,stack);}if(!(result===undefined?baseIsEqual(srcValue,objValue,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG,customizer,stack):result)){return false;}}}return true;}function baseIsNative(value){if(!isObject(value)||isMasked(value)){return false;}var pattern=isFunction(value)?reIsNative:reIsHostCtor;return pattern.test(toSource(value));}function baseIsRegExp(value){return isObjectLike(value)&&baseGetTag(value)==regexpTag;}function baseIsSet(value){return isObjectLike(value)&&getTag(value)==setTag;}function baseIsTypedArray(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[baseGetTag(value)];}function baseIteratee(value){if(typeof value=='function'){return value;}if(value==null){return identity;}if(typeof value=='object'){return isArray(value)?baseMatchesProperty(value[0],value[1]):baseMatches(value);}return property(value);}function baseKeys(object){if(!isPrototype(object)){return nativeKeys(object);}var result=[];for(var key in Object(object)){if(hasOwnProperty.call(object,key)&&key!='constructor'){result.push(key);}}return result;}function baseKeysIn(object){if(!isObject(object)){return nativeKeysIn(object);}var isProto=isPrototype(object),result=[];for(var key in object){if(!(key=='constructor'&&(isProto||!hasOwnProperty.call(object,key)))){result.push(key);}}return result;}function baseLt(value,other){return value<other;}function baseMap(collection,iteratee){var index=-1,result=isArrayLike(collection)?Array(collection.length):[];baseEach(collection,function(value,key,collection){result[++index]=iteratee(value,key,collection);});return result;}function baseMatches(source){var matchData=getMatchData(source);if(matchData.length==1&&matchData[0][2]){return matchesStrictComparable(matchData[0][0],matchData[0][1]);}return function(object){return object===source||baseIsMatch(object,source,matchData);};}function baseMatchesProperty(path,srcValue){if(isKey(path)&&isStrictComparable(srcValue)){return matchesStrictComparable(toKey(path),srcValue);}return function(object){var objValue=get(object,path);return objValue===undefined&&objValue===srcValue?hasIn(object,path):baseIsEqual(srcValue,objValue,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG);};}function baseMerge(object,source,srcIndex,customizer,stack){if(object===source){return;}baseFor(source,function(srcValue,key){if(isObject(srcValue)){stack||(stack=new Stack());baseMergeDeep(object,source,key,srcIndex,baseMerge,customizer,stack);}else{var newValue=customizer?customizer(safeGet(object,key),srcValue,key+'',object,source,stack):undefined;if(newValue===undefined){newValue=srcValue;}assignMergeValue(object,key,newValue);}},keysIn);}function baseMergeDeep(object,source,key,srcIndex,mergeFunc,customizer,stack){var objValue=safeGet(object,key),srcValue=safeGet(source,key),stacked=stack.get(srcValue);if(stacked){assignMergeValue(object,key,stacked);return;}var newValue=customizer?customizer(objValue,srcValue,key+'',object,source,stack):undefined;var isCommon=newValue===undefined;if(isCommon){var isArr=isArray(srcValue),isBuff=!isArr&&isBuffer(srcValue),isTyped=!isArr&&!isBuff&&isTypedArray(srcValue);newValue=srcValue;if(isArr||isBuff||isTyped){if(isArray(objValue)){newValue=objValue;}else if(isArrayLikeObject(objValue)){newValue=copyArray(objValue);}else if(isBuff){isCommon=false;newValue=cloneBuffer(srcValue,true);}else if(isTyped){isCommon=false;newValue=cloneTypedArray(srcValue,true);}else{newValue=[];}}else if(isPlainObject(srcValue)||isArguments(srcValue)){newValue=objValue;if(isArguments(objValue)){newValue=toPlainObject(objValue);}else if(!isObject(objValue)||isFunction(objValue)){newValue=initCloneObject(srcValue);}}else{isCommon=false;}}if(isCommon){stack.set(srcValue,newValue);mergeFunc(newValue,srcValue,srcIndex,customizer,stack);stack['delete'](srcValue);}assignMergeValue(object,key,newValue);}function baseNth(array,n){var length=array.length;if(!length){return;}n+=n<0?length:0;return isIndex(n,length)?array[n]:undefined;}function baseOrderBy(collection,iteratees,orders){var index=-1;iteratees=arrayMap(iteratees.length?iteratees:[identity],baseUnary(getIteratee()));var result=baseMap(collection,function(value,key,collection){var criteria=arrayMap(iteratees,function(iteratee){return iteratee(value);});return{'criteria':criteria,'index':++index,'value':value};});return baseSortBy(result,function(object,other){return compareMultiple(object,other,orders);});}function basePick(object,paths){return basePickBy(object,paths,function(value,path){return hasIn(object,path);});}function basePickBy(object,paths,predicate){var index=-1,length=paths.length,result={};while(++index<length){var path=paths[index],value=baseGet(object,path);if(predicate(value,path)){baseSet(result,castPath(path,object),value);}}return result;}function basePropertyDeep(path){return function(object){return baseGet(object,path);};}function basePullAll(array,values,iteratee,comparator){var indexOf=comparator?baseIndexOfWith:baseIndexOf,index=-1,length=values.length,seen=array;if(array===values){values=copyArray(values);}if(iteratee){seen=arrayMap(array,baseUnary(iteratee));}while(++index<length){var fromIndex=0,value=values[index],computed=iteratee?iteratee(value):value;while((fromIndex=indexOf(seen,computed,fromIndex,comparator))>-1){if(seen!==array){splice.call(seen,fromIndex,1);}splice.call(array,fromIndex,1);}}return array;}function basePullAt(array,indexes){var length=array?indexes.length:0,lastIndex=length-1;while(length--){var index=indexes[length];if(length==lastIndex||index!==previous){var previous=index;if(isIndex(index)){splice.call(array,index,1);}else{baseUnset(array,index);}}}return array;}function baseRandom(lower,upper){return lower+nativeFloor(nativeRandom()*(upper-lower+1));}function baseRange(start,end,step,fromRight){var index=-1,length=nativeMax(nativeCeil((end-start)/(step||1)),0),result=Array(length);while(length--){result[fromRight?length:++index]=start;start+=step;}return result;}function baseRepeat(string,n){var result='';if(!string||n<1||n>MAX_SAFE_INTEGER){return result;}do{if(n%2){result+=string;}n=nativeFloor(n/2);if(n){string+=string;}}while(n);return result;}function baseRest(func,start){return setToString(overRest(func,start,identity),func+'');}function baseSample(collection){return arraySample(values(collection));}function baseSampleSize(collection,n){var array=values(collection);return shuffleSelf(array,baseClamp(n,0,array.length));}function baseSet(object,path,value,customizer){if(!isObject(object)){return object;}path=castPath(path,object);var index=-1,length=path.length,lastIndex=length-1,nested=object;while(nested!=null&&++index<length){var key=toKey(path[index]),newValue=value;if(index!=lastIndex){var objValue=nested[key];newValue=customizer?customizer(objValue,key,nested):undefined;if(newValue===undefined){newValue=isObject(objValue)?objValue:isIndex(path[index+1])?[]:{};}}assignValue(nested,key,newValue);nested=nested[key];}return object;}var baseSetData=!metaMap?identity:function(func,data){metaMap.set(func,data);return func;};var baseSetToString=!defineProperty?identity:function(func,string){return defineProperty(func,'toString',{'configurable':true,'enumerable':false,'value':constant(string),'writable':true});};function baseShuffle(collection){return shuffleSelf(values(collection));}function baseSlice(array,start,end){var index=-1,length=array.length;if(start<0){start=-start>length?0:length+start;}end=end>length?length:end;if(end<0){end+=length;}length=start>end?0:end-start>>>0;start>>>=0;var result=Array(length);while(++index<length){result[index]=array[index+start];}return result;}function baseSome(collection,predicate){var result;baseEach(collection,function(value,index,collection){result=predicate(value,index,collection);return!result;});return!!result;}function baseSortedIndex(array,value,retHighest){var low=0,high=array==null?low:array.length;if(typeof value=='number'&&value===value&&high<=HALF_MAX_ARRAY_LENGTH){while(low<high){var mid=low+high>>>1,computed=array[mid];if(computed!==null&&!isSymbol(computed)&&(retHighest?computed<=value:computed<value)){low=mid+1;}else{high=mid;}}return high;}return baseSortedIndexBy(array,value,identity,retHighest);}function baseSortedIndexBy(array,value,iteratee,retHighest){value=iteratee(value);var low=0,high=array==null?0:array.length,valIsNaN=value!==value,valIsNull=value===null,valIsSymbol=isSymbol(value),valIsUndefined=value===undefined;while(low<high){var mid=nativeFloor((low+high)/2),computed=iteratee(array[mid]),othIsDefined=computed!==undefined,othIsNull=computed===null,othIsReflexive=computed===computed,othIsSymbol=isSymbol(computed);if(valIsNaN){var setLow=retHighest||othIsReflexive;}else if(valIsUndefined){setLow=othIsReflexive&&(retHighest||othIsDefined);}else if(valIsNull){setLow=othIsReflexive&&othIsDefined&&(retHighest||!othIsNull);}else if(valIsSymbol){setLow=othIsReflexive&&othIsDefined&&!othIsNull&&(retHighest||!othIsSymbol);}else if(othIsNull||othIsSymbol){setLow=false;}else{setLow=retHighest?computed<=value:computed<value;}if(setLow){low=mid+1;}else{high=mid;}}return nativeMin(high,MAX_ARRAY_INDEX);}function baseSortedUniq(array,iteratee){var index=-1,length=array.length,resIndex=0,result=[];while(++index<length){var value=array[index],computed=iteratee?iteratee(value):value;if(!index||!eq(computed,seen)){var seen=computed;result[resIndex++]=value===0?0:value;}}return result;}function baseToNumber(value){if(typeof value=='number'){return value;}if(isSymbol(value)){return NAN;}return+value;}function baseToString(value){if(typeof value=='string'){return value;}if(isArray(value)){return arrayMap(value,baseToString)+'';}if(isSymbol(value)){return symbolToString?symbolToString.call(value):'';}var result=value+'';return result=='0'&&1/value==-INFINITY?'-0':result;}function baseUniq(array,iteratee,comparator){var index=-1,includes=arrayIncludes,length=array.length,isCommon=true,result=[],seen=result;if(comparator){isCommon=false;includes=arrayIncludesWith;}else if(length>=LARGE_ARRAY_SIZE){var set=iteratee?null:createSet(array);if(set){return setToArray(set);}isCommon=false;includes=cacheHas;seen=new SetCache();}else{seen=iteratee?[]:result;}outer:while(++index<length){var value=array[index],computed=iteratee?iteratee(value):value;value=comparator||value!==0?value:0;if(isCommon&&computed===computed){var seenIndex=seen.length;while(seenIndex--){if(seen[seenIndex]===computed){continue outer;}}if(iteratee){seen.push(computed);}result.push(value);}else if(!includes(seen,computed,comparator)){if(seen!==result){seen.push(computed);}result.push(value);}}return result;}function baseUnset(object,path){path=castPath(path,object);object=parent(object,path);return object==null||delete object[toKey(last(path))];}function baseUpdate(object,path,updater,customizer){return baseSet(object,path,updater(baseGet(object,path)),customizer);}function baseWhile(array,predicate,isDrop,fromRight){var length=array.length,index=fromRight?length:-1;while((fromRight?index--:++index<length)&&predicate(array[index],index,array)){}return isDrop?baseSlice(array,fromRight?0:index,fromRight?index+1:length):baseSlice(array,fromRight?index+1:0,fromRight?length:index);}function baseWrapperValue(value,actions){var result=value;if(result instanceof LazyWrapper){result=result.value();}return arrayReduce(actions,function(result,action){return action.func.apply(action.thisArg,arrayPush([result],action.args));},result);}function baseXor(arrays,iteratee,comparator){var length=arrays.length;if(length<2){return length?baseUniq(arrays[0]):[];}var index=-1,result=Array(length);while(++index<length){var array=arrays[index],othIndex=-1;while(++othIndex<length){if(othIndex!=index){result[index]=baseDifference(result[index]||array,arrays[othIndex],iteratee,comparator);}}}return baseUniq(baseFlatten(result,1),iteratee,comparator);}function baseZipObject(props,values,assignFunc){var index=-1,length=props.length,valsLength=values.length,result={};while(++index<length){var value=index<valsLength?values[index]:undefined;assignFunc(result,props[index],value);}return result;}function castArrayLikeObject(value){return isArrayLikeObject(value)?value:[];}function castFunction(value){return typeof value=='function'?value:identity;}function castPath(value,object){if(isArray(value)){return value;}return isKey(value,object)?[value]:stringToPath(toString(value));}var castRest=baseRest;function castSlice(array,start,end){var length=array.length;end=end===undefined?length:end;return!start&&end>=length?array:baseSlice(array,start,end);}var clearTimeout=ctxClearTimeout||function(id){return root.clearTimeout(id);};function cloneBuffer(buffer,isDeep){if(isDeep){return buffer.slice();}var length=buffer.length,result=allocUnsafe?allocUnsafe(length):new buffer.constructor(length);buffer.copy(result);return result;}function cloneArrayBuffer(arrayBuffer){var result=new arrayBuffer.constructor(arrayBuffer.byteLength);new Uint8Array(result).set(new Uint8Array(arrayBuffer));return result;}function cloneDataView(dataView,isDeep){var buffer=isDeep?cloneArrayBuffer(dataView.buffer):dataView.buffer;return new dataView.constructor(buffer,dataView.byteOffset,dataView.byteLength);}function cloneRegExp(regexp){var result=new regexp.constructor(regexp.source,reFlags.exec(regexp));result.lastIndex=regexp.lastIndex;return result;}function cloneSymbol(symbol){return symbolValueOf?Object(symbolValueOf.call(symbol)):{};}function cloneTypedArray(typedArray,isDeep){var buffer=isDeep?cloneArrayBuffer(typedArray.buffer):typedArray.buffer;return new typedArray.constructor(buffer,typedArray.byteOffset,typedArray.length);}function compareAscending(value,other){if(value!==other){var valIsDefined=value!==undefined,valIsNull=value===null,valIsReflexive=value===value,valIsSymbol=isSymbol(value);var othIsDefined=other!==undefined,othIsNull=other===null,othIsReflexive=other===other,othIsSymbol=isSymbol(other);if(!othIsNull&&!othIsSymbol&&!valIsSymbol&&value>other||valIsSymbol&&othIsDefined&&othIsReflexive&&!othIsNull&&!othIsSymbol||valIsNull&&othIsDefined&&othIsReflexive||!valIsDefined&&othIsReflexive||!valIsReflexive){return 1;}if(!valIsNull&&!valIsSymbol&&!othIsSymbol&&value<other||othIsSymbol&&valIsDefined&&valIsReflexive&&!valIsNull&&!valIsSymbol||othIsNull&&valIsDefined&&valIsReflexive||!othIsDefined&&valIsReflexive||!othIsReflexive){return-1;}}return 0;}function compareMultiple(object,other,orders){var index=-1,objCriteria=object.criteria,othCriteria=other.criteria,length=objCriteria.length,ordersLength=orders.length;while(++index<length){var result=compareAscending(objCriteria[index],othCriteria[index]);if(result){if(index>=ordersLength){return result;}var order=orders[index];return result*(order=='desc'?-1:1);}}return object.index-other.index;}function composeArgs(args,partials,holders,isCurried){var argsIndex=-1,argsLength=args.length,holdersLength=holders.length,leftIndex=-1,leftLength=partials.length,rangeLength=nativeMax(argsLength-holdersLength,0),result=Array(leftLength+rangeLength),isUncurried=!isCurried;while(++leftIndex<leftLength){result[leftIndex]=partials[leftIndex];}while(++argsIndex<holdersLength){if(isUncurried||argsIndex<argsLength){result[holders[argsIndex]]=args[argsIndex];}}while(rangeLength--){result[leftIndex++]=args[argsIndex++];}return result;}function composeArgsRight(args,partials,holders,isCurried){var argsIndex=-1,argsLength=args.length,holdersIndex=-1,holdersLength=holders.length,rightIndex=-1,rightLength=partials.length,rangeLength=nativeMax(argsLength-holdersLength,0),result=Array(rangeLength+rightLength),isUncurried=!isCurried;while(++argsIndex<rangeLength){result[argsIndex]=args[argsIndex];}var offset=argsIndex;while(++rightIndex<rightLength){result[offset+rightIndex]=partials[rightIndex];}while(++holdersIndex<holdersLength){if(isUncurried||argsIndex<argsLength){result[offset+holders[holdersIndex]]=args[argsIndex++];}}return result;}function copyArray(source,array){var index=-1,length=source.length;array||(array=Array(length));while(++index<length){array[index]=source[index];}return array;}function copyObject(source,props,object,customizer){var isNew=!object;object||(object={});var index=-1,length=props.length;while(++index<length){var key=props[index];var newValue=customizer?customizer(object[key],source[key],key,object,source):undefined;if(newValue===undefined){newValue=source[key];}if(isNew){baseAssignValue(object,key,newValue);}else{assignValue(object,key,newValue);}}return object;}function copySymbols(source,object){return copyObject(source,getSymbols(source),object);}function copySymbolsIn(source,object){return copyObject(source,getSymbolsIn(source),object);}function createAggregator(setter,initializer){return function(collection,iteratee){var func=isArray(collection)?arrayAggregator:baseAggregator,accumulator=initializer?initializer():{};return func(collection,setter,getIteratee(iteratee,2),accumulator);};}function createAssigner(assigner){return baseRest(function(object,sources){var index=-1,length=sources.length,customizer=length>1?sources[length-1]:undefined,guard=length>2?sources[2]:undefined;customizer=assigner.length>3&&typeof customizer=='function'?(length--,customizer):undefined;if(guard&&isIterateeCall(sources[0],sources[1],guard)){customizer=length<3?undefined:customizer;length=1;}object=Object(object);while(++index<length){var source=sources[index];if(source){assigner(object,source,index,customizer);}}return object;});}function createBaseEach(eachFunc,fromRight){return function(collection,iteratee){if(collection==null){return collection;}if(!isArrayLike(collection)){return eachFunc(collection,iteratee);}var length=collection.length,index=fromRight?length:-1,iterable=Object(collection);while(fromRight?index--:++index<length){if(iteratee(iterable[index],index,iterable)===false){break;}}return collection;};}function createBaseFor(fromRight){return function(object,iteratee,keysFunc){var index=-1,iterable=Object(object),props=keysFunc(object),length=props.length;while(length--){var key=props[fromRight?length:++index];if(iteratee(iterable[key],key,iterable)===false){break;}}return object;};}function createBind(func,bitmask,thisArg){var isBind=bitmask&WRAP_BIND_FLAG,Ctor=createCtor(func);function wrapper(){var fn=this&&this!==root&&this instanceof wrapper?Ctor:func;return fn.apply(isBind?thisArg:this,arguments);}return wrapper;}function createCaseFirst(methodName){return function(string){string=toString(string);var strSymbols=hasUnicode(string)?stringToArray(string):undefined;var chr=strSymbols?strSymbols[0]:string.charAt(0);var trailing=strSymbols?castSlice(strSymbols,1).join(''):string.slice(1);return chr[methodName]()+trailing;};}function createCompounder(callback){return function(string){return arrayReduce(words(deburr(string).replace(reApos,'')),callback,'');};}function createCtor(Ctor){return function(){var args=arguments;switch(args.length){case 0:return new Ctor();case 1:return new Ctor(args[0]);case 2:return new Ctor(args[0],args[1]);case 3:return new Ctor(args[0],args[1],args[2]);case 4:return new Ctor(args[0],args[1],args[2],args[3]);case 5:return new Ctor(args[0],args[1],args[2],args[3],args[4]);case 6:return new Ctor(args[0],args[1],args[2],args[3],args[4],args[5]);case 7:return new Ctor(args[0],args[1],args[2],args[3],args[4],args[5],args[6]);}var thisBinding=baseCreate(Ctor.prototype),result=Ctor.apply(thisBinding,args);return isObject(result)?result:thisBinding;};}function createCurry(func,bitmask,arity){var Ctor=createCtor(func);function wrapper(){var length=arguments.length,args=Array(length),index=length,placeholder=getHolder(wrapper);while(index--){args[index]=arguments[index];}var holders=length<3&&args[0]!==placeholder&&args[length-1]!==placeholder?[]:replaceHolders(args,placeholder);length-=holders.length;if(length<arity){return createRecurry(func,bitmask,createHybrid,wrapper.placeholder,undefined,args,holders,undefined,undefined,arity-length);}var fn=this&&this!==root&&this instanceof wrapper?Ctor:func;return apply(fn,this,args);}return wrapper;}function createFind(findIndexFunc){return function(collection,predicate,fromIndex){var iterable=Object(collection);if(!isArrayLike(collection)){var iteratee=getIteratee(predicate,3);collection=keys(collection);predicate=function(key){return iteratee(iterable[key],key,iterable);};}var index=findIndexFunc(collection,predicate,fromIndex);return index>-1?iterable[iteratee?collection[index]:index]:undefined;};}function createFlow(fromRight){return flatRest(function(funcs){var length=funcs.length,index=length,prereq=LodashWrapper.prototype.thru;if(fromRight){funcs.reverse();}while(index--){var func=funcs[index];if(typeof func!='function'){throw new TypeError(FUNC_ERROR_TEXT);}if(prereq&&!wrapper&&getFuncName(func)=='wrapper'){var wrapper=new LodashWrapper([],true);}}index=wrapper?index:length;while(++index<length){func=funcs[index];var funcName=getFuncName(func),data=funcName=='wrapper'?getData(func):undefined;if(data&&isLaziable(data[0])&&data[1]==(WRAP_ARY_FLAG|WRAP_CURRY_FLAG|WRAP_PARTIAL_FLAG|WRAP_REARG_FLAG)&&!data[4].length&&data[9]==1){wrapper=wrapper[getFuncName(data[0])].apply(wrapper,data[3]);}else{wrapper=func.length==1&&isLaziable(func)?wrapper[funcName]():wrapper.thru(func);}}return function(){var args=arguments,value=args[0];if(wrapper&&args.length==1&&isArray(value)){return wrapper.plant(value).value();}var index=0,result=length?funcs[index].apply(this,args):value;while(++index<length){result=funcs[index].call(this,result);}return result;};});}function createHybrid(func,bitmask,thisArg,partials,holders,partialsRight,holdersRight,argPos,ary,arity){var isAry=bitmask&WRAP_ARY_FLAG,isBind=bitmask&WRAP_BIND_FLAG,isBindKey=bitmask&WRAP_BIND_KEY_FLAG,isCurried=bitmask&(WRAP_CURRY_FLAG|WRAP_CURRY_RIGHT_FLAG),isFlip=bitmask&WRAP_FLIP_FLAG,Ctor=isBindKey?undefined:createCtor(func);function wrapper(){var length=arguments.length,args=Array(length),index=length;while(index--){args[index]=arguments[index];}if(isCurried){var placeholder=getHolder(wrapper),holdersCount=countHolders(args,placeholder);}if(partials){args=composeArgs(args,partials,holders,isCurried);}if(partialsRight){args=composeArgsRight(args,partialsRight,holdersRight,isCurried);}length-=holdersCount;if(isCurried&&length<arity){var newHolders=replaceHolders(args,placeholder);return createRecurry(func,bitmask,createHybrid,wrapper.placeholder,thisArg,args,newHolders,argPos,ary,arity-length);}var thisBinding=isBind?thisArg:this,fn=isBindKey?thisBinding[func]:func;length=args.length;if(argPos){args=reorder(args,argPos);}else if(isFlip&&length>1){args.reverse();}if(isAry&&ary<length){args.length=ary;}if(this&&this!==root&&this instanceof wrapper){fn=Ctor||createCtor(fn);}return fn.apply(thisBinding,args);}return wrapper;}function createInverter(setter,toIteratee){return function(object,iteratee){return baseInverter(object,setter,toIteratee(iteratee),{});};}function createMathOperation(operator,defaultValue){return function(value,other){var result;if(value===undefined&&other===undefined){return defaultValue;}if(value!==undefined){result=value;}if(other!==undefined){if(result===undefined){return other;}if(typeof value=='string'||typeof other=='string'){value=baseToString(value);other=baseToString(other);}else{value=baseToNumber(value);other=baseToNumber(other);}result=operator(value,other);}return result;};}function createOver(arrayFunc){return flatRest(function(iteratees){iteratees=arrayMap(iteratees,baseUnary(getIteratee()));return baseRest(function(args){var thisArg=this;return arrayFunc(iteratees,function(iteratee){return apply(iteratee,thisArg,args);});});});}function createPadding(length,chars){chars=chars===undefined?' ':baseToString(chars);var charsLength=chars.length;if(charsLength<2){return charsLength?baseRepeat(chars,length):chars;}var result=baseRepeat(chars,nativeCeil(length/stringSize(chars)));return hasUnicode(chars)?castSlice(stringToArray(result),0,length).join(''):result.slice(0,length);}function createPartial(func,bitmask,thisArg,partials){var isBind=bitmask&WRAP_BIND_FLAG,Ctor=createCtor(func);function wrapper(){var argsIndex=-1,argsLength=arguments.length,leftIndex=-1,leftLength=partials.length,args=Array(leftLength+argsLength),fn=this&&this!==root&&this instanceof wrapper?Ctor:func;while(++leftIndex<leftLength){args[leftIndex]=partials[leftIndex];}while(argsLength--){args[leftIndex++]=arguments[++argsIndex];}return apply(fn,isBind?thisArg:this,args);}return wrapper;}function createRange(fromRight){return function(start,end,step){if(step&&typeof step!='number'&&isIterateeCall(start,end,step)){end=step=undefined;}start=toFinite(start);if(end===undefined){end=start;start=0;}else{end=toFinite(end);}step=step===undefined?start<end?1:-1:toFinite(step);return baseRange(start,end,step,fromRight);};}function createRelationalOperation(operator){return function(value,other){if(!(typeof value=='string'&&typeof other=='string')){value=toNumber(value);other=toNumber(other);}return operator(value,other);};}function createRecurry(func,bitmask,wrapFunc,placeholder,thisArg,partials,holders,argPos,ary,arity){var isCurry=bitmask&WRAP_CURRY_FLAG,newHolders=isCurry?holders:undefined,newHoldersRight=isCurry?undefined:holders,newPartials=isCurry?partials:undefined,newPartialsRight=isCurry?undefined:partials;bitmask|=isCurry?WRAP_PARTIAL_FLAG:WRAP_PARTIAL_RIGHT_FLAG;bitmask&=~(isCurry?WRAP_PARTIAL_RIGHT_FLAG:WRAP_PARTIAL_FLAG);if(!(bitmask&WRAP_CURRY_BOUND_FLAG)){bitmask&=~(WRAP_BIND_FLAG|WRAP_BIND_KEY_FLAG);}var newData=[func,bitmask,thisArg,newPartials,newHolders,newPartialsRight,newHoldersRight,argPos,ary,arity];var result=wrapFunc.apply(undefined,newData);if(isLaziable(func)){setData(result,newData);}result.placeholder=placeholder;return setWrapToString(result,func,bitmask);}function createRound(methodName){var func=Math[methodName];return function(number,precision){number=toNumber(number);precision=precision==null?0:nativeMin(toInteger(precision),292);if(precision){var pair=(toString(number)+'e').split('e'),value=func(pair[0]+'e'+(+pair[1]+precision));pair=(toString(value)+'e').split('e');return+(pair[0]+'e'+(+pair[1]-precision));}return func(number);};}var createSet=!(Set&&1/setToArray(new Set([,-0]))[1]==INFINITY)?noop:function(values){return new Set(values);};function createToPairs(keysFunc){return function(object){var tag=getTag(object);if(tag==mapTag){return mapToArray(object);}if(tag==setTag){return setToPairs(object);}return baseToPairs(object,keysFunc(object));};}function createWrap(func,bitmask,thisArg,partials,holders,argPos,ary,arity){var isBindKey=bitmask&WRAP_BIND_KEY_FLAG;if(!isBindKey&&typeof func!='function'){throw new TypeError(FUNC_ERROR_TEXT);}var length=partials?partials.length:0;if(!length){bitmask&=~(WRAP_PARTIAL_FLAG|WRAP_PARTIAL_RIGHT_FLAG);partials=holders=undefined;}ary=ary===undefined?ary:nativeMax(toInteger(ary),0);arity=arity===undefined?arity:toInteger(arity);length-=holders?holders.length:0;if(bitmask&WRAP_PARTIAL_RIGHT_FLAG){var partialsRight=partials,holdersRight=holders;partials=holders=undefined;}var data=isBindKey?undefined:getData(func);var newData=[func,bitmask,thisArg,partials,holders,partialsRight,holdersRight,argPos,ary,arity];if(data){mergeData(newData,data);}func=newData[0];bitmask=newData[1];thisArg=newData[2];partials=newData[3];holders=newData[4];arity=newData[9]=newData[9]===undefined?isBindKey?0:func.length:nativeMax(newData[9]-length,0);if(!arity&&bitmask&(WRAP_CURRY_FLAG|WRAP_CURRY_RIGHT_FLAG)){bitmask&=~(WRAP_CURRY_FLAG|WRAP_CURRY_RIGHT_FLAG);}if(!bitmask||bitmask==WRAP_BIND_FLAG){var result=createBind(func,bitmask,thisArg);}else if(bitmask==WRAP_CURRY_FLAG||bitmask==WRAP_CURRY_RIGHT_FLAG){result=createCurry(func,bitmask,arity);}else if((bitmask==WRAP_PARTIAL_FLAG||bitmask==(WRAP_BIND_FLAG|WRAP_PARTIAL_FLAG))&&!holders.length){result=createPartial(func,bitmask,thisArg,partials);}else{result=createHybrid.apply(undefined,newData);}var setter=data?baseSetData:setData;return setWrapToString(setter(result,newData),func,bitmask);}function customDefaultsAssignIn(objValue,srcValue,key,object){if(objValue===undefined||eq(objValue,objectProto[key])&&!hasOwnProperty.call(object,key)){return srcValue;}return objValue;}function customDefaultsMerge(objValue,srcValue,key,object,source,stack){if(isObject(objValue)&&isObject(srcValue)){stack.set(srcValue,objValue);baseMerge(objValue,srcValue,undefined,customDefaultsMerge,stack);stack['delete'](srcValue);}return objValue;}function customOmitClone(value){return isPlainObject(value)?undefined:value;}function equalArrays(array,other,bitmask,customizer,equalFunc,stack){var isPartial=bitmask&COMPARE_PARTIAL_FLAG,arrLength=array.length,othLength=other.length;if(arrLength!=othLength&&!(isPartial&&othLength>arrLength)){return false;}var stacked=stack.get(array);if(stacked&&stack.get(other)){return stacked==other;}var index=-1,result=true,seen=bitmask&COMPARE_UNORDERED_FLAG?new SetCache():undefined;stack.set(array,other);stack.set(other,array);while(++index<arrLength){var arrValue=array[index],othValue=other[index];if(customizer){var compared=isPartial?customizer(othValue,arrValue,index,other,array,stack):customizer(arrValue,othValue,index,array,other,stack);}if(compared!==undefined){if(compared){continue;}result=false;break;}if(seen){if(!arraySome(other,function(othValue,othIndex){if(!cacheHas(seen,othIndex)&&(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack))){return seen.push(othIndex);}})){result=false;break;}}else if(!(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack))){result=false;break;}}stack['delete'](array);stack['delete'](other);return result;}function equalByTag(object,other,tag,bitmask,customizer,equalFunc,stack){switch(tag){case dataViewTag:if(object.byteLength!=other.byteLength||object.byteOffset!=other.byteOffset){return false;}object=object.buffer;other=other.buffer;case arrayBufferTag:if(object.byteLength!=other.byteLength||!equalFunc(new Uint8Array(object),new Uint8Array(other))){return false;}return true;case boolTag:case dateTag:case numberTag:return eq(+object,+other);case errorTag:return object.name==other.name&&object.message==other.message;case regexpTag:case stringTag:return object==other+'';case mapTag:var convert=mapToArray;case setTag:var isPartial=bitmask&COMPARE_PARTIAL_FLAG;convert||(convert=setToArray);if(object.size!=other.size&&!isPartial){return false;}var stacked=stack.get(object);if(stacked){return stacked==other;}bitmask|=COMPARE_UNORDERED_FLAG;stack.set(object,other);var result=equalArrays(convert(object),convert(other),bitmask,customizer,equalFunc,stack);stack['delete'](object);return result;case symbolTag:if(symbolValueOf){return symbolValueOf.call(object)==symbolValueOf.call(other);}}return false;}function equalObjects(object,other,bitmask,customizer,equalFunc,stack){var isPartial=bitmask&COMPARE_PARTIAL_FLAG,objProps=getAllKeys(object),objLength=objProps.length,othProps=getAllKeys(other),othLength=othProps.length;if(objLength!=othLength&&!isPartial){return false;}var index=objLength;while(index--){var key=objProps[index];if(!(isPartial?key in other:hasOwnProperty.call(other,key))){return false;}}var stacked=stack.get(object);if(stacked&&stack.get(other)){return stacked==other;}var result=true;stack.set(object,other);stack.set(other,object);var skipCtor=isPartial;while(++index<objLength){key=objProps[index];var objValue=object[key],othValue=other[key];if(customizer){var compared=isPartial?customizer(othValue,objValue,key,other,object,stack):customizer(objValue,othValue,key,object,other,stack);}if(!(compared===undefined?objValue===othValue||equalFunc(objValue,othValue,bitmask,customizer,stack):compared)){result=false;break;}skipCtor||(skipCtor=key=='constructor');}if(result&&!skipCtor){var objCtor=object.constructor,othCtor=other.constructor;if(objCtor!=othCtor&&'constructor'in object&&'constructor'in other&&!(typeof objCtor=='function'&&objCtor instanceof objCtor&&typeof othCtor=='function'&&othCtor instanceof othCtor)){result=false;}}stack['delete'](object);stack['delete'](other);return result;}function flatRest(func){return setToString(overRest(func,undefined,flatten),func+'');}function getAllKeys(object){return baseGetAllKeys(object,keys,getSymbols);}function getAllKeysIn(object){return baseGetAllKeys(object,keysIn,getSymbolsIn);}var getData=!metaMap?noop:function(func){return metaMap.get(func);};function getFuncName(func){var result=func.name+'',array=realNames[result],length=hasOwnProperty.call(realNames,result)?array.length:0;while(length--){var data=array[length],otherFunc=data.func;if(otherFunc==null||otherFunc==func){return data.name;}}return result;}function getHolder(func){var object=hasOwnProperty.call(lodash,'placeholder')?lodash:func;return object.placeholder;}function getIteratee(){var result=lodash.iteratee||iteratee;result=result===iteratee?baseIteratee:result;return arguments.length?result(arguments[0],arguments[1]):result;}function getMapData(map,key){var data=map.__data__;return isKeyable(key)?data[typeof key=='string'?'string':'hash']:data.map;}function getMatchData(object){var result=keys(object),length=result.length;while(length--){var key=result[length],value=object[key];result[length]=[key,value,isStrictComparable(value)];}return result;}function getNative(object,key){var value=getValue(object,key);return baseIsNative(value)?value:undefined;}function getRawTag(value){var isOwn=hasOwnProperty.call(value,symToStringTag),tag=value[symToStringTag];try{value[symToStringTag]=undefined;var unmasked=true;}catch(e){}var result=nativeObjectToString.call(value);if(unmasked){if(isOwn){value[symToStringTag]=tag;}else{delete value[symToStringTag];}}return result;}var getSymbols=!nativeGetSymbols?stubArray:function(object){if(object==null){return[];}object=Object(object);return arrayFilter(nativeGetSymbols(object),function(symbol){return propertyIsEnumerable.call(object,symbol);});};var getSymbolsIn=!nativeGetSymbols?stubArray:function(object){var result=[];while(object){arrayPush(result,getSymbols(object));object=getPrototype(object);}return result;};var getTag=baseGetTag;if(DataView&&getTag(new DataView(new ArrayBuffer(1)))!=dataViewTag||Map&&getTag(new Map())!=mapTag||Promise&&getTag(Promise.resolve())!=promiseTag||Set&&getTag(new Set())!=setTag||WeakMap&&getTag(new WeakMap())!=weakMapTag){getTag=function(value){var result=baseGetTag(value),Ctor=result==objectTag?value.constructor:undefined,ctorString=Ctor?toSource(Ctor):'';if(ctorString){switch(ctorString){case dataViewCtorString:return dataViewTag;case mapCtorString:return mapTag;case promiseCtorString:return promiseTag;case setCtorString:return setTag;case weakMapCtorString:return weakMapTag;}}return result;};}function getView(start,end,transforms){var index=-1,length=transforms.length;while(++index<length){var data=transforms[index],size=data.size;switch(data.type){case'drop':start+=size;break;case'dropRight':end-=size;break;case'take':end=nativeMin(end,start+size);break;case'takeRight':start=nativeMax(start,end-size);break;}}return{'start':start,'end':end};}function getWrapDetails(source){var match=source.match(reWrapDetails);return match?match[1].split(reSplitDetails):[];}function hasPath(object,path,hasFunc){path=castPath(path,object);var index=-1,length=path.length,result=false;while(++index<length){var key=toKey(path[index]);if(!(result=object!=null&&hasFunc(object,key))){break;}object=object[key];}if(result||++index!=length){return result;}length=object==null?0:object.length;return!!length&&isLength(length)&&isIndex(key,length)&&(isArray(object)||isArguments(object));}function initCloneArray(array){var length=array.length,result=new array.constructor(length);if(length&&typeof array[0]=='string'&&hasOwnProperty.call(array,'index')){result.index=array.index;result.input=array.input;}return result;}function initCloneObject(object){return typeof object.constructor=='function'&&!isPrototype(object)?baseCreate(getPrototype(object)):{};}function initCloneByTag(object,tag,isDeep){var Ctor=object.constructor;switch(tag){case arrayBufferTag:return cloneArrayBuffer(object);case boolTag:case dateTag:return new Ctor(+object);case dataViewTag:return cloneDataView(object,isDeep);case float32Tag:case float64Tag:case int8Tag:case int16Tag:case int32Tag:case uint8Tag:case uint8ClampedTag:case uint16Tag:case uint32Tag:return cloneTypedArray(object,isDeep);case mapTag:return new Ctor();case numberTag:case stringTag:return new Ctor(object);case regexpTag:return cloneRegExp(object);case setTag:return new Ctor();case symbolTag:return cloneSymbol(object);}}function insertWrapDetails(source,details){var length=details.length;if(!length){return source;}var lastIndex=length-1;details[lastIndex]=(length>1?'& ':'')+details[lastIndex];details=details.join(length>2?', ':' ');return source.replace(reWrapComment,'{\n/* [wrapped with '+details+'] */\n');}function isFlattenable(value){return isArray(value)||isArguments(value)||!!(spreadableSymbol&&value&&value[spreadableSymbol]);}function isIndex(value,length){var type=typeof value;length=length==null?MAX_SAFE_INTEGER:length;return!!length&&(type=='number'||type!='symbol'&&reIsUint.test(value))&&value>-1&&value%1==0&&value<length;}function isIterateeCall(value,index,object){if(!isObject(object)){return false;}var type=typeof index;if(type=='number'?isArrayLike(object)&&isIndex(index,object.length):type=='string'&&index in object){return eq(object[index],value);}return false;}function isKey(value,object){if(isArray(value)){return false;}var type=typeof value;if(type=='number'||type=='symbol'||type=='boolean'||value==null||isSymbol(value)){return true;}return reIsPlainProp.test(value)||!reIsDeepProp.test(value)||object!=null&&value in Object(object);}function isKeyable(value){var type=typeof value;return type=='string'||type=='number'||type=='symbol'||type=='boolean'?value!=='__proto__':value===null;}function isLaziable(func){var funcName=getFuncName(func),other=lodash[funcName];if(typeof other!='function'||!(funcName in LazyWrapper.prototype)){return false;}if(func===other){return true;}var data=getData(other);return!!data&&func===data[0];}function isMasked(func){return!!maskSrcKey&&maskSrcKey in func;}var isMaskable=coreJsData?isFunction:stubFalse;function isPrototype(value){var Ctor=value&&value.constructor,proto=typeof Ctor=='function'&&Ctor.prototype||objectProto;return value===proto;}function isStrictComparable(value){return value===value&&!isObject(value);}function matchesStrictComparable(key,srcValue){return function(object){if(object==null){return false;}return object[key]===srcValue&&(srcValue!==undefined||key in Object(object));};}function memoizeCapped(func){var result=memoize(func,function(key){if(cache.size===MAX_MEMOIZE_SIZE){cache.clear();}return key;});var cache=result.cache;return result;}function mergeData(data,source){var bitmask=data[1],srcBitmask=source[1],newBitmask=bitmask|srcBitmask,isCommon=newBitmask<(WRAP_BIND_FLAG|WRAP_BIND_KEY_FLAG|WRAP_ARY_FLAG);var isCombo=srcBitmask==WRAP_ARY_FLAG&&bitmask==WRAP_CURRY_FLAG||srcBitmask==WRAP_ARY_FLAG&&bitmask==WRAP_REARG_FLAG&&data[7].length<=source[8]||srcBitmask==(WRAP_ARY_FLAG|WRAP_REARG_FLAG)&&source[7].length<=source[8]&&bitmask==WRAP_CURRY_FLAG;if(!(isCommon||isCombo)){return data;}if(srcBitmask&WRAP_BIND_FLAG){data[2]=source[2];newBitmask|=bitmask&WRAP_BIND_FLAG?0:WRAP_CURRY_BOUND_FLAG;}var value=source[3];if(value){var partials=data[3];data[3]=partials?composeArgs(partials,value,source[4]):value;data[4]=partials?replaceHolders(data[3],PLACEHOLDER):source[4];}value=source[5];if(value){partials=data[5];data[5]=partials?composeArgsRight(partials,value,source[6]):value;data[6]=partials?replaceHolders(data[5],PLACEHOLDER):source[6];}value=source[7];if(value){data[7]=value;}if(srcBitmask&WRAP_ARY_FLAG){data[8]=data[8]==null?source[8]:nativeMin(data[8],source[8]);}if(data[9]==null){data[9]=source[9];}data[0]=source[0];data[1]=newBitmask;return data;}function nativeKeysIn(object){var result=[];if(object!=null){for(var key in Object(object)){result.push(key);}}return result;}function objectToString(value){return nativeObjectToString.call(value);}function overRest(func,start,transform){start=nativeMax(start===undefined?func.length-1:start,0);return function(){var args=arguments,index=-1,length=nativeMax(args.length-start,0),array=Array(length);while(++index<length){array[index]=args[start+index];}index=-1;var otherArgs=Array(start+1);while(++index<start){otherArgs[index]=args[index];}otherArgs[start]=transform(array);return apply(func,this,otherArgs);};}function parent(object,path){return path.length<2?object:baseGet(object,baseSlice(path,0,-1));}function reorder(array,indexes){var arrLength=array.length,length=nativeMin(indexes.length,arrLength),oldArray=copyArray(array);while(length--){var index=indexes[length];array[length]=isIndex(index,arrLength)?oldArray[index]:undefined;}return array;}function safeGet(object,key){if(key=='__proto__'){return;}return object[key];}var setData=shortOut(baseSetData);var setTimeout=ctxSetTimeout||function(func,wait){return root.setTimeout(func,wait);};var setToString=shortOut(baseSetToString);function setWrapToString(wrapper,reference,bitmask){var source=reference+'';return setToString(wrapper,insertWrapDetails(source,updateWrapDetails(getWrapDetails(source),bitmask)));}function shortOut(func){var count=0,lastCalled=0;return function(){var stamp=nativeNow(),remaining=HOT_SPAN-(stamp-lastCalled);lastCalled=stamp;if(remaining>0){if(++count>=HOT_COUNT){return arguments[0];}}else{count=0;}return func.apply(undefined,arguments);};}function shuffleSelf(array,size){var index=-1,length=array.length,lastIndex=length-1;size=size===undefined?length:size;while(++index<size){var rand=baseRandom(index,lastIndex),value=array[rand];array[rand]=array[index];array[index]=value;}array.length=size;return array;}var stringToPath=memoizeCapped(function(string){var result=[];if(string.charCodeAt(0)===46){result.push('');}string.replace(rePropName,function(match,number,quote,subString){result.push(quote?subString.replace(reEscapeChar,'$1'):number||match);});return result;});function toKey(value){if(typeof value=='string'||isSymbol(value)){return value;}var result=value+'';return result=='0'&&1/value==-INFINITY?'-0':result;}function toSource(func){if(func!=null){try{return funcToString.call(func);}catch(e){}try{return func+'';}catch(e){}}return'';}function updateWrapDetails(details,bitmask){arrayEach(wrapFlags,function(pair){var value='_.'+pair[0];if(bitmask&pair[1]&&!arrayIncludes(details,value)){details.push(value);}});return details.sort();}function wrapperClone(wrapper){if(wrapper instanceof LazyWrapper){return wrapper.clone();}var result=new LodashWrapper(wrapper.__wrapped__,wrapper.__chain__);result.__actions__=copyArray(wrapper.__actions__);result.__index__=wrapper.__index__;result.__values__=wrapper.__values__;return result;}function chunk(array,size,guard){if(guard?isIterateeCall(array,size,guard):size===undefined){size=1;}else{size=nativeMax(toInteger(size),0);}var length=array==null?0:array.length;if(!length||size<1){return[];}var index=0,resIndex=0,result=Array(nativeCeil(length/size));while(index<length){result[resIndex++]=baseSlice(array,index,index+=size);}return result;}function compact(array){var index=-1,length=array==null?0:array.length,resIndex=0,result=[];while(++index<length){var value=array[index];if(value){result[resIndex++]=value;}}return result;}function concat(){var length=arguments.length;if(!length){return[];}var args=Array(length-1),array=arguments[0],index=length;while(index--){args[index-1]=arguments[index];}return arrayPush(isArray(array)?copyArray(array):[array],baseFlatten(args,1));}var difference=baseRest(function(array,values){return isArrayLikeObject(array)?baseDifference(array,baseFlatten(values,1,isArrayLikeObject,true)):[];});var differenceBy=baseRest(function(array,values){var iteratee=last(values);if(isArrayLikeObject(iteratee)){iteratee=undefined;}return isArrayLikeObject(array)?baseDifference(array,baseFlatten(values,1,isArrayLikeObject,true),getIteratee(iteratee,2)):[];});var differenceWith=baseRest(function(array,values){var comparator=last(values);if(isArrayLikeObject(comparator)){comparator=undefined;}return isArrayLikeObject(array)?baseDifference(array,baseFlatten(values,1,isArrayLikeObject,true),undefined,comparator):[];});function drop(array,n,guard){var length=array==null?0:array.length;if(!length){return[];}n=guard||n===undefined?1:toInteger(n);return baseSlice(array,n<0?0:n,length);}function dropRight(array,n,guard){var length=array==null?0:array.length;if(!length){return[];}n=guard||n===undefined?1:toInteger(n);n=length-n;return baseSlice(array,0,n<0?0:n);}function dropRightWhile(array,predicate){return array&&array.length?baseWhile(array,getIteratee(predicate,3),true,true):[];}function dropWhile(array,predicate){return array&&array.length?baseWhile(array,getIteratee(predicate,3),true):[];}function fill(array,value,start,end){var length=array==null?0:array.length;if(!length){return[];}if(start&&typeof start!='number'&&isIterateeCall(array,value,start)){start=0;end=length;}return baseFill(array,value,start,end);}function findIndex(array,predicate,fromIndex){var length=array==null?0:array.length;if(!length){return-1;}var index=fromIndex==null?0:toInteger(fromIndex);if(index<0){index=nativeMax(length+index,0);}return baseFindIndex(array,getIteratee(predicate,3),index);}function findLastIndex(array,predicate,fromIndex){var length=array==null?0:array.length;if(!length){return-1;}var index=length-1;if(fromIndex!==undefined){index=toInteger(fromIndex);index=fromIndex<0?nativeMax(length+index,0):nativeMin(index,length-1);}return baseFindIndex(array,getIteratee(predicate,3),index,true);}function flatten(array){var length=array==null?0:array.length;return length?baseFlatten(array,1):[];}function flattenDeep(array){var length=array==null?0:array.length;return length?baseFlatten(array,INFINITY):[];}function flattenDepth(array,depth){var length=array==null?0:array.length;if(!length){return[];}depth=depth===undefined?1:toInteger(depth);return baseFlatten(array,depth);}function fromPairs(pairs){var index=-1,length=pairs==null?0:pairs.length,result={};while(++index<length){var pair=pairs[index];result[pair[0]]=pair[1];}return result;}function head(array){return array&&array.length?array[0]:undefined;}function indexOf(array,value,fromIndex){var length=array==null?0:array.length;if(!length){return-1;}var index=fromIndex==null?0:toInteger(fromIndex);if(index<0){index=nativeMax(length+index,0);}return baseIndexOf(array,value,index);}function initial(array){var length=array==null?0:array.length;return length?baseSlice(array,0,-1):[];}var intersection=baseRest(function(arrays){var mapped=arrayMap(arrays,castArrayLikeObject);return mapped.length&&mapped[0]===arrays[0]?baseIntersection(mapped):[];});var intersectionBy=baseRest(function(arrays){var iteratee=last(arrays),mapped=arrayMap(arrays,castArrayLikeObject);if(iteratee===last(mapped)){iteratee=undefined;}else{mapped.pop();}return mapped.length&&mapped[0]===arrays[0]?baseIntersection(mapped,getIteratee(iteratee,2)):[];});var intersectionWith=baseRest(function(arrays){var comparator=last(arrays),mapped=arrayMap(arrays,castArrayLikeObject);comparator=typeof comparator=='function'?comparator:undefined;if(comparator){mapped.pop();}return mapped.length&&mapped[0]===arrays[0]?baseIntersection(mapped,undefined,comparator):[];});function join(array,separator){return array==null?'':nativeJoin.call(array,separator);}function last(array){var length=array==null?0:array.length;return length?array[length-1]:undefined;}function lastIndexOf(array,value,fromIndex){var length=array==null?0:array.length;if(!length){return-1;}var index=length;if(fromIndex!==undefined){index=toInteger(fromIndex);index=index<0?nativeMax(length+index,0):nativeMin(index,length-1);}return value===value?strictLastIndexOf(array,value,index):baseFindIndex(array,baseIsNaN,index,true);}function nth(array,n){return array&&array.length?baseNth(array,toInteger(n)):undefined;}var pull=baseRest(pullAll);function pullAll(array,values){return array&&array.length&&values&&values.length?basePullAll(array,values):array;}function pullAllBy(array,values,iteratee){return array&&array.length&&values&&values.length?basePullAll(array,values,getIteratee(iteratee,2)):array;}function pullAllWith(array,values,comparator){return array&&array.length&&values&&values.length?basePullAll(array,values,undefined,comparator):array;}var pullAt=flatRest(function(array,indexes){var length=array==null?0:array.length,result=baseAt(array,indexes);basePullAt(array,arrayMap(indexes,function(index){return isIndex(index,length)?+index:index;}).sort(compareAscending));return result;});function remove(array,predicate){var result=[];if(!(array&&array.length)){return result;}var index=-1,indexes=[],length=array.length;predicate=getIteratee(predicate,3);while(++index<length){var value=array[index];if(predicate(value,index,array)){result.push(value);indexes.push(index);}}basePullAt(array,indexes);return result;}function reverse(array){return array==null?array:nativeReverse.call(array);}function slice(array,start,end){var length=array==null?0:array.length;if(!length){return[];}if(end&&typeof end!='number'&&isIterateeCall(array,start,end)){start=0;end=length;}else{start=start==null?0:toInteger(start);end=end===undefined?length:toInteger(end);}return baseSlice(array,start,end);}function sortedIndex(array,value){return baseSortedIndex(array,value);}function sortedIndexBy(array,value,iteratee){return baseSortedIndexBy(array,value,getIteratee(iteratee,2));}function sortedIndexOf(array,value){var length=array==null?0:array.length;if(length){var index=baseSortedIndex(array,value);if(index<length&&eq(array[index],value)){return index;}}return-1;}function sortedLastIndex(array,value){return baseSortedIndex(array,value,true);}function sortedLastIndexBy(array,value,iteratee){return baseSortedIndexBy(array,value,getIteratee(iteratee,2),true);}function sortedLastIndexOf(array,value){var length=array==null?0:array.length;if(length){var index=baseSortedIndex(array,value,true)-1;if(eq(array[index],value)){return index;}}return-1;}function sortedUniq(array){return array&&array.length?baseSortedUniq(array):[];}function sortedUniqBy(array,iteratee){return array&&array.length?baseSortedUniq(array,getIteratee(iteratee,2)):[];}function tail(array){var length=array==null?0:array.length;return length?baseSlice(array,1,length):[];}function take(array,n,guard){if(!(array&&array.length)){return[];}n=guard||n===undefined?1:toInteger(n);return baseSlice(array,0,n<0?0:n);}function takeRight(array,n,guard){var length=array==null?0:array.length;if(!length){return[];}n=guard||n===undefined?1:toInteger(n);n=length-n;return baseSlice(array,n<0?0:n,length);}function takeRightWhile(array,predicate){return array&&array.length?baseWhile(array,getIteratee(predicate,3),false,true):[];}function takeWhile(array,predicate){return array&&array.length?baseWhile(array,getIteratee(predicate,3)):[];}var union=baseRest(function(arrays){return baseUniq(baseFlatten(arrays,1,isArrayLikeObject,true));});var unionBy=baseRest(function(arrays){var iteratee=last(arrays);if(isArrayLikeObject(iteratee)){iteratee=undefined;}return baseUniq(baseFlatten(arrays,1,isArrayLikeObject,true),getIteratee(iteratee,2));});var unionWith=baseRest(function(arrays){var comparator=last(arrays);comparator=typeof comparator=='function'?comparator:undefined;return baseUniq(baseFlatten(arrays,1,isArrayLikeObject,true),undefined,comparator);});function uniq(array){return array&&array.length?baseUniq(array):[];}function uniqBy(array,iteratee){return array&&array.length?baseUniq(array,getIteratee(iteratee,2)):[];}function uniqWith(array,comparator){comparator=typeof comparator=='function'?comparator:undefined;return array&&array.length?baseUniq(array,undefined,comparator):[];}function unzip(array){if(!(array&&array.length)){return[];}var length=0;array=arrayFilter(array,function(group){if(isArrayLikeObject(group)){length=nativeMax(group.length,length);return true;}});return baseTimes(length,function(index){return arrayMap(array,baseProperty(index));});}function unzipWith(array,iteratee){if(!(array&&array.length)){return[];}var result=unzip(array);if(iteratee==null){return result;}return arrayMap(result,function(group){return apply(iteratee,undefined,group);});}var without=baseRest(function(array,values){return isArrayLikeObject(array)?baseDifference(array,values):[];});var xor=baseRest(function(arrays){return baseXor(arrayFilter(arrays,isArrayLikeObject));});var xorBy=baseRest(function(arrays){var iteratee=last(arrays);if(isArrayLikeObject(iteratee)){iteratee=undefined;}return baseXor(arrayFilter(arrays,isArrayLikeObject),getIteratee(iteratee,2));});var xorWith=baseRest(function(arrays){var comparator=last(arrays);comparator=typeof comparator=='function'?comparator:undefined;return baseXor(arrayFilter(arrays,isArrayLikeObject),undefined,comparator);});var zip=baseRest(unzip);function zipObject(props,values){return baseZipObject(props||[],values||[],assignValue);}function zipObjectDeep(props,values){return baseZipObject(props||[],values||[],baseSet);}var zipWith=baseRest(function(arrays){var length=arrays.length,iteratee=length>1?arrays[length-1]:undefined;iteratee=typeof iteratee=='function'?(arrays.pop(),iteratee):undefined;return unzipWith(arrays,iteratee);});function chain(value){var result=lodash(value);result.__chain__=true;return result;}function tap(value,interceptor){interceptor(value);return value;}function thru(value,interceptor){return interceptor(value);}var wrapperAt=flatRest(function(paths){var length=paths.length,start=length?paths[0]:0,value=this.__wrapped__,interceptor=function(object){return baseAt(object,paths);};if(length>1||this.__actions__.length||!(value instanceof LazyWrapper)||!isIndex(start)){return this.thru(interceptor);}value=value.slice(start,+start+(length?1:0));value.__actions__.push({'func':thru,'args':[interceptor],'thisArg':undefined});return new LodashWrapper(value,this.__chain__).thru(function(array){if(length&&!array.length){array.push(undefined);}return array;});});function wrapperChain(){return chain(this);}function wrapperCommit(){return new LodashWrapper(this.value(),this.__chain__);}function wrapperNext(){if(this.__values__===undefined){this.__values__=toArray(this.value());}var done=this.__index__>=this.__values__.length,value=done?undefined:this.__values__[this.__index__++];return{'done':done,'value':value};}function wrapperToIterator(){return this;}function wrapperPlant(value){var result,parent=this;while(parent instanceof baseLodash){var clone=wrapperClone(parent);clone.__index__=0;clone.__values__=undefined;if(result){previous.__wrapped__=clone;}else{result=clone;}var previous=clone;parent=parent.__wrapped__;}previous.__wrapped__=value;return result;}function wrapperReverse(){var value=this.__wrapped__;if(value instanceof LazyWrapper){var wrapped=value;if(this.__actions__.length){wrapped=new LazyWrapper(this);}wrapped=wrapped.reverse();wrapped.__actions__.push({'func':thru,'args':[reverse],'thisArg':undefined});return new LodashWrapper(wrapped,this.__chain__);}return this.thru(reverse);}function wrapperValue(){return baseWrapperValue(this.__wrapped__,this.__actions__);}var countBy=createAggregator(function(result,value,key){if(hasOwnProperty.call(result,key)){++result[key];}else{baseAssignValue(result,key,1);}});function every(collection,predicate,guard){var func=isArray(collection)?arrayEvery:baseEvery;if(guard&&isIterateeCall(collection,predicate,guard)){predicate=undefined;}return func(collection,getIteratee(predicate,3));}function filter(collection,predicate){var func=isArray(collection)?arrayFilter:baseFilter;return func(collection,getIteratee(predicate,3));}var find=createFind(findIndex);var findLast=createFind(findLastIndex);function flatMap(collection,iteratee){return baseFlatten(map(collection,iteratee),1);}function flatMapDeep(collection,iteratee){return baseFlatten(map(collection,iteratee),INFINITY);}function flatMapDepth(collection,iteratee,depth){depth=depth===undefined?1:toInteger(depth);return baseFlatten(map(collection,iteratee),depth);}function forEach(collection,iteratee){var func=isArray(collection)?arrayEach:baseEach;return func(collection,getIteratee(iteratee,3));}function forEachRight(collection,iteratee){var func=isArray(collection)?arrayEachRight:baseEachRight;return func(collection,getIteratee(iteratee,3));}var groupBy=createAggregator(function(result,value,key){if(hasOwnProperty.call(result,key)){result[key].push(value);}else{baseAssignValue(result,key,[value]);}});function includes(collection,value,fromIndex,guard){collection=isArrayLike(collection)?collection:values(collection);fromIndex=fromIndex&&!guard?toInteger(fromIndex):0;var length=collection.length;if(fromIndex<0){fromIndex=nativeMax(length+fromIndex,0);}return isString(collection)?fromIndex<=length&&collection.indexOf(value,fromIndex)>-1:!!length&&baseIndexOf(collection,value,fromIndex)>-1;}var invokeMap=baseRest(function(collection,path,args){var index=-1,isFunc=typeof path=='function',result=isArrayLike(collection)?Array(collection.length):[];baseEach(collection,function(value){result[++index]=isFunc?apply(path,value,args):baseInvoke(value,path,args);});return result;});var keyBy=createAggregator(function(result,value,key){baseAssignValue(result,key,value);});function map(collection,iteratee){var func=isArray(collection)?arrayMap:baseMap;return func(collection,getIteratee(iteratee,3));}function orderBy(collection,iteratees,orders,guard){if(collection==null){return[];}if(!isArray(iteratees)){iteratees=iteratees==null?[]:[iteratees];}orders=guard?undefined:orders;if(!isArray(orders)){orders=orders==null?[]:[orders];}return baseOrderBy(collection,iteratees,orders);}var partition=createAggregator(function(result,value,key){result[key?0:1].push(value);},function(){return[[],[]];});function reduce(collection,iteratee,accumulator){var func=isArray(collection)?arrayReduce:baseReduce,initAccum=arguments.length<3;return func(collection,getIteratee(iteratee,4),accumulator,initAccum,baseEach);}function reduceRight(collection,iteratee,accumulator){var func=isArray(collection)?arrayReduceRight:baseReduce,initAccum=arguments.length<3;return func(collection,getIteratee(iteratee,4),accumulator,initAccum,baseEachRight);}function reject(collection,predicate){var func=isArray(collection)?arrayFilter:baseFilter;return func(collection,negate(getIteratee(predicate,3)));}function sample(collection){var func=isArray(collection)?arraySample:baseSample;return func(collection);}function sampleSize(collection,n,guard){if(guard?isIterateeCall(collection,n,guard):n===undefined){n=1;}else{n=toInteger(n);}var func=isArray(collection)?arraySampleSize:baseSampleSize;return func(collection,n);}function shuffle(collection){var func=isArray(collection)?arrayShuffle:baseShuffle;return func(collection);}function size(collection){if(collection==null){return 0;}if(isArrayLike(collection)){return isString(collection)?stringSize(collection):collection.length;}var tag=getTag(collection);if(tag==mapTag||tag==setTag){return collection.size;}return baseKeys(collection).length;}function some(collection,predicate,guard){var func=isArray(collection)?arraySome:baseSome;if(guard&&isIterateeCall(collection,predicate,guard)){predicate=undefined;}return func(collection,getIteratee(predicate,3));}var sortBy=baseRest(function(collection,iteratees){if(collection==null){return[];}var length=iteratees.length;if(length>1&&isIterateeCall(collection,iteratees[0],iteratees[1])){iteratees=[];}else if(length>2&&isIterateeCall(iteratees[0],iteratees[1],iteratees[2])){iteratees=[iteratees[0]];}return baseOrderBy(collection,baseFlatten(iteratees,1),[]);});var now=ctxNow||function(){return root.Date.now();};function after(n,func){if(typeof func!='function'){throw new TypeError(FUNC_ERROR_TEXT);}n=toInteger(n);return function(){if(--n<1){return func.apply(this,arguments);}};}function ary(func,n,guard){n=guard?undefined:n;n=func&&n==null?func.length:n;return createWrap(func,WRAP_ARY_FLAG,undefined,undefined,undefined,undefined,n);}function before(n,func){var result;if(typeof func!='function'){throw new TypeError(FUNC_ERROR_TEXT);}n=toInteger(n);return function(){if(--n>0){result=func.apply(this,arguments);}if(n<=1){func=undefined;}return result;};}var bind=baseRest(function(func,thisArg,partials){var bitmask=WRAP_BIND_FLAG;if(partials.length){var holders=replaceHolders(partials,getHolder(bind));bitmask|=WRAP_PARTIAL_FLAG;}return createWrap(func,bitmask,thisArg,partials,holders);});var bindKey=baseRest(function(object,key,partials){var bitmask=WRAP_BIND_FLAG|WRAP_BIND_KEY_FLAG;if(partials.length){var holders=replaceHolders(partials,getHolder(bindKey));bitmask|=WRAP_PARTIAL_FLAG;}return createWrap(key,bitmask,object,partials,holders);});function curry(func,arity,guard){arity=guard?undefined:arity;var result=createWrap(func,WRAP_CURRY_FLAG,undefined,undefined,undefined,undefined,undefined,arity);result.placeholder=curry.placeholder;return result;}function curryRight(func,arity,guard){arity=guard?undefined:arity;var result=createWrap(func,WRAP_CURRY_RIGHT_FLAG,undefined,undefined,undefined,undefined,undefined,arity);result.placeholder=curryRight.placeholder;return result;}function debounce(func,wait,options){var lastArgs,lastThis,maxWait,result,timerId,lastCallTime,lastInvokeTime=0,leading=false,maxing=false,trailing=true;if(typeof func!='function'){throw new TypeError(FUNC_ERROR_TEXT);}wait=toNumber(wait)||0;if(isObject(options)){leading=!!options.leading;maxing='maxWait'in options;maxWait=maxing?nativeMax(toNumber(options.maxWait)||0,wait):maxWait;trailing='trailing'in options?!!options.trailing:trailing;}function invokeFunc(time){var args=lastArgs,thisArg=lastThis;lastArgs=lastThis=undefined;lastInvokeTime=time;result=func.apply(thisArg,args);return result;}function leadingEdge(time){lastInvokeTime=time;timerId=setTimeout(timerExpired,wait);return leading?invokeFunc(time):result;}function remainingWait(time){var timeSinceLastCall=time-lastCallTime,timeSinceLastInvoke=time-lastInvokeTime,timeWaiting=wait-timeSinceLastCall;return maxing?nativeMin(timeWaiting,maxWait-timeSinceLastInvoke):timeWaiting;}function shouldInvoke(time){var timeSinceLastCall=time-lastCallTime,timeSinceLastInvoke=time-lastInvokeTime;return lastCallTime===undefined||timeSinceLastCall>=wait||timeSinceLastCall<0||maxing&&timeSinceLastInvoke>=maxWait;}function timerExpired(){var time=now();if(shouldInvoke(time)){return trailingEdge(time);}timerId=setTimeout(timerExpired,remainingWait(time));}function trailingEdge(time){timerId=undefined;if(trailing&&lastArgs){return invokeFunc(time);}lastArgs=lastThis=undefined;return result;}function cancel(){if(timerId!==undefined){clearTimeout(timerId);}lastInvokeTime=0;lastArgs=lastCallTime=lastThis=timerId=undefined;}function flush(){return timerId===undefined?result:trailingEdge(now());}function debounced(){var time=now(),isInvoking=shouldInvoke(time);lastArgs=arguments;lastThis=this;lastCallTime=time;if(isInvoking){if(timerId===undefined){return leadingEdge(lastCallTime);}if(maxing){timerId=setTimeout(timerExpired,wait);return invokeFunc(lastCallTime);}}if(timerId===undefined){timerId=setTimeout(timerExpired,wait);}return result;}debounced.cancel=cancel;debounced.flush=flush;return debounced;}var defer=baseRest(function(func,args){return baseDelay(func,1,args);});var delay=baseRest(function(func,wait,args){return baseDelay(func,toNumber(wait)||0,args);});function flip(func){return createWrap(func,WRAP_FLIP_FLAG);}function memoize(func,resolver){if(typeof func!='function'||resolver!=null&&typeof resolver!='function'){throw new TypeError(FUNC_ERROR_TEXT);}var memoized=function(){var args=arguments,key=resolver?resolver.apply(this,args):args[0],cache=memoized.cache;if(cache.has(key)){return cache.get(key);}var result=func.apply(this,args);memoized.cache=cache.set(key,result)||cache;return result;};memoized.cache=new(memoize.Cache||MapCache)();return memoized;}memoize.Cache=MapCache;function negate(predicate){if(typeof predicate!='function'){throw new TypeError(FUNC_ERROR_TEXT);}return function(){var args=arguments;switch(args.length){case 0:return!predicate.call(this);case 1:return!predicate.call(this,args[0]);case 2:return!predicate.call(this,args[0],args[1]);case 3:return!predicate.call(this,args[0],args[1],args[2]);}return!predicate.apply(this,args);};}function once(func){return before(2,func);}var overArgs=castRest(function(func,transforms){transforms=transforms.length==1&&isArray(transforms[0])?arrayMap(transforms[0],baseUnary(getIteratee())):arrayMap(baseFlatten(transforms,1),baseUnary(getIteratee()));var funcsLength=transforms.length;return baseRest(function(args){var index=-1,length=nativeMin(args.length,funcsLength);while(++index<length){args[index]=transforms[index].call(this,args[index]);}return apply(func,this,args);});});var partial=baseRest(function(func,partials){var holders=replaceHolders(partials,getHolder(partial));return createWrap(func,WRAP_PARTIAL_FLAG,undefined,partials,holders);});var partialRight=baseRest(function(func,partials){var holders=replaceHolders(partials,getHolder(partialRight));return createWrap(func,WRAP_PARTIAL_RIGHT_FLAG,undefined,partials,holders);});var rearg=flatRest(function(func,indexes){return createWrap(func,WRAP_REARG_FLAG,undefined,undefined,undefined,indexes);});function rest(func,start){if(typeof func!='function'){throw new TypeError(FUNC_ERROR_TEXT);}start=start===undefined?start:toInteger(start);return baseRest(func,start);}function spread(func,start){if(typeof func!='function'){throw new TypeError(FUNC_ERROR_TEXT);}start=start==null?0:nativeMax(toInteger(start),0);return baseRest(function(args){var array=args[start],otherArgs=castSlice(args,0,start);if(array){arrayPush(otherArgs,array);}return apply(func,this,otherArgs);});}function throttle(func,wait,options){var leading=true,trailing=true;if(typeof func!='function'){throw new TypeError(FUNC_ERROR_TEXT);}if(isObject(options)){leading='leading'in options?!!options.leading:leading;trailing='trailing'in options?!!options.trailing:trailing;}return debounce(func,wait,{'leading':leading,'maxWait':wait,'trailing':trailing});}function unary(func){return ary(func,1);}function wrap(value,wrapper){return partial(castFunction(wrapper),value);}function castArray(){if(!arguments.length){return[];}var value=arguments[0];return isArray(value)?value:[value];}function clone(value){return baseClone(value,CLONE_SYMBOLS_FLAG);}function cloneWith(value,customizer){customizer=typeof customizer=='function'?customizer:undefined;return baseClone(value,CLONE_SYMBOLS_FLAG,customizer);}function cloneDeep(value){return baseClone(value,CLONE_DEEP_FLAG|CLONE_SYMBOLS_FLAG);}function cloneDeepWith(value,customizer){customizer=typeof customizer=='function'?customizer:undefined;return baseClone(value,CLONE_DEEP_FLAG|CLONE_SYMBOLS_FLAG,customizer);}function conformsTo(object,source){return source==null||baseConformsTo(object,source,keys(source));}function eq(value,other){return value===other||value!==value&&other!==other;}var gt=createRelationalOperation(baseGt);var gte=createRelationalOperation(function(value,other){return value>=other;});var isArguments=baseIsArguments(function(){return arguments;}())?baseIsArguments:function(value){return isObjectLike(value)&&hasOwnProperty.call(value,'callee')&&!propertyIsEnumerable.call(value,'callee');};var isArray=Array.isArray;var isArrayBuffer=nodeIsArrayBuffer?baseUnary(nodeIsArrayBuffer):baseIsArrayBuffer;function isArrayLike(value){return value!=null&&isLength(value.length)&&!isFunction(value);}function isArrayLikeObject(value){return isObjectLike(value)&&isArrayLike(value);}function isBoolean(value){return value===true||value===false||isObjectLike(value)&&baseGetTag(value)==boolTag;}var isBuffer=nativeIsBuffer||stubFalse;var isDate=nodeIsDate?baseUnary(nodeIsDate):baseIsDate;function isElement(value){return isObjectLike(value)&&value.nodeType===1&&!isPlainObject(value);}function isEmpty(value){if(value==null){return true;}if(isArrayLike(value)&&(isArray(value)||typeof value=='string'||typeof value.splice=='function'||isBuffer(value)||isTypedArray(value)||isArguments(value))){return!value.length;}var tag=getTag(value);if(tag==mapTag||tag==setTag){return!value.size;}if(isPrototype(value)){return!baseKeys(value).length;}for(var key in value){if(hasOwnProperty.call(value,key)){return false;}}return true;}function isEqual(value,other){return baseIsEqual(value,other);}function isEqualWith(value,other,customizer){customizer=typeof customizer=='function'?customizer:undefined;var result=customizer?customizer(value,other):undefined;return result===undefined?baseIsEqual(value,other,undefined,customizer):!!result;}function isError(value){if(!isObjectLike(value)){return false;}var tag=baseGetTag(value);return tag==errorTag||tag==domExcTag||typeof value.message=='string'&&typeof value.name=='string'&&!isPlainObject(value);}function isFinite(value){return typeof value=='number'&&nativeIsFinite(value);}function isFunction(value){if(!isObject(value)){return false;}var tag=baseGetTag(value);return tag==funcTag||tag==genTag||tag==asyncTag||tag==proxyTag;}function isInteger(value){return typeof value=='number'&&value==toInteger(value);}function isLength(value){return typeof value=='number'&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER;}function isObject(value){var type=typeof value;return value!=null&&(type=='object'||type=='function');}function isObjectLike(value){return value!=null&&typeof value=='object';}var isMap=nodeIsMap?baseUnary(nodeIsMap):baseIsMap;function isMatch(object,source){return object===source||baseIsMatch(object,source,getMatchData(source));}function isMatchWith(object,source,customizer){customizer=typeof customizer=='function'?customizer:undefined;return baseIsMatch(object,source,getMatchData(source),customizer);}function isNaN(value){return isNumber(value)&&value!=+value;}function isNative(value){if(isMaskable(value)){throw new Error(CORE_ERROR_TEXT);}return baseIsNative(value);}function isNull(value){return value===null;}function isNil(value){return value==null;}function isNumber(value){return typeof value=='number'||isObjectLike(value)&&baseGetTag(value)==numberTag;}function isPlainObject(value){if(!isObjectLike(value)||baseGetTag(value)!=objectTag){return false;}var proto=getPrototype(value);if(proto===null){return true;}var Ctor=hasOwnProperty.call(proto,'constructor')&&proto.constructor;return typeof Ctor=='function'&&Ctor instanceof Ctor&&funcToString.call(Ctor)==objectCtorString;}var isRegExp=nodeIsRegExp?baseUnary(nodeIsRegExp):baseIsRegExp;function isSafeInteger(value){return isInteger(value)&&value>=-MAX_SAFE_INTEGER&&value<=MAX_SAFE_INTEGER;}var isSet=nodeIsSet?baseUnary(nodeIsSet):baseIsSet;function isString(value){return typeof value=='string'||!isArray(value)&&isObjectLike(value)&&baseGetTag(value)==stringTag;}function isSymbol(value){return typeof value=='symbol'||isObjectLike(value)&&baseGetTag(value)==symbolTag;}var isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray;function isUndefined(value){return value===undefined;}function isWeakMap(value){return isObjectLike(value)&&getTag(value)==weakMapTag;}function isWeakSet(value){return isObjectLike(value)&&baseGetTag(value)==weakSetTag;}var lt=createRelationalOperation(baseLt);var lte=createRelationalOperation(function(value,other){return value<=other;});function toArray(value){if(!value){return[];}if(isArrayLike(value)){return isString(value)?stringToArray(value):copyArray(value);}if(symIterator&&value[symIterator]){return iteratorToArray(value[symIterator]());}var tag=getTag(value),func=tag==mapTag?mapToArray:tag==setTag?setToArray:values;return func(value);}function toFinite(value){if(!value){return value===0?value:0;}value=toNumber(value);if(value===INFINITY||value===-INFINITY){var sign=value<0?-1:1;return sign*MAX_INTEGER;}return value===value?value:0;}function toInteger(value){var result=toFinite(value),remainder=result%1;return result===result?remainder?result-remainder:result:0;}function toLength(value){return value?baseClamp(toInteger(value),0,MAX_ARRAY_LENGTH):0;}function toNumber(value){if(typeof value=='number'){return value;}if(isSymbol(value)){return NAN;}if(isObject(value)){var other=typeof value.valueOf=='function'?value.valueOf():value;value=isObject(other)?other+'':other;}if(typeof value!='string'){return value===0?value:+value;}value=value.replace(reTrim,'');var isBinary=reIsBinary.test(value);return isBinary||reIsOctal.test(value)?freeParseInt(value.slice(2),isBinary?2:8):reIsBadHex.test(value)?NAN:+value;}function toPlainObject(value){return copyObject(value,keysIn(value));}function toSafeInteger(value){return value?baseClamp(toInteger(value),-MAX_SAFE_INTEGER,MAX_SAFE_INTEGER):value===0?value:0;}function toString(value){return value==null?'':baseToString(value);}var assign=createAssigner(function(object,source){if(isPrototype(source)||isArrayLike(source)){copyObject(source,keys(source),object);return;}for(var key in source){if(hasOwnProperty.call(source,key)){assignValue(object,key,source[key]);}}});var assignIn=createAssigner(function(object,source){copyObject(source,keysIn(source),object);});var assignInWith=createAssigner(function(object,source,srcIndex,customizer){copyObject(source,keysIn(source),object,customizer);});var assignWith=createAssigner(function(object,source,srcIndex,customizer){copyObject(source,keys(source),object,customizer);});var at=flatRest(baseAt);function create(prototype,properties){var result=baseCreate(prototype);return properties==null?result:baseAssign(result,properties);}var defaults=baseRest(function(object,sources){object=Object(object);var index=-1;var length=sources.length;var guard=length>2?sources[2]:undefined;if(guard&&isIterateeCall(sources[0],sources[1],guard)){length=1;}while(++index<length){var source=sources[index];var props=keysIn(source);var propsIndex=-1;var propsLength=props.length;while(++propsIndex<propsLength){var key=props[propsIndex];var value=object[key];if(value===undefined||eq(value,objectProto[key])&&!hasOwnProperty.call(object,key)){object[key]=source[key];}}}return object;});var defaultsDeep=baseRest(function(args){args.push(undefined,customDefaultsMerge);return apply(mergeWith,undefined,args);});function findKey(object,predicate){return baseFindKey(object,getIteratee(predicate,3),baseForOwn);}function findLastKey(object,predicate){return baseFindKey(object,getIteratee(predicate,3),baseForOwnRight);}function forIn(object,iteratee){return object==null?object:baseFor(object,getIteratee(iteratee,3),keysIn);}function forInRight(object,iteratee){return object==null?object:baseForRight(object,getIteratee(iteratee,3),keysIn);}function forOwn(object,iteratee){return object&&baseForOwn(object,getIteratee(iteratee,3));}function forOwnRight(object,iteratee){return object&&baseForOwnRight(object,getIteratee(iteratee,3));}function functions(object){return object==null?[]:baseFunctions(object,keys(object));}function functionsIn(object){return object==null?[]:baseFunctions(object,keysIn(object));}function get(object,path,defaultValue){var result=object==null?undefined:baseGet(object,path);return result===undefined?defaultValue:result;}function has(object,path){return object!=null&&hasPath(object,path,baseHas);}function hasIn(object,path){return object!=null&&hasPath(object,path,baseHasIn);}var invert=createInverter(function(result,value,key){if(value!=null&&typeof value.toString!='function'){value=nativeObjectToString.call(value);}result[value]=key;},constant(identity));var invertBy=createInverter(function(result,value,key){if(value!=null&&typeof value.toString!='function'){value=nativeObjectToString.call(value);}if(hasOwnProperty.call(result,value)){result[value].push(key);}else{result[value]=[key];}},getIteratee);var invoke=baseRest(baseInvoke);function keys(object){return isArrayLike(object)?arrayLikeKeys(object):baseKeys(object);}function keysIn(object){return isArrayLike(object)?arrayLikeKeys(object,true):baseKeysIn(object);}function mapKeys(object,iteratee){var result={};iteratee=getIteratee(iteratee,3);baseForOwn(object,function(value,key,object){baseAssignValue(result,iteratee(value,key,object),value);});return result;}function mapValues(object,iteratee){var result={};iteratee=getIteratee(iteratee,3);baseForOwn(object,function(value,key,object){baseAssignValue(result,key,iteratee(value,key,object));});return result;}var merge=createAssigner(function(object,source,srcIndex){baseMerge(object,source,srcIndex);});var mergeWith=createAssigner(function(object,source,srcIndex,customizer){baseMerge(object,source,srcIndex,customizer);});var omit=flatRest(function(object,paths){var result={};if(object==null){return result;}var isDeep=false;paths=arrayMap(paths,function(path){path=castPath(path,object);isDeep||(isDeep=path.length>1);return path;});copyObject(object,getAllKeysIn(object),result);if(isDeep){result=baseClone(result,CLONE_DEEP_FLAG|CLONE_FLAT_FLAG|CLONE_SYMBOLS_FLAG,customOmitClone);}var length=paths.length;while(length--){baseUnset(result,paths[length]);}return result;});function omitBy(object,predicate){return pickBy(object,negate(getIteratee(predicate)));}var pick=flatRest(function(object,paths){return object==null?{}:basePick(object,paths);});function pickBy(object,predicate){if(object==null){return{};}var props=arrayMap(getAllKeysIn(object),function(prop){return[prop];});predicate=getIteratee(predicate);return basePickBy(object,props,function(value,path){return predicate(value,path[0]);});}function result(object,path,defaultValue){path=castPath(path,object);var index=-1,length=path.length;if(!length){length=1;object=undefined;}while(++index<length){var value=object==null?undefined:object[toKey(path[index])];if(value===undefined){index=length;value=defaultValue;}object=isFunction(value)?value.call(object):value;}return object;}function set(object,path,value){return object==null?object:baseSet(object,path,value);}function setWith(object,path,value,customizer){customizer=typeof customizer=='function'?customizer:undefined;return object==null?object:baseSet(object,path,value,customizer);}var toPairs=createToPairs(keys);var toPairsIn=createToPairs(keysIn);function transform(object,iteratee,accumulator){var isArr=isArray(object),isArrLike=isArr||isBuffer(object)||isTypedArray(object);iteratee=getIteratee(iteratee,4);if(accumulator==null){var Ctor=object&&object.constructor;if(isArrLike){accumulator=isArr?new Ctor():[];}else if(isObject(object)){accumulator=isFunction(Ctor)?baseCreate(getPrototype(object)):{};}else{accumulator={};}}(isArrLike?arrayEach:baseForOwn)(object,function(value,index,object){return iteratee(accumulator,value,index,object);});return accumulator;}function unset(object,path){return object==null?true:baseUnset(object,path);}function update(object,path,updater){return object==null?object:baseUpdate(object,path,castFunction(updater));}function updateWith(object,path,updater,customizer){customizer=typeof customizer=='function'?customizer:undefined;return object==null?object:baseUpdate(object,path,castFunction(updater),customizer);}function values(object){return object==null?[]:baseValues(object,keys(object));}function valuesIn(object){return object==null?[]:baseValues(object,keysIn(object));}function clamp(number,lower,upper){if(upper===undefined){upper=lower;lower=undefined;}if(upper!==undefined){upper=toNumber(upper);upper=upper===upper?upper:0;}if(lower!==undefined){lower=toNumber(lower);lower=lower===lower?lower:0;}return baseClamp(toNumber(number),lower,upper);}function inRange(number,start,end){start=toFinite(start);if(end===undefined){end=start;start=0;}else{end=toFinite(end);}number=toNumber(number);return baseInRange(number,start,end);}function random(lower,upper,floating){if(floating&&typeof floating!='boolean'&&isIterateeCall(lower,upper,floating)){upper=floating=undefined;}if(floating===undefined){if(typeof upper=='boolean'){floating=upper;upper=undefined;}else if(typeof lower=='boolean'){floating=lower;lower=undefined;}}if(lower===undefined&&upper===undefined){lower=0;upper=1;}else{lower=toFinite(lower);if(upper===undefined){upper=lower;lower=0;}else{upper=toFinite(upper);}}if(lower>upper){var temp=lower;lower=upper;upper=temp;}if(floating||lower%1||upper%1){var rand=nativeRandom();return nativeMin(lower+rand*(upper-lower+freeParseFloat('1e-'+((rand+'').length-1))),upper);}return baseRandom(lower,upper);}var camelCase=createCompounder(function(result,word,index){word=word.toLowerCase();return result+(index?capitalize(word):word);});function capitalize(string){return upperFirst(toString(string).toLowerCase());}function deburr(string){string=toString(string);return string&&string.replace(reLatin,deburrLetter).replace(reComboMark,'');}function endsWith(string,target,position){string=toString(string);target=baseToString(target);var length=string.length;position=position===undefined?length:baseClamp(toInteger(position),0,length);var end=position;position-=target.length;return position>=0&&string.slice(position,end)==target;}function escape(string){string=toString(string);return string&&reHasUnescapedHtml.test(string)?string.replace(reUnescapedHtml,escapeHtmlChar):string;}function escapeRegExp(string){string=toString(string);return string&&reHasRegExpChar.test(string)?string.replace(reRegExpChar,'\\$&'):string;}var kebabCase=createCompounder(function(result,word,index){return result+(index?'-':'')+word.toLowerCase();});var lowerCase=createCompounder(function(result,word,index){return result+(index?' ':'')+word.toLowerCase();});var lowerFirst=createCaseFirst('toLowerCase');function pad(string,length,chars){string=toString(string);length=toInteger(length);var strLength=length?stringSize(string):0;if(!length||strLength>=length){return string;}var mid=(length-strLength)/2;return createPadding(nativeFloor(mid),chars)+string+createPadding(nativeCeil(mid),chars);}function padEnd(string,length,chars){string=toString(string);length=toInteger(length);var strLength=length?stringSize(string):0;return length&&strLength<length?string+createPadding(length-strLength,chars):string;}function padStart(string,length,chars){string=toString(string);length=toInteger(length);var strLength=length?stringSize(string):0;return length&&strLength<length?createPadding(length-strLength,chars)+string:string;}function parseInt(string,radix,guard){if(guard||radix==null){radix=0;}else if(radix){radix=+radix;}return nativeParseInt(toString(string).replace(reTrimStart,''),radix||0);}function repeat(string,n,guard){if(guard?isIterateeCall(string,n,guard):n===undefined){n=1;}else{n=toInteger(n);}return baseRepeat(toString(string),n);}function replace(){var args=arguments,string=toString(args[0]);return args.length<3?string:string.replace(args[1],args[2]);}var snakeCase=createCompounder(function(result,word,index){return result+(index?'_':'')+word.toLowerCase();});function split(string,separator,limit){if(limit&&typeof limit!='number'&&isIterateeCall(string,separator,limit)){separator=limit=undefined;}limit=limit===undefined?MAX_ARRAY_LENGTH:limit>>>0;if(!limit){return[];}string=toString(string);if(string&&(typeof separator=='string'||separator!=null&&!isRegExp(separator))){separator=baseToString(separator);if(!separator&&hasUnicode(string)){return castSlice(stringToArray(string),0,limit);}}return string.split(separator,limit);}var startCase=createCompounder(function(result,word,index){return result+(index?' ':'')+upperFirst(word);});function startsWith(string,target,position){string=toString(string);position=position==null?0:baseClamp(toInteger(position),0,string.length);target=baseToString(target);return string.slice(position,position+target.length)==target;}function template(string,options,guard){var settings=lodash.templateSettings;if(guard&&isIterateeCall(string,options,guard)){options=undefined;}string=toString(string);options=assignInWith({},options,settings,customDefaultsAssignIn);var imports=assignInWith({},options.imports,settings.imports,customDefaultsAssignIn),importsKeys=keys(imports),importsValues=baseValues(imports,importsKeys);var isEscaping,isEvaluating,index=0,interpolate=options.interpolate||reNoMatch,source="__p += '";var reDelimiters=RegExp((options.escape||reNoMatch).source+'|'+interpolate.source+'|'+(interpolate===reInterpolate?reEsTemplate:reNoMatch).source+'|'+(options.evaluate||reNoMatch).source+'|$','g');var sourceURL='//# sourceURL='+('sourceURL'in options?options.sourceURL:'lodash.templateSources['+ ++templateCounter+']')+'\n';string.replace(reDelimiters,function(match,escapeValue,interpolateValue,esTemplateValue,evaluateValue,offset){interpolateValue||(interpolateValue=esTemplateValue);source+=string.slice(index,offset).replace(reUnescapedString,escapeStringChar);if(escapeValue){isEscaping=true;source+="' +\n__e("+escapeValue+") +\n'";}if(evaluateValue){isEvaluating=true;source+="';\n"+evaluateValue+";\n__p += '";}if(interpolateValue){source+="' +\n((__t = ("+interpolateValue+")) == null ? '' : __t) +\n'";}index=offset+match.length;return match;});source+="';\n";var variable=options.variable;if(!variable){source='with (obj) {\n'+source+'\n}\n';}source=(isEvaluating?source.replace(reEmptyStringLeading,''):source).replace(reEmptyStringMiddle,'$1').replace(reEmptyStringTrailing,'$1;');source='function('+(variable||'obj')+') {\n'+(variable?'':'obj || (obj = {});\n')+"var __t, __p = ''"+(isEscaping?', __e = _.escape':'')+(isEvaluating?', __j = Array.prototype.join;\n'+"function print() { __p += __j.call(arguments, '') }\n":';\n')+source+'return __p\n}';var result=attempt(function(){return Function(importsKeys,sourceURL+'return '+source).apply(undefined,importsValues);});result.source=source;if(isError(result)){throw result;}return result;}function toLower(value){return toString(value).toLowerCase();}function toUpper(value){return toString(value).toUpperCase();}function trim(string,chars,guard){string=toString(string);if(string&&(guard||chars===undefined)){return string.replace(reTrim,'');}if(!string||!(chars=baseToString(chars))){return string;}var strSymbols=stringToArray(string),chrSymbols=stringToArray(chars),start=charsStartIndex(strSymbols,chrSymbols),end=charsEndIndex(strSymbols,chrSymbols)+1;return castSlice(strSymbols,start,end).join('');}function trimEnd(string,chars,guard){string=toString(string);if(string&&(guard||chars===undefined)){return string.replace(reTrimEnd,'');}if(!string||!(chars=baseToString(chars))){return string;}var strSymbols=stringToArray(string),end=charsEndIndex(strSymbols,stringToArray(chars))+1;return castSlice(strSymbols,0,end).join('');}function trimStart(string,chars,guard){string=toString(string);if(string&&(guard||chars===undefined)){return string.replace(reTrimStart,'');}if(!string||!(chars=baseToString(chars))){return string;}var strSymbols=stringToArray(string),start=charsStartIndex(strSymbols,stringToArray(chars));return castSlice(strSymbols,start).join('');}function truncate(string,options){var length=DEFAULT_TRUNC_LENGTH,omission=DEFAULT_TRUNC_OMISSION;if(isObject(options)){var separator='separator'in options?options.separator:separator;length='length'in options?toInteger(options.length):length;omission='omission'in options?baseToString(options.omission):omission;}string=toString(string);var strLength=string.length;if(hasUnicode(string)){var strSymbols=stringToArray(string);strLength=strSymbols.length;}if(length>=strLength){return string;}var end=length-stringSize(omission);if(end<1){return omission;}var result=strSymbols?castSlice(strSymbols,0,end).join(''):string.slice(0,end);if(separator===undefined){return result+omission;}if(strSymbols){end+=result.length-end;}if(isRegExp(separator)){if(string.slice(end).search(separator)){var match,substring=result;if(!separator.global){separator=RegExp(separator.source,toString(reFlags.exec(separator))+'g');}separator.lastIndex=0;while(match=separator.exec(substring)){var newEnd=match.index;}result=result.slice(0,newEnd===undefined?end:newEnd);}}else if(string.indexOf(baseToString(separator),end)!=end){var index=result.lastIndexOf(separator);if(index>-1){result=result.slice(0,index);}}return result+omission;}function unescape(string){string=toString(string);return string&&reHasEscapedHtml.test(string)?string.replace(reEscapedHtml,unescapeHtmlChar):string;}var upperCase=createCompounder(function(result,word,index){return result+(index?' ':'')+word.toUpperCase();});var upperFirst=createCaseFirst('toUpperCase');function words(string,pattern,guard){string=toString(string);pattern=guard?undefined:pattern;if(pattern===undefined){return hasUnicodeWord(string)?unicodeWords(string):asciiWords(string);}return string.match(pattern)||[];}var attempt=baseRest(function(func,args){try{return apply(func,undefined,args);}catch(e){return isError(e)?e:new Error(e);}});var bindAll=flatRest(function(object,methodNames){arrayEach(methodNames,function(key){key=toKey(key);baseAssignValue(object,key,bind(object[key],object));});return object;});function cond(pairs){var length=pairs==null?0:pairs.length,toIteratee=getIteratee();pairs=!length?[]:arrayMap(pairs,function(pair){if(typeof pair[1]!='function'){throw new TypeError(FUNC_ERROR_TEXT);}return[toIteratee(pair[0]),pair[1]];});return baseRest(function(args){var index=-1;while(++index<length){var pair=pairs[index];if(apply(pair[0],this,args)){return apply(pair[1],this,args);}}});}function conforms(source){return baseConforms(baseClone(source,CLONE_DEEP_FLAG));}function constant(value){return function(){return value;};}function defaultTo(value,defaultValue){return value==null||value!==value?defaultValue:value;}var flow=createFlow();var flowRight=createFlow(true);function identity(value){return value;}function iteratee(func){return baseIteratee(typeof func=='function'?func:baseClone(func,CLONE_DEEP_FLAG));}function matches(source){return baseMatches(baseClone(source,CLONE_DEEP_FLAG));}function matchesProperty(path,srcValue){return baseMatchesProperty(path,baseClone(srcValue,CLONE_DEEP_FLAG));}var method=baseRest(function(path,args){return function(object){return baseInvoke(object,path,args);};});var methodOf=baseRest(function(object,args){return function(path){return baseInvoke(object,path,args);};});function mixin(object,source,options){var props=keys(source),methodNames=baseFunctions(source,props);if(options==null&&!(isObject(source)&&(methodNames.length||!props.length))){options=source;source=object;object=this;methodNames=baseFunctions(source,keys(source));}var chain=!(isObject(options)&&'chain'in options)||!!options.chain,isFunc=isFunction(object);arrayEach(methodNames,function(methodName){var func=source[methodName];object[methodName]=func;if(isFunc){object.prototype[methodName]=function(){var chainAll=this.__chain__;if(chain||chainAll){var result=object(this.__wrapped__),actions=result.__actions__=copyArray(this.__actions__);actions.push({'func':func,'args':arguments,'thisArg':object});result.__chain__=chainAll;return result;}return func.apply(object,arrayPush([this.value()],arguments));};}});return object;}function noConflict(){if(root._===this){root._=oldDash;}return this;}function noop(){}function nthArg(n){n=toInteger(n);return baseRest(function(args){return baseNth(args,n);});}var over=createOver(arrayMap);var overEvery=createOver(arrayEvery);var overSome=createOver(arraySome);function property(path){return isKey(path)?baseProperty(toKey(path)):basePropertyDeep(path);}function propertyOf(object){return function(path){return object==null?undefined:baseGet(object,path);};}var range=createRange();var rangeRight=createRange(true);function stubArray(){return[];}function stubFalse(){return false;}function stubObject(){return{};}function stubString(){return'';}function stubTrue(){return true;}function times(n,iteratee){n=toInteger(n);if(n<1||n>MAX_SAFE_INTEGER){return[];}var index=MAX_ARRAY_LENGTH,length=nativeMin(n,MAX_ARRAY_LENGTH);iteratee=getIteratee(iteratee);n-=MAX_ARRAY_LENGTH;var result=baseTimes(length,iteratee);while(++index<n){iteratee(index);}return result;}function toPath(value){if(isArray(value)){return arrayMap(value,toKey);}return isSymbol(value)?[value]:copyArray(stringToPath(toString(value)));}function uniqueId(prefix){var id=++idCounter;return toString(prefix)+id;}var add=createMathOperation(function(augend,addend){return augend+addend;},0);var ceil=createRound('ceil');var divide=createMathOperation(function(dividend,divisor){return dividend/divisor;},1);var floor=createRound('floor');function max(array){return array&&array.length?baseExtremum(array,identity,baseGt):undefined;}function maxBy(array,iteratee){return array&&array.length?baseExtremum(array,getIteratee(iteratee,2),baseGt):undefined;}function mean(array){return baseMean(array,identity);}function meanBy(array,iteratee){return baseMean(array,getIteratee(iteratee,2));}function min(array){return array&&array.length?baseExtremum(array,identity,baseLt):undefined;}function minBy(array,iteratee){return array&&array.length?baseExtremum(array,getIteratee(iteratee,2),baseLt):undefined;}var multiply=createMathOperation(function(multiplier,multiplicand){return multiplier*multiplicand;},1);var round=createRound('round');var subtract=createMathOperation(function(minuend,subtrahend){return minuend-subtrahend;},0);function sum(array){return array&&array.length?baseSum(array,identity):0;}function sumBy(array,iteratee){return array&&array.length?baseSum(array,getIteratee(iteratee,2)):0;}lodash.after=after;lodash.ary=ary;lodash.assign=assign;lodash.assignIn=assignIn;lodash.assignInWith=assignInWith;lodash.assignWith=assignWith;lodash.at=at;lodash.before=before;lodash.bind=bind;lodash.bindAll=bindAll;lodash.bindKey=bindKey;lodash.castArray=castArray;lodash.chain=chain;lodash.chunk=chunk;lodash.compact=compact;lodash.concat=concat;lodash.cond=cond;lodash.conforms=conforms;lodash.constant=constant;lodash.countBy=countBy;lodash.create=create;lodash.curry=curry;lodash.curryRight=curryRight;lodash.debounce=debounce;lodash.defaults=defaults;lodash.defaultsDeep=defaultsDeep;lodash.defer=defer;lodash.delay=delay;lodash.difference=difference;lodash.differenceBy=differenceBy;lodash.differenceWith=differenceWith;lodash.drop=drop;lodash.dropRight=dropRight;lodash.dropRightWhile=dropRightWhile;lodash.dropWhile=dropWhile;lodash.fill=fill;lodash.filter=filter;lodash.flatMap=flatMap;lodash.flatMapDeep=flatMapDeep;lodash.flatMapDepth=flatMapDepth;lodash.flatten=flatten;lodash.flattenDeep=flattenDeep;lodash.flattenDepth=flattenDepth;lodash.flip=flip;lodash.flow=flow;lodash.flowRight=flowRight;lodash.fromPairs=fromPairs;lodash.functions=functions;lodash.functionsIn=functionsIn;lodash.groupBy=groupBy;lodash.initial=initial;lodash.intersection=intersection;lodash.intersectionBy=intersectionBy;lodash.intersectionWith=intersectionWith;lodash.invert=invert;lodash.invertBy=invertBy;lodash.invokeMap=invokeMap;lodash.iteratee=iteratee;lodash.keyBy=keyBy;lodash.keys=keys;lodash.keysIn=keysIn;lodash.map=map;lodash.mapKeys=mapKeys;lodash.mapValues=mapValues;lodash.matches=matches;lodash.matchesProperty=matchesProperty;lodash.memoize=memoize;lodash.merge=merge;lodash.mergeWith=mergeWith;lodash.method=method;lodash.methodOf=methodOf;lodash.mixin=mixin;lodash.negate=negate;lodash.nthArg=nthArg;lodash.omit=omit;lodash.omitBy=omitBy;lodash.once=once;lodash.orderBy=orderBy;lodash.over=over;lodash.overArgs=overArgs;lodash.overEvery=overEvery;lodash.overSome=overSome;lodash.partial=partial;lodash.partialRight=partialRight;lodash.partition=partition;lodash.pick=pick;lodash.pickBy=pickBy;lodash.property=property;lodash.propertyOf=propertyOf;lodash.pull=pull;lodash.pullAll=pullAll;lodash.pullAllBy=pullAllBy;lodash.pullAllWith=pullAllWith;lodash.pullAt=pullAt;lodash.range=range;lodash.rangeRight=rangeRight;lodash.rearg=rearg;lodash.reject=reject;lodash.remove=remove;lodash.rest=rest;lodash.reverse=reverse;lodash.sampleSize=sampleSize;lodash.set=set;lodash.setWith=setWith;lodash.shuffle=shuffle;lodash.slice=slice;lodash.sortBy=sortBy;lodash.sortedUniq=sortedUniq;lodash.sortedUniqBy=sortedUniqBy;lodash.split=split;lodash.spread=spread;lodash.tail=tail;lodash.take=take;lodash.takeRight=takeRight;lodash.takeRightWhile=takeRightWhile;lodash.takeWhile=takeWhile;lodash.tap=tap;lodash.throttle=throttle;lodash.thru=thru;lodash.toArray=toArray;lodash.toPairs=toPairs;lodash.toPairsIn=toPairsIn;lodash.toPath=toPath;lodash.toPlainObject=toPlainObject;lodash.transform=transform;lodash.unary=unary;lodash.union=union;lodash.unionBy=unionBy;lodash.unionWith=unionWith;lodash.uniq=uniq;lodash.uniqBy=uniqBy;lodash.uniqWith=uniqWith;lodash.unset=unset;lodash.unzip=unzip;lodash.unzipWith=unzipWith;lodash.update=update;lodash.updateWith=updateWith;lodash.values=values;lodash.valuesIn=valuesIn;lodash.without=without;lodash.words=words;lodash.wrap=wrap;lodash.xor=xor;lodash.xorBy=xorBy;lodash.xorWith=xorWith;lodash.zip=zip;lodash.zipObject=zipObject;lodash.zipObjectDeep=zipObjectDeep;lodash.zipWith=zipWith;lodash.entries=toPairs;lodash.entriesIn=toPairsIn;lodash.extend=assignIn;lodash.extendWith=assignInWith;mixin(lodash,lodash);lodash.add=add;lodash.attempt=attempt;lodash.camelCase=camelCase;lodash.capitalize=capitalize;lodash.ceil=ceil;lodash.clamp=clamp;lodash.clone=clone;lodash.cloneDeep=cloneDeep;lodash.cloneDeepWith=cloneDeepWith;lodash.cloneWith=cloneWith;lodash.conformsTo=conformsTo;lodash.deburr=deburr;lodash.defaultTo=defaultTo;lodash.divide=divide;lodash.endsWith=endsWith;lodash.eq=eq;lodash.escape=escape;lodash.escapeRegExp=escapeRegExp;lodash.every=every;lodash.find=find;lodash.findIndex=findIndex;lodash.findKey=findKey;lodash.findLast=findLast;lodash.findLastIndex=findLastIndex;lodash.findLastKey=findLastKey;lodash.floor=floor;lodash.forEach=forEach;lodash.forEachRight=forEachRight;lodash.forIn=forIn;lodash.forInRight=forInRight;lodash.forOwn=forOwn;lodash.forOwnRight=forOwnRight;lodash.get=get;lodash.gt=gt;lodash.gte=gte;lodash.has=has;lodash.hasIn=hasIn;lodash.head=head;lodash.identity=identity;lodash.includes=includes;lodash.indexOf=indexOf;lodash.inRange=inRange;lodash.invoke=invoke;lodash.isArguments=isArguments;lodash.isArray=isArray;lodash.isArrayBuffer=isArrayBuffer;lodash.isArrayLike=isArrayLike;lodash.isArrayLikeObject=isArrayLikeObject;lodash.isBoolean=isBoolean;lodash.isBuffer=isBuffer;lodash.isDate=isDate;lodash.isElement=isElement;lodash.isEmpty=isEmpty;lodash.isEqual=isEqual;lodash.isEqualWith=isEqualWith;lodash.isError=isError;lodash.isFinite=isFinite;lodash.isFunction=isFunction;lodash.isInteger=isInteger;lodash.isLength=isLength;lodash.isMap=isMap;lodash.isMatch=isMatch;lodash.isMatchWith=isMatchWith;lodash.isNaN=isNaN;lodash.isNative=isNative;lodash.isNil=isNil;lodash.isNull=isNull;lodash.isNumber=isNumber;lodash.isObject=isObject;lodash.isObjectLike=isObjectLike;lodash.isPlainObject=isPlainObject;lodash.isRegExp=isRegExp;lodash.isSafeInteger=isSafeInteger;lodash.isSet=isSet;lodash.isString=isString;lodash.isSymbol=isSymbol;lodash.isTypedArray=isTypedArray;lodash.isUndefined=isUndefined;lodash.isWeakMap=isWeakMap;lodash.isWeakSet=isWeakSet;lodash.join=join;lodash.kebabCase=kebabCase;lodash.last=last;lodash.lastIndexOf=lastIndexOf;lodash.lowerCase=lowerCase;lodash.lowerFirst=lowerFirst;lodash.lt=lt;lodash.lte=lte;lodash.max=max;lodash.maxBy=maxBy;lodash.mean=mean;lodash.meanBy=meanBy;lodash.min=min;lodash.minBy=minBy;lodash.stubArray=stubArray;lodash.stubFalse=stubFalse;lodash.stubObject=stubObject;lodash.stubString=stubString;lodash.stubTrue=stubTrue;lodash.multiply=multiply;lodash.nth=nth;lodash.noConflict=noConflict;lodash.noop=noop;lodash.now=now;lodash.pad=pad;lodash.padEnd=padEnd;lodash.padStart=padStart;lodash.parseInt=parseInt;lodash.random=random;lodash.reduce=reduce;lodash.reduceRight=reduceRight;lodash.repeat=repeat;lodash.replace=replace;lodash.result=result;lodash.round=round;lodash.runInContext=runInContext;lodash.sample=sample;lodash.size=size;lodash.snakeCase=snakeCase;lodash.some=some;lodash.sortedIndex=sortedIndex;lodash.sortedIndexBy=sortedIndexBy;lodash.sortedIndexOf=sortedIndexOf;lodash.sortedLastIndex=sortedLastIndex;lodash.sortedLastIndexBy=sortedLastIndexBy;lodash.sortedLastIndexOf=sortedLastIndexOf;lodash.startCase=startCase;lodash.startsWith=startsWith;lodash.subtract=subtract;lodash.sum=sum;lodash.sumBy=sumBy;lodash.template=template;lodash.times=times;lodash.toFinite=toFinite;lodash.toInteger=toInteger;lodash.toLength=toLength;lodash.toLower=toLower;lodash.toNumber=toNumber;lodash.toSafeInteger=toSafeInteger;lodash.toString=toString;lodash.toUpper=toUpper;lodash.trim=trim;lodash.trimEnd=trimEnd;lodash.trimStart=trimStart;lodash.truncate=truncate;lodash.unescape=unescape;lodash.uniqueId=uniqueId;lodash.upperCase=upperCase;lodash.upperFirst=upperFirst;lodash.each=forEach;lodash.eachRight=forEachRight;lodash.first=head;mixin(lodash,function(){var source={};baseForOwn(lodash,function(func,methodName){if(!hasOwnProperty.call(lodash.prototype,methodName)){source[methodName]=func;}});return source;}(),{'chain':false});lodash.VERSION=VERSION;arrayEach(['bind','bindKey','curry','curryRight','partial','partialRight'],function(methodName){lodash[methodName].placeholder=lodash;});arrayEach(['drop','take'],function(methodName,index){LazyWrapper.prototype[methodName]=function(n){n=n===undefined?1:nativeMax(toInteger(n),0);var result=this.__filtered__&&!index?new LazyWrapper(this):this.clone();if(result.__filtered__){result.__takeCount__=nativeMin(n,result.__takeCount__);}else{result.__views__.push({'size':nativeMin(n,MAX_ARRAY_LENGTH),'type':methodName+(result.__dir__<0?'Right':'')});}return result;};LazyWrapper.prototype[methodName+'Right']=function(n){return this.reverse()[methodName](n).reverse();};});arrayEach(['filter','map','takeWhile'],function(methodName,index){var type=index+1,isFilter=type==LAZY_FILTER_FLAG||type==LAZY_WHILE_FLAG;LazyWrapper.prototype[methodName]=function(iteratee){var result=this.clone();result.__iteratees__.push({'iteratee':getIteratee(iteratee,3),'type':type});result.__filtered__=result.__filtered__||isFilter;return result;};});arrayEach(['head','last'],function(methodName,index){var takeName='take'+(index?'Right':'');LazyWrapper.prototype[methodName]=function(){return this[takeName](1).value()[0];};});arrayEach(['initial','tail'],function(methodName,index){var dropName='drop'+(index?'':'Right');LazyWrapper.prototype[methodName]=function(){return this.__filtered__?new LazyWrapper(this):this[dropName](1);};});LazyWrapper.prototype.compact=function(){return this.filter(identity);};LazyWrapper.prototype.find=function(predicate){return this.filter(predicate).head();};LazyWrapper.prototype.findLast=function(predicate){return this.reverse().find(predicate);};LazyWrapper.prototype.invokeMap=baseRest(function(path,args){if(typeof path=='function'){return new LazyWrapper(this);}return this.map(function(value){return baseInvoke(value,path,args);});});LazyWrapper.prototype.reject=function(predicate){return this.filter(negate(getIteratee(predicate)));};LazyWrapper.prototype.slice=function(start,end){start=toInteger(start);var result=this;if(result.__filtered__&&(start>0||end<0)){return new LazyWrapper(result);}if(start<0){result=result.takeRight(-start);}else if(start){result=result.drop(start);}if(end!==undefined){end=toInteger(end);result=end<0?result.dropRight(-end):result.take(end-start);}return result;};LazyWrapper.prototype.takeRightWhile=function(predicate){return this.reverse().takeWhile(predicate).reverse();};LazyWrapper.prototype.toArray=function(){return this.take(MAX_ARRAY_LENGTH);};baseForOwn(LazyWrapper.prototype,function(func,methodName){var checkIteratee=/^(?:filter|find|map|reject)|While$/.test(methodName),isTaker=/^(?:head|last)$/.test(methodName),lodashFunc=lodash[isTaker?'take'+(methodName=='last'?'Right':''):methodName],retUnwrapped=isTaker||/^find/.test(methodName);if(!lodashFunc){return;}lodash.prototype[methodName]=function(){var value=this.__wrapped__,args=isTaker?[1]:arguments,isLazy=value instanceof LazyWrapper,iteratee=args[0],useLazy=isLazy||isArray(value);var interceptor=function(value){var result=lodashFunc.apply(lodash,arrayPush([value],args));return isTaker&&chainAll?result[0]:result;};if(useLazy&&checkIteratee&&typeof iteratee=='function'&&iteratee.length!=1){isLazy=useLazy=false;}var chainAll=this.__chain__,isHybrid=!!this.__actions__.length,isUnwrapped=retUnwrapped&&!chainAll,onlyLazy=isLazy&&!isHybrid;if(!retUnwrapped&&useLazy){value=onlyLazy?value:new LazyWrapper(this);var result=func.apply(value,args);result.__actions__.push({'func':thru,'args':[interceptor],'thisArg':undefined});return new LodashWrapper(result,chainAll);}if(isUnwrapped&&onlyLazy){return func.apply(this,args);}result=this.thru(interceptor);return isUnwrapped?isTaker?result.value()[0]:result.value():result;};});arrayEach(['pop','push','shift','sort','splice','unshift'],function(methodName){var func=arrayProto[methodName],chainName=/^(?:push|sort|unshift)$/.test(methodName)?'tap':'thru',retUnwrapped=/^(?:pop|shift)$/.test(methodName);lodash.prototype[methodName]=function(){var args=arguments;if(retUnwrapped&&!this.__chain__){var value=this.value();return func.apply(isArray(value)?value:[],args);}return this[chainName](function(value){return func.apply(isArray(value)?value:[],args);});};});baseForOwn(LazyWrapper.prototype,function(func,methodName){var lodashFunc=lodash[methodName];if(lodashFunc){var key=lodashFunc.name+'',names=realNames[key]||(realNames[key]=[]);names.push({'name':methodName,'func':lodashFunc});}});realNames[createHybrid(undefined,WRAP_BIND_KEY_FLAG).name]=[{'name':'wrapper','func':undefined}];LazyWrapper.prototype.clone=lazyClone;LazyWrapper.prototype.reverse=lazyReverse;LazyWrapper.prototype.value=lazyValue;lodash.prototype.at=wrapperAt;lodash.prototype.chain=wrapperChain;lodash.prototype.commit=wrapperCommit;lodash.prototype.next=wrapperNext;lodash.prototype.plant=wrapperPlant;lodash.prototype.reverse=wrapperReverse;lodash.prototype.toJSON=lodash.prototype.valueOf=lodash.prototype.value=wrapperValue;lodash.prototype.first=lodash.prototype.head;if(symIterator){lodash.prototype[symIterator]=wrapperToIterator;}return lodash;};var _=runInContext();if(typeof define=='function'&&typeof define.amd=='object'&&define.amd){root._=_;define(function(){return _;});}else if(freeModule){(freeModule.exports=_)._=_;freeExports._=_;}else{root._=_;}}).call(this);},8155:function(__unusedmodule,exports){exports.read=function(buffer,offset,isLE,mLen,nBytes){var e,m;var eLen=nBytes*8-mLen-1;var eMax=(1<<eLen)-1;var eBias=eMax>>1;var nBits=-7;var i=isLE?nBytes-1:0;var d=isLE?-1:1;var s=buffer[offset+i];i+=d;e=s&(1<<-nBits)-1;s>>=-nBits;nBits+=eLen;for(;nBits>0;e=e*256+buffer[offset+i],i+=d,nBits-=8){}m=e&(1<<-nBits)-1;e>>=-nBits;nBits+=mLen;for(;nBits>0;m=m*256+buffer[offset+i],i+=d,nBits-=8){}if(e===0){e=1-eBias;}else if(e===eMax){return m?NaN:(s?-1:1)*Infinity;}else{m=m+Math.pow(2,mLen);e=e-eBias;}return(s?-1:1)*m*Math.pow(2,e-mLen);};exports.write=function(buffer,value,offset,isLE,mLen,nBytes){var e,m,c;var eLen=nBytes*8-mLen-1;var eMax=(1<<eLen)-1;var eBias=eMax>>1;var rt=mLen===23?Math.pow(2,-24)-Math.pow(2,-77):0;var i=isLE?0:nBytes-1;var d=isLE?1:-1;var s=value<0||value===0&&1/value<0?1:0;value=Math.abs(value);if(isNaN(value)||value===Infinity){m=isNaN(value)?1:0;e=eMax;}else{e=Math.floor(Math.log(value)/Math.LN2);if(value*(c=Math.pow(2,-e))<1){e--;c*=2;}if(e+eBias>=1){value+=rt/c;}else{value+=rt*Math.pow(2,1-eBias);}if(value*c>=2){e++;c/=2;}if(e+eBias>=eMax){m=0;e=eMax;}else if(e+eBias>=1){m=(value*c-1)*Math.pow(2,mLen);e=e+eBias;}else{m=value*Math.pow(2,eBias-1)*Math.pow(2,mLen);e=0;}}for(;mLen>=8;buffer[offset+i]=m&0xff,i+=d,m/=256,mLen-=8){}e=e<<mLen|m;eLen+=mLen;for(;eLen>0;buffer[offset+i]=e&0xff,i+=d,e/=256,eLen-=8){}buffer[offset+i-d]|=s*128;};},8164:function(module,__unusedexports,__webpack_require__){var Source=__webpack_require__(7683);var Sink=__webpack_require__(221);module.exports=function(){var source=Source();var sink=Sink();return{source:source,sink:sink,resolve:function(duplex){source.resolve(duplex.source);sink.resolve(duplex.sink);}};};},8169:function(module){module.exports=[["8740",""],["8767",""],["87a1",""],["8840","",4,""],["88a1",""],["8940",""],["8943",""],["8946",""],["894c",""],["89a1",""],["89ab",""],["89b0",""],["89b5",""],["89c1",""],["89c5",""],["8a40",""],["8a43",""],["8a64",""],["8a76",""],["8aa1",""],["8aac",""],["8ab2",""],["8abb",""],["8ac9",""],["8ace",""],["8adf",""],["8af6",""],["8b40",""],["8b55",""],["8ba1",""],["8bde",""],["8c40",""],["8ca1",""],["8ca7",""],["8cc9",""],["8cce",""],["8ce6",""],["8d40",""],["8d42",""],["8da1",""],["8e40",""],["8ea1",""],["8f40",""],["8fa1",""],["9040",""],["90a1",""],["9140",""],["91a1",""],["9240",""],["92a1",""],["9340",""],["93a1",""],["9440",""],["94a1",""],["9540",""],["95a1",""],["9640",""],["96a1",""],["9740",""],["97a1",""],["9840",""],["98a1",""],["9940",""],["99a1",""],["9a40",""],["9aa1",""],["9b40",""],["9b62",""],["9ba1",""],["9c40",""],["9ca1",""],["9d40",""],["9da1",""],["9e40",""],["9ea1",""],["9ead",""],["9ec5",""],["9ef5",""],["9f40",""],["9f4f",""],["9fa1",""],["9fae",""],["9fb2",""],["9fc1",""],["9fc9",""],["9fdb",""],["9fe7",""],["9feb",""],["9ff0",""],["a040",""],["a055",""],["a058",""],["a05b",""],["a063",""],["a073",""],["a0a1",""],["a0a6",""],["a0ae",""],["a0b0",""],["a0d4",""],["a0e2",""],["a3c0","",31,""],["c6a1","",9,"",9,"",9,"",23],["c740","",58,""],["c7a1","",81,"",5,"",4],["c840","",26,"",25,""],["c8a1",""],["c8cd",""],["c8f5",""],["f9fe",""],["fa40",""],["faa1",""],["fb40",""],["fba1",""],["fc40",""],["fca1",""],["fd40",""],["fda1",""],["fe40",""],["fea1",""]];},8170:function(__unusedmodule,exports,__webpack_require__){"use strict";const CID=__webpack_require__(9339);exports.normalizePath=path=>{if(Buffer.isBuffer(path)){return new CID(path).toString();}if(CID.isCID(path)){return path.toString();}if(path.indexOf('/ipfs/')===0){path=path.substring('/ipfs/'.length);}if(path.charAt(path.length-1)==='/'){path=path.substring(0,path.length-1);}return path;};exports.parseChunkerString=chunker=>{if(!chunker){return{chunker:'fixed'};}else if(chunker.startsWith('size-')){const sizeStr=chunker.split('-')[1];const size=parseInt(sizeStr);if(isNaN(size)){throw new Error('Chunker parameter size must be an integer');}return{chunker:'fixed',chunkerOptions:{maxChunkSize:size}};}else if(chunker.startsWith('rabin')){return{chunker:'rabin',chunkerOptions:parseRabinString(chunker)};}else{throw new Error(`Unrecognized chunker option: ${chunker}`);}};function parseRabinString(chunker){const options={};const parts=chunker.split('-');switch(parts.length){case 1:options.avgChunkSize=262144;break;case 2:options.avgChunkSize=parseChunkSize(parts[1],'avg');break;case 4:options.minChunkSize=parseChunkSize(parts[1],'min');options.avgChunkSize=parseChunkSize(parts[2],'avg');options.maxChunkSize=parseChunkSize(parts[3],'max');break;default:throw new Error('Incorrect chunker format (expected "rabin" "rabin-[avg]" or "rabin-[min]-[avg]-[max]"');}return options;}function parseChunkSize(str,name){let size=parseInt(str);if(isNaN(size)){throw new Error(`Chunker parameter ${name} must be an integer`);}return size;}},8175:function(module,exports,__webpack_require__){"use strict";const DAGLink=__webpack_require__(7545);function createDagLinkFromB58EncodedHash(link){return new DAGLink(link.name?link.name:link.Name,link.size?link.size:link.Size,link.hash||link.Hash||link.multihash||link.cid);}exports=module.exports;exports.createDagLinkFromB58EncodedHash=createDagLinkFromB58EncodedHash;},8180:function(module,__unusedexports,__webpack_require__){"use strict";const each=__webpack_require__(4486);const whilst=__webpack_require__(294);const Errors=__webpack_require__(759).Errors;class TieredDatastore{constructor(stores){this.stores=stores.slice();}open(callback){each(this.stores,(store,cb)=>{store.open(cb);},err=>{if(err){return callback(Errors.dbOpenFailedError());}callback();});}put(key,value,callback){each(this.stores,(store,cb)=>{store.put(key,value,cb);},err=>{if(err){return callback(Errors.dbWriteFailedError());}callback();});}get(key,callback){const storeLength=this.stores.length;let done=false;let i=0;whilst(()=>!done&&i<storeLength,cb=>{const store=this.stores[i++];store.get(key,(err,res)=>{if(err==null){done=true;return cb(null,res);}cb();});},(err,res)=>{if(err||!res){return callback(Errors.notFoundError());}callback(null,res);});}has(key,callback){const storeLength=this.stores.length;let done=false;let i=0;whilst(()=>!done&&i<storeLength,cb=>{const store=this.stores[i++];store.has(key,(err,exists)=>{if(err==null){done=true;return cb(null,exists);}cb();});},callback);}delete(key,callback){each(this.stores,(store,cb)=>{store.delete(key,cb);},err=>{if(err){return callback(Errors.dbDeleteFailedError());}callback();});}close(callback){each(this.stores,(store,cb)=>{store.close(cb);},callback);}batch(){const batches=this.stores.map(store=>store.batch());return{put:(key,value)=>{batches.forEach(b=>b.put(key,value));},delete:(key)=>{batches.forEach(b=>b.delete(key));},commit:(callback)=>{each(batches,(b,cb)=>{b.commit(cb);},callback);}};}query(q){return this.stores[this.stores.length-1].query(q);}}module.exports=TieredDatastore;},8230:function(module,__unusedexports,__webpack_require__){"use strict";const TCP=__webpack_require__(2301);const MulticastDNS=__webpack_require__(9241);const WS=__webpack_require__(7181);const WebSocketStarMulti=__webpack_require__(307);const Bootstrap=__webpack_require__(7911);const KadDHT=__webpack_require__(2648);const Multiplex=__webpack_require__(1486);const SECIO=__webpack_require__(7757);const libp2p=__webpack_require__(2155);const defaultsDeep=__webpack_require__(2500);const multiaddr=__webpack_require__(5920);class Node extends libp2p{constructor(_options){const wsstarServers=_options.peerInfo.multiaddrs.toArray().map(String).filter(addr=>addr.includes('p2p-websocket-star'));_options.peerInfo.multiaddrs.replace(wsstarServers.map(multiaddr),'/p2p-websocket-star');const wsstar=new WebSocketStarMulti({servers:wsstarServers,id:_options.peerInfo.id,ignore_no_online:!wsstarServers.length||_options.wsStarIgnoreErrors});const defaults={modules:{transport:[TCP,WS,wsstar],streamMuxer:[Multiplex],connEncryption:[SECIO],peerDiscovery:[MulticastDNS,Bootstrap,wsstar.discovery],dht:KadDHT},config:{peerDiscovery:{mdns:{enabled:true},bootstrap:{enabled:true},websocketStar:{enabled:true}},dht:{kBucketSize:20},EXPERIMENTAL:{dht:false,pubsub:false}}};super(defaultsDeep(_options,defaults));}}module.exports=Node;},8232:function(module,__unusedexports,__webpack_require__){var arrayPush=__webpack_require__(3380),isFlattenable=__webpack_require__(5349);function baseFlatten(array,depth,predicate,isStrict,result){var index=-1,length=array.length;predicate||(predicate=isFlattenable);result||(result=[]);while(++index<length){var value=array[index];if(depth>0&&predicate(value)){if(depth>1){baseFlatten(value,depth-1,predicate,isStrict,result);}else{arrayPush(result,value);}}else if(!isStrict){result[result.length]=value;}}return result;}module.exports=baseFlatten;},8233:function(module){"use strict";module.exports=`
// topicCID = cid(merkledag_protobuf(topicDescriptor)); (not the topic.name)
message TopicDescriptor {
  optional string name = 1;
  optional AuthOpts auth = 2;
  optional EncOpts enc = 2;

  message AuthOpts {
    optional AuthMode mode = 1;
    repeated bytes keys = 2; // root keys to trust

    enum AuthMode {
      NONE = 0; // no authentication, anyone can publish
      KEY = 1; // only messages signed by keys in the topic descriptor are accepted
      WOT = 2; // web of trust, certificates can allow publisher set to grow
    }
  }

  message EncOpts {
    optional EncMode mode = 1;
    repeated bytes keyHashes = 2; // the hashes of the shared keys used (salted)

    enum EncMode {
      NONE = 0; // no encryption, anyone can read
      SHAREDKEY = 1; // messages are encrypted with shared key
      WOT = 2; // web of trust, certificates can allow publisher set to grow
    }
  }
}`;},8235:function(module){"use strict";const mask=(source,mask,output,offset,length)=>{for(var i=0;i<length;i++){output[offset+i]=source[i]^mask[i&3];}};const unmask=(buffer,mask)=>{const length=buffer.length;for(var i=0;i<length;i++){buffer[i]^=mask[i&3];}};module.exports={mask,unmask};},8239:function(module){var funcProto=Function.prototype;var funcToString=funcProto.toString;function toSource(func){if(func!=null){try{return funcToString.call(func);}catch(e){}try{return func+'';}catch(e){}}return'';}module.exports=toSource;},8244:function(module,__unusedexports,__webpack_require__){"use strict";const DAGLink=__webpack_require__(7545);function create(name,size,cid,callback){const link=new DAGLink(name,size,cid);callback(null,link);}module.exports=create;},8249:function(module){var objectProto=Object.prototype;function isPrototype(value){var Ctor=value&&value.constructor,proto=typeof Ctor=='function'&&Ctor.prototype||objectProto;return value===proto;}module.exports=isPrototype;},8256:function(module){var FUNC_ERROR_TEXT='Expected a function';var HASH_UNDEFINED='__lodash_hash_undefined__';var INFINITY=1/0;var funcTag='[object Function]',genTag='[object GeneratorFunction]',symbolTag='[object Symbol]';var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/,reLeadingDot=/^\./,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;var reRegExpChar=/[\\^$.*+?()[\]{}|]/g;var reEscapeChar=/\\(\\)?/g;var reIsHostCtor=/^\[object .+?Constructor\]$/;var freeGlobal=typeof global=='object'&&global&&global.Object===Object&&global;var freeSelf=typeof self=='object'&&self&&self.Object===Object&&self;var root=freeGlobal||freeSelf||Function('return this')();function getValue(object,key){return object==null?undefined:object[key];}function isHostObject(value){var result=false;if(value!=null&&typeof value.toString!='function'){try{result=!!(value+'');}catch(e){}}return result;}var arrayProto=Array.prototype,funcProto=Function.prototype,objectProto=Object.prototype;var coreJsData=root['__core-js_shared__'];var maskSrcKey=function(){var uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||'');return uid?'Symbol(src)_1.'+uid:'';}();var funcToString=funcProto.toString;var hasOwnProperty=objectProto.hasOwnProperty;var objectToString=objectProto.toString;var reIsNative=RegExp('^'+funcToString.call(hasOwnProperty).replace(reRegExpChar,'\\$&').replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,'$1.*?')+'$');var Symbol=root.Symbol,splice=arrayProto.splice;var Map=getNative(root,'Map'),nativeCreate=getNative(Object,'create');var symbolProto=Symbol?Symbol.prototype:undefined,symbolToString=symbolProto?symbolProto.toString:undefined;function Hash(entries){var index=-1,length=entries?entries.length:0;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1]);}}function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{};}function hashDelete(key){return this.has(key)&&delete this.__data__[key];}function hashGet(key){var data=this.__data__;if(nativeCreate){var result=data[key];return result===HASH_UNDEFINED?undefined:result;}return hasOwnProperty.call(data,key)?data[key]:undefined;}function hashHas(key){var data=this.__data__;return nativeCreate?data[key]!==undefined:hasOwnProperty.call(data,key);}function hashSet(key,value){var data=this.__data__;data[key]=nativeCreate&&value===undefined?HASH_UNDEFINED:value;return this;}Hash.prototype.clear=hashClear;Hash.prototype['delete']=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;function ListCache(entries){var index=-1,length=entries?entries.length:0;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1]);}}function listCacheClear(){this.__data__=[];}function listCacheDelete(key){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){return false;}var lastIndex=data.length-1;if(index==lastIndex){data.pop();}else{splice.call(data,index,1);}return true;}function listCacheGet(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?undefined:data[index][1];}function listCacheHas(key){return assocIndexOf(this.__data__,key)>-1;}function listCacheSet(key,value){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){data.push([key,value]);}else{data[index][1]=value;}return this;}ListCache.prototype.clear=listCacheClear;ListCache.prototype['delete']=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;function MapCache(entries){var index=-1,length=entries?entries.length:0;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1]);}}function mapCacheClear(){this.__data__={'hash':new Hash(),'map':new(Map||ListCache)(),'string':new Hash()};}function mapCacheDelete(key){return getMapData(this,key)['delete'](key);}function mapCacheGet(key){return getMapData(this,key).get(key);}function mapCacheHas(key){return getMapData(this,key).has(key);}function mapCacheSet(key,value){getMapData(this,key).set(key,value);return this;}MapCache.prototype.clear=mapCacheClear;MapCache.prototype['delete']=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;function assocIndexOf(array,key){var length=array.length;while(length--){if(eq(array[length][0],key)){return length;}}return-1;}function baseGet(object,path){path=isKey(path,object)?[path]:castPath(path);var index=0,length=path.length;while(object!=null&&index<length){object=object[toKey(path[index++])];}return index&&index==length?object:undefined;}function baseIsNative(value){if(!isObject(value)||isMasked(value)){return false;}var pattern=isFunction(value)||isHostObject(value)?reIsNative:reIsHostCtor;return pattern.test(toSource(value));}function baseToString(value){if(typeof value=='string'){return value;}if(isSymbol(value)){return symbolToString?symbolToString.call(value):'';}var result=value+'';return result=='0'&&1/value==-INFINITY?'-0':result;}function castPath(value){return isArray(value)?value:stringToPath(value);}function getMapData(map,key){var data=map.__data__;return isKeyable(key)?data[typeof key=='string'?'string':'hash']:data.map;}function getNative(object,key){var value=getValue(object,key);return baseIsNative(value)?value:undefined;}function isKey(value,object){if(isArray(value)){return false;}var type=typeof value;if(type=='number'||type=='symbol'||type=='boolean'||value==null||isSymbol(value)){return true;}return reIsPlainProp.test(value)||!reIsDeepProp.test(value)||object!=null&&value in Object(object);}function isKeyable(value){var type=typeof value;return type=='string'||type=='number'||type=='symbol'||type=='boolean'?value!=='__proto__':value===null;}function isMasked(func){return!!maskSrcKey&&maskSrcKey in func;}var stringToPath=memoize(function(string){string=toString(string);var result=[];if(reLeadingDot.test(string)){result.push('');}string.replace(rePropName,function(match,number,quote,string){result.push(quote?string.replace(reEscapeChar,'$1'):number||match);});return result;});function toKey(value){if(typeof value=='string'||isSymbol(value)){return value;}var result=value+'';return result=='0'&&1/value==-INFINITY?'-0':result;}function toSource(func){if(func!=null){try{return funcToString.call(func);}catch(e){}try{return func+'';}catch(e){}}return'';}function memoize(func,resolver){if(typeof func!='function'||resolver&&typeof resolver!='function'){throw new TypeError(FUNC_ERROR_TEXT);}var memoized=function(){var args=arguments,key=resolver?resolver.apply(this,args):args[0],cache=memoized.cache;if(cache.has(key)){return cache.get(key);}var result=func.apply(this,args);memoized.cache=cache.set(key,result);return result;};memoized.cache=new(memoize.Cache||MapCache)();return memoized;}memoize.Cache=MapCache;function eq(value,other){return value===other||value!==value&&other!==other;}var isArray=Array.isArray;function isFunction(value){var tag=isObject(value)?objectToString.call(value):'';return tag==funcTag||tag==genTag;}function isObject(value){var type=typeof value;return!!value&&(type=='object'||type=='function');}function isObjectLike(value){return!!value&&typeof value=='object';}function isSymbol(value){return typeof value=='symbol'||isObjectLike(value)&&objectToString.call(value)==symbolTag;}function toString(value){return value==null?'':baseToString(value);}function get(object,path,defaultValue){var result=object==null?undefined:baseGet(object,path);return result===undefined?defaultValue:result;}module.exports=get;},8278:function(module){"use strict";module.exports=`enum KeyType {
  RSA = 0;
  Ed25519 = 1;
  Secp256k1 = 2;
}
message PublicKey {
  required KeyType Type = 1;
  required bytes Data = 2;
}
message PrivateKey {
  required KeyType Type = 1;
  required bytes Data = 2;
}`;},8283:function(module,exports,__webpack_require__){"use strict";var tty=__webpack_require__(8859);var util=__webpack_require__(649);exports.init=init;exports.log=log;exports.formatArgs=formatArgs;exports.save=save;exports.load=load;exports.useColors=useColors;exports.colors=[6,2,3,4,5,1];try{var supportsColor=__webpack_require__(8443);if(supportsColor&&(supportsColor.stderr||supportsColor).level>=2){exports.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221];}}catch(error){}exports.inspectOpts=Object.keys(process.env).filter(function(key){return /^debug_/i.test(key);}).reduce(function(obj,key){var prop=key.substring(6).toLowerCase().replace(/_([a-z])/g,function(_,k){return k.toUpperCase();});var val=process.env[key];if(/^(yes|on|true|enabled)$/i.test(val)){val=true;}else if(/^(no|off|false|disabled)$/i.test(val)){val=false;}else if(val==='null'){val=null;}else{val=Number(val);}obj[prop]=val;return obj;},{});function useColors(){return'colors'in exports.inspectOpts?Boolean(exports.inspectOpts.colors):tty.isatty(process.stderr.fd);}function formatArgs(args){var name=this.namespace,useColors=this.useColors;if(useColors){var c=this.color;var colorCode="\x1B[3"+(c<8?c:'8;5;'+c);var prefix="  ".concat(colorCode,";1m").concat(name," \x1B[0m");args[0]=prefix+args[0].split('\n').join('\n'+prefix);args.push(colorCode+'m+'+module.exports.humanize(this.diff)+"\x1B[0m");}else{args[0]=getDate()+name+' '+args[0];}}function getDate(){if(exports.inspectOpts.hideDate){return'';}return new Date().toISOString()+' ';}function log(){return process.stderr.write(util.format.apply(util,arguments)+'\n');}function save(namespaces){if(namespaces){process.env.DEBUG=namespaces;}else{delete process.env.DEBUG;}}function load(){return process.env.DEBUG;}function init(debug){debug.inspectOpts={};var keys=Object.keys(exports.inspectOpts);for(var i=0;i<keys.length;i++){debug.inspectOpts[keys[i]]=exports.inspectOpts[keys[i]];}}module.exports=__webpack_require__(788)(exports);var formatters=module.exports.formatters;formatters.o=function(v){this.inspectOpts.colors=this.useColors;return util.inspect(v,this.inspectOpts).replace(/\s*\n\s*/g,' ');};formatters.O=function(v){this.inspectOpts.colors=this.useColors;return util.inspect(v,this.inspectOpts);};},8292:function(module,__unusedexports,__webpack_require__){"use strict";const handshake=__webpack_require__(9346);const lp=__webpack_require__(8585);const Connection=__webpack_require__(378).Connection;const writeEncoded=__webpack_require__(4639).writeEncoded;const some=__webpack_require__(2402);function selectHandler(rawConn,handlersMap,log){const cb=err=>{log.error(err);};const stream=handshake({timeout:60*1000},cb);const shake=stream.handshake;next();return stream;function next(){lp.decodeFromReader(shake,(err,data)=>{if(err){return cb(err);}log('received:',data.toString());const protocol=data.toString().slice(0,-1);matcher(protocol,handlersMap,(err,result)=>{if(err){return cb(err);}const key=result;if(key){log('send ack back of: '+protocol);writeEncoded(shake,data,cb);const conn=new Connection(shake.rest(),rawConn);handlersMap[key].handlerFunc(protocol,conn);}else{log('not supported protocol: '+protocol);writeEncoded(shake,Buffer.from('na\n'));next();}});});}}function matcher(protocol,handlers,callback){const supportedProtocols=Object.keys(handlers);let supportedProtocol=false;some(supportedProtocols,(sp,cb)=>{handlers[sp].matchFunc(sp,protocol,(err,result)=>{if(err){return cb(err);}if(result){supportedProtocol=sp;}cb();});},err=>{if(err){return callback(err);}callback(null,supportedProtocol);});}module.exports=selectHandler;},8316:function(module,__unusedexports,__webpack_require__){"use strict";var Buffer=__webpack_require__(7572).Buffer;var Transform=__webpack_require__(6886).Transform;var inherits=__webpack_require__(92);module.exports=function(KeccakState){function Shake(rate,capacity,delimitedSuffix,options){Transform.call(this,options);this._rate=rate;this._capacity=capacity;this._delimitedSuffix=delimitedSuffix;this._options=options;this._state=new KeccakState();this._state.initialize(rate,capacity);this._finalized=false;}inherits(Shake,Transform);Shake.prototype._transform=function(chunk,encoding,callback){var error=null;try{this.update(chunk,encoding);}catch(err){error=err;}callback(error);};Shake.prototype._flush=function(){};Shake.prototype._read=function(size){this.push(this.squeeze(size));};Shake.prototype.update=function(data,encoding){if(!Buffer.isBuffer(data)&&typeof data!=='string')throw new TypeError('Data must be a string or a buffer');if(this._finalized)throw new Error('Squeeze already called');if(!Buffer.isBuffer(data))data=Buffer.from(data,encoding);this._state.absorb(data);return this;};Shake.prototype.squeeze=function(dataByteLength,encoding){if(!this._finalized){this._finalized=true;this._state.absorbLastFewBits(this._delimitedSuffix);}var data=this._state.squeeze(dataByteLength);if(encoding!==undefined)data=data.toString(encoding);return data;};Shake.prototype._resetState=function(){this._state.initialize(this._rate,this._capacity);return this;};Shake.prototype._clone=function(){var clone=new Shake(this._rate,this._capacity,this._delimitedSuffix,this._options);this._state.copy(clone._state);clone._finalized=this._finalized;return clone;};return Shake;};},8322:function(module,__unusedexports,__webpack_require__){"use strict";var _=__webpack_require__(6064);var Address=__webpack_require__(6593);var Base58Check=__webpack_require__(7341);var BN=__webpack_require__(6122);var JSUtil=__webpack_require__(8416);var Networks=__webpack_require__(8368);var Point=__webpack_require__(9933);var PublicKey=__webpack_require__(4721);var Random=__webpack_require__(3215);var $=__webpack_require__(5107);function PrivateKey(data,network){if(!(this instanceof PrivateKey)){return new PrivateKey(data,network);}if(data instanceof PrivateKey){return data;}var info=this._classifyArguments(data,network);if(!info.bn||info.bn.cmp(new BN(0))===0){throw new TypeError('Number can not be equal to zero, undefined, null or false');}if(!info.bn.lt(Point.getN())){throw new TypeError('Number must be less than N');}if(typeof info.network==='undefined'){throw new TypeError('Must specify the network ("livenet" or "testnet")');}JSUtil.defineImmutable(this,{bn:info.bn,compressed:info.compressed,network:info.network});Object.defineProperty(this,'publicKey',{configurable:false,enumerable:true,get:this.toPublicKey.bind(this)});return this;};PrivateKey.prototype._classifyArguments=function(data,network){var info={compressed:true,network:network?Networks.get(network):Networks.defaultNetwork};if(_.isUndefined(data)||_.isNull(data)){info.bn=PrivateKey._getRandomBN();}else if(data instanceof BN){info.bn=data;}else if(data instanceof Buffer||data instanceof Uint8Array){info=PrivateKey._transformBuffer(data,network);}else if(data.bn&&data.network){info=PrivateKey._transformObject(data);}else if(!network&&Networks.get(data)){info.bn=PrivateKey._getRandomBN();info.network=Networks.get(data);}else if(typeof data==='string'){if(JSUtil.isHexa(data)){info.bn=new BN(new Buffer(data,'hex'));}else{info=PrivateKey._transformWIF(data,network);}}else{throw new TypeError('First argument is an unrecognized data type.');}return info;};PrivateKey._getRandomBN=function(){var condition;var bn;do{var privbuf=Random.getRandomBuffer(32);bn=BN.fromBuffer(privbuf);condition=bn.lt(Point.getN());}while(!condition);return bn;};PrivateKey._transformBuffer=function(buf,network){var info={};if(buf.length===32){return PrivateKey._transformBNBuffer(buf,network);}info.network=Networks.get(buf[0],'privatekey');if(!info.network){throw new Error('Invalid network');}if(network&&info.network!==Networks.get(network)){throw new TypeError('Private key network mismatch');}if(buf.length===1+32+1&&buf[1+32+1-1]===1){info.compressed=true;}else if(buf.length===1+32){info.compressed=false;}else{throw new Error('Length of buffer must be 33 (uncompressed) or 34 (compressed)');}info.bn=BN.fromBuffer(buf.slice(1,32+1));return info;};PrivateKey._transformBNBuffer=function(buf,network){var info={};info.network=Networks.get(network)||Networks.defaultNetwork;info.bn=BN.fromBuffer(buf);info.compressed=false;return info;};PrivateKey._transformWIF=function(str,network){return PrivateKey._transformBuffer(Base58Check.decode(str),network);};PrivateKey.fromBuffer=function(arg,network){return new PrivateKey(arg,network);};PrivateKey._transformObject=function(json){var bn=new BN(json.bn,'hex');var network=Networks.get(json.network);return{bn:bn,network:network,compressed:json.compressed};};PrivateKey.fromString=PrivateKey.fromWIF=function(str){$.checkArgument(_.isString(str),'First argument is expected to be a string.');return new PrivateKey(str);};PrivateKey.fromObject=function(obj){$.checkArgument(_.isObject(obj),'First argument is expected to be an object.');return new PrivateKey(obj);};PrivateKey.fromRandom=function(network){var bn=PrivateKey._getRandomBN();return new PrivateKey(bn,network);};PrivateKey.getValidationError=function(data,network){var error;try{new PrivateKey(data,network);}catch(e){error=e;}return error;};PrivateKey.isValid=function(data,network){if(!data){return false;}return!PrivateKey.getValidationError(data,network);};PrivateKey.prototype.toString=function(){return this.toBuffer().toString('hex');};PrivateKey.prototype.toWIF=function(){var network=this.network;var compressed=this.compressed;var buf;if(compressed){buf=Buffer.concat([new Buffer([network.privatekey]),this.bn.toBuffer({size:32}),new Buffer([0x01])]);}else{buf=Buffer.concat([new Buffer([network.privatekey]),this.bn.toBuffer({size:32})]);}return Base58Check.encode(buf);};PrivateKey.prototype.toBigNumber=function(){return this.bn;};PrivateKey.prototype.toBuffer=function(){return this.bn.toBuffer();};PrivateKey.prototype.toPublicKey=function(){if(!this._pubkey){this._pubkey=PublicKey.fromPrivateKey(this);}return this._pubkey;};PrivateKey.prototype.toAddress=function(network){var pubkey=this.toPublicKey();return Address.fromPublicKey(pubkey,network||this.network);};PrivateKey.prototype.toObject=PrivateKey.prototype.toJSON=function toObject(){return{bn:this.bn.toString('hex'),compressed:this.compressed,network:this.network.toString()};};PrivateKey.prototype.inspect=function(){var uncompressed=!this.compressed?', uncompressed':'';return'<PrivateKey: '+this.toString()+', network: '+this.network+uncompressed+'>';};module.exports=PrivateKey;},8324:function(__unusedmodule,exports,__webpack_require__){exports.AbstractLevelDOWN=__webpack_require__(6689);exports.AbstractIterator=__webpack_require__(5887);exports.AbstractChainedBatch=__webpack_require__(3232);},8326:function(module,__unusedexports,__webpack_require__){var root=__webpack_require__(9274);var Symbol=root.Symbol;module.exports=Symbol;},8342:function(module,__unusedexports,__webpack_require__){"use strict";var reduce=__webpack_require__(4598);module.exports=function collect(cb){return reduce(function(arr,item){arr.push(item);return arr;},[],cb);};},8343:function(module,__unusedexports,__webpack_require__){"use strict";var _=__webpack_require__(6064);var inherits=__webpack_require__(2915);var Transaction=__webpack_require__(7593);var Input=__webpack_require__(6047);var Output=__webpack_require__(1143);var $=__webpack_require__(5107);var Script=__webpack_require__(5355);var Signature=__webpack_require__(406);var Sighash=__webpack_require__(9845);var PublicKey=__webpack_require__(4721);var BufferUtil=__webpack_require__(9657);var TransactionSignature=__webpack_require__(6877);function MultiSigInput(input,pubkeys,threshold,signatures){Input.apply(this,arguments);var self=this;pubkeys=pubkeys||input.publicKeys;threshold=threshold||input.threshold;signatures=signatures||input.signatures;this.publicKeys=_.sortBy(pubkeys,function(publicKey){return publicKey.toString('hex');});$.checkState(Script.buildMultisigOut(this.publicKeys,threshold).equals(this.output.script),'Provided public keys don\'t match to the provided output script');this.publicKeyIndex={};_.each(this.publicKeys,function(publicKey,index){self.publicKeyIndex[publicKey.toString()]=index;});this.threshold=threshold;this.signatures=signatures?this._deserializeSignatures(signatures):new Array(this.publicKeys.length);}inherits(MultiSigInput,Input);MultiSigInput.prototype.toObject=function(){var obj=Input.prototype.toObject.apply(this,arguments);obj.threshold=this.threshold;obj.publicKeys=_.map(this.publicKeys,function(publicKey){return publicKey.toString();});obj.signatures=this._serializeSignatures();return obj;};MultiSigInput.prototype._deserializeSignatures=function(signatures){return _.map(signatures,function(signature){if(!signature){return undefined;}return new TransactionSignature(signature);});};MultiSigInput.prototype._serializeSignatures=function(){return _.map(this.signatures,function(signature){if(!signature){return undefined;}return signature.toObject();});};MultiSigInput.prototype.getSignatures=function(transaction,privateKey,index,sigtype){$.checkState(this.output instanceof Output);sigtype=sigtype||Signature.SIGHASH_ALL;var self=this;var results=[];_.each(this.publicKeys,function(publicKey){if(publicKey.toString()===privateKey.publicKey.toString()){results.push(new TransactionSignature({publicKey:privateKey.publicKey,prevTxId:self.prevTxId,outputIndex:self.outputIndex,inputIndex:index,signature:Sighash.sign(transaction,privateKey,sigtype,index,self.output.script),sigtype:sigtype}));}});return results;};MultiSigInput.prototype.addSignature=function(transaction,signature){$.checkState(!this.isFullySigned(),'All needed signatures have already been added');$.checkArgument(!_.isUndefined(this.publicKeyIndex[signature.publicKey.toString()]),'Signature has no matching public key');$.checkState(this.isValidSignature(transaction,signature));this.signatures[this.publicKeyIndex[signature.publicKey.toString()]]=signature;this._updateScript();return this;};MultiSigInput.prototype._updateScript=function(){this.setScript(Script.buildMultisigIn(this.publicKeys,this.threshold,this._createSignatures()));return this;};MultiSigInput.prototype._createSignatures=function(){return _.map(_.filter(this.signatures,function(signature){return!_.isUndefined(signature);}),function(signature){return BufferUtil.concat([signature.signature.toDER(),BufferUtil.integerAsSingleByteBuffer(signature.sigtype)]);});};MultiSigInput.prototype.clearSignatures=function(){this.signatures=new Array(this.publicKeys.length);this._updateScript();};MultiSigInput.prototype.isFullySigned=function(){return this.countSignatures()===this.threshold;};MultiSigInput.prototype.countMissingSignatures=function(){return this.threshold-this.countSignatures();};MultiSigInput.prototype.countSignatures=function(){return _.reduce(this.signatures,function(sum,signature){return sum+!!signature;},0);};MultiSigInput.prototype.publicKeysWithoutSignature=function(){var self=this;return _.filter(this.publicKeys,function(publicKey){return!self.signatures[self.publicKeyIndex[publicKey.toString()]];});};MultiSigInput.prototype.isValidSignature=function(transaction,signature){signature.signature.nhashtype=signature.sigtype;return Sighash.verify(transaction,signature.signature,signature.publicKey,signature.inputIndex,this.output.script);};MultiSigInput.normalizeSignatures=function(transaction,input,inputIndex,signatures,publicKeys){return publicKeys.map(function(pubKey){var signatureMatch=null;signatures=signatures.filter(function(signatureBuffer){if(signatureMatch){return true;}var signature=new TransactionSignature({signature:Signature.fromTxFormat(signatureBuffer),publicKey:pubKey,prevTxId:input.prevTxId,outputIndex:input.outputIndex,inputIndex:inputIndex,sigtype:Signature.SIGHASH_ALL});signature.signature.nhashtype=signature.sigtype;var isMatch=Sighash.verify(transaction,signature.signature,signature.publicKey,signature.inputIndex,input.output.script);if(isMatch){signatureMatch=signature;return false;}return true;});return signatureMatch?signatureMatch:null;});};MultiSigInput.OPCODES_SIZE=1;MultiSigInput.SIGNATURE_SIZE=73;MultiSigInput.prototype._estimateSize=function(){return MultiSigInput.OPCODES_SIZE+this.threshold*MultiSigInput.SIGNATURE_SIZE;};module.exports=MultiSigInput;},8348:function(module,__unusedexports,__webpack_require__){const bscript=__webpack_require__(5099);function isCompressedCanonicalPubKey(pubKey){return bscript.isCanonicalPubKey(pubKey)&&pubKey.length===33;}function check(script){const chunks=bscript.decompile(script);return chunks.length===2&&bscript.isCanonicalScriptSignature(chunks[0])&&isCompressedCanonicalPubKey(chunks[1]);}check.toJSON=function(){return'witnessPubKeyHash input';};module.exports={check};},8356:function(module,__unusedexports,__webpack_require__){"use strict";const baseTable=__webpack_require__(322);const varintBufferEncode=__webpack_require__(7120).varintBufferEncode;const varintTable={};module.exports=varintTable;for(let encodingName in baseTable){let code=baseTable[encodingName];varintTable[encodingName]=varintBufferEncode(code);}},8359:function(module,__unusedexports,__webpack_require__){module.exports=__webpack_require__(8748);},8364:function(module,__unusedexports,__webpack_require__){"use strict";const dagNodeUtil=__webpack_require__(974);const cloneLinks=dagNodeUtil.cloneLinks;const cloneData=dagNodeUtil.cloneData;const create=__webpack_require__(3426);const CID=__webpack_require__(9339);function rmLink(dagNode,nameOrCid,callback){const data=cloneData(dagNode);let links=cloneLinks(dagNode);if(typeof nameOrCid==='string'){links=links.filter(link=>link.name!==nameOrCid);}else if(Buffer.isBuffer(nameOrCid)||CID.isCID(nameOrCid)){links=links.filter(link=>!link.cid.equals(nameOrCid));}else{return callback(new Error('second arg needs to be a name or CID'),null);}create(data,links,callback);}module.exports=rmLink;},8368:function(module,__unusedexports,__webpack_require__){"use strict";var _=__webpack_require__(6064);var BufferUtil=__webpack_require__(9657);var JSUtil=__webpack_require__(8416);var networks=[];var networkMaps={};function Network(){}Network.prototype.toString=function toString(){return this.name;};function get(arg,keys){if(~networks.indexOf(arg)){return arg;}if(keys){if(!_.isArray(keys)){keys=[keys];}var containsArg=function(key){return networks[index][key]===arg;};for(var index in networks){if(_.any(keys,containsArg)){return networks[index];}}return undefined;}return networkMaps[arg];}function addNetwork(data){var network=new Network();JSUtil.defineImmutable(network,{name:data.name,alias:data.alias,pubkeyhash:data.pubkeyhash,privatekey:data.privatekey,scripthash:data.scripthash,xpubkey:data.xpubkey,xprivkey:data.xprivkey,zaddr:data.zaddr,zkey:data.zkey});if(data.networkMagic){JSUtil.defineImmutable(network,{networkMagic:BufferUtil.integerAsBuffer(data.networkMagic)});}if(data.port){JSUtil.defineImmutable(network,{port:data.port});}if(data.dnsSeeds){JSUtil.defineImmutable(network,{dnsSeeds:data.dnsSeeds});}_.each(network,function(value){if(!_.isUndefined(value)&&!_.isObject(value)){networkMaps[value]=network;}});networks.push(network);return network;}function removeNetwork(network){for(var i=0;i<networks.length;i++){if(networks[i]===network){networks.splice(i,1);}}for(var key in networkMaps){if(networkMaps[key]===network){delete networkMaps[key];}}}addNetwork({name:'livenet',alias:'mainnet',pubkeyhash:0x1cb8,privatekey:0x80,scripthash:0x1cbd,xpubkey:0x0488b21e,xprivkey:0x0488ade4,zaddr:0x169a,zkey:0xab36,networkMagic:0xf91bacab,port:8233,dnsSeeds:[]});var livenet=get('livenet');addNetwork({name:'testnet',alias:'regtest',pubkeyhash:0x1d25,privatekey:0xef,scripthash:0x1cba,xpubkey:0x043587cf,xprivkey:0x04358394,zaddr:0x16b6,zkey:0xac08});var testnet=get('testnet');var TESTNET={PORT:18233,NETWORK_MAGIC:BufferUtil.integerAsBuffer(0xf99f24b6),DNS_SEEDS:['dnsseed.testnet.z.cash']};for(var key in TESTNET){if(!_.isObject(TESTNET[key])){networkMaps[TESTNET[key]]=testnet;}}var REGTEST={PORT:18444,NETWORK_MAGIC:BufferUtil.integerAsBuffer(0xaae83f5f),DNS_SEEDS:[]};for(var key in REGTEST){if(!_.isObject(REGTEST[key])){networkMaps[REGTEST[key]]=testnet;}}Object.defineProperty(testnet,'port',{enumerable:true,configurable:false,get:function(){if(this.regtestEnabled){return REGTEST.PORT;}else{return TESTNET.PORT;}}});Object.defineProperty(testnet,'networkMagic',{enumerable:true,configurable:false,get:function(){if(this.regtestEnabled){return REGTEST.NETWORK_MAGIC;}else{return TESTNET.NETWORK_MAGIC;}}});Object.defineProperty(testnet,'dnsSeeds',{enumerable:true,configurable:false,get:function(){if(this.regtestEnabled){return REGTEST.DNS_SEEDS;}else{return TESTNET.DNS_SEEDS;}}});function enableRegtest(){testnet.regtestEnabled=true;}function disableRegtest(){testnet.regtestEnabled=false;}module.exports={add:addNetwork,remove:removeNetwork,defaultNetwork:livenet,livenet:livenet,mainnet:livenet,testnet:testnet,get:get,enableRegtest:enableRegtest,disableRegtest:disableRegtest};},8387:function(module){"use strict";module.exports={Spec:{type:'mount',mounts:[{mountpoint:'/blocks',type:'measure',prefix:'flatfs.datastore',child:{type:'flatfs',path:'blocks',sync:true,shardFunc:'/repo/flatfs/shard/v1/next-to-last/2'}},{mountpoint:'/',type:'measure',prefix:'leveldb.datastore',child:{type:'levelds',path:'datastore',compression:'none'}}]}};},8389:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=reduceRight;var _reduce=__webpack_require__(727);var _reduce2=_interopRequireDefault(_reduce);var _slice=__webpack_require__(3404);var _slice2=_interopRequireDefault(_slice);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function reduceRight(array,memo,iteratee,callback){var reversed=(0,_slice2.default)(array).reverse();(0,_reduce2.default)(reversed,memo,iteratee,callback);}module.exports=exports['default'];},8393:function(module,__unusedexports,__webpack_require__){"use strict";const CID=__webpack_require__(9339);const pull=__webpack_require__(418);const values=__webpack_require__(5130);const error=__webpack_require__(5619);module.exports=(cid,node,name,path,pathRest,resolve,size,dag,parent,depth)=>{let newNode;if(pathRest.length){const pathElem=pathRest[0];newNode=node[pathElem];const newName=path+'/'+pathElem;if(!newNode){return error(new Error(`not found`));}const isCID=CID.isCID(newNode);return pull(values([{depth:depth,name:pathElem,path:newName,pathRest:pathRest.slice(1),multihash:isCID&&newNode,object:!isCID&&newNode,parent:parent}]),resolve);}else{return error(new Error('invalid node type'));}};},8395:function(module){module.exports={"name":"dao","comment":"DAO rescue hardfork","eip":{"url":"https://eips.ethereum.org/EIPS/eip-779","status":"Final"},"gasConfig":{},"gasPrices":{},"vm":{},"pow":{},"casper":{},"sharding":{}};},8409:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=_asyncMap;var _noop=__webpack_require__(5811);var _noop2=_interopRequireDefault(_noop);var _wrapAsync=__webpack_require__(9396);var _wrapAsync2=_interopRequireDefault(_wrapAsync);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _asyncMap(eachfn,arr,iteratee,callback){callback=callback||_noop2.default;arr=arr||[];var results=[];var counter=0;var _iteratee=(0,_wrapAsync2.default)(iteratee);eachfn(arr,function(value,_,callback){var index=counter++;_iteratee(value,function(err,v){results[index]=v;callback(err);});},function(err){callback(err,results);});}module.exports=exports['default'];},8411:function(module,__unusedexports,__webpack_require__){"use strict";const ip=__webpack_require__(9834);const ipAddress=__webpack_require__(7293);const protocols=__webpack_require__(7948);const bs58=__webpack_require__(4967);const varint=__webpack_require__(2572);module.exports=Convert;function Convert(proto,a){if(a instanceof Buffer){return Convert.toString(proto,a);}else{return Convert.toBuffer(proto,a);}}Convert.toString=function convertToString(proto,buf){proto=protocols(proto);switch(proto.code){case 4:case 41:return ip.toString(buf);case 6:case 17:case 33:case 132:return buf2port(buf);case 54:case 55:case 56:return buf2str(buf);case 421:return buf2mh(buf);default:return buf.toString('hex');}};Convert.toBuffer=function convertToBuffer(proto,str){proto=protocols(proto);switch(proto.code){case 4:return ip2buf(new ipAddress.Address4(str));case 41:return ip2buf(new ipAddress.Address6(str));case 6:case 17:case 33:case 132:return port2buf(parseInt(str,10));case 54:case 55:case 56:return str2buf(str);case 421:return mh2buf(str);default:return Buffer.from(str,'hex');}};function ip2buf(ipaddr){if(!ipaddr.isValid())throw new Error('invalid ip address');return ip.toBuffer(ipaddr.address);}function port2buf(port){const buf=Buffer.alloc(2);buf.writeUInt16BE(port,0);return buf;}function buf2port(buf){return buf.readUInt16BE(0);}function str2buf(str){const buf=Buffer.from(str);const size=Buffer.from(varint.encode(buf.length));return Buffer.concat([size,buf]);}function buf2str(buf){const size=varint.decode(buf);buf=buf.slice(varint.decode.bytes);if(buf.length!==size){throw new Error('inconsistent lengths');}return buf.toString();}function mh2buf(hash){const mh=Buffer.from(bs58.decode(hash));const size=Buffer.from(varint.encode(mh.length));return Buffer.concat([size,mh]);}function buf2mh(buf){const size=varint.decode(buf);const address=buf.slice(varint.decode.bytes);if(address.length!==size){throw new Error('inconsistent lengths');}return bs58.encode(address);}},8416:function(module,__unusedexports,__webpack_require__){"use strict";var _=__webpack_require__(6064);var isHexa=function isHexa(value){if(!_.isString(value)){return false;}return /^[0-9a-fA-F]+$/.test(value);};module.exports={isValidJSON:function isValidJSON(arg){var parsed;if(!_.isString(arg)){return false;}try{parsed=JSON.parse(arg);}catch(e){return false;}if(typeof parsed==='object'){return true;}return false;},isHexa:isHexa,isHexaString:isHexa,cloneArray:function(array){return[].concat(array);},defineImmutable:function defineImmutable(target,values){Object.keys(values).forEach(function(key){Object.defineProperty(target,key,{configurable:false,enumerable:true,value:values[key]});});return target;},isNaturalNumber:function isNaturalNumber(value){return typeof value==='number'&&isFinite(value)&&Math.floor(value)===value&&value>=0;}};},8422:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=reject;var _filter=__webpack_require__(7256);var _filter2=_interopRequireDefault(_filter);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function reject(eachfn,arr,iteratee,callback){(0,_filter2.default)(eachfn,arr,function(value,cb){iteratee(value,function(err,v){cb(err,!v);});},callback);}module.exports=exports['default'];},8434:function(module,__unusedexports,__webpack_require__){var forge=__webpack_require__(7938);__webpack_require__(1214);forge.cipher=forge.cipher||{};var modes=module.exports=forge.cipher.modes=forge.cipher.modes||{};modes.ecb=function(options){options=options||{};this.name='ECB';this.cipher=options.cipher;this.blockSize=options.blockSize||16;this._ints=this.blockSize/4;this._inBlock=new Array(this._ints);this._outBlock=new Array(this._ints);};modes.ecb.prototype.start=function(options){};modes.ecb.prototype.encrypt=function(input,output,finish){if(input.length()<this.blockSize&&!(finish&&input.length()>0)){return true;}for(var i=0;i<this._ints;++i){this._inBlock[i]=input.getInt32();}this.cipher.encrypt(this._inBlock,this._outBlock);for(var i=0;i<this._ints;++i){output.putInt32(this._outBlock[i]);}};modes.ecb.prototype.decrypt=function(input,output,finish){if(input.length()<this.blockSize&&!(finish&&input.length()>0)){return true;}for(var i=0;i<this._ints;++i){this._inBlock[i]=input.getInt32();}this.cipher.decrypt(this._inBlock,this._outBlock);for(var i=0;i<this._ints;++i){output.putInt32(this._outBlock[i]);}};modes.ecb.prototype.pad=function(input,options){var padding=input.length()===this.blockSize?this.blockSize:this.blockSize-input.length();input.fillWithByte(padding,padding);return true;};modes.ecb.prototype.unpad=function(output,options){if(options.overflow>0){return false;}var len=output.length();var count=output.at(len-1);if(count>this.blockSize<<2){return false;}output.truncate(count);return true;};modes.cbc=function(options){options=options||{};this.name='CBC';this.cipher=options.cipher;this.blockSize=options.blockSize||16;this._ints=this.blockSize/4;this._inBlock=new Array(this._ints);this._outBlock=new Array(this._ints);};modes.cbc.prototype.start=function(options){if(options.iv===null){if(!this._prev){throw new Error('Invalid IV parameter.');}this._iv=this._prev.slice(0);}else if(!('iv'in options)){throw new Error('Invalid IV parameter.');}else{this._iv=transformIV(options.iv);this._prev=this._iv.slice(0);}};modes.cbc.prototype.encrypt=function(input,output,finish){if(input.length()<this.blockSize&&!(finish&&input.length()>0)){return true;}for(var i=0;i<this._ints;++i){this._inBlock[i]=this._prev[i]^input.getInt32();}this.cipher.encrypt(this._inBlock,this._outBlock);for(var i=0;i<this._ints;++i){output.putInt32(this._outBlock[i]);}this._prev=this._outBlock;};modes.cbc.prototype.decrypt=function(input,output,finish){if(input.length()<this.blockSize&&!(finish&&input.length()>0)){return true;}for(var i=0;i<this._ints;++i){this._inBlock[i]=input.getInt32();}this.cipher.decrypt(this._inBlock,this._outBlock);for(var i=0;i<this._ints;++i){output.putInt32(this._prev[i]^this._outBlock[i]);}this._prev=this._inBlock.slice(0);};modes.cbc.prototype.pad=function(input,options){var padding=input.length()===this.blockSize?this.blockSize:this.blockSize-input.length();input.fillWithByte(padding,padding);return true;};modes.cbc.prototype.unpad=function(output,options){if(options.overflow>0){return false;}var len=output.length();var count=output.at(len-1);if(count>this.blockSize<<2){return false;}output.truncate(count);return true;};modes.cfb=function(options){options=options||{};this.name='CFB';this.cipher=options.cipher;this.blockSize=options.blockSize||16;this._ints=this.blockSize/4;this._inBlock=null;this._outBlock=new Array(this._ints);this._partialBlock=new Array(this._ints);this._partialOutput=forge.util.createBuffer();this._partialBytes=0;};modes.cfb.prototype.start=function(options){if(!('iv'in options)){throw new Error('Invalid IV parameter.');}this._iv=transformIV(options.iv);this._inBlock=this._iv.slice(0);this._partialBytes=0;};modes.cfb.prototype.encrypt=function(input,output,finish){var inputLength=input.length();if(inputLength===0){return true;}this.cipher.encrypt(this._inBlock,this._outBlock);if(this._partialBytes===0&&inputLength>=this.blockSize){for(var i=0;i<this._ints;++i){this._inBlock[i]=input.getInt32()^this._outBlock[i];output.putInt32(this._inBlock[i]);}return;}var partialBytes=(this.blockSize-inputLength)%this.blockSize;if(partialBytes>0){partialBytes=this.blockSize-partialBytes;}this._partialOutput.clear();for(var i=0;i<this._ints;++i){this._partialBlock[i]=input.getInt32()^this._outBlock[i];this._partialOutput.putInt32(this._partialBlock[i]);}if(partialBytes>0){input.read-=this.blockSize;}else{for(var i=0;i<this._ints;++i){this._inBlock[i]=this._partialBlock[i];}}if(this._partialBytes>0){this._partialOutput.getBytes(this._partialBytes);}if(partialBytes>0&&!finish){output.putBytes(this._partialOutput.getBytes(partialBytes-this._partialBytes));this._partialBytes=partialBytes;return true;}output.putBytes(this._partialOutput.getBytes(inputLength-this._partialBytes));this._partialBytes=0;};modes.cfb.prototype.decrypt=function(input,output,finish){var inputLength=input.length();if(inputLength===0){return true;}this.cipher.encrypt(this._inBlock,this._outBlock);if(this._partialBytes===0&&inputLength>=this.blockSize){for(var i=0;i<this._ints;++i){this._inBlock[i]=input.getInt32();output.putInt32(this._inBlock[i]^this._outBlock[i]);}return;}var partialBytes=(this.blockSize-inputLength)%this.blockSize;if(partialBytes>0){partialBytes=this.blockSize-partialBytes;}this._partialOutput.clear();for(var i=0;i<this._ints;++i){this._partialBlock[i]=input.getInt32();this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);}if(partialBytes>0){input.read-=this.blockSize;}else{for(var i=0;i<this._ints;++i){this._inBlock[i]=this._partialBlock[i];}}if(this._partialBytes>0){this._partialOutput.getBytes(this._partialBytes);}if(partialBytes>0&&!finish){output.putBytes(this._partialOutput.getBytes(partialBytes-this._partialBytes));this._partialBytes=partialBytes;return true;}output.putBytes(this._partialOutput.getBytes(inputLength-this._partialBytes));this._partialBytes=0;};modes.ofb=function(options){options=options||{};this.name='OFB';this.cipher=options.cipher;this.blockSize=options.blockSize||16;this._ints=this.blockSize/4;this._inBlock=null;this._outBlock=new Array(this._ints);this._partialOutput=forge.util.createBuffer();this._partialBytes=0;};modes.ofb.prototype.start=function(options){if(!('iv'in options)){throw new Error('Invalid IV parameter.');}this._iv=transformIV(options.iv);this._inBlock=this._iv.slice(0);this._partialBytes=0;};modes.ofb.prototype.encrypt=function(input,output,finish){var inputLength=input.length();if(input.length()===0){return true;}this.cipher.encrypt(this._inBlock,this._outBlock);if(this._partialBytes===0&&inputLength>=this.blockSize){for(var i=0;i<this._ints;++i){output.putInt32(input.getInt32()^this._outBlock[i]);this._inBlock[i]=this._outBlock[i];}return;}var partialBytes=(this.blockSize-inputLength)%this.blockSize;if(partialBytes>0){partialBytes=this.blockSize-partialBytes;}this._partialOutput.clear();for(var i=0;i<this._ints;++i){this._partialOutput.putInt32(input.getInt32()^this._outBlock[i]);}if(partialBytes>0){input.read-=this.blockSize;}else{for(var i=0;i<this._ints;++i){this._inBlock[i]=this._outBlock[i];}}if(this._partialBytes>0){this._partialOutput.getBytes(this._partialBytes);}if(partialBytes>0&&!finish){output.putBytes(this._partialOutput.getBytes(partialBytes-this._partialBytes));this._partialBytes=partialBytes;return true;}output.putBytes(this._partialOutput.getBytes(inputLength-this._partialBytes));this._partialBytes=0;};modes.ofb.prototype.decrypt=modes.ofb.prototype.encrypt;modes.ctr=function(options){options=options||{};this.name='CTR';this.cipher=options.cipher;this.blockSize=options.blockSize||16;this._ints=this.blockSize/4;this._inBlock=null;this._outBlock=new Array(this._ints);this._partialOutput=forge.util.createBuffer();this._partialBytes=0;};modes.ctr.prototype.start=function(options){if(!('iv'in options)){throw new Error('Invalid IV parameter.');}this._iv=transformIV(options.iv);this._inBlock=this._iv.slice(0);this._partialBytes=0;};modes.ctr.prototype.encrypt=function(input,output,finish){var inputLength=input.length();if(inputLength===0){return true;}this.cipher.encrypt(this._inBlock,this._outBlock);if(this._partialBytes===0&&inputLength>=this.blockSize){for(var i=0;i<this._ints;++i){output.putInt32(input.getInt32()^this._outBlock[i]);}}else{var partialBytes=(this.blockSize-inputLength)%this.blockSize;if(partialBytes>0){partialBytes=this.blockSize-partialBytes;}this._partialOutput.clear();for(var i=0;i<this._ints;++i){this._partialOutput.putInt32(input.getInt32()^this._outBlock[i]);}if(partialBytes>0){input.read-=this.blockSize;}if(this._partialBytes>0){this._partialOutput.getBytes(this._partialBytes);}if(partialBytes>0&&!finish){output.putBytes(this._partialOutput.getBytes(partialBytes-this._partialBytes));this._partialBytes=partialBytes;return true;}output.putBytes(this._partialOutput.getBytes(inputLength-this._partialBytes));this._partialBytes=0;}inc32(this._inBlock);};modes.ctr.prototype.decrypt=modes.ctr.prototype.encrypt;modes.gcm=function(options){options=options||{};this.name='GCM';this.cipher=options.cipher;this.blockSize=options.blockSize||16;this._ints=this.blockSize/4;this._inBlock=new Array(this._ints);this._outBlock=new Array(this._ints);this._partialOutput=forge.util.createBuffer();this._partialBytes=0;this._R=0xE1000000;};modes.gcm.prototype.start=function(options){if(!('iv'in options)){throw new Error('Invalid IV parameter.');}var iv=forge.util.createBuffer(options.iv);this._cipherLength=0;var additionalData;if('additionalData'in options){additionalData=forge.util.createBuffer(options.additionalData);}else{additionalData=forge.util.createBuffer();}if('tagLength'in options){this._tagLength=options.tagLength;}else{this._tagLength=128;}this._tag=null;if(options.decrypt){this._tag=forge.util.createBuffer(options.tag).getBytes();if(this._tag.length!==this._tagLength/8){throw new Error('Authentication tag does not match tag length.');}}this._hashBlock=new Array(this._ints);this.tag=null;this._hashSubkey=new Array(this._ints);this.cipher.encrypt([0,0,0,0],this._hashSubkey);this.componentBits=4;this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var ivLength=iv.length();if(ivLength===12){this._j0=[iv.getInt32(),iv.getInt32(),iv.getInt32(),1];}else{this._j0=[0,0,0,0];while(iv.length()>0){this._j0=this.ghash(this._hashSubkey,this._j0,[iv.getInt32(),iv.getInt32(),iv.getInt32(),iv.getInt32()]);}this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(from64To32(ivLength*8)));}this._inBlock=this._j0.slice(0);inc32(this._inBlock);this._partialBytes=0;additionalData=forge.util.createBuffer(additionalData);this._aDataLength=from64To32(additionalData.length()*8);var overflow=additionalData.length()%this.blockSize;if(overflow){additionalData.fillWithByte(0,this.blockSize-overflow);}this._s=[0,0,0,0];while(additionalData.length()>0){this._s=this.ghash(this._hashSubkey,this._s,[additionalData.getInt32(),additionalData.getInt32(),additionalData.getInt32(),additionalData.getInt32()]);}};modes.gcm.prototype.encrypt=function(input,output,finish){var inputLength=input.length();if(inputLength===0){return true;}this.cipher.encrypt(this._inBlock,this._outBlock);if(this._partialBytes===0&&inputLength>=this.blockSize){for(var i=0;i<this._ints;++i){output.putInt32(this._outBlock[i]^=input.getInt32());}this._cipherLength+=this.blockSize;}else{var partialBytes=(this.blockSize-inputLength)%this.blockSize;if(partialBytes>0){partialBytes=this.blockSize-partialBytes;}this._partialOutput.clear();for(var i=0;i<this._ints;++i){this._partialOutput.putInt32(input.getInt32()^this._outBlock[i]);}if(partialBytes===0||finish){if(finish){var overflow=inputLength%this.blockSize;this._cipherLength+=overflow;this._partialOutput.truncate(this.blockSize-overflow);}else{this._cipherLength+=this.blockSize;}for(var i=0;i<this._ints;++i){this._outBlock[i]=this._partialOutput.getInt32();}this._partialOutput.read-=this.blockSize;}if(this._partialBytes>0){this._partialOutput.getBytes(this._partialBytes);}if(partialBytes>0&&!finish){input.read-=this.blockSize;output.putBytes(this._partialOutput.getBytes(partialBytes-this._partialBytes));this._partialBytes=partialBytes;return true;}output.putBytes(this._partialOutput.getBytes(inputLength-this._partialBytes));this._partialBytes=0;}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock);inc32(this._inBlock);};modes.gcm.prototype.decrypt=function(input,output,finish){var inputLength=input.length();if(inputLength<this.blockSize&&!(finish&&inputLength>0)){return true;}this.cipher.encrypt(this._inBlock,this._outBlock);inc32(this._inBlock);this._hashBlock[0]=input.getInt32();this._hashBlock[1]=input.getInt32();this._hashBlock[2]=input.getInt32();this._hashBlock[3]=input.getInt32();this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var i=0;i<this._ints;++i){output.putInt32(this._outBlock[i]^this._hashBlock[i]);}if(inputLength<this.blockSize){this._cipherLength+=inputLength%this.blockSize;}else{this._cipherLength+=this.blockSize;}};modes.gcm.prototype.afterFinish=function(output,options){var rval=true;if(options.decrypt&&options.overflow){output.truncate(this.blockSize-options.overflow);}this.tag=forge.util.createBuffer();var lengths=this._aDataLength.concat(from64To32(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,lengths);var tag=[];this.cipher.encrypt(this._j0,tag);for(var i=0;i<this._ints;++i){this.tag.putInt32(this._s[i]^tag[i]);}this.tag.truncate(this.tag.length()%(this._tagLength/8));if(options.decrypt&&this.tag.bytes()!==this._tag){rval=false;}return rval;};modes.gcm.prototype.multiply=function(x,y){var z_i=[0,0,0,0];var v_i=y.slice(0);for(var i=0;i<128;++i){var x_i=x[i/32|0]&1<<31-i%32;if(x_i){z_i[0]^=v_i[0];z_i[1]^=v_i[1];z_i[2]^=v_i[2];z_i[3]^=v_i[3];}this.pow(v_i,v_i);}return z_i;};modes.gcm.prototype.pow=function(x,out){var lsb=x[3]&1;for(var i=3;i>0;--i){out[i]=x[i]>>>1|(x[i-1]&1)<<31;}out[0]=x[0]>>>1;if(lsb){out[0]^=this._R;}};modes.gcm.prototype.tableMultiply=function(x){var z=[0,0,0,0];for(var i=0;i<32;++i){var idx=i/8|0;var x_i=x[idx]>>>(7-i%8)*4&0xF;var ah=this._m[i][x_i];z[0]^=ah[0];z[1]^=ah[1];z[2]^=ah[2];z[3]^=ah[3];}return z;};modes.gcm.prototype.ghash=function(h,y,x){y[0]^=x[0];y[1]^=x[1];y[2]^=x[2];y[3]^=x[3];return this.tableMultiply(y);};modes.gcm.prototype.generateHashTable=function(h,bits){var multiplier=8/bits;var perInt=4*multiplier;var size=16*multiplier;var m=new Array(size);for(var i=0;i<size;++i){var tmp=[0,0,0,0];var idx=i/perInt|0;var shft=(perInt-1-i%perInt)*bits;tmp[idx]=1<<bits-1<<shft;m[i]=this.generateSubHashTable(this.multiply(tmp,h),bits);}return m;};modes.gcm.prototype.generateSubHashTable=function(mid,bits){var size=1<<bits;var half=size>>>1;var m=new Array(size);m[half]=mid.slice(0);var i=half>>>1;while(i>0){this.pow(m[2*i],m[i]=[]);i>>=1;}i=2;while(i<half){for(var j=1;j<i;++j){var m_i=m[i];var m_j=m[j];m[i+j]=[m_i[0]^m_j[0],m_i[1]^m_j[1],m_i[2]^m_j[2],m_i[3]^m_j[3]];}i*=2;}m[0]=[0,0,0,0];for(i=half+1;i<size;++i){var c=m[i^half];m[i]=[mid[0]^c[0],mid[1]^c[1],mid[2]^c[2],mid[3]^c[3]];}return m;};function transformIV(iv){if(typeof iv==='string'){iv=forge.util.createBuffer(iv);}if(forge.util.isArray(iv)&&iv.length>4){var tmp=iv;iv=forge.util.createBuffer();for(var i=0;i<tmp.length;++i){iv.putByte(tmp[i]);}}if(!forge.util.isArray(iv)){iv=[iv.getInt32(),iv.getInt32(),iv.getInt32(),iv.getInt32()];}return iv;}function inc32(block){block[block.length-1]=block[block.length-1]+1&0xFFFFFFFF;}function from64To32(num){return[num/0x100000000|0,num&0xFFFFFFFF];}},8435:function(module,__unusedexports,__webpack_require__){"use strict";module.exports={map:__webpack_require__(569),asyncMap:__webpack_require__(9720),filter:__webpack_require__(708),filterNot:__webpack_require__(5061),through:__webpack_require__(300),take:__webpack_require__(5878),unique:__webpack_require__(2929),nonUnique:__webpack_require__(6611),flatten:__webpack_require__(6549)};},8439:function(module,__unusedexports,__webpack_require__){"use strict";module.exports=Transform;var _require$codes=__webpack_require__(3368).codes,ERR_METHOD_NOT_IMPLEMENTED=_require$codes.ERR_METHOD_NOT_IMPLEMENTED,ERR_MULTIPLE_CALLBACK=_require$codes.ERR_MULTIPLE_CALLBACK,ERR_TRANSFORM_ALREADY_TRANSFORMING=_require$codes.ERR_TRANSFORM_ALREADY_TRANSFORMING,ERR_TRANSFORM_WITH_LENGTH_0=_require$codes.ERR_TRANSFORM_WITH_LENGTH_0;var Duplex=__webpack_require__(1686);__webpack_require__(92)(Transform,Duplex);function afterTransform(er,data){var ts=this._transformState;ts.transforming=false;var cb=ts.writecb;if(cb===null){return this.emit('error',new ERR_MULTIPLE_CALLBACK());}ts.writechunk=null;ts.writecb=null;if(data!=null)this.push(data);cb(er);var rs=this._readableState;rs.reading=false;if(rs.needReadable||rs.length<rs.highWaterMark){this._read(rs.highWaterMark);}}function Transform(options){if(!(this instanceof Transform))return new Transform(options);Duplex.call(this,options);this._transformState={afterTransform:afterTransform.bind(this),needTransform:false,transforming:false,writecb:null,writechunk:null,writeencoding:null};this._readableState.needReadable=true;this._readableState.sync=false;if(options){if(typeof options.transform==='function')this._transform=options.transform;if(typeof options.flush==='function')this._flush=options.flush;}this.on('prefinish',prefinish);}function prefinish(){var _this=this;if(typeof this._flush==='function'&&!this._readableState.destroyed){this._flush(function(er,data){done(_this,er,data);});}else{done(this,null,null);}}Transform.prototype.push=function(chunk,encoding){this._transformState.needTransform=false;return Duplex.prototype.push.call(this,chunk,encoding);};Transform.prototype._transform=function(chunk,encoding,cb){cb(new ERR_METHOD_NOT_IMPLEMENTED('_transform()'));};Transform.prototype._write=function(chunk,encoding,cb){var ts=this._transformState;ts.writecb=cb;ts.writechunk=chunk;ts.writeencoding=encoding;if(!ts.transforming){var rs=this._readableState;if(ts.needTransform||rs.needReadable||rs.length<rs.highWaterMark)this._read(rs.highWaterMark);}};Transform.prototype._read=function(n){var ts=this._transformState;if(ts.writechunk!==null&&!ts.transforming){ts.transforming=true;this._transform(ts.writechunk,ts.writeencoding,ts.afterTransform);}else{ts.needTransform=true;}};Transform.prototype._destroy=function(err,cb){Duplex.prototype._destroy.call(this,err,function(err2){cb(err2);});};function done(stream,er,data){if(er)return stream.emit('error',er);if(data!=null)stream.push(data);if(stream._writableState.length)throw new ERR_TRANSFORM_WITH_LENGTH_0();if(stream._transformState.transforming)throw new ERR_TRANSFORM_ALREADY_TRANSFORMING();return stream.push(null);}},8443:function(module,__unusedexports,__webpack_require__){"use strict";const os=__webpack_require__(4316);const hasFlag=__webpack_require__(4329);const env=process.env;let forceColor;if(hasFlag('no-color')||hasFlag('no-colors')||hasFlag('color=false')){forceColor=false;}else if(hasFlag('color')||hasFlag('colors')||hasFlag('color=true')||hasFlag('color=always')){forceColor=true;}if('FORCE_COLOR'in env){forceColor=env.FORCE_COLOR.length===0||parseInt(env.FORCE_COLOR,10)!==0;}function translateLevel(level){if(level===0){return false;}return{level,hasBasic:true,has256:level>=2,has16m:level>=3};}function supportsColor(stream){if(forceColor===false){return 0;}if(hasFlag('color=16m')||hasFlag('color=full')||hasFlag('color=truecolor')){return 3;}if(hasFlag('color=256')){return 2;}if(stream&&!stream.isTTY&&forceColor!==true){return 0;}const min=forceColor?1:0;if(process.platform==='win32'){const osRelease=os.release().split('.');if(Number(process.versions.node.split('.')[0])>=8&&Number(osRelease[0])>=10&&Number(osRelease[2])>=10586){return Number(osRelease[2])>=14931?3:2;}return 1;}if('CI'in env){if(['TRAVIS','CIRCLECI','APPVEYOR','GITLAB_CI'].some(sign=>sign in env)||env.CI_NAME==='codeship'){return 1;}return min;}if('TEAMCITY_VERSION'in env){return /^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(env.TEAMCITY_VERSION)?1:0;}if(env.COLORTERM==='truecolor'){return 3;}if('TERM_PROGRAM'in env){const version=parseInt((env.TERM_PROGRAM_VERSION||'').split('.')[0],10);switch(env.TERM_PROGRAM){case'iTerm.app':return version>=3?3:2;case'Apple_Terminal':return 2;}}if(/-256(color)?$/i.test(env.TERM)){return 2;}if(/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(env.TERM)){return 1;}if('COLORTERM'in env){return 1;}if(env.TERM==='dumb'){return min;}return min;}function getSupportLevel(stream){const level=supportsColor(stream);return translateLevel(level);}module.exports={supportsColor:getSupportLevel,stdout:getSupportLevel(process.stdout),stderr:getSupportLevel(process.stderr)};},8451:function(module,exports,__webpack_require__){const tty=__webpack_require__(8859);const util=__webpack_require__(649);exports.init=init;exports.log=log;exports.formatArgs=formatArgs;exports.save=save;exports.load=load;exports.useColors=useColors;exports.colors=[6,2,3,4,5,1];try{const supportsColor=__webpack_require__(8443);if(supportsColor&&(supportsColor.stderr||supportsColor).level>=2){exports.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221];}}catch(error){}exports.inspectOpts=Object.keys(process.env).filter(key=>{return /^debug_/i.test(key);}).reduce((obj,key)=>{const prop=key.substring(6).toLowerCase().replace(/_([a-z])/g,(_,k)=>{return k.toUpperCase();});let val=process.env[key];if(/^(yes|on|true|enabled)$/i.test(val)){val=true;}else if(/^(no|off|false|disabled)$/i.test(val)){val=false;}else if(val==='null'){val=null;}else{val=Number(val);}obj[prop]=val;return obj;},{});function useColors(){return'colors'in exports.inspectOpts?Boolean(exports.inspectOpts.colors):tty.isatty(process.stderr.fd);}function formatArgs(args){const{namespace:name,useColors}=this;if(useColors){const c=this.color;const colorCode='\u001B[3'+(c<8?c:'8;5;'+c);const prefix=`  ${colorCode};1m${name} \u001B[0m`;args[0]=prefix+args[0].split('\n').join('\n'+prefix);args.push(colorCode+'m+'+module.exports.humanize(this.diff)+'\u001B[0m');}else{args[0]=getDate()+name+' '+args[0];}}function getDate(){if(exports.inspectOpts.hideDate){return'';}return new Date().toISOString()+' ';}function log(...args){return process.stderr.write(util.format(...args)+'\n');}function save(namespaces){if(namespaces){process.env.DEBUG=namespaces;}else{delete process.env.DEBUG;}}function load(){return process.env.DEBUG;}function init(debug){debug.inspectOpts={};const keys=Object.keys(exports.inspectOpts);for(let i=0;i<keys.length;i++){debug.inspectOpts[keys[i]]=exports.inspectOpts[keys[i]];}}module.exports=__webpack_require__(4863)(exports);const{formatters}=module.exports;formatters.o=function(v){this.inspectOpts.colors=this.useColors;return util.inspect(v,this.inspectOpts).replace(/\s*\n\s*/g,' ');};formatters.O=function(v){this.inspectOpts.colors=this.useColors;return util.inspect(v,this.inspectOpts);};},8462:function(module,__unusedexports,__webpack_require__){var Polling=__webpack_require__(6957);var inherit=__webpack_require__(1199);module.exports=JSONPPolling;var rNewline=/\n/g;var rEscapedNewline=/\\n/g;var callbacks;function empty(){}function glob(){return typeof self!=='undefined'?self:typeof window!=='undefined'?window:typeof global!=='undefined'?global:{};}function JSONPPolling(opts){Polling.call(this,opts);this.query=this.query||{};if(!callbacks){var global=glob();callbacks=global.___eio=global.___eio||[];}this.index=callbacks.length;var self=this;callbacks.push(function(msg){self.onData(msg);});this.query.j=this.index;if(typeof addEventListener==='function'){addEventListener('beforeunload',function(){if(self.script)self.script.onerror=empty;},false);}}inherit(JSONPPolling,Polling);JSONPPolling.prototype.supportsBinary=false;JSONPPolling.prototype.doClose=function(){if(this.script){this.script.parentNode.removeChild(this.script);this.script=null;}if(this.form){this.form.parentNode.removeChild(this.form);this.form=null;this.iframe=null;}Polling.prototype.doClose.call(this);};JSONPPolling.prototype.doPoll=function(){var self=this;var script=document.createElement('script');if(this.script){this.script.parentNode.removeChild(this.script);this.script=null;}script.async=true;script.src=this.uri();script.onerror=function(e){self.onError('jsonp poll error',e);};var insertAt=document.getElementsByTagName('script')[0];if(insertAt){insertAt.parentNode.insertBefore(script,insertAt);}else{(document.head||document.body).appendChild(script);}this.script=script;var isUAgecko='undefined'!==typeof navigator&&/gecko/i.test(navigator.userAgent);if(isUAgecko){setTimeout(function(){var iframe=document.createElement('iframe');document.body.appendChild(iframe);document.body.removeChild(iframe);},100);}};JSONPPolling.prototype.doWrite=function(data,fn){var self=this;if(!this.form){var form=document.createElement('form');var area=document.createElement('textarea');var id=this.iframeId='eio_iframe_'+this.index;var iframe;form.className='socketio';form.style.position='absolute';form.style.top='-1000px';form.style.left='-1000px';form.target=id;form.method='POST';form.setAttribute('accept-charset','utf-8');area.name='d';form.appendChild(area);document.body.appendChild(form);this.form=form;this.area=area;}this.form.action=this.uri();function complete(){initIframe();fn();}function initIframe(){if(self.iframe){try{self.form.removeChild(self.iframe);}catch(e){self.onError('jsonp polling iframe removal error',e);}}try{var html='<iframe src="javascript:0" name="'+self.iframeId+'">';iframe=document.createElement(html);}catch(e){iframe=document.createElement('iframe');iframe.name=self.iframeId;iframe.src='javascript:0';}iframe.id=self.iframeId;self.form.appendChild(iframe);self.iframe=iframe;}initIframe();data=data.replace(rEscapedNewline,'\\\n');this.area.value=data.replace(rNewline,'\\n');try{this.form.submit();}catch(e){}if(this.iframe.attachEvent){this.iframe.onreadystatechange=function(){if(self.iframe.readyState==='complete'){complete();}};}else{this.iframe.onload=complete;}};},8501:function(__unusedmodule,exports,__webpack_require__){var varint=__webpack_require__(2572);exports.encode=function encode(v,b,o){v=v>=0?v*2:v*-2-1;var r=varint.encode(v,b,o);encode.bytes=varint.encode.bytes;return r;};exports.decode=function decode(b,o){var v=varint.decode(b,o);decode.bytes=varint.decode.bytes;return v&1?(v+1)/-2:v/2;};exports.encodingLength=function(v){return varint.encodingLength(v>=0?v*2:v*-2-1);};},8506:function(module,__unusedexports,__webpack_require__){"use strict";const{FILE_SEPARATOR}=__webpack_require__(7777);const pull=__webpack_require__(418);const collect=__webpack_require__(8342);const lsPullStream=__webpack_require__(1320);module.exports=context=>{return function mfsLs(path,options,callback){if(typeof path==='function'){callback=path;path=FILE_SEPARATOR;options={};}if(typeof options==='function'){callback=options;options={};}pull(lsPullStream(context)(path,options),collect(callback));};};},8509:function(module){module.exports={"name":"spuriousDragon","comment":"HF with EIPs for simple replay attack protection, EXP cost increase, state trie clearing, contract code size limit","eip":{"url":"https://eips.ethereum.org/EIPS/eip-607","status":"Final"},"gasConfig":{},"gasPrices":{"expByte":{"v":50,"d":"Times ceil(log256(exponent)) for the EXP instruction"}},"vm":{"maxCodeSize":{"v":24576,"d":"Maximum length of contract code"}},"pow":{},"casper":{},"sharding":{}};},8511:function(module,__unusedexports,__webpack_require__){"use strict";const promisify=__webpack_require__(6955);const setImmediate=__webpack_require__(7368);const errCode=__webpack_require__(4999);const errPubsubDisabled=()=>{return errCode(new Error('pubsub experiment is not enabled'),'ERR_PUBSUB_DISABLED');};module.exports=function pubsub(self){return{subscribe:(topic,handler,options,callback)=>{if(typeof options==='function'){callback=options;options={};}if(!self._options.EXPERIMENTAL.pubsub){return callback?setImmediate(()=>callback(errPubsubDisabled())):Promise.reject(errPubsubDisabled());}if(!callback){return new Promise((resolve,reject)=>{self.libp2p.pubsub.subscribe(topic,options,handler,err=>{if(err){return reject(err);}resolve();});});}self.libp2p.pubsub.subscribe(topic,options,handler,callback);},unsubscribe:(topic,handler,callback)=>{if(!self._options.EXPERIMENTAL.pubsub){return callback?setImmediate(()=>callback(errPubsubDisabled())):Promise.reject(errPubsubDisabled());}self.libp2p.pubsub.unsubscribe(topic,handler);if(!callback){return Promise.resolve();}setImmediate(()=>callback());},publish:promisify((topic,data,callback)=>{if(!self._options.EXPERIMENTAL.pubsub){return setImmediate(()=>callback(errPubsubDisabled()));}self.libp2p.pubsub.publish(topic,data,callback);}),ls:promisify(callback=>{if(!self._options.EXPERIMENTAL.pubsub){return setImmediate(()=>callback(errPubsubDisabled()));}self.libp2p.pubsub.ls(callback);}),peers:promisify((topic,callback)=>{if(!self._options.EXPERIMENTAL.pubsub){return setImmediate(()=>callback(errPubsubDisabled()));}self.libp2p.pubsub.peers(topic,callback);}),setMaxListeners(n){if(!self._options.EXPERIMENTAL.pubsub){throw errPubsubDisabled();}self.libp2p.pubsub.setMaxListeners(n);}};};},8514:function(module,__unusedexports,__webpack_require__){"use strict";var BigInteger=__webpack_require__(4204).BigInteger;var find=__webpack_require__(4179);var max=__webpack_require__(6049);var merge=__webpack_require__(5256);var padStart=__webpack_require__(6682);var repeat=__webpack_require__(6309);var sprintf=__webpack_require__(7586).sprintf;var constants4=__webpack_require__(3897);var constants6=__webpack_require__(2638);var Address4=__webpack_require__(9464);function addCommas(number){var r=/(\d+)(\d{3})/;while(r.test(number)){number=number.replace(r,'$1,$2');}return number;}function spanLeadingZeroes4(n){n=n.replace(/^(0{1,})([1-9]+)$/,'<span class="parse-error">$1</span>$2');n=n.replace(/^(0{1,})(0)$/,'<span class="parse-error">$1</span>$2');return n;}function Address6(address,optionalGroups){if(optionalGroups===undefined){this.groups=constants6.GROUPS;}else{this.groups=optionalGroups;}this.v4=false;this.subnet='/128';this.subnetMask=128;this.zone='';this.address=address;var subnet=constants6.RE_SUBNET_STRING.exec(address);if(subnet){this.parsedSubnet=subnet[0].replace('/','');this.subnetMask=parseInt(this.parsedSubnet,10);this.subnet='/'+this.subnetMask;if(isNaN(this.subnetMask)||this.subnetMask<0||this.subnetMask>constants6.BITS){this.valid=false;this.error='Invalid subnet mask.';return;}address=address.replace(constants6.RE_SUBNET_STRING,'');}else if(/\//.test(address)){this.valid=false;this.error='Invalid subnet mask.';return;}var zone=constants6.RE_ZONE_STRING.exec(address);if(zone){this.zone=zone[0];address=address.replace(constants6.RE_ZONE_STRING,'');}this.addressMinusSuffix=address;this.parsedAddress=this.parse(this.addressMinusSuffix);}merge(Address6.prototype,__webpack_require__(4221));merge(Address6.prototype,__webpack_require__(3567));merge(Address6.prototype,__webpack_require__(6193));Address6.fromBigInteger=function(bigInteger){var hex=padStart(bigInteger.toString(16),32,'0');var groups=[];var i;for(i=0;i<constants6.GROUPS;i++){groups.push(hex.slice(i*4,(i+1)*4));}return new Address6(groups.join(':'));};Address6.fromURL=function(url){var host;var port;var result;if(url.indexOf('[')!==-1&&url.indexOf(']:')!==-1){result=constants6.RE_URL_WITH_PORT.exec(url);if(result===null){return{error:'failed to parse address with port',address:null,port:null};}host=result[1];port=result[2];}else if(url.indexOf('/')!==-1){url=url.replace(/^[a-z0-9]+:\/\//,'');result=constants6.RE_URL.exec(url);if(result===null){return{error:'failed to parse address from URL',address:null,port:null};}host=result[1];}else{host=url;}if(port){port=parseInt(port,10);if(port<0||port>65536){port=null;}}else{port=null;}return{address:new Address6(host),port:port};};Address6.fromAddress4=function(address4){var address4=new Address4(address4);var mask6=constants6.BITS-(constants4.BITS-address4.subnetMask);return new Address6('::ffff:'+address4.correctForm()+'/'+mask6);};Address6.fromArpa=function(arpaFormAddress){var address=arpaFormAddress.replace(/(\.ip6\.arpa)?\.$/,'');var semicolonAmount=7;if(address.length!==63){address={error:"Not Valid 'ip6.arpa' form",address:null};return address;}address=address.split('.').reverse();for(var i=semicolonAmount;i>0;i--){var insertIndex=i*4;address.splice(insertIndex,0,':');}address=address.join('');return new Address6(address);};function compact(address,slice){var s1=[];var s2=[];var i;for(i=0;i<address.length;i++){if(i<slice[0]){s1.push(address[i]);}else if(i>slice[1]){s2.push(address[i]);}}return s1.concat(['compact']).concat(s2);}Address6.prototype.microsoftTranscription=function(){return sprintf('%s.ipv6-literal.net',this.correctForm().replace(/:/g,'-'));};Address6.prototype.mask=function(optionalMask){if(optionalMask===undefined){optionalMask=this.subnetMask;}return this.getBitsBase2(0,optionalMask);};Address6.prototype.possibleSubnets=function(optionalSubnetSize){if(optionalSubnetSize===undefined){optionalSubnetSize=128;}var availableBits=constants6.BITS-this.subnetMask;var subnetBits=Math.abs(optionalSubnetSize-constants6.BITS);var subnetPowers=availableBits-subnetBits;if(subnetPowers<0){return'0';}return addCommas(new BigInteger('2',10).pow(subnetPowers).toString(10));};Address6.prototype.startAddress=function(){var startAddress=new BigInteger(this.mask()+repeat(0,constants6.BITS-this.subnetMask),2);return Address6.fromBigInteger(startAddress);};Address6.prototype.endAddress=function(){var endAddress=new BigInteger(this.mask()+repeat(1,constants6.BITS-this.subnetMask),2);return Address6.fromBigInteger(endAddress);};Address6.prototype.getScope=function(){var scope=constants6.SCOPES[this.getBits(12,16)];if(this.getType()==='Global unicast'&&scope!=='Link local'){scope='Global';}return scope;};Address6.prototype.getType=function(){var self=this;function isType(name,type){return self.isInSubnet(new Address6(type));}return find(constants6.TYPES,isType)||'Global unicast';};Address6.prototype.getBits=function(start,end){return new BigInteger(this.getBitsBase2(start,end),2);};Address6.prototype.getBitsBase2=function(start,end){return this.binaryZeroPad().slice(start,end);};Address6.prototype.getBitsBase16=function(start,end){var length=end-start;if(length%4!==0){return null;}return padStart(this.getBits(start,end).toString(16),length/4,'0');};Address6.prototype.getBitsPastSubnet=function(){return this.getBitsBase2(this.subnetMask,constants6.BITS);};Address6.prototype.reverseForm=function(options){if(!options){options={};}var characters=Math.floor(this.subnetMask/4);var reversed=this.canonicalForm().replace(/:/g,'').split('').slice(0,characters).reverse().join('.');if(characters>0){if(options.omitSuffix){return reversed;}return sprintf('%s.ip6.arpa.',reversed);}if(options.omitSuffix){return'';}return'ip6.arpa.';};Address6.prototype.correctForm=function(){if(!this.parsedAddress){return null;}var i;var groups=[];var zeroCounter=0;var zeroes=[];for(i=0;i<this.parsedAddress.length;i++){var value=parseInt(this.parsedAddress[i],16);if(value===0){zeroCounter++;}if(value!==0&&zeroCounter>0){if(zeroCounter>1){zeroes.push([i-zeroCounter,i-1]);}zeroCounter=0;}}if(zeroCounter>1){zeroes.push([this.parsedAddress.length-zeroCounter,this.parsedAddress.length-1]);}var zeroLengths=zeroes.map(function(n){return n[1]-n[0]+1;});if(zeroes.length>0){var index=zeroLengths.indexOf(max(zeroLengths));groups=compact(this.parsedAddress,zeroes[index]);}else{groups=this.parsedAddress;}for(i=0;i<groups.length;i++){if(groups[i]!=='compact'){groups[i]=parseInt(groups[i],16).toString(16);}}var correct=groups.join(':');correct=correct.replace(/^compact$/,'::');correct=correct.replace(/^compact|compact$/,':');correct=correct.replace(/compact/,'');return correct;};Address6.prototype.binaryZeroPad=function(){return padStart(this.bigInteger().toString(2),constants6.BITS,'0');};Address6.prototype.parse4in6=function(address){var groups=address.split(':');var lastGroup=groups.slice(-1)[0];var address4=lastGroup.match(constants4.RE_ADDRESS);if(address4){var temp4=new Address4(address4[0]);for(var i=0;i<temp4.groups;i++){if(/^0[0-9]+/.test(temp4.parsedAddress[i])){this.valid=false;this.error='IPv4 addresses can not have leading zeroes.';this.parseError=address.replace(constants4.RE_ADDRESS,temp4.parsedAddress.map(spanLeadingZeroes4).join('.'));return null;}}this.v4=true;groups[groups.length-1]=temp4.toGroup6();address=groups.join(':');}return address;};Address6.prototype.parse=function(address){address=this.parse4in6(address);if(this.error){return null;}var badCharacters=address.match(constants6.RE_BAD_CHARACTERS);if(badCharacters){this.valid=false;this.error=sprintf('Bad character%s detected in address: %s',badCharacters.length>1?'s':'',badCharacters.join(''));this.parseError=address.replace(constants6.RE_BAD_CHARACTERS,'<span class="parse-error">$1</span>');return null;}var badAddress=address.match(constants6.RE_BAD_ADDRESS);if(badAddress){this.valid=false;this.error=sprintf('Address failed regex: %s',badAddress.join(''));this.parseError=address.replace(constants6.RE_BAD_ADDRESS,'<span class="parse-error">$1</span>');return null;}var groups=[];var halves=address.split('::');if(halves.length===2){var first=halves[0].split(':');var last=halves[1].split(':');if(first.length===1&&first[0]===''){first=[];}if(last.length===1&&last[0]===''){last=[];}var remaining=this.groups-(first.length+last.length);if(!remaining){this.valid=false;this.error='Error parsing groups';return null;}this.elidedGroups=remaining;this.elisionBegin=first.length;this.elisionEnd=first.length+this.elidedGroups;first.forEach(function(group){groups.push(group);});for(var i=0;i<remaining;i++){groups.push(0);}last.forEach(function(group){groups.push(group);});}else if(halves.length===1){groups=address.split(':');this.elidedGroups=0;}else{this.valid=false;this.error='Too many :: groups found';return null;}groups=groups.map(function(g){return sprintf('%x',parseInt(g,16));});if(groups.length!==this.groups){this.valid=false;this.error='Incorrect number of groups found';return null;}this.valid=true;return groups;};function paddedHex(octet){return sprintf('%04x',parseInt(octet,16));}Address6.prototype.canonicalForm=function(){if(!this.valid){return null;}return this.parsedAddress.map(paddedHex).join(':');};Address6.prototype.decimal=function(){if(!this.valid){return null;}return this.parsedAddress.map(function(n){return sprintf('%05d',parseInt(n,16));}).join(':');};Address6.prototype.bigInteger=function(){if(!this.valid){return null;}return new BigInteger(this.parsedAddress.map(paddedHex).join(''),16);};Address6.prototype.to4=function(){var binary=this.binaryZeroPad().split('');return Address4.fromHex(new BigInteger(binary.slice(96,128).join(''),2).toString(16));};Address6.prototype.to4in6=function(){var address4=this.to4();var address6=new Address6(this.parsedAddress.slice(0,6).join(':'),6);var correct=address6.correctForm();var infix='';if(!/:$/.test(correct)){infix=':';}return address6.correctForm()+infix+address4.address;};Address6.prototype.inspectTeredo=function(){var prefix=this.getBitsBase16(0,32);var udpPort=this.getBits(80,96).xor(new BigInteger('ffff',16)).toString();var server4=Address4.fromHex(this.getBitsBase16(32,64));var client4=Address4.fromHex(this.getBits(96,128).xor(new BigInteger('ffffffff',16)).toString(16));var flags=this.getBits(64,80);var flagsBase2=this.getBitsBase2(64,80);var coneNat=flags.testBit(15);var reserved=flags.testBit(14);var groupIndividual=flags.testBit(8);var universalLocal=flags.testBit(9);var nonce=new BigInteger(flagsBase2.slice(2,6)+flagsBase2.slice(8,16),2).toString(10);return{prefix:sprintf('%s:%s',prefix.slice(0,4),prefix.slice(4,8)),server4:server4.address,client4:client4.address,flags:flagsBase2,coneNat:coneNat,microsoft:{reserved:reserved,universalLocal:universalLocal,groupIndividual:groupIndividual,nonce:nonce},udpPort:udpPort};};Address6.prototype.inspect6to4=function(){var prefix=this.getBitsBase16(0,16);var gateway=Address4.fromHex(this.getBitsBase16(16,48));return{prefix:sprintf('%s',prefix.slice(0,4)),gateway:gateway.address};};Address6.prototype.to6to4=function(){if(!this.is4()){return null;}var addr6to4=['2002',this.getBitsBase16(96,112),this.getBitsBase16(112,128),'','/16'].join(':');return new Address6(addr6to4);};Address6.prototype.toByteArray=function(){var byteArray=this.bigInteger().toByteArray();if(byteArray.length===17&&byteArray[0]===0){return byteArray.slice(1);}return byteArray;};function unsignByte(b){return b&0xFF;}Address6.prototype.toUnsignedByteArray=function(){return this.toByteArray().map(unsignByte);};Address6.fromByteArray=function(bytes){return this.fromUnsignedByteArray(bytes.map(unsignByte));};Address6.fromUnsignedByteArray=function(bytes){var BYTE_MAX=new BigInteger('256',10);var result=new BigInteger('0',10);var multiplier=new BigInteger('1',10);for(var i=bytes.length-1;i>=0;i--){result=result.add(multiplier.multiply(new BigInteger(bytes[i].toString(10),10)));multiplier=multiplier.multiply(BYTE_MAX);}return Address6.fromBigInteger(result);};module.exports=Address6;},8529:function(module){module.exports=function getIterator(obj){if(obj){if(typeof obj[Symbol.iterator]==='function'){return obj[Symbol.iterator]();}if(typeof obj[Symbol.asyncIterator]==='function'){return obj[Symbol.asyncIterator]();}if(typeof obj.next==='function'){return obj;}}throw new Error('argument is not an iterator or iterable');};},8530:function(module,__unusedexports,__webpack_require__){"use strict";const assert=__webpack_require__(3930);const promisify=__webpack_require__(6955);const{createLock}=__webpack_require__(7777);const readOperations={ls:__webpack_require__(8506),stat:__webpack_require__(1847)};const writeOperations={cp:__webpack_require__(1641),flush:__webpack_require__(1948),mkdir:__webpack_require__(1674),mv:__webpack_require__(2221),rm:__webpack_require__(5352)};const unwrappedOperations={write:__webpack_require__(863),read:__webpack_require__(3522)};const unwrappedSynchronousOperations={readPullStream:__webpack_require__(4321),readReadableStream:__webpack_require__(8860),lsPullStream:__webpack_require__(1320),lsReadableStream:__webpack_require__(9138)};const wrap=({options,mfs,operations,lock})=>{Object.keys(operations).forEach(key=>{mfs[key]=promisify(lock(operations[key](options)));});};const defaultOptions={repoOwner:true,ipld:null,repo:null};module.exports=options=>{const{repoOwner}=Object.assign({},defaultOptions||{},options);assert(options.ipld,'MFS requires an IPLD instance');assert(options.repo,'MFS requires an ipfs-repo instance');const lock=createLock(repoOwner);const readLock=operation=>{return lock.readLock(operation);};const writeLock=operation=>{return lock.writeLock(operation);};const mfs={};wrap({options,mfs,operations:readOperations,lock:readLock});wrap({options,mfs,operations:writeOperations,lock:writeLock});Object.keys(unwrappedOperations).forEach(key=>{mfs[key]=promisify(unwrappedOperations[key](options));});Object.keys(unwrappedSynchronousOperations).forEach(key=>{mfs[key]=unwrappedSynchronousOperations[key](options);});return mfs;};},8540:function(module,__unusedexports,__webpack_require__){var exports=module.exports=__webpack_require__(5145);exports.source=__webpack_require__(4390);exports.sink=__webpack_require__(6559);exports.createServer=__webpack_require__(7301);exports.connect=__webpack_require__(6265);},8542:function(__unusedmodule,exports){"use strict";exports.defined=function(val){return val!==null&&val!==undefined&&(typeof val!=='number'||!isNaN(val));};},8544:function(module,exports,__webpack_require__){var Stream=__webpack_require__(6886);if(process.env.READABLE_STREAM==='disable'&&Stream){module.exports=Stream;exports=module.exports=Stream.Readable;exports.Readable=Stream.Readable;exports.Writable=Stream.Writable;exports.Duplex=Stream.Duplex;exports.Transform=Stream.Transform;exports.PassThrough=Stream.PassThrough;exports.Stream=Stream;}else{exports=module.exports=__webpack_require__(2315);exports.Stream=Stream||exports;exports.Readable=exports;exports.Writable=__webpack_require__(201);exports.Duplex=__webpack_require__(5427);exports.Transform=__webpack_require__(823);exports.PassThrough=__webpack_require__(6113);}},8551:function(module){"use strict";const toPathComponents=(path='')=>{return(path.trim().match(/([^\\^/]|\\\/)+/g)||[]).filter(Boolean);};module.exports=toPathComponents;},8565:function(module,__unusedexports,__webpack_require__){"use strict";module.exports=__webpack_require__(5524)(__webpack_require__(1840));},8568:function(module,__unusedexports,__webpack_require__){"use strict";const FSM=__webpack_require__(7032);const EventEmitter=__webpack_require__(4859).EventEmitter;const each=__webpack_require__(4486);const eachSeries=__webpack_require__(9891);const series=__webpack_require__(7644);const TransportManager=__webpack_require__(1906);const ConnectionManager=__webpack_require__(3761);const getPeerInfo=__webpack_require__(6904);const dial=__webpack_require__(1326);const connectionHandler=__webpack_require__(2904);const ProtocolMuxer=__webpack_require__(6518);const plaintext=__webpack_require__(7708);const Observer=__webpack_require__(636);const Stats=__webpack_require__(1018);const assert=__webpack_require__(3930);const Errors=__webpack_require__(8963);const debug=__webpack_require__(746);const log=debug('libp2p:switch');log.error=debug('libp2p:switch:error');class Switch extends EventEmitter{constructor(peerInfo,peerBook,options){super();assert(peerInfo,'You must provide a `peerInfo`');assert(peerBook,'You must provide a `peerBook`');this._peerInfo=peerInfo;this._peerBook=peerBook;this._options=options||{};this.setMaxListeners(Infinity);this.transports={};this.conns={};this.protocols={};this.muxers={};this.identify=false;this.crypto=plaintext;this.protector=this._options.protector||null;this.transport=new TransportManager(this);this.connection=new ConnectionManager(this);this.observer=Observer(this);this.stats=Stats(this.observer,this._options.stats);this.protocolMuxer=ProtocolMuxer(this.protocols,this.observer);this.dial=dial(this);this.dialFSM=dial(this,true);this._connectionHandler=connectionHandler(this);this.state=new FSM('STOPPED',{STOPPED:{start:'STARTING',stop:'STOPPING'},STARTING:{done:'STARTED',stop:'STOPPING'},STARTED:{stop:'STOPPING',start:'STARTED'},STOPPING:{stop:'STOPPING',done:'STOPPED'}});this.state.on('STARTING',()=>{log('The switch is starting');this._onStarting();});this.state.on('STOPPING',()=>{log('The switch is stopping');this._onStopping();});this.state.on('STARTED',()=>{log('The switch has started');this.emit('start');});this.state.on('STOPPED',()=>{log('The switch has stopped');this.emit('stop');});this.state.on('error',err=>{log.error(err);this.emit('error',err);});}availableTransports(peerInfo){const myAddrs=peerInfo.multiaddrs.toArray();const myTransports=Object.keys(this.transports);return myTransports.filter(ts=>this.transports[ts].filter(myAddrs).length>0).sort(a=>{return a==='Circuit'?1:0;});}handle(protocol,handlerFunc,matchFunc){this.protocols[protocol]={handlerFunc:handlerFunc,matchFunc:matchFunc};}unhandle(protocol){if(this.protocols[protocol]){delete this.protocols[protocol];}}hangUp(peer,callback){const peerInfo=getPeerInfo(peer,this._peerBook);const key=peerInfo.id.toB58String();const conns=[...this.connection.getAllById(key)];each(conns,(conn,cb)=>{conn.once('close',cb);conn.close();},callback);}hasTransports(){const transports=Object.keys(this.transports).filter(t=>t!=='Circuit');return transports&&transports.length>0;}start(callback=()=>{}){this.once('start',callback);this.state('start');}stop(callback=()=>{}){this.once('stop',callback);this.state('stop');}_onStarting(){this.stats.start();eachSeries(this.availableTransports(this._peerInfo),(ts,cb)=>{this.transport.listen(ts,{},null,cb);},err=>{if(err){log.error(err);return this.emit('error',err);}this.state('done');});}_onStopping(){this.stats.stop();series([cb=>{each(this.transports,(transport,cb)=>{each(transport.listeners,(listener,cb)=>{listener.close(cb);},cb);},cb);},cb=>each([...this.connection.getAll()],(conn,cb)=>{conn.once('close',cb);conn.close();},cb)],_=>{this.state('done');});}}module.exports=Switch;module.exports.errors=Errors;},8579:function(module){"use strict";module.exports={repoVersion:7};},8585:function(__unusedmodule,exports,__webpack_require__){"use strict";const encode=__webpack_require__(5570);const d=__webpack_require__(4299);exports.encode=encode;exports.decode=d.decode;exports.decodeFromReader=d.decodeFromReader;},8594:function(module,__unusedexports,__webpack_require__){var Symbol=__webpack_require__(8326);var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;var nativeObjectToString=objectProto.toString;var symToStringTag=Symbol?Symbol.toStringTag:undefined;function getRawTag(value){var isOwn=hasOwnProperty.call(value,symToStringTag),tag=value[symToStringTag];try{value[symToStringTag]=undefined;var unmasked=true;}catch(e){}var result=nativeObjectToString.call(value);if(unmasked){if(isOwn){value[symToStringTag]=tag;}else{delete value[symToStringTag];}}return result;}module.exports=getRawTag;},8601:function(module,exports,__webpack_require__){"use strict";const crypto=__webpack_require__(318);const bs58=__webpack_require__(4967);exports=module.exports;exports.randomSeqno=()=>{return crypto.randomBytes(20);};exports.msgId=(from,seqno)=>{return from+seqno.toString('hex');};exports.anyMatch=(a,b)=>{let bHas;if(Array.isArray(b)){bHas=val=>b.indexOf(val)>-1;}else{bHas=val=>b.has(val);}for(let val of a){if(bHas(val)){return true;}}return false;};exports.ensureArray=maybeArray=>{if(!Array.isArray(maybeArray)){return[maybeArray];}return maybeArray;};exports.normalizeInRpcMessages=messages=>{if(!messages){return messages;}return messages.map(msg=>{const m=Object.assign({},msg);if(Buffer.isBuffer(msg.from)){m.from=bs58.encode(msg.from);}return m;});};exports.normalizeOutRpcMessages=messages=>{if(!messages){return messages;}return messages.map(msg=>{const m=Object.assign({},msg);if(typeof msg.from==='string'||msg.from instanceof String){m.from=bs58.decode(msg.from);}return m;});};},8602:function(module,__unusedexports,__webpack_require__){var eio=__webpack_require__(2603);var Socket=__webpack_require__(7868);var Emitter=__webpack_require__(3649);var parser=__webpack_require__(3837);var on=__webpack_require__(8051);var bind=__webpack_require__(4628);var debug=__webpack_require__(9771)('socket.io-client:manager');var indexOf=__webpack_require__(6628);var Backoff=__webpack_require__(9266);var has=Object.prototype.hasOwnProperty;module.exports=Manager;function Manager(uri,opts){if(!(this instanceof Manager))return new Manager(uri,opts);if(uri&&'object'===typeof uri){opts=uri;uri=undefined;}opts=opts||{};opts.path=opts.path||'/socket.io';this.nsps={};this.subs=[];this.opts=opts;this.reconnection(opts.reconnection!==false);this.reconnectionAttempts(opts.reconnectionAttempts||Infinity);this.reconnectionDelay(opts.reconnectionDelay||1000);this.reconnectionDelayMax(opts.reconnectionDelayMax||5000);this.randomizationFactor(opts.randomizationFactor||0.5);this.backoff=new Backoff({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()});this.timeout(null==opts.timeout?20000:opts.timeout);this.readyState='closed';this.uri=uri;this.connecting=[];this.lastPing=null;this.encoding=false;this.packetBuffer=[];var _parser=opts.parser||parser;this.encoder=new _parser.Encoder();this.decoder=new _parser.Decoder();this.autoConnect=opts.autoConnect!==false;if(this.autoConnect)this.open();}Manager.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var nsp in this.nsps){if(has.call(this.nsps,nsp)){this.nsps[nsp].emit.apply(this.nsps[nsp],arguments);}}};Manager.prototype.updateSocketIds=function(){for(var nsp in this.nsps){if(has.call(this.nsps,nsp)){this.nsps[nsp].id=this.generateId(nsp);}}};Manager.prototype.generateId=function(nsp){return(nsp==='/'?'':nsp+'#')+this.engine.id;};Emitter(Manager.prototype);Manager.prototype.reconnection=function(v){if(!arguments.length)return this._reconnection;this._reconnection=!!v;return this;};Manager.prototype.reconnectionAttempts=function(v){if(!arguments.length)return this._reconnectionAttempts;this._reconnectionAttempts=v;return this;};Manager.prototype.reconnectionDelay=function(v){if(!arguments.length)return this._reconnectionDelay;this._reconnectionDelay=v;this.backoff&&this.backoff.setMin(v);return this;};Manager.prototype.randomizationFactor=function(v){if(!arguments.length)return this._randomizationFactor;this._randomizationFactor=v;this.backoff&&this.backoff.setJitter(v);return this;};Manager.prototype.reconnectionDelayMax=function(v){if(!arguments.length)return this._reconnectionDelayMax;this._reconnectionDelayMax=v;this.backoff&&this.backoff.setMax(v);return this;};Manager.prototype.timeout=function(v){if(!arguments.length)return this._timeout;this._timeout=v;return this;};Manager.prototype.maybeReconnectOnOpen=function(){if(!this.reconnecting&&this._reconnection&&this.backoff.attempts===0){this.reconnect();}};Manager.prototype.open=Manager.prototype.connect=function(fn,opts){debug('readyState %s',this.readyState);if(~this.readyState.indexOf('open'))return this;debug('opening %s',this.uri);this.engine=eio(this.uri,this.opts);var socket=this.engine;var self=this;this.readyState='opening';this.skipReconnect=false;var openSub=on(socket,'open',function(){self.onopen();fn&&fn();});var errorSub=on(socket,'error',function(data){debug('connect_error');self.cleanup();self.readyState='closed';self.emitAll('connect_error',data);if(fn){var err=new Error('Connection error');err.data=data;fn(err);}else{self.maybeReconnectOnOpen();}});if(false!==this._timeout){var timeout=this._timeout;debug('connect attempt will timeout after %d',timeout);var timer=setTimeout(function(){debug('connect attempt timed out after %d',timeout);openSub.destroy();socket.close();socket.emit('error','timeout');self.emitAll('connect_timeout',timeout);},timeout);this.subs.push({destroy:function(){clearTimeout(timer);}});}this.subs.push(openSub);this.subs.push(errorSub);return this;};Manager.prototype.onopen=function(){debug('open');this.cleanup();this.readyState='open';this.emit('open');var socket=this.engine;this.subs.push(on(socket,'data',bind(this,'ondata')));this.subs.push(on(socket,'ping',bind(this,'onping')));this.subs.push(on(socket,'pong',bind(this,'onpong')));this.subs.push(on(socket,'error',bind(this,'onerror')));this.subs.push(on(socket,'close',bind(this,'onclose')));this.subs.push(on(this.decoder,'decoded',bind(this,'ondecoded')));};Manager.prototype.onping=function(){this.lastPing=new Date();this.emitAll('ping');};Manager.prototype.onpong=function(){this.emitAll('pong',new Date()-this.lastPing);};Manager.prototype.ondata=function(data){this.decoder.add(data);};Manager.prototype.ondecoded=function(packet){this.emit('packet',packet);};Manager.prototype.onerror=function(err){debug('error',err);this.emitAll('error',err);};Manager.prototype.socket=function(nsp,opts){var socket=this.nsps[nsp];if(!socket){socket=new Socket(this,nsp,opts);this.nsps[nsp]=socket;var self=this;socket.on('connecting',onConnecting);socket.on('connect',function(){socket.id=self.generateId(nsp);});if(this.autoConnect){onConnecting();}}function onConnecting(){if(!~indexOf(self.connecting,socket)){self.connecting.push(socket);}}return socket;};Manager.prototype.destroy=function(socket){var index=indexOf(this.connecting,socket);if(~index)this.connecting.splice(index,1);if(this.connecting.length)return;this.close();};Manager.prototype.packet=function(packet){debug('writing packet %j',packet);var self=this;if(packet.query&&packet.type===0)packet.nsp+='?'+packet.query;if(!self.encoding){self.encoding=true;this.encoder.encode(packet,function(encodedPackets){for(var i=0;i<encodedPackets.length;i++){self.engine.write(encodedPackets[i],packet.options);}self.encoding=false;self.processPacketQueue();});}else{self.packetBuffer.push(packet);}};Manager.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var pack=this.packetBuffer.shift();this.packet(pack);}};Manager.prototype.cleanup=function(){debug('cleanup');var subsLength=this.subs.length;for(var i=0;i<subsLength;i++){var sub=this.subs.shift();sub.destroy();}this.packetBuffer=[];this.encoding=false;this.lastPing=null;this.decoder.destroy();};Manager.prototype.close=Manager.prototype.disconnect=function(){debug('disconnect');this.skipReconnect=true;this.reconnecting=false;if('opening'===this.readyState){this.cleanup();}this.backoff.reset();this.readyState='closed';if(this.engine)this.engine.close();};Manager.prototype.onclose=function(reason){debug('onclose');this.cleanup();this.backoff.reset();this.readyState='closed';this.emit('close',reason);if(this._reconnection&&!this.skipReconnect){this.reconnect();}};Manager.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var self=this;if(this.backoff.attempts>=this._reconnectionAttempts){debug('reconnect failed');this.backoff.reset();this.emitAll('reconnect_failed');this.reconnecting=false;}else{var delay=this.backoff.duration();debug('will wait %dms before reconnect attempt',delay);this.reconnecting=true;var timer=setTimeout(function(){if(self.skipReconnect)return;debug('attempting reconnect');self.emitAll('reconnect_attempt',self.backoff.attempts);self.emitAll('reconnecting',self.backoff.attempts);if(self.skipReconnect)return;self.open(function(err){if(err){debug('reconnect attempt error');self.reconnecting=false;self.reconnect();self.emitAll('reconnect_error',err.data);}else{debug('reconnect success');self.onreconnect();}});},delay);this.subs.push({destroy:function(){clearTimeout(timer);}});}};Manager.prototype.onreconnect=function(){var attempt=this.backoff.attempts;this.reconnecting=false;this.backoff.reset();this.updateSocketIds();this.emitAll('reconnect',attempt);};},8605:function(module,__unusedexports,__webpack_require__){var native=__webpack_require__(7819);function getTypeName(fn){return fn.name||fn.toString().match(/function (.*?)\s*\(/)[1];}function getValueTypeName(value){return native.Nil(value)?'':getTypeName(value.constructor);}function getValue(value){if(native.Function(value))return'';if(native.String(value))return JSON.stringify(value);if(value&&native.Object(value))return'';return value;}function captureStackTrace(e,t){if(Error.captureStackTrace){Error.captureStackTrace(e,t);}}function tfJSON(type){if(native.Function(type))return type.toJSON?type.toJSON():getTypeName(type);if(native.Array(type))return'Array';if(type&&native.Object(type))return'Object';return type!==undefined?type:'';}function tfErrorString(type,value,valueTypeName){var valueJson=getValue(value);return'Expected '+tfJSON(type)+', got'+(valueTypeName!==''?' '+valueTypeName:'')+(valueJson!==''?' '+valueJson:'');}function TfTypeError(type,value,valueTypeName){valueTypeName=valueTypeName||getValueTypeName(value);this.message=tfErrorString(type,value,valueTypeName);captureStackTrace(this,TfTypeError);this.__type=type;this.__value=value;this.__valueTypeName=valueTypeName;}TfTypeError.prototype=Object.create(Error.prototype);TfTypeError.prototype.constructor=TfTypeError;function tfPropertyErrorString(type,label,name,value,valueTypeName){var description='" of type ';if(label==='key')description='" with key type ';return tfErrorString('property "'+tfJSON(name)+description+tfJSON(type),value,valueTypeName);}function TfPropertyTypeError(type,property,label,value,valueTypeName){if(type){valueTypeName=valueTypeName||getValueTypeName(value);this.message=tfPropertyErrorString(type,label,property,value,valueTypeName);}else{this.message='Unexpected property "'+property+'"';}captureStackTrace(this,TfTypeError);this.__label=label;this.__property=property;this.__type=type;this.__value=value;this.__valueTypeName=valueTypeName;}TfPropertyTypeError.prototype=Object.create(Error.prototype);TfPropertyTypeError.prototype.constructor=TfTypeError;function tfCustomError(expected,actual){return new TfTypeError(expected,{},actual);}function tfSubError(e,property,label){if(e instanceof TfPropertyTypeError){property=property+'.'+e.__property;e=new TfPropertyTypeError(e.__type,property,e.__label,e.__value,e.__valueTypeName);}else if(e instanceof TfTypeError){e=new TfPropertyTypeError(e.__type,property,label,e.__value,e.__valueTypeName);}captureStackTrace(e);return e;}module.exports={TfTypeError:TfTypeError,TfPropertyTypeError:TfPropertyTypeError,tfCustomError:tfCustomError,tfSubError:tfSubError,tfJSON:tfJSON,getValueTypeName:getValueTypeName};},8606:function(module){module.exports={"_args":[["joi@14.3.1","/Users/romuloalves/Projects/tramonto/TramontoOne/nodejs-assets/nodejs-project"]],"_from":"joi@14.3.1","_id":"joi@14.3.1","_inBundle":false,"_integrity":"sha512-LQDdM+pkOrpAn4Lp+neNIFV3axv1Vna3j38bisbQhETPMANYRbFJFUyOZcOClYvM/hppMhGWuKSFEK9vjrB+bQ==","_location":"/joi","_phantomChildren":{"hoek":"6.1.2","punycode":"2.1.1"},"_requested":{"type":"version","registry":true,"raw":"joi@14.3.1","name":"joi","escapedName":"joi","rawSpec":"14.3.1","saveSpec":null,"fetchSpec":"14.3.1"},"_requiredBy":["/ipfs","/ipfs-mfs","/libp2p"],"_resolved":"https://registry.npmjs.org/joi/-/joi-14.3.1.tgz","_spec":"14.3.1","_where":"/Users/romuloalves/Projects/tramonto/TramontoOne/nodejs-assets/nodejs-project","bugs":{"url":"https://github.com/hapijs/joi/issues"},"dependencies":{"hoek":"6.x.x","isemail":"3.x.x","topo":"3.x.x"},"description":"Object schema validation","devDependencies":{"code":"5.x.x","hapitoc":"1.x.x","lab":"18.x.x"},"homepage":"https://github.com/hapijs/joi","keywords":["hapi","schema","validation"],"license":"BSD-3-Clause","main":"lib/index.js","name":"joi","repository":{"type":"git","url":"git://github.com/hapijs/joi.git"},"scripts":{"test":"lab -t 100 -a code -L","test-cov-html":"lab -r html -o coverage.html -a code","test-debug":"lab -a code","toc":"hapitoc && node docs/check-errors-list.js","version":"npm run toc && git add API.md README.md"},"version":"14.3.1"};},8613:function(module,__unusedexports,__webpack_require__){"use strict";const toMfsPath=__webpack_require__(278);function toSources(context,args,defaultOptions,callback){args=args.slice();const options=Object.assign({},defaultOptions,args.filter(arg=>typeof arg==='object').pop()||{});if(Array.isArray(args[0])){args=args[0];}const sources=args.filter(arg=>typeof arg==='string').map(source=>source.trim());toMfsPath(context,sources,(err,sources)=>{callback(err,{sources,options});});}module.exports=toSources;},8618:function(module,__unusedexports,__webpack_require__){"use strict";const Heap=__webpack_require__(5062);const distance=__webpack_require__(3918);const debug=__webpack_require__(746);const utils=__webpack_require__(2869);const log=debug('libp2p:dht:peer-queue');class PeerQueue{static fromPeerId(id,callback){utils.convertPeerId(id,(err,key)=>{if(err){return callback(err);}callback(null,new PeerQueue(key));});}static fromKey(key,callback){utils.convertBuffer(key,(err,key)=>{if(err){return callback(err);}callback(null,new PeerQueue(key));});}constructor(from){log('create: %b',from);this.from=from;this.heap=new Heap(utils.xorCompare);}enqueue(id,callback){log('enqueue %s',id.toB58String());utils.convertPeerId(id,(err,key)=>{if(err){return callback(err);}const el={id:id,distance:distance(this.from,key)};this.heap.push(el);callback();});}dequeue(){const el=this.heap.pop();log('dequeue %s',el.id.toB58String());return el.id;}get length(){return this.heap.size();}}module.exports=PeerQueue;},8638:function(module,__unusedexports,__webpack_require__){const ethUtil=__webpack_require__(4784);const rlp=__webpack_require__(6585);const Buffer=__webpack_require__(7572).Buffer;var Account=module.exports=function(data){var fields=[{name:'nonce',default:Buffer.alloc(0)},{name:'balance',default:Buffer.alloc(0)},{name:'stateRoot',length:32,default:ethUtil.SHA3_RLP},{name:'codeHash',length:32,default:ethUtil.SHA3_NULL}];ethUtil.defineProperties(this,fields,data);};Account.prototype.serialize=function(){return rlp.encode(this.raw);};Account.prototype.isContract=function(){return this.codeHash.toString('hex')!==ethUtil.SHA3_NULL_S;};Account.prototype.getCode=function(state,cb){if(!this.isContract()){cb(null,Buffer.alloc(0));return;}state.getRaw(this.codeHash,cb);};Account.prototype.setCode=function(trie,code,cb){var self=this;this.codeHash=ethUtil.sha3(code);if(this.codeHash.toString('hex')===ethUtil.SHA3_NULL_S){cb(null,Buffer.alloc(0));return;}trie.putRaw(this.codeHash,code,function(err){cb(err,self.codeHash);});};Account.prototype.getStorage=function(trie,key,cb){var t=trie.copy();t.root=this.stateRoot;t.get(key,cb);};Account.prototype.setStorage=function(trie,key,val,cb){var self=this;var t=trie.copy();t.root=self.stateRoot;t.put(key,val,function(err){if(err)return cb();self.stateRoot=t.root;cb();});};Account.prototype.isEmpty=function(){return this.balance.toString('hex')===''&&this.nonce.toString('hex')===''&&this.stateRoot.toString('hex')===ethUtil.SHA3_RLP_S&&this.codeHash.toString('hex')===ethUtil.SHA3_NULL_S;};},8643:function(module){function prop(object,name,f){Object.defineProperty(object,name,{configurable:true,enumerable:true,get:function(){let value=f.call(this);this[name]=value;return value;},set:function(value){Object.defineProperty(this,name,{configurable:true,enumerable:true,value:value,writable:true});}});}function value(f){let value;return function(){if(value!==undefined)return value;value=f();return value;};}module.exports={prop,value};},8650:function(module){(function(name,context,definition){if(true&&module.exports)module.exports=definition();else context[name]=definition();})('prr',this,function(){var setProperty=typeof Object.defineProperty=='function'?function(obj,key,options){Object.defineProperty(obj,key,options);return obj;}:function(obj,key,options){obj[key]=options.value;return obj;},makeOptions=function(value,options){var oo=typeof options=='object',os=!oo&&typeof options=='string',op=function(p){return oo?!!options[p]:os?options.indexOf(p[0])>-1:false;};return{enumerable:op('enumerable'),configurable:op('configurable'),writable:op('writable'),value:value};},prr=function(obj,key,value,options){var k;options=makeOptions(value,options);if(typeof key=='object'){for(k in key){if(Object.hasOwnProperty.call(key,k)){options.value=key[k];setProperty(obj,k,options);}}return obj;}return setProperty(obj,key,options);};return prr;});},8668:function(module,__unusedexports,__webpack_require__){"use strict";const utils=__webpack_require__(2869);module.exports=dht=>{const log=utils.logger(dht.peerInfo.id,'rpc:ping');return function ping(peer,msg,callback){log('from %s',peer.id.toB58String());callback(null,msg);};};},8671:function(module){module.exports=function(max){if(!max)throw Error('hashlru must have a max value, of type number, greater than 0');var size=0,cache=Object.create(null),_cache=Object.create(null);function update(key,value){cache[key]=value;size++;if(size>=max){size=0;_cache=cache;cache=Object.create(null);}}return{has:function(key){return cache[key]!==undefined||_cache[key]!==undefined;},remove:function(key){if(cache[key]!==undefined)cache[key]=undefined;if(_cache[key]!==undefined)_cache[key]=undefined;},get:function(key){var v=cache[key];if(v!==undefined)return v;if((v=_cache[key])!==undefined){update(key,v);return v;}},set:function(key,value){if(cache[key]!==undefined)cache[key]=value;else update(key,value);},clear:function(){cache=Object.create(null);_cache=Object.create(null);}};};},8678:function(module,__unusedexports,__webpack_require__){"use strict";const pull=__webpack_require__(418);const debug=__webpack_require__(746);const PeerInfo=__webpack_require__(9265);const PeerId=__webpack_require__(1832);const EE=__webpack_require__(4859).EventEmitter;const once=__webpack_require__(7957);const utilsFactory=__webpack_require__(6496);const StreamHandler=__webpack_require__(9511);const proto=__webpack_require__(5546).CircuitRelay;const multiaddr=__webpack_require__(5920);const series=__webpack_require__(7644);const waterfall=__webpack_require__(4265);const multicodec=__webpack_require__(9275);const log=debug('libp2p:circuit:relay');log.err=debug('libp2p:circuit:error:relay');class Hop extends EE{constructor(swarm,options){super();this.swarm=swarm;this.peerInfo=this.swarm._peerInfo;this.utils=utilsFactory(swarm);this.config=options||{active:false,enabled:false};this.active=this.config.active;}handle(message,sh){if(!this.config.enabled){this.utils.writeResponse(sh,proto.Status.HOP_CANT_SPEAK_RELAY);return sh.close();}if(message.type===proto.Type.CAN_HOP){this.utils.writeResponse(sh,proto.Status.SUCCESS);return sh.close();}let srcPeerId=null;let dstPeerId=null;try{srcPeerId=PeerId.createFromBytes(message.srcPeer.id).toB58String();dstPeerId=PeerId.createFromBytes(message.dstPeer.id).toB58String();}catch(err){log.err(err);if(!srcPeerId){this.utils.writeResponse(sh,proto.Status.HOP_SRC_MULTIADDR_INVALID);return sh.close();}if(!dstPeerId){this.utils.writeResponse(sh,proto.Status.HOP_DST_MULTIADDR_INVALID);return sh.close();}}if(srcPeerId===dstPeerId){this.utils.writeResponse(sh,proto.Status.HOP_CANT_RELAY_TO_SELF);return sh.close();}if(!message.dstPeer.addrs.length){const addr=multiaddr(`/p2p-circuit/ipfs/${dstPeerId}`).buffer;message.dstPeer.addrs.push(addr);}log(`trying to establish a circuit: ${srcPeerId} <-> ${dstPeerId}`);const noPeer=()=>{this.utils.writeResponse(sh,proto.Status.HOP_NO_CONN_TO_DST);return sh.close();};const isConnected=cb=>{let dstPeer;try{dstPeer=this.swarm._peerBook.get(dstPeerId);if(!dstPeer.isConnected()&&!this.active){const err=new Error(`No Connection to peer ${dstPeerId}`);noPeer(err);return cb(err);}}catch(err){if(!this.active){noPeer(err);return cb(err);}}cb();};series([cb=>this.utils.validateAddrs(message,sh,proto.Type.HOP,cb),cb=>isConnected(cb),cb=>this._circuit(sh,message,cb)],err=>{if(err){log.err(err);sh.close();return setImmediate(()=>this.emit('circuit:error',err));}setImmediate(()=>this.emit('circuit:success'));});}_connectToStop(peer,srcSh,callback){this._dialPeer(peer,(err,dstConn)=>{if(err){this.utils.writeResponse(srcSh,proto.Status.HOP_CANT_DIAL_DST);log.err(err);return callback(err);}return this.utils.writeResponse(srcSh,proto.Status.SUCCESS,err=>{if(err){log.err(err);return callback(err);}return callback(null,dstConn);});});}_negotiateStop(dstSh,srcSh,message,callback){const stopMsg=Object.assign({},message,{type:proto.Type.STOP});dstSh.write(proto.encode(stopMsg),err=>{if(err){this.utils.writeResponse(srcSh,proto.Status.HOP_CANT_OPEN_DST_STREAM);log.err(err);return callback(err);}dstSh.read((err,msg)=>{if(err){log.err(err);return callback(err);}const message=proto.decode(msg);if(message.code!==proto.Status.SUCCESS){return callback(new Error(`Unable to create circuit!`));}return callback(null,msg);});});}_circuit(srcSh,message,callback){let dstSh=null;waterfall([cb=>this._connectToStop(message.dstPeer,srcSh,cb),(_dstConn,cb)=>{dstSh=new StreamHandler(_dstConn);this._negotiateStop(dstSh,srcSh,message,cb);}],err=>{if(err){if(srcSh){srcSh.close();}if(dstSh){dstSh.close();}return callback(err);}const src=srcSh.rest();const dst=dstSh.rest();const srcIdStr=PeerId.createFromBytes(message.srcPeer.id).toB58String();const dstIdStr=PeerId.createFromBytes(message.dstPeer.id).toB58String();pull(src,dst,src);log(`circuit ${srcIdStr} <-> ${dstIdStr} established`);callback();});}_dialPeer(dstPeer,callback){const peerInfo=new PeerInfo(PeerId.createFromBytes(dstPeer.id));dstPeer.addrs.forEach(a=>peerInfo.multiaddrs.add(a));this.swarm.dial(peerInfo,multicodec.relay,once((err,conn)=>{if(err){log.err(err);return callback(err);}callback(null,conn);}));}}module.exports=Hop;},8689:function(module,__unusedexports,__webpack_require__){"use strict";const bs58=__webpack_require__(4967);const multihashing=__webpack_require__(9424);module.exports=(keysProtobuf,randomBytes,crypto)=>{crypto=crypto||__webpack_require__(7491)(randomBytes);class Secp256k1PublicKey{constructor(key){crypto.validatePublicKey(key);this._key=key;}verify(data,sig,callback){ensure(callback);crypto.hashAndVerify(this._key,sig,data,callback);}marshal(){return crypto.compressPublicKey(this._key);}get bytes(){return keysProtobuf.PublicKey.encode({Type:keysProtobuf.KeyType.Secp256k1,Data:this.marshal()});}equals(key){return this.bytes.equals(key.bytes);}hash(callback){ensure(callback);multihashing(this.bytes,'sha2-256',callback);}}class Secp256k1PrivateKey{constructor(key,publicKey){this._key=key;this._publicKey=publicKey||crypto.computePublicKey(key);crypto.validatePrivateKey(this._key);crypto.validatePublicKey(this._publicKey);}sign(message,callback){ensure(callback);crypto.hashAndSign(this._key,message,callback);}get public(){return new Secp256k1PublicKey(this._publicKey);}marshal(){return this._key;}get bytes(){return keysProtobuf.PrivateKey.encode({Type:keysProtobuf.KeyType.Secp256k1,Data:this.marshal()});}equals(key){return this.bytes.equals(key.bytes);}hash(callback){ensure(callback);multihashing(this.bytes,'sha2-256',callback);}id(callback){this.public.hash((err,hash)=>{if(err){return callback(err);}callback(null,bs58.encode(hash));});}}function unmarshalSecp256k1PrivateKey(bytes,callback){callback(null,new Secp256k1PrivateKey(bytes),null);}function unmarshalSecp256k1PublicKey(bytes){return new Secp256k1PublicKey(bytes);}function generateKeyPair(_bits,callback){if(callback===undefined&&typeof _bits==='function'){callback=_bits;}ensure(callback);crypto.generateKey((err,privateKeyBytes)=>{if(err){return callback(err);}let privkey;try{privkey=new Secp256k1PrivateKey(privateKeyBytes);}catch(err){return callback(err);}callback(null,privkey);});}function ensure(callback){if(typeof callback!=='function'){throw new Error('callback is required');}}return{Secp256k1PublicKey,Secp256k1PrivateKey,unmarshalSecp256k1PrivateKey,unmarshalSecp256k1PublicKey,generateKeyPair};};},8690:function(module,__unusedexports,__webpack_require__){"use strict";const{DAGNode}=__webpack_require__(7421);const waterfall=__webpack_require__(4265);const whilst=__webpack_require__(294);const Bucket=__webpack_require__(3915);const DirSharded=__webpack_require__(2327);const log=__webpack_require__(746)('ipfs:mfs:core:utils:hamt-utils');const UnixFS=__webpack_require__(7959);const updateHamtDirectory=(context,links,bucket,options,callback)=>{waterfall([cb=>{const data=Buffer.from(bucket._children.bitField().reverse());const dir=new UnixFS('hamt-sharded-directory',data);dir.fanout=bucket.tableSize();dir.hashType=DirSharded.hashFn.code;DAGNode.create(dir.marshal(),links,cb);},(parent,done)=>{context.ipld.put(parent,{version:options.cidVersion,format:options.codec,hashAlg:options.hashAlg,hashOnly:!options.flush},(error,cid)=>done(error,{node:parent,cid}));}],callback);};const recreateHamtLevel=(links,rootBucket,parentBucket,positionAtParent,callback)=>{const bucket=new Bucket({hashFn:DirSharded.hashFn,hash:parentBucket?parentBucket._options.hash:undefined},parentBucket,positionAtParent);if(parentBucket){parentBucket._putObjectAt(positionAtParent,bucket);}addLinksToHamtBucket(links,bucket,rootBucket,callback);};const addLinksToHamtBucket=(links,bucket,rootBucket,callback)=>{Promise.all(links.map(link=>{if(link.name.length===2){const pos=parseInt(link.name,16);bucket._putObjectAt(pos,new Bucket({hashFn:DirSharded.hashFn},bucket,pos));return Promise.resolve();}return(rootBucket||bucket).put(link.name.substring(2),true);})).catch(err=>{callback(err);callback=null;}).then(()=>callback&&callback(null,bucket));};const toPrefix=position=>{return position.toString('16').toUpperCase().padStart(2,'0').substring(0,2);};const generatePath=(context,fileName,rootNode,callback)=>{recreateHamtLevel(rootNode.links,null,null,null,async(err,rootBucket)=>{if(err){return callback(err);}const position=await rootBucket._findNewBucketAndPos(fileName);let path=[{bucket:position.bucket,prefix:toPrefix(position.pos)}];let currentBucket=position.bucket;while(currentBucket!==rootBucket){path.push({bucket:currentBucket,prefix:toPrefix(currentBucket._posAtParent)});currentBucket=currentBucket._parent;}path[path.length-1].node=rootNode;let index=path.length;whilst(()=>index>0,next=>{index--;const segment=path[index];const link=segment.node.links.filter(link=>link.name.substring(0,2)===segment.prefix).pop();if(!link){log(`Link ${segment.prefix}${fileName} will be added`);return next(null,path);}if(link.name===`${segment.prefix}${fileName}`){log(`Link ${segment.prefix}${fileName} will be replaced`);return next(null,path);}log(`Found subshard ${segment.prefix}`);context.ipld.get(link.cid,(err,result)=>{if(err){return next(err);}if(!path[index-1]){log(`Loaded new subshard ${segment.prefix}`);const node=result.value;return recreateHamtLevel(node.links,rootBucket,segment.bucket,parseInt(segment.prefix,16),async(err,bucket)=>{if(err){return next(err);}const position=await rootBucket._findNewBucketAndPos(fileName);index++;path.unshift({bucket:position.bucket,prefix:toPrefix(position.pos),node:node});next();});}const nextSegment=path[index-1];addLinksToHamtBucket(result.value.links,nextSegment.bucket,rootBucket,error=>{nextSegment.node=result.value;next(error);});});},async(err,path)=>{await rootBucket.put(fileName,true);callback(err,{rootBucket,path});});});};module.exports={generatePath,updateHamtDirectory,recreateHamtLevel,addLinksToHamtBucket,toPrefix};},8697:function(module,__unusedexports,__webpack_require__){var assocIndexOf=__webpack_require__(4292);function listCacheGet(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?undefined:data[index][1];}module.exports=listCacheGet;},8721:function(module,exports,__webpack_require__){var url=__webpack_require__(6990);var parser=__webpack_require__(3837);var Manager=__webpack_require__(8602);var debug=__webpack_require__(9771)('socket.io-client');module.exports=exports=lookup;var cache=exports.managers={};function lookup(uri,opts){if(typeof uri==='object'){opts=uri;uri=undefined;}opts=opts||{};var parsed=url(uri);var source=parsed.source;var id=parsed.id;var path=parsed.path;var sameNamespace=cache[id]&&path in cache[id].nsps;var newConnection=opts.forceNew||opts['force new connection']||false===opts.multiplex||sameNamespace;var io;if(newConnection){debug('ignoring socket cache for %s',source);io=Manager(source,opts);}else{if(!cache[id]){debug('new io instance for %s',source);cache[id]=Manager(source,opts);}io=cache[id];}if(parsed.query&&!opts.query){opts.query=parsed.query;}return io.socket(parsed.path,opts);}exports.protocol=parser.protocol;exports.connect=lookup;exports.Manager=__webpack_require__(8602);exports.Socket=__webpack_require__(7868);},8732:function(module){"use strict";module.exports=`
message RPC {
  repeated SubOpts subscriptions = 1;
  repeated Message msgs = 2;

  message SubOpts {
    optional bool subscribe = 1; // subscribe or unsubcribe
    optional string topicCID = 2;
  }

  message Message {
    optional bytes from = 1;
    optional bytes data = 2;
    optional bytes seqno = 3;
    repeated string topicIDs = 4; 
  }
}`;},8736:function(module,__unusedexports,__webpack_require__){const embed=__webpack_require__(5459);const p2ms=__webpack_require__(6970);const p2pk=__webpack_require__(1460);const p2pkh=__webpack_require__(2371);const p2sh=__webpack_require__(8872);const p2wpkh=__webpack_require__(9865);const p2wsh=__webpack_require__(2427);module.exports={embed,p2ms,p2pk,p2pkh,p2sh,p2wpkh,p2wsh};},8748:function(module,__unusedexports,__webpack_require__){var crypto=__webpack_require__(2984);if(crypto.randomFillSync){var buffers={};module.exports=function(bytes){var buffer=buffers[bytes];if(!buffer){buffer=Buffer.allocUnsafe(bytes);if(bytes<=255)buffers[bytes]=buffer;}return crypto.randomFillSync(buffer);};}else{module.exports=crypto.randomBytes;}},8749:function(module,__unusedexports,__webpack_require__){var forge=__webpack_require__(7938);__webpack_require__(1214);__webpack_require__(321);__webpack_require__(3979);var pkcs1=module.exports=forge.pkcs1=forge.pkcs1||{};pkcs1.encode_rsa_oaep=function(key,message,options){var label;var seed;var md;var mgf1Md;if(typeof options==='string'){label=options;seed=arguments[3]||undefined;md=arguments[4]||undefined;}else if(options){label=options.label||undefined;seed=options.seed||undefined;md=options.md||undefined;if(options.mgf1&&options.mgf1.md){mgf1Md=options.mgf1.md;}}if(!md){md=forge.md.sha1.create();}else{md.start();}if(!mgf1Md){mgf1Md=md;}var keyLength=Math.ceil(key.n.bitLength()/8);var maxLength=keyLength-2*md.digestLength-2;if(message.length>maxLength){var error=new Error('RSAES-OAEP input message length is too long.');error.length=message.length;error.maxLength=maxLength;throw error;}if(!label){label='';}md.update(label,'raw');var lHash=md.digest();var PS='';var PS_length=maxLength-message.length;for(var i=0;i<PS_length;i++){PS+='\x00';}var DB=lHash.getBytes()+PS+'\x01'+message;if(!seed){seed=forge.random.getBytes(md.digestLength);}else if(seed.length!==md.digestLength){var error=new Error('Invalid RSAES-OAEP seed. The seed length must '+'match the digest length.');error.seedLength=seed.length;error.digestLength=md.digestLength;throw error;}var dbMask=rsa_mgf1(seed,keyLength-md.digestLength-1,mgf1Md);var maskedDB=forge.util.xorBytes(DB,dbMask,DB.length);var seedMask=rsa_mgf1(maskedDB,md.digestLength,mgf1Md);var maskedSeed=forge.util.xorBytes(seed,seedMask,seed.length);return'\x00'+maskedSeed+maskedDB;};pkcs1.decode_rsa_oaep=function(key,em,options){var label;var md;var mgf1Md;if(typeof options==='string'){label=options;md=arguments[3]||undefined;}else if(options){label=options.label||undefined;md=options.md||undefined;if(options.mgf1&&options.mgf1.md){mgf1Md=options.mgf1.md;}}var keyLength=Math.ceil(key.n.bitLength()/8);if(em.length!==keyLength){var error=new Error('RSAES-OAEP encoded message length is invalid.');error.length=em.length;error.expectedLength=keyLength;throw error;}if(md===undefined){md=forge.md.sha1.create();}else{md.start();}if(!mgf1Md){mgf1Md=md;}if(keyLength<2*md.digestLength+2){throw new Error('RSAES-OAEP key is too short for the hash function.');}if(!label){label='';}md.update(label,'raw');var lHash=md.digest().getBytes();var y=em.charAt(0);var maskedSeed=em.substring(1,md.digestLength+1);var maskedDB=em.substring(1+md.digestLength);var seedMask=rsa_mgf1(maskedDB,md.digestLength,mgf1Md);var seed=forge.util.xorBytes(maskedSeed,seedMask,maskedSeed.length);var dbMask=rsa_mgf1(seed,keyLength-md.digestLength-1,mgf1Md);var db=forge.util.xorBytes(maskedDB,dbMask,maskedDB.length);var lHashPrime=db.substring(0,md.digestLength);var error=y!=='\x00';for(var i=0;i<md.digestLength;++i){error|=lHash.charAt(i)!==lHashPrime.charAt(i);}var in_ps=1;var index=md.digestLength;for(var j=md.digestLength;j<db.length;j++){var code=db.charCodeAt(j);var is_0=code&0x1^0x1;var error_mask=in_ps?0xfffe:0x0000;error|=code&error_mask;in_ps=in_ps&is_0;index+=in_ps;}if(error||db.charCodeAt(index)!==0x1){throw new Error('Invalid RSAES-OAEP padding.');}return db.substring(index+1);};function rsa_mgf1(seed,maskLength,hash){if(!hash){hash=forge.md.sha1.create();}var t='';var count=Math.ceil(maskLength/hash.digestLength);for(var i=0;i<count;++i){var c=String.fromCharCode(i>>24&0xFF,i>>16&0xFF,i>>8&0xFF,i&0xFF);hash.start();hash.update(seed+c);t+=hash.digest().getBytes();}return t.substring(0,maskLength);}},8757:function(__unusedmodule,exports,__webpack_require__){"use strict";const bs58=__webpack_require__(4967);const cs=__webpack_require__(7419);exports.names=cs.names;exports.codes=cs.codes;exports.defaultLengths=cs.defaultLengths;const varint=__webpack_require__(2572);exports.toHexString=function toHexString(hash){if(!Buffer.isBuffer(hash)){throw new Error('must be passed a buffer');}return hash.toString('hex');};exports.fromHexString=function fromHexString(hash){return Buffer.from(hash,'hex');};exports.toB58String=function toB58String(hash){if(!Buffer.isBuffer(hash)){throw new Error('must be passed a buffer');}return bs58.encode(hash);};exports.fromB58String=function fromB58String(hash){let encoded=hash;if(Buffer.isBuffer(hash)){encoded=hash.toString();}return Buffer.from(bs58.decode(encoded));};exports.decode=function decode(buf){if(!Buffer.isBuffer(buf)){throw new Error('multihash must be a Buffer');}if(buf.length<3){throw new Error('multihash too short. must be > 3 bytes.');}let code=varint.decode(buf);if(!exports.isValidCode(code)){throw new Error(`multihash unknown function code: 0x${code.toString(16)}`);}buf=buf.slice(varint.decode.bytes);let len=varint.decode(buf);if(len<1){throw new Error(`multihash invalid length: 0x${len.toString(16)}`);}buf=buf.slice(varint.decode.bytes);if(buf.length!==len){throw new Error(`multihash length inconsistent: 0x${buf.toString('hex')}`);}return{code:code,name:cs.codes[code],length:len,digest:buf};};exports.encode=function encode(digest,code,length){if(!digest||!code){throw new Error('multihash encode requires at least two args: digest, code');}const hashfn=exports.coerceCode(code);if(!Buffer.isBuffer(digest)){throw new Error('digest should be a Buffer');}if(length==null){length=digest.length;}if(length&&digest.length!==length){throw new Error('digest length should be equal to specified length.');}return Buffer.concat([Buffer.from(varint.encode(hashfn)),Buffer.from(varint.encode(length)),digest]);};exports.coerceCode=function coerceCode(name){let code=name;if(typeof name==='string'){if(!cs.names[name]){throw new Error(`Unrecognized hash function named: ${name}`);}code=cs.names[name];}if(typeof code!=='number'){throw new Error(`Hash function code should be a number. Got: ${code}`);}if(!cs.codes[code]&&!exports.isAppCode(code)){throw new Error(`Unrecognized function code: ${code}`);}return code;};exports.isAppCode=function appCode(code){return code>0&&code<0x10;};exports.isValidCode=function validCode(code){if(exports.isAppCode(code)){return true;}if(cs.codes[code]){return true;}return false;};function validate(multihash){exports.decode(multihash);}exports.validate=validate;exports.prefix=function prefix(multihash){validate(multihash);return multihash.slice(0,2);};},8759:function(__unusedmodule,exports,__webpack_require__){"use strict";exports.resolver=__webpack_require__(1525);exports.util=__webpack_require__(787);},8761:function(module,__unusedexports,__webpack_require__){module.exports=realpath;realpath.realpath=realpath;realpath.sync=realpathSync;realpath.realpathSync=realpathSync;realpath.monkeypatch=monkeypatch;realpath.unmonkeypatch=unmonkeypatch;var fs=__webpack_require__(662);var origRealpath=fs.realpath;var origRealpathSync=fs.realpathSync;var version=process.version;var ok=/^v[0-5]\./.test(version);var old=__webpack_require__(3499);function newError(er){return er&&er.syscall==='realpath'&&(er.code==='ELOOP'||er.code==='ENOMEM'||er.code==='ENAMETOOLONG');}function realpath(p,cache,cb){if(ok){return origRealpath(p,cache,cb);}if(typeof cache==='function'){cb=cache;cache=null;}origRealpath(p,cache,function(er,result){if(newError(er)){old.realpath(p,cache,cb);}else{cb(er,result);}});}function realpathSync(p,cache){if(ok){return origRealpathSync(p,cache);}try{return origRealpathSync(p,cache);}catch(er){if(newError(er)){return old.realpathSync(p,cache);}else{throw er;}}}function monkeypatch(){fs.realpath=realpath;fs.realpathSync=realpathSync;}function unmonkeypatch(){fs.realpath=origRealpath;fs.realpathSync=origRealpathSync;}},8768:function(module,exports,__webpack_require__){var Stream=__webpack_require__(6886);if(process.env.READABLE_STREAM==='disable'&&Stream){module.exports=Stream;exports=module.exports=Stream.Readable;exports.Readable=Stream.Readable;exports.Writable=Stream.Writable;exports.Duplex=Stream.Duplex;exports.Transform=Stream.Transform;exports.PassThrough=Stream.PassThrough;exports.Stream=Stream;}else{exports=module.exports=__webpack_require__(1590);exports.Stream=Stream||exports;exports.Readable=exports;exports.Writable=__webpack_require__(4266);exports.Duplex=__webpack_require__(6504);exports.Transform=__webpack_require__(5160);exports.PassThrough=__webpack_require__(6730);}},8770:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _doParallelLimit=__webpack_require__(95);var _doParallelLimit2=_interopRequireDefault(_doParallelLimit);var _map=__webpack_require__(8409);var _map2=_interopRequireDefault(_map);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}exports.default=(0,_doParallelLimit2.default)(_map2.default);module.exports=exports['default'];},8778:function(module){"use strict";function posix(path){return path.charAt(0)==='/';}function win32(path){var splitDeviceRe=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/;var result=splitDeviceRe.exec(path);var device=result[1]||'';var isUnc=Boolean(device&&device.charAt(1)!==':');return Boolean(result[2]||isUnc);}module.exports=process.platform==='win32'?win32:posix;module.exports.posix=posix;module.exports.win32=win32;},8781:function(module,__unusedexports,__webpack_require__){const typeforce=__webpack_require__(2809);const UINT31_MAX=Math.pow(2,31)-1;function UInt31(value){return typeforce.UInt32(value)&&value<=UINT31_MAX;}function BIP32Path(value){return typeforce.String(value)&&value.match(/^(m\/)?(\d+'?\/)*\d+'?$/);}BIP32Path.toJSON=function(){return'BIP32 derivation path';};const SATOSHI_MAX=21*1e14;function Satoshi(value){return typeforce.UInt53(value)&&value<=SATOSHI_MAX;}const ECPoint=typeforce.quacksLike('Point');const Network=typeforce.compile({messagePrefix:typeforce.oneOf(typeforce.Buffer,typeforce.String),bip32:{public:typeforce.UInt32,private:typeforce.UInt32},pubKeyHash:typeforce.UInt8,scriptHash:typeforce.UInt8,wif:typeforce.UInt8});const types={BIP32Path:BIP32Path,Buffer256bit:typeforce.BufferN(32),ECPoint:ECPoint,Hash160bit:typeforce.BufferN(20),Hash256bit:typeforce.BufferN(32),Network:Network,Satoshi:Satoshi,UInt31:UInt31};for(var typeName in typeforce){types[typeName]=typeforce[typeName];}module.exports=types;},8797:function(module){"use strict";var nextTick=nextTickArgs;process.nextTick(upgrade,42);module.exports=thunky;function thunky(fn){var state=run;return thunk;function thunk(callback){state(callback||noop);}function run(callback){var stack=[callback];state=wait;fn(done);function wait(callback){stack.push(callback);}function done(err){var args=arguments;state=isError(err)?run:finished;while(stack.length)finished(stack.shift());function finished(callback){nextTick(apply,callback,args);}}}}function isError(err){return Object.prototype.toString.call(err)==='[object Error]';}function noop(){}function apply(callback,args){callback.apply(null,args);}function upgrade(val){if(val===42)nextTick=process.nextTick;}function nextTickArgs(fn,a,b){process.nextTick(function(){fn(a,b);});}},8812:function(module,__unusedexports,__webpack_require__){const Buffer=__webpack_require__(7572).Buffer;const bscript=__webpack_require__(5099);const types=__webpack_require__(8781);const typeforce=__webpack_require__(2809);const OPS=__webpack_require__(9710);const HEADER=Buffer.from('aa21a9ed','hex');function check(script){const buffer=bscript.compile(script);return buffer.length>37&&buffer[0]===OPS.OP_RETURN&&buffer[1]===0x24&&buffer.slice(2,6).equals(HEADER);}check.toJSON=function(){return'Witness commitment output';};function encode(commitment){typeforce(types.Hash256bit,commitment);const buffer=Buffer.allocUnsafe(36);HEADER.copy(buffer,0);commitment.copy(buffer,4);return bscript.compile([OPS.OP_RETURN,buffer]);}function decode(buffer){typeforce(check,buffer);return bscript.decompile(buffer)[1].slice(4,36);}module.exports={check:check,decode:decode,encode:encode};},8816:function(module,__unusedexports,__webpack_require__){var forge=__webpack_require__(7938);__webpack_require__(4367);module.exports=forge.mgf=forge.mgf||{};forge.mgf.mgf1=forge.mgf1;},8846:function(module){var byteToHex=[];for(var i=0;i<256;++i){byteToHex[i]=(i+0x100).toString(16).substr(1);}function bytesToUuid(buf,offset){var i=offset||0;var bth=byteToHex;return[bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],'-',bth[buf[i++]],bth[buf[i++]],'-',bth[buf[i++]],bth[buf[i++]],'-',bth[buf[i++]],bth[buf[i++]],'-',bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],bth[buf[i++]]].join('');}module.exports=bytesToUuid;},8851:function(module){var toString={}.toString;module.exports=Array.isArray||function(arr){return toString.call(arr)=='[object Array]';};},8859:function(module){module.exports=require("tty");},8860:function(module,__unusedexports,__webpack_require__){"use strict";const readPullStream=__webpack_require__(4321);const toStream=__webpack_require__(864);module.exports=context=>{return function mfsReadReadableStream(path,options={}){return toStream.source(readPullStream(context)(path,options));};};},8872:function(module,__unusedexports,__webpack_require__){const lazy=__webpack_require__(8643);const typef=__webpack_require__(2809);const OPS=__webpack_require__(9710);const bcrypto=__webpack_require__(5475);const bscript=__webpack_require__(5099);const BITCOIN_NETWORK=__webpack_require__(1215).bitcoin;const bs58check=__webpack_require__(6614);function stacksEqual(a,b){if(a.length!==b.length)return false;return a.every(function(x,i){return x.equals(b[i]);});}function p2sh(a,opts){if(!a.address&&!a.hash&&!a.output&&!a.redeem&&!a.input)throw new TypeError('Not enough data');opts=Object.assign({validate:true},opts||{});typef({network:typef.maybe(typef.Object),address:typef.maybe(typef.String),hash:typef.maybe(typef.BufferN(20)),output:typef.maybe(typef.BufferN(23)),redeem:typef.maybe({network:typef.maybe(typef.Object),output:typef.maybe(typef.Buffer),input:typef.maybe(typef.Buffer),witness:typef.maybe(typef.arrayOf(typef.Buffer))}),input:typef.maybe(typef.Buffer),witness:typef.maybe(typef.arrayOf(typef.Buffer))},a);let network=a.network;if(!network){network=a.redeem&&a.redeem.network||BITCOIN_NETWORK;}const o={network};const _address=lazy.value(function(){const payload=bs58check.decode(a.address);const version=payload.readUInt8(0);const hash=payload.slice(1);return{version,hash};});const _chunks=lazy.value(function(){return bscript.decompile(a.input);});const _redeem=lazy.value(function(){const chunks=_chunks();return{network,output:chunks[chunks.length-1],input:bscript.compile(chunks.slice(0,-1)),witness:a.witness||[]};});lazy.prop(o,'address',function(){if(!o.hash)return;const payload=Buffer.allocUnsafe(21);payload.writeUInt8(network.scriptHash,0);o.hash.copy(payload,1);return bs58check.encode(payload);});lazy.prop(o,'hash',function(){if(a.output)return a.output.slice(2,22);if(a.address)return _address().hash;if(o.redeem&&o.redeem.output)return bcrypto.hash160(o.redeem.output);});lazy.prop(o,'output',function(){if(!o.hash)return;return bscript.compile([OPS.OP_HASH160,o.hash,OPS.OP_EQUAL]);});lazy.prop(o,'redeem',function(){if(!a.input)return;return _redeem();});lazy.prop(o,'input',function(){if(!a.redeem||!a.redeem.input||!a.redeem.output)return;return bscript.compile([].concat(bscript.decompile(a.redeem.input),a.redeem.output));});lazy.prop(o,'witness',function(){if(o.redeem&&o.redeem.witness)return o.redeem.witness;if(o.input)return[];});if(opts.validate){let hash;if(a.address){if(_address().version!==network.scriptHash)throw new TypeError('Invalid version or Network mismatch');if(_address().hash.length!==20)throw new TypeError('Invalid address');hash=_address().hash;}if(a.hash){if(hash&&!hash.equals(a.hash))throw new TypeError('Hash mismatch');else hash=a.hash;}if(a.output){if(a.output.length!==23||a.output[0]!==OPS.OP_HASH160||a.output[1]!==0x14||a.output[22]!==OPS.OP_EQUAL)throw new TypeError('Output is invalid');const hash2=a.output.slice(2,22);if(hash&&!hash.equals(hash2))throw new TypeError('Hash mismatch');else hash=hash2;}const checkRedeem=function(redeem){if(redeem.output){const decompile=bscript.decompile(redeem.output);if(!decompile||decompile.length<1)throw new TypeError('Redeem.output too short');const hash2=bcrypto.hash160(redeem.output);if(hash&&!hash.equals(hash2))throw new TypeError('Hash mismatch');else hash=hash2;}if(redeem.input){const hasInput=redeem.input.length>0;const hasWitness=redeem.witness&&redeem.witness.length>0;if(!hasInput&&!hasWitness)throw new TypeError('Empty input');if(hasInput&&hasWitness)throw new TypeError('Input and witness provided');if(hasInput){const richunks=bscript.decompile(redeem.input);if(!bscript.isPushOnly(richunks))throw new TypeError('Non push-only scriptSig');}}};if(a.input){const chunks=_chunks();if(!chunks||chunks.length<1)throw new TypeError('Input too short');if(!Buffer.isBuffer(_redeem().output))throw new TypeError('Input is invalid');checkRedeem(_redeem());}if(a.redeem){if(a.redeem.network&&a.redeem.network!==network)throw new TypeError('Network mismatch');if(a.input){const redeem=_redeem();if(a.redeem.output&&!a.redeem.output.equals(redeem.output))throw new TypeError('Redeem.output mismatch');if(a.redeem.input&&!a.redeem.input.equals(redeem.input))throw new TypeError('Redeem.input mismatch');}checkRedeem(a.redeem);}if(a.witness){if(a.redeem&&a.redeem.witness&&!stacksEqual(a.redeem.witness,a.witness))throw new TypeError('Witness and redeem.witness mismatch');}}return Object.assign(o,a);}module.exports=p2sh;},8877:function(module){function RetryOperation(timeouts,options){if(typeof options==='boolean'){options={forever:options};}this._originalTimeouts=JSON.parse(JSON.stringify(timeouts));this._timeouts=timeouts;this._options=options||{};this._maxRetryTime=options&&options.maxRetryTime||Infinity;this._fn=null;this._errors=[];this._attempts=1;this._operationTimeout=null;this._operationTimeoutCb=null;this._timeout=null;this._operationStart=null;if(this._options.forever){this._cachedTimeouts=this._timeouts.slice(0);}}module.exports=RetryOperation;RetryOperation.prototype.reset=function(){this._attempts=1;this._timeouts=this._originalTimeouts;};RetryOperation.prototype.stop=function(){if(this._timeout){clearTimeout(this._timeout);}this._timeouts=[];this._cachedTimeouts=null;};RetryOperation.prototype.retry=function(err){if(this._timeout){clearTimeout(this._timeout);}if(!err){return false;}var currentTime=new Date().getTime();if(err&&currentTime-this._operationStart>=this._maxRetryTime){this._errors.unshift(new Error('RetryOperation timeout occurred'));return false;}this._errors.push(err);var timeout=this._timeouts.shift();if(timeout===undefined){if(this._cachedTimeouts){this._errors.splice(this._errors.length-1,this._errors.length);this._timeouts=this._cachedTimeouts.slice(0);timeout=this._timeouts.shift();}else{return false;}}var self=this;var timer=setTimeout(function(){self._attempts++;if(self._operationTimeoutCb){self._timeout=setTimeout(function(){self._operationTimeoutCb(self._attempts);},self._operationTimeout);if(self._options.unref){self._timeout.unref();}}self._fn(self._attempts);},timeout);if(this._options.unref){timer.unref();}return true;};RetryOperation.prototype.attempt=function(fn,timeoutOps){this._fn=fn;if(timeoutOps){if(timeoutOps.timeout){this._operationTimeout=timeoutOps.timeout;}if(timeoutOps.cb){this._operationTimeoutCb=timeoutOps.cb;}}var self=this;if(this._operationTimeoutCb){this._timeout=setTimeout(function(){self._operationTimeoutCb();},self._operationTimeout);}this._operationStart=new Date().getTime();this._fn(this._attempts);};RetryOperation.prototype.try=function(fn){console.log('Using RetryOperation.try() is deprecated');this.attempt(fn);};RetryOperation.prototype.start=function(fn){console.log('Using RetryOperation.start() is deprecated');this.attempt(fn);};RetryOperation.prototype.start=RetryOperation.prototype.try;RetryOperation.prototype.errors=function(){return this._errors;};RetryOperation.prototype.attempts=function(){return this._attempts;};RetryOperation.prototype.mainError=function(){if(this._errors.length===0){return null;}var counts={};var mainError=null;var mainErrorCount=0;for(var i=0;i<this._errors.length;i++){var error=this._errors[i];var message=error.message;var count=(counts[message]||0)+1;counts[message]=count;if(count>=mainErrorCount){mainError=error;mainErrorCount=count;}}return mainError;};},8883:function(module,__unusedexports,__webpack_require__){var arrayLikeKeys=__webpack_require__(6438),baseKeys=__webpack_require__(249),isArrayLike=__webpack_require__(4356);function keys(object){return isArrayLike(object)?arrayLikeKeys(object):baseKeys(object);}module.exports=keys;},8885:function(module){"use strict";module.exports=`// An IPFS MerkleDAG Link
message PBLink {

  // multihash of the target object
  optional bytes Hash = 1;

  // utf string name. should be unique per object
  optional string Name = 2;

  // cumulative size of target object
  optional uint64 Tsize = 3;
}

// An IPFS MerkleDAG Node
message PBNode {

  // refs to other objects
  repeated PBLink Links = 2;

  // opaque user data
  optional bytes Data = 1;
}`;},8886:function(module,__unusedexports,__webpack_require__){"use strict";const RFC3986=__webpack_require__(839);const internals={Ip:{cidrs:{ipv4:{required:'\\/(?:'+RFC3986.ipv4Cidr+')',optional:'(?:\\/(?:'+RFC3986.ipv4Cidr+'))?',forbidden:''},ipv6:{required:'\\/'+RFC3986.ipv6Cidr,optional:'(?:\\/'+RFC3986.ipv6Cidr+')?',forbidden:''},ipvfuture:{required:'\\/'+RFC3986.ipv6Cidr,optional:'(?:\\/'+RFC3986.ipv6Cidr+')?',forbidden:''}},versions:{ipv4:RFC3986.IPv4address,ipv6:RFC3986.IPv6address,ipvfuture:RFC3986.IPvFuture}}};internals.Ip.createIpRegex=function(versions,cidr){let regex;for(let i=0;i<versions.length;++i){const version=versions[i];if(!regex){regex='^(?:'+internals.Ip.versions[version]+internals.Ip.cidrs[version][cidr];}else{regex+='|'+internals.Ip.versions[version]+internals.Ip.cidrs[version][cidr];}}return new RegExp(regex+')$');};module.exports=internals.Ip;},8895:function(module){var s=1000;var m=s*60;var h=m*60;var d=h*24;var y=d*365.25;module.exports=function(val,options){options=options||{};var type=typeof val;if(type==='string'&&val.length>0){return parse(val);}else if(type==='number'&&isNaN(val)===false){return options.long?fmtLong(val):fmtShort(val);}throw new Error('val is not a non-empty string or a valid number. val='+JSON.stringify(val));};function parse(str){str=String(str);if(str.length>100){return;}var match=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(str);if(!match){return;}var n=parseFloat(match[1]);var type=(match[2]||'ms').toLowerCase();switch(type){case'years':case'year':case'yrs':case'yr':case'y':return n*y;case'days':case'day':case'd':return n*d;case'hours':case'hour':case'hrs':case'hr':case'h':return n*h;case'minutes':case'minute':case'mins':case'min':case'm':return n*m;case'seconds':case'second':case'secs':case'sec':case's':return n*s;case'milliseconds':case'millisecond':case'msecs':case'msec':case'ms':return n;default:return undefined;}}function fmtShort(ms){if(ms>=d){return Math.round(ms/d)+'d';}if(ms>=h){return Math.round(ms/h)+'h';}if(ms>=m){return Math.round(ms/m)+'m';}if(ms>=s){return Math.round(ms/s)+'s';}return ms+'ms';}function fmtLong(ms){return plural(ms,d,'day')||plural(ms,h,'hour')||plural(ms,m,'minute')||plural(ms,s,'second')||ms+' ms';}function plural(ms,n,name){if(ms<n){return;}if(ms<n*1.5){return Math.floor(ms/n)+' '+name;}return Math.ceil(ms/n)+' '+name+'s';}},8897:function(module,__unusedexports,__webpack_require__){var XMLHttpRequest=__webpack_require__(5999);var Polling=__webpack_require__(6957);var Emitter=__webpack_require__(3649);var inherit=__webpack_require__(1199);var debug=__webpack_require__(3114)('engine.io-client:polling-xhr');module.exports=XHR;module.exports.Request=Request;function empty(){}function XHR(opts){Polling.call(this,opts);this.requestTimeout=opts.requestTimeout;this.extraHeaders=opts.extraHeaders;if(typeof location!=='undefined'){var isSSL='https:'===location.protocol;var port=location.port;if(!port){port=isSSL?443:80;}this.xd=typeof location!=='undefined'&&opts.hostname!==location.hostname||port!==opts.port;this.xs=opts.secure!==isSSL;}}inherit(XHR,Polling);XHR.prototype.supportsBinary=true;XHR.prototype.request=function(opts){opts=opts||{};opts.uri=this.uri();opts.xd=this.xd;opts.xs=this.xs;opts.agent=this.agent||false;opts.supportsBinary=this.supportsBinary;opts.enablesXDR=this.enablesXDR;opts.pfx=this.pfx;opts.key=this.key;opts.passphrase=this.passphrase;opts.cert=this.cert;opts.ca=this.ca;opts.ciphers=this.ciphers;opts.rejectUnauthorized=this.rejectUnauthorized;opts.requestTimeout=this.requestTimeout;opts.extraHeaders=this.extraHeaders;return new Request(opts);};XHR.prototype.doWrite=function(data,fn){var isBinary=typeof data!=='string'&&data!==undefined;var req=this.request({method:'POST',data:data,isBinary:isBinary});var self=this;req.on('success',fn);req.on('error',function(err){self.onError('xhr post error',err);});this.sendXhr=req;};XHR.prototype.doPoll=function(){debug('xhr poll');var req=this.request();var self=this;req.on('data',function(data){self.onData(data);});req.on('error',function(err){self.onError('xhr poll error',err);});this.pollXhr=req;};function Request(opts){this.method=opts.method||'GET';this.uri=opts.uri;this.xd=!!opts.xd;this.xs=!!opts.xs;this.async=false!==opts.async;this.data=undefined!==opts.data?opts.data:null;this.agent=opts.agent;this.isBinary=opts.isBinary;this.supportsBinary=opts.supportsBinary;this.enablesXDR=opts.enablesXDR;this.requestTimeout=opts.requestTimeout;this.pfx=opts.pfx;this.key=opts.key;this.passphrase=opts.passphrase;this.cert=opts.cert;this.ca=opts.ca;this.ciphers=opts.ciphers;this.rejectUnauthorized=opts.rejectUnauthorized;this.extraHeaders=opts.extraHeaders;this.create();}Emitter(Request.prototype);Request.prototype.create=function(){var opts={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};opts.pfx=this.pfx;opts.key=this.key;opts.passphrase=this.passphrase;opts.cert=this.cert;opts.ca=this.ca;opts.ciphers=this.ciphers;opts.rejectUnauthorized=this.rejectUnauthorized;var xhr=this.xhr=new XMLHttpRequest(opts);var self=this;try{debug('xhr open %s: %s',this.method,this.uri);xhr.open(this.method,this.uri,this.async);try{if(this.extraHeaders){xhr.setDisableHeaderCheck&&xhr.setDisableHeaderCheck(true);for(var i in this.extraHeaders){if(this.extraHeaders.hasOwnProperty(i)){xhr.setRequestHeader(i,this.extraHeaders[i]);}}}}catch(e){}if('POST'===this.method){try{if(this.isBinary){xhr.setRequestHeader('Content-type','application/octet-stream');}else{xhr.setRequestHeader('Content-type','text/plain;charset=UTF-8');}}catch(e){}}try{xhr.setRequestHeader('Accept','*/*');}catch(e){}if('withCredentials'in xhr){xhr.withCredentials=true;}if(this.requestTimeout){xhr.timeout=this.requestTimeout;}if(this.hasXDR()){xhr.onload=function(){self.onLoad();};xhr.onerror=function(){self.onError(xhr.responseText);};}else{xhr.onreadystatechange=function(){if(xhr.readyState===2){try{var contentType=xhr.getResponseHeader('Content-Type');if(self.supportsBinary&&contentType==='application/octet-stream'){xhr.responseType='arraybuffer';}}catch(e){}}if(4!==xhr.readyState)return;if(200===xhr.status||1223===xhr.status){self.onLoad();}else{setTimeout(function(){self.onError(xhr.status);},0);}};}debug('xhr data %s',this.data);xhr.send(this.data);}catch(e){setTimeout(function(){self.onError(e);},0);return;}if(typeof document!=='undefined'){this.index=Request.requestsCount++;Request.requests[this.index]=this;}};Request.prototype.onSuccess=function(){this.emit('success');this.cleanup();};Request.prototype.onData=function(data){this.emit('data',data);this.onSuccess();};Request.prototype.onError=function(err){this.emit('error',err);this.cleanup(true);};Request.prototype.cleanup=function(fromError){if('undefined'===typeof this.xhr||null===this.xhr){return;}if(this.hasXDR()){this.xhr.onload=this.xhr.onerror=empty;}else{this.xhr.onreadystatechange=empty;}if(fromError){try{this.xhr.abort();}catch(e){}}if(typeof document!=='undefined'){delete Request.requests[this.index];}this.xhr=null;};Request.prototype.onLoad=function(){var data;try{var contentType;try{contentType=this.xhr.getResponseHeader('Content-Type');}catch(e){}if(contentType==='application/octet-stream'){data=this.xhr.response||this.xhr.responseText;}else{data=this.xhr.responseText;}}catch(e){this.onError(e);}if(null!=data){this.onData(data);}};Request.prototype.hasXDR=function(){return typeof XDomainRequest!=='undefined'&&!this.xs&&this.enablesXDR;};Request.prototype.abort=function(){this.cleanup();};Request.requestsCount=0;Request.requests={};if(typeof document!=='undefined'){if(typeof attachEvent==='function'){attachEvent('onunload',unloadHandler);}else if(typeof addEventListener==='function'){var terminationEvent='onpagehide'in self?'pagehide':'unload';addEventListener(terminationEvent,unloadHandler,false);}}function unloadHandler(){for(var i in Request.requests){if(Request.requests.hasOwnProperty(i)){Request.requests[i].abort();}}}},8898:function(module,__unusedexports,__webpack_require__){var isSymbol=__webpack_require__(5578);var INFINITY=1/0;function toKey(value){if(typeof value=='string'||isSymbol(value)){return value;}var result=value+'';return result=='0'&&1/value==-INFINITY?'-0':result;}module.exports=toKey;},8904:function(module,__unusedexports,__webpack_require__){"use strict";const Limiter=__webpack_require__(1816);const zlib=__webpack_require__(2673);const bufferUtil=__webpack_require__(2811);const{kStatusCode,NOOP}=__webpack_require__(6198);const TRAILER=Buffer.from([0x00,0x00,0xff,0xff]);const EMPTY_BLOCK=Buffer.from([0x00]);const kPerMessageDeflate=Symbol('permessage-deflate');const kTotalLength=Symbol('total-length');const kCallback=Symbol('callback');const kBuffers=Symbol('buffers');const kError=Symbol('error');let zlibLimiter;class PerMessageDeflate{constructor(options,isServer,maxPayload){this._maxPayload=maxPayload|0;this._options=options||{};this._threshold=this._options.threshold!==undefined?this._options.threshold:1024;this._isServer=!!isServer;this._deflate=null;this._inflate=null;this.params=null;if(!zlibLimiter){const concurrency=this._options.concurrencyLimit!==undefined?this._options.concurrencyLimit:10;zlibLimiter=new Limiter({concurrency});}}static get extensionName(){return'permessage-deflate';}offer(){const params={};if(this._options.serverNoContextTakeover){params.server_no_context_takeover=true;}if(this._options.clientNoContextTakeover){params.client_no_context_takeover=true;}if(this._options.serverMaxWindowBits){params.server_max_window_bits=this._options.serverMaxWindowBits;}if(this._options.clientMaxWindowBits){params.client_max_window_bits=this._options.clientMaxWindowBits;}else if(this._options.clientMaxWindowBits==null){params.client_max_window_bits=true;}return params;}accept(configurations){configurations=this.normalizeParams(configurations);this.params=this._isServer?this.acceptAsServer(configurations):this.acceptAsClient(configurations);return this.params;}cleanup(){if(this._inflate){this._inflate.close();this._inflate=null;}if(this._deflate){this._deflate.close();this._deflate=null;}}acceptAsServer(offers){const opts=this._options;const accepted=offers.find(params=>{if(opts.serverNoContextTakeover===false&&params.server_no_context_takeover||params.server_max_window_bits&&(opts.serverMaxWindowBits===false||typeof opts.serverMaxWindowBits==='number'&&opts.serverMaxWindowBits>params.server_max_window_bits)||typeof opts.clientMaxWindowBits==='number'&&!params.client_max_window_bits){return false;}return true;});if(!accepted){throw new Error('None of the extension offers can be accepted');}if(opts.serverNoContextTakeover){accepted.server_no_context_takeover=true;}if(opts.clientNoContextTakeover){accepted.client_no_context_takeover=true;}if(typeof opts.serverMaxWindowBits==='number'){accepted.server_max_window_bits=opts.serverMaxWindowBits;}if(typeof opts.clientMaxWindowBits==='number'){accepted.client_max_window_bits=opts.clientMaxWindowBits;}else if(accepted.client_max_window_bits===true||opts.clientMaxWindowBits===false){delete accepted.client_max_window_bits;}return accepted;}acceptAsClient(response){const params=response[0];if(this._options.clientNoContextTakeover===false&&params.client_no_context_takeover){throw new Error('Unexpected parameter "client_no_context_takeover"');}if(!params.client_max_window_bits){if(typeof this._options.clientMaxWindowBits==='number'){params.client_max_window_bits=this._options.clientMaxWindowBits;}}else if(this._options.clientMaxWindowBits===false||typeof this._options.clientMaxWindowBits==='number'&&params.client_max_window_bits>this._options.clientMaxWindowBits){throw new Error('Unexpected or invalid parameter "client_max_window_bits"');}return params;}normalizeParams(configurations){configurations.forEach(params=>{Object.keys(params).forEach(key=>{var value=params[key];if(value.length>1){throw new Error(`Parameter "${key}" must have only a single value`);}value=value[0];if(key==='client_max_window_bits'){if(value!==true){const num=+value;if(!Number.isInteger(num)||num<8||num>15){throw new TypeError(`Invalid value for parameter "${key}": ${value}`);}value=num;}else if(!this._isServer){throw new TypeError(`Invalid value for parameter "${key}": ${value}`);}}else if(key==='server_max_window_bits'){const num=+value;if(!Number.isInteger(num)||num<8||num>15){throw new TypeError(`Invalid value for parameter "${key}": ${value}`);}value=num;}else if(key==='client_no_context_takeover'||key==='server_no_context_takeover'){if(value!==true){throw new TypeError(`Invalid value for parameter "${key}": ${value}`);}}else{throw new Error(`Unknown parameter "${key}"`);}params[key]=value;});});return configurations;}decompress(data,fin,callback){zlibLimiter.push(done=>{this._decompress(data,fin,(err,result)=>{done();callback(err,result);});});}compress(data,fin,callback){zlibLimiter.push(done=>{this._compress(data,fin,(err,result)=>{done();callback(err,result);});});}_decompress(data,fin,callback){const endpoint=this._isServer?'client':'server';if(!this._inflate){const key=`${endpoint}_max_window_bits`;const windowBits=typeof this.params[key]!=='number'?zlib.Z_DEFAULT_WINDOWBITS:this.params[key];this._inflate=zlib.createInflateRaw(Object.assign({},this._options.zlibInflateOptions,{windowBits}));this._inflate[kPerMessageDeflate]=this;this._inflate[kTotalLength]=0;this._inflate[kBuffers]=[];this._inflate.on('error',inflateOnError);this._inflate.on('data',inflateOnData);}this._inflate[kCallback]=callback;this._inflate.write(data);if(fin)this._inflate.write(TRAILER);this._inflate.flush(()=>{const err=this._inflate[kError];if(err){this._inflate.close();this._inflate=null;callback(err);return;}const data=bufferUtil.concat(this._inflate[kBuffers],this._inflate[kTotalLength]);if(fin&&this.params[`${endpoint}_no_context_takeover`]){this._inflate.close();this._inflate=null;}else{this._inflate[kTotalLength]=0;this._inflate[kBuffers]=[];}callback(null,data);});}_compress(data,fin,callback){if(!data||data.length===0){process.nextTick(callback,null,EMPTY_BLOCK);return;}const endpoint=this._isServer?'server':'client';if(!this._deflate){const key=`${endpoint}_max_window_bits`;const windowBits=typeof this.params[key]!=='number'?zlib.Z_DEFAULT_WINDOWBITS:this.params[key];this._deflate=zlib.createDeflateRaw(Object.assign({},this._options.zlibDeflateOptions,{windowBits}));this._deflate[kTotalLength]=0;this._deflate[kBuffers]=[];this._deflate.on('error',NOOP);this._deflate.on('data',deflateOnData);}this._deflate.write(data);this._deflate.flush(zlib.Z_SYNC_FLUSH,()=>{if(!this._deflate){return;}var data=bufferUtil.concat(this._deflate[kBuffers],this._deflate[kTotalLength]);if(fin)data=data.slice(0,data.length-4);if(fin&&this.params[`${endpoint}_no_context_takeover`]){this._deflate.close();this._deflate=null;}else{this._deflate[kTotalLength]=0;this._deflate[kBuffers]=[];}callback(null,data);});}}module.exports=PerMessageDeflate;function deflateOnData(chunk){this[kBuffers].push(chunk);this[kTotalLength]+=chunk.length;}function inflateOnData(chunk){this[kTotalLength]+=chunk.length;if(this[kPerMessageDeflate]._maxPayload<1||this[kTotalLength]<=this[kPerMessageDeflate]._maxPayload){this[kBuffers].push(chunk);return;}this[kError]=new RangeError('Max payload size exceeded');this[kError][kStatusCode]=1009;this.removeListener('data',inflateOnData);this.reset();}function inflateOnError(err){this[kPerMessageDeflate]._inflate=null;err[kStatusCode]=1007;this[kCallback](err);}},8906:function(module,__unusedexports,__webpack_require__){"use strict";const assert=__webpack_require__(3930);const createBuildStream=__webpack_require__(8059);const Builder=__webpack_require__(5125);const reducers={flat:__webpack_require__(8994),balanced:__webpack_require__(8081),trickle:__webpack_require__(7263)};const defaultOptions={strategy:'balanced',highWaterMark:100,reduceSingleLeafToSelf:true};module.exports=function(Chunker,ipld,_options){assert(Chunker,'Missing chunker creator function');assert(ipld,'Missing IPLD');const options=Object.assign({},defaultOptions,_options);const strategyName=options.strategy;const reducer=reducers[strategyName];assert(reducer,'Unknown importer build strategy name: '+strategyName);const createStrategy=Builder(Chunker,ipld,reducer,options);return createBuildStream(createStrategy,ipld,options);};},8909:function(module,__unusedexports,__webpack_require__){"use strict";var pna=__webpack_require__(88);module.exports=Writable;function WriteReq(chunk,encoding,cb){this.chunk=chunk;this.encoding=encoding;this.callback=cb;this.next=null;}function CorkedRequest(state){var _this=this;this.next=null;this.entry=null;this.finish=function(){onCorkedFinish(_this,state);};}var asyncWrite=!process.browser&&['v0.10','v0.9.'].indexOf(process.version.slice(0,5))>-1?setImmediate:pna.nextTick;var Duplex;Writable.WritableState=WritableState;var util=__webpack_require__(5548);util.inherits=__webpack_require__(92);var internalUtil={deprecate:__webpack_require__(8008)};var Stream=__webpack_require__(8017);var Buffer=__webpack_require__(7572).Buffer;var OurUint8Array=global.Uint8Array||function(){};function _uint8ArrayToBuffer(chunk){return Buffer.from(chunk);}function _isUint8Array(obj){return Buffer.isBuffer(obj)||obj instanceof OurUint8Array;}var destroyImpl=__webpack_require__(2213);util.inherits(Writable,Stream);function nop(){}function WritableState(options,stream){Duplex=Duplex||__webpack_require__(1283);options=options||{};var isDuplex=stream instanceof Duplex;this.objectMode=!!options.objectMode;if(isDuplex)this.objectMode=this.objectMode||!!options.writableObjectMode;var hwm=options.highWaterMark;var writableHwm=options.writableHighWaterMark;var defaultHwm=this.objectMode?16:16*1024;if(hwm||hwm===0)this.highWaterMark=hwm;else if(isDuplex&&(writableHwm||writableHwm===0))this.highWaterMark=writableHwm;else this.highWaterMark=defaultHwm;this.highWaterMark=Math.floor(this.highWaterMark);this.finalCalled=false;this.needDrain=false;this.ending=false;this.ended=false;this.finished=false;this.destroyed=false;var noDecode=options.decodeStrings===false;this.decodeStrings=!noDecode;this.defaultEncoding=options.defaultEncoding||'utf8';this.length=0;this.writing=false;this.corked=0;this.sync=true;this.bufferProcessing=false;this.onwrite=function(er){onwrite(stream,er);};this.writecb=null;this.writelen=0;this.bufferedRequest=null;this.lastBufferedRequest=null;this.pendingcb=0;this.prefinished=false;this.errorEmitted=false;this.bufferedRequestCount=0;this.corkedRequestsFree=new CorkedRequest(this);}WritableState.prototype.getBuffer=function getBuffer(){var current=this.bufferedRequest;var out=[];while(current){out.push(current);current=current.next;}return out;};(function(){try{Object.defineProperty(WritableState.prototype,'buffer',{get:internalUtil.deprecate(function(){return this.getBuffer();},'_writableState.buffer is deprecated. Use _writableState.getBuffer '+'instead.','DEP0003')});}catch(_){}})();var realHasInstance;if(typeof Symbol==='function'&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]==='function'){realHasInstance=Function.prototype[Symbol.hasInstance];Object.defineProperty(Writable,Symbol.hasInstance,{value:function(object){if(realHasInstance.call(this,object))return true;if(this!==Writable)return false;return object&&object._writableState instanceof WritableState;}});}else{realHasInstance=function(object){return object instanceof this;};}function Writable(options){Duplex=Duplex||__webpack_require__(1283);if(!realHasInstance.call(Writable,this)&&!(this instanceof Duplex)){return new Writable(options);}this._writableState=new WritableState(options,this);this.writable=true;if(options){if(typeof options.write==='function')this._write=options.write;if(typeof options.writev==='function')this._writev=options.writev;if(typeof options.destroy==='function')this._destroy=options.destroy;if(typeof options.final==='function')this._final=options.final;}Stream.call(this);}Writable.prototype.pipe=function(){this.emit('error',new Error('Cannot pipe, not readable'));};function writeAfterEnd(stream,cb){var er=new Error('write after end');stream.emit('error',er);pna.nextTick(cb,er);}function validChunk(stream,state,chunk,cb){var valid=true;var er=false;if(chunk===null){er=new TypeError('May not write null values to stream');}else if(typeof chunk!=='string'&&chunk!==undefined&&!state.objectMode){er=new TypeError('Invalid non-string/buffer chunk');}if(er){stream.emit('error',er);pna.nextTick(cb,er);valid=false;}return valid;}Writable.prototype.write=function(chunk,encoding,cb){var state=this._writableState;var ret=false;var isBuf=!state.objectMode&&_isUint8Array(chunk);if(isBuf&&!Buffer.isBuffer(chunk)){chunk=_uint8ArrayToBuffer(chunk);}if(typeof encoding==='function'){cb=encoding;encoding=null;}if(isBuf)encoding='buffer';else if(!encoding)encoding=state.defaultEncoding;if(typeof cb!=='function')cb=nop;if(state.ended)writeAfterEnd(this,cb);else if(isBuf||validChunk(this,state,chunk,cb)){state.pendingcb++;ret=writeOrBuffer(this,state,isBuf,chunk,encoding,cb);}return ret;};Writable.prototype.cork=function(){var state=this._writableState;state.corked++;};Writable.prototype.uncork=function(){var state=this._writableState;if(state.corked){state.corked--;if(!state.writing&&!state.corked&&!state.finished&&!state.bufferProcessing&&state.bufferedRequest)clearBuffer(this,state);}};Writable.prototype.setDefaultEncoding=function setDefaultEncoding(encoding){if(typeof encoding==='string')encoding=encoding.toLowerCase();if(!(['hex','utf8','utf-8','ascii','binary','base64','ucs2','ucs-2','utf16le','utf-16le','raw'].indexOf((encoding+'').toLowerCase())>-1))throw new TypeError('Unknown encoding: '+encoding);this._writableState.defaultEncoding=encoding;return this;};function decodeChunk(state,chunk,encoding){if(!state.objectMode&&state.decodeStrings!==false&&typeof chunk==='string'){chunk=Buffer.from(chunk,encoding);}return chunk;}Object.defineProperty(Writable.prototype,'writableHighWaterMark',{enumerable:false,get:function(){return this._writableState.highWaterMark;}});function writeOrBuffer(stream,state,isBuf,chunk,encoding,cb){if(!isBuf){var newChunk=decodeChunk(state,chunk,encoding);if(chunk!==newChunk){isBuf=true;encoding='buffer';chunk=newChunk;}}var len=state.objectMode?1:chunk.length;state.length+=len;var ret=state.length<state.highWaterMark;if(!ret)state.needDrain=true;if(state.writing||state.corked){var last=state.lastBufferedRequest;state.lastBufferedRequest={chunk:chunk,encoding:encoding,isBuf:isBuf,callback:cb,next:null};if(last){last.next=state.lastBufferedRequest;}else{state.bufferedRequest=state.lastBufferedRequest;}state.bufferedRequestCount+=1;}else{doWrite(stream,state,false,len,chunk,encoding,cb);}return ret;}function doWrite(stream,state,writev,len,chunk,encoding,cb){state.writelen=len;state.writecb=cb;state.writing=true;state.sync=true;if(writev)stream._writev(chunk,state.onwrite);else stream._write(chunk,encoding,state.onwrite);state.sync=false;}function onwriteError(stream,state,sync,er,cb){--state.pendingcb;if(sync){pna.nextTick(cb,er);pna.nextTick(finishMaybe,stream,state);stream._writableState.errorEmitted=true;stream.emit('error',er);}else{cb(er);stream._writableState.errorEmitted=true;stream.emit('error',er);finishMaybe(stream,state);}}function onwriteStateUpdate(state){state.writing=false;state.writecb=null;state.length-=state.writelen;state.writelen=0;}function onwrite(stream,er){var state=stream._writableState;var sync=state.sync;var cb=state.writecb;onwriteStateUpdate(state);if(er)onwriteError(stream,state,sync,er,cb);else{var finished=needFinish(state);if(!finished&&!state.corked&&!state.bufferProcessing&&state.bufferedRequest){clearBuffer(stream,state);}if(sync){asyncWrite(afterWrite,stream,state,finished,cb);}else{afterWrite(stream,state,finished,cb);}}}function afterWrite(stream,state,finished,cb){if(!finished)onwriteDrain(stream,state);state.pendingcb--;cb();finishMaybe(stream,state);}function onwriteDrain(stream,state){if(state.length===0&&state.needDrain){state.needDrain=false;stream.emit('drain');}}function clearBuffer(stream,state){state.bufferProcessing=true;var entry=state.bufferedRequest;if(stream._writev&&entry&&entry.next){var l=state.bufferedRequestCount;var buffer=new Array(l);var holder=state.corkedRequestsFree;holder.entry=entry;var count=0;var allBuffers=true;while(entry){buffer[count]=entry;if(!entry.isBuf)allBuffers=false;entry=entry.next;count+=1;}buffer.allBuffers=allBuffers;doWrite(stream,state,true,state.length,buffer,'',holder.finish);state.pendingcb++;state.lastBufferedRequest=null;if(holder.next){state.corkedRequestsFree=holder.next;holder.next=null;}else{state.corkedRequestsFree=new CorkedRequest(state);}state.bufferedRequestCount=0;}else{while(entry){var chunk=entry.chunk;var encoding=entry.encoding;var cb=entry.callback;var len=state.objectMode?1:chunk.length;doWrite(stream,state,false,len,chunk,encoding,cb);entry=entry.next;state.bufferedRequestCount--;if(state.writing){break;}}if(entry===null)state.lastBufferedRequest=null;}state.bufferedRequest=entry;state.bufferProcessing=false;}Writable.prototype._write=function(chunk,encoding,cb){cb(new Error('_write() is not implemented'));};Writable.prototype._writev=null;Writable.prototype.end=function(chunk,encoding,cb){var state=this._writableState;if(typeof chunk==='function'){cb=chunk;chunk=null;encoding=null;}else if(typeof encoding==='function'){cb=encoding;encoding=null;}if(chunk!==null&&chunk!==undefined)this.write(chunk,encoding);if(state.corked){state.corked=1;this.uncork();}if(!state.ending&&!state.finished)endWritable(this,state,cb);};function needFinish(state){return state.ending&&state.length===0&&state.bufferedRequest===null&&!state.finished&&!state.writing;}function callFinal(stream,state){stream._final(function(err){state.pendingcb--;if(err){stream.emit('error',err);}state.prefinished=true;stream.emit('prefinish');finishMaybe(stream,state);});}function prefinish(stream,state){if(!state.prefinished&&!state.finalCalled){if(typeof stream._final==='function'){state.pendingcb++;state.finalCalled=true;pna.nextTick(callFinal,stream,state);}else{state.prefinished=true;stream.emit('prefinish');}}}function finishMaybe(stream,state){var need=needFinish(state);if(need){prefinish(stream,state);if(state.pendingcb===0){state.finished=true;stream.emit('finish');}}return need;}function endWritable(stream,state,cb){state.ending=true;finishMaybe(stream,state);if(cb){if(state.finished)pna.nextTick(cb);else stream.once('finish',cb);}state.ended=true;stream.writable=false;}function onCorkedFinish(corkReq,state,err){var entry=corkReq.entry;corkReq.entry=null;while(entry){var cb=entry.callback;state.pendingcb--;cb(err);entry=entry.next;}if(state.corkedRequestsFree){state.corkedRequestsFree.next=corkReq;}else{state.corkedRequestsFree=corkReq;}}Object.defineProperty(Writable.prototype,'destroyed',{get:function(){if(this._writableState===undefined){return false;}return this._writableState.destroyed;},set:function(value){if(!this._writableState){return;}this._writableState.destroyed=value;}});Writable.prototype.destroy=destroyImpl.destroy;Writable.prototype._undestroy=destroyImpl.undestroy;Writable.prototype._destroy=function(err,cb){this.end();cb(err);};},8928:function(module){function baseFindIndex(array,predicate,fromIndex,fromRight){var length=array.length,index=fromIndex+(fromRight?1:-1);while(fromRight?index--:++index<length){if(predicate(array[index],index,array)){return index;}}return-1;}module.exports=baseFindIndex;},8933:function(module,__unusedexports,__webpack_require__){"use strict";const protons=__webpack_require__(817);const schema=`
message Identify {
  // protocolVersion determines compatibility between peers
  optional string protocolVersion = 5; // e.g. ipfs/1.0.0

  // agentVersion is like a UserAgent string in browsers, or client version in bittorrent
  // includes the client name and client.
  optional string agentVersion = 6; // e.g. go-ipfs/0.1.0

  // publicKey is this node's public key (which also gives its node.ID)
  // - may not need to be sent, as secure channel implies it has been sent.
  // - then again, if we change / disable secure channel, may still want it.
  optional bytes publicKey = 1;

  // listenAddrs are the multiaddrs the sender node listens for open connections on
  repeated bytes listenAddrs = 2;

  // oservedAddr is the multiaddr of the remote endpoint that the sender node perceives
  // this is useful information to convey to the other side, as it helps the remote endpoint
  // determine whether its connection to the local peer goes through NAT.
  optional bytes observedAddr = 4;

  repeated string protocols = 3;
}
`;module.exports=protons(schema).Identify;},8936:function(module,__unusedexports,__webpack_require__){"use strict";const waterfall=__webpack_require__(4265);const parallel=__webpack_require__(4876);const setImmediate=__webpack_require__(7368);const promisify=__webpack_require__(6955);const dagPB=__webpack_require__(7421);const DAGNode=dagPB.DAGNode;const DAGLink=dagPB.DAGLink;const CID=__webpack_require__(9339);const mh=__webpack_require__(8757);const Unixfs=__webpack_require__(7959);const errCode=__webpack_require__(4999);function normalizeMultihash(multihash,enc){if(typeof multihash==='string'){if(enc==='base58'||!enc){return multihash;}return Buffer.from(multihash,enc);}else if(Buffer.isBuffer(multihash)){return multihash;}else if(CID.isCID(multihash)){return multihash.buffer;}else{throw new Error('unsupported multihash');}}function parseBuffer(buf,encoding,callback){switch(encoding){case'json':return parseJSONBuffer(buf,callback);case'protobuf':return parseProtoBuffer(buf,callback);default:callback(new Error(`unkown encoding: ${encoding}`));}}function parseJSONBuffer(buf,callback){let data;let links;try{const parsed=JSON.parse(buf.toString());links=(parsed.Links||[]).map(link=>{return new DAGLink(link.Name||link.name,link.Size||link.size,mh.fromB58String(link.Hash||link.hash||link.multihash));});data=Buffer.from(parsed.Data);}catch(err){return callback(new Error('failed to parse JSON: '+err));}DAGNode.create(data,links,callback);}function parseProtoBuffer(buf,callback){dagPB.util.deserialize(buf,callback);}module.exports=function object(self){function editAndSave(edit){return(multihash,options,callback)=>{if(typeof options==='function'){callback=options;options={};}options=options||{};waterfall([cb=>{self.object.get(multihash,options,cb);},(node,cb)=>{edit(node,(err,node)=>{if(err){return cb(err);}self._ipld.put(node,{version:0,hashAlg:'sha2-256',format:'dag-pb'},(err,cid)=>{if(err)return cb(err);if(options.preload!==false){self._preload(cid);}cb(null,cid);});});}],callback);};}return{new:promisify((template,options,callback)=>{if(typeof template==='function'){callback=template;template=undefined;options={};}if(typeof options==='function'){callback=options;options={};}options=options||{};let data;if(template){if(template!=='unixfs-dir'){return setImmediate(()=>callback(new Error('unknown template')));}data=new Unixfs('directory').marshal();}else{data=Buffer.alloc(0);}DAGNode.create(data,(err,node)=>{if(err){return callback(err);}self._ipld.put(node,{version:0,hashAlg:'sha2-256',format:'dag-pb'},(err,cid)=>{if(err){return callback(err);}if(options.preload!==false){self._preload(cid);}callback(null,cid);});});}),put:promisify((obj,options,callback)=>{if(typeof options==='function'){callback=options;options={};}options=options||{};const encoding=options.enc;let node;if(Buffer.isBuffer(obj)){if(encoding){parseBuffer(obj,encoding,(err,_node)=>{if(err){return callback(err);}node=_node;next();});}else{DAGNode.create(obj,(err,_node)=>{if(err){return callback(err);}node=_node;next();});}}else if(DAGNode.isDAGNode(obj)){node=obj;next();}else if(typeof obj==='object'){DAGNode.create(obj.Data,obj.Links,(err,_node)=>{if(err){return callback(err);}node=_node;next();});}else{return callback(new Error('obj not recognized'));}function next(){self._ipld.put(node,{version:0,hashAlg:'sha2-256',format:'dag-pb'},(err,cid)=>{if(err){return callback(err);}if(options.preload!==false){self._preload(cid);}callback(null,cid);});}}),get:promisify((multihash,options,callback)=>{if(typeof options==='function'){callback=options;options={};}options=options||{};let mh,cid;try{mh=normalizeMultihash(multihash,options.enc);}catch(err){return setImmediate(()=>callback(errCode(err,'ERR_INVALID_MULTIHASH')));}try{cid=new CID(mh);}catch(err){return setImmediate(()=>callback(errCode(err,'ERR_INVALID_CID')));}if(options.cidVersion===1){cid=cid.toV1();}if(options.preload!==false){self._preload(cid);}self._ipld.get(cid,(err,result)=>{if(err){return callback(err);}callback(null,result.value);});}),data:promisify((multihash,options,callback)=>{if(typeof options==='function'){callback=options;options={};}self.object.get(multihash,options,(err,node)=>{if(err){return callback(err);}callback(null,node.data);});}),links:promisify((multihash,options,callback)=>{if(typeof options==='function'){callback=options;options={};}self.object.get(multihash,options,(err,node)=>{if(err){return callback(err);}callback(null,node.links);});}),stat:promisify((multihash,options,callback)=>{if(typeof options==='function'){callback=options;options={};}options=options||{};waterfall([cb=>self.object.get(multihash,options,cb),(node,cb)=>{parallel({serialized:next=>dagPB.util.serialize(node,next),cid:next=>dagPB.util.cid(node,next),node:next=>next(null,node)},cb);}],(err,result)=>{if(err){return callback(err);}const blockSize=result.serialized.length;const linkLength=result.node.links.reduce((a,l)=>a+l.size,0);callback(null,{Hash:result.cid.toBaseEncodedString(),NumLinks:result.node.links.length,BlockSize:blockSize,LinksSize:blockSize-result.node.data.length,DataSize:result.node.data.length,CumulativeSize:blockSize+linkLength});});}),patch:promisify({addLink(multihash,link,options,callback){editAndSave((node,cb)=>{DAGNode.addLink(node,link,cb);})(multihash,options,callback);},rmLink(multihash,linkRef,options,callback){editAndSave((node,cb)=>{if(DAGLink.isDAGLink(linkRef)){linkRef=linkRef._name;}else if(linkRef&&linkRef.name){linkRef=linkRef.name;}DAGNode.rmLink(node,linkRef,cb);})(multihash,options,callback);},appendData(multihash,data,options,callback){editAndSave((node,cb)=>{const newData=Buffer.concat([node.data,data]);DAGNode.create(newData,node.links,cb);})(multihash,options,callback);},setData(multihash,data,options,callback){editAndSave((node,cb)=>{DAGNode.create(data,node.links,cb);})(multihash,options,callback);}})};};},8940:function(module){"use strict";const v4='(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])(?:\\.(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])){3}';const v6seg='[0-9a-fA-F]{1,4}';const v6=`
(
(?:${v6seg}:){7}(?:${v6seg}|:)|                                // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:${v6seg}:){6}(?:${v4}|:${v6seg}|:)|                         // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:${v6seg}:){5}(?::${v4}|(:${v6seg}){1,2}|:)|                 // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:${v6seg}:){4}(?:(:${v6seg}){0,1}:${v4}|(:${v6seg}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:${v6seg}:){3}(?:(:${v6seg}){0,2}:${v4}|(:${v6seg}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:${v6seg}:){2}(?:(:${v6seg}){0,3}:${v4}|(:${v6seg}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:${v6seg}:){1}(?:(:${v6seg}){0,4}:${v4}|(:${v6seg}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::((?::${v6seg}){0,5}:${v4}|(?::${v6seg}){1,7}|:))           // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(%[0-9a-zA-Z]{1,})?                                           // %eth0            %1
`.replace(/\s*\/\/.*$/gm,'').replace(/\n/g,'').trim();const ip=module.exports=opts=>opts&&opts.exact?new RegExp(`(?:^${v4}$)|(?:^${v6}$)`):new RegExp(`(?:${v4})|(?:${v6})`,'g');ip.v4=opts=>opts&&opts.exact?new RegExp(`^${v4}$`):new RegExp(v4,'g');ip.v6=opts=>opts&&opts.exact?new RegExp(`^${v6}$`):new RegExp(v6,'g');},8958:function(__unusedmodule,exports,__webpack_require__){"use strict";var curve=exports;curve.base=__webpack_require__(3864);curve.short=__webpack_require__(2020);curve.mont=__webpack_require__(6464);curve.edwards=__webpack_require__(9398);},8963:function(module,__unusedexports,__webpack_require__){"use strict";const errCode=__webpack_require__(4999);module.exports.PROTECTOR_REQUIRED='No protector provided with private network enforced';module.exports.CONNECTION_FAILED=err=>errCode(err,'CONNECTION_FAILED');module.exports.DIAL_SELF=()=>errCode(new Error('A node cannot dial itself'),'DIAL_SELF');module.exports.NO_TRANSPORTS_REGISTERED=()=>errCode(new Error('No transports registered, dial not possible'),'NO_TRANSPORTS_REGISTERED');module.exports.UNEXPECTED_END=()=>errCode(new Error('Unexpected end of input from reader.'),'UNEXPECTED_END');module.exports.INVALID_STATE_TRANSITION=err=>errCode(err,'INVALID_STATE_TRANSITION');module.exports.maybeUnexpectedEnd=err=>{if(err===true){return module.exports.UNEXPECTED_END();}return err;};},8966:function(module,__unusedexports,__webpack_require__){"use strict";const promisify=__webpack_require__(6955);const pull=__webpack_require__(2885);module.exports=function(self){return promisify((ipfsPath,options,callback)=>{if(typeof options==='function'){callback=options;options={};}options=options||{};pull(self.getPullStream(ipfsPath,options),pull.asyncMap((file,cb)=>{if(file.content){pull(file.content,pull.collect((err,buffers)=>{if(err){return cb(err);}file.content=Buffer.concat(buffers);cb(null,file);}));}else{cb(null,file);}}),pull.collect(callback));});};},8970:function(module,__unusedexports,__webpack_require__){var Looper=__webpack_require__(6164);function append(array,item){(array=array||[]).push(item);return array;}module.exports=function(write,reduce,max,cb){reduce=reduce||append;var ended,_cb,_read;function reader(read){var queue=null,writing=false,length=0;_read=read;if(ended)return read(ended.abort?true:ended,function(err){cb(err);_cb&&_cb();});var reading=false;var more=Looper(function(){if(reading||ended)return;reading=true;read(null,function(err,data){reading=false;(function(end,data){if(ended)return;ended=end;if(!ended){queue=reduce(queue,data);length=queue&&queue.length||0;if(queue!=null)flush();if(length<max)more();}else if(!writing)cb(ended===true?null:ended);})(err,data);});});function flush(){if(writing)return;var _queue=queue;queue=null;writing=true;length=0;write(_queue,function(err){writing=false;if(ended===true&&!length)cb(err);else if(ended&&ended!==true){cb(ended);_cb&&_cb();}else if(err)read(ended=err.abort?true:err,cb);else if(length)flush();else more();});}reader.abort=function(__cb){_cb=function(end){__cb&&__cb();};var err=new Error('aborted');err.abort=true;read(ended=err,function(end){end=end===true?null:end;if(!writing){cb&&cb(end);_cb&&_cb(end);}});};more();}reader.abort=function(cb){ended=new Error('aborted before connecting');_cb=function(err){cb&&cb();};};return reader;};},8982:function(module,__unusedexports,__webpack_require__){module.exports={input:__webpack_require__(5416),output:__webpack_require__(629)};},8984:function(__unusedmodule,exports,__webpack_require__){"use strict";try{const isValidUTF8=__webpack_require__(9412);exports.isValidUTF8=typeof isValidUTF8==='object'?isValidUTF8.Validation.isValidUTF8:isValidUTF8;}catch(e){exports.isValidUTF8=()=>true;}exports.isValidStatusCode=code=>{return code>=1000&&code<=1013&&code!==1004&&code!==1005&&code!==1006||code>=3000&&code<=4999;};},8985:function(module,__unusedexports,__webpack_require__){const getIterator=__webpack_require__(8529);const toIterable=__webpack_require__(9486);function toPull(iterator){iterator=getIterator(iterator);return async(end,cb)=>{if(end)return cb(end);let next;try{next=await iterator.next();}catch(err){return cb(err);}if(next.done)return cb(true);cb(null,next.value);};}toPull.through=factory=>read=>toPull(factory(toIterable(read)));module.exports=toPull;},8986:function(module,__unusedexports,__webpack_require__){var asn=__webpack_require__(3771);var crypto=__webpack_require__(2984);var BN=asn.bignum;var zero=new BN(0);var one=new BN(1);var two=new BN(2);function rand(low,high){do{var b=new BN(crypto.randomBytes(high.byteLength()));}while(b.cmp(low)<=0||b.cmp(high)>=0);return b;}function odd(n){if(n.cmp(zero)===0){return zero;}var r=n;while(r.isEven()){r=r.div(two);}return r;}function rootOne(x,r,n){var i=x.toRed(BN.red(n)).redPow(r).fromRed();var o=zero;while(i.cmp(one)!==0){o=i;i=i.mul(i).mod(n);}if(o.cmp(n.sub(one))===0){return zero;}return o;}function factor(e,d,n){var k=e.mul(d).sub(one);var r=odd(k);do{var y=rootOne(rand(two,n),r,n);}while(y.cmp(zero)===0);var p=y.sub(one).gcd(n);return{p:p,q:n.div(p)};}module.exports=factor;},8994:function(module,__unusedexports,__webpack_require__){"use strict";const pull=__webpack_require__(418);const asyncMap=__webpack_require__(9720);const collect=__webpack_require__(8342);const pushable=__webpack_require__(5995);const pullPair=__webpack_require__(7134);const batch=__webpack_require__(9226);module.exports=function(reduce,options){const pair=pullPair();const source=pair.source;const result=pushable();pull(source,batch(Infinity),asyncMap(reduce),collect((err,roots)=>{if(err){result.end(err);return;}if(roots.length===1){result.push(roots[0]);result.end();}else if(roots.length>1){result.end(new Error('expected a maximum of 1 roots and got '+roots.length));}else{result.end();}}));return{sink:pair.sink,source:result};};},8996:function(__unusedmodule,exports){"use strict";var charmap=function(alphabet,mappings){mappings||(mappings={});alphabet.split("").forEach(function(c,i){if(!(c in mappings))mappings[c]=i;});return mappings;};var rfc4648={alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",charmap:{0:14,1:8}};rfc4648.charmap=charmap(rfc4648.alphabet,rfc4648.charmap);var crockford={alphabet:"0123456789ABCDEFGHJKMNPQRSTVWXYZ",charmap:{O:0,I:1,L:1}};crockford.charmap=charmap(crockford.alphabet,crockford.charmap);var base32hex={alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",charmap:{}};base32hex.charmap=charmap(base32hex.alphabet,base32hex.charmap);function Decoder(options){this.buf=[];this.shift=8;this.carry=0;if(options){switch(options.type){case"rfc4648":this.charmap=exports.rfc4648.charmap;break;case"crockford":this.charmap=exports.crockford.charmap;break;case"base32hex":this.charmap=exports.base32hex.charmap;break;default:throw new Error("invalid type");}if(options.charmap)this.charmap=options.charmap;}}Decoder.prototype.charmap=rfc4648.charmap;Decoder.prototype.write=function(str){var charmap=this.charmap;var buf=this.buf;var shift=this.shift;var carry=this.carry;str.toUpperCase().split("").forEach(function(char){if(char=="=")return;var symbol=charmap[char]&0xff;shift-=5;if(shift>0){carry|=symbol<<shift;}else if(shift<0){buf.push(carry|symbol>>-shift);shift+=8;carry=symbol<<shift&0xff;}else{buf.push(carry|symbol);shift=8;carry=0;}});this.shift=shift;this.carry=carry;return this;};Decoder.prototype.finalize=function(str){if(str){this.write(str);}if(this.shift!==8&&this.carry!==0){this.buf.push(this.carry);this.shift=8;this.carry=0;}return this.buf;};function Encoder(options){this.buf="";this.shift=3;this.carry=0;if(options){switch(options.type){case"rfc4648":this.alphabet=exports.rfc4648.alphabet;break;case"crockford":this.alphabet=exports.crockford.alphabet;break;case"base32hex":this.alphabet=exports.base32hex.alphabet;break;default:throw new Error("invalid type");}if(options.alphabet)this.alphabet=options.alphabet;else if(options.lc)this.alphabet=this.alphabet.toLowerCase();}}Encoder.prototype.alphabet=rfc4648.alphabet;Encoder.prototype.write=function(buf){var shift=this.shift;var carry=this.carry;var symbol;var byte;var i;for(i=0;i<buf.length;i++){byte=buf[i];symbol=carry|byte>>shift;this.buf+=this.alphabet[symbol&0x1f];if(shift>5){shift-=5;symbol=byte>>shift;this.buf+=this.alphabet[symbol&0x1f];}shift=5-shift;carry=byte<<shift;shift=8-shift;}this.shift=shift;this.carry=carry;return this;};Encoder.prototype.finalize=function(buf){if(buf){this.write(buf);}if(this.shift!==3){this.buf+=this.alphabet[this.carry&0x1f];this.shift=3;this.carry=0;}return this.buf;};exports.encode=function(buf,options){return new Encoder(options).finalize(buf);};exports.decode=function(str,options){return new Decoder(options).finalize(str);};exports.Decoder=Decoder;exports.Encoder=Encoder;exports.charmap=charmap;exports.crockford=crockford;exports.rfc4648=rfc4648;exports.base32hex=base32hex;},9001:function(module){module.exports={"name":"ropsten","chainId":3,"networkId":3,"comment":"PoW test network","url":"https://github.com/ethereum/ropsten","genesis":{"hash":"0x41941023680923e0fe4d74a34bdac8141f2540e3ae90623718e47d66d1ca4a2d","timestamp":null,"gasLimit":16777216,"difficulty":1048576,"nonce":"0x0000000000000042","extraData":"0x3535353535353535353535353535353535353535353535353535353535353535","stateRoot":"0x217b0bbcfb72e2d57e28f33cb361b9983513177755dc3f33ce3e7022ed62b77b"},"hardforks":[{"name":"chainstart","block":0,"consensus":"pow","finality":null},{"name":"homestead","block":0,"consensus":"pow","finality":null},{"name":"dao","block":null,"consensus":"pow","finality":null},{"name":"tangerineWhistle","block":0,"consensus":"pow","finality":null},{"name":"spuriousDragon","block":10,"consensus":"pow","finality":null},{"name":"byzantium","block":1700000,"consensus":"pow","finality":null},{"name":"constantinople","block":4230000,"consensus":"pow","finality":null},{"name":"petersburg","block":4939394,"consensus":"pow","finality":null}],"bootstrapNodes":[{"ip":"52.176.7.10","port":"30303","id":"30b7ab30a01c124a6cceca36863ece12c4f5fa68e3ba9b0b51407ccc002eeed3b3102d20a88f1c1d3c3154e2449317b8ef95090e77b312d5cc39354f86d5d606","network":"Ropsten","chainId":3,"location":"US","comment":"US-Azure geth"},{"ip":"52.176.100.77","port":"30303","id":"865a63255b3bb68023b6bffd5095118fcc13e79dcf014fe4e47e065c350c7cc72af2e53eff895f11ba1bbb6a2b33271c1116ee870f266618eadfc2e78aa7349c","network":"Ropsten","chainId":3,"location":"US","comment":"US-Azure parity"},{"ip":"52.232.243.152","port":"30303","id":"6332792c4a00e3e4ee0926ed89e0d27ef985424d97b6a45bf0f23e51f0dcb5e66b875777506458aea7af6f9e4ffb69f43f3778ee73c81ed9d34c51c4b16b0b0f","network":"Ropsten","chainId":3,"location":"US","comment":"Parity"},{"ip":"192.81.208.223","port":"30303","id":"94c15d1b9e2fe7ce56e458b9a3b672ef11894ddedd0c6f247e0f1d3487f52b66208fb4aeb8179fce6e3a749ea93ed147c37976d67af557508d199d9594c35f09","network":"Ropsten","chainId":3,"location":"US","comment":"@gpip"}]};},9007:function(module){var stringFromCharCode=String.fromCharCode;function ucs2decode(string){var output=[];var counter=0;var length=string.length;var value;var extra;while(counter<length){value=string.charCodeAt(counter++);if(value>=0xD800&&value<=0xDBFF&&counter<length){extra=string.charCodeAt(counter++);if((extra&0xFC00)==0xDC00){output.push(((value&0x3FF)<<10)+(extra&0x3FF)+0x10000);}else{output.push(value);counter--;}}else{output.push(value);}}return output;}function ucs2encode(array){var length=array.length;var index=-1;var value;var output='';while(++index<length){value=array[index];if(value>0xFFFF){value-=0x10000;output+=stringFromCharCode(value>>>10&0x3FF|0xD800);value=0xDC00|value&0x3FF;}output+=stringFromCharCode(value);}return output;}function checkScalarValue(codePoint,strict){if(codePoint>=0xD800&&codePoint<=0xDFFF){if(strict){throw Error('Lone surrogate U+'+codePoint.toString(16).toUpperCase()+' is not a scalar value');}return false;}return true;}function createByte(codePoint,shift){return stringFromCharCode(codePoint>>shift&0x3F|0x80);}function encodeCodePoint(codePoint,strict){if((codePoint&0xFFFFFF80)==0){return stringFromCharCode(codePoint);}var symbol='';if((codePoint&0xFFFFF800)==0){symbol=stringFromCharCode(codePoint>>6&0x1F|0xC0);}else if((codePoint&0xFFFF0000)==0){if(!checkScalarValue(codePoint,strict)){codePoint=0xFFFD;}symbol=stringFromCharCode(codePoint>>12&0x0F|0xE0);symbol+=createByte(codePoint,6);}else if((codePoint&0xFFE00000)==0){symbol=stringFromCharCode(codePoint>>18&0x07|0xF0);symbol+=createByte(codePoint,12);symbol+=createByte(codePoint,6);}symbol+=stringFromCharCode(codePoint&0x3F|0x80);return symbol;}function utf8encode(string,opts){opts=opts||{};var strict=false!==opts.strict;var codePoints=ucs2decode(string);var length=codePoints.length;var index=-1;var codePoint;var byteString='';while(++index<length){codePoint=codePoints[index];byteString+=encodeCodePoint(codePoint,strict);}return byteString;}function readContinuationByte(){if(byteIndex>=byteCount){throw Error('Invalid byte index');}var continuationByte=byteArray[byteIndex]&0xFF;byteIndex++;if((continuationByte&0xC0)==0x80){return continuationByte&0x3F;}throw Error('Invalid continuation byte');}function decodeSymbol(strict){var byte1;var byte2;var byte3;var byte4;var codePoint;if(byteIndex>byteCount){throw Error('Invalid byte index');}if(byteIndex==byteCount){return false;}byte1=byteArray[byteIndex]&0xFF;byteIndex++;if((byte1&0x80)==0){return byte1;}if((byte1&0xE0)==0xC0){byte2=readContinuationByte();codePoint=(byte1&0x1F)<<6|byte2;if(codePoint>=0x80){return codePoint;}else{throw Error('Invalid continuation byte');}}if((byte1&0xF0)==0xE0){byte2=readContinuationByte();byte3=readContinuationByte();codePoint=(byte1&0x0F)<<12|byte2<<6|byte3;if(codePoint>=0x0800){return checkScalarValue(codePoint,strict)?codePoint:0xFFFD;}else{throw Error('Invalid continuation byte');}}if((byte1&0xF8)==0xF0){byte2=readContinuationByte();byte3=readContinuationByte();byte4=readContinuationByte();codePoint=(byte1&0x07)<<0x12|byte2<<0x0C|byte3<<0x06|byte4;if(codePoint>=0x010000&&codePoint<=0x10FFFF){return codePoint;}}throw Error('Invalid UTF-8 detected');}var byteArray;var byteCount;var byteIndex;function utf8decode(byteString,opts){opts=opts||{};var strict=false!==opts.strict;byteArray=ucs2decode(byteString);byteCount=byteArray.length;byteIndex=0;var codePoints=[];var tmp;while((tmp=decodeSymbol(strict))!==false){codePoints.push(tmp);}return ucs2encode(codePoints);}module.exports={version:'2.1.2',encode:utf8encode,decode:utf8decode};},9009:function(module,__unusedexports,__webpack_require__){"use strict";const promisify=__webpack_require__(6955);const setImmediate=__webpack_require__(7368);const pkgversion=__webpack_require__(5358).version;module.exports=function id(self){return promisify((opts,callback)=>{if(typeof opts==='function'){callback=opts;opts={};}setImmediate(()=>callback(null,{id:self._peerInfo.id.toB58String(),publicKey:self._peerInfo.id.pubKey.bytes.toString('base64'),addresses:self._peerInfo.multiaddrs.toArray().map(ma=>ma.toString()).filter(ma=>ma.indexOf('ipfs')>=0).sort(),agentVersion:`js-ipfs/${pkgversion}`,protocolVersion:'9000'}));});};},9013:function(__unusedmodule,exports,__webpack_require__){"use strict";const Punycode=__webpack_require__(8053);const Util=__webpack_require__(649);const internals={hasOwn:Object.prototype.hasOwnProperty,indexOf:Array.prototype.indexOf,defaultThreshold:16,maxIPv6Groups:8,categories:{valid:1,dnsWarn:7,rfc5321:15,cfws:31,deprecated:63,rfc5322:127,error:255},diagnoses:{valid:0,rfc5321TLD:9,rfc5321TLDNumeric:10,rfc5321QuotedString:11,rfc5321AddressLiteral:12,cfwsComment:17,cfwsFWS:18,undesiredNonAscii:25,deprecatedLocalPart:33,deprecatedFWS:34,deprecatedQTEXT:35,deprecatedQP:36,deprecatedComment:37,deprecatedCTEXT:38,deprecatedIPv6:39,deprecatedCFWSNearAt:49,rfc5322Domain:65,rfc5322TooLong:66,rfc5322LocalTooLong:67,rfc5322DomainTooLong:68,rfc5322LabelTooLong:69,rfc5322DomainLiteral:70,rfc5322DomainLiteralOBSDText:71,rfc5322IPv6GroupCount:72,rfc5322IPv62x2xColon:73,rfc5322IPv6BadCharacter:74,rfc5322IPv6MaxGroups:75,rfc5322IPv6ColonStart:76,rfc5322IPv6ColonEnd:77,errExpectingDTEXT:129,errNoLocalPart:130,errNoDomain:131,errConsecutiveDots:132,errATEXTAfterCFWS:133,errATEXTAfterQS:134,errATEXTAfterDomainLiteral:135,errExpectingQPair:136,errExpectingATEXT:137,errExpectingQTEXT:138,errExpectingCTEXT:139,errBackslashEnd:140,errDotStart:141,errDotEnd:142,errDomainHyphenStart:143,errDomainHyphenEnd:144,errUnclosedQuotedString:145,errUnclosedComment:146,errUnclosedDomainLiteral:147,errFWSCRLFx2:148,errFWSCRLFEnd:149,errCRNoLF:150,errUnknownTLD:160,errDomainTooShort:161,errDotAfterDomainLiteral:162},components:{localpart:0,domain:1,literal:2,contextComment:3,contextFWS:4,contextQuotedString:5,contextQuotedPair:6}};internals.specials=function(){const specials='()<>[]:;@\\,."';const lookup=new Array(0x100);lookup.fill(false);for(let i=0;i<specials.length;++i){lookup[specials.codePointAt(i)]=true;}return function(code){return lookup[code];};}();internals.c0Controls=function(){const lookup=new Array(0x100);lookup.fill(false);for(let i=0;i<33;++i){lookup[i]=true;}return function(code){return lookup[code];};}();internals.c1Controls=function(){const lookup=new Array(0x100);lookup.fill(false);for(let i=127;i<160;++i){lookup[i]=true;}return function(code){return lookup[code];};}();internals.regex={ipV4:/\b(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipV6:/^[a-fA-F\d]{0,4}$/};internals.normalizeSupportsNul='\0'.normalize('NFC')==='\0';internals.nulNormalize=function(email){return email.split('\0').map(part=>part.normalize('NFC')).join('\0');};internals.normalize=function(email){return email.normalize('NFC');};if(!internals.normalizeSupportsNul){internals.normalize=function(email){if(email.indexOf('\0')>=0){return internals.nulNormalize(email);}return email.normalize('NFC');};}internals.checkIpV6=function(items){return items.every(value=>internals.regex.ipV6.test(value));};internals.isIterable=Array.isArray;if(typeof Symbol!=='undefined'){internals.isIterable=value=>Array.isArray(value)||!!value&&typeof value==='object'&&typeof value[Symbol.iterator]==='function';}internals._isSet=value=>value instanceof Set;internals._isMap=value=>value instanceof Map;internals.isSet=Util.types&&Util.types.isSet||internals._isSet;internals.isMap=Util.types&&Util.types.isMap||internals._isMap;internals.normalizeTable=function(table){if(internals.isSet(table)||Array.isArray(table)){return table;}if(internals.isMap(table)){return table.keys();}return Object.keys(table);};internals.canonicalizeAtom=function(atom){return Punycode.toASCII(atom).toLowerCase();};internals.includesMapped=function(iterable,iteratee,value){for(const item of iterable){if(value===iteratee(item)){return true;}}return false;};internals.validDomain=function(tldAtom,options){const canonicalTldAtom=internals.canonicalizeAtom(tldAtom);if(options.tldBlacklist){return!internals.includesMapped(internals.normalizeTable(options.tldBlacklist),internals.canonicalizeAtom,canonicalTldAtom);}return internals.includesMapped(internals.normalizeTable(options.tldWhitelist),internals.canonicalizeAtom,canonicalTldAtom);};internals.hasDomainLiteralThenAtom=function(domainAtoms){let hasDomainLiteral=false;for(let i=0;i<domainAtoms.length;++i){if(domainAtoms[i][0]==='['){hasDomainLiteral=true;}else if(hasDomainLiteral){return true;}}return false;};exports.validate=internals.validate=function(email,options,callback){options=options||{};if(typeof email!=='string'){throw new TypeError('expected string email');}email=internals.normalize(email);if(typeof options==='function'){callback=options;options={};}if(typeof callback!=='function'){callback=null;}let diagnose;let threshold;if(typeof options.errorLevel==='number'){diagnose=true;threshold=options.errorLevel;}else{diagnose=!!options.errorLevel;threshold=internals.diagnoses.valid;}if(options.tldWhitelist){if(typeof options.tldWhitelist==='string'){options.tldWhitelist=[options.tldWhitelist];}else if(typeof options.tldWhitelist!=='object'){throw new TypeError('expected array or object tldWhitelist');}}if(options.tldBlacklist){if(typeof options.tldBlacklist==='string'){options.tldBlacklist=[options.tldBlacklist];}else if(typeof options.tldBlacklist!=='object'){throw new TypeError('expected array or object tldBlacklist');}}if(options.minDomainAtoms&&(options.minDomainAtoms!==(+options.minDomainAtoms|0)||options.minDomainAtoms<0)){throw new TypeError('expected positive integer minDomainAtoms');}if(options.excludeDiagnoses){if(!internals.isIterable(options.excludeDiagnoses)){throw new TypeError('expected iterable excludeDiagnoses');}if(!internals.isSet(options.excludeDiagnoses)){options.excludeDiagnoses=new Set(options.excludeDiagnoses);}}let maxResult=internals.diagnoses.valid;const updateResult=value=>{if(value>maxResult&&(!options.excludeDiagnoses||!options.excludeDiagnoses.has(value))){maxResult=value;}};const allowUnicode=options.allowUnicode===undefined||!!options.allowUnicode;if(!allowUnicode&&/[^\x00-\x7f]/.test(email)){updateResult(internals.diagnoses.undesiredNonAscii);}const context={now:internals.components.localpart,prev:internals.components.localpart,stack:[internals.components.localpart]};let prevToken='';const parseData={local:'',domain:''};const atomData={locals:[''],domains:['']};let elementCount=0;let elementLength=0;let crlfCount=0;let charCode;let hyphenFlag=false;let assertEnd=false;const emailLength=email.length;let token;for(let i=0;i<emailLength;i+=token.length){token=String.fromCodePoint(email.codePointAt(i));switch(context.now){case internals.components.localpart:switch(token){case'(':if(elementLength===0){updateResult(elementCount===0?internals.diagnoses.cfwsComment:internals.diagnoses.deprecatedComment);}else{updateResult(internals.diagnoses.cfwsComment);assertEnd=true;}context.stack.push(context.now);context.now=internals.components.contextComment;break;case'.':if(elementLength===0){updateResult(elementCount===0?internals.diagnoses.errDotStart:internals.diagnoses.errConsecutiveDots);}else{if(assertEnd){updateResult(internals.diagnoses.deprecatedLocalPart);}assertEnd=false;elementLength=0;++elementCount;parseData.local+=token;atomData.locals[elementCount]='';}break;case'"':if(elementLength===0){updateResult(elementCount===0?internals.diagnoses.rfc5321QuotedString:internals.diagnoses.deprecatedLocalPart);parseData.local+=token;atomData.locals[elementCount]+=token;elementLength+=Buffer.byteLength(token,'utf8');assertEnd=true;context.stack.push(context.now);context.now=internals.components.contextQuotedString;}else{updateResult(internals.diagnoses.errExpectingATEXT);}break;case'\r':if(emailLength===++i||email[i]!=='\n'){updateResult(internals.diagnoses.errCRNoLF);break;}case' ':case'\t':if(elementLength===0){updateResult(elementCount===0?internals.diagnoses.cfwsFWS:internals.diagnoses.deprecatedFWS);}else{assertEnd=true;}context.stack.push(context.now);context.now=internals.components.contextFWS;prevToken=token;break;case'@':if(context.stack.length!==1){throw new Error('unexpected item on context stack');}if(parseData.local.length===0){updateResult(internals.diagnoses.errNoLocalPart);}else if(elementLength===0){updateResult(internals.diagnoses.errDotEnd);}else if(Buffer.byteLength(parseData.local,'utf8')>64){updateResult(internals.diagnoses.rfc5322LocalTooLong);}else if(context.prev===internals.components.contextComment||context.prev===internals.components.contextFWS){updateResult(internals.diagnoses.deprecatedCFWSNearAt);}context.now=internals.components.domain;context.stack[0]=internals.components.domain;elementCount=0;elementLength=0;assertEnd=false;break;default:if(assertEnd){switch(context.prev){case internals.components.contextComment:case internals.components.contextFWS:updateResult(internals.diagnoses.errATEXTAfterCFWS);break;case internals.components.contextQuotedString:updateResult(internals.diagnoses.errATEXTAfterQS);break;default:throw new Error('more atext found where none is allowed, but unrecognized prev context: '+context.prev);}}else{context.prev=context.now;charCode=token.codePointAt(0);if(internals.specials(charCode)||internals.c0Controls(charCode)||internals.c1Controls(charCode)){updateResult(internals.diagnoses.errExpectingATEXT);}parseData.local+=token;atomData.locals[elementCount]+=token;elementLength+=Buffer.byteLength(token,'utf8');}}break;case internals.components.domain:switch(token){case'(':if(elementLength===0){updateResult(elementCount===0?internals.diagnoses.deprecatedCFWSNearAt:internals.diagnoses.deprecatedComment);}else{assertEnd=true;updateResult(internals.diagnoses.cfwsComment);}context.stack.push(context.now);context.now=internals.components.contextComment;break;case'.':const punycodeLength=Punycode.toASCII(atomData.domains[elementCount]).length;if(elementLength===0){updateResult(elementCount===0?internals.diagnoses.errDotStart:internals.diagnoses.errConsecutiveDots);}else if(hyphenFlag){updateResult(internals.diagnoses.errDomainHyphenEnd);}else if(punycodeLength>63){updateResult(internals.diagnoses.rfc5322LabelTooLong);}assertEnd=false;elementLength=0;++elementCount;atomData.domains[elementCount]='';parseData.domain+=token;break;case'[':if(atomData.domains[elementCount].length===0){if(parseData.domain.length){updateResult(internals.diagnoses.errDotAfterDomainLiteral);}assertEnd=true;elementLength+=Buffer.byteLength(token,'utf8');context.stack.push(context.now);context.now=internals.components.literal;parseData.domain+=token;atomData.domains[elementCount]+=token;parseData.literal='';}else{updateResult(internals.diagnoses.errExpectingATEXT);}break;case'\r':if(emailLength===++i||email[i]!=='\n'){updateResult(internals.diagnoses.errCRNoLF);break;}case' ':case'\t':if(elementLength===0){updateResult(elementCount===0?internals.diagnoses.deprecatedCFWSNearAt:internals.diagnoses.deprecatedFWS);}else{updateResult(internals.diagnoses.cfwsFWS);assertEnd=true;}context.stack.push(context.now);context.now=internals.components.contextFWS;prevToken=token;break;default:if(assertEnd){switch(context.prev){case internals.components.contextComment:case internals.components.contextFWS:updateResult(internals.diagnoses.errATEXTAfterCFWS);break;case internals.components.literal:updateResult(internals.diagnoses.errATEXTAfterDomainLiteral);break;default:throw new Error('more atext found where none is allowed, but unrecognized prev context: '+context.prev);}}charCode=token.codePointAt(0);hyphenFlag=false;if(internals.specials(charCode)||internals.c0Controls(charCode)||internals.c1Controls(charCode)){updateResult(internals.diagnoses.errExpectingATEXT);}else if(token==='-'){if(elementLength===0){updateResult(internals.diagnoses.errDomainHyphenStart);}hyphenFlag=true;}else if(charCode<48||charCode>122&&charCode<192||charCode>57&&charCode<65||charCode>90&&charCode<97){updateResult(internals.diagnoses.rfc5322Domain);}parseData.domain+=token;atomData.domains[elementCount]+=token;elementLength+=Buffer.byteLength(token,'utf8');}break;case internals.components.literal:switch(token){case']':if(maxResult<internals.categories.deprecated){let index=-1;let addressLiteral=parseData.literal;const matchesIP=internals.regex.ipV4.exec(addressLiteral);if(matchesIP){index=matchesIP.index;if(index!==0){addressLiteral=addressLiteral.slice(0,index)+'0:0';}}if(index===0){updateResult(internals.diagnoses.rfc5321AddressLiteral);}else if(addressLiteral.slice(0,5).toLowerCase()!=='ipv6:'){updateResult(internals.diagnoses.rfc5322DomainLiteral);}else{const match=addressLiteral.slice(5);let maxGroups=internals.maxIPv6Groups;const groups=match.split(':');index=match.indexOf('::');if(!~index){if(groups.length!==maxGroups){updateResult(internals.diagnoses.rfc5322IPv6GroupCount);}}else if(index!==match.lastIndexOf('::')){updateResult(internals.diagnoses.rfc5322IPv62x2xColon);}else{if(index===0||index===match.length-2){++maxGroups;}if(groups.length>maxGroups){updateResult(internals.diagnoses.rfc5322IPv6MaxGroups);}else if(groups.length===maxGroups){updateResult(internals.diagnoses.deprecatedIPv6);}}if(match[0]===':'&&match[1]!==':'){updateResult(internals.diagnoses.rfc5322IPv6ColonStart);}else if(match[match.length-1]===':'&&match[match.length-2]!==':'){updateResult(internals.diagnoses.rfc5322IPv6ColonEnd);}else if(internals.checkIpV6(groups)){updateResult(internals.diagnoses.rfc5321AddressLiteral);}else{updateResult(internals.diagnoses.rfc5322IPv6BadCharacter);}}}else{updateResult(internals.diagnoses.rfc5322DomainLiteral);}parseData.domain+=token;atomData.domains[elementCount]+=token;elementLength+=Buffer.byteLength(token,'utf8');context.prev=context.now;context.now=context.stack.pop();break;case'\\':updateResult(internals.diagnoses.rfc5322DomainLiteralOBSDText);context.stack.push(context.now);context.now=internals.components.contextQuotedPair;break;case'\r':if(emailLength===++i||email[i]!=='\n'){updateResult(internals.diagnoses.errCRNoLF);break;}case' ':case'\t':updateResult(internals.diagnoses.cfwsFWS);context.stack.push(context.now);context.now=internals.components.contextFWS;prevToken=token;break;default:charCode=token.codePointAt(0);if(charCode!==127&&internals.c1Controls(charCode)||charCode===0||token==='['){updateResult(internals.diagnoses.errExpectingDTEXT);break;}else if(internals.c0Controls(charCode)||charCode===127){updateResult(internals.diagnoses.rfc5322DomainLiteralOBSDText);}parseData.literal+=token;parseData.domain+=token;atomData.domains[elementCount]+=token;elementLength+=Buffer.byteLength(token,'utf8');}break;case internals.components.contextQuotedString:switch(token){case'\\':context.stack.push(context.now);context.now=internals.components.contextQuotedPair;break;case'\r':if(emailLength===++i||email[i]!=='\n'){updateResult(internals.diagnoses.errCRNoLF);break;}case'\t':parseData.local+=' ';atomData.locals[elementCount]+=' ';elementLength+=Buffer.byteLength(token,'utf8');updateResult(internals.diagnoses.cfwsFWS);context.stack.push(context.now);context.now=internals.components.contextFWS;prevToken=token;break;case'"':parseData.local+=token;atomData.locals[elementCount]+=token;elementLength+=Buffer.byteLength(token,'utf8');context.prev=context.now;context.now=context.stack.pop();break;default:charCode=token.codePointAt(0);if(charCode!==127&&internals.c1Controls(charCode)||charCode===0||charCode===10){updateResult(internals.diagnoses.errExpectingQTEXT);}else if(internals.c0Controls(charCode)||charCode===127){updateResult(internals.diagnoses.deprecatedQTEXT);}parseData.local+=token;atomData.locals[elementCount]+=token;elementLength+=Buffer.byteLength(token,'utf8');}break;case internals.components.contextQuotedPair:charCode=token.codePointAt(0);if(charCode!==127&&internals.c1Controls(charCode)){updateResult(internals.diagnoses.errExpectingQPair);}else if(charCode<31&&charCode!==9||charCode===127){updateResult(internals.diagnoses.deprecatedQP);}context.prev=context.now;context.now=context.stack.pop();const escapeToken='\\'+token;switch(context.now){case internals.components.contextComment:break;case internals.components.contextQuotedString:parseData.local+=escapeToken;atomData.locals[elementCount]+=escapeToken;elementLength+=2;break;case internals.components.literal:parseData.domain+=escapeToken;atomData.domains[elementCount]+=escapeToken;elementLength+=2;break;default:throw new Error('quoted pair logic invoked in an invalid context: '+context.now);}break;case internals.components.contextComment:switch(token){case'(':context.stack.push(context.now);context.now=internals.components.contextComment;break;case')':context.prev=context.now;context.now=context.stack.pop();break;case'\\':context.stack.push(context.now);context.now=internals.components.contextQuotedPair;break;case'\r':if(emailLength===++i||email[i]!=='\n'){updateResult(internals.diagnoses.errCRNoLF);break;}case' ':case'\t':updateResult(internals.diagnoses.cfwsFWS);context.stack.push(context.now);context.now=internals.components.contextFWS;prevToken=token;break;default:charCode=token.codePointAt(0);if(charCode===0||charCode===10||charCode!==127&&internals.c1Controls(charCode)){updateResult(internals.diagnoses.errExpectingCTEXT);break;}else if(internals.c0Controls(charCode)||charCode===127){updateResult(internals.diagnoses.deprecatedCTEXT);}}break;case internals.components.contextFWS:if(prevToken==='\r'){if(token==='\r'){updateResult(internals.diagnoses.errFWSCRLFx2);break;}if(++crlfCount>1){updateResult(internals.diagnoses.deprecatedFWS);}else{crlfCount=1;}}switch(token){case'\r':if(emailLength===++i||email[i]!=='\n'){updateResult(internals.diagnoses.errCRNoLF);}break;case' ':case'\t':break;default:if(prevToken==='\r'){updateResult(internals.diagnoses.errFWSCRLFEnd);}crlfCount=0;context.prev=context.now;context.now=context.stack.pop();--i;}prevToken=token;break;default:throw new Error('unknown context: '+context.now);}if(maxResult>internals.categories.rfc5322){break;}}if(maxResult<internals.categories.rfc5322){const punycodeLength=Punycode.toASCII(parseData.domain).length;if(context.now===internals.components.contextQuotedString){updateResult(internals.diagnoses.errUnclosedQuotedString);}else if(context.now===internals.components.contextQuotedPair){updateResult(internals.diagnoses.errBackslashEnd);}else if(context.now===internals.components.contextComment){updateResult(internals.diagnoses.errUnclosedComment);}else if(context.now===internals.components.literal){updateResult(internals.diagnoses.errUnclosedDomainLiteral);}else if(token==='\r'){updateResult(internals.diagnoses.errFWSCRLFEnd);}else if(parseData.domain.length===0){updateResult(internals.diagnoses.errNoDomain);}else if(elementLength===0){updateResult(internals.diagnoses.errDotEnd);}else if(hyphenFlag){updateResult(internals.diagnoses.errDomainHyphenEnd);}else if(punycodeLength>255){updateResult(internals.diagnoses.rfc5322DomainTooLong);}else if(Buffer.byteLength(parseData.local,'utf8')+punycodeLength+1>254){updateResult(internals.diagnoses.rfc5322TooLong);}else if(elementLength>63){updateResult(internals.diagnoses.rfc5322LabelTooLong);}else if(options.minDomainAtoms&&atomData.domains.length<options.minDomainAtoms&&(atomData.domains.length!==1||atomData.domains[0][0]!=='[')){updateResult(internals.diagnoses.errDomainTooShort);}else if(internals.hasDomainLiteralThenAtom(atomData.domains)){updateResult(internals.diagnoses.errDotAfterDomainLiteral);}else if(options.tldWhitelist||options.tldBlacklist){const tldAtom=atomData.domains[elementCount];if(!internals.validDomain(tldAtom,options)){updateResult(internals.diagnoses.errUnknownTLD);}}}if(maxResult<internals.categories.dnsWarn){const code=atomData.domains[elementCount].codePointAt(0);if(code<=57){updateResult(internals.diagnoses.rfc5321TLDNumeric);}}if(maxResult<threshold){maxResult=internals.diagnoses.valid;}const finishResult=diagnose?maxResult:maxResult<internals.defaultThreshold;if(callback){callback(finishResult);}return finishResult;};exports.diagnoses=internals.validate.diagnoses=function(){const diag={};const keys=Object.keys(internals.diagnoses);for(let i=0;i<keys.length;++i){const key=keys[i];diag[key]=internals.diagnoses[key];}return diag;}();exports.normalize=internals.normalize;},9024:function(module,__unusedexports,__webpack_require__){var forge=__webpack_require__(7938);__webpack_require__(1617);__webpack_require__(5947);__webpack_require__(1835);__webpack_require__(1087);__webpack_require__(5105);__webpack_require__(7892);__webpack_require__(321);__webpack_require__(1214);__webpack_require__(4445);var asn1=forge.asn1;var p7=module.exports=forge.pkcs7=forge.pkcs7||{};p7.messageFromPem=function(pem){var msg=forge.pem.decode(pem)[0];if(msg.type!=='PKCS7'){var error=new Error('Could not convert PKCS#7 message from PEM; PEM '+'header type is not "PKCS#7".');error.headerType=msg.type;throw error;}if(msg.procType&&msg.procType.type==='ENCRYPTED'){throw new Error('Could not convert PKCS#7 message from PEM; PEM is encrypted.');}var obj=asn1.fromDer(msg.body);return p7.messageFromAsn1(obj);};p7.messageToPem=function(msg,maxline){var pemObj={type:'PKCS7',body:asn1.toDer(msg.toAsn1()).getBytes()};return forge.pem.encode(pemObj,{maxline:maxline});};p7.messageFromAsn1=function(obj){var capture={};var errors=[];if(!asn1.validate(obj,p7.asn1.contentInfoValidator,capture,errors)){var error=new Error('Cannot read PKCS#7 message. '+'ASN.1 object is not an PKCS#7 ContentInfo.');error.errors=errors;throw error;}var contentType=asn1.derToOid(capture.contentType);var msg;switch(contentType){case forge.pki.oids.envelopedData:msg=p7.createEnvelopedData();break;case forge.pki.oids.encryptedData:msg=p7.createEncryptedData();break;case forge.pki.oids.signedData:msg=p7.createSignedData();break;default:throw new Error('Cannot read PKCS#7 message. ContentType with OID '+contentType+' is not (yet) supported.');}msg.fromAsn1(capture.content.value[0]);return msg;};p7.createSignedData=function(){var msg=null;msg={type:forge.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(obj){_fromAsn1(msg,obj,p7.asn1.signedDataValidator);msg.certificates=[];msg.crls=[];msg.digestAlgorithmIdentifiers=[];msg.contentInfo=null;msg.signerInfos=[];if(msg.rawCapture.certificates){var certs=msg.rawCapture.certificates.value;for(var i=0;i<certs.length;++i){msg.certificates.push(forge.pki.certificateFromAsn1(certs[i]));}}},toAsn1:function(){if(!msg.contentInfo){msg.sign();}var certs=[];for(var i=0;i<msg.certificates.length;++i){certs.push(forge.pki.certificateToAsn1(msg.certificates[i]));}var crls=[];var signedData=asn1.create(asn1.Class.CONTEXT_SPECIFIC,0,true,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,true,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,false,asn1.integerToDer(msg.version).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SET,true,msg.digestAlgorithmIdentifiers),msg.contentInfo])]);if(certs.length>0){signedData.value[0].value.push(asn1.create(asn1.Class.CONTEXT_SPECIFIC,0,true,certs));}if(crls.length>0){signedData.value[0].value.push(asn1.create(asn1.Class.CONTEXT_SPECIFIC,1,true,crls));}signedData.value[0].value.push(asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SET,true,msg.signerInfos));return asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,true,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,false,asn1.oidToDer(msg.type).getBytes()),signedData]);},addSigner:function(signer){var issuer=signer.issuer;var serialNumber=signer.serialNumber;if(signer.certificate){var cert=signer.certificate;if(typeof cert==='string'){cert=forge.pki.certificateFromPem(cert);}issuer=cert.issuer.attributes;serialNumber=cert.serialNumber;}var key=signer.key;if(!key){throw new Error('Could not add PKCS#7 signer; no private key specified.');}if(typeof key==='string'){key=forge.pki.privateKeyFromPem(key);}var digestAlgorithm=signer.digestAlgorithm||forge.pki.oids.sha1;switch(digestAlgorithm){case forge.pki.oids.sha1:case forge.pki.oids.sha256:case forge.pki.oids.sha384:case forge.pki.oids.sha512:case forge.pki.oids.md5:break;default:throw new Error('Could not add PKCS#7 signer; unknown message digest algorithm: '+digestAlgorithm);}var authenticatedAttributes=signer.authenticatedAttributes||[];if(authenticatedAttributes.length>0){var contentType=false;var messageDigest=false;for(var i=0;i<authenticatedAttributes.length;++i){var attr=authenticatedAttributes[i];if(!contentType&&attr.type===forge.pki.oids.contentType){contentType=true;if(messageDigest){break;}continue;}if(!messageDigest&&attr.type===forge.pki.oids.messageDigest){messageDigest=true;if(contentType){break;}continue;}}if(!contentType||!messageDigest){throw new Error('Invalid signer.authenticatedAttributes. If '+'signer.authenticatedAttributes is specified, then it must '+'contain at least two attributes, PKCS #9 content-type and '+'PKCS #9 message-digest.');}}msg.signers.push({key:key,version:1,issuer:issuer,serialNumber:serialNumber,digestAlgorithm:digestAlgorithm,signatureAlgorithm:forge.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:authenticatedAttributes,unauthenticatedAttributes:[]});},sign:function(options){options=options||{};if(typeof msg.content!=='object'||msg.contentInfo===null){msg.contentInfo=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,true,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,false,asn1.oidToDer(forge.pki.oids.data).getBytes())]);if('content'in msg){var content;if(msg.content instanceof forge.util.ByteBuffer){content=msg.content.bytes();}else if(typeof msg.content==='string'){content=forge.util.encodeUtf8(msg.content);}if(options.detached){msg.detachedContent=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OCTETSTRING,false,content);}else{msg.contentInfo.value.push(asn1.create(asn1.Class.CONTEXT_SPECIFIC,0,true,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OCTETSTRING,false,content)]));}}}if(msg.signers.length===0){return;}var mds=addDigestAlgorithmIds();addSignerInfos(mds);},verify:function(){throw new Error('PKCS#7 signature verification not yet implemented.');},addCertificate:function(cert){if(typeof cert==='string'){cert=forge.pki.certificateFromPem(cert);}msg.certificates.push(cert);},addCertificateRevokationList:function(crl){throw new Error('PKCS#7 CRL support not yet implemented.');}};return msg;function addDigestAlgorithmIds(){var mds={};for(var i=0;i<msg.signers.length;++i){var signer=msg.signers[i];var oid=signer.digestAlgorithm;if(!(oid in mds)){mds[oid]=forge.md[forge.pki.oids[oid]].create();}if(signer.authenticatedAttributes.length===0){signer.md=mds[oid];}else{signer.md=forge.md[forge.pki.oids[oid]].create();}}msg.digestAlgorithmIdentifiers=[];for(var oid in mds){msg.digestAlgorithmIdentifiers.push(asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,true,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,false,asn1.oidToDer(oid).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.NULL,false,'')]));}return mds;}function addSignerInfos(mds){var content;if(msg.detachedContent){content=msg.detachedContent;}else{content=msg.contentInfo.value[1];content=content.value[0];}if(!content){throw new Error('Could not sign PKCS#7 message; there is no content to sign.');}var contentType=asn1.derToOid(msg.contentInfo.value[0].value);var bytes=asn1.toDer(content);bytes.getByte();asn1.getBerValueLength(bytes);bytes=bytes.getBytes();for(var oid in mds){mds[oid].start().update(bytes);}var signingTime=new Date();for(var i=0;i<msg.signers.length;++i){var signer=msg.signers[i];if(signer.authenticatedAttributes.length===0){if(contentType!==forge.pki.oids.data){throw new Error('Invalid signer; authenticatedAttributes must be present '+'when the ContentInfo content type is not PKCS#7 Data.');}}else{signer.authenticatedAttributesAsn1=asn1.create(asn1.Class.CONTEXT_SPECIFIC,0,true,[]);var attrsAsn1=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SET,true,[]);for(var ai=0;ai<signer.authenticatedAttributes.length;++ai){var attr=signer.authenticatedAttributes[ai];if(attr.type===forge.pki.oids.messageDigest){attr.value=mds[signer.digestAlgorithm].digest();}else if(attr.type===forge.pki.oids.signingTime){if(!attr.value){attr.value=signingTime;}}attrsAsn1.value.push(_attributeToAsn1(attr));signer.authenticatedAttributesAsn1.value.push(_attributeToAsn1(attr));}bytes=asn1.toDer(attrsAsn1).getBytes();signer.md.start().update(bytes);}signer.signature=signer.key.sign(signer.md,'RSASSA-PKCS1-V1_5');}msg.signerInfos=_signersToAsn1(msg.signers);}};p7.createEncryptedData=function(){var msg=null;msg={type:forge.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:forge.pki.oids['aes256-CBC']},fromAsn1:function(obj){_fromAsn1(msg,obj,p7.asn1.encryptedDataValidator);},decrypt:function(key){if(key!==undefined){msg.encryptedContent.key=key;}_decryptContent(msg);}};return msg;};p7.createEnvelopedData=function(){var msg=null;msg={type:forge.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:forge.pki.oids['aes256-CBC']},fromAsn1:function(obj){var capture=_fromAsn1(msg,obj,p7.asn1.envelopedDataValidator);msg.recipients=_recipientsFromAsn1(capture.recipientInfos.value);},toAsn1:function(){return asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,true,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,false,asn1.oidToDer(msg.type).getBytes()),asn1.create(asn1.Class.CONTEXT_SPECIFIC,0,true,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,true,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,false,asn1.integerToDer(msg.version).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SET,true,_recipientsToAsn1(msg.recipients)),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,true,_encryptedContentToAsn1(msg.encryptedContent))])])]);},findRecipient:function(cert){var sAttr=cert.issuer.attributes;for(var i=0;i<msg.recipients.length;++i){var r=msg.recipients[i];var rAttr=r.issuer;if(r.serialNumber!==cert.serialNumber){continue;}if(rAttr.length!==sAttr.length){continue;}var match=true;for(var j=0;j<sAttr.length;++j){if(rAttr[j].type!==sAttr[j].type||rAttr[j].value!==sAttr[j].value){match=false;break;}}if(match){return r;}}return null;},decrypt:function(recipient,privKey){if(msg.encryptedContent.key===undefined&&recipient!==undefined&&privKey!==undefined){switch(recipient.encryptedContent.algorithm){case forge.pki.oids.rsaEncryption:case forge.pki.oids.desCBC:var key=privKey.decrypt(recipient.encryptedContent.content);msg.encryptedContent.key=forge.util.createBuffer(key);break;default:throw new Error('Unsupported asymmetric cipher, '+'OID '+recipient.encryptedContent.algorithm);}}_decryptContent(msg);},addRecipient:function(cert){msg.recipients.push({version:0,issuer:cert.issuer.attributes,serialNumber:cert.serialNumber,encryptedContent:{algorithm:forge.pki.oids.rsaEncryption,key:cert.publicKey}});},encrypt:function(key,cipher){if(msg.encryptedContent.content===undefined){cipher=cipher||msg.encryptedContent.algorithm;key=key||msg.encryptedContent.key;var keyLen,ivLen,ciphFn;switch(cipher){case forge.pki.oids['aes128-CBC']:keyLen=16;ivLen=16;ciphFn=forge.aes.createEncryptionCipher;break;case forge.pki.oids['aes192-CBC']:keyLen=24;ivLen=16;ciphFn=forge.aes.createEncryptionCipher;break;case forge.pki.oids['aes256-CBC']:keyLen=32;ivLen=16;ciphFn=forge.aes.createEncryptionCipher;break;case forge.pki.oids['des-EDE3-CBC']:keyLen=24;ivLen=8;ciphFn=forge.des.createEncryptionCipher;break;default:throw new Error('Unsupported symmetric cipher, OID '+cipher);}if(key===undefined){key=forge.util.createBuffer(forge.random.getBytes(keyLen));}else if(key.length()!=keyLen){throw new Error('Symmetric key has wrong length; '+'got '+key.length()+' bytes, expected '+keyLen+'.');}msg.encryptedContent.algorithm=cipher;msg.encryptedContent.key=key;msg.encryptedContent.parameter=forge.util.createBuffer(forge.random.getBytes(ivLen));var ciph=ciphFn(key);ciph.start(msg.encryptedContent.parameter.copy());ciph.update(msg.content);if(!ciph.finish()){throw new Error('Symmetric encryption failed.');}msg.encryptedContent.content=ciph.output;}for(var i=0;i<msg.recipients.length;++i){var recipient=msg.recipients[i];if(recipient.encryptedContent.content!==undefined){continue;}switch(recipient.encryptedContent.algorithm){case forge.pki.oids.rsaEncryption:recipient.encryptedContent.content=recipient.encryptedContent.key.encrypt(msg.encryptedContent.key.data);break;default:throw new Error('Unsupported asymmetric cipher, OID '+recipient.encryptedContent.algorithm);}}}};return msg;};function _recipientFromAsn1(obj){var capture={};var errors=[];if(!asn1.validate(obj,p7.asn1.recipientInfoValidator,capture,errors)){var error=new Error('Cannot read PKCS#7 RecipientInfo. '+'ASN.1 object is not an PKCS#7 RecipientInfo.');error.errors=errors;throw error;}return{version:capture.version.charCodeAt(0),issuer:forge.pki.RDNAttributesAsArray(capture.issuer),serialNumber:forge.util.createBuffer(capture.serial).toHex(),encryptedContent:{algorithm:asn1.derToOid(capture.encAlgorithm),parameter:capture.encParameter.value,content:capture.encKey}};}function _recipientToAsn1(obj){return asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,true,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,false,asn1.integerToDer(obj.version).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,true,[forge.pki.distinguishedNameToAsn1({attributes:obj.issuer}),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,false,forge.util.hexToBytes(obj.serialNumber))]),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,true,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,false,asn1.oidToDer(obj.encryptedContent.algorithm).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.NULL,false,'')]),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OCTETSTRING,false,obj.encryptedContent.content)]);}function _recipientsFromAsn1(infos){var ret=[];for(var i=0;i<infos.length;++i){ret.push(_recipientFromAsn1(infos[i]));}return ret;}function _recipientsToAsn1(recipients){var ret=[];for(var i=0;i<recipients.length;++i){ret.push(_recipientToAsn1(recipients[i]));}return ret;}function _signerFromAsn1(obj){var capture={};var errors=[];if(!asn1.validate(obj,p7.asn1.signerInfoValidator,capture,errors)){var error=new Error('Cannot read PKCS#7 SignerInfo. '+'ASN.1 object is not an PKCS#7 SignerInfo.');error.errors=errors;throw error;}var rval={version:capture.version.charCodeAt(0),issuer:forge.pki.RDNAttributesAsArray(capture.issuer),serialNumber:forge.util.createBuffer(capture.serial).toHex(),digestAlgorithm:asn1.derToOid(capture.digestAlgorithm),signatureAlgorithm:asn1.derToOid(capture.signatureAlgorithm),signature:capture.signature,authenticatedAttributes:[],unauthenticatedAttributes:[]};var authenticatedAttributes=capture.authenticatedAttributes||[];var unauthenticatedAttributes=capture.unauthenticatedAttributes||[];return rval;}function _signerToAsn1(obj){var rval=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,true,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,false,asn1.integerToDer(obj.version).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,true,[forge.pki.distinguishedNameToAsn1({attributes:obj.issuer}),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,false,forge.util.hexToBytes(obj.serialNumber))]),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,true,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,false,asn1.oidToDer(obj.digestAlgorithm).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.NULL,false,'')])]);if(obj.authenticatedAttributesAsn1){rval.value.push(obj.authenticatedAttributesAsn1);}rval.value.push(asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,true,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,false,asn1.oidToDer(obj.signatureAlgorithm).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.NULL,false,'')]));rval.value.push(asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OCTETSTRING,false,obj.signature));if(obj.unauthenticatedAttributes.length>0){var attrsAsn1=asn1.create(asn1.Class.CONTEXT_SPECIFIC,1,true,[]);for(var i=0;i<obj.unauthenticatedAttributes.length;++i){var attr=obj.unauthenticatedAttributes[i];attrsAsn1.values.push(_attributeToAsn1(attr));}rval.value.push(attrsAsn1);}return rval;}function _signersFromAsn1(signerInfoAsn1s){var ret=[];for(var i=0;i<signerInfoAsn1s.length;++i){ret.push(_signerFromAsn1(signerInfoAsn1s[i]));}return ret;}function _signersToAsn1(signers){var ret=[];for(var i=0;i<signers.length;++i){ret.push(_signerToAsn1(signers[i]));}return ret;}function _attributeToAsn1(attr){var value;if(attr.type===forge.pki.oids.contentType){value=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,false,asn1.oidToDer(attr.value).getBytes());}else if(attr.type===forge.pki.oids.messageDigest){value=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OCTETSTRING,false,attr.value.bytes());}else if(attr.type===forge.pki.oids.signingTime){var jan_1_1950=new Date('1950-01-01T00:00:00Z');var jan_1_2050=new Date('2050-01-01T00:00:00Z');var date=attr.value;if(typeof date==='string'){var timestamp=Date.parse(date);if(!isNaN(timestamp)){date=new Date(timestamp);}else if(date.length===13){date=asn1.utcTimeToDate(date);}else{date=asn1.generalizedTimeToDate(date);}}if(date>=jan_1_1950&&date<jan_1_2050){value=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.UTCTIME,false,asn1.dateToUtcTime(date));}else{value=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.GENERALIZEDTIME,false,asn1.dateToGeneralizedTime(date));}}return asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,true,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,false,asn1.oidToDer(attr.type).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SET,true,[value])]);}function _encryptedContentToAsn1(ec){return[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,false,asn1.oidToDer(forge.pki.oids.data).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,true,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,false,asn1.oidToDer(ec.algorithm).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OCTETSTRING,false,ec.parameter.getBytes())]),asn1.create(asn1.Class.CONTEXT_SPECIFIC,0,true,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OCTETSTRING,false,ec.content.getBytes())])];}function _fromAsn1(msg,obj,validator){var capture={};var errors=[];if(!asn1.validate(obj,validator,capture,errors)){var error=new Error('Cannot read PKCS#7 message. '+'ASN.1 object is not a supported PKCS#7 message.');error.errors=error;throw error;}var contentType=asn1.derToOid(capture.contentType);if(contentType!==forge.pki.oids.data){throw new Error('Unsupported PKCS#7 message. '+'Only wrapped ContentType Data supported.');}if(capture.encryptedContent){var content='';if(forge.util.isArray(capture.encryptedContent)){for(var i=0;i<capture.encryptedContent.length;++i){if(capture.encryptedContent[i].type!==asn1.Type.OCTETSTRING){throw new Error('Malformed PKCS#7 message, expecting encrypted '+'content constructed of only OCTET STRING objects.');}content+=capture.encryptedContent[i].value;}}else{content=capture.encryptedContent;}msg.encryptedContent={algorithm:asn1.derToOid(capture.encAlgorithm),parameter:forge.util.createBuffer(capture.encParameter.value),content:forge.util.createBuffer(content)};}if(capture.content){var content='';if(forge.util.isArray(capture.content)){for(var i=0;i<capture.content.length;++i){if(capture.content[i].type!==asn1.Type.OCTETSTRING){throw new Error('Malformed PKCS#7 message, expecting '+'content constructed of only OCTET STRING objects.');}content+=capture.content[i].value;}}else{content=capture.content;}msg.content=forge.util.createBuffer(content);}msg.version=capture.version.charCodeAt(0);msg.rawCapture=capture;return capture;}function _decryptContent(msg){if(msg.encryptedContent.key===undefined){throw new Error('Symmetric key not available.');}if(msg.content===undefined){var ciph;switch(msg.encryptedContent.algorithm){case forge.pki.oids['aes128-CBC']:case forge.pki.oids['aes192-CBC']:case forge.pki.oids['aes256-CBC']:ciph=forge.aes.createDecryptionCipher(msg.encryptedContent.key);break;case forge.pki.oids['desCBC']:case forge.pki.oids['des-EDE3-CBC']:ciph=forge.des.createDecryptionCipher(msg.encryptedContent.key);break;default:throw new Error('Unsupported symmetric cipher, OID '+msg.encryptedContent.algorithm);}ciph.start(msg.encryptedContent.parameter);ciph.update(msg.encryptedContent.content);if(!ciph.finish()){throw new Error('Symmetric decryption failed.');}msg.content=ciph.output;}}},9051:function(module,__unusedexports,__webpack_require__){var forge=__webpack_require__(7938);__webpack_require__(6921);__webpack_require__(6321);__webpack_require__(1214);var pkcs5=forge.pkcs5=forge.pkcs5||{};var crypto;if(forge.util.isNodejs&&!forge.options.usePureJavaScript){crypto=__webpack_require__(2984);}module.exports=forge.pbkdf2=pkcs5.pbkdf2=function(p,s,c,dkLen,md,callback){if(typeof md==='function'){callback=md;md=null;}if(forge.util.isNodejs&&!forge.options.usePureJavaScript&&crypto.pbkdf2&&(md===null||typeof md!=='object')&&(crypto.pbkdf2Sync.length>4||!md||md==='sha1')){if(typeof md!=='string'){md='sha1';}p=new Buffer(p,'binary');s=new Buffer(s,'binary');if(!callback){if(crypto.pbkdf2Sync.length===4){return crypto.pbkdf2Sync(p,s,c,dkLen).toString('binary');}return crypto.pbkdf2Sync(p,s,c,dkLen,md).toString('binary');}if(crypto.pbkdf2Sync.length===4){return crypto.pbkdf2(p,s,c,dkLen,function(err,key){if(err){return callback(err);}callback(null,key.toString('binary'));});}return crypto.pbkdf2(p,s,c,dkLen,md,function(err,key){if(err){return callback(err);}callback(null,key.toString('binary'));});}if(typeof md==='undefined'||md===null){md='sha1';}if(typeof md==='string'){if(!(md in forge.md.algorithms)){throw new Error('Unknown hash algorithm: '+md);}md=forge.md[md].create();}var hLen=md.digestLength;if(dkLen>0xFFFFFFFF*hLen){var err=new Error('Derived key is too long.');if(callback){return callback(err);}throw err;}var len=Math.ceil(dkLen/hLen);var r=dkLen-(len-1)*hLen;var prf=forge.hmac.create();prf.start(md,p);var dk='';var xor,u_c,u_c1;if(!callback){for(var i=1;i<=len;++i){prf.start(null,null);prf.update(s);prf.update(forge.util.int32ToBytes(i));xor=u_c1=prf.digest().getBytes();for(var j=2;j<=c;++j){prf.start(null,null);prf.update(u_c1);u_c=prf.digest().getBytes();xor=forge.util.xorBytes(xor,u_c,hLen);u_c1=u_c;}dk+=i<len?xor:xor.substr(0,r);}return dk;}var i=1,j;function outer(){if(i>len){return callback(null,dk);}prf.start(null,null);prf.update(s);prf.update(forge.util.int32ToBytes(i));xor=u_c1=prf.digest().getBytes();j=2;inner();}function inner(){if(j<=c){prf.start(null,null);prf.update(u_c1);u_c=prf.digest().getBytes();xor=forge.util.xorBytes(xor,u_c,hLen);u_c1=u_c;++j;return forge.util.setImmediate(inner);}dk+=i<len?xor:xor.substr(0,r);++i;outer();}outer();};},9075:function(module,__unusedexports,__webpack_require__){"use strict";const EventEmitter=__webpack_require__(4859);const Big=__webpack_require__(4417);const MovingAverage=__webpack_require__(6114);const retimer=__webpack_require__(6000);class Stats extends EventEmitter{constructor(initialCounters,options){super();this._options=options;this._queue=[];this._stats={};this._frequencyLastTime=Date.now();this._frequencyAccumulators={};this._movingAverages={};this._update=this._update.bind(this);const intervals=this._options.movingAverageIntervals;for(var i=0;i<initialCounters.length;i++){var key=initialCounters[i];this._stats[key]=Big(0);this._movingAverages[key]={};for(var k=0;k<intervals.length;k++){var interval=intervals[k];var ma=this._movingAverages[key][interval]=MovingAverage(interval);ma.push(this._frequencyLastTime,0);}}}start(){if(this._queue.length){this._resetComputeTimeout();}}stop(){if(this._timeout){this._timeout.clear();this._timeout=null;}}get snapshot(){return Object.assign({},this._stats);}get movingAverages(){return Object.assign({},this._movingAverages);}push(counter,inc){this._queue.push([counter,inc,Date.now()]);this._resetComputeTimeout();}_resetComputeTimeout(){if(this._timeout){this._timeout.reschedule(this._nextTimeout());}else{this._timeout=retimer(this._update,this._nextTimeout());}}_nextTimeout(){const urgency=this._queue.length/this._options.computeThrottleMaxQueueSize;const timeout=Math.max(this._options.computeThrottleTimeout*(1-urgency),0);return timeout;}_update(){this._timeout=null;if(this._queue.length){let last;while(this._queue.length){const op=last=this._queue.shift();this._applyOp(op);}this._updateFrequency(last[2]);this.emit('update',this._stats);}}_updateFrequency(latestTime){const timeDiff=latestTime-this._frequencyLastTime;Object.keys(this._stats).forEach(key=>{this._updateFrequencyFor(key,timeDiff,latestTime);});this._frequencyLastTime=latestTime;}_updateFrequencyFor(key,timeDiffMS,latestTime){const count=this._frequencyAccumulators[key]||0;this._frequencyAccumulators[key]=0;const hz=count/timeDiffMS*1000;let movingAverages=this._movingAverages[key];if(!movingAverages){movingAverages=this._movingAverages[key]={};}const intervals=this._options.movingAverageIntervals;for(var i=0;i<intervals.length;i++){var movingAverageInterval=intervals[i];var movingAverage=movingAverages[movingAverageInterval];if(!movingAverage){movingAverage=movingAverages[movingAverageInterval]=MovingAverage(movingAverageInterval);}movingAverage.push(latestTime,hz);}}_applyOp(op){const key=op[0];const inc=op[1];if(typeof inc!=='number'){throw new Error('invalid increment number:',inc);}let n;if(!this._stats.hasOwnProperty(key)){n=this._stats[key]=Big(0);}else{n=this._stats[key];}this._stats[key]=n.plus(inc);if(!this._frequencyAccumulators[key]){this._frequencyAccumulators[key]=0;}this._frequencyAccumulators[key]+=inc;}}module.exports=Stats;},9078:function(module,__unusedexports,__webpack_require__){"use strict";const mortice=__webpack_require__(1334);const log=__webpack_require__(746)('ipfs:mfs:lock');let lock;module.exports=repoOwner=>{if(lock){return lock;}const mutex=mortice({singleProcess:repoOwner});const performOperation=(type,func,args,callback)=>{log(`Queuing ${type} operation`);mutex[`${type}Lock`](()=>{return new Promise((resolve,reject)=>{args.push((error,result)=>{log(`${type.substring(0,1).toUpperCase()}${type.substring(1)} operation callback invoked${error?' with error: '+error.message:''}`);if(error){return reject(error);}resolve(result);});log(`Starting ${type} operation`);func.apply(null,args);});}).then(result=>{log(`Finished ${type} operation`);const cb=callback;callback=null;cb(null,result);}).catch(error=>{log(`Finished ${type} operation with error: ${error.message}`);if(callback){return callback(error);}log(`Callback already invoked for ${type} operation`);throw error;});};lock={readLock:func=>{return function(){const args=Array.from(arguments);let callback=args.pop();performOperation('read',func,args,callback);};},writeLock:func=>{return function(){const args=Array.from(arguments);let callback=args.pop();performOperation('write',func,args,callback);};}};return lock;};},9096:function(module,__unusedexports,__webpack_require__){var isArray=__webpack_require__(8851);var toString=Object.prototype.toString;var withNativeBlob=typeof Blob==='function'||typeof Blob!=='undefined'&&toString.call(Blob)==='[object BlobConstructor]';var withNativeFile=typeof File==='function'||typeof File!=='undefined'&&toString.call(File)==='[object FileConstructor]';module.exports=hasBinary;function hasBinary(obj){if(!obj||typeof obj!=='object'){return false;}if(isArray(obj)){for(var i=0,l=obj.length;i<l;i++){if(hasBinary(obj[i])){return true;}}return false;}if(typeof Buffer==='function'&&Buffer.isBuffer&&Buffer.isBuffer(obj)||typeof ArrayBuffer==='function'&&obj instanceof ArrayBuffer||withNativeBlob&&obj instanceof Blob||withNativeFile&&obj instanceof File){return true;}if(obj.toJSON&&typeof obj.toJSON==='function'&&arguments.length===1){return hasBinary(obj.toJSON(),true);}for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)&&hasBinary(obj[key])){return true;}}return false;}},9107:function(module){var FUNC_ERROR_TEXT='Expected a function';var NAN=0/0;var symbolTag='[object Symbol]';var reTrim=/^\s+|\s+$/g;var reIsBadHex=/^[-+]0x[0-9a-f]+$/i;var reIsBinary=/^0b[01]+$/i;var reIsOctal=/^0o[0-7]+$/i;var freeParseInt=parseInt;var freeGlobal=typeof global=='object'&&global&&global.Object===Object&&global;var freeSelf=typeof self=='object'&&self&&self.Object===Object&&self;var root=freeGlobal||freeSelf||Function('return this')();var objectProto=Object.prototype;var objectToString=objectProto.toString;var nativeMax=Math.max,nativeMin=Math.min;var now=function(){return root.Date.now();};function debounce(func,wait,options){var lastArgs,lastThis,maxWait,result,timerId,lastCallTime,lastInvokeTime=0,leading=false,maxing=false,trailing=true;if(typeof func!='function'){throw new TypeError(FUNC_ERROR_TEXT);}wait=toNumber(wait)||0;if(isObject(options)){leading=!!options.leading;maxing='maxWait'in options;maxWait=maxing?nativeMax(toNumber(options.maxWait)||0,wait):maxWait;trailing='trailing'in options?!!options.trailing:trailing;}function invokeFunc(time){var args=lastArgs,thisArg=lastThis;lastArgs=lastThis=undefined;lastInvokeTime=time;result=func.apply(thisArg,args);return result;}function leadingEdge(time){lastInvokeTime=time;timerId=setTimeout(timerExpired,wait);return leading?invokeFunc(time):result;}function remainingWait(time){var timeSinceLastCall=time-lastCallTime,timeSinceLastInvoke=time-lastInvokeTime,result=wait-timeSinceLastCall;return maxing?nativeMin(result,maxWait-timeSinceLastInvoke):result;}function shouldInvoke(time){var timeSinceLastCall=time-lastCallTime,timeSinceLastInvoke=time-lastInvokeTime;return lastCallTime===undefined||timeSinceLastCall>=wait||timeSinceLastCall<0||maxing&&timeSinceLastInvoke>=maxWait;}function timerExpired(){var time=now();if(shouldInvoke(time)){return trailingEdge(time);}timerId=setTimeout(timerExpired,remainingWait(time));}function trailingEdge(time){timerId=undefined;if(trailing&&lastArgs){return invokeFunc(time);}lastArgs=lastThis=undefined;return result;}function cancel(){if(timerId!==undefined){clearTimeout(timerId);}lastInvokeTime=0;lastArgs=lastCallTime=lastThis=timerId=undefined;}function flush(){return timerId===undefined?result:trailingEdge(now());}function debounced(){var time=now(),isInvoking=shouldInvoke(time);lastArgs=arguments;lastThis=this;lastCallTime=time;if(isInvoking){if(timerId===undefined){return leadingEdge(lastCallTime);}if(maxing){timerId=setTimeout(timerExpired,wait);return invokeFunc(lastCallTime);}}if(timerId===undefined){timerId=setTimeout(timerExpired,wait);}return result;}debounced.cancel=cancel;debounced.flush=flush;return debounced;}function throttle(func,wait,options){var leading=true,trailing=true;if(typeof func!='function'){throw new TypeError(FUNC_ERROR_TEXT);}if(isObject(options)){leading='leading'in options?!!options.leading:leading;trailing='trailing'in options?!!options.trailing:trailing;}return debounce(func,wait,{'leading':leading,'maxWait':wait,'trailing':trailing});}function isObject(value){var type=typeof value;return!!value&&(type=='object'||type=='function');}function isObjectLike(value){return!!value&&typeof value=='object';}function isSymbol(value){return typeof value=='symbol'||isObjectLike(value)&&objectToString.call(value)==symbolTag;}function toNumber(value){if(typeof value=='number'){return value;}if(isSymbol(value)){return NAN;}if(isObject(value)){var other=typeof value.valueOf=='function'?value.valueOf():value;value=isObject(other)?other+'':other;}if(typeof value!='string'){return value===0?value:+value;}value=value.replace(reTrim,'');var isBinary=reIsBinary.test(value);return isBinary||reIsOctal.test(value)?freeParseInt(value.slice(2),isBinary?2:8):reIsBadHex.test(value)?NAN:+value;}module.exports=throttle;},9108:function(module){"use strict";module.exports=balanced;function balanced(a,b,str){if(a instanceof RegExp)a=maybeMatch(a,str);if(b instanceof RegExp)b=maybeMatch(b,str);var r=range(a,b,str);return r&&{start:r[0],end:r[1],pre:str.slice(0,r[0]),body:str.slice(r[0]+a.length,r[1]),post:str.slice(r[1]+b.length)};}function maybeMatch(reg,str){var m=str.match(reg);return m?m[0]:null;}balanced.range=range;function range(a,b,str){var begs,beg,left,right,result;var ai=str.indexOf(a);var bi=str.indexOf(b,ai+1);var i=ai;if(ai>=0&&bi>0){begs=[];left=str.length;while(i>=0&&!result){if(i==ai){begs.push(i);ai=str.indexOf(a,i+1);}else if(begs.length==1){result=[begs.pop(),bi];}else{beg=begs.pop();if(beg<left){left=beg;right=bi;}bi=str.indexOf(b,i+1);}i=ai<bi&&ai>=0?ai:bi;}if(begs.length){result=[left,right];}}return result;}},9116:function(module,exports,__webpack_require__){"use strict";const PeerId=__webpack_require__(1832);const{Key}=__webpack_require__(759);const series=__webpack_require__(7644);const errcode=__webpack_require__(4999);const debug=__webpack_require__(746);const log=debug('jsipfs:ipns:publisher');log.error=debug('jsipfs:ipns:publisher:error');const ipns=__webpack_require__(3843);const defaultRecordTtl=60*60*1000;class IpnsPublisher{constructor(routing,datastore){this._routing=routing;this._datastore=datastore;}publishWithEOL(privKey,value,lifetime,callback){if(!privKey||!privKey.bytes){const errMsg=`one or more of the provided parameters are not defined`;log.error(errMsg);return callback(errcode(new Error(errMsg),'ERR_UNDEFINED_PARAMETER'));}PeerId.createFromPrivKey(privKey.bytes,(err,peerId)=>{if(err){return callback(err);}this._updateOrCreateRecord(privKey,value,lifetime,peerId,(err,record)=>{if(err){return callback(err);}this._putRecordToRouting(record,peerId,callback);});});}publish(privKey,value,callback){this.publishWithEOL(privKey,value,defaultRecordTtl,callback);}_putRecordToRouting(record,peerId,callback){if(!PeerId.isPeerId(peerId)){const errMsg=`peerId received is not valid`;log.error(errMsg);return callback(errcode(new Error(errMsg),'ERR_INVALID_PEER_ID'));}const publicKey=peerId._pubKey;ipns.embedPublicKey(publicKey,record,(err,embedPublicKeyRecord)=>{if(err){return callback(err);}let keys;try{keys=ipns.getIdKeys(peerId.toBytes());}catch(err){log.error(err);return callback(err);}series([cb=>this._publishEntry(keys.routingKey,embedPublicKeyRecord||record,peerId,cb),cb=>this._publishPublicKey(keys.routingPubKey,publicKey,peerId,cb)],err=>{if(err){log.error(err);return callback(err);}callback(null,embedPublicKeyRecord||record);});});}_publishEntry(key,entry,peerId,callback){if(!Key.isKey(key)){const errMsg=`datastore key does not have a valid format`;log.error(errMsg);return callback(errcode(new Error(errMsg),'ERR_INVALID_DATASTORE_KEY'));}let entryData;try{entryData=ipns.marshal(entry);}catch(err){log.error(err);return callback(err);}this._routing.put(key.toBuffer(),entryData,(err,res)=>{if(err){const errMsg=`ipns record for ${key.toString()} could not be stored in the routing`;log.error(errMsg);return callback(errcode(new Error(errMsg),'ERR_PUTTING_TO_ROUTING'));}log(`ipns record for ${key.toString()} was stored in the routing`);callback(null,res);});}_publishPublicKey(key,publicKey,peerId,callback){if(!Key.isKey(key)){const errMsg=`datastore key does not have a valid format`;log.error(errMsg);return callback(errcode(new Error(errMsg),'ERR_INVALID_DATASTORE_KEY'));}if(!publicKey||!publicKey.bytes){const errMsg=`one or more of the provided parameters are not defined`;log.error(errMsg);return callback(errcode(new Error(errMsg),'ERR_UNDEFINED_PARAMETER'));}this._routing.put(key.toBuffer(),publicKey.bytes,(err,res)=>{if(err){const errMsg=`public key for ${key.toString()} could not be stored in the routing`;log.error(errMsg);return callback(errcode(new Error(errMsg),'ERR_PUTTING_TO_ROUTING'));}log(`public key for ${key.toString()} was stored in the routing`);callback(null,res);});}_getPublished(peerId,options,callback){if(!PeerId.isPeerId(peerId)){const errMsg=`peerId received is not valid`;log.error(errMsg);return callback(errcode(new Error(errMsg),'ERR_INVALID_PEER_ID'));}options=options||{};const checkRouting=options.checkRouting!==false;this._datastore.get(ipns.getLocalKey(peerId.id),(err,dsVal)=>{if(err){if(err.code!=='ERR_NOT_FOUND'){const errMsg=`unexpected error getting the ipns record ${peerId.id} from datastore`;log.error(errMsg);return callback(errcode(new Error(errMsg),'ERR_UNEXPECTED_DATASTORE_RESPONSE'));}if(!checkRouting){return callback(errcode(err));}let keys;try{keys=ipns.getIdKeys(peerId.toBytes());}catch(err){log.error(err);return callback(err);}this._routing.get(keys.routingKey.toBuffer(),(err,res)=>{if(err){return callback(err);}this._unmarshalData(res,callback);});}else{this._unmarshalData(dsVal,callback);}});}_unmarshalData(data,callback){let result;try{result=ipns.unmarshal(data);}catch(err){log.error(err);return callback(errcode(err,'ERR_INVALID_RECORD_DATA'));}callback(null,result);}_updateOrCreateRecord(privKey,value,validity,peerId,callback){if(!PeerId.isPeerId(peerId)){const errMsg=`peerId received is not valid`;log.error(errMsg);return callback(errcode(new Error(errMsg),'ERR_INVALID_PEER_ID'));}const getPublishedOptions={checkRouting:true};this._getPublished(peerId,getPublishedOptions,(err,record)=>{if(err){if(err.code!=='ERR_NOT_FOUND'){const errMsg=`unexpected error when determining the last published IPNS record for ${peerId.id}`;log.error(errMsg);return callback(errcode(new Error(errMsg),'ERR_DETERMINING_PUBLISHED_RECORD'));}}let seqNumber=0;if(record&&record.sequence!==undefined){seqNumber=record.value.toString()!==value?record.sequence+1:record.sequence;}ipns.create(privKey,value,seqNumber,validity,(err,entryData)=>{if(err){const errMsg=`ipns record for ${value} could not be created`;log.error(errMsg);return callback(errcode(new Error(errMsg),'ERR_CREATING_IPNS_RECORD'));}const data=ipns.marshal(entryData);this._datastore.put(ipns.getLocalKey(peerId.id),data,(err,res)=>{if(err){const errMsg=`ipns record for ${value} could not be stored in the datastore`;log.error(errMsg);return callback(errcode(new Error(errMsg),'ERR_STORING_IN_DATASTORE'));}log(`ipns record for ${value} was stored in the datastore`);callback(null,entryData);});});});}}exports=module.exports=IpnsPublisher;},9138:function(module,__unusedexports,__webpack_require__){"use strict";const lsPullStream=__webpack_require__(1320);const toStream=__webpack_require__(864);module.exports=context=>{return function mfsLsReadableStream(path,options={}){return toStream.source(lsPullStream(context)(path,options));};};},9141:function(module,__unusedexports,__webpack_require__){"use strict";const{URL,URLSearchParams,format}=__webpack_require__(774);const defaultBase='http://localhost';class URLWithLegacySupport extends URL{constructor(url,base=defaultBase){super(url,base);this.path=this.pathname+this.search;this.auth=this.username&&this.password?this.username+':'+this.password:null;this.query=this.search&&this.search.startsWith('?')?this.search.slice(1):null;}format(){return this.toString();}}module.exports={URLWithLegacySupport,URLSearchParams,format,defaultBase};},9180:function(module,__unusedexports,__webpack_require__){"use strict";var _=__webpack_require__(6064);var inherits=__webpack_require__(2915);var Input=__webpack_require__(6047);var Output=__webpack_require__(1143);var $=__webpack_require__(5107);var Script=__webpack_require__(5355);var Signature=__webpack_require__(406);var Sighash=__webpack_require__(9845);var PublicKey=__webpack_require__(4721);var BufferUtil=__webpack_require__(9657);var TransactionSignature=__webpack_require__(6877);function MultiSigScriptHashInput(input,pubkeys,threshold,signatures){Input.apply(this,arguments);var self=this;pubkeys=pubkeys||input.publicKeys;threshold=threshold||input.threshold;signatures=signatures||input.signatures;this.publicKeys=_.sortBy(pubkeys,function(publicKey){return publicKey.toString('hex');});this.redeemScript=Script.buildMultisigOut(this.publicKeys,threshold);$.checkState(Script.buildScriptHashOut(this.redeemScript).equals(this.output.script),'Provided public keys don\'t hash to the provided output');this.publicKeyIndex={};_.each(this.publicKeys,function(publicKey,index){self.publicKeyIndex[publicKey.toString()]=index;});this.threshold=threshold;this.signatures=signatures?this._deserializeSignatures(signatures):new Array(this.publicKeys.length);}inherits(MultiSigScriptHashInput,Input);MultiSigScriptHashInput.prototype.toObject=function(){var obj=Input.prototype.toObject.apply(this,arguments);obj.threshold=this.threshold;obj.publicKeys=_.map(this.publicKeys,function(publicKey){return publicKey.toString();});obj.signatures=this._serializeSignatures();return obj;};MultiSigScriptHashInput.prototype._deserializeSignatures=function(signatures){return _.map(signatures,function(signature){if(!signature){return undefined;}return new TransactionSignature(signature);});};MultiSigScriptHashInput.prototype._serializeSignatures=function(){return _.map(this.signatures,function(signature){if(!signature){return undefined;}return signature.toObject();});};MultiSigScriptHashInput.prototype.getSignatures=function(transaction,privateKey,index,sigtype){$.checkState(this.output instanceof Output);sigtype=sigtype||Signature.SIGHASH_ALL;var self=this;var results=[];_.each(this.publicKeys,function(publicKey){if(publicKey.toString()===privateKey.publicKey.toString()){results.push(new TransactionSignature({publicKey:privateKey.publicKey,prevTxId:self.prevTxId,outputIndex:self.outputIndex,inputIndex:index,signature:Sighash.sign(transaction,privateKey,sigtype,index,self.redeemScript),sigtype:sigtype}));}});return results;};MultiSigScriptHashInput.prototype.addSignature=function(transaction,signature){$.checkState(!this.isFullySigned(),'All needed signatures have already been added');$.checkArgument(!_.isUndefined(this.publicKeyIndex[signature.publicKey.toString()]),'Signature has no matching public key');$.checkState(this.isValidSignature(transaction,signature));this.signatures[this.publicKeyIndex[signature.publicKey.toString()]]=signature;this._updateScript();return this;};MultiSigScriptHashInput.prototype._updateScript=function(){this.setScript(Script.buildP2SHMultisigIn(this.publicKeys,this.threshold,this._createSignatures(),{cachedMultisig:this.redeemScript}));return this;};MultiSigScriptHashInput.prototype._createSignatures=function(){return _.map(_.filter(this.signatures,function(signature){return!_.isUndefined(signature);}),function(signature){return BufferUtil.concat([signature.signature.toDER(),BufferUtil.integerAsSingleByteBuffer(signature.sigtype)]);});};MultiSigScriptHashInput.prototype.clearSignatures=function(){this.signatures=new Array(this.publicKeys.length);this._updateScript();};MultiSigScriptHashInput.prototype.isFullySigned=function(){return this.countSignatures()===this.threshold;};MultiSigScriptHashInput.prototype.countMissingSignatures=function(){return this.threshold-this.countSignatures();};MultiSigScriptHashInput.prototype.countSignatures=function(){return _.reduce(this.signatures,function(sum,signature){return sum+!!signature;},0);};MultiSigScriptHashInput.prototype.publicKeysWithoutSignature=function(){var self=this;return _.filter(this.publicKeys,function(publicKey){return!self.signatures[self.publicKeyIndex[publicKey.toString()]];});};MultiSigScriptHashInput.prototype.isValidSignature=function(transaction,signature){signature.signature.nhashtype=signature.sigtype;return Sighash.verify(transaction,signature.signature,signature.publicKey,signature.inputIndex,this.redeemScript);};MultiSigScriptHashInput.OPCODES_SIZE=7;MultiSigScriptHashInput.SIGNATURE_SIZE=74;MultiSigScriptHashInput.PUBKEY_SIZE=34;MultiSigScriptHashInput.prototype._estimateSize=function(){return MultiSigScriptHashInput.OPCODES_SIZE+this.threshold*MultiSigScriptHashInput.SIGNATURE_SIZE+this.publicKeys.length*MultiSigScriptHashInput.PUBKEY_SIZE;};module.exports=MultiSigScriptHashInput;},9184:function(module,__unusedexports,__webpack_require__){var concatMap=__webpack_require__(7060);var balanced=__webpack_require__(9108);module.exports=expandTop;var escSlash='\0SLASH'+Math.random()+'\0';var escOpen='\0OPEN'+Math.random()+'\0';var escClose='\0CLOSE'+Math.random()+'\0';var escComma='\0COMMA'+Math.random()+'\0';var escPeriod='\0PERIOD'+Math.random()+'\0';function numeric(str){return parseInt(str,10)==str?parseInt(str,10):str.charCodeAt(0);}function escapeBraces(str){return str.split('\\\\').join(escSlash).split('\\{').join(escOpen).split('\\}').join(escClose).split('\\,').join(escComma).split('\\.').join(escPeriod);}function unescapeBraces(str){return str.split(escSlash).join('\\').split(escOpen).join('{').split(escClose).join('}').split(escComma).join(',').split(escPeriod).join('.');}function parseCommaParts(str){if(!str)return[''];var parts=[];var m=balanced('{','}',str);if(!m)return str.split(',');var pre=m.pre;var body=m.body;var post=m.post;var p=pre.split(',');p[p.length-1]+='{'+body+'}';var postParts=parseCommaParts(post);if(post.length){p[p.length-1]+=postParts.shift();p.push.apply(p,postParts);}parts.push.apply(parts,p);return parts;}function expandTop(str){if(!str)return[];if(str.substr(0,2)==='{}'){str='\\{\\}'+str.substr(2);}return expand(escapeBraces(str),true).map(unescapeBraces);}function identity(e){return e;}function embrace(str){return'{'+str+'}';}function isPadded(el){return /^-?0\d/.test(el);}function lte(i,y){return i<=y;}function gte(i,y){return i>=y;}function expand(str,isTop){var expansions=[];var m=balanced('{','}',str);if(!m||/\$$/.test(m.pre))return[str];var isNumericSequence=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(m.body);var isAlphaSequence=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(m.body);var isSequence=isNumericSequence||isAlphaSequence;var isOptions=m.body.indexOf(',')>=0;if(!isSequence&&!isOptions){if(m.post.match(/,.*\}/)){str=m.pre+'{'+m.body+escClose+m.post;return expand(str);}return[str];}var n;if(isSequence){n=m.body.split(/\.\./);}else{n=parseCommaParts(m.body);if(n.length===1){n=expand(n[0],false).map(embrace);if(n.length===1){var post=m.post.length?expand(m.post,false):[''];return post.map(function(p){return m.pre+n[0]+p;});}}}var pre=m.pre;var post=m.post.length?expand(m.post,false):[''];var N;if(isSequence){var x=numeric(n[0]);var y=numeric(n[1]);var width=Math.max(n[0].length,n[1].length);var incr=n.length==3?Math.abs(numeric(n[2])):1;var test=lte;var reverse=y<x;if(reverse){incr*=-1;test=gte;}var pad=n.some(isPadded);N=[];for(var i=x;test(i,y);i+=incr){var c;if(isAlphaSequence){c=String.fromCharCode(i);if(c==='\\')c='';}else{c=String(i);if(pad){var need=width-c.length;if(need>0){var z=new Array(need+1).join('0');if(i<0)c='-'+z+c.slice(1);else c=z+c;}}}N.push(c);}}else{N=concatMap(n,function(el){return expand(el,false);});}for(var j=0;j<N.length;j++){for(var k=0;k<post.length;k++){var expansion=pre+N[j]+post[k];if(!isTop||isSequence||expansion)expansions.push(expansion);}}return expansions;}},9197:function(module,exports,__webpack_require__){"use strict";const handler=__webpack_require__(5926);exports=module.exports=__webpack_require__(5620);exports.mount=handler.mount;exports.unmount=handler.unmount;},9198:function(module,__unusedexports,__webpack_require__){module.exports={input:__webpack_require__(282),output:__webpack_require__(983)};},9216:function(module,__unusedexports,__webpack_require__){var assocIndexOf=__webpack_require__(4292);var arrayProto=Array.prototype;var splice=arrayProto.splice;function listCacheDelete(key){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){return false;}var lastIndex=data.length-1;if(index==lastIndex){data.pop();}else{splice.call(data,index,1);}--this.size;return true;}module.exports=listCacheDelete;},9222:function(module){var s=1000;var m=s*60;var h=m*60;var d=h*24;var y=d*365.25;module.exports=function(val,options){options=options||{};var type=typeof val;if(type==='string'&&val.length>0){return parse(val);}else if(type==='number'&&isNaN(val)===false){return options.long?fmtLong(val):fmtShort(val);}throw new Error('val is not a non-empty string or a valid number. val='+JSON.stringify(val));};function parse(str){str=String(str);if(str.length>100){return;}var match=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(str);if(!match){return;}var n=parseFloat(match[1]);var type=(match[2]||'ms').toLowerCase();switch(type){case'years':case'year':case'yrs':case'yr':case'y':return n*y;case'days':case'day':case'd':return n*d;case'hours':case'hour':case'hrs':case'hr':case'h':return n*h;case'minutes':case'minute':case'mins':case'min':case'm':return n*m;case'seconds':case'second':case'secs':case'sec':case's':return n*s;case'milliseconds':case'millisecond':case'msecs':case'msec':case'ms':return n;default:return undefined;}}function fmtShort(ms){if(ms>=d){return Math.round(ms/d)+'d';}if(ms>=h){return Math.round(ms/h)+'h';}if(ms>=m){return Math.round(ms/m)+'m';}if(ms>=s){return Math.round(ms/s)+'s';}return ms+'ms';}function fmtLong(ms){return plural(ms,d,'day')||plural(ms,h,'hour')||plural(ms,m,'minute')||plural(ms,s,'second')||ms+' ms';}function plural(ms,n,name){if(ms<n){return;}if(ms<n*1.5){return Math.floor(ms/n)+' '+name;}return Math.ceil(ms/n)+' '+name+'s';}},9226:function(module,__unusedexports,__webpack_require__){"use strict";const through=__webpack_require__(6308);const DEFAULT_MAX_LENGTH=100;module.exports=function block(_maxLength){const maxLength=_maxLength||DEFAULT_MAX_LENGTH;var buffered=[];return through(function transform(data){buffered=buffered.concat(data);while(buffered.length>=maxLength){const end=maxLength;const slice=buffered.slice(0,end);buffered=buffered.slice(end);this.queue(slice);}},function flush(end){if(buffered.length){this.queue(buffered);buffered=[];}this.queue(null);});};},9237:function(module,__unusedexports,__webpack_require__){"use strict";const multihashing=__webpack_require__(9424);const protobuf=__webpack_require__(817);const bs58=__webpack_require__(4967);const nextTick=__webpack_require__(7173);const crypto=__webpack_require__(1080);const pbm=protobuf(__webpack_require__(8278));__webpack_require__(6709);__webpack_require__(9457);const forge=__webpack_require__(7938);class RsaPublicKey{constructor(key){this._key=key;}verify(data,sig,callback){ensure(callback);crypto.hashAndVerify(this._key,sig,data,callback);}marshal(){return crypto.utils.jwkToPkix(this._key);}get bytes(){return pbm.PublicKey.encode({Type:pbm.KeyType.RSA,Data:this.marshal()});}encrypt(bytes){return this._key.encrypt(bytes,'RSAES-PKCS1-V1_5');}equals(key){return this.bytes.equals(key.bytes);}hash(callback){ensure(callback);multihashing(this.bytes,'sha2-256',callback);}}class RsaPrivateKey{constructor(key,publicKey){this._key=key;this._publicKey=publicKey;}genSecret(){return crypto.getRandomValues(16);}sign(message,callback){ensure(callback);crypto.hashAndSign(this._key,message,callback);}get public(){if(!this._publicKey){throw new Error('public key not provided');}return new RsaPublicKey(this._publicKey);}decrypt(msg,callback){crypto.decrypt(this._key,msg,callback);}marshal(){return crypto.utils.jwkToPkcs1(this._key);}get bytes(){return pbm.PrivateKey.encode({Type:pbm.KeyType.RSA,Data:this.marshal()});}equals(key){return this.bytes.equals(key.bytes);}hash(callback){ensure(callback);multihashing(this.bytes,'sha2-256',callback);}id(callback){this.public.hash((err,hash)=>{if(err){return callback(err);}callback(null,bs58.encode(hash));});}export(format,password,callback){if(typeof password==='function'){callback=password;password=format;format='pkcs-8';}ensure(callback);nextTick(()=>{let err=null;let pem=null;try{const buffer=new forge.util.ByteBuffer(this.marshal());const asn1=forge.asn1.fromDer(buffer);const privateKey=forge.pki.privateKeyFromAsn1(asn1);if(format==='pkcs-8'){const options={algorithm:'aes256',count:10000,saltSize:128/8,prfAlgorithm:'sha512'};pem=forge.pki.encryptRsaPrivateKey(privateKey,password,options);}else{err=new Error(`Unknown export format '${format}'`);}}catch(_err){err=_err;}callback(err,pem);});}}function unmarshalRsaPrivateKey(bytes,callback){const jwk=crypto.utils.pkcs1ToJwk(bytes);crypto.unmarshalPrivateKey(jwk,(err,keys)=>{if(err){return callback(err);}callback(null,new RsaPrivateKey(keys.privateKey,keys.publicKey));});}function unmarshalRsaPublicKey(bytes){const jwk=crypto.utils.pkixToJwk(bytes);return new RsaPublicKey(jwk);}function fromJwk(jwk,callback){crypto.unmarshalPrivateKey(jwk,(err,keys)=>{if(err){return callback(err);}callback(null,new RsaPrivateKey(keys.privateKey,keys.publicKey));});}function generateKeyPair(bits,callback){crypto.generateKey(bits,(err,keys)=>{if(err){return callback(err);}callback(null,new RsaPrivateKey(keys.privateKey,keys.publicKey));});}function ensure(callback){if(typeof callback!=='function'){throw new Error('callback is required');}}module.exports={RsaPublicKey,RsaPrivateKey,unmarshalRsaPublicKey,unmarshalRsaPrivateKey,generateKeyPair,fromJwk};},9241:function(module,exports,__webpack_require__){"use strict";const multicastDNS=__webpack_require__(6244);const EventEmitter=__webpack_require__(4859).EventEmitter;const assert=__webpack_require__(3930);const debug=__webpack_require__(746);const log=debug('libp2p:mdns');const query=__webpack_require__(3911);class MulticastDNS extends EventEmitter{constructor(options){super();assert(options.peerInfo,'needs a PeerInfo to work');this.broadcast=options.broadcast!==false;this.interval=options.interval||1e3*10;this.serviceTag=options.serviceTag||'ipfs.local';this.port=options.port||5353;this.peerInfo=options.peerInfo;this._queryInterval=null;}start(callback){const self=this;const mdns=multicastDNS({port:this.port});this.mdns=mdns;this._queryInterval=query.queryLAN(this.mdns,this.serviceTag,this.interval);mdns.on('response',event=>{query.gotResponse(event,this.peerInfo,this.serviceTag,(err,foundPeer)=>{if(err){return log('Error processing peer response',err);}self.emit('peer',foundPeer);});});mdns.on('query',event=>{query.gotQuery(event,this.mdns,this.peerInfo,this.serviceTag,this.broadcast);});setImmediate(()=>callback());}stop(callback){if(!this.mdns){callback(new Error('MulticastDNS service had not started yet'));}else{clearInterval(this._queryInterval);this._queryInterval=null;this.mdns.destroy(callback);this.mdns=undefined;}}}exports=module.exports=MulticastDNS;exports.tag='mdns';},9242:function(module,__unusedexports,__webpack_require__){"use strict";const mafmt=__webpack_require__(7511);const multiaddr=__webpack_require__(5920);const CircuitDialer=__webpack_require__(5259);const utilsFactory=__webpack_require__(6496);const debug=__webpack_require__(746);const log=debug('libp2p:circuit:transportdialer');log.err=debug('libp2p:circuit:error:transportdialer');const createListener=__webpack_require__(6983);class Circuit{static get tag(){return'Circuit';}constructor(swarm,options){this.options=options||{};this.swarm=swarm;this.dialer=null;this.utils=utilsFactory(swarm);this.peerInfo=this.swarm._peerInfo;this.relays=this.filter(this.peerInfo.multiaddrs.toArray());if(this.relays.length===0){this.peerInfo.multiaddrs.add(`/p2p-circuit/ipfs/${this.peerInfo.id.toB58String()}`);}this.dialer=new CircuitDialer(swarm,options);this.swarm.on('peer-mux-established',peerInfo=>{this.dialer.canHop(peerInfo);});this.swarm.on('peer-mux-closed',peerInfo=>{this.dialer.relayPeers.delete(peerInfo.id.toB58String());});}_dialSwarmRelays(){this.relays.forEach(relay=>{let relaySegments=relay.toString().split('/p2p-circuit').filter(segment=>segment.length);relaySegments.forEach(relaySegment=>{const ma=this.utils.peerInfoFromMa(multiaddr(relaySegment));this.dialer._dialRelay(ma);});});}dial(ma,options,cb){return this.dialer.dial(ma,options,cb);}createListener(options,handler){if(typeof options==='function'){handler=options;options=this.options||{};}const listener=createListener(this.swarm,options,handler);listener.on('listen',this._dialSwarmRelays.bind(this));return listener;}filter(multiaddrs){if(!Array.isArray(multiaddrs)){multiaddrs=[multiaddrs];}return multiaddrs.filter(ma=>{return mafmt.Circuit.matches(ma);});}}module.exports=Circuit;},9262:function(module,__unusedexports,__webpack_require__){var Hash=__webpack_require__(1094),ListCache=__webpack_require__(3188),Map=__webpack_require__(6995);function mapCacheClear(){this.size=0;this.__data__={'hash':new Hash(),'map':new(Map||ListCache)(),'string':new Hash()};}module.exports=mapCacheClear;},9264:function(module){const events={};const observable=worker=>{worker.addEventListener('message',event=>{observable.dispatchEvent('message',worker,event);});if(worker.port){worker.port.addEventListener('message',event=>{observable.dispatchEvent('message',worker,event);});}};observable.addEventListener=(type,fn)=>{if(!events[type]){events[type]=[];}events[type].push(fn);};observable.removeEventListener=(type,fn)=>{if(!events[type]){return;}events[type]=events[type].filter(listener=>listener===fn);};observable.dispatchEvent=function(){const args=Array.prototype.slice.call(arguments);const type=args.shift();if(!events[type]){return;}events[type].forEach(fn=>fn.apply(null,args));};module.exports=observable;},9265:function(module,__unusedexports,__webpack_require__){"use strict";const PeerId=__webpack_require__(1832);const{ensureMultiaddr}=__webpack_require__(4216);const MultiaddrSet=__webpack_require__(799);const assert=__webpack_require__(3930);class PeerInfo{constructor(peerId){assert(peerId,'Missing peerId. Use Peer.create(cb) to create one');this.id=peerId;this.multiaddrs=new MultiaddrSet();this.protocols=new Set();this._connectedMultiaddr=undefined;}connect(ma){ma=ensureMultiaddr(ma);if(!this.multiaddrs.has(ma)&&ma.toString()!==`/ipfs/${this.id.toB58String()}`){throw new Error('can\'t be connected to missing multiaddr from set');}this._connectedMultiaddr=ma;}disconnect(){this._connectedMultiaddr=undefined;}isConnected(){return this._connectedMultiaddr;}}PeerInfo.create=(peerId,callback)=>{if(typeof peerId==='function'){callback=peerId;peerId=null;PeerId.create((err,id)=>{if(err){return callback(err);}callback(null,new PeerInfo(id));});return;}if(typeof peerId.toJSON==='function'){callback(null,new PeerInfo(peerId));}else{PeerId.createFromJSON(peerId,(err,id)=>callback(err,new PeerInfo(id)));}};PeerInfo.isPeerInfo=peerInfo=>{return Boolean(typeof peerInfo==='object'&&peerInfo.id&&peerInfo.multiaddrs);};module.exports=PeerInfo;},9266:function(module){module.exports=Backoff;function Backoff(opts){opts=opts||{};this.ms=opts.min||100;this.max=opts.max||10000;this.factor=opts.factor||2;this.jitter=opts.jitter>0&&opts.jitter<=1?opts.jitter:0;this.attempts=0;}Backoff.prototype.duration=function(){var ms=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var rand=Math.random();var deviation=Math.floor(rand*this.jitter*ms);ms=(Math.floor(rand*10)&1)==0?ms-deviation:ms+deviation;}return Math.min(ms,this.max)|0;};Backoff.prototype.reset=function(){this.attempts=0;};Backoff.prototype.setMin=function(min){this.ms=min;};Backoff.prototype.setMax=function(max){this.max=max;};Backoff.prototype.setJitter=function(jitter){this.jitter=jitter;};},9268:function(module,__unusedexports,__webpack_require__){"use strict";module.exports={pk:__webpack_require__(4229)};},9273:function(module,exports,__webpack_require__){"use strict";const setImmediate=__webpack_require__(7368);const waterfall=__webpack_require__(4265);const multihashing=__webpack_require__(9424);const CID=__webpack_require__(9339);const resolver=__webpack_require__(7215);const gitUtil=__webpack_require__(4831);const commit=__webpack_require__(4058);const tag=__webpack_require__(4846);const tree=__webpack_require__(9300);exports=module.exports;exports.serialize=(dagNode,callback)=>{if(dagNode===null){setImmediate(()=>callback(new Error('dagNode passed to serialize was null'),null));return;}if(Buffer.isBuffer(dagNode)){if(dagNode.slice(0,4).toString()==='blob'){setImmediate(()=>callback(null,dagNode));}else{setImmediate(()=>callback(new Error('unexpected dagNode passed to serialize'),null));}return;}switch(dagNode.gitType){case'commit':commit.serialize(dagNode,callback);break;case'tag':tag.serialize(dagNode,callback);break;default:tree.serialize(dagNode,callback);}};exports.deserialize=(data,callback)=>{let headLen=gitUtil.find(data,0);let head=data.slice(0,headLen).toString();let typeLen=head.match(/([^ ]+) (\d+)/);if(!typeLen){setImmediate(()=>callback(new Error('invalid object header'),null));return;}switch(typeLen[1]){case'blob':callback(null,data);break;case'commit':commit.deserialize(data.slice(headLen+1),callback);break;case'tag':tag.deserialize(data.slice(headLen+1),callback);break;case'tree':tree.deserialize(data.slice(headLen+1),callback);break;default:setImmediate(()=>callback(new Error('unknown object type '+typeLen[1]),null));}};exports.cid=(dagNode,options,callback)=>{if(typeof options==='function'){callback=options;options={};}options=options||{};const hashAlg=options.hashAlg||resolver.defaultHashAlg;const version=typeof options.version==='undefined'?1:options.version;waterfall([cb=>exports.serialize(dagNode,cb),(serialized,cb)=>multihashing(serialized,hashAlg,cb),(mh,cb)=>cb(null,new CID(version,resolver.multicodec,mh))],callback);};},9274:function(module,__unusedexports,__webpack_require__){var freeGlobal=__webpack_require__(4879);var freeSelf=typeof self=='object'&&self&&self.Object===Object&&self;var root=freeGlobal||freeSelf||Function('return this')();module.exports=root;},9275:function(module){"use strict";module.exports={relay:'/libp2p/circuit/relay/0.1.0'};},9276:function(module,__unusedexports,__webpack_require__){"use strict";var BN=__webpack_require__(5584);var HmacDRBG=__webpack_require__(5889);var elliptic=__webpack_require__(3459);var utils=elliptic.utils;var assert=utils.assert;var KeyPair=__webpack_require__(652);var Signature=__webpack_require__(1259);function EC(options){if(!(this instanceof EC))return new EC(options);if(typeof options==='string'){assert(elliptic.curves.hasOwnProperty(options),'Unknown curve '+options);options=elliptic.curves[options];}if(options instanceof elliptic.curves.PresetCurve)options={curve:options};this.curve=options.curve.curve;this.n=this.curve.n;this.nh=this.n.ushrn(1);this.g=this.curve.g;this.g=options.curve.g;this.g.precompute(options.curve.n.bitLength()+1);this.hash=options.hash||options.curve.hash;}module.exports=EC;EC.prototype.keyPair=function keyPair(options){return new KeyPair(this,options);};EC.prototype.keyFromPrivate=function keyFromPrivate(priv,enc){return KeyPair.fromPrivate(this,priv,enc);};EC.prototype.keyFromPublic=function keyFromPublic(pub,enc){return KeyPair.fromPublic(this,pub,enc);};EC.prototype.genKeyPair=function genKeyPair(options){if(!options)options={};var drbg=new HmacDRBG({hash:this.hash,pers:options.pers,persEnc:options.persEnc||'utf8',entropy:options.entropy||elliptic.rand(this.hash.hmacStrength),entropyEnc:options.entropy&&options.entropyEnc||'utf8',nonce:this.n.toArray()});var bytes=this.n.byteLength();var ns2=this.n.sub(new BN(2));do{var priv=new BN(drbg.generate(bytes));if(priv.cmp(ns2)>0)continue;priv.iaddn(1);return this.keyFromPrivate(priv);}while(true);};EC.prototype._truncateToN=function truncateToN(msg,truncOnly){var delta=msg.byteLength()*8-this.n.bitLength();if(delta>0)msg=msg.ushrn(delta);if(!truncOnly&&msg.cmp(this.n)>=0)return msg.sub(this.n);else return msg;};EC.prototype.sign=function sign(msg,key,enc,options){if(typeof enc==='object'){options=enc;enc=null;}if(!options)options={};key=this.keyFromPrivate(key,enc);msg=this._truncateToN(new BN(msg,16));var bytes=this.n.byteLength();var bkey=key.getPrivate().toArray('be',bytes);var nonce=msg.toArray('be',bytes);var drbg=new HmacDRBG({hash:this.hash,entropy:bkey,nonce:nonce,pers:options.pers,persEnc:options.persEnc||'utf8'});var ns1=this.n.sub(new BN(1));for(var iter=0;true;iter++){var k=options.k?options.k(iter):new BN(drbg.generate(this.n.byteLength()));k=this._truncateToN(k,true);if(k.cmpn(1)<=0||k.cmp(ns1)>=0)continue;var kp=this.g.mul(k);if(kp.isInfinity())continue;var kpX=kp.getX();var r=kpX.umod(this.n);if(r.cmpn(0)===0)continue;var s=k.invm(this.n).mul(r.mul(key.getPrivate()).iadd(msg));s=s.umod(this.n);if(s.cmpn(0)===0)continue;var recoveryParam=(kp.getY().isOdd()?1:0)|(kpX.cmp(r)!==0?2:0);if(options.canonical&&s.cmp(this.nh)>0){s=this.n.sub(s);recoveryParam^=1;}return new Signature({r:r,s:s,recoveryParam:recoveryParam});}};EC.prototype.verify=function verify(msg,signature,key,enc){msg=this._truncateToN(new BN(msg,16));key=this.keyFromPublic(key,enc);signature=new Signature(signature,'hex');var r=signature.r;var s=signature.s;if(r.cmpn(1)<0||r.cmp(this.n)>=0)return false;if(s.cmpn(1)<0||s.cmp(this.n)>=0)return false;var sinv=s.invm(this.n);var u1=sinv.mul(msg).umod(this.n);var u2=sinv.mul(r).umod(this.n);if(!this.curve._maxwellTrick){var p=this.g.mulAdd(u1,key.getPublic(),u2);if(p.isInfinity())return false;return p.getX().umod(this.n).cmp(r)===0;}var p=this.g.jmulAdd(u1,key.getPublic(),u2);if(p.isInfinity())return false;return p.eqXToP(r);};EC.prototype.recoverPubKey=function(msg,signature,j,enc){assert((3&j)===j,'The recovery param is more than two bits');signature=new Signature(signature,enc);var n=this.n;var e=new BN(msg);var r=signature.r;var s=signature.s;var isYOdd=j&1;var isSecondKey=j>>1;if(r.cmp(this.curve.p.umod(this.curve.n))>=0&&isSecondKey)throw new Error('Unable to find sencond key candinate');if(isSecondKey)r=this.curve.pointFromX(r.add(this.curve.n),isYOdd);else r=this.curve.pointFromX(r,isYOdd);var rInv=signature.r.invm(n);var s1=n.sub(e).mul(rInv).umod(n);var s2=s.mul(rInv).umod(n);return this.g.mulAdd(s1,r,s2);};EC.prototype.getKeyRecoveryParam=function(e,signature,Q,enc){signature=new Signature(signature,enc);if(signature.recoveryParam!==null)return signature.recoveryParam;for(var i=0;i<4;i++){var Qprime;try{Qprime=this.recoverPubKey(e,signature,i);}catch(e){continue;}if(Qprime.eq(Q))return i;}throw new Error('Unable to find valid recovery factor');};},9281:function(module){module.exports=function(ary){var capped=!!ary;var inputs=(ary||[]).map(create),i=0,abort,cb;function create(stream){return{ready:false,reading:false,ended:false,read:stream,data:null};}function check(){if(!cb)return;clean();var l=inputs.length;var _cb=cb;if(l===0&&(abort||capped)){cb=null;_cb(abort||true);return;}for(var j=0;j<l;j++){var current=inputs[(i+j)%l];if(current.ready&&!current.ended){var data=current.data;current.ready=false;current.data=null;i++;cb=null;return _cb(null,data);}}}function clean(){var l=inputs.length;while(l--){if(inputs[l].ended)inputs.splice(l,1);}}function next(){var l=inputs.length;while(l--)(function(current){if(l>inputs.length)throw new Error('this should never happen');if(current.reading||current.ended||current.ready)return;current.reading=true;var sync=true;current.read(abort,function next(end,data){current.data=data;current.ready=true;current.reading=false;if(end===true||abort)current.ended=true;else if(end)abort=current.ended=end;if(abort&&!end)current.read(abort,next);if(!sync)check();});sync=false;})(inputs[l]);check();}function read(_abort,_cb){abort=abort||_abort;cb=_cb;next();}read.add=function(stream){if(!stream){capped=true;return next();}inputs.push(create(stream));next();};read.cap=function(err){read.add(null);};return read;};},9291:function(module,__unusedexports,__webpack_require__){"use strict";const randomBytes=__webpack_require__(4989);const{EventEmitter}=__webpack_require__(4859);function arrayEquals(array1,array2){if(array1===array2){return true;}if(array1.length!==array2.length){return false;}for(let i=0,length=array1.length;i<length;++i){if(array1[i]!==array2[i]){return false;}}return true;}function createNode(){return{contacts:[],dontSplit:false,left:null,right:null};}function ensureInt8(name,val){if(!(val instanceof Uint8Array)){throw new TypeError(name+' is not a Uint8Array');}}class KBucket extends EventEmitter{constructor(options={}){super();this.localNodeId=options.localNodeId||randomBytes(20);this.numberOfNodesPerKBucket=options.numberOfNodesPerKBucket||20;this.numberOfNodesToPing=options.numberOfNodesToPing||3;this.distance=options.distance||KBucket.distance;this.arbiter=options.arbiter||KBucket.arbiter;this.metadata=Object.assign({},options.metadata);ensureInt8('option.localNodeId as parameter 1',this.localNodeId);this.root=createNode();}static arbiter(incumbent,candidate){return incumbent.vectorClock>candidate.vectorClock?incumbent:candidate;}static distance(firstId,secondId){let distance=0;let i=0;const min=Math.min(firstId.length,secondId.length);const max=Math.max(firstId.length,secondId.length);for(;i<min;++i){distance=distance*256+(firstId[i]^secondId[i]);}for(;i<max;++i)distance=distance*256+255;return distance;}add(contact){ensureInt8('contact.id',(contact||{}).id);let bitIndex=0;let node=this.root;while(node.contacts===null){node=this._determineNode(node,contact.id,bitIndex++);}const index=this._indexOf(node,contact.id);if(index>=0){this._update(node,index,contact);return this;}if(node.contacts.length<this.numberOfNodesPerKBucket){node.contacts.push(contact);this.emit('added',contact);return this;}if(node.dontSplit){this.emit('ping',node.contacts.slice(0,this.numberOfNodesToPing),contact);return this;}this._split(node,bitIndex);return this.add(contact);}closest(id,n=Infinity){ensureInt8('id',id);if(!Number.isInteger(n)&&n!==Infinity||n<=0){throw new TypeError('n is not positive number');}let contacts=[];for(let nodes=[this.root],bitIndex=0;nodes.length>0&&contacts.length<n;){const node=nodes.pop();if(node.contacts===null){const detNode=this._determineNode(node,id,bitIndex++);nodes.push(node.left===detNode?node.right:node.left);nodes.push(detNode);}else{contacts=contacts.concat(node.contacts);}}return contacts.map(a=>[this.distance(a.id,id),a]).sort((a,b)=>a[0]-b[0]).slice(0,n).map(a=>a[1]);}count(){let count=0;for(const nodes=[this.root];nodes.length>0;){const node=nodes.pop();if(node.contacts===null)nodes.push(node.right,node.left);else count+=node.contacts.length;}return count;}_determineNode(node,id,bitIndex){const bytesDescribedByBitIndex=bitIndex>>3;const bitIndexWithinByte=bitIndex%8;if(id.length<=bytesDescribedByBitIndex&&bitIndexWithinByte!==0){return node.left;}const byteUnderConsideration=id[bytesDescribedByBitIndex];if(byteUnderConsideration&1<<7-bitIndexWithinByte){return node.right;}return node.left;}get(id){ensureInt8('id',id);let bitIndex=0;let node=this.root;while(node.contacts===null){node=this._determineNode(node,id,bitIndex++);}const index=this._indexOf(node,id);return index>=0?node.contacts[index]:null;}_indexOf(node,id){for(let i=0;i<node.contacts.length;++i){if(arrayEquals(node.contacts[i].id,id))return i;}return-1;}remove(id){ensureInt8('the id as parameter 1',id);let bitIndex=0;let node=this.root;while(node.contacts===null){node=this._determineNode(node,id,bitIndex++);}const index=this._indexOf(node,id);if(index>=0){const contact=node.contacts.splice(index,1)[0];this.emit('removed',contact);}return this;}_split(node,bitIndex){node.left=createNode();node.right=createNode();for(const contact of node.contacts){this._determineNode(node,contact.id,bitIndex).contacts.push(contact);}node.contacts=null;const detNode=this._determineNode(node,this.localNodeId,bitIndex);const otherNode=node.left===detNode?node.right:node.left;otherNode.dontSplit=true;}toArray(){let result=[];for(const nodes=[this.root];nodes.length>0;){const node=nodes.pop();if(node.contacts===null)nodes.push(node.right,node.left);else result=result.concat(node.contacts);}return result;}_update(node,index,contact){if(!arrayEquals(node.contacts[index].id,contact.id)){throw new Error('wrong index for _update');}const incumbent=node.contacts[index];const selection=this.arbiter(incumbent,contact);if(selection===incumbent&&incumbent!==contact)return;node.contacts.splice(index,1);node.contacts.push(selection);this.emit('updated',incumbent,selection);}}module.exports=KBucket;},9300:function(module,exports,__webpack_require__){"use strict";const setImmediate=__webpack_require__(7368);const SmartBuffer=__webpack_require__(1190).SmartBuffer;const gitUtil=__webpack_require__(4831);exports=module.exports;exports.serialize=(dagNode,callback)=>{let entries=[];Object.keys(dagNode).forEach(name=>{entries.push([name,dagNode[name]]);});entries.sort((a,b)=>a[0]>b[0]?1:-1);let buf=new SmartBuffer();entries.forEach(entry=>{buf.writeStringNT(entry[1].mode+' '+entry[0]);buf.writeBuffer(gitUtil.cidToSha(entry[1].hash['/']));});let outBuf=new SmartBuffer();outBuf.writeString('tree ');outBuf.writeString(buf.length.toString());outBuf.writeUInt8(0);outBuf.writeBuffer(buf.toBuffer());setImmediate(()=>callback(null,outBuf.toBuffer()));};exports.deserialize=(data,callback)=>{let res={};let buf=SmartBuffer.fromBuffer(data,'utf8');for(;;){let modeName=buf.readStringNT();if(modeName===''){break;}let hash=buf.readBuffer(gitUtil.SHA1_LENGTH);let modNameMatched=modeName.match(/^(\d+) (.+)$/);if(!modNameMatched){setImmediate(()=>callback(new Error('invalid file mode/name')));}if(res[modNameMatched[2]]){setImmediate(()=>callback(new Error('duplicate file in tree')));}res[modNameMatched[2]]={mode:modNameMatched[1],hash:{'/':gitUtil.shaToCid(hash)}};}setImmediate(()=>callback(null,res));};},9305:function(module,__unusedexports,__webpack_require__){var memoize=__webpack_require__(2760);var MAX_MEMOIZE_SIZE=500;function memoizeCapped(func){var result=memoize(func,function(key){if(cache.size===MAX_MEMOIZE_SIZE){cache.clear();}return key;});var cache=result.cache;return result;}module.exports=memoizeCapped;},9310:function(module,__unusedexports,__webpack_require__){"use strict";var DuplexStream=__webpack_require__(5285).Duplex,util=__webpack_require__(649),Buffer=__webpack_require__(7572).Buffer;function BufferList(callback){if(!(this instanceof BufferList))return new BufferList(callback);this._bufs=[];this.length=0;if(typeof callback=='function'){this._callback=callback;var piper=function piper(err){if(this._callback){this._callback(err);this._callback=null;}}.bind(this);this.on('pipe',function onPipe(src){src.on('error',piper);});this.on('unpipe',function onUnpipe(src){src.removeListener('error',piper);});}else{this.append(callback);}DuplexStream.call(this);}util.inherits(BufferList,DuplexStream);BufferList.prototype._offset=function _offset(offset){var tot=0,i=0,_t;if(offset===0)return[0,0];for(;i<this._bufs.length;i++){_t=tot+this._bufs[i].length;if(offset<_t||i==this._bufs.length-1){return[i,offset-tot];}tot=_t;}};BufferList.prototype._reverseOffset=function(blOffset){var bufferId=blOffset[0];var offset=blOffset[1];for(var i=0;i<bufferId;i++){offset+=this._bufs[i].length;}return offset;};BufferList.prototype.append=function append(buf){var i=0;if(Buffer.isBuffer(buf)){this._appendBuffer(buf);}else if(Array.isArray(buf)){for(;i<buf.length;i++)this.append(buf[i]);}else if(buf instanceof BufferList){for(;i<buf._bufs.length;i++)this.append(buf._bufs[i]);}else if(buf!=null){if(typeof buf=='number')buf=buf.toString();this._appendBuffer(Buffer.from(buf));}return this;};BufferList.prototype._appendBuffer=function appendBuffer(buf){this._bufs.push(buf);this.length+=buf.length;};BufferList.prototype._write=function _write(buf,encoding,callback){this._appendBuffer(buf);if(typeof callback=='function')callback();};BufferList.prototype._read=function _read(size){if(!this.length)return this.push(null);size=Math.min(size,this.length);this.push(this.slice(0,size));this.consume(size);};BufferList.prototype.end=function end(chunk){DuplexStream.prototype.end.call(this,chunk);if(this._callback){this._callback(null,this.slice());this._callback=null;}};BufferList.prototype.get=function get(index){if(index>this.length||index<0){return undefined;}var offset=this._offset(index);return this._bufs[offset[0]][offset[1]];};BufferList.prototype.slice=function slice(start,end){if(typeof start=='number'&&start<0)start+=this.length;if(typeof end=='number'&&end<0)end+=this.length;return this.copy(null,0,start,end);};BufferList.prototype.copy=function copy(dst,dstStart,srcStart,srcEnd){if(typeof srcStart!='number'||srcStart<0)srcStart=0;if(typeof srcEnd!='number'||srcEnd>this.length)srcEnd=this.length;if(srcStart>=this.length)return dst||Buffer.alloc(0);if(srcEnd<=0)return dst||Buffer.alloc(0);var copy=!!dst,off=this._offset(srcStart),len=srcEnd-srcStart,bytes=len,bufoff=copy&&dstStart||0,start=off[1],l,i;if(srcStart===0&&srcEnd==this.length){if(!copy){return this._bufs.length===1?this._bufs[0]:Buffer.concat(this._bufs,this.length);}for(i=0;i<this._bufs.length;i++){this._bufs[i].copy(dst,bufoff);bufoff+=this._bufs[i].length;}return dst;}if(bytes<=this._bufs[off[0]].length-start){return copy?this._bufs[off[0]].copy(dst,dstStart,start,start+bytes):this._bufs[off[0]].slice(start,start+bytes);}if(!copy)dst=Buffer.allocUnsafe(len);for(i=off[0];i<this._bufs.length;i++){l=this._bufs[i].length-start;if(bytes>l){this._bufs[i].copy(dst,bufoff,start);}else{this._bufs[i].copy(dst,bufoff,start,start+bytes);break;}bufoff+=l;bytes-=l;if(start)start=0;}return dst;};BufferList.prototype.shallowSlice=function shallowSlice(start,end){start=start||0;end=typeof end!=='number'?this.length:end;if(start<0)start+=this.length;if(end<0)end+=this.length;if(start===end){return new BufferList();}var startOffset=this._offset(start),endOffset=this._offset(end),buffers=this._bufs.slice(startOffset[0],endOffset[0]+1);if(endOffset[1]==0)buffers.pop();else buffers[buffers.length-1]=buffers[buffers.length-1].slice(0,endOffset[1]);if(startOffset[1]!=0)buffers[0]=buffers[0].slice(startOffset[1]);return new BufferList(buffers);};BufferList.prototype.toString=function toString(encoding,start,end){return this.slice(start,end).toString(encoding);};BufferList.prototype.consume=function consume(bytes){while(this._bufs.length){if(bytes>=this._bufs[0].length){bytes-=this._bufs[0].length;this.length-=this._bufs[0].length;this._bufs.shift();}else{this._bufs[0]=this._bufs[0].slice(bytes);this.length-=bytes;break;}}return this;};BufferList.prototype.duplicate=function duplicate(){var i=0,copy=new BufferList();for(;i<this._bufs.length;i++)copy.append(this._bufs[i]);return copy;};BufferList.prototype.destroy=function destroy(){this._bufs.length=0;this.length=0;this.push(null);};BufferList.prototype.indexOf=function(search,offset,encoding){if(encoding===undefined&&typeof offset==='string'){encoding=offset;offset=undefined;}if(typeof search==='function'||Array.isArray(search)){throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');}else if(typeof search==='number'){search=Buffer.from([search]);}else if(typeof search==='string'){search=Buffer.from(search,encoding);}else if(search instanceof BufferList){search=search.slice();}else if(!Buffer.isBuffer(search)){search=Buffer.from(search);}offset=Number(offset||0);if(isNaN(offset)){offset=0;}if(offset<0){offset=this.length+offset;}if(offset<0){offset=0;}if(search.length===0){return offset>this.length?this.length:offset;}var blOffset=this._offset(offset);var blIndex=blOffset[0];var buffOffset=blOffset[1];for(blIndex;blIndex<this._bufs.length;blIndex++){var buff=this._bufs[blIndex];while(buffOffset<buff.length){var availableWindow=buff.length-buffOffset;if(availableWindow>=search.length){var nativeSearchResult=buff.indexOf(search,buffOffset);if(nativeSearchResult!==-1){return this._reverseOffset([blIndex,nativeSearchResult]);}buffOffset=buff.length-search.length+1;}else{var revOffset=this._reverseOffset([blIndex,buffOffset]);if(this._match(revOffset,search)){return revOffset;}buffOffset++;}}buffOffset=0;}return-1;};BufferList.prototype._match=function(offset,search){if(this.length-offset<search.length){return false;}for(var searchOffset=0;searchOffset<search.length;searchOffset++){if(this.get(offset+searchOffset)!==search[searchOffset]){return false;}}return true;};(function(){var methods={'readDoubleBE':8,'readDoubleLE':8,'readFloatBE':4,'readFloatLE':4,'readInt32BE':4,'readInt32LE':4,'readUInt32BE':4,'readUInt32LE':4,'readInt16BE':2,'readInt16LE':2,'readUInt16BE':2,'readUInt16LE':2,'readInt8':1,'readUInt8':1,'readIntBE':null,'readIntLE':null,'readUIntBE':null,'readUIntLE':null};for(var m in methods){(function(m){if(methods[m]===null){BufferList.prototype[m]=function(offset,byteLength){return this.slice(offset,offset+byteLength)[m](0,byteLength);};}else{BufferList.prototype[m]=function(offset){return this.slice(offset,offset+methods[m])[m](0);};}})(m);}})();module.exports=BufferList;},9320:function(module,__unusedexports,__webpack_require__){"use strict";const pull=__webpack_require__(418);const values=__webpack_require__(5130);const asyncMap=__webpack_require__(9720);const collect=__webpack_require__(8342);const pushable=__webpack_require__(5995);const pullPair=__webpack_require__(7134);const batch=__webpack_require__(9226);module.exports=function balancedReduceToRoot(reduce,options){const pair=pullPair();const source=pair.source;const result=pushable();reduceToParents(source,(err,roots)=>{if(err){result.end(err);return;}if(roots.length===1){result.push(roots[0]);result.end();}else if(roots.length>1){result.end(new Error('expected a maximum of 1 roots and got '+roots.length));}else{result.end();}});function reduceToParents(_chunks,callback){let chunks=_chunks;if(Array.isArray(chunks)){chunks=values(chunks);}pull(chunks,batch(options.maxChildrenPerNode),asyncMap(reduce),collect(reduced));function reduced(err,roots){if(err){callback(err);}else if(roots.length>1){reduceToParents(roots,callback);}else{callback(null,roots);}}}return{sink:pair.sink,source:result};};},9339:function(module,__unusedexports,__webpack_require__){"use strict";const mh=__webpack_require__(8757);const multibase=__webpack_require__(1849);const multicodec=__webpack_require__(9609);const codecs=__webpack_require__(322);const CIDUtil=__webpack_require__(9428);const withIs=__webpack_require__(3171);class CID{constructor(version,codec,multihash){if(module.exports.isCID(version)){let cid=version;this.version=cid.version;this.codec=cid.codec;this.multihash=Buffer.from(cid.multihash);return;}if(typeof version==='string'){if(multibase.isEncoded(version)){const cid=multibase.decode(version);version=parseInt(cid.slice(0,1).toString('hex'),16);codec=multicodec.getCodec(cid.slice(1));multihash=multicodec.rmPrefix(cid.slice(1));}else{codec='dag-pb';multihash=mh.fromB58String(version);version=0;}}else if(Buffer.isBuffer(version)){const firstByte=version.slice(0,1);const v=parseInt(firstByte.toString('hex'),16);if(v===0||v===1){const cid=version;version=v;codec=multicodec.getCodec(cid.slice(1));multihash=multicodec.rmPrefix(cid.slice(1));}else{codec='dag-pb';multihash=version;version=0;}}this.codec=codec;this.version=version;this.multihash=multihash;CID.validateCID(this);}get buffer(){switch(this.version){case 0:return this.multihash;case 1:return Buffer.concat([Buffer.from('01','hex'),multicodec.getCodeVarint(this.codec),this.multihash]);default:throw new Error('unsupported version');}}get prefix(){return Buffer.concat([Buffer.from(`0${this.version}`,'hex'),multicodec.getCodeVarint(this.codec),mh.prefix(this.multihash)]);}toV0(){if(this.codec!=='dag-pb'){throw new Error('Cannot convert a non dag-pb CID to CIDv0');}const{name,length}=mh.decode(this.multihash);if(name!=='sha2-256'){throw new Error('Cannot convert non sha2-256 multihash CID to CIDv0');}if(length!==32){throw new Error('Cannot convert non 32 byte multihash CID to CIDv0');}return new _CID(0,this.codec,this.multihash);}toV1(){return new _CID(1,this.codec,this.multihash);}toBaseEncodedString(base){base=base||'base58btc';switch(this.version){case 0:{if(base!=='base58btc'){throw new Error('not supported with CIDv0, to support different bases, please migrate the instance do CIDv1, you can do that through cid.toV1()');}return mh.toB58String(this.multihash);}case 1:return multibase.encode(base,this.buffer).toString();default:throw new Error('Unsupported version');}}toString(base){return this.toBaseEncodedString(base);}toJSON(){return{codec:this.codec,version:this.version,hash:this.multihash};}equals(other){return this.codec===other.codec&&this.version===other.version&&this.multihash.equals(other.multihash);}static validateCID(other){let errorMsg=CIDUtil.checkCIDComponents(other);if(errorMsg){throw new Error(errorMsg);}}}const _CID=withIs(CID,{className:'CID',symbolName:'@ipld/js-cid/CID'});_CID.codecs=codecs;module.exports=_CID;},9343:function(module,__unusedexports,__webpack_require__){"use strict";const ip=__webpack_require__(9834);const isIp=__webpack_require__(1116);const protocols=__webpack_require__(6899);const bs58=__webpack_require__(4967);const varint=__webpack_require__(2572);module.exports=Convert;function Convert(proto,a){if(a instanceof Buffer){return Convert.toString(proto,a);}else{return Convert.toBuffer(proto,a);}}Convert.toString=function convertToString(proto,buf){proto=protocols(proto);switch(proto.code){case 4:case 41:return buf2ip(buf);case 6:case 273:case 33:case 132:return buf2port(buf);case 53:case 54:case 55:case 56:case 400:return buf2str(buf);case 421:return buf2mh(buf);default:return buf.toString('hex');}};Convert.toBuffer=function convertToBuffer(proto,str){proto=protocols(proto);switch(proto.code){case 4:return ip2buf(str);case 41:return ip2buf(str);case 6:case 273:case 33:case 132:return port2buf(parseInt(str,10));case 53:case 54:case 55:case 56:case 400:return str2buf(str);case 421:return mh2buf(str);default:return Buffer.from(str,'hex');}};function ip2buf(ipString){if(!isIp(ipString)){throw new Error('invalid ip address');}return ip.toBuffer(ipString);}function buf2ip(ipBuff){const ipString=ip.toString(ipBuff);if(!isIp(ipString)){throw new Error('invalid ip address');}return ipString;}function port2buf(port){const buf=Buffer.alloc(2);buf.writeUInt16BE(port,0);return buf;}function buf2port(buf){return buf.readUInt16BE(0);}function str2buf(str){const buf=Buffer.from(str);const size=Buffer.from(varint.encode(buf.length));return Buffer.concat([size,buf]);}function buf2str(buf){const size=varint.decode(buf);buf=buf.slice(varint.decode.bytes);if(buf.length!==size){throw new Error('inconsistent lengths');}return buf.toString();}function mh2buf(hash){const mh=Buffer.from(bs58.decode(hash));const size=Buffer.from(varint.encode(mh.length));return Buffer.concat([size,mh]);}function buf2mh(buf){const size=varint.decode(buf);const address=buf.slice(varint.decode.bytes);if(address.length!==size){throw new Error('inconsistent lengths');}return bs58.encode(address);}},9346:function(module,__unusedexports,__webpack_require__){var Reader=__webpack_require__(2258);var Writer=__webpack_require__(5995);var cat=__webpack_require__(6246);var pair=__webpack_require__(7134);function once(cb){var called=0;return function(a,b,c){if(called++)return;cb(a,b,c);};}function isFunction(f){return'function'===typeof f;}module.exports=function(opts,_cb){if(isFunction(opts))_cb=opts,opts={};_cb=once(_cb||function noop(){});var reader=Reader(opts&&opts.timeout||5e3);var writer=Writer(function(err){if(err)_cb(err);});var p=pair();return{handshake:{read:reader.read,abort:function(err){writer.end(err);reader.abort(err,function(err){});_cb(err);},write:writer.push,rest:function(){writer.end();return{source:reader.read(),sink:p.sink};}},sink:reader,source:cat([writer,p.source])};};},9355:function(module,__unusedexports,__webpack_require__){"use strict";const series=__webpack_require__(7644);const promisify=__webpack_require__(6955);module.exports=self=>{return promisify(callback=>{callback=callback||function noop(){};self.log('stop');if(self.state.state()==='stopped'){return callback(new Error('Already stopped'));}if(self.state.state()!=='running'){return callback(new Error('Not able to stop from state: '+self.state.state()));}const done=err=>{if(err){self.emit('error',err);return callback(err);}self.state.stopped();self.emit('stop');callback();};self.state.stop();self._blockService.unsetExchange();self._bitswap.stop();self._preload.stop();series([cb=>self._ipns.republisher.stop(cb),cb=>self._mfsPreload.stop(cb),cb=>{const libp2p=self.libp2p;self.libp2p=null;libp2p.stop(cb);},cb=>self._repo.close(cb)],done);});};},9357:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=retry;var _noop=__webpack_require__(5811);var _noop2=_interopRequireDefault(_noop);var _constant=__webpack_require__(2296);var _constant2=_interopRequireDefault(_constant);var _wrapAsync=__webpack_require__(9396);var _wrapAsync2=_interopRequireDefault(_wrapAsync);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function retry(opts,task,callback){var DEFAULT_TIMES=5;var DEFAULT_INTERVAL=0;var options={times:DEFAULT_TIMES,intervalFunc:(0,_constant2.default)(DEFAULT_INTERVAL)};function parseTimes(acc,t){if(typeof t==='object'){acc.times=+t.times||DEFAULT_TIMES;acc.intervalFunc=typeof t.interval==='function'?t.interval:(0,_constant2.default)(+t.interval||DEFAULT_INTERVAL);acc.errorFilter=t.errorFilter;}else if(typeof t==='number'||typeof t==='string'){acc.times=+t||DEFAULT_TIMES;}else{throw new Error("Invalid arguments for async.retry");}}if(arguments.length<3&&typeof opts==='function'){callback=task||_noop2.default;task=opts;}else{parseTimes(options,opts);callback=callback||_noop2.default;}if(typeof task!=='function'){throw new Error("Invalid arguments for async.retry");}var _task=(0,_wrapAsync2.default)(task);var attempt=1;function retryAttempt(){_task(function(err){if(err&&attempt++<options.times&&(typeof options.errorFilter!='function'||options.errorFilter(err))){setTimeout(retryAttempt,options.intervalFunc(attempt));}else{callback.apply(null,arguments);}});}retryAttempt();}module.exports=exports['default'];},9366:function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=DLL;function DLL(){this.head=this.tail=null;this.length=0;}function setInitial(dll,node){dll.length=1;dll.head=dll.tail=node;}DLL.prototype.removeLink=function(node){if(node.prev)node.prev.next=node.next;else this.head=node.next;if(node.next)node.next.prev=node.prev;else this.tail=node.prev;node.prev=node.next=null;this.length-=1;return node;};DLL.prototype.empty=function(){while(this.head)this.shift();return this;};DLL.prototype.insertAfter=function(node,newNode){newNode.prev=node;newNode.next=node.next;if(node.next)node.next.prev=newNode;else this.tail=newNode;node.next=newNode;this.length+=1;};DLL.prototype.insertBefore=function(node,newNode){newNode.prev=node.prev;newNode.next=node;if(node.prev)node.prev.next=newNode;else this.head=newNode;node.prev=newNode;this.length+=1;};DLL.prototype.unshift=function(node){if(this.head)this.insertBefore(this.head,node);else setInitial(this,node);};DLL.prototype.push=function(node){if(this.tail)this.insertAfter(this.tail,node);else setInitial(this,node);};DLL.prototype.shift=function(){return this.head&&this.removeLink(this.head);};DLL.prototype.pop=function(){return this.tail&&this.removeLink(this.tail);};DLL.prototype.toArray=function(){var arr=Array(this.length);var curr=this.head;for(var idx=0;idx<this.length;idx++){arr[idx]=curr.data;curr=curr.next;}return arr;};DLL.prototype.remove=function(testFn){var curr=this.head;while(!!curr){var next=curr.next;if(testFn(curr)){this.removeLink(curr);}curr=next;}return this;};module.exports=exports["default"];},9372:function(module,__unusedexports,__webpack_require__){"use strict";var Address=__webpack_require__(6593);var BufferReader=__webpack_require__(412);var BufferWriter=__webpack_require__(2418);var Hash=__webpack_require__(2442);var Opcode=__webpack_require__(6862);var PublicKey=__webpack_require__(4721);var Signature=__webpack_require__(406);var Networks=__webpack_require__(8368);var $=__webpack_require__(5107);var _=__webpack_require__(6064);var errors=__webpack_require__(6379);var buffer=__webpack_require__(9423);var BufferUtil=__webpack_require__(9657);var JSUtil=__webpack_require__(8416);var Script=function Script(from){if(!(this instanceof Script)){return new Script(from);}this.chunks=[];if(BufferUtil.isBuffer(from)){return Script.fromBuffer(from);}else if(from instanceof Address){return Script.fromAddress(from);}else if(from instanceof Script){return Script.fromBuffer(from.toBuffer());}else if(typeof from==='string'){return Script.fromString(from);}else if(typeof from!=='undefined'){this.set(from);}};Script.prototype.set=function(obj){this.chunks=obj.chunks||this.chunks;return this;};Script.fromBuffer=function(buffer){var script=new Script();script.chunks=[];var br=new BufferReader(buffer);while(!br.finished()){try{var opcodenum=br.readUInt8();var len,buf;if(opcodenum>0&&opcodenum<Opcode.OP_PUSHDATA1){len=opcodenum;script.chunks.push({buf:br.read(len),len:len,opcodenum:opcodenum});}else if(opcodenum===Opcode.OP_PUSHDATA1){len=br.readUInt8();buf=br.read(len);script.chunks.push({buf:buf,len:len,opcodenum:opcodenum});}else if(opcodenum===Opcode.OP_PUSHDATA2){len=br.readUInt16LE();buf=br.read(len);script.chunks.push({buf:buf,len:len,opcodenum:opcodenum});}else if(opcodenum===Opcode.OP_PUSHDATA4){len=br.readUInt32LE();buf=br.read(len);script.chunks.push({buf:buf,len:len,opcodenum:opcodenum});}else{script.chunks.push({opcodenum:opcodenum});}}catch(e){if(e instanceof RangeError){throw new errors.Script.InvalidBuffer(buffer.toString('hex'));}throw e;}}return script;};Script.prototype.toBuffer=function(){var bw=new BufferWriter();for(var i=0;i<this.chunks.length;i++){var chunk=this.chunks[i];var opcodenum=chunk.opcodenum;bw.writeUInt8(chunk.opcodenum);if(chunk.buf){if(opcodenum<Opcode.OP_PUSHDATA1){bw.write(chunk.buf);}else if(opcodenum===Opcode.OP_PUSHDATA1){bw.writeUInt8(chunk.len);bw.write(chunk.buf);}else if(opcodenum===Opcode.OP_PUSHDATA2){bw.writeUInt16LE(chunk.len);bw.write(chunk.buf);}else if(opcodenum===Opcode.OP_PUSHDATA4){bw.writeUInt32LE(chunk.len);bw.write(chunk.buf);}}}return bw.concat();};Script.fromASM=function(str){var script=new Script();script.chunks=[];var tokens=str.split(' ');var i=0;while(i<tokens.length){var token=tokens[i];var opcode=Opcode(token);var opcodenum=opcode.toNumber();if(_.isUndefined(opcodenum)){var buf=new Buffer(tokens[i],'hex');script.chunks.push({buf:buf,len:buf.length,opcodenum:buf.length});i=i+1;}else if(opcodenum===Opcode.OP_PUSHDATA1||opcodenum===Opcode.OP_PUSHDATA2||opcodenum===Opcode.OP_PUSHDATA4){script.chunks.push({buf:new Buffer(tokens[i+2],'hex'),len:parseInt(tokens[i+1]),opcodenum:opcodenum});i=i+3;}else{script.chunks.push({opcodenum:opcodenum});i=i+1;}}return script;};Script.fromHex=function(str){return new Script(new buffer.Buffer(str,'hex'));};Script.fromString=function(str){if(JSUtil.isHexa(str)||str.length===0){return new Script(new buffer.Buffer(str,'hex'));}var script=new Script();script.chunks=[];var tokens=str.split(' ');var i=0;while(i<tokens.length){var token=tokens[i];var opcode=Opcode(token);var opcodenum=opcode.toNumber();if(_.isUndefined(opcodenum)){opcodenum=parseInt(token);if(opcodenum>0&&opcodenum<Opcode.OP_PUSHDATA1){script.chunks.push({buf:new Buffer(tokens[i+1].slice(2),'hex'),len:opcodenum,opcodenum:opcodenum});i=i+2;}else{throw new Error('Invalid script: '+JSON.stringify(str));}}else if(opcodenum===Opcode.OP_PUSHDATA1||opcodenum===Opcode.OP_PUSHDATA2||opcodenum===Opcode.OP_PUSHDATA4){if(tokens[i+2].slice(0,2)!=='0x'){throw new Error('Pushdata data must start with 0x');}script.chunks.push({buf:new Buffer(tokens[i+2].slice(2),'hex'),len:parseInt(tokens[i+1]),opcodenum:opcodenum});i=i+3;}else{script.chunks.push({opcodenum:opcodenum});i=i+1;}}return script;};Script.prototype._chunkToString=function(chunk,type){var opcodenum=chunk.opcodenum;var asm=type==='asm';var str='';if(!chunk.buf){if(typeof Opcode.reverseMap[opcodenum]!=='undefined'){str=str+' '+Opcode(opcodenum).toString();}else{var numstr=opcodenum.toString(16);if(numstr.length%2!==0){numstr='0'+numstr;}if(asm){str=str+' '+numstr;}else{str=str+' '+'0x'+numstr;}}}else{if(opcodenum===Opcode.OP_PUSHDATA1||opcodenum===Opcode.OP_PUSHDATA2||opcodenum===Opcode.OP_PUSHDATA4){str=str+' '+Opcode(opcodenum).toString();}if(chunk.len>0){if(asm){str=str+' '+chunk.buf.toString('hex');}else{str=str+' '+chunk.len+' '+'0x'+chunk.buf.toString('hex');}}}return str;};Script.prototype.toASM=function(){var str='';for(var i=0;i<this.chunks.length;i++){var chunk=this.chunks[i];str+=this._chunkToString(chunk,'asm');}return str.substr(1);};Script.prototype.toString=function(){var str='';for(var i=0;i<this.chunks.length;i++){var chunk=this.chunks[i];str+=this._chunkToString(chunk);}return str.substr(1);};Script.prototype.toHex=function(){return this.toBuffer().toString('hex');};Script.prototype.inspect=function(){return'<Script: '+this.toString()+'>';};Script.prototype.isPublicKeyHashOut=function(){return!!(this.chunks.length===5&&this.chunks[0].opcodenum===Opcode.OP_DUP&&this.chunks[1].opcodenum===Opcode.OP_HASH160&&this.chunks[2].buf&&this.chunks[2].buf.length===20&&this.chunks[3].opcodenum===Opcode.OP_EQUALVERIFY&&this.chunks[4].opcodenum===Opcode.OP_CHECKSIG);};Script.prototype.isPublicKeyHashIn=function(){if(this.chunks.length===2){var signatureBuf=this.chunks[0].buf;var pubkeyBuf=this.chunks[1].buf;if(signatureBuf&&signatureBuf.length&&signatureBuf[0]===0x30&&pubkeyBuf&&pubkeyBuf.length){var version=pubkeyBuf[0];if((version===0x04||version===0x06||version===0x07)&&pubkeyBuf.length===65){return true;}else if((version===0x03||version===0x02)&&pubkeyBuf.length===33){return true;}}}return false;};Script.prototype.getPublicKey=function(){$.checkState(this.isPublicKeyOut(),'Can\'t retreive PublicKey from a non-PK output');return this.chunks[0].buf;};Script.prototype.getPublicKeyHash=function(){$.checkState(this.isPublicKeyHashOut(),'Can\'t retrieve PublicKeyHash from a non-PKH output');return this.chunks[2].buf;};Script.prototype.isPublicKeyOut=function(){if(this.chunks.length===2&&this.chunks[0].buf&&this.chunks[0].buf.length&&this.chunks[1].opcodenum===Opcode.OP_CHECKSIG){var pubkeyBuf=this.chunks[0].buf;var version=pubkeyBuf[0];var isVersion=false;if((version===0x04||version===0x06||version===0x07)&&pubkeyBuf.length===65){isVersion=true;}else if((version===0x03||version===0x02)&&pubkeyBuf.length===33){isVersion=true;}if(isVersion){return PublicKey.isValid(pubkeyBuf);}}return false;};Script.prototype.isPublicKeyIn=function(){if(this.chunks.length===1){var signatureBuf=this.chunks[0].buf;if(signatureBuf&&signatureBuf.length&&signatureBuf[0]===0x30){return true;}}return false;};Script.prototype.isScriptHashOut=function(){var buf=this.toBuffer();return buf.length===23&&buf[0]===Opcode.OP_HASH160&&buf[1]===0x14&&buf[buf.length-1]===Opcode.OP_EQUAL;};Script.prototype.isScriptHashIn=function(){if(this.chunks.length<=1){return false;}var redeemChunk=this.chunks[this.chunks.length-1];var redeemBuf=redeemChunk.buf;if(!redeemBuf){return false;}var redeemScript;try{redeemScript=Script.fromBuffer(redeemBuf);}catch(e){if(e instanceof errors.Script.InvalidBuffer){return false;}throw e;}var type=redeemScript.classify();return type!==Script.types.UNKNOWN;};Script.prototype.isMultisigOut=function(){return this.chunks.length>3&&Opcode.isSmallIntOp(this.chunks[0].opcodenum)&&this.chunks.slice(1,this.chunks.length-2).every(function(obj){return obj.buf&&BufferUtil.isBuffer(obj.buf);})&&Opcode.isSmallIntOp(this.chunks[this.chunks.length-2].opcodenum)&&this.chunks[this.chunks.length-1].opcodenum===Opcode.OP_CHECKMULTISIG;};Script.prototype.isMultisigIn=function(){return this.chunks.length>=2&&this.chunks[0].opcodenum===0&&this.chunks.slice(1,this.chunks.length).every(function(obj){return obj.buf&&BufferUtil.isBuffer(obj.buf)&&Signature.isTxDER(obj.buf);});};Script.prototype.isDataOut=function(){return this.chunks.length>=1&&this.chunks[0].opcodenum===Opcode.OP_RETURN&&(this.chunks.length===1||this.chunks.length===2&&this.chunks[1].buf&&this.chunks[1].buf.length<=Script.OP_RETURN_STANDARD_SIZE&&this.chunks[1].length===this.chunks.len);};Script.prototype.getData=function(){if(this.isDataOut()||this.isScriptHashOut()){if(_.isUndefined(this.chunks[1])){return new Buffer(0);}else{return new Buffer(this.chunks[1].buf);}}if(this.isPublicKeyHashOut()){return new Buffer(this.chunks[2].buf);}throw new Error('Unrecognized script type to get data from');};Script.prototype.isPushOnly=function(){return _.every(this.chunks,function(chunk){return chunk.opcodenum<=Opcode.OP_16;});};Script.types={};Script.types.UNKNOWN='Unknown';Script.types.PUBKEY_OUT='Pay to public key';Script.types.PUBKEY_IN='Spend from public key';Script.types.PUBKEYHASH_OUT='Pay to public key hash';Script.types.PUBKEYHASH_IN='Spend from public key hash';Script.types.SCRIPTHASH_OUT='Pay to script hash';Script.types.SCRIPTHASH_IN='Spend from script hash';Script.types.MULTISIG_OUT='Pay to multisig';Script.types.MULTISIG_IN='Spend from multisig';Script.types.DATA_OUT='Data push';Script.OP_RETURN_STANDARD_SIZE=80;Script.prototype.classify=function(){if(this._isInput){return this.classifyInput();}else if(this._isOutput){return this.classifyOutput();}else{var outputType=this.classifyOutput();return outputType!=Script.types.UNKNOWN?outputType:this.classifyInput();}};Script.outputIdentifiers={};Script.outputIdentifiers.PUBKEY_OUT=Script.prototype.isPublicKeyOut;Script.outputIdentifiers.PUBKEYHASH_OUT=Script.prototype.isPublicKeyHashOut;Script.outputIdentifiers.MULTISIG_OUT=Script.prototype.isMultisigOut;Script.outputIdentifiers.SCRIPTHASH_OUT=Script.prototype.isScriptHashOut;Script.outputIdentifiers.DATA_OUT=Script.prototype.isDataOut;Script.prototype.classifyOutput=function(){for(var type in Script.outputIdentifiers){if(Script.outputIdentifiers[type].bind(this)()){return Script.types[type];}}return Script.types.UNKNOWN;};Script.inputIdentifiers={};Script.inputIdentifiers.PUBKEY_IN=Script.prototype.isPublicKeyIn;Script.inputIdentifiers.PUBKEYHASH_IN=Script.prototype.isPublicKeyHashIn;Script.inputIdentifiers.MULTISIG_IN=Script.prototype.isMultisigIn;Script.inputIdentifiers.SCRIPTHASH_IN=Script.prototype.isScriptHashIn;Script.prototype.classifyInput=function(){for(var type in Script.inputIdentifiers){if(Script.inputIdentifiers[type].bind(this)()){return Script.types[type];}}return Script.types.UNKNOWN;};Script.prototype.isStandard=function(){return this.classify()!==Script.types.UNKNOWN;};Script.prototype.prepend=function(obj){this._addByType(obj,true);return this;};Script.prototype.equals=function(script){$.checkState(script instanceof Script,'Must provide another script');if(this.chunks.length!==script.chunks.length){return false;}var i;for(i=0;i<this.chunks.length;i++){if(BufferUtil.isBuffer(this.chunks[i].buf)&&!BufferUtil.isBuffer(script.chunks[i].buf)){return false;}if(BufferUtil.isBuffer(this.chunks[i].buf)&&!BufferUtil.equals(this.chunks[i].buf,script.chunks[i].buf)){return false;}else if(this.chunks[i].opcodenum!==script.chunks[i].opcodenum){return false;}}return true;};Script.prototype.add=function(obj){this._addByType(obj,false);return this;};Script.prototype._addByType=function(obj,prepend){if(typeof obj==='string'){this._addOpcode(obj,prepend);}else if(typeof obj==='number'){this._addOpcode(obj,prepend);}else if(obj instanceof Opcode){this._addOpcode(obj,prepend);}else if(BufferUtil.isBuffer(obj)){this._addBuffer(obj,prepend);}else if(obj instanceof Script){this.chunks=this.chunks.concat(obj.chunks);}else if(typeof obj==='object'){this._insertAtPosition(obj,prepend);}else{throw new Error('Invalid script chunk');}};Script.prototype._insertAtPosition=function(op,prepend){if(prepend){this.chunks.unshift(op);}else{this.chunks.push(op);}};Script.prototype._addOpcode=function(opcode,prepend){var op;if(typeof opcode==='number'){op=opcode;}else if(opcode instanceof Opcode){op=opcode.toNumber();}else{op=Opcode(opcode).toNumber();}this._insertAtPosition({opcodenum:op},prepend);return this;};Script.prototype._addBuffer=function(buf,prepend){var opcodenum;var len=buf.length;if(len>=0&&len<Opcode.OP_PUSHDATA1){opcodenum=len;}else if(len<Math.pow(2,8)){opcodenum=Opcode.OP_PUSHDATA1;}else if(len<Math.pow(2,16)){opcodenum=Opcode.OP_PUSHDATA2;}else if(len<Math.pow(2,32)){opcodenum=Opcode.OP_PUSHDATA4;}else{throw new Error('You can\'t push that much data');}this._insertAtPosition({buf:buf,len:len,opcodenum:opcodenum},prepend);return this;};Script.prototype.removeCodeseparators=function(){var chunks=[];for(var i=0;i<this.chunks.length;i++){if(this.chunks[i].opcodenum!==Opcode.OP_CODESEPARATOR){chunks.push(this.chunks[i]);}}this.chunks=chunks;return this;};Script.buildMultisigOut=function(publicKeys,threshold,opts){$.checkArgument(threshold<=publicKeys.length,'Number of required signatures must be less than or equal to the number of public keys');opts=opts||{};var script=new Script();script.add(Opcode.smallInt(threshold));publicKeys=_.map(publicKeys,PublicKey);var sorted=publicKeys;if(!opts.noSorting){sorted=_.sortBy(publicKeys,function(publicKey){return publicKey.toString('hex');});}for(var i=0;i<sorted.length;i++){var publicKey=sorted[i];script.add(publicKey.toBuffer());}script.add(Opcode.smallInt(publicKeys.length));script.add(Opcode.OP_CHECKMULTISIG);return script;};Script.buildMultisigIn=function(pubkeys,threshold,signatures,opts){$.checkArgument(_.isArray(pubkeys));$.checkArgument(_.isNumber(threshold));$.checkArgument(_.isArray(signatures));opts=opts||{};var s=new Script();s.add(Opcode.OP_0);_.each(signatures,function(signature){$.checkArgument(BufferUtil.isBuffer(signature),'Signatures must be an array of Buffers');s.add(signature);});return s;};Script.buildP2SHMultisigIn=function(pubkeys,threshold,signatures,opts){$.checkArgument(_.isArray(pubkeys));$.checkArgument(_.isNumber(threshold));$.checkArgument(_.isArray(signatures));opts=opts||{};var s=new Script();s.add(Opcode.OP_0);_.each(signatures,function(signature){$.checkArgument(BufferUtil.isBuffer(signature),'Signatures must be an array of Buffers');s.add(signature);});s.add((opts.cachedMultisig||Script.buildMultisigOut(pubkeys,threshold,opts)).toBuffer());return s;};Script.buildPublicKeyHashOut=function(to){$.checkArgument(!_.isUndefined(to));$.checkArgument(to instanceof PublicKey||to instanceof Address||_.isString(to));if(to instanceof PublicKey){to=to.toAddress();}else if(_.isString(to)){to=new Address(to);}var s=new Script();s.add(Opcode.OP_DUP).add(Opcode.OP_HASH160).add(to.hashBuffer).add(Opcode.OP_EQUALVERIFY).add(Opcode.OP_CHECKSIG);s._network=to.network;return s;};Script.buildPublicKeyOut=function(pubkey){$.checkArgument(pubkey instanceof PublicKey);var s=new Script();s.add(pubkey.toBuffer()).add(Opcode.OP_CHECKSIG);return s;};Script.buildDataOut=function(data,encoding){$.checkArgument(_.isUndefined(data)||_.isString(data)||BufferUtil.isBuffer(data));if(_.isString(data)){data=new Buffer(data,encoding);}var s=new Script();s.add(Opcode.OP_RETURN);if(!_.isUndefined(data)){s.add(data);}return s;};Script.buildScriptHashOut=function(script){$.checkArgument(script instanceof Script||script instanceof Address&&script.isPayToScriptHash());var s=new Script();s.add(Opcode.OP_HASH160).add(script instanceof Address?script.hashBuffer:Hash.sha256ripemd160(script.toBuffer())).add(Opcode.OP_EQUAL);s._network=script._network||script.network;return s;};Script.buildPublicKeyIn=function(signature,sigtype){$.checkArgument(signature instanceof Signature||BufferUtil.isBuffer(signature));$.checkArgument(_.isUndefined(sigtype)||_.isNumber(sigtype));if(signature instanceof Signature){signature=signature.toBuffer();}var script=new Script();script.add(BufferUtil.concat([signature,BufferUtil.integerAsSingleByteBuffer(sigtype||Signature.SIGHASH_ALL)]));return script;};Script.buildPublicKeyHashIn=function(publicKey,signature,sigtype){$.checkArgument(signature instanceof Signature||BufferUtil.isBuffer(signature));$.checkArgument(_.isUndefined(sigtype)||_.isNumber(sigtype));if(signature instanceof Signature){signature=signature.toBuffer();}var script=new Script().add(BufferUtil.concat([signature,BufferUtil.integerAsSingleByteBuffer(sigtype||Signature.SIGHASH_ALL)])).add(new PublicKey(publicKey).toBuffer());return script;};Script.empty=function(){return new Script();};Script.prototype.toScriptHashOut=function(){return Script.buildScriptHashOut(this);};Script.fromAddress=function(address){address=Address(address);if(address.isPayToScriptHash()){return Script.buildScriptHashOut(address);}else if(address.isPayToPublicKeyHash()){return Script.buildPublicKeyHashOut(address);}throw new errors.Script.UnrecognizedAddress(address);};Script.prototype.getAddressInfo=function(opts){if(this._isInput){return this._getInputAddressInfo();}else if(this._isOutput){return this._getOutputAddressInfo();}else{var info=this._getOutputAddressInfo();if(!info){return this._getInputAddressInfo();}return info;}};Script.prototype._getOutputAddressInfo=function(){var info={};if(this.isScriptHashOut()){info.hashBuffer=this.getData();info.type=Address.PayToScriptHash;}else if(this.isPublicKeyHashOut()){info.hashBuffer=this.getData();info.type=Address.PayToPublicKeyHash;}else{return false;}return info;};Script.prototype._getInputAddressInfo=function(){var info={};if(this.isPublicKeyHashIn()){info.hashBuffer=Hash.sha256ripemd160(this.chunks[1].buf);info.type=Address.PayToPublicKeyHash;}else if(this.isScriptHashIn()){info.hashBuffer=Hash.sha256ripemd160(this.chunks[this.chunks.length-1].buf);info.type=Address.PayToScriptHash;}else{return false;}return info;};Script.prototype.toAddress=function(network){var info=this.getAddressInfo();if(!info){return false;}info.network=Networks.get(network)||this._network||Networks.defaultNetwork;return new Address(info);};Script.prototype.findAndDelete=function(script){var buf=script.toBuffer();var hex=buf.toString('hex');for(var i=0;i<this.chunks.length;i++){var script2=Script({chunks:[this.chunks[i]]});var buf2=script2.toBuffer();var hex2=buf2.toString('hex');if(hex===hex2){this.chunks.splice(i,1);}}return this;};Script.prototype.checkMinimalPush=function(i){var chunk=this.chunks[i];var buf=chunk.buf;var opcodenum=chunk.opcodenum;if(!buf){return true;}if(buf.length===0){return opcodenum===Opcode.OP_0;}else if(buf.length===1&&buf[0]>=1&&buf[0]<=16){return opcodenum===Opcode.OP_1+(buf[0]-1);}else if(buf.length===1&&buf[0]===0x81){return opcodenum===Opcode.OP_1NEGATE;}else if(buf.length<=75){return opcodenum===buf.length;}else if(buf.length<=255){return opcodenum===Opcode.OP_PUSHDATA1;}else if(buf.length<=65535){return opcodenum===Opcode.OP_PUSHDATA2;}return true;};Script.prototype._decodeOP_N=function(opcode){if(opcode===Opcode.OP_0){return 0;}else if(opcode>=Opcode.OP_1&&opcode<=Opcode.OP_16){return opcode-(Opcode.OP_1-1);}else{throw new Error('Invalid opcode: '+JSON.stringify(opcode));}};Script.prototype.getSignatureOperationsCount=function(accurate){accurate=_.isUndefined(accurate)?true:accurate;var self=this;var n=0;var lastOpcode=Opcode.OP_INVALIDOPCODE;_.each(self.chunks,function getChunk(chunk){var opcode=chunk.opcodenum;if(opcode==Opcode.OP_CHECKSIG||opcode==Opcode.OP_CHECKSIGVERIFY){n++;}else if(opcode==Opcode.OP_CHECKMULTISIG||opcode==Opcode.OP_CHECKMULTISIGVERIFY){if(accurate&&lastOpcode>=Opcode.OP_1&&lastOpcode<=Opcode.OP_16){n+=self._decodeOP_N(lastOpcode);}else{n+=20;}}lastOpcode=opcode;});return n;};module.exports=Script;},9380:function(module){module.exports=require("constants");},9388:function(__unusedmodule,exports,__webpack_require__){"use strict";exports.preStart=__webpack_require__(2736);exports.start=__webpack_require__(4676);exports.stop=__webpack_require__(9355);exports.isOnline=__webpack_require__(4176);exports.version=__webpack_require__(6715);exports.id=__webpack_require__(9009);exports.repo=__webpack_require__(8011);exports.init=__webpack_require__(5942);exports.bootstrap=__webpack_require__(498);exports.config=__webpack_require__(4147);exports.block=__webpack_require__(3016);exports.object=__webpack_require__(8936);exports.dag=__webpack_require__(5544);exports.libp2p=__webpack_require__(9688);exports.swarm=__webpack_require__(387);exports.ping=__webpack_require__(1498);exports.pingPullStream=__webpack_require__(2716);exports.pingReadableStream=__webpack_require__(2882);exports.pin=__webpack_require__(4315);exports.filesRegular=__webpack_require__(9811);exports.filesMFS=__webpack_require__(6561);exports.bitswap=__webpack_require__(9678);exports.pubsub=__webpack_require__(8511);exports.dht=__webpack_require__(1474);exports.dns=__webpack_require__(6425);exports.key=__webpack_require__(9930);exports.stats=__webpack_require__(7329);exports.resolve=__webpack_require__(1749);exports.name=__webpack_require__(2909);},9393:function(module){module.exports={"uChars":[128,165,169,178,184,216,226,235,238,244,248,251,253,258,276,284,300,325,329,334,364,463,465,467,469,471,473,475,477,506,594,610,712,716,730,930,938,962,970,1026,1104,1106,8209,8215,8218,8222,8231,8241,8244,8246,8252,8365,8452,8454,8458,8471,8482,8556,8570,8596,8602,8713,8720,8722,8726,8731,8737,8740,8742,8748,8751,8760,8766,8777,8781,8787,8802,8808,8816,8854,8858,8870,8896,8979,9322,9372,9548,9588,9616,9622,9634,9652,9662,9672,9676,9680,9702,9735,9738,9793,9795,11906,11909,11913,11917,11928,11944,11947,11951,11956,11960,11964,11979,12284,12292,12312,12319,12330,12351,12436,12447,12535,12543,12586,12842,12850,12964,13200,13215,13218,13253,13263,13267,13270,13384,13428,13727,13839,13851,14617,14703,14801,14816,14964,15183,15471,15585,16471,16736,17208,17325,17330,17374,17623,17997,18018,18212,18218,18301,18318,18760,18811,18814,18820,18823,18844,18848,18872,19576,19620,19738,19887,40870,59244,59336,59367,59413,59417,59423,59431,59437,59443,59452,59460,59478,59493,63789,63866,63894,63976,63986,64016,64018,64021,64025,64034,64037,64042,65074,65093,65107,65112,65127,65132,65375,65510,65536],"gbChars":[0,36,38,45,50,81,89,95,96,100,103,104,105,109,126,133,148,172,175,179,208,306,307,308,309,310,311,312,313,341,428,443,544,545,558,741,742,749,750,805,819,820,7922,7924,7925,7927,7934,7943,7944,7945,7950,8062,8148,8149,8152,8164,8174,8236,8240,8262,8264,8374,8380,8381,8384,8388,8390,8392,8393,8394,8396,8401,8406,8416,8419,8424,8437,8439,8445,8482,8485,8496,8521,8603,8936,8946,9046,9050,9063,9066,9076,9092,9100,9108,9111,9113,9131,9162,9164,9218,9219,11329,11331,11334,11336,11346,11361,11363,11366,11370,11372,11375,11389,11682,11686,11687,11692,11694,11714,11716,11723,11725,11730,11736,11982,11989,12102,12336,12348,12350,12384,12393,12395,12397,12510,12553,12851,12962,12973,13738,13823,13919,13933,14080,14298,14585,14698,15583,15847,16318,16434,16438,16481,16729,17102,17122,17315,17320,17402,17418,17859,17909,17911,17915,17916,17936,17939,17961,18664,18703,18814,18962,19043,33469,33470,33471,33484,33485,33490,33497,33501,33505,33513,33520,33536,33550,37845,37921,37948,38029,38038,38064,38065,38066,38069,38075,38076,38078,39108,39109,39113,39114,39115,39116,39265,39394,189000]};},9396:function(__unusedmodule,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isAsync=undefined;var _asyncify=__webpack_require__(7144);var _asyncify2=_interopRequireDefault(_asyncify);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var supportsSymbol=typeof Symbol==='function';function isAsync(fn){return supportsSymbol&&fn[Symbol.toStringTag]==='AsyncFunction';}function wrapAsync(asyncFn){return isAsync(asyncFn)?(0,_asyncify2.default)(asyncFn):asyncFn;}exports.default=wrapAsync;exports.isAsync=isAsync;},9398:function(module,__unusedexports,__webpack_require__){"use strict";var curve=__webpack_require__(8958);var elliptic=__webpack_require__(3459);var BN=__webpack_require__(5584);var inherits=__webpack_require__(92);var Base=curve.base;var assert=elliptic.utils.assert;function EdwardsCurve(conf){this.twisted=(conf.a|0)!==1;this.mOneA=this.twisted&&(conf.a|0)===-1;this.extended=this.mOneA;Base.call(this,'edwards',conf);this.a=new BN(conf.a,16).umod(this.red.m);this.a=this.a.toRed(this.red);this.c=new BN(conf.c,16).toRed(this.red);this.c2=this.c.redSqr();this.d=new BN(conf.d,16).toRed(this.red);this.dd=this.d.redAdd(this.d);assert(!this.twisted||this.c.fromRed().cmpn(1)===0);this.oneC=(conf.c|0)===1;}inherits(EdwardsCurve,Base);module.exports=EdwardsCurve;EdwardsCurve.prototype._mulA=function _mulA(num){if(this.mOneA)return num.redNeg();else return this.a.redMul(num);};EdwardsCurve.prototype._mulC=function _mulC(num){if(this.oneC)return num;else return this.c.redMul(num);};EdwardsCurve.prototype.jpoint=function jpoint(x,y,z,t){return this.point(x,y,z,t);};EdwardsCurve.prototype.pointFromX=function pointFromX(x,odd){x=new BN(x,16);if(!x.red)x=x.toRed(this.red);var x2=x.redSqr();var rhs=this.c2.redSub(this.a.redMul(x2));var lhs=this.one.redSub(this.c2.redMul(this.d).redMul(x2));var y2=rhs.redMul(lhs.redInvm());var y=y2.redSqrt();if(y.redSqr().redSub(y2).cmp(this.zero)!==0)throw new Error('invalid point');var isOdd=y.fromRed().isOdd();if(odd&&!isOdd||!odd&&isOdd)y=y.redNeg();return this.point(x,y);};EdwardsCurve.prototype.pointFromY=function pointFromY(y,odd){y=new BN(y,16);if(!y.red)y=y.toRed(this.red);var y2=y.redSqr();var lhs=y2.redSub(this.c2);var rhs=y2.redMul(this.d).redMul(this.c2).redSub(this.a);var x2=lhs.redMul(rhs.redInvm());if(x2.cmp(this.zero)===0){if(odd)throw new Error('invalid point');else return this.point(this.zero,y);}var x=x2.redSqrt();if(x.redSqr().redSub(x2).cmp(this.zero)!==0)throw new Error('invalid point');if(x.fromRed().isOdd()!==odd)x=x.redNeg();return this.point(x,y);};EdwardsCurve.prototype.validate=function validate(point){if(point.isInfinity())return true;point.normalize();var x2=point.x.redSqr();var y2=point.y.redSqr();var lhs=x2.redMul(this.a).redAdd(y2);var rhs=this.c2.redMul(this.one.redAdd(this.d.redMul(x2).redMul(y2)));return lhs.cmp(rhs)===0;};function Point(curve,x,y,z,t){Base.BasePoint.call(this,curve,'projective');if(x===null&&y===null&&z===null){this.x=this.curve.zero;this.y=this.curve.one;this.z=this.curve.one;this.t=this.curve.zero;this.zOne=true;}else{this.x=new BN(x,16);this.y=new BN(y,16);this.z=z?new BN(z,16):this.curve.one;this.t=t&&new BN(t,16);if(!this.x.red)this.x=this.x.toRed(this.curve.red);if(!this.y.red)this.y=this.y.toRed(this.curve.red);if(!this.z.red)this.z=this.z.toRed(this.curve.red);if(this.t&&!this.t.red)this.t=this.t.toRed(this.curve.red);this.zOne=this.z===this.curve.one;if(this.curve.extended&&!this.t){this.t=this.x.redMul(this.y);if(!this.zOne)this.t=this.t.redMul(this.z.redInvm());}}}inherits(Point,Base.BasePoint);EdwardsCurve.prototype.pointFromJSON=function pointFromJSON(obj){return Point.fromJSON(this,obj);};EdwardsCurve.prototype.point=function point(x,y,z,t){return new Point(this,x,y,z,t);};Point.fromJSON=function fromJSON(curve,obj){return new Point(curve,obj[0],obj[1],obj[2]);};Point.prototype.inspect=function inspect(){if(this.isInfinity())return'<EC Point Infinity>';return'<EC Point x: '+this.x.fromRed().toString(16,2)+' y: '+this.y.fromRed().toString(16,2)+' z: '+this.z.fromRed().toString(16,2)+'>';};Point.prototype.isInfinity=function isInfinity(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0);};Point.prototype._extDbl=function _extDbl(){var a=this.x.redSqr();var b=this.y.redSqr();var c=this.z.redSqr();c=c.redIAdd(c);var d=this.curve._mulA(a);var e=this.x.redAdd(this.y).redSqr().redISub(a).redISub(b);var g=d.redAdd(b);var f=g.redSub(c);var h=d.redSub(b);var nx=e.redMul(f);var ny=g.redMul(h);var nt=e.redMul(h);var nz=f.redMul(g);return this.curve.point(nx,ny,nz,nt);};Point.prototype._projDbl=function _projDbl(){var b=this.x.redAdd(this.y).redSqr();var c=this.x.redSqr();var d=this.y.redSqr();var nx;var ny;var nz;if(this.curve.twisted){var e=this.curve._mulA(c);var f=e.redAdd(d);if(this.zOne){nx=b.redSub(c).redSub(d).redMul(f.redSub(this.curve.two));ny=f.redMul(e.redSub(d));nz=f.redSqr().redSub(f).redSub(f);}else{var h=this.z.redSqr();var j=f.redSub(h).redISub(h);nx=b.redSub(c).redISub(d).redMul(j);ny=f.redMul(e.redSub(d));nz=f.redMul(j);}}else{var e=c.redAdd(d);var h=this.curve._mulC(this.z).redSqr();var j=e.redSub(h).redSub(h);nx=this.curve._mulC(b.redISub(e)).redMul(j);ny=this.curve._mulC(e).redMul(c.redISub(d));nz=e.redMul(j);}return this.curve.point(nx,ny,nz);};Point.prototype.dbl=function dbl(){if(this.isInfinity())return this;if(this.curve.extended)return this._extDbl();else return this._projDbl();};Point.prototype._extAdd=function _extAdd(p){var a=this.y.redSub(this.x).redMul(p.y.redSub(p.x));var b=this.y.redAdd(this.x).redMul(p.y.redAdd(p.x));var c=this.t.redMul(this.curve.dd).redMul(p.t);var d=this.z.redMul(p.z.redAdd(p.z));var e=b.redSub(a);var f=d.redSub(c);var g=d.redAdd(c);var h=b.redAdd(a);var nx=e.redMul(f);var ny=g.redMul(h);var nt=e.redMul(h);var nz=f.redMul(g);return this.curve.point(nx,ny,nz,nt);};Point.prototype._projAdd=function _projAdd(p){var a=this.z.redMul(p.z);var b=a.redSqr();var c=this.x.redMul(p.x);var d=this.y.redMul(p.y);var e=this.curve.d.redMul(c).redMul(d);var f=b.redSub(e);var g=b.redAdd(e);var tmp=this.x.redAdd(this.y).redMul(p.x.redAdd(p.y)).redISub(c).redISub(d);var nx=a.redMul(f).redMul(tmp);var ny;var nz;if(this.curve.twisted){ny=a.redMul(g).redMul(d.redSub(this.curve._mulA(c)));nz=f.redMul(g);}else{ny=a.redMul(g).redMul(d.redSub(c));nz=this.curve._mulC(f).redMul(g);}return this.curve.point(nx,ny,nz);};Point.prototype.add=function add(p){if(this.isInfinity())return p;if(p.isInfinity())return this;if(this.curve.extended)return this._extAdd(p);else return this._projAdd(p);};Point.prototype.mul=function mul(k){if(this._hasDoubles(k))return this.curve._fixedNafMul(this,k);else return this.curve._wnafMul(this,k);};Point.prototype.mulAdd=function mulAdd(k1,p,k2){return this.curve._wnafMulAdd(1,[this,p],[k1,k2],2,false);};Point.prototype.jmulAdd=function jmulAdd(k1,p,k2){return this.curve._wnafMulAdd(1,[this,p],[k1,k2],2,true);};Point.prototype.normalize=function normalize(){if(this.zOne)return this;var zi=this.z.redInvm();this.x=this.x.redMul(zi);this.y=this.y.redMul(zi);if(this.t)this.t=this.t.redMul(zi);this.z=this.curve.one;this.zOne=true;return this;};Point.prototype.neg=function neg(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg());};Point.prototype.getX=function getX(){this.normalize();return this.x.fromRed();};Point.prototype.getY=function getY(){this.normalize();return this.y.fromRed();};Point.prototype.eq=function eq(other){return this===other||this.getX().cmp(other.getX())===0&&this.getY().cmp(other.getY())===0;};Point.prototype.eqXToP=function eqXToP(x){var rx=x.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(rx)===0)return true;var xc=x.clone();var t=this.curve.redN.redMul(this.z);for(;;){xc.iadd(this.curve.n);if(xc.cmp(this.curve.p)>=0)return false;rx.redIAdd(t);if(this.x.cmp(rx)===0)return true;}};Point.prototype.toP=Point.prototype.normalize;Point.prototype.mixedAdd=Point.prototype.add;},9411:function(module,__unusedexports,__webpack_require__){"use strict";const toPull=__webpack_require__(4138);const through=__webpack_require__(6308);let createRabin;module.exports=options=>{if(!createRabin){try{createRabin=__webpack_require__(4906);if(typeof createRabin!=='function'){throw new Error('createRabin was not a function');}}catch(err){const error=new Error(`Rabin chunker not available, it may have failed to install or not be supported on this platform`);return through(function(){this.emit('error',error);});}}let min,max,avg;if(options.minChunkSize&&options.maxChunkSize&&options.avgChunkSize){avg=options.avgChunkSize;min=options.minChunkSize;max=options.maxChunkSize;}else{avg=options.avgChunkSize;min=avg/3;max=avg+avg/2;}const sizepow=Math.floor(Math.log2(avg));const rabin=createRabin({min:min,max:max,bits:sizepow,window:options.window||16,polynomial:options.polynomial||'0x3DF305DFB2A805'});return toPull.duplex(rabin);};},9412:function(module,__unusedexports,__webpack_require__){"use strict";try{module.exports=__webpack_require__(5674)(__dirname+'/utf-8-validate');}catch(e){module.exports=__webpack_require__(1709);}},9423:function(module){module.exports=require("buffer");},9424:function(module,__unusedexports,__webpack_require__){"use strict";const multihash=__webpack_require__(8757);const crypto=__webpack_require__(76);module.exports=Multihashing;function Multihashing(buf,func,length,callback){if(typeof length==='function'){callback=length;length=undefined;}if(!callback){throw new Error('Missing callback');}Multihashing.digest(buf,func,length,(err,digest)=>{if(err){return callback(err);}callback(null,multihash.encode(digest,func,length));});}Multihashing.Buffer=Buffer;Multihashing.multihash=multihash;Multihashing.digest=function(buf,func,length,callback){if(typeof length==='function'){callback=length;length=undefined;}if(!callback){throw new Error('Missing callback');}let cb=callback;if(length){cb=(err,digest)=>{if(err){return callback(err);}callback(null,digest.slice(0,length));};}let hash;try{hash=Multihashing.createHash(func);}catch(err){return cb(err);}hash(buf,cb);};Multihashing.createHash=function(func){func=multihash.coerceCode(func);if(!Multihashing.functions[func]){throw new Error('multihash function '+func+' not yet supported');}return Multihashing.functions[func];};Multihashing.functions={0x11:crypto.sha1,0x12:crypto.sha2256,0x13:crypto.sha2512,0x14:crypto.sha3512,0x15:crypto.sha3384,0x16:crypto.sha3256,0x17:crypto.sha3224,0x18:crypto.shake128,0x19:crypto.shake256,0x1A:crypto.keccak224,0x1B:crypto.keccak256,0x1C:crypto.keccak384,0x1D:crypto.keccak512,0x22:crypto.murmur3128,0x23:crypto.murmur332,0x56:crypto.dblSha2256};crypto.addBlake(Multihashing.functions);},9428:function(module,__unusedexports,__webpack_require__){"use strict";const mh=__webpack_require__(8757);var CIDUtil={checkCIDComponents:function(other){if(other==null){return'null values are not valid CIDs';}if(!(other.version===0||other.version===1)){return'Invalid version, must be a number equal to 1 or 0';}if(typeof other.codec!=='string'){return'codec must be string';}if(!Buffer.isBuffer(other.multihash)){return'multihash must be a Buffer';}try{mh.validate(other.multihash);}catch(err){let errorMsg=err.message;if(!errorMsg){errorMsg='Multihash validation failed';}return errorMsg;}}};module.exports=CIDUtil;},9434:function(module){/**
 * Timestamp for 64-bit time_t, nanosecond precision and strftime
 *
 * @author Yusuke Kawasaki
 * @license MIT
 * @see https://github.com/kawanet/timestamp-nano
 */var Timestamp=function(){if(true)module.exports=Timestamp;var SEC_DAY=24*3600;var YEAR_SLOT=3200;var DAY_SLOT=(365*400+97)*YEAR_SLOT/400;var SEC_SLOT=SEC_DAY*DAY_SLOT;var MSEC_SLOT=SEC_SLOT*1000;var MAX_MSEC=1000*10000*10000*SEC_DAY;var BIT24=0x1000000;var BIT32=0x10000*0x10000;var DEC6=1000*1000;var DEC9=1000*1000*1000;var ZERO9="000000000";var trunc=Math.trunc||Math_trunc;var P=Timestamp.prototype;Timestamp.fromDate=fromDate;Timestamp.fromInt64BE=buildFromInt64(0,1,2,3,0,4);Timestamp.fromInt64LE=buildFromInt64(3,2,1,0,4,0);Timestamp.fromString=fromString;Timestamp.fromTimeT=fromTimeT;P.year=0;P.time=0;P.nano=0;P.addNano=addNano;P.getNano=getNano;P.getTimeT=getTimeT;P.getYear=getYear;P.toDate=toDate;P.toJSON=toJSON;P.toString=toString;P.writeInt64BE=buildWriteInt64(0,1,2,3,0,4);P.writeInt64LE=buildWriteInt64(3,2,1,0,4,0);var FMT_JSON="%Y-%m-%dT%H:%M:%S.%NZ";var FMT_MONTH=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];var FMT_DAY=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];var FMT_STRING={"%":"%",F:"%Y-%m-%d",n:"\n",R:"%H:%M",T:"%H:%M:%S",t:"\t",X:"%T",Z:"GMT",z:"+0000"};return Timestamp;function Timestamp(time,nano,year){var ts=this;if(!(ts instanceof Timestamp))return new Timestamp(time,nano,year);ts.time=+time||0;ts.nano=+nano||0;ts.year=+year||0;normalize(ts);}function getYear(){var year=this.toDate().getUTCFullYear();return year+this.year;}function normalize(ts){var year=ts.year;var time=ts.time;var nano=ts.nano;var changed;var slot;if(nano<0||DEC6<=nano){var n=Math.floor(nano/DEC6);nano-=n*DEC6;time+=n;changed=1;}var y=year%YEAR_SLOT;if(time<-MAX_MSEC||MAX_MSEC<time||y){slot=trunc(time/MSEC_SLOT);if(slot){year+=slot*YEAR_SLOT;time-=slot*MSEC_SLOT;}var dt=newDate(time);dt.setUTCFullYear(y+dt.getUTCFullYear());year-=y;time=+dt;slot=trunc(year/YEAR_SLOT);var total=time+slot*MSEC_SLOT;if(slot&&-MAX_MSEC<=total&&total<=MAX_MSEC){year-=slot*YEAR_SLOT;time=total;}changed=1;}if(changed){ts.year=year;ts.time=time;ts.nano=nano;}return ts;}function toDate(){var ts=normalize(this);return newDate(ts.time);}function newDate(time){var dt=new Date(0);dt.setTime(time);return dt;}function addNano(nano){this.nano+=+nano||0;return this;}function getNano(){var ts=normalize(this);return(ts.time%1000*DEC6+ +ts.nano+DEC9)%DEC9;}function fromString(string){var time;var ts=new Timestamp();string+="";var array=string.replace(/^\s*[+\-]?\d+/,function(match){var year=+match;var y=1970+(year-1970)%400;ts.year=year-y;return y;}).replace(/(?:Z|([+\-]\d{2}):?(\d{2}))$/,function(match,hour,min){if(hour<0)min*=-1;time=(+hour*60+ +min)*60000;return"";}).replace(/\.\d+$/,function(match){ts.nano=+(match+ZERO9).substr(1,9);return"";}).split(/\D+/);if(array.length>1){array[1]--;}else{array[1]=0;}ts.time=time=Date.UTC.apply(Date,array)-(time||0);if(isNaN(time)){throw new TypeError("Invalid Date");}return normalize(ts);}function fromDate(date){return new Timestamp(+date);}function fromTimeT(time){return fromTime(time,0);}function fromTime(low,high){high|=0;high*=BIT32;low=+low||0;var slot=trunc(high/SEC_SLOT)+trunc(low/SEC_SLOT);var second=high%SEC_SLOT+low%SEC_SLOT;var offset=trunc(second/SEC_SLOT);if(offset){slot+=offset;second-=offset*SEC_SLOT;}return new Timestamp(second*1000,0,slot*YEAR_SLOT);}function getTimeT(){var ts=normalize(this);var time=Math.floor(ts.time/1000);var year=ts.year;if(year)time+=year*DAY_SLOT*SEC_DAY/YEAR_SLOT;return time;}function toJSON(){return this.toString().replace(/0{1,6}Z$/,"Z");}function toString(format){var ts=this;var dt=ts.toDate();var map={H:H,L:L,M:M,N:N,S:S,Y:Y,a:a,b:b,d:d,e:e,m:m};return strftime(format||FMT_JSON);function strftime(format){return format.replace(/%./g,function(match){var m=match[1];var c=FMT_STRING[m];var f=map[m];return c?strftime(c):f?f():match;});}function Y(){var year=ts.getYear();if(year>999999){return"+"+year;}else if(year>9999){return"+"+pad(year,6);}else if(year>=0){return pad(year,4);}else if(year>=-999999){return"-"+pad(-year,6);}else{return year;}}function m(){return pad2(dt.getUTCMonth()+1);}function d(){return pad2(dt.getUTCDate());}function e(){return padS(dt.getUTCDate());}function H(){return pad2(dt.getUTCHours());}function M(){return pad2(dt.getUTCMinutes());}function S(){return pad2(dt.getUTCSeconds());}function L(){return pad(dt.getUTCMilliseconds(),3);}function N(){return pad(ts.getNano(),9);}function a(){return FMT_DAY[dt.getUTCDay()];}function b(){return FMT_MONTH[dt.getUTCMonth()];}}function buildWriteInt64(pos0,pos1,pos2,pos3,posH,posL){return writeInt64;function writeInt64(buffer,offset){var ts=normalize(this);if(!buffer)buffer=new Array(8);checkRange(buffer,offset|=0);var second=Math.floor(ts.time/1000);var day=ts.year*(DAY_SLOT*SEC_DAY/YEAR_SLOT);var high=trunc(day/BIT32)+trunc(second/BIT32);var low=day%BIT32+second%BIT32;var slot=Math.floor(low/BIT32);if(slot){high+=slot;low-=slot*BIT32;}writeUint32(buffer,offset+posH,high);writeUint32(buffer,offset+posL,low);return buffer;}function writeUint32(buffer,offset,value){buffer[offset+pos0]=value>>24&255;buffer[offset+pos1]=value>>16&255;buffer[offset+pos2]=value>>8&255;buffer[offset+pos3]=value&255;}}function buildFromInt64(pos0,pos1,pos2,pos3,posH,posL){return fromInt64;function fromInt64(buffer,offset){checkRange(buffer,offset|=0);var high=readUint32(buffer,offset+posH);var low=readUint32(buffer,offset+posL);return fromTime(low,high);}function readUint32(buffer,offset){return buffer[offset+pos0]*BIT24+(buffer[offset+pos1]<<16|buffer[offset+pos2]<<8|buffer[offset+pos3]);}}function checkRange(buffer,offset){var last=buffer&&buffer.length;if(last==null)throw new TypeError("Invalid Buffer");if(last<offset+8)throw new RangeError("Out of range");}function Math_trunc(x){var n=x-x%1;return n===0&&(x<0||x===0&&1/x!==1/0)?-0:n;}function padS(v){return(v>9?"":" ")+(v|0);}function pad2(v){return(v>9?"":"0")+(v|0);}function pad(v,len){return(ZERO9+(v|0)).substr(-len);}}();},9441:function(module){"use strict";module.exports=`This is a repository of IPLD objects. Each IPLD object is in a single file,
named <base32 encoding of cid>.data. Where <base32 encoding of cid> is the
"base32" encoding of the CID (as specified in
https://github.com/multiformats/multibase) without the 'B' prefix.
All the object files are placed in a tree of directories, based on a
function of the CID. This is a form of sharding similar to
the objects directory in git repositories. Previously, we used
prefixes, we now use the next-to-last two charters.
    func NextToLast(base32cid string) {
      nextToLastLen := 2
      offset := len(base32cid) - nextToLastLen - 1
      return str[offset : offset+nextToLastLen]
    }
For example, an object with a base58 CIDv1 of
    zb2rhYSxw4ZjuzgCnWSt19Q94ERaeFhu9uSqRgjSdx9bsgM6f
has a base32 CIDv1 of
    BAFKREIA22FLID5AJ2KU7URG47MDLROZIH6YF2KALU2PWEFPVI37YLKRSCA
and will be placed at
    SC/AFKREIA22FLID5AJ2KU7URG47MDLROZIH6YF2KALU2PWEFPVI37YLKRSCA.data
with 'SC' being the last-to-next two characters and the 'B' at the
beginning of the CIDv1 string is the multibase prefix that is not
stored in the filename.
`;},9457:function(module,__unusedexports,__webpack_require__){var forge=__webpack_require__(7938);__webpack_require__(1617);__webpack_require__(5947);__webpack_require__(1835);__webpack_require__(6321);__webpack_require__(1087);__webpack_require__(9051);__webpack_require__(5105);__webpack_require__(321);__webpack_require__(5422);__webpack_require__(9786);__webpack_require__(1214);if(typeof BigInteger==='undefined'){var BigInteger=forge.jsbn.BigInteger;}var asn1=forge.asn1;var pki=forge.pki=forge.pki||{};module.exports=pki.pbe=forge.pbe=forge.pbe||{};var oids=pki.oids;var encryptedPrivateKeyValidator={name:'EncryptedPrivateKeyInfo',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:true,value:[{name:'EncryptedPrivateKeyInfo.encryptionAlgorithm',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:true,value:[{name:'AlgorithmIdentifier.algorithm',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.OID,constructed:false,capture:'encryptionOid'},{name:'AlgorithmIdentifier.parameters',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:true,captureAsn1:'encryptionParams'}]},{name:'EncryptedPrivateKeyInfo.encryptedData',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.OCTETSTRING,constructed:false,capture:'encryptedData'}]};var PBES2AlgorithmsValidator={name:'PBES2Algorithms',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:true,value:[{name:'PBES2Algorithms.keyDerivationFunc',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:true,value:[{name:'PBES2Algorithms.keyDerivationFunc.oid',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.OID,constructed:false,capture:'kdfOid'},{name:'PBES2Algorithms.params',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:true,value:[{name:'PBES2Algorithms.params.salt',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.OCTETSTRING,constructed:false,capture:'kdfSalt'},{name:'PBES2Algorithms.params.iterationCount',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.INTEGER,constructed:false,capture:'kdfIterationCount'},{name:'PBES2Algorithms.params.keyLength',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.INTEGER,constructed:false,optional:true,capture:'keyLength'},{name:'PBES2Algorithms.params.prf',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:true,optional:true,value:[{name:'PBES2Algorithms.params.prf.algorithm',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.OID,constructed:false,capture:'prfOid'}]}]}]},{name:'PBES2Algorithms.encryptionScheme',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:true,value:[{name:'PBES2Algorithms.encryptionScheme.oid',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.OID,constructed:false,capture:'encOid'},{name:'PBES2Algorithms.encryptionScheme.iv',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.OCTETSTRING,constructed:false,capture:'encIv'}]}]};var pkcs12PbeParamsValidator={name:'pkcs-12PbeParams',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:true,value:[{name:'pkcs-12PbeParams.salt',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.OCTETSTRING,constructed:false,capture:'salt'},{name:'pkcs-12PbeParams.iterations',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.INTEGER,constructed:false,capture:'iterations'}]};pki.encryptPrivateKeyInfo=function(obj,password,options){options=options||{};options.saltSize=options.saltSize||8;options.count=options.count||2048;options.algorithm=options.algorithm||'aes128';options.prfAlgorithm=options.prfAlgorithm||'sha1';var salt=forge.random.getBytesSync(options.saltSize);var count=options.count;var countBytes=asn1.integerToDer(count);var dkLen;var encryptionAlgorithm;var encryptedData;if(options.algorithm.indexOf('aes')===0||options.algorithm==='des'){var ivLen,encOid,cipherFn;switch(options.algorithm){case'aes128':dkLen=16;ivLen=16;encOid=oids['aes128-CBC'];cipherFn=forge.aes.createEncryptionCipher;break;case'aes192':dkLen=24;ivLen=16;encOid=oids['aes192-CBC'];cipherFn=forge.aes.createEncryptionCipher;break;case'aes256':dkLen=32;ivLen=16;encOid=oids['aes256-CBC'];cipherFn=forge.aes.createEncryptionCipher;break;case'des':dkLen=8;ivLen=8;encOid=oids['desCBC'];cipherFn=forge.des.createEncryptionCipher;break;default:var error=new Error('Cannot encrypt private key. Unknown encryption algorithm.');error.algorithm=options.algorithm;throw error;}var prfAlgorithm='hmacWith'+options.prfAlgorithm.toUpperCase();var md=prfAlgorithmToMessageDigest(prfAlgorithm);var dk=forge.pkcs5.pbkdf2(password,salt,count,dkLen,md);var iv=forge.random.getBytesSync(ivLen);var cipher=cipherFn(dk);cipher.start(iv);cipher.update(asn1.toDer(obj));cipher.finish();encryptedData=cipher.output.getBytes();var params=createPbkdf2Params(salt,countBytes,dkLen,prfAlgorithm);encryptionAlgorithm=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,true,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,false,asn1.oidToDer(oids['pkcs5PBES2']).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,true,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,true,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,false,asn1.oidToDer(oids['pkcs5PBKDF2']).getBytes()),params]),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,true,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,false,asn1.oidToDer(encOid).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OCTETSTRING,false,iv)])])]);}else if(options.algorithm==='3des'){dkLen=24;var saltBytes=new forge.util.ByteBuffer(salt);var dk=pki.pbe.generatePkcs12Key(password,saltBytes,1,count,dkLen);var iv=pki.pbe.generatePkcs12Key(password,saltBytes,2,count,dkLen);var cipher=forge.des.createEncryptionCipher(dk);cipher.start(iv);cipher.update(asn1.toDer(obj));cipher.finish();encryptedData=cipher.output.getBytes();encryptionAlgorithm=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,true,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,false,asn1.oidToDer(oids['pbeWithSHAAnd3-KeyTripleDES-CBC']).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,true,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OCTETSTRING,false,salt),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,false,countBytes.getBytes())])]);}else{var error=new Error('Cannot encrypt private key. Unknown encryption algorithm.');error.algorithm=options.algorithm;throw error;}var rval=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,true,[encryptionAlgorithm,asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OCTETSTRING,false,encryptedData)]);return rval;};pki.decryptPrivateKeyInfo=function(obj,password){var rval=null;var capture={};var errors=[];if(!asn1.validate(obj,encryptedPrivateKeyValidator,capture,errors)){var error=new Error('Cannot read encrypted private key. '+'ASN.1 object is not a supported EncryptedPrivateKeyInfo.');error.errors=errors;throw error;}var oid=asn1.derToOid(capture.encryptionOid);var cipher=pki.pbe.getCipher(oid,capture.encryptionParams,password);var encrypted=forge.util.createBuffer(capture.encryptedData);cipher.update(encrypted);if(cipher.finish()){rval=asn1.fromDer(cipher.output);}return rval;};pki.encryptedPrivateKeyToPem=function(epki,maxline){var msg={type:'ENCRYPTED PRIVATE KEY',body:asn1.toDer(epki).getBytes()};return forge.pem.encode(msg,{maxline:maxline});};pki.encryptedPrivateKeyFromPem=function(pem){var msg=forge.pem.decode(pem)[0];if(msg.type!=='ENCRYPTED PRIVATE KEY'){var error=new Error('Could not convert encrypted private key from PEM; '+'PEM header type is "ENCRYPTED PRIVATE KEY".');error.headerType=msg.type;throw error;}if(msg.procType&&msg.procType.type==='ENCRYPTED'){throw new Error('Could not convert encrypted private key from PEM; '+'PEM is encrypted.');}return asn1.fromDer(msg.body);};pki.encryptRsaPrivateKey=function(rsaKey,password,options){options=options||{};if(!options.legacy){var rval=pki.wrapRsaPrivateKey(pki.privateKeyToAsn1(rsaKey));rval=pki.encryptPrivateKeyInfo(rval,password,options);return pki.encryptedPrivateKeyToPem(rval);}var algorithm;var iv;var dkLen;var cipherFn;switch(options.algorithm){case'aes128':algorithm='AES-128-CBC';dkLen=16;iv=forge.random.getBytesSync(16);cipherFn=forge.aes.createEncryptionCipher;break;case'aes192':algorithm='AES-192-CBC';dkLen=24;iv=forge.random.getBytesSync(16);cipherFn=forge.aes.createEncryptionCipher;break;case'aes256':algorithm='AES-256-CBC';dkLen=32;iv=forge.random.getBytesSync(16);cipherFn=forge.aes.createEncryptionCipher;break;case'3des':algorithm='DES-EDE3-CBC';dkLen=24;iv=forge.random.getBytesSync(8);cipherFn=forge.des.createEncryptionCipher;break;case'des':algorithm='DES-CBC';dkLen=8;iv=forge.random.getBytesSync(8);cipherFn=forge.des.createEncryptionCipher;break;default:var error=new Error('Could not encrypt RSA private key; unsupported '+'encryption algorithm "'+options.algorithm+'".');error.algorithm=options.algorithm;throw error;}var dk=forge.pbe.opensslDeriveBytes(password,iv.substr(0,8),dkLen);var cipher=cipherFn(dk);cipher.start(iv);cipher.update(asn1.toDer(pki.privateKeyToAsn1(rsaKey)));cipher.finish();var msg={type:'RSA PRIVATE KEY',procType:{version:'4',type:'ENCRYPTED'},dekInfo:{algorithm:algorithm,parameters:forge.util.bytesToHex(iv).toUpperCase()},body:cipher.output.getBytes()};return forge.pem.encode(msg);};pki.decryptRsaPrivateKey=function(pem,password){var rval=null;var msg=forge.pem.decode(pem)[0];if(msg.type!=='ENCRYPTED PRIVATE KEY'&&msg.type!=='PRIVATE KEY'&&msg.type!=='RSA PRIVATE KEY'){var error=new Error('Could not convert private key from PEM; PEM header type '+'is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');error.headerType=error;throw error;}if(msg.procType&&msg.procType.type==='ENCRYPTED'){var dkLen;var cipherFn;switch(msg.dekInfo.algorithm){case'DES-CBC':dkLen=8;cipherFn=forge.des.createDecryptionCipher;break;case'DES-EDE3-CBC':dkLen=24;cipherFn=forge.des.createDecryptionCipher;break;case'AES-128-CBC':dkLen=16;cipherFn=forge.aes.createDecryptionCipher;break;case'AES-192-CBC':dkLen=24;cipherFn=forge.aes.createDecryptionCipher;break;case'AES-256-CBC':dkLen=32;cipherFn=forge.aes.createDecryptionCipher;break;case'RC2-40-CBC':dkLen=5;cipherFn=function(key){return forge.rc2.createDecryptionCipher(key,40);};break;case'RC2-64-CBC':dkLen=8;cipherFn=function(key){return forge.rc2.createDecryptionCipher(key,64);};break;case'RC2-128-CBC':dkLen=16;cipherFn=function(key){return forge.rc2.createDecryptionCipher(key,128);};break;default:var error=new Error('Could not decrypt private key; unsupported '+'encryption algorithm "'+msg.dekInfo.algorithm+'".');error.algorithm=msg.dekInfo.algorithm;throw error;}var iv=forge.util.hexToBytes(msg.dekInfo.parameters);var dk=forge.pbe.opensslDeriveBytes(password,iv.substr(0,8),dkLen);var cipher=cipherFn(dk);cipher.start(iv);cipher.update(forge.util.createBuffer(msg.body));if(cipher.finish()){rval=cipher.output.getBytes();}else{return rval;}}else{rval=msg.body;}if(msg.type==='ENCRYPTED PRIVATE KEY'){rval=pki.decryptPrivateKeyInfo(asn1.fromDer(rval),password);}else{rval=asn1.fromDer(rval);}if(rval!==null){rval=pki.privateKeyFromAsn1(rval);}return rval;};pki.pbe.generatePkcs12Key=function(password,salt,id,iter,n,md){var j,l;if(typeof md==='undefined'||md===null){if(!('sha1'in forge.md)){throw new Error('"sha1" hash algorithm unavailable.');}md=forge.md.sha1.create();}var u=md.digestLength;var v=md.blockLength;var result=new forge.util.ByteBuffer();var passBuf=new forge.util.ByteBuffer();if(password!==null&&password!==undefined){for(l=0;l<password.length;l++){passBuf.putInt16(password.charCodeAt(l));}passBuf.putInt16(0);}var p=passBuf.length();var s=salt.length();var D=new forge.util.ByteBuffer();D.fillWithByte(id,v);var Slen=v*Math.ceil(s/v);var S=new forge.util.ByteBuffer();for(l=0;l<Slen;l++){S.putByte(salt.at(l%s));}var Plen=v*Math.ceil(p/v);var P=new forge.util.ByteBuffer();for(l=0;l<Plen;l++){P.putByte(passBuf.at(l%p));}var I=S;I.putBuffer(P);var c=Math.ceil(n/u);for(var i=1;i<=c;i++){var buf=new forge.util.ByteBuffer();buf.putBytes(D.bytes());buf.putBytes(I.bytes());for(var round=0;round<iter;round++){md.start();md.update(buf.getBytes());buf=md.digest();}var B=new forge.util.ByteBuffer();for(l=0;l<v;l++){B.putByte(buf.at(l%u));}var k=Math.ceil(s/v)+Math.ceil(p/v);var Inew=new forge.util.ByteBuffer();for(j=0;j<k;j++){var chunk=new forge.util.ByteBuffer(I.getBytes(v));var x=0x1ff;for(l=B.length()-1;l>=0;l--){x=x>>8;x+=B.at(l)+chunk.at(l);chunk.setAt(l,x&0xff);}Inew.putBuffer(chunk);}I=Inew;result.putBuffer(buf);}result.truncate(result.length()-n);return result;};pki.pbe.getCipher=function(oid,params,password){switch(oid){case pki.oids['pkcs5PBES2']:return pki.pbe.getCipherForPBES2(oid,params,password);case pki.oids['pbeWithSHAAnd3-KeyTripleDES-CBC']:case pki.oids['pbewithSHAAnd40BitRC2-CBC']:return pki.pbe.getCipherForPKCS12PBE(oid,params,password);default:var error=new Error('Cannot read encrypted PBE data block. Unsupported OID.');error.oid=oid;error.supportedOids=['pkcs5PBES2','pbeWithSHAAnd3-KeyTripleDES-CBC','pbewithSHAAnd40BitRC2-CBC'];throw error;}};pki.pbe.getCipherForPBES2=function(oid,params,password){var capture={};var errors=[];if(!asn1.validate(params,PBES2AlgorithmsValidator,capture,errors)){var error=new Error('Cannot read password-based-encryption algorithm '+'parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.');error.errors=errors;throw error;}oid=asn1.derToOid(capture.kdfOid);if(oid!==pki.oids['pkcs5PBKDF2']){var error=new Error('Cannot read encrypted private key. '+'Unsupported key derivation function OID.');error.oid=oid;error.supportedOids=['pkcs5PBKDF2'];throw error;}oid=asn1.derToOid(capture.encOid);if(oid!==pki.oids['aes128-CBC']&&oid!==pki.oids['aes192-CBC']&&oid!==pki.oids['aes256-CBC']&&oid!==pki.oids['des-EDE3-CBC']&&oid!==pki.oids['desCBC']){var error=new Error('Cannot read encrypted private key. '+'Unsupported encryption scheme OID.');error.oid=oid;error.supportedOids=['aes128-CBC','aes192-CBC','aes256-CBC','des-EDE3-CBC','desCBC'];throw error;}var salt=capture.kdfSalt;var count=forge.util.createBuffer(capture.kdfIterationCount);count=count.getInt(count.length()<<3);var dkLen;var cipherFn;switch(pki.oids[oid]){case'aes128-CBC':dkLen=16;cipherFn=forge.aes.createDecryptionCipher;break;case'aes192-CBC':dkLen=24;cipherFn=forge.aes.createDecryptionCipher;break;case'aes256-CBC':dkLen=32;cipherFn=forge.aes.createDecryptionCipher;break;case'des-EDE3-CBC':dkLen=24;cipherFn=forge.des.createDecryptionCipher;break;case'desCBC':dkLen=8;cipherFn=forge.des.createDecryptionCipher;break;}var md=prfOidToMessageDigest(capture.prfOid);var dk=forge.pkcs5.pbkdf2(password,salt,count,dkLen,md);var iv=capture.encIv;var cipher=cipherFn(dk);cipher.start(iv);return cipher;};pki.pbe.getCipherForPKCS12PBE=function(oid,params,password){var capture={};var errors=[];if(!asn1.validate(params,pkcs12PbeParamsValidator,capture,errors)){var error=new Error('Cannot read password-based-encryption algorithm '+'parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.');error.errors=errors;throw error;}var salt=forge.util.createBuffer(capture.salt);var count=forge.util.createBuffer(capture.iterations);count=count.getInt(count.length()<<3);var dkLen,dIvLen,cipherFn;switch(oid){case pki.oids['pbeWithSHAAnd3-KeyTripleDES-CBC']:dkLen=24;dIvLen=8;cipherFn=forge.des.startDecrypting;break;case pki.oids['pbewithSHAAnd40BitRC2-CBC']:dkLen=5;dIvLen=8;cipherFn=function(key,iv){var cipher=forge.rc2.createDecryptionCipher(key,40);cipher.start(iv,null);return cipher;};break;default:var error=new Error('Cannot read PKCS #12 PBE data block. Unsupported OID.');error.oid=oid;throw error;}var md=prfOidToMessageDigest(capture.prfOid);var key=pki.pbe.generatePkcs12Key(password,salt,1,count,dkLen,md);md.start();var iv=pki.pbe.generatePkcs12Key(password,salt,2,count,dIvLen,md);return cipherFn(key,iv);};pki.pbe.opensslDeriveBytes=function(password,salt,dkLen,md){if(typeof md==='undefined'||md===null){if(!('md5'in forge.md)){throw new Error('"md5" hash algorithm unavailable.');}md=forge.md.md5.create();}if(salt===null){salt='';}var digests=[hash(md,password+salt)];for(var length=16,i=1;length<dkLen;++i,length+=16){digests.push(hash(md,digests[i-1]+password+salt));}return digests.join('').substr(0,dkLen);};function hash(md,bytes){return md.start().update(bytes).digest().getBytes();}function prfOidToMessageDigest(prfOid){var prfAlgorithm;if(!prfOid){prfAlgorithm='hmacWithSHA1';}else{prfAlgorithm=pki.oids[asn1.derToOid(prfOid)];if(!prfAlgorithm){var error=new Error('Unsupported PRF OID.');error.oid=prfOid;error.supported=['hmacWithSHA1','hmacWithSHA224','hmacWithSHA256','hmacWithSHA384','hmacWithSHA512'];throw error;}}return prfAlgorithmToMessageDigest(prfAlgorithm);}function prfAlgorithmToMessageDigest(prfAlgorithm){var factory=forge.md;switch(prfAlgorithm){case'hmacWithSHA224':factory=forge.md.sha512;case'hmacWithSHA1':case'hmacWithSHA256':case'hmacWithSHA384':case'hmacWithSHA512':prfAlgorithm=prfAlgorithm.substr(8).toLowerCase();break;default:var error=new Error('Unsupported PRF algorithm.');error.algorithm=prfAlgorithm;error.supported=['hmacWithSHA1','hmacWithSHA224','hmacWithSHA256','hmacWithSHA384','hmacWithSHA512'];throw error;}if(!factory||!(prfAlgorithm in factory)){throw new Error('Unknown hash algorithm: '+prfAlgorithm);}return factory[prfAlgorithm].create();}function createPbkdf2Params(salt,countBytes,dkLen,prfAlgorithm){var params=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,true,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OCTETSTRING,false,salt),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,false,countBytes.getBytes())]);if(prfAlgorithm!=='hmacWithSHA1'){params.value.push(asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,false,forge.util.hexToBytes(dkLen.toString(16))),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,true,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,false,asn1.oidToDer(pki.oids[prfAlgorithm]).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.NULL,false,'')]));}return params;}},9464:function(module,__unusedexports,__webpack_require__){"use strict";var BigInteger=__webpack_require__(4204).BigInteger;var common=__webpack_require__(2540);var padStart=__webpack_require__(6682);var repeat=__webpack_require__(6309);var sprintf=__webpack_require__(7586).sprintf;var constants=__webpack_require__(3897);function Address4(address){this.valid=false;this.address=address;this.groups=constants.GROUPS;this.v4=true;this.subnet='/32';this.subnetMask=32;var subnet=constants.RE_SUBNET_STRING.exec(address);if(subnet){this.parsedSubnet=subnet[0].replace('/','');this.subnetMask=parseInt(this.parsedSubnet,10);this.subnet='/'+this.subnetMask;if(this.subnetMask<0||this.subnetMask>constants.BITS){this.valid=false;this.error='Invalid subnet mask.';return;}address=address.replace(constants.RE_SUBNET_STRING,'');}this.addressMinusSuffix=address;this.parsedAddress=this.parse(address);}Address4.prototype.parse=function(address){var groups=address.split('.');if(address.match(constants.RE_ADDRESS)){this.valid=true;}else{this.error='Invalid IPv4 address.';}return groups;};Address4.prototype.isValid=function(){return this.valid;};Address4.prototype.correctForm=function(){return this.parsedAddress.map(function(part){return parseInt(part,10);}).join('.');};Address4.prototype.isCorrect=common.isCorrect(constants.BITS);Address4.fromHex=function(hex){var padded=padStart(hex.replace(/:/g,''),8,'0');var groups=[];var i;for(i=0;i<8;i+=2){var h=padded.slice(i,i+2);groups.push(parseInt(h,16));}return new Address4(groups.join('.'));};Address4.fromInteger=function(integer){return Address4.fromHex(integer.toString(16));};Address4.prototype.toHex=function(){return this.parsedAddress.map(function(part){return sprintf('%02x',parseInt(part,10));}).join(':');};Address4.prototype.toArray=function(){return this.parsedAddress.map(function(part){return parseInt(part,10);});};Address4.prototype.toGroup6=function(){var output=[];var i;for(i=0;i<constants.GROUPS;i+=2){var hex=sprintf('%02x%02x',parseInt(this.parsedAddress[i],10),parseInt(this.parsedAddress[i+1],10));output.push(sprintf('%x',parseInt(hex,16)));}return output.join(':');};Address4.prototype.bigInteger=function(){if(!this.valid){return null;}return new BigInteger(this.parsedAddress.map(function(n){return sprintf('%02x',parseInt(n,10));}).join(''),16);};Address4.prototype.startAddress=function(){var startAddress=new BigInteger(this.mask()+repeat(0,constants.BITS-this.subnetMask),2);return Address4.fromBigInteger(startAddress);};Address4.prototype.endAddress=function(){var endAddress=new BigInteger(this.mask()+repeat(1,constants.BITS-this.subnetMask),2);return Address4.fromBigInteger(endAddress);};Address4.fromBigInteger=function(bigInteger){return Address4.fromInteger(parseInt(bigInteger.toString(),10));};Address4.prototype.mask=function(optionalMask){if(optionalMask===undefined){optionalMask=this.subnetMask;}return this.getBitsBase2(0,optionalMask);};Address4.prototype.getBitsBase2=function(start,end){return this.binaryZeroPad().slice(start,end);};Address4.prototype.isInSubnet=common.isInSubnet;Address4.prototype.binaryZeroPad=function(){return padStart(this.bigInteger().toString(2),constants.BITS,'0');};module.exports=Address4;},9466:function(module,__unusedexports,__webpack_require__){var baseFlatten=__webpack_require__(8232);var INFINITY=1/0;function flattenDeep(array){var length=array==null?0:array.length;return length?baseFlatten(array,INFINITY):[];}module.exports=flattenDeep;},9480:function(module,exports,__webpack_require__){"use strict";const protobuf=__webpack_require__(817);const keysPBM=protobuf(__webpack_require__(8278));__webpack_require__(5947);__webpack_require__(9786);__webpack_require__(9457);const forge=__webpack_require__(7938);exports=module.exports;const supportedKeys={rsa:__webpack_require__(9237),ed25519:__webpack_require__(6221),secp256k1:__webpack_require__(8689)(keysPBM,__webpack_require__(3532))};exports.supportedKeys=supportedKeys;exports.keysPBM=keysPBM;function isValidKeyType(keyType){const key=supportedKeys[keyType.toLowerCase()];return key!==undefined;}exports.keyStretcher=__webpack_require__(5185);exports.generateEphemeralKeyPair=__webpack_require__(7005);exports.generateKeyPair=(type,bits,cb)=>{let key=supportedKeys[type.toLowerCase()];if(!key){return cb(new Error('invalid or unsupported key type'));}key.generateKeyPair(bits,cb);};exports.generateKeyPairFromSeed=(type,seed,bits,cb)=>{let key=supportedKeys[type.toLowerCase()];if(!key){return cb(new Error('invalid or unsupported key type'));}if(type.toLowerCase()!=='ed25519'){return cb(new Error('Seed key derivation is unimplemented for RSA or secp256k1'));}key.generateKeyPairFromSeed(seed,bits,cb);};exports.unmarshalPublicKey=buf=>{const decoded=keysPBM.PublicKey.decode(buf);const data=decoded.Data;switch(decoded.Type){case keysPBM.KeyType.RSA:return supportedKeys.rsa.unmarshalRsaPublicKey(data);case keysPBM.KeyType.Ed25519:return supportedKeys.ed25519.unmarshalEd25519PublicKey(data);case keysPBM.KeyType.Secp256k1:if(supportedKeys.secp256k1){return supportedKeys.secp256k1.unmarshalSecp256k1PublicKey(data);}else{throw new Error('secp256k1 support requires libp2p-crypto-secp256k1 package');}default:throw new Error('invalid or unsupported key type');}};exports.marshalPublicKey=(key,type)=>{type=(type||'rsa').toLowerCase();if(!isValidKeyType(type)){throw new Error('invalid or unsupported key type');}return key.bytes;};exports.unmarshalPrivateKey=(buf,callback)=>{let decoded;try{decoded=keysPBM.PrivateKey.decode(buf);}catch(err){return callback(err);}const data=decoded.Data;switch(decoded.Type){case keysPBM.KeyType.RSA:return supportedKeys.rsa.unmarshalRsaPrivateKey(data,callback);case keysPBM.KeyType.Ed25519:return supportedKeys.ed25519.unmarshalEd25519PrivateKey(data,callback);case keysPBM.KeyType.Secp256k1:if(supportedKeys.secp256k1){return supportedKeys.secp256k1.unmarshalSecp256k1PrivateKey(data,callback);}else{return callback(new Error('secp256k1 support requires libp2p-crypto-secp256k1 package'));}default:callback(new Error('invalid or unsupported key type'));}};exports.marshalPrivateKey=(key,type)=>{type=(type||'rsa').toLowerCase();if(!isValidKeyType(type)){throw new Error('invalid or unsupported key type');}return key.bytes;};exports.import=(pem,password,callback)=>{try{const key=forge.pki.decryptRsaPrivateKey(pem,password);if(key===null){throw new Error('Cannot read the key, most likely the password is wrong or not a RSA key');}let der=forge.asn1.toDer(forge.pki.privateKeyToAsn1(key));der=Buffer.from(der.getBytes(),'binary');return supportedKeys.rsa.unmarshalRsaPrivateKey(der,callback);}catch(err){callback(err);}};},9482:function(module,__unusedexports,__webpack_require__){"use strict";const{URL}=__webpack_require__(774);const fetch=__webpack_require__(2398);module.exports=self=>{return async(url,options,callback)=>{if(typeof options==='function'){callback=options;options={};}let files;try{const parsedUrl=new URL(url);const res=await fetch(url);if(!res.ok){throw new Error('unexpected status code: '+res.status);}const content=Buffer.from((await res.arrayBuffer()));const path=decodeURIComponent(parsedUrl.pathname.split('/').pop());files=await self.add({content,path},options);}catch(err){if(callback){return callback(err);}throw err;}if(callback){callback(null,files);}return files;};};},9486:function(module,__unusedexports,__webpack_require__){const pull=__webpack_require__(2885);module.exports=source=>{return _wrapAsyncGenerator(function*(){let _read;const sink=read=>{_read=()=>new Promise((resolve,reject)=>{read(null,(end,data)=>{if(end===true)return resolve({end});if(end)return reject(end);resolve({data});});});};pull(source,sink);while(true){const{end,data}=yield _awaitAsyncGenerator(_read());if(end)break;yield data;}})();};},9498:function(module,__unusedexports,__webpack_require__){const util=__webpack_require__(649),AbstractIterator=__webpack_require__(5238).AbstractIterator,fastFuture=__webpack_require__(237);function Iterator(db,options){AbstractIterator.call(this,db);this.binding=db.binding.iterator(options);this.cache=null;this.finished=false;this.fastFuture=fastFuture();}util.inherits(Iterator,AbstractIterator);Iterator.prototype.seek=function(target){if(this._ended)throw new Error('cannot call seek() after end()');if(this._nexting)throw new Error('cannot call seek() before next() has completed');if(typeof target!=='string'&&!Buffer.isBuffer(target))throw new Error('seek() requires a string or buffer key');if(target.length==0)throw new Error('cannot seek() to an empty key');this.cache=null;this.binding.seek(target);this.finished=false;};Iterator.prototype._next=function(callback){var that=this,key,value;if(this.cache&&this.cache.length){key=this.cache.pop();value=this.cache.pop();this.fastFuture(function(){callback(null,key,value);});}else if(this.finished){this.fastFuture(function(){callback();});}else{this.binding.next(function(err,array,finished){if(err)return callback(err);that.cache=array;that.finished=finished;that._next(callback);});}return this;};Iterator.prototype._end=function(callback){delete this.cache;this.binding.end(callback);};module.exports=Iterator;},9509:function(module){"use strict";module.exports=function infinite(generate){generate=generate||Math.random;return function(end,cb){if(end)return cb&&cb(end);return cb(null,generate());};};},9511:function(module,__unusedexports,__webpack_require__){"use strict";const values=__webpack_require__(5130);const collect=__webpack_require__(8342);const empty=__webpack_require__(7086);const pull=__webpack_require__(418);const lp=__webpack_require__(8585);const handshake=__webpack_require__(9346);const debug=__webpack_require__(746);const log=debug('libp2p:circuit:stream-handler');log.err=debug('libp2p:circuit:error:stream-handler');class StreamHandler{constructor(conn,cb,timeout,maxLength){this.conn=conn;this.stream=null;this.shake=null;this.timeout=cb||1000*60;this.maxLength=maxLength||4096;if(typeof cb==='function'){this.timeout=timeout||1000*60;}this.stream=handshake({timeout:this.timeout},cb);this.shake=this.stream.handshake;pull(this.stream,conn,this.stream);}isValid(){return this.conn&&this.shake&&this.stream;}read(cb){if(!this.isValid()){return cb(new Error(`handler is not in a valid state`));}lp.decodeFromReader(this.shake,{maxLength:this.maxLength},(err,msg)=>{if(err){log.err(err);return cb(err);}return cb(null,msg);});}write(msg,cb){cb=cb||(()=>{});if(!this.isValid()){return cb(new Error(`handler is not in a valid state`));}pull(values([msg]),lp.encode(),collect((err,encoded)=>{if(err){log.err(err);this.shake.abort(err);return cb(err);}encoded.forEach(e=>this.shake.write(e));cb();}));}getRawConn(){return this.conn;}rest(){const rest=this.shake.rest();this.conn=null;this.stream=null;this.shake=null;return rest;}close(){if(!this.isValid()){return;}pull(empty(),this.rest());}}module.exports=StreamHandler;},9517:function(module,__unusedexports,__webpack_require__){module.exports={input:__webpack_require__(5928),output:__webpack_require__(3606)};},9519:function(module){module.exports=[["0","\u0000",127],["8141","",4,"",6,""],["8161","",9,"",5,""],["8181","",18,"",4,"",6,"",5,"",6,"",7,"",7,"",4,"",4,""],["8241","",7,"",5],["8261","",6,"",5,""],["8281","",7,"",7,"",4,"",10,"",5,"",17,"",7,"",6,"",7,"",18],["8341","",5,"",5,"",7],["8361","",18,""],["8381","",4,"",6,"",5,"",5,"",46,"",6,"",5,"",8],["8441","",5,"",8],["8461","",18],["8481","",7,"",6,"",5,"",10,"",5,"",18,"",5,"",6,"",5,"",26,""],["8541","",5,"",4,"",6,"",4],["8561","",5,"",5,"",6,""],["8581","",6,"",6,"",9,"",26,"",29,"",6,"",5,""],["8641","",6,"",5,""],["8661","",6,"",10],["8681","",22,"",4,"",6,"",5,"",6,"",22,"",4,""],["8741","",9,"",15],["8761","",18,""],["8781","",5,"",7,"",7,"",5,"",6,"",5,"",18,"",6,"",26,"",6,"",4],["8841","",4,"",5,"",6,"",4],["8861","",4,""],["8881","",15,"",4,"",6,"",5,"",54,""],["8941","",6,"",5,""],["8961","",10,"",5,""],["8981","",21,"",18,"",18,"",6,"",6,"",7,"",15],["8a41","",10,"",6,""],["8a61","",4,"",18,""],["8a81","",4,"",19,"",5,"",7,"",5,"",6,"",5,"",4,"",5,"",26,""],["8b41","",5,"",4,"",6,""],["8b61","",6,"",8],["8b81","",52,"",4,"",6,"",5,"",18,"",18],["8c41","",15,"",4],["8c61","",6,"",5,"",6,"",5],["8c81","",12,"",26,"",50,"",5,"",16],["8d41","",16,"",8],["8d61","",17,""],["8d81","",4,"",33,"",6,"",7,"",6,"",9,"",6,"",5,"",6,""],["8e41","",6,"",5,"",8],["8e61","",4,"",19],["8e81","",13,"",6,"",4,"",6,"",5,"",6,"",5,"",11,"",7,"",6,"",5,"",7],["8f41","",7,"",17],["8f61","",7,"",6,"",4],["8f81","",5,"",7,"",5,"",6,"",5,"",18,"",6,"",26,"",6,"",5],["9041","",6,"",5,""],["9061","",5,"",15],["9081","",12,"",6,"",5,"",4,"",6,"",4,"",5,"",11,"",33,""],["9141","",6,"",5],["9161","",9,"",5],["9181","",20,"",4,"",5,"",14,"",33,"",7,"",5,"",6],["9241","",7,"",4,""],["9261","",7,"",7,"",4],["9281","",21,"",18,"",6,"",7,"",6,"",35,""],["9341","",4,""],["9361","",6,"",8],["9381","",37,"",4,"",4,"",6,"",5,"",7,"",22,""],["9441","",5,"",5,"",8],["9461","",5,"",6,"",12],["9481","",5,"",6,"",6,"",9,"",22,"",4,"",6,"",10,"",6,"",24],["9541","",11,"",5,""],["9561","",6,"",5,""],["9581","",6,"",35,"",4,"",4,"",4,"",6,"",5,"",13,"",14],["9641","",23,""],["9661","",6,"",5,"",8],["9681","",10,"",5,"",13,"",33,"",6,"",44],["9741","",16,"",8],["9761","",17,"",7],["9781","",11,"",5,"",6,"",89,""],["9841","",16,"",5,""],["9861","",6,"",15],["9881","",21,"",6,"",5,"",4,"",6,"",5,"",6,"",5,"",6,"",5,""],["9941","",6,"",5,""],["9961","",6,"",5,""],["9981","",8,"",5,"",4,"",11,"",5,"",6,"",6,"",6,"",7,"",6,"",5,""],["9a41","",16],["9a61","",6,"",6,""],["9a81","",4,"",6,"",5,"",5,"",6,"",5,"",5,"",33,"",5,"",6,""],["9b41","",6,"",8],["9b61","",17,"",7],["9b81","",25,"",4,"",5,"",50,"",22,""],["9c41","",4,"",5,"",5],["9c61","",8,"",6,"",9],["9c81","",8,"",6,"",6,"",9,"",26,"",6,"",5,"",18,"",6,"",12],["9d41","",13,"",8],["9d61","",25],["9d81","",8,"",5,"",9,"",6,"",10,"",6,"",5,"",6,"",5,""],["9e41","",7,"",9,""],["9e61","",4,"",6,""],["9e81","",6,"",6,"",6,"",5,"",10,"",5,"",6,"",5,"",6,""],["9f41","",5,"",4,"",5,""],["9f61","",6,"",5,""],["9f81","",4,"",5,"",6,"",5,"",6,"",4,"",6,"",7,"",4,"",4,""],["a041","",5,"",6,""],["a061","",5,"",13],["a081","",4,"",4,"",4,"",6,"",5,"",6,"",5,"",26,"",4,"",5,"",7,""],["a141","",18,""],["a161","",6,"",5,""],["a181","",14,"",5,"",4,"",9,""],["a241","",5,"",18],["a261","",6,"",18],["a281","",7,"",6,"",7,""],["a341","",6,"",10,""],["a361","",6,"",16],["a381","",16,"",4,"",58,"",32,""],["a441","",5,""],["a461","",5,"",12],["a481","",28,"",93],["a541","",4,"",6,"",5,""],["a561","",17,"",5,""],["a581","",16,"",14,"",9],["a5b0","",9],["a5c1","",16,"",6],["a5e1","",16,"",6],["a641","",19,""],["a661","",5,"",5,"",6],["a681","",6,"",18,"",7],["a741","",4,"",6,"",7],["a761","",22,""],["a781","",6,"",5,"",7,"",9,"",9,"",4,"",5,"",4,""],["a841","",10,"",14],["a861","",18,"",6],["a881","",19,"",11,""],["a8a6",""],["a8a8",""],["a8b1","",27,"",25,"",14,""],["a941","",14,"",10],["a961","",18],["a981","",14,"",6,"",27,"",25,"",14,""],["aa41","",6,"",4,""],["aa61","",4,"",5,"",6,""],["aa81","",29,"",82],["ab41","",6,"",5,""],["ab61","",6,"",5,"",5],["ab81","",8,"",6,"",12,"",85],["ac41","",5,"",6,""],["ac61","",11,"",4],["ac81","",28,"",5,"",25],["acd1","",5,"",25],["ad41","",6,"",5,"",7],["ad61","",6,"",10,""],["ad81","",5,"",18,""],["ae41","",5,"",16],["ae61","",5,"",6,"",4],["ae81","",6,"",5,""],["af41","",19],["af61","",13,"",5,""],["af81","",5,"",6,"",5,""],["b041","",5,"",5,"",12],["b061","",5,"",19],["b081","",13,"",6,"",5,"",7,"",4,""],["b141","",6,"",5,""],["b161","",6,"",5,"",11],["b181","",14,"",6,""],["b241","",6,"",5,""],["b261","",18,"",5,""],["b281","",5,"",18,"",6,""],["b341","",19,""],["b361","",5,"",5,"",5],["b381","",5,"",5,"",19,"",4,""],["b441","",5,"",6,"",5],["b461","",6,"",10,""],["b481","",6,"",18,"",4,"",4,""],["b541","",14,"",5],["b561","",5,"",5,"",4],["b581","",6,"",5,"",11,""],["b641","",7,"",17],["b661","",15,""],["b681","",5,"",6,"",5,""],["b741","",13,"",6,""],["b761","",20,""],["b781","",6,"",14,""],["b841","",7,"",17],["b861","",8,"",13],["b881","",5,"",24,"",4,""],["b941","",6,"",5,""],["b961","",14,"",6,""],["b981","",22,"",4,"",4,""],["ba41","",5,"",6,""],["ba61","",5,"",4,"",5],["ba81","",6,"",9,""],["bb41","",4,"",5,"",4,""],["bb61","",6,"",5,""],["bb81","",31,""],["bc41","",17,""],["bc61","",5,"",6,""],["bc81","",4,"",6,"",5,"",5,"",4,""],["bd41","",7,"",7,""],["bd61","",5,"",13],["bd81","",5,"",25,""],["be41","",7,"",14],["be61","",7,"",7,""],["be81","",4,"",4,"",5,"",8,"",6,""],["bf41","",10,"",14],["bf61","",18,""],["bf81","",5,"",7,"",6,"",5,""],["c041","",5,"",6,"",5],["c061","",25],["c081","",6,"",5,"",7,""],["c141","",5,"",6,""],["c161","",19,""],["c181","",31,""],["c241","",4,"",5,""],["c261","",4,"",5,"",6,""],["c281","",5,"",7,"",9,""],["c341","",4],["c361","",4,"",5,"",11],["c381","",5,"",7,"",5,""],["c441","",7,"",7,""],["c461","",5,"",4],["c481","",5,"",11,""],["c541","",6,"",5,""],["c561","",6,"",5,"",4],["c581","",6,"",5,""],["c641","",6,"",5],["c6a1",""],["c7a1",""],["c8a1",""],["caa1",""],["cba1",""],["cca1",""],["cda1",""],["cea1",""],["cfa1",""],["d0a1",""],["d1a1","",5,"",4,""],["d2a1","",4,"",5,"",10,"",7,"",5,""],["d3a1",""],["d4a1",""],["d5a1",""],["d6a1",""],["d7a1",""],["d8a1",""],["d9a1",""],["daa1",""],["dba1",""],["dca1",""],["dda1",""],["dea1",""],["dfa1",""],["e0a1",""],["e1a1",""],["e2a1",""],["e3a1",""],["e4a1",""],["e5a1",""],["e6a1",""],["e7a1",""],["e8a1",""],["e9a1",""],["eaa1",""],["eba1",""],["eca1",""],["eda1",""],["eea1",""],["efa1",""],["f0a1",""],["f1a1",""],["f2a1",""],["f3a1",""],["f4a1",""],["f5a1",""],["f6a1",""],["f7a1",""],["f8a1",""],["f9a1",""],["faa1",""],["fba1",""],["fca1",""],["fda1",""]];},9524:function(module){"use strict";module.exports='/mplex/6.7.0';},9539:function(module){"use strict";module.exports=`
  syntax = "proto2";

  package ipfs.pin;

  option go_package = "pb";

  message Set {
    optional uint32 version = 1;
    optional uint32 fanout = 2;
    optional fixed32 seed = 3;
  }
`;},9542:function(module,__unusedexports,__webpack_require__){"use strict";const pause=__webpack_require__(6827);const pull=__webpack_require__(418);const map=__webpack_require__(569);const writable=__webpack_require__(8970);const pushable=__webpack_require__(5995);const assert=__webpack_require__(3930);const setImmediate=__webpack_require__(7368);const DAGBuilder=__webpack_require__(8906);const createTreeBuilder=__webpack_require__(5716);const chunkers=__webpack_require__(5881);const defaultOptions={chunker:'fixed',rawLeaves:false,hashOnly:false,cidVersion:0,hash:null,leafType:'file',hashAlg:'sha2-256'};module.exports=function(ipld,_options){const options=Object.assign({},defaultOptions,_options);options.cidVersion=options.cidVersion||0;if(options.cidVersion>0&&_options.rawLeaves===undefined){options.rawLeaves=true;}if(_options&&_options.hash!==undefined&&_options.rawLeaves===undefined){options.rawLeaves=true;}const Chunker=chunkers[options.chunker];assert(Chunker,'Unknkown chunker named '+options.chunker);let pending=0;const waitingPending=[];const entry={sink:writable((nodes,callback)=>{pending+=nodes.length;nodes.forEach(node=>entry.source.push(node));setImmediate(callback);},null,1,err=>entry.source.end(err)),source:pushable()};const dagStream=DAGBuilder(Chunker,ipld,options);const treeBuilder=createTreeBuilder(ipld,options);const treeBuilderStream=treeBuilder.stream();const pausable=pause(()=>{});pull(entry,pausable,dagStream,map(node=>{pending--;if(!pending){process.nextTick(()=>{while(waitingPending.length){waitingPending.shift()();}});}return node;}),treeBuilderStream);return{sink:entry.sink,source:treeBuilderStream.source,flush:flush};function flush(callback){pausable.pause();if(!pending){proceed();}else{waitingPending.push(proceed);}function proceed(){treeBuilder.flush((err,hash)=>{if(err){treeBuilderStream.source.end(err);callback(err);return;}pausable.resume();callback(null,hash);});}}};},9546:function(module){module.exports=function(fn){var active=false,called=0;return function(){called=true;if(!active){active=true;while(called){called=false;fn();}active=false;}};};},9570:function(__unusedmodule,exports,__webpack_require__){"use strict";const BN=__webpack_require__(3771).bignum;exports.toBase64=function toBase64(bn,len){let s=bn.toArrayLike(Buffer,'be',len).toString('base64');return s.replace(/(=*)$/,'').replace(/\+/g,'-').replace(/\//g,'_');};exports.toBn=function toBn(str){return new BN(Buffer.from(str,'base64'));};},9583:function(module,__unusedexports,__webpack_require__){const Buffer=__webpack_require__(7572).Buffer;const bcrypto=__webpack_require__(5475);const bscript=__webpack_require__(5099);const bufferutils=__webpack_require__(2556);const opcodes=__webpack_require__(9710);const typeforce=__webpack_require__(2809);const types=__webpack_require__(8781);const varuint=__webpack_require__(5562);function varSliceSize(someScript){const length=someScript.length;return varuint.encodingLength(length)+length;}function vectorSize(someVector){const length=someVector.length;return varuint.encodingLength(length)+someVector.reduce(function(sum,witness){return sum+varSliceSize(witness);},0);}function Transaction(){this.version=1;this.locktime=0;this.ins=[];this.outs=[];}Transaction.DEFAULT_SEQUENCE=0xffffffff;Transaction.SIGHASH_ALL=0x01;Transaction.SIGHASH_NONE=0x02;Transaction.SIGHASH_SINGLE=0x03;Transaction.SIGHASH_ANYONECANPAY=0x80;Transaction.ADVANCED_TRANSACTION_MARKER=0x00;Transaction.ADVANCED_TRANSACTION_FLAG=0x01;const EMPTY_SCRIPT=Buffer.allocUnsafe(0);const EMPTY_WITNESS=[];const ZERO=Buffer.from('0000000000000000000000000000000000000000000000000000000000000000','hex');const ONE=Buffer.from('0000000000000000000000000000000000000000000000000000000000000001','hex');const VALUE_UINT64_MAX=Buffer.from('ffffffffffffffff','hex');const BLANK_OUTPUT={script:EMPTY_SCRIPT,valueBuffer:VALUE_UINT64_MAX};Transaction.fromBuffer=function(buffer,__noStrict){let offset=0;function readSlice(n){offset+=n;return buffer.slice(offset-n,offset);}function readUInt32(){const i=buffer.readUInt32LE(offset);offset+=4;return i;}function readInt32(){const i=buffer.readInt32LE(offset);offset+=4;return i;}function readUInt64(){const i=bufferutils.readUInt64LE(buffer,offset);offset+=8;return i;}function readVarInt(){const vi=varuint.decode(buffer,offset);offset+=varuint.decode.bytes;return vi;}function readVarSlice(){return readSlice(readVarInt());}function readVector(){const count=readVarInt();const vector=[];for(var i=0;i<count;i++)vector.push(readVarSlice());return vector;}const tx=new Transaction();tx.version=readInt32();const marker=buffer.readUInt8(offset);const flag=buffer.readUInt8(offset+1);let hasWitnesses=false;if(marker===Transaction.ADVANCED_TRANSACTION_MARKER&&flag===Transaction.ADVANCED_TRANSACTION_FLAG){offset+=2;hasWitnesses=true;}const vinLen=readVarInt();for(var i=0;i<vinLen;++i){tx.ins.push({hash:readSlice(32),index:readUInt32(),script:readVarSlice(),sequence:readUInt32(),witness:EMPTY_WITNESS});}const voutLen=readVarInt();for(i=0;i<voutLen;++i){tx.outs.push({value:readUInt64(),script:readVarSlice()});}if(hasWitnesses){for(i=0;i<vinLen;++i){tx.ins[i].witness=readVector();}if(!tx.hasWitnesses())throw new Error('Transaction has superfluous witness data');}tx.locktime=readUInt32();if(__noStrict)return tx;if(offset!==buffer.length)throw new Error('Transaction has unexpected data');return tx;};Transaction.fromHex=function(hex){return Transaction.fromBuffer(Buffer.from(hex,'hex'));};Transaction.isCoinbaseHash=function(buffer){typeforce(types.Hash256bit,buffer);for(var i=0;i<32;++i){if(buffer[i]!==0)return false;}return true;};Transaction.prototype.isCoinbase=function(){return this.ins.length===1&&Transaction.isCoinbaseHash(this.ins[0].hash);};Transaction.prototype.addInput=function(hash,index,sequence,scriptSig){typeforce(types.tuple(types.Hash256bit,types.UInt32,types.maybe(types.UInt32),types.maybe(types.Buffer)),arguments);if(types.Null(sequence)){sequence=Transaction.DEFAULT_SEQUENCE;}return this.ins.push({hash:hash,index:index,script:scriptSig||EMPTY_SCRIPT,sequence:sequence,witness:EMPTY_WITNESS})-1;};Transaction.prototype.addOutput=function(scriptPubKey,value){typeforce(types.tuple(types.Buffer,types.Satoshi),arguments);return this.outs.push({script:scriptPubKey,value:value})-1;};Transaction.prototype.hasWitnesses=function(){return this.ins.some(function(x){return x.witness.length!==0;});};Transaction.prototype.weight=function(){const base=this.__byteLength(false);const total=this.__byteLength(true);return base*3+total;};Transaction.prototype.virtualSize=function(){return Math.ceil(this.weight()/4);};Transaction.prototype.byteLength=function(){return this.__byteLength(true);};Transaction.prototype.__byteLength=function(__allowWitness){const hasWitnesses=__allowWitness&&this.hasWitnesses();return(hasWitnesses?10:8)+varuint.encodingLength(this.ins.length)+varuint.encodingLength(this.outs.length)+this.ins.reduce(function(sum,input){return sum+40+varSliceSize(input.script);},0)+this.outs.reduce(function(sum,output){return sum+8+varSliceSize(output.script);},0)+(hasWitnesses?this.ins.reduce(function(sum,input){return sum+vectorSize(input.witness);},0):0);};Transaction.prototype.clone=function(){const newTx=new Transaction();newTx.version=this.version;newTx.locktime=this.locktime;newTx.ins=this.ins.map(function(txIn){return{hash:txIn.hash,index:txIn.index,script:txIn.script,sequence:txIn.sequence,witness:txIn.witness};});newTx.outs=this.outs.map(function(txOut){return{script:txOut.script,value:txOut.value};});return newTx;};Transaction.prototype.hashForSignature=function(inIndex,prevOutScript,hashType){typeforce(types.tuple(types.UInt32,types.Buffer,types.Number),arguments);if(inIndex>=this.ins.length)return ONE;const ourScript=bscript.compile(bscript.decompile(prevOutScript).filter(function(x){return x!==opcodes.OP_CODESEPARATOR;}));const txTmp=this.clone();if((hashType&0x1f)===Transaction.SIGHASH_NONE){txTmp.outs=[];txTmp.ins.forEach(function(input,i){if(i===inIndex)return;input.sequence=0;});}else if((hashType&0x1f)===Transaction.SIGHASH_SINGLE){if(inIndex>=this.outs.length)return ONE;txTmp.outs.length=inIndex+1;for(var i=0;i<inIndex;i++){txTmp.outs[i]=BLANK_OUTPUT;}txTmp.ins.forEach(function(input,y){if(y===inIndex)return;input.sequence=0;});}if(hashType&Transaction.SIGHASH_ANYONECANPAY){txTmp.ins=[txTmp.ins[inIndex]];txTmp.ins[0].script=ourScript;}else{txTmp.ins.forEach(function(input){input.script=EMPTY_SCRIPT;});txTmp.ins[inIndex].script=ourScript;}const buffer=Buffer.allocUnsafe(txTmp.__byteLength(false)+4);buffer.writeInt32LE(hashType,buffer.length-4);txTmp.__toBuffer(buffer,0,false);return bcrypto.hash256(buffer);};Transaction.prototype.hashForWitnessV0=function(inIndex,prevOutScript,value,hashType){typeforce(types.tuple(types.UInt32,types.Buffer,types.Satoshi,types.UInt32),arguments);let tbuffer,toffset;function writeSlice(slice){toffset+=slice.copy(tbuffer,toffset);}function writeUInt32(i){toffset=tbuffer.writeUInt32LE(i,toffset);}function writeUInt64(i){toffset=bufferutils.writeUInt64LE(tbuffer,i,toffset);}function writeVarInt(i){varuint.encode(i,tbuffer,toffset);toffset+=varuint.encode.bytes;}function writeVarSlice(slice){writeVarInt(slice.length);writeSlice(slice);}let hashOutputs=ZERO;let hashPrevouts=ZERO;let hashSequence=ZERO;if(!(hashType&Transaction.SIGHASH_ANYONECANPAY)){tbuffer=Buffer.allocUnsafe(36*this.ins.length);toffset=0;this.ins.forEach(function(txIn){writeSlice(txIn.hash);writeUInt32(txIn.index);});hashPrevouts=bcrypto.hash256(tbuffer);}if(!(hashType&Transaction.SIGHASH_ANYONECANPAY)&&(hashType&0x1f)!==Transaction.SIGHASH_SINGLE&&(hashType&0x1f)!==Transaction.SIGHASH_NONE){tbuffer=Buffer.allocUnsafe(4*this.ins.length);toffset=0;this.ins.forEach(function(txIn){writeUInt32(txIn.sequence);});hashSequence=bcrypto.hash256(tbuffer);}if((hashType&0x1f)!==Transaction.SIGHASH_SINGLE&&(hashType&0x1f)!==Transaction.SIGHASH_NONE){const txOutsSize=this.outs.reduce(function(sum,output){return sum+8+varSliceSize(output.script);},0);tbuffer=Buffer.allocUnsafe(txOutsSize);toffset=0;this.outs.forEach(function(out){writeUInt64(out.value);writeVarSlice(out.script);});hashOutputs=bcrypto.hash256(tbuffer);}else if((hashType&0x1f)===Transaction.SIGHASH_SINGLE&&inIndex<this.outs.length){const output=this.outs[inIndex];tbuffer=Buffer.allocUnsafe(8+varSliceSize(output.script));toffset=0;writeUInt64(output.value);writeVarSlice(output.script);hashOutputs=bcrypto.hash256(tbuffer);}tbuffer=Buffer.allocUnsafe(156+varSliceSize(prevOutScript));toffset=0;const input=this.ins[inIndex];writeUInt32(this.version);writeSlice(hashPrevouts);writeSlice(hashSequence);writeSlice(input.hash);writeUInt32(input.index);writeVarSlice(prevOutScript);writeUInt64(value);writeUInt32(input.sequence);writeSlice(hashOutputs);writeUInt32(this.locktime);writeUInt32(hashType);return bcrypto.hash256(tbuffer);};Transaction.prototype.getHash=function(){return bcrypto.hash256(this.__toBuffer(undefined,undefined,false));};Transaction.prototype.getId=function(){return this.getHash().reverse().toString('hex');};Transaction.prototype.toBuffer=function(buffer,initialOffset){return this.__toBuffer(buffer,initialOffset,true);};Transaction.prototype.__toBuffer=function(buffer,initialOffset,__allowWitness){if(!buffer)buffer=Buffer.allocUnsafe(this.__byteLength(__allowWitness));let offset=initialOffset||0;function writeSlice(slice){offset+=slice.copy(buffer,offset);}function writeUInt8(i){offset=buffer.writeUInt8(i,offset);}function writeUInt32(i){offset=buffer.writeUInt32LE(i,offset);}function writeInt32(i){offset=buffer.writeInt32LE(i,offset);}function writeUInt64(i){offset=bufferutils.writeUInt64LE(buffer,i,offset);}function writeVarInt(i){varuint.encode(i,buffer,offset);offset+=varuint.encode.bytes;}function writeVarSlice(slice){writeVarInt(slice.length);writeSlice(slice);}function writeVector(vector){writeVarInt(vector.length);vector.forEach(writeVarSlice);}writeInt32(this.version);const hasWitnesses=__allowWitness&&this.hasWitnesses();if(hasWitnesses){writeUInt8(Transaction.ADVANCED_TRANSACTION_MARKER);writeUInt8(Transaction.ADVANCED_TRANSACTION_FLAG);}writeVarInt(this.ins.length);this.ins.forEach(function(txIn){writeSlice(txIn.hash);writeUInt32(txIn.index);writeVarSlice(txIn.script);writeUInt32(txIn.sequence);});writeVarInt(this.outs.length);this.outs.forEach(function(txOut){if(!txOut.valueBuffer){writeUInt64(txOut.value);}else{writeSlice(txOut.valueBuffer);}writeVarSlice(txOut.script);});if(hasWitnesses){this.ins.forEach(function(input){writeVector(input.witness);});}writeUInt32(this.locktime);if(initialOffset!==undefined)return buffer.slice(initialOffset,offset);return buffer;};Transaction.prototype.toHex=function(){return this.toBuffer().toString('hex');};Transaction.prototype.setInputScript=function(index,scriptSig){typeforce(types.tuple(types.Number,types.Buffer),arguments);this.ins[index].script=scriptSig;};Transaction.prototype.setWitness=function(index,witness){typeforce(types.tuple(types.Number,[types.Buffer]),arguments);this.ins[index].witness=witness;};module.exports=Transaction;},9587:function(module){"use strict";function fail(){throw new Error('Key management requires \'--pass ...\' option');}class NoKeychain{static get options(){fail();}static generateOptions(){fail();}createKey(){fail();}listKeys(){fail();}findKeyById(){fail();}findKeyByName(){fail();}renameKey(){fail();}removeKey(){fail();}exportKey(){fail();}importKey(){fail();}importPeer(){fail();}get cms(){fail();}}module.exports=NoKeychain;},9592:function(module,__unusedexports,__webpack_require__){"use strict";const protons=__webpack_require__(817);const assert=__webpack_require__(3930);const pb=protons(__webpack_require__(4485)).Record;const utils=__webpack_require__(1178);class Record{constructor(key,value,recvtime){if(key){assert(Buffer.isBuffer(key),'key must be a Buffer');}if(value){assert(Buffer.isBuffer(value),'value must be a buffer');}this.key=key;this.value=value;this.timeReceived=recvtime;}serialize(){return pb.encode(this.prepareSerialize());}prepareSerialize(){return{key:this.key,value:this.value,timeReceived:this.timeReceived&&utils.toRFC3339(this.timeReceived)};}static deserialize(raw){const dec=pb.decode(raw);return Record.fromDeserialized(dec);}static fromDeserialized(obj){let recvtime;if(obj.timeReceived){recvtime=utils.parseRFC3339(obj.timeReceived);}const rec=new Record(obj.key,obj.value,recvtime);return rec;}}module.exports=Record;},9598:function(module,__unusedexports,__webpack_require__){var coreJsData=__webpack_require__(6667);var maskSrcKey=function(){var uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||'');return uid?'Symbol(src)_1.'+uid:'';}();function isMasked(func){return!!maskSrcKey&&maskSrcKey in func;}module.exports=isMasked;},9609:function(module,exports,__webpack_require__){"use strict";const varint=__webpack_require__(2572);const codecNameToCodeVarint=__webpack_require__(8356);const codeToCodecName=__webpack_require__(8010);const util=__webpack_require__(7120);exports=module.exports;exports.addPrefix=(multicodecStrOrCode,data)=>{let prefix;if(Buffer.isBuffer(multicodecStrOrCode)){prefix=util.varintBufferEncode(multicodecStrOrCode);}else{if(codecNameToCodeVarint[multicodecStrOrCode]){prefix=codecNameToCodeVarint[multicodecStrOrCode];}else{throw new Error('multicodec not recognized');}}return Buffer.concat([prefix,data]);};exports.rmPrefix=data=>{varint.decode(data);return data.slice(varint.decode.bytes);};exports.getCodec=prefixedData=>{const code=util.varintBufferDecode(prefixedData);const codecName=codeToCodecName[code.toString('hex')];if(codecName===undefined){throw new Error('Code `0x'+code.toString('hex')+'` not found');}return codecName;};exports.getCodeVarint=codecName=>{const code=codecNameToCodeVarint[codecName];if(code===undefined){throw new Error('Codec `'+codecName+'` not found');}return code;};exports.addCodec=(name,code)=>{codecNameToCodeVarint[name]=util.varintBufferEncode(code);codeToCodecName[code.toString('hex')]=name;};},9621:function(module,__unusedexports,__webpack_require__){"use strict";const debounce=__webpack_require__(7659);const Message=__webpack_require__(9683);const logger=__webpack_require__(8047).logger;module.exports=class MsgQueue{constructor(selfPeerId,otherPeerId,network){this.peerId=otherPeerId;this.network=network;this.refcnt=1;this._entries=[];this._log=logger(selfPeerId,'msgqueue',otherPeerId.toB58String().slice(0,8));this.sendEntries=debounce(this._sendEntries.bind(this),200);}addMessage(msg){if(msg.empty){return;}this.send(msg);}addEntries(entries){this._entries=this._entries.concat(entries);this.sendEntries();}_sendEntries(){if(!this._entries.length){return;}const msg=new Message(false);this._entries.forEach(entry=>{if(entry.cancel){msg.cancel(entry.cid);}else{msg.addEntry(entry.cid,entry.priority);}});this._entries=[];this.addMessage(msg);}send(msg){this.network.connectTo(this.peerId,err=>{if(err){this._log.error('cant connect to peer %s: %s',this.peerId.toB58String(),err.message);return;}this._log('sending message');this.network.sendMessage(this.peerId,msg,err=>{if(err){this._log.error('send error: %s',err.message);}});});}};},9634:function(module,__unusedexports,__webpack_require__){"use strict";const pull=__webpack_require__(2885);const pushable=__webpack_require__(5995);const Duplex=__webpack_require__(2817).Duplex;class AddHelper extends Duplex{constructor(pullStream,push,options){super(Object.assign({objectMode:true},options));this._pullStream=pullStream;this._pushable=push;this._waitingPullFlush=[];}_read(){this._pullStream(null,(end,data)=>{while(this._waitingPullFlush.length){const cb=this._waitingPullFlush.shift();cb();}if(end){if(end instanceof Error){this.emit('error',end);}}else{this.push(data);}});}_write(chunk,encoding,callback){this._waitingPullFlush.push(callback);this._pushable.push(chunk);}}module.exports=function(self){return options=>{options=options||{};const p=pushable();const s=pull(p,self.addPullStream(options));const retStream=new AddHelper(s,p);retStream.once('finish',()=>p.end());return retStream;};};},9657:function(module,__unusedexports,__webpack_require__){"use strict";var buffer=__webpack_require__(9423);var assert=__webpack_require__(3930);var js=__webpack_require__(8416);var $=__webpack_require__(5107);function equals(a,b){if(a.length!==b.length){return false;}var length=a.length;for(var i=0;i<length;i++){if(a[i]!==b[i]){return false;}}return true;}module.exports={fill:function fill(buffer,value){$.checkArgumentType(buffer,'Buffer','buffer');$.checkArgumentType(value,'number','value');var length=buffer.length;for(var i=0;i<length;i++){buffer[i]=value;}return buffer;},copy:function(original){var buffer=new Buffer(original.length);original.copy(buffer);return buffer;},isBuffer:function isBuffer(arg){return buffer.Buffer.isBuffer(arg)||arg instanceof Uint8Array;},emptyBuffer:function emptyBuffer(bytes){$.checkArgumentType(bytes,'number','bytes');var result=new buffer.Buffer(bytes);for(var i=0;i<bytes;i++){result.write('\0',i);}return result;},concat:buffer.Buffer.concat,equals:equals,equal:equals,integerAsSingleByteBuffer:function integerAsSingleByteBuffer(integer){$.checkArgumentType(integer,'number','integer');return new buffer.Buffer([integer&0xff]);},integerAsBuffer:function integerAsBuffer(integer){$.checkArgumentType(integer,'number','integer');var bytes=[];bytes.push(integer>>24&0xff);bytes.push(integer>>16&0xff);bytes.push(integer>>8&0xff);bytes.push(integer&0xff);return new Buffer(bytes);},integerFromBuffer:function integerFromBuffer(buffer){$.checkArgumentType(buffer,'Buffer','buffer');return buffer[0]<<24|buffer[1]<<16|buffer[2]<<8|buffer[3];},integerFromSingleByteBuffer:function integerFromBuffer(buffer){$.checkArgumentType(buffer,'Buffer','buffer');return buffer[0];},bufferToHex:function bufferToHex(buffer){$.checkArgumentType(buffer,'Buffer','buffer');return buffer.toString('hex');},reverse:function reverse(param){var ret=new buffer.Buffer(param.length);for(var i=0;i<param.length;i++){ret[i]=param[param.length-i-1];}return ret;},hexToBuffer:function hexToBuffer(string){assert(js.isHexa(string));return new buffer.Buffer(string,'hex');}};module.exports.NULL_HASH=module.exports.fill(new Buffer(32),0);module.exports.EMPTY_BUFFER=new Buffer(0);},9666:function(module,__unusedexports,__webpack_require__){module.exports={input:__webpack_require__(8348),output:__webpack_require__(6297)};},9678:function(module,__unusedexports,__webpack_require__){"use strict";const OFFLINE_ERROR=__webpack_require__(5527).OFFLINE_ERROR;const promisify=__webpack_require__(6955);const setImmediate=__webpack_require__(7368);const Big=__webpack_require__(4417);const CID=__webpack_require__(9339);const PeerId=__webpack_require__(1832);const errCode=__webpack_require__(4999);function formatWantlist(list,cidBase){return Array.from(list).map(e=>({'/':e[1].cid.toBaseEncodedString()}));}module.exports=function bitswap(self){return{wantlist:promisify((peerId,callback)=>{if(typeof peerId==='function'){callback=peerId;peerId=null;}if(!self.isOnline()){return setImmediate(()=>callback(new Error(OFFLINE_ERROR)));}let list;if(peerId){try{peerId=PeerId.createFromB58String(peerId);}catch(e){peerId=null;}if(!peerId){return setImmediate(()=>callback(new Error('Invalid peerId')));}list=self._bitswap.wantlistForPeer(peerId);}else{list=self._bitswap.getWantlist();}setImmediate(()=>callback(null,{Keys:formatWantlist(list)}));}),stat:promisify(callback=>{if(!self.isOnline()){return setImmediate(()=>callback(new Error(OFFLINE_ERROR)));}const snapshot=self._bitswap.stat().snapshot;setImmediate(()=>{callback(null,{provideBufLen:parseInt(snapshot.providesBufferLength.toString()),blocksReceived:new Big(snapshot.blocksReceived),wantlist:formatWantlist(self._bitswap.getWantlist()),peers:self._bitswap.peers().map(id=>id.toB58String()),dupBlksReceived:new Big(snapshot.dupBlksReceived),dupDataReceived:new Big(snapshot.dupDataReceived),dataReceived:new Big(snapshot.dataReceived),blocksSent:new Big(snapshot.blocksSent),dataSent:new Big(snapshot.dataSent)});});}),unwant:promisify((keys,callback)=>{if(!self.isOnline()){return setImmediate(()=>callback(new Error(OFFLINE_ERROR)));}if(!Array.isArray(keys)){keys=[keys];}try{keys=keys.map(key=>{if(CID.isCID(key)){return key;}return new CID(key);});}catch(err){return setImmediate(()=>callback(errCode(err,'ERR_INVALID_CID')));}setImmediate(()=>callback(null,self._bitswap.unwant(keys)));})};};},9679:function(__unusedmodule,exports,__webpack_require__){"use strict";const encoders=exports;encoders.der=__webpack_require__(1713);encoders.pem=__webpack_require__(2511);},9683:function(module,__unusedexports,__webpack_require__){"use strict";const protons=__webpack_require__(817);const Block=__webpack_require__(6505);const isEqualWith=__webpack_require__(7467);const assert=__webpack_require__(3930);const each=__webpack_require__(4486);const nextTick=__webpack_require__(7173);const CID=__webpack_require__(9339);const codecName=__webpack_require__(8010);const vd=__webpack_require__(2497);const multihashing=__webpack_require__(9424);const pbm=protons(__webpack_require__(561));const Entry=__webpack_require__(2991);class BitswapMessage{constructor(full){this.full=full;this.wantlist=new Map();this.blocks=new Map();}get empty(){return this.blocks.size===0&&this.wantlist.size===0;}addEntry(cid,priority,cancel){assert(cid&&CID.isCID(cid),'must be a valid cid');const cidStr=cid.buffer.toString();const entry=this.wantlist.get(cidStr);if(entry){entry.priority=priority;entry.cancel=Boolean(cancel);}else{this.wantlist.set(cidStr,new Entry(cid,priority,cancel));}}addBlock(block){assert(Block.isBlock(block),'must be a valid cid');const cidStr=block.cid.buffer.toString();this.blocks.set(cidStr,block);}cancel(cid){assert(CID.isCID(cid),'must be a valid cid');const cidStr=cid.buffer.toString();this.wantlist.delete(cidStr);this.addEntry(cid,0,true);}serializeToBitswap100(){const msg={wantlist:{entries:Array.from(this.wantlist.values()).map(entry=>{return{block:entry.cid.buffer,priority:Number(entry.priority),cancel:Boolean(entry.cancel)};})},blocks:Array.from(this.blocks.values()).map(block=>block.data)};if(this.full){msg.wantlist.full=true;}return pbm.Message.encode(msg);}serializeToBitswap110(){const msg={wantlist:{entries:Array.from(this.wantlist.values()).map(entry=>{return{block:entry.cid.buffer,priority:Number(entry.priority),cancel:Boolean(entry.cancel)};})},payload:[]};if(this.full){msg.wantlist.full=true;}this.blocks.forEach(block=>{msg.payload.push({prefix:block.cid.prefix,data:block.data});});return pbm.Message.encode(msg);}equals(other){const cmp=(a,b)=>{if(a.equals&&typeof a.equals==='function'){return a.equals(b);}};if(this.full!==other.full||!isEqualWith(this.wantlist,other.wantlist,cmp)||!isEqualWith(this.blocks,other.blocks,cmp)){return false;}return true;}get[Symbol.toStringTag](){const list=Array.from(this.wantlist.keys());const blocks=Array.from(this.blocks.keys());return`BitswapMessage <full: ${this.full}, list: ${list}, blocks: ${blocks}>`;}}BitswapMessage.deserialize=(raw,callback)=>{let decoded;try{decoded=pbm.Message.decode(raw);}catch(err){return nextTick(()=>callback(err));}const isFull=decoded.wantlist&&decoded.wantlist.full||false;const msg=new BitswapMessage(isFull);if(decoded.wantlist){decoded.wantlist.entries.forEach(entry=>{let cid;try{cid=new CID(entry.block);}catch(err){return callback(err);}msg.addEntry(cid,entry.priority,entry.cancel);});}if(decoded.blocks.length>0){return each(decoded.blocks,(b,cb)=>{multihashing(b,'sha2-256',(err,hash)=>{if(err){return cb(err);}let cid;try{cid=new CID(hash);}catch(err){return callback(err);}msg.addBlock(new Block(b,cid));cb();});},err=>{if(err){return callback(err);}callback(null,msg);});}if(decoded.payload.length>0){return each(decoded.payload,(p,cb)=>{if(!p.prefix||!p.data){return nextTick(cb);}const values=vd(p.prefix);const cidVersion=values[0];const multicodec=values[1];const hashAlg=values[2];multihashing(p.data,hashAlg,(err,hash)=>{if(err){return cb(err);}let cid;try{cid=new CID(cidVersion,codecName[multicodec.toString('16')],hash);}catch(err){return cb(err);}msg.addBlock(new Block(p.data,cid));cb();});},err=>{if(err){return callback(err);}callback(null,msg);});}callback(null,msg);};BitswapMessage.Entry=Entry;module.exports=BitswapMessage;},9688:function(module,__unusedexports,__webpack_require__){"use strict";const get=__webpack_require__(2814);const defaultsDeep=__webpack_require__(2500);const ipnsUtils=__webpack_require__(3524);module.exports=function libp2p(self,config){const options=self._options||{};config=config||{};const createBundle=typeof options.libp2p==='function'?options.libp2p:defaultBundle;const{datastore}=self._repo;const peerInfo=self._peerInfo;const peerBook=self._peerInfoBook;const libp2p=createBundle({options,config,datastore,peerInfo,peerBook});let discoveredPeers=[];const putAndDial=peerInfo=>{peerBook.put(peerInfo);libp2p.dial(peerInfo,()=>{});};libp2p.on('start',()=>{peerInfo.multiaddrs.forEach(ma=>{self._print('Swarm listening on',ma.toString());});discoveredPeers.forEach(putAndDial);discoveredPeers=[];});libp2p.on('peer:discovery',peerInfo=>{if(self.isOnline()){putAndDial(peerInfo);}else{discoveredPeers.push(peerInfo);}});libp2p.on('peer:connect',peerInfo=>peerBook.put(peerInfo));return libp2p;};function defaultBundle({datastore,peerInfo,peerBook,options,config}){const libp2pDefaults={datastore,peerInfo,peerBook,config:{peerDiscovery:{mdns:{enabled:get(options,'config.Discovery.MDNS.Enabled',get(config,'Discovery.MDNS.Enabled',true))},webRTCStar:{enabled:get(options,'config.Discovery.webRTCStar.Enabled',get(config,'Discovery.webRTCStar.Enabled',true))},bootstrap:{list:get(options,'config.Bootstrap',get(config,'Bootstrap',[]))}},relay:{enabled:get(options,'relay.enabled',get(config,'relay.enabled',false)),hop:{enabled:get(options,'relay.hop.enabled',get(config,'relay.hop.enabled',false)),active:get(options,'relay.hop.active',get(config,'relay.hop.active',false))}},dht:{validators:{ipns:ipnsUtils.validator},selectors:{ipns:ipnsUtils.selector}},EXPERIMENTAL:{dht:get(options,'EXPERIMENTAL.dht',false),pubsub:get(options,'EXPERIMENTAL.pubsub',false)}},connectionManager:get(options,'connectionManager',get(config,'connectionManager',{}))};const libp2pOptions=defaultsDeep(get(options,'libp2p',{}),libp2pDefaults);const Node=__webpack_require__(8230);return new Node(libp2pOptions);}},9700:function(__unusedmodule,exports,__webpack_require__){"use strict";const CID=__webpack_require__(9339);exports.cidToString=(cid,options)=>{options=options||{};options.base=options.base||null;options.upgrade=options.upgrade!==false;if(!CID.isCID(cid)){cid=new CID(cid);}if(cid.version===0&&options.base&&options.base!=='base58btc'){if(!options.upgrade)return cid.toString();cid=cid.toV1();}return cid.toBaseEncodedString(options.base);};},9701:function(module,__unusedexports,__webpack_require__){"use strict";const waterfall=__webpack_require__(4265);const reduceRight=__webpack_require__(8389);const addLink=__webpack_require__(6423);const defaultOptions={shardSplitThreshold:1000};const updateTree=(context,trail,options,callback)=>{options=Object.assign({},defaultOptions,options);waterfall([cb=>context.ipld.getMany(trail.map(node=>node.cid),cb),(nodes,cb)=>{let index=trail.length-1;reduceRight(trail,null,(child,node,done)=>{const dagNode=nodes[index];const cid=trail[index].cid;index--;if(!child){return done(null,node);}addLink(context,{parent:dagNode,parentCid:cid,name:child.name,cid:child.cid,size:child.size,flush:options.flush,shardSplitThreshold:options.shardSplitThreshold},(err,result)=>{if(err){return done(err);}done(err,{cid:result.cid,node:result.node,name:node.name,size:result.node.size});});},cb);}],callback);};module.exports=updateTree;},9710:function(module){module.exports={"OP_FALSE":0,"OP_0":0,"OP_PUSHDATA1":76,"OP_PUSHDATA2":77,"OP_PUSHDATA4":78,"OP_1NEGATE":79,"OP_RESERVED":80,"OP_TRUE":81,"OP_1":81,"OP_2":82,"OP_3":83,"OP_4":84,"OP_5":85,"OP_6":86,"OP_7":87,"OP_8":88,"OP_9":89,"OP_10":90,"OP_11":91,"OP_12":92,"OP_13":93,"OP_14":94,"OP_15":95,"OP_16":96,"OP_NOP":97,"OP_VER":98,"OP_IF":99,"OP_NOTIF":100,"OP_VERIF":101,"OP_VERNOTIF":102,"OP_ELSE":103,"OP_ENDIF":104,"OP_VERIFY":105,"OP_RETURN":106,"OP_TOALTSTACK":107,"OP_FROMALTSTACK":108,"OP_2DROP":109,"OP_2DUP":110,"OP_3DUP":111,"OP_2OVER":112,"OP_2ROT":113,"OP_2SWAP":114,"OP_IFDUP":115,"OP_DEPTH":116,"OP_DROP":117,"OP_DUP":118,"OP_NIP":119,"OP_OVER":120,"OP_PICK":121,"OP_ROLL":122,"OP_ROT":123,"OP_SWAP":124,"OP_TUCK":125,"OP_CAT":126,"OP_SUBSTR":127,"OP_LEFT":128,"OP_RIGHT":129,"OP_SIZE":130,"OP_INVERT":131,"OP_AND":132,"OP_OR":133,"OP_XOR":134,"OP_EQUAL":135,"OP_EQUALVERIFY":136,"OP_RESERVED1":137,"OP_RESERVED2":138,"OP_1ADD":139,"OP_1SUB":140,"OP_2MUL":141,"OP_2DIV":142,"OP_NEGATE":143,"OP_ABS":144,"OP_NOT":145,"OP_0NOTEQUAL":146,"OP_ADD":147,"OP_SUB":148,"OP_MUL":149,"OP_DIV":150,"OP_MOD":151,"OP_LSHIFT":152,"OP_RSHIFT":153,"OP_BOOLAND":154,"OP_BOOLOR":155,"OP_NUMEQUAL":156,"OP_NUMEQUALVERIFY":157,"OP_NUMNOTEQUAL":158,"OP_LESSTHAN":159,"OP_GREATERTHAN":160,"OP_LESSTHANOREQUAL":161,"OP_GREATERTHANOREQUAL":162,"OP_MIN":163,"OP_MAX":164,"OP_WITHIN":165,"OP_RIPEMD160":166,"OP_SHA1":167,"OP_SHA256":168,"OP_HASH160":169,"OP_HASH256":170,"OP_CODESEPARATOR":171,"OP_CHECKSIG":172,"OP_CHECKSIGVERIFY":173,"OP_CHECKMULTISIG":174,"OP_CHECKMULTISIGVERIFY":175,"OP_NOP1":176,"OP_NOP2":177,"OP_CHECKLOCKTIMEVERIFY":177,"OP_NOP3":178,"OP_CHECKSEQUENCEVERIFY":178,"OP_NOP4":179,"OP_NOP5":180,"OP_NOP6":181,"OP_NOP7":182,"OP_NOP8":183,"OP_NOP9":184,"OP_NOP10":185,"OP_PUBKEYHASH":253,"OP_PUBKEY":254,"OP_INVALIDOPCODE":255};},9715:function(module,__unusedexports,__webpack_require__){module.exports=__webpack_require__(6886);},9717:function(module,__unusedexports,__webpack_require__){"use strict";const times=__webpack_require__(7404);const crypto=__webpack_require__(318);const waterfall=__webpack_require__(4265);const timeout=__webpack_require__(171);const multihashing=__webpack_require__(9424);const PeerId=__webpack_require__(1832);const assert=__webpack_require__(3930);const c=__webpack_require__(2445);const errcode=__webpack_require__(4999);class RandomWalk{constructor(kadDHT){assert(kadDHT,'Random Walk needs an instance of the Kademlia DHT');this._runningHandle=null;this._kadDHT=kadDHT;}start(queries=c.defaultRandomWalk.queriesPerPeriod,period=c.defaultRandomWalk.interval,timeout=c.defaultRandomWalk.timeout){if(this._running){return;}const runningHandle={_onCancel:null,_timeoutId:null,runPeriodically:(fn,period)=>{runningHandle._timeoutId=setTimeout(()=>{runningHandle._timeoutId=null;fn(nextPeriod=>{if(runningHandle._onCancel){return runningHandle._onCancel();}runningHandle.runPeriodically(fn,nextPeriod);});},period);},cancel:cb=>{if(runningHandle._timeoutId){clearTimeout(runningHandle._timeoutId);return cb();}runningHandle._onCancel=cb;}};runningHandle.runPeriodically(done=>{this._walk(queries,timeout,()=>done(period));},period);this._runningHandle=runningHandle;}stop(callback){const runningHandle=this._runningHandle;if(!runningHandle){return callback();}this._runningHandle=null;runningHandle.cancel(callback);}_walk(queries,walkTimeout,callback){this._kadDHT._log('random-walk:start');times(queries,(i,cb)=>{waterfall([cb=>this._randomPeerId(cb),(id,cb)=>timeout(cb=>{this._query(id,cb);},walkTimeout)(cb)],err=>{if(err){this._kadDHT._log.error('random-walk:error',err);return callback(err);}this._kadDHT._log('random-walk:done');callback(null);});});}_query(id,callback){this._kadDHT._log('random-walk:query:%s',id.toB58String());this._kadDHT.findPeer(id,(err,peer)=>{if(err.code==='ERR_NOT_FOUND'){return callback();}if(err){return callback(err);}this._kadDHT._log('random-walk:query:found',err,peer);callback(errcode(new Error(`random-walk: ACTUALLY FOUND PEER: ${peer}, ${id.toB58String()}`),'ERR_FOUND_RANDOM_PEER'));});}_randomPeerId(callback){multihashing(crypto.randomBytes(16),'sha2-256',(err,digest)=>{if(err){return callback(err);}callback(null,new PeerId(digest));});}}module.exports=RandomWalk;},9720:function(module,__unusedexports,__webpack_require__){"use strict";function id(e){return e;}var prop=__webpack_require__(8145);module.exports=function asyncMap(map){if(!map)return id;map=prop(map);var busy=false,abortCb,aborted;return function(read){return function next(abort,cb){if(aborted)return cb(aborted);if(abort){aborted=abort;if(!busy)read(abort,function(err){cb(abort);});else read(abort,function(err){if(busy)abortCb=cb;else cb(abort);});}else read(null,function(end,data){if(end)cb(end);else if(aborted)cb(aborted);else{busy=true;map(data,function(err,data){busy=false;if(aborted){cb(aborted);abortCb&&abortCb(aborted);}else if(err)next(err,cb);else cb(null,data);});}});};};};},9723:function(module){module.exports=[["0","\u0000",127],["a140",""],["a1a1","",4,""],["a240","",7,""],["a2a1","",9,"",9,"",8,"",25,"",21],["a340","",16,"",6,"",16,"",6,"",10],["a3a1","",25,""],["a3e1",""],["a440",""],["a4a1",""],["a540",""],["a5a1",""],["a640",""],["a6a1",""],["a740",""],["a7a1",""],["a840",""],["a8a1",""],["a940",""],["a9a1",""],["aa40",""],["aaa1",""],["ab40",""],["aba1",""],["ac40",""],["aca1",""],["ad40",""],["ada1",""],["ae40",""],["aea1",""],["af40",""],["afa1",""],["b040",""],["b0a1",""],["b140",""],["b1a1",""],["b240",""],["b2a1",""],["b340",""],["b3a1",""],["b440",""],["b4a1",""],["b540",""],["b5a1",""],["b640",""],["b6a1",""],["b740",""],["b7a1",""],["b840",""],["b8a1",""],["b940",""],["b9a1",""],["ba40",""],["baa1",""],["bb40",""],["bba1",""],["bc40",""],["bca1",""],["bd40",""],["bda1",""],["be40",""],["bea1",""],["bf40",""],["bfa1",""],["c040",""],["c0a1",""],["c140",""],["c1a1",""],["c240",""],["c2a1",""],["c340",""],["c3a1",""],["c440",""],["c4a1",""],["c540",""],["c5a1",""],["c640",""],["c940",""],["c9a1",""],["ca40",""],["caa1",""],["cb40",""],["cba1",""],["cc40",""],["cca1",""],["cd40",""],["cda1",""],["ce40",""],["cea1",""],["cf40",""],["cfa1",""],["d040",""],["d0a1",""],["d140",""],["d1a1",""],["d240",""],["d2a1",""],["d340",""],["d3a1",""],["d440",""],["d4a1",""],["d540",""],["d5a1",""],["d640",""],["d6a1",""],["d740",""],["d7a1",""],["d840",""],["d8a1",""],["d940",""],["d9a1",""],["da40",""],["daa1",""],["db40",""],["dba1",""],["dc40",""],["dca1",""],["dd40",""],["dda1",""],["de40",""],["dea1",""],["df40",""],["dfa1",""],["e040",""],["e0a1",""],["e140",""],["e1a1",""],["e240",""],["e2a1",""],["e340",""],["e3a1",""],["e440",""],["e4a1",""],["e540",""],["e5a1",""],["e640",""],["e6a1",""],["e740",""],["e7a1",""],["e840",""],["e8a1",""],["e940",""],["e9a1",""],["ea40",""],["eaa1",""],["eb40",""],["eba1",""],["ec40",""],["eca1",""],["ed40",""],["eda1",""],["ee40",""],["eea1",""],["ef40",""],["efa1",""],["f040",""],["f0a1",""],["f140",""],["f1a1",""],["f240",""],["f2a1",""],["f340",""],["f3a1",""],["f440",""],["f4a1",""],["f540",""],["f5a1",""],["f640",""],["f6a1",""],["f740",""],["f7a1",""],["f840",""],["f8a1",""],["f940",""],["f9a1",""]];},9733:function(module){module.exports={"name":"kovan","chainId":42,"networkId":42,"comment":"Parity PoA test network","url":"https://kovan-testnet.github.io/website/","genesis":{"hash":"0xa3c565fc15c7478862d50ccd6561e3c06b24cc509bf388941c25ea985ce32cb9","timestamp":null,"gasLimit":6000000,"difficulty":131072,"nonce":"0x0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","extraData":"0x","stateRoot":"0x2480155b48a1cea17d67dbfdfaafe821c1d19cdd478c5358e8ec56dec24502b2"},"hardforks":[],"bootstrapNodes":[{"ip":"40.71.221.215","port":30303,"id":"56abaf065581a5985b8c5f4f88bd202526482761ba10be9bfdcd14846dd01f652ec33fde0f8c0fd1db19b59a4c04465681fcef50e11380ca88d25996191c52de","location":"","comment":"Parity Bootnode"},{"ip":"52.166.117.77","port":30303,"id":"d07827483dc47b368eaf88454fb04b41b7452cf454e194e2bd4c14f98a3278fed5d819dbecd0d010407fc7688d941ee1e58d4f9c6354d3da3be92f55c17d7ce3","location":"","comment":"Parity Bootnode"},{"ip":"52.165.239.18","port":30303,"id":"8fa162563a8e5a05eef3e1cd5abc5828c71344f7277bb788a395cce4a0e30baf2b34b92fe0b2dbbba2313ee40236bae2aab3c9811941b9f5a7e8e90aaa27ecba","location":"","comment":"Parity Bootnode"},{"ip":"52.243.47.56","port":30303,"id":"7e2e7f00784f516939f94e22bdc6cf96153603ca2b5df1c7cc0f90a38e7a2f218ffb1c05b156835e8b49086d11fdd1b3e2965be16baa55204167aa9bf536a4d9","location":"","comment":"Parity Bootnode"},{"ip":"40.68.248.100","port":30303,"id":"0518a3d35d4a7b3e8c433e7ffd2355d84a1304ceb5ef349787b556197f0c87fad09daed760635b97d52179d645d3e6d16a37d2cc0a9945c2ddf585684beb39ac","location":"","comment":"Parity Bootnode"}]};},9752:function(module,__unusedexports,__webpack_require__){"use strict";const{randomBytes}=__webpack_require__(2984);module.exports=randomBytes;},9759:function(__unusedmodule,exports,__webpack_require__){"use strict";exports.Listener=exports.listener=__webpack_require__(6851);exports.Dialer=exports.dialer=__webpack_require__(7152);exports.matchSemver=__webpack_require__(891);exports.matchExact=__webpack_require__(4112);},9771:function(module,__unusedexports,__webpack_require__){if(typeof process==='undefined'||process.type==='renderer'){module.exports=__webpack_require__(5514);}else{module.exports=__webpack_require__(6724);}},9777:function(module,__unusedexports,__webpack_require__){var EventEmitter=__webpack_require__(4859).EventEmitter;var inherits=__webpack_require__(649).inherits;var extend=__webpack_require__(7756);var DeferredLevelDOWN=__webpack_require__(1756);var IteratorStream=__webpack_require__(5421);var Batch=__webpack_require__(3270);var errors=__webpack_require__(2652);var assert=__webpack_require__(3930);var promisify=__webpack_require__(5932);var WriteError=errors.WriteError;var ReadError=errors.ReadError;var NotFoundError=errors.NotFoundError;var OpenError=errors.OpenError;var InitializationError=errors.InitializationError;function LevelUP(db,options,callback){if(!(this instanceof LevelUP)){return new LevelUP(db,options,callback);}var error;EventEmitter.call(this);this.setMaxListeners(Infinity);if(typeof options==='function'){callback=options;options={};}options=options||{};if(!db||typeof db!=='object'){error=new InitializationError('First argument must be an abstract-leveldown compliant store');if(typeof callback==='function'){return process.nextTick(callback,error);}throw error;}assert.equal(typeof db.status,'string','.status required, old abstract-leveldown');this.options=getOptions(options);this._db=db;this.db=new DeferredLevelDOWN(db);this.open(callback);}LevelUP.prototype.emit=EventEmitter.prototype.emit;LevelUP.prototype.once=EventEmitter.prototype.once;inherits(LevelUP,EventEmitter);LevelUP.prototype.open=function(callback){var self=this;var promise;if(!callback){callback=promisify();promise=callback.promise;}if(this.isOpen()){process.nextTick(callback,null,self);return promise;}if(this._isOpening()){this.once('open',function(){callback(null,self);});return promise;}this.emit('opening');this.db.open(this.options,function(err){if(err){return callback(new OpenError(err));}self.db=self._db;callback(null,self);self.emit('open');self.emit('ready');});return promise;};LevelUP.prototype.close=function(callback){var self=this;var promise;if(!callback){callback=promisify();promise=callback.promise;}if(this.isOpen()){this.db.close(function(){self.emit('closed');callback.apply(null,arguments);});this.emit('closing');this.db=new DeferredLevelDOWN(this._db);}else if(this.isClosed()){process.nextTick(callback);}else if(this.db.status==='closing'){this.once('closed',callback);}else if(this._isOpening()){this.once('open',function(){self.close(callback);});}return promise;};LevelUP.prototype.isOpen=function(){return this.db.status==='open';};LevelUP.prototype._isOpening=function(){return this.db.status==='opening';};LevelUP.prototype.isClosed=function(){return /^clos|new/.test(this.db.status);};LevelUP.prototype.get=function(key,options,callback){if(key===null||key===undefined){throw new ReadError('get() requires a key argument');}var promise;callback=getCallback(options,callback);if(!callback){callback=promisify();promise=callback.promise;}if(maybeError(this,callback)){return promise;}options=getOptions(options);this.db.get(key,options,function(err,value){if(err){if(/notfound/i.test(err)||err.notFound){err=new NotFoundError('Key not found in database ['+key+']',err);}else{err=new ReadError(err);}return callback(err);}callback(null,value);});return promise;};LevelUP.prototype.put=function(key,value,options,callback){if(key===null||key===undefined){throw new WriteError('put() requires a key argument');}var self=this;var promise;callback=getCallback(options,callback);if(!callback){callback=promisify();promise=callback.promise;}if(maybeError(this,callback)){return promise;}options=getOptions(options);this.db.put(key,value,options,function(err){if(err){return callback(new WriteError(err));}self.emit('put',key,value);callback();});return promise;};LevelUP.prototype.del=function(key,options,callback){if(key===null||key===undefined){throw new WriteError('del() requires a key argument');}var self=this;var promise;callback=getCallback(options,callback);if(!callback){callback=promisify();promise=callback.promise;}if(maybeError(this,callback)){return promise;}options=getOptions(options);this.db.del(key,options,function(err){if(err){return callback(new WriteError(err));}self.emit('del',key);callback();});return promise;};LevelUP.prototype.batch=function(arr,options,callback){if(!arguments.length){return new Batch(this);}if(!Array.isArray(arr)){throw new WriteError('batch() requires an array argument');}var self=this;var promise;callback=getCallback(options,callback);if(!callback){callback=promisify();promise=callback.promise;}if(maybeError(this,callback)){return promise;}options=getOptions(options);arr=arr.map(function(op){if(!op.type&&op.key!==undefined&&op.value!==undefined){op.type='put';}return op;});this.db.batch(arr,options,function(err){if(err){return callback(new WriteError(err));}self.emit('batch',arr);callback();});return promise;};LevelUP.prototype.readStream=LevelUP.prototype.createReadStream=function(options){options=extend({keys:true,values:true},options);if(typeof options.limit!=='number'){options.limit=-1;}return new IteratorStream(this.db.iterator(options),options);};LevelUP.prototype.keyStream=LevelUP.prototype.createKeyStream=function(options){return this.createReadStream(extend(options,{keys:true,values:false}));};LevelUP.prototype.valueStream=LevelUP.prototype.createValueStream=function(options){return this.createReadStream(extend(options,{keys:false,values:true}));};LevelUP.prototype.toString=function(){return'LevelUP';};function getCallback(options,callback){return typeof options==='function'?options:callback;}function getOptions(options){return typeof options==='object'&&options!==null?options:{};}function maybeError(db,callback){if(!db._isOpening()&&!db.isOpen()){process.nextTick(callback,new ReadError('Database is not open'));return true;}}LevelUP.errors=errors;module.exports=LevelUP.default=LevelUP;},9781:function(__unusedmodule,exports,__webpack_require__){"use strict";const constants=exports;constants._reverse=function reverse(map){const res={};Object.keys(map).forEach(function(key){if((key|0)==key)key=key|0;const value=map[key];res[value]=key;});return res;};constants.der=__webpack_require__(1500);},9782:function(module,__unusedexports,__webpack_require__){"use strict";const FSM=__webpack_require__(7032);const Circuit=__webpack_require__(1560);const multistream=__webpack_require__(9759);const withIs=__webpack_require__(3171);const BaseConnection=__webpack_require__(3607);const observeConnection=__webpack_require__(1179);const Errors=__webpack_require__(8963);class ConnectionFSM extends BaseConnection{constructor({_switch,peerInfo,muxer,conn,type='out'}){super({_switch,name:`${type}:${_switch._peerInfo.id.toB58String().slice(0,8)}`});this.theirPeerInfo=peerInfo;this.theirB58Id=this.theirPeerInfo.id.toB58String();this.conn=conn;this.muxer=muxer;let startState='DISCONNECTED';if(this.muxer){startState='MUXED';}this._state=FSM(startState,{DISCONNECTED:{dial:'DIALING',disconnect:'DISCONNECTED',done:'DISCONNECTED'},DIALING:{abort:'ABORTED',done:'DIALED',error:'ERRORED',disconnect:'DISCONNECTING'},DIALED:{encrypt:'ENCRYPTING',privatize:'PRIVATIZING'},PRIVATIZING:{done:'PRIVATIZED',abort:'ABORTED',disconnect:'DISCONNECTING'},PRIVATIZED:{encrypt:'ENCRYPTING'},ENCRYPTING:{done:'ENCRYPTED',error:'ERRORED',disconnect:'DISCONNECTING'},ENCRYPTED:{upgrade:'UPGRADING',disconnect:'DISCONNECTING'},UPGRADING:{stop:'CONNECTED',done:'MUXED',error:'ERRORED'},MUXED:{disconnect:'DISCONNECTING'},CONNECTED:{disconnect:'DISCONNECTING'},DISCONNECTING:{done:'DISCONNECTED',disconnect:'DISCONNECTING'},ABORTED:{},ERRORED:{disconnect:'DISCONNECTING'}});this._state.on('DISCONNECTED',()=>this._onDisconnected());this._state.on('DIALING',()=>this._onDialing());this._state.on('DIALED',()=>this._onDialed());this._state.on('PRIVATIZING',()=>this._onPrivatizing());this._state.on('PRIVATIZED',()=>this._onPrivatized());this._state.on('ENCRYPTING',()=>this._onEncrypting());this._state.on('ENCRYPTED',()=>{this.log(`successfully encrypted connection to ${this.theirB58Id}`);this.emit('encrypted',this.conn);});this._state.on('UPGRADING',()=>this._onUpgrading());this._state.on('MUXED',()=>{this.log(`successfully muxed connection to ${this.theirB58Id}`);delete this.switch.conns[this.theirB58Id];this.emit('muxed',this.muxer);});this._state.on('CONNECTED',()=>{this.log(`unmuxed connection opened to ${this.theirB58Id}`);this.emit('unmuxed',this.conn);});this._state.on('DISCONNECTING',()=>this._onDisconnecting());this._state.on('ABORTED',()=>this._onAborted());this._state.on('ERRORED',()=>this._onErrored());this._state.on('error',err=>this._onStateError(err));}dial(){if(this.theirB58Id===this.ourPeerInfo.id.toB58String()){return this.emit('error',Errors.DIAL_SELF());}else if(this.getState()==='DIALING'){return this.log('attempted to dial while already dialing, ignoring');}this._state('dial');}shake(protocol,callback){if(!protocol){return callback(null,null);}if(this.muxer&&this.muxer.newStream){return this.muxer.newStream((err,stream)=>{if(err){return callback(err,null);}this.log(`created new stream to ${this.theirB58Id}`);this._protocolHandshake(protocol,stream,callback);});}this._protocolHandshake(protocol,this.conn,callback);}upgrade(){this._state('upgrade');}_onDialing(){this.log(`dialing ${this.theirB58Id}`);if(!this.switch.hasTransports()){return this.close(Errors.NO_TRANSPORTS_REGISTERED());}const tKeys=this.switch.availableTransports(this.theirPeerInfo);const circuitEnabled=Boolean(this.switch.transports[Circuit.tag]);let circuitTried=false;const nextTransport=key=>{let transport=key;if(!transport){if(!circuitEnabled){return this.close(Errors.CONNECTION_FAILED(new Error(`Circuit not enabled and all transports failed to dial peer ${this.theirB58Id}!`)));}if(circuitTried){return this.close(Errors.CONNECTION_FAILED(new Error(`No available transports to dial peer ${this.theirB58Id}!`)));}this.log(`Falling back to dialing over circuit`);this.theirPeerInfo.multiaddrs.add(`/p2p-circuit/ipfs/${this.theirB58Id}`);circuitTried=true;transport=Circuit.tag;}this.log(`dialing transport ${transport}`);this.switch.transport.dial(transport,this.theirPeerInfo,(err,_conn)=>{if(err){this.emit('error:connection_attempt_failed',err.errors||[err]);this.log(err);return nextTransport(tKeys.shift());}this.conn=observeConnection(transport,null,_conn,this.switch.observer);this._state('done');});};nextTransport(tKeys.shift());}_onDialed(){this.log(`successfully dialed ${this.theirB58Id}`);this.emit('connected',this.conn);}_onDisconnecting(){this.log(`disconnecting from ${this.theirB58Id}`);if(this.theirPeerInfo){this.theirPeerInfo.disconnect();}if(this.muxer){this.muxer.end();}this.switch.connection.remove(this);delete this.switch.conns[this.theirB58Id];delete this.muxer;if(this.conn){this.conn.source(true,()=>{this._state('done');this.switch.emit('peer-mux-closed',this.theirPeerInfo);delete this.conn;});}else{this._state('done');this.switch.emit('peer-mux-closed',this.theirPeerInfo);}}_onEncrypting(){const msDialer=new multistream.Dialer();msDialer.handle(this.conn,err=>{if(err){return this.close(Errors.maybeUnexpectedEnd(err));}this.log('selecting crypto %s to %s',this.switch.crypto.tag,this.theirB58Id);msDialer.select(this.switch.crypto.tag,(err,_conn)=>{if(err){return this.close(Errors.maybeUnexpectedEnd(err));}const conn=observeConnection(null,this.switch.crypto.tag,_conn,this.switch.observer);this.conn=this.switch.crypto.encrypt(this.ourPeerInfo.id,conn,this.theirPeerInfo.id,err=>{if(err){return this.close(err);}this.conn.setPeerInfo(this.theirPeerInfo);this._state('done');});});});}_onUpgrading(){const muxers=Object.keys(this.switch.muxers);this.log(`upgrading connection to ${this.theirB58Id}`);if(muxers.length===0){return this._state('stop');}const msDialer=new multistream.Dialer();msDialer.handle(this.conn,err=>{if(err){return this._didUpgrade(err);}const nextMuxer=key=>{this.log('selecting %s',key);msDialer.select(key,(err,_conn)=>{if(err){if(muxers.length===0){return this._didUpgrade(err);}return nextMuxer(muxers.shift());}const conn=observeConnection(null,key,_conn,this.switch.observer);this.muxer=this.switch.muxers[key].dialer(conn);this.switch.connection.add(this);this.muxer.once('close',()=>{this.close();});this.muxer.on('stream',conn=>{this.log(`new stream created via muxer to ${this.theirB58Id}`);conn.setPeerInfo(this.theirPeerInfo);this.switch.protocolMuxer(null)(conn);});this.switch.emit('peer-mux-established',this.theirPeerInfo);this._didUpgrade(null);});};nextMuxer(muxers.shift());});}_didUpgrade(err){if(err){this.log('Error upgrading connection:',err);this.switch.conns[this.theirB58Id]=this;this.emit('error:upgrade_failed',err);return this._state('stop');}this._state('done');}_protocolHandshake(protocol,connection,callback){const msDialer=new multistream.Dialer();msDialer.handle(connection,err=>{if(err){return callback(err,null);}msDialer.select(protocol,(err,_conn)=>{if(err){this.log(`could not perform protocol handshake: `,err);return callback(err,null);}const conn=observeConnection(null,protocol,_conn,this.switch.observer);this.log(`successfully performed handshake of ${protocol} to ${this.theirB58Id}`);this.emit('connection',conn);callback(null,conn);});});}_onStateError(err){this.emit('error',Errors.INVALID_STATE_TRANSITION(err));this.log(err);}}module.exports=withIs(ConnectionFSM,{className:'ConnectionFSM',symbolName:'libp2p-switch/ConnectionFSM'});},9786:function(module,__unusedexports,__webpack_require__){var forge=__webpack_require__(7938);__webpack_require__(5947);__webpack_require__(6816);__webpack_require__(1087);__webpack_require__(8749);__webpack_require__(6663);__webpack_require__(321);__webpack_require__(1214);if(typeof BigInteger==='undefined'){var BigInteger=forge.jsbn.BigInteger;}var asn1=forge.asn1;forge.pki=forge.pki||{};module.exports=forge.pki.rsa=forge.rsa=forge.rsa||{};var pki=forge.pki;var GCD_30_DELTA=[6,4,2,4,2,4,6,2];var privateKeyValidator={name:'PrivateKeyInfo',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:true,value:[{name:'PrivateKeyInfo.version',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.INTEGER,constructed:false,capture:'privateKeyVersion'},{name:'PrivateKeyInfo.privateKeyAlgorithm',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:true,value:[{name:'AlgorithmIdentifier.algorithm',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.OID,constructed:false,capture:'privateKeyOid'}]},{name:'PrivateKeyInfo',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.OCTETSTRING,constructed:false,capture:'privateKey'}]};var rsaPrivateKeyValidator={name:'RSAPrivateKey',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:true,value:[{name:'RSAPrivateKey.version',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.INTEGER,constructed:false,capture:'privateKeyVersion'},{name:'RSAPrivateKey.modulus',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.INTEGER,constructed:false,capture:'privateKeyModulus'},{name:'RSAPrivateKey.publicExponent',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.INTEGER,constructed:false,capture:'privateKeyPublicExponent'},{name:'RSAPrivateKey.privateExponent',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.INTEGER,constructed:false,capture:'privateKeyPrivateExponent'},{name:'RSAPrivateKey.prime1',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.INTEGER,constructed:false,capture:'privateKeyPrime1'},{name:'RSAPrivateKey.prime2',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.INTEGER,constructed:false,capture:'privateKeyPrime2'},{name:'RSAPrivateKey.exponent1',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.INTEGER,constructed:false,capture:'privateKeyExponent1'},{name:'RSAPrivateKey.exponent2',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.INTEGER,constructed:false,capture:'privateKeyExponent2'},{name:'RSAPrivateKey.coefficient',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.INTEGER,constructed:false,capture:'privateKeyCoefficient'}]};var rsaPublicKeyValidator={name:'RSAPublicKey',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:true,value:[{name:'RSAPublicKey.modulus',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.INTEGER,constructed:false,capture:'publicKeyModulus'},{name:'RSAPublicKey.exponent',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.INTEGER,constructed:false,capture:'publicKeyExponent'}]};var publicKeyValidator=forge.pki.rsa.publicKeyValidator={name:'SubjectPublicKeyInfo',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:true,captureAsn1:'subjectPublicKeyInfo',value:[{name:'SubjectPublicKeyInfo.AlgorithmIdentifier',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:true,value:[{name:'AlgorithmIdentifier.algorithm',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.OID,constructed:false,capture:'publicKeyOid'}]},{name:'SubjectPublicKeyInfo.subjectPublicKey',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.BITSTRING,constructed:false,value:[{name:'SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey',tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:true,optional:true,captureAsn1:'rsaPublicKey'}]}]};var emsaPkcs1v15encode=function(md){var oid;if(md.algorithm in pki.oids){oid=pki.oids[md.algorithm];}else{var error=new Error('Unknown message digest algorithm.');error.algorithm=md.algorithm;throw error;}var oidBytes=asn1.oidToDer(oid).getBytes();var digestInfo=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,true,[]);var digestAlgorithm=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,true,[]);digestAlgorithm.value.push(asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,false,oidBytes));digestAlgorithm.value.push(asn1.create(asn1.Class.UNIVERSAL,asn1.Type.NULL,false,''));var digest=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OCTETSTRING,false,md.digest().getBytes());digestInfo.value.push(digestAlgorithm);digestInfo.value.push(digest);return asn1.toDer(digestInfo).getBytes();};var _modPow=function(x,key,pub){if(pub){return x.modPow(key.e,key.n);}if(!key.p||!key.q){return x.modPow(key.d,key.n);}if(!key.dP){key.dP=key.d.mod(key.p.subtract(BigInteger.ONE));}if(!key.dQ){key.dQ=key.d.mod(key.q.subtract(BigInteger.ONE));}if(!key.qInv){key.qInv=key.q.modInverse(key.p);}var r;do{r=new BigInteger(forge.util.bytesToHex(forge.random.getBytes(key.n.bitLength()/8)),16);}while(r.compareTo(key.n)>=0||!r.gcd(key.n).equals(BigInteger.ONE));x=x.multiply(r.modPow(key.e,key.n)).mod(key.n);var xp=x.mod(key.p).modPow(key.dP,key.p);var xq=x.mod(key.q).modPow(key.dQ,key.q);while(xp.compareTo(xq)<0){xp=xp.add(key.p);}var y=xp.subtract(xq).multiply(key.qInv).mod(key.p).multiply(key.q).add(xq);y=y.multiply(r.modInverse(key.n)).mod(key.n);return y;};pki.rsa.encrypt=function(m,key,bt){var pub=bt;var eb;var k=Math.ceil(key.n.bitLength()/8);if(bt!==false&&bt!==true){pub=bt===0x02;eb=_encodePkcs1_v1_5(m,key,bt);}else{eb=forge.util.createBuffer();eb.putBytes(m);}var x=new BigInteger(eb.toHex(),16);var y=_modPow(x,key,pub);var yhex=y.toString(16);var ed=forge.util.createBuffer();var zeros=k-Math.ceil(yhex.length/2);while(zeros>0){ed.putByte(0x00);--zeros;}ed.putBytes(forge.util.hexToBytes(yhex));return ed.getBytes();};pki.rsa.decrypt=function(ed,key,pub,ml){var k=Math.ceil(key.n.bitLength()/8);if(ed.length!==k){var error=new Error('Encrypted message length is invalid.');error.length=ed.length;error.expected=k;throw error;}var y=new BigInteger(forge.util.createBuffer(ed).toHex(),16);if(y.compareTo(key.n)>=0){throw new Error('Encrypted message is invalid.');}var x=_modPow(y,key,pub);var xhex=x.toString(16);var eb=forge.util.createBuffer();var zeros=k-Math.ceil(xhex.length/2);while(zeros>0){eb.putByte(0x00);--zeros;}eb.putBytes(forge.util.hexToBytes(xhex));if(ml!==false){return _decodePkcs1_v1_5(eb.getBytes(),key,pub);}return eb.getBytes();};pki.rsa.createKeyPairGenerationState=function(bits,e,options){if(typeof bits==='string'){bits=parseInt(bits,10);}bits=bits||2048;options=options||{};var prng=options.prng||forge.random;var rng={nextBytes:function(x){var b=prng.getBytesSync(x.length);for(var i=0;i<x.length;++i){x[i]=b.charCodeAt(i);}}};var algorithm=options.algorithm||'PRIMEINC';var rval;if(algorithm==='PRIMEINC'){rval={algorithm:algorithm,state:0,bits:bits,rng:rng,eInt:e||65537,e:new BigInteger(null),p:null,q:null,qBits:bits>>1,pBits:bits-(bits>>1),pqState:0,num:null,keys:null};rval.e.fromInt(rval.eInt);}else{throw new Error('Invalid key generation algorithm: '+algorithm);}return rval;};pki.rsa.stepKeyPairGenerationState=function(state,n){if(!('algorithm'in state)){state.algorithm='PRIMEINC';}var THIRTY=new BigInteger(null);THIRTY.fromInt(30);var deltaIdx=0;var op_or=function(x,y){return x|y;};var t1=+new Date();var t2;var total=0;while(state.keys===null&&(n<=0||total<n)){if(state.state===0){var bits=state.p===null?state.pBits:state.qBits;var bits1=bits-1;if(state.pqState===0){state.num=new BigInteger(bits,state.rng);if(!state.num.testBit(bits1)){state.num.bitwiseTo(BigInteger.ONE.shiftLeft(bits1),op_or,state.num);}state.num.dAddOffset(31-state.num.mod(THIRTY).byteValue(),0);deltaIdx=0;++state.pqState;}else if(state.pqState===1){if(state.num.bitLength()>bits){state.pqState=0;}else if(state.num.isProbablePrime(_getMillerRabinTests(state.num.bitLength()))){++state.pqState;}else{state.num.dAddOffset(GCD_30_DELTA[deltaIdx++%8],0);}}else if(state.pqState===2){state.pqState=state.num.subtract(BigInteger.ONE).gcd(state.e).compareTo(BigInteger.ONE)===0?3:0;}else if(state.pqState===3){state.pqState=0;if(state.p===null){state.p=state.num;}else{state.q=state.num;}if(state.p!==null&&state.q!==null){++state.state;}state.num=null;}}else if(state.state===1){if(state.p.compareTo(state.q)<0){state.num=state.p;state.p=state.q;state.q=state.num;}++state.state;}else if(state.state===2){state.p1=state.p.subtract(BigInteger.ONE);state.q1=state.q.subtract(BigInteger.ONE);state.phi=state.p1.multiply(state.q1);++state.state;}else if(state.state===3){if(state.phi.gcd(state.e).compareTo(BigInteger.ONE)===0){++state.state;}else{state.p=null;state.q=null;state.state=0;}}else if(state.state===4){state.n=state.p.multiply(state.q);if(state.n.bitLength()===state.bits){++state.state;}else{state.q=null;state.state=0;}}else if(state.state===5){var d=state.e.modInverse(state.phi);state.keys={privateKey:pki.rsa.setPrivateKey(state.n,state.e,d,state.p,state.q,d.mod(state.p1),d.mod(state.q1),state.q.modInverse(state.p)),publicKey:pki.rsa.setPublicKey(state.n,state.e)};}t2=+new Date();total+=t2-t1;t1=t2;}return state.keys!==null;};pki.rsa.generateKeyPair=function(bits,e,options,callback){if(arguments.length===1){if(typeof bits==='object'){options=bits;bits=undefined;}else if(typeof bits==='function'){callback=bits;bits=undefined;}}else if(arguments.length===2){if(typeof bits==='number'){if(typeof e==='function'){callback=e;e=undefined;}else if(typeof e!=='number'){options=e;e=undefined;}}else{options=bits;callback=e;bits=undefined;e=undefined;}}else if(arguments.length===3){if(typeof e==='number'){if(typeof options==='function'){callback=options;options=undefined;}}else{callback=options;options=e;e=undefined;}}options=options||{};if(bits===undefined){bits=options.bits||2048;}if(e===undefined){e=options.e||0x10001;}if(!forge.options.usePureJavaScript&&callback&&bits>=256&&bits<=16384&&(e===0x10001||e===3)){if(_detectSubtleCrypto('generateKey')&&_detectSubtleCrypto('exportKey')){return window.crypto.subtle.generateKey({name:'RSASSA-PKCS1-v1_5',modulusLength:bits,publicExponent:_intToUint8Array(e),hash:{name:'SHA-256'}},true,['sign','verify']).then(function(pair){return window.crypto.subtle.exportKey('pkcs8',pair.privateKey);}).then(undefined,function(err){callback(err);}).then(function(pkcs8){if(pkcs8){var privateKey=pki.privateKeyFromAsn1(asn1.fromDer(forge.util.createBuffer(pkcs8)));callback(null,{privateKey:privateKey,publicKey:pki.setRsaPublicKey(privateKey.n,privateKey.e)});}});}if(_detectSubtleMsCrypto('generateKey')&&_detectSubtleMsCrypto('exportKey')){var genOp=window.msCrypto.subtle.generateKey({name:'RSASSA-PKCS1-v1_5',modulusLength:bits,publicExponent:_intToUint8Array(e),hash:{name:'SHA-256'}},true,['sign','verify']);genOp.oncomplete=function(e){var pair=e.target.result;var exportOp=window.msCrypto.subtle.exportKey('pkcs8',pair.privateKey);exportOp.oncomplete=function(e){var pkcs8=e.target.result;var privateKey=pki.privateKeyFromAsn1(asn1.fromDer(forge.util.createBuffer(pkcs8)));callback(null,{privateKey:privateKey,publicKey:pki.setRsaPublicKey(privateKey.n,privateKey.e)});};exportOp.onerror=function(err){callback(err);};};genOp.onerror=function(err){callback(err);};return;}}var state=pki.rsa.createKeyPairGenerationState(bits,e,options);if(!callback){pki.rsa.stepKeyPairGenerationState(state,0);return state.keys;}_generateKeyPair(state,options,callback);};pki.setRsaPublicKey=pki.rsa.setPublicKey=function(n,e){var key={n:n,e:e};key.encrypt=function(data,scheme,schemeOptions){if(typeof scheme==='string'){scheme=scheme.toUpperCase();}else if(scheme===undefined){scheme='RSAES-PKCS1-V1_5';}if(scheme==='RSAES-PKCS1-V1_5'){scheme={encode:function(m,key,pub){return _encodePkcs1_v1_5(m,key,0x02).getBytes();}};}else if(scheme==='RSA-OAEP'||scheme==='RSAES-OAEP'){scheme={encode:function(m,key){return forge.pkcs1.encode_rsa_oaep(key,m,schemeOptions);}};}else if(['RAW','NONE','NULL',null].indexOf(scheme)!==-1){scheme={encode:function(e){return e;}};}else if(typeof scheme==='string'){throw new Error('Unsupported encryption scheme: "'+scheme+'".');}var e=scheme.encode(data,key,true);return pki.rsa.encrypt(e,key,true);};key.verify=function(digest,signature,scheme){if(typeof scheme==='string'){scheme=scheme.toUpperCase();}else if(scheme===undefined){scheme='RSASSA-PKCS1-V1_5';}if(scheme==='RSASSA-PKCS1-V1_5'){scheme={verify:function(digest,d){d=_decodePkcs1_v1_5(d,key,true);var obj=asn1.fromDer(d);return digest===obj.value[1].value;}};}else if(scheme==='NONE'||scheme==='NULL'||scheme===null){scheme={verify:function(digest,d){d=_decodePkcs1_v1_5(d,key,true);return digest===d;}};}var d=pki.rsa.decrypt(signature,key,true,false);return scheme.verify(digest,d,key.n.bitLength());};return key;};pki.setRsaPrivateKey=pki.rsa.setPrivateKey=function(n,e,d,p,q,dP,dQ,qInv){var key={n:n,e:e,d:d,p:p,q:q,dP:dP,dQ:dQ,qInv:qInv};key.decrypt=function(data,scheme,schemeOptions){if(typeof scheme==='string'){scheme=scheme.toUpperCase();}else if(scheme===undefined){scheme='RSAES-PKCS1-V1_5';}var d=pki.rsa.decrypt(data,key,false,false);if(scheme==='RSAES-PKCS1-V1_5'){scheme={decode:_decodePkcs1_v1_5};}else if(scheme==='RSA-OAEP'||scheme==='RSAES-OAEP'){scheme={decode:function(d,key){return forge.pkcs1.decode_rsa_oaep(key,d,schemeOptions);}};}else if(['RAW','NONE','NULL',null].indexOf(scheme)!==-1){scheme={decode:function(d){return d;}};}else{throw new Error('Unsupported encryption scheme: "'+scheme+'".');}return scheme.decode(d,key,false);};key.sign=function(md,scheme){var bt=false;if(typeof scheme==='string'){scheme=scheme.toUpperCase();}if(scheme===undefined||scheme==='RSASSA-PKCS1-V1_5'){scheme={encode:emsaPkcs1v15encode};bt=0x01;}else if(scheme==='NONE'||scheme==='NULL'||scheme===null){scheme={encode:function(){return md;}};bt=0x01;}var d=scheme.encode(md,key.n.bitLength());return pki.rsa.encrypt(d,key,bt);};return key;};pki.wrapRsaPrivateKey=function(rsaKey){return asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,true,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,false,asn1.integerToDer(0).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,true,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,false,asn1.oidToDer(pki.oids.rsaEncryption).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.NULL,false,'')]),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OCTETSTRING,false,asn1.toDer(rsaKey).getBytes())]);};pki.privateKeyFromAsn1=function(obj){var capture={};var errors=[];if(asn1.validate(obj,privateKeyValidator,capture,errors)){obj=asn1.fromDer(forge.util.createBuffer(capture.privateKey));}capture={};errors=[];if(!asn1.validate(obj,rsaPrivateKeyValidator,capture,errors)){var error=new Error('Cannot read private key. '+'ASN.1 object does not contain an RSAPrivateKey.');error.errors=errors;throw error;}var n,e,d,p,q,dP,dQ,qInv;n=forge.util.createBuffer(capture.privateKeyModulus).toHex();e=forge.util.createBuffer(capture.privateKeyPublicExponent).toHex();d=forge.util.createBuffer(capture.privateKeyPrivateExponent).toHex();p=forge.util.createBuffer(capture.privateKeyPrime1).toHex();q=forge.util.createBuffer(capture.privateKeyPrime2).toHex();dP=forge.util.createBuffer(capture.privateKeyExponent1).toHex();dQ=forge.util.createBuffer(capture.privateKeyExponent2).toHex();qInv=forge.util.createBuffer(capture.privateKeyCoefficient).toHex();return pki.setRsaPrivateKey(new BigInteger(n,16),new BigInteger(e,16),new BigInteger(d,16),new BigInteger(p,16),new BigInteger(q,16),new BigInteger(dP,16),new BigInteger(dQ,16),new BigInteger(qInv,16));};pki.privateKeyToAsn1=pki.privateKeyToRSAPrivateKey=function(key){return asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,true,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,false,asn1.integerToDer(0).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,false,_bnToBytes(key.n)),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,false,_bnToBytes(key.e)),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,false,_bnToBytes(key.d)),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,false,_bnToBytes(key.p)),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,false,_bnToBytes(key.q)),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,false,_bnToBytes(key.dP)),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,false,_bnToBytes(key.dQ)),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,false,_bnToBytes(key.qInv))]);};pki.publicKeyFromAsn1=function(obj){var capture={};var errors=[];if(asn1.validate(obj,publicKeyValidator,capture,errors)){var oid=asn1.derToOid(capture.publicKeyOid);if(oid!==pki.oids.rsaEncryption){var error=new Error('Cannot read public key. Unknown OID.');error.oid=oid;throw error;}obj=capture.rsaPublicKey;}errors=[];if(!asn1.validate(obj,rsaPublicKeyValidator,capture,errors)){var error=new Error('Cannot read public key. '+'ASN.1 object does not contain an RSAPublicKey.');error.errors=errors;throw error;}var n=forge.util.createBuffer(capture.publicKeyModulus).toHex();var e=forge.util.createBuffer(capture.publicKeyExponent).toHex();return pki.setRsaPublicKey(new BigInteger(n,16),new BigInteger(e,16));};pki.publicKeyToAsn1=pki.publicKeyToSubjectPublicKeyInfo=function(key){return asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,true,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,true,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,false,asn1.oidToDer(pki.oids.rsaEncryption).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.NULL,false,'')]),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.BITSTRING,false,[pki.publicKeyToRSAPublicKey(key)])]);};pki.publicKeyToRSAPublicKey=function(key){return asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,true,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,false,_bnToBytes(key.n)),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,false,_bnToBytes(key.e))]);};function _encodePkcs1_v1_5(m,key,bt){var eb=forge.util.createBuffer();var k=Math.ceil(key.n.bitLength()/8);if(m.length>k-11){var error=new Error('Message is too long for PKCS#1 v1.5 padding.');error.length=m.length;error.max=k-11;throw error;}eb.putByte(0x00);eb.putByte(bt);var padNum=k-3-m.length;var padByte;if(bt===0x00||bt===0x01){padByte=bt===0x00?0x00:0xFF;for(var i=0;i<padNum;++i){eb.putByte(padByte);}}else{while(padNum>0){var numZeros=0;var padBytes=forge.random.getBytes(padNum);for(var i=0;i<padNum;++i){padByte=padBytes.charCodeAt(i);if(padByte===0){++numZeros;}else{eb.putByte(padByte);}}padNum=numZeros;}}eb.putByte(0x00);eb.putBytes(m);return eb;}function _decodePkcs1_v1_5(em,key,pub,ml){var k=Math.ceil(key.n.bitLength()/8);var eb=forge.util.createBuffer(em);var first=eb.getByte();var bt=eb.getByte();if(first!==0x00||pub&&bt!==0x00&&bt!==0x01||!pub&&bt!=0x02||pub&&bt===0x00&&typeof ml==='undefined'){throw new Error('Encryption block is invalid.');}var padNum=0;if(bt===0x00){padNum=k-3-ml;for(var i=0;i<padNum;++i){if(eb.getByte()!==0x00){throw new Error('Encryption block is invalid.');}}}else if(bt===0x01){padNum=0;while(eb.length()>1){if(eb.getByte()!==0xFF){--eb.read;break;}++padNum;}}else if(bt===0x02){padNum=0;while(eb.length()>1){if(eb.getByte()===0x00){--eb.read;break;}++padNum;}}var zero=eb.getByte();if(zero!==0x00||padNum!==k-3-eb.length()){throw new Error('Encryption block is invalid.');}return eb.getBytes();}function _generateKeyPair(state,options,callback){if(typeof options==='function'){callback=options;options={};}options=options||{};var opts={algorithm:{name:options.algorithm||'PRIMEINC',options:{workers:options.workers||2,workLoad:options.workLoad||100,workerScript:options.workerScript}}};if('prng'in options){opts.prng=options.prng;}generate();function generate(){getPrime(state.pBits,function(err,num){if(err){return callback(err);}state.p=num;if(state.q!==null){return finish(err,state.q);}getPrime(state.qBits,finish);});}function getPrime(bits,callback){forge.prime.generateProbablePrime(bits,opts,callback);}function finish(err,num){if(err){return callback(err);}state.q=num;if(state.p.compareTo(state.q)<0){var tmp=state.p;state.p=state.q;state.q=tmp;}if(state.p.subtract(BigInteger.ONE).gcd(state.e).compareTo(BigInteger.ONE)!==0){state.p=null;generate();return;}if(state.q.subtract(BigInteger.ONE).gcd(state.e).compareTo(BigInteger.ONE)!==0){state.q=null;getPrime(state.qBits,finish);return;}state.p1=state.p.subtract(BigInteger.ONE);state.q1=state.q.subtract(BigInteger.ONE);state.phi=state.p1.multiply(state.q1);if(state.phi.gcd(state.e).compareTo(BigInteger.ONE)!==0){state.p=state.q=null;generate();return;}state.n=state.p.multiply(state.q);if(state.n.bitLength()!==state.bits){state.q=null;getPrime(state.qBits,finish);return;}var d=state.e.modInverse(state.phi);state.keys={privateKey:pki.rsa.setPrivateKey(state.n,state.e,d,state.p,state.q,d.mod(state.p1),d.mod(state.q1),state.q.modInverse(state.p)),publicKey:pki.rsa.setPublicKey(state.n,state.e)};callback(null,state.keys);}}function _bnToBytes(b){var hex=b.toString(16);if(hex[0]>='8'){hex='00'+hex;}var bytes=forge.util.hexToBytes(hex);if(bytes.length>1&&(bytes.charCodeAt(0)===0&&(bytes.charCodeAt(1)&0x80)===0||bytes.charCodeAt(0)===0xFF&&(bytes.charCodeAt(1)&0x80)===0x80)){return bytes.substr(1);}return bytes;}function _getMillerRabinTests(bits){if(bits<=100)return 27;if(bits<=150)return 18;if(bits<=200)return 15;if(bits<=250)return 12;if(bits<=300)return 9;if(bits<=350)return 8;if(bits<=400)return 7;if(bits<=500)return 6;if(bits<=600)return 5;if(bits<=800)return 4;if(bits<=1250)return 3;return 2;}function _detectSubtleCrypto(fn){return typeof window!=='undefined'&&typeof window.crypto==='object'&&typeof window.crypto.subtle==='object'&&typeof window.crypto.subtle[fn]==='function';}function _detectSubtleMsCrypto(fn){return typeof window!=='undefined'&&typeof window.msCrypto==='object'&&typeof window.msCrypto.subtle==='object'&&typeof window.msCrypto.subtle[fn]==='function';}function _intToUint8Array(x){var bytes=forge.util.hexToBytes(x.toString(16));var buffer=new Uint8Array(bytes.length);for(var i=0;i<bytes.length;++i){buffer[i]=bytes.charCodeAt(i);}return buffer;}function _privateKeyFromJwk(jwk){if(jwk.kty!=='RSA'){throw new Error('Unsupported key algorithm "'+jwk.kty+'"; algorithm must be "RSA".');}return pki.setRsaPrivateKey(_base64ToBigInt(jwk.n),_base64ToBigInt(jwk.e),_base64ToBigInt(jwk.d),_base64ToBigInt(jwk.p),_base64ToBigInt(jwk.q),_base64ToBigInt(jwk.dp),_base64ToBigInt(jwk.dq),_base64ToBigInt(jwk.qi));}function _publicKeyFromJwk(jwk){if(jwk.kty!=='RSA'){throw new Error('Key algorithm must be "RSA".');}return pki.setRsaPublicKey(_base64ToBigInt(jwk.n),_base64ToBigInt(jwk.e));}function _base64ToBigInt(b64){return new BigInteger(forge.util.bytesToHex(forge.util.decode64(b64)),16);}},9811:function(module,__unusedexports,__webpack_require__){"use strict";module.exports=self=>({add:__webpack_require__(7968)(self),addFromFs:__webpack_require__(6784)(self),addFromStream:__webpack_require__(9938)(self),addFromURL:__webpack_require__(9482)(self),addPullStream:__webpack_require__(7721)(self),addReadableStream:__webpack_require__(9634)(self),cat:__webpack_require__(7530)(self),catPullStream:__webpack_require__(593)(self),catReadableStream:__webpack_require__(7913)(self),get:__webpack_require__(8966)(self),getPullStream:__webpack_require__(2699)(self),getReadableStream:__webpack_require__(6538)(self),ls:__webpack_require__(7415)(self),lsPullStream:__webpack_require__(5177)(self),lsReadableStream:__webpack_require__(1972)(self)});},9817:function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=doLimit;function doLimit(fn,limit){return function(iterable,iteratee,callback){return fn(iterable,limit,iteratee,callback);};}module.exports=exports["default"];},9834:function(__unusedmodule,exports,__webpack_require__){"use strict";var ip=exports;var Buffer=__webpack_require__(9423).Buffer;var os=__webpack_require__(4316);ip.toBuffer=function(ip,buff,offset){offset=~~offset;var result;if(this.isV4Format(ip)){result=buff||new Buffer(offset+4);ip.split(/\./g).map(function(byte){result[offset++]=parseInt(byte,10)&0xff;});}else if(this.isV6Format(ip)){var sections=ip.split(':',8);var i;for(i=0;i<sections.length;i++){var isv4=this.isV4Format(sections[i]);var v4Buffer;if(isv4){v4Buffer=this.toBuffer(sections[i]);sections[i]=v4Buffer.slice(0,2).toString('hex');}if(v4Buffer&&++i<8){sections.splice(i,0,v4Buffer.slice(2,4).toString('hex'));}}if(sections[0]===''){while(sections.length<8)sections.unshift('0');}else if(sections[sections.length-1]===''){while(sections.length<8)sections.push('0');}else if(sections.length<8){for(i=0;i<sections.length&&sections[i]!=='';i++);var argv=[i,1];for(i=9-sections.length;i>0;i--){argv.push('0');}sections.splice.apply(sections,argv);}result=buff||new Buffer(offset+16);for(i=0;i<sections.length;i++){var word=parseInt(sections[i],16);result[offset++]=word>>8&0xff;result[offset++]=word&0xff;}}if(!result){throw Error('Invalid ip address: '+ip);}return result;};ip.toString=function(buff,offset,length){offset=~~offset;length=length||buff.length-offset;var result=[];if(length===4){for(var i=0;i<length;i++){result.push(buff[offset+i]);}result=result.join('.');}else if(length===16){for(var i=0;i<length;i+=2){result.push(buff.readUInt16BE(offset+i).toString(16));}result=result.join(':');result=result.replace(/(^|:)0(:0)*:0(:|$)/,'$1::$3');result=result.replace(/:{3,4}/,'::');}return result;};var ipv4Regex=/^(\d{1,3}\.){3,3}\d{1,3}$/;var ipv6Regex=/^(::)?(((\d{1,3}\.){3}(\d{1,3}){1})?([0-9a-f]){0,4}:{0,2}){1,8}(::)?$/i;ip.isV4Format=function(ip){return ipv4Regex.test(ip);};ip.isV6Format=function(ip){return ipv6Regex.test(ip);};function _normalizeFamily(family){return family?family.toLowerCase():'ipv4';}ip.fromPrefixLen=function(prefixlen,family){if(prefixlen>32){family='ipv6';}else{family=_normalizeFamily(family);}var len=4;if(family==='ipv6'){len=16;}var buff=new Buffer(len);for(var i=0,n=buff.length;i<n;++i){var bits=8;if(prefixlen<8){bits=prefixlen;}prefixlen-=bits;buff[i]=~(0xff>>bits)&0xff;}return ip.toString(buff);};ip.mask=function(addr,mask){addr=ip.toBuffer(addr);mask=ip.toBuffer(mask);var result=new Buffer(Math.max(addr.length,mask.length));var i=0;if(addr.length===mask.length){for(i=0;i<addr.length;i++){result[i]=addr[i]&mask[i];}}else if(mask.length===4){for(i=0;i<mask.length;i++){result[i]=addr[addr.length-4+i]&mask[i];}}else{for(var i=0;i<result.length-6;i++){result[i]=0;}result[10]=0xff;result[11]=0xff;for(i=0;i<addr.length;i++){result[i+12]=addr[i]&mask[i+12];}i=i+12;}for(;i<result.length;i++)result[i]=0;return ip.toString(result);};ip.cidr=function(cidrString){var cidrParts=cidrString.split('/');var addr=cidrParts[0];if(cidrParts.length!==2)throw new Error('invalid CIDR subnet: '+addr);var mask=ip.fromPrefixLen(parseInt(cidrParts[1],10));return ip.mask(addr,mask);};ip.subnet=function(addr,mask){var networkAddress=ip.toLong(ip.mask(addr,mask));var maskBuffer=ip.toBuffer(mask);var maskLength=0;for(var i=0;i<maskBuffer.length;i++){if(maskBuffer[i]===0xff){maskLength+=8;}else{var octet=maskBuffer[i]&0xff;while(octet){octet=octet<<1&0xff;maskLength++;}}}var numberOfAddresses=Math.pow(2,32-maskLength);return{networkAddress:ip.fromLong(networkAddress),firstAddress:numberOfAddresses<=2?ip.fromLong(networkAddress):ip.fromLong(networkAddress+1),lastAddress:numberOfAddresses<=2?ip.fromLong(networkAddress+numberOfAddresses-1):ip.fromLong(networkAddress+numberOfAddresses-2),broadcastAddress:ip.fromLong(networkAddress+numberOfAddresses-1),subnetMask:mask,subnetMaskLength:maskLength,numHosts:numberOfAddresses<=2?numberOfAddresses:numberOfAddresses-2,length:numberOfAddresses,contains:function(other){return networkAddress===ip.toLong(ip.mask(other,mask));}};};ip.cidrSubnet=function(cidrString){var cidrParts=cidrString.split('/');var addr=cidrParts[0];if(cidrParts.length!==2)throw new Error('invalid CIDR subnet: '+addr);var mask=ip.fromPrefixLen(parseInt(cidrParts[1],10));return ip.subnet(addr,mask);};ip.not=function(addr){var buff=ip.toBuffer(addr);for(var i=0;i<buff.length;i++){buff[i]=0xff^buff[i];}return ip.toString(buff);};ip.or=function(a,b){a=ip.toBuffer(a);b=ip.toBuffer(b);if(a.length===b.length){for(var i=0;i<a.length;++i){a[i]|=b[i];}return ip.toString(a);}else{var buff=a;var other=b;if(b.length>a.length){buff=b;other=a;}var offset=buff.length-other.length;for(var i=offset;i<buff.length;++i){buff[i]|=other[i-offset];}return ip.toString(buff);}};ip.isEqual=function(a,b){a=ip.toBuffer(a);b=ip.toBuffer(b);if(a.length===b.length){for(var i=0;i<a.length;i++){if(a[i]!==b[i])return false;}return true;}if(b.length===4){var t=b;b=a;a=t;}for(var i=0;i<10;i++){if(b[i]!==0)return false;}var word=b.readUInt16BE(10);if(word!==0&&word!==0xffff)return false;for(var i=0;i<4;i++){if(a[i]!==b[i+12])return false;}return true;};ip.isPrivate=function(addr){return /^(::f{4}:)?10\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(addr)||/^(::f{4}:)?192\.168\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(addr)||/^(::f{4}:)?172\.(1[6-9]|2\d|30|31)\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(addr)||/^(::f{4}:)?127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(addr)||/^(::f{4}:)?169\.254\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(addr)||/^f[cd][0-9a-f]{2}:/i.test(addr)||/^fe80:/i.test(addr)||/^::1$/.test(addr)||/^::$/.test(addr);};ip.isPublic=function(addr){return!ip.isPrivate(addr);};ip.isLoopback=function(addr){return /^(::f{4}:)?127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})/.test(addr)||/^fe80::1$/.test(addr)||/^::1$/.test(addr)||/^::$/.test(addr);};ip.loopback=function(family){family=_normalizeFamily(family);if(family!=='ipv4'&&family!=='ipv6'){throw new Error('family must be ipv4 or ipv6');}return family==='ipv4'?'127.0.0.1':'fe80::1';};ip.address=function(name,family){var interfaces=os.networkInterfaces();var all;family=_normalizeFamily(family);if(name&&name!=='private'&&name!=='public'){var res=interfaces[name].filter(function(details){var itemFamily=details.family.toLowerCase();return itemFamily===family;});if(res.length===0)return undefined;return res[0].address;}var all=Object.keys(interfaces).map(function(nic){var addresses=interfaces[nic].filter(function(details){details.family=details.family.toLowerCase();if(details.family!==family||ip.isLoopback(details.address)){return false;}else if(!name){return true;}return name==='public'?ip.isPrivate(details.address):ip.isPublic(details.address);});return addresses.length?addresses[0].address:undefined;}).filter(Boolean);return!all.length?ip.loopback(family):all[0];};ip.toLong=function(ip){var ipl=0;ip.split('.').forEach(function(octet){ipl<<=8;ipl+=parseInt(octet);});return ipl>>>0;};ip.fromLong=function(ipl){return(ipl>>>24)+'.'+(ipl>>16&255)+'.'+(ipl>>8&255)+'.'+(ipl&255);};},9836:function(module,__unusedexports,__webpack_require__){var DuplexStream=__webpack_require__(6693),util=__webpack_require__(649),Buffer=__webpack_require__(7572).Buffer;function BufferList(callback){if(!(this instanceof BufferList))return new BufferList(callback);this._bufs=[];this.length=0;if(typeof callback=='function'){this._callback=callback;var piper=function piper(err){if(this._callback){this._callback(err);this._callback=null;}}.bind(this);this.on('pipe',function onPipe(src){src.on('error',piper);});this.on('unpipe',function onUnpipe(src){src.removeListener('error',piper);});}else{this.append(callback);}DuplexStream.call(this);}util.inherits(BufferList,DuplexStream);BufferList.prototype._offset=function _offset(offset){var tot=0,i=0,_t;if(offset===0)return[0,0];for(;i<this._bufs.length;i++){_t=tot+this._bufs[i].length;if(offset<_t||i==this._bufs.length-1)return[i,offset-tot];tot=_t;}};BufferList.prototype.append=function append(buf){var i=0;if(Buffer.isBuffer(buf)){this._appendBuffer(buf);}else if(Array.isArray(buf)){for(;i<buf.length;i++)this.append(buf[i]);}else if(buf instanceof BufferList){for(;i<buf._bufs.length;i++)this.append(buf._bufs[i]);}else if(buf!=null){if(typeof buf=='number')buf=buf.toString();this._appendBuffer(Buffer.from(buf));}return this;};BufferList.prototype._appendBuffer=function appendBuffer(buf){this._bufs.push(buf);this.length+=buf.length;};BufferList.prototype._write=function _write(buf,encoding,callback){this._appendBuffer(buf);if(typeof callback=='function')callback();};BufferList.prototype._read=function _read(size){if(!this.length)return this.push(null);size=Math.min(size,this.length);this.push(this.slice(0,size));this.consume(size);};BufferList.prototype.end=function end(chunk){DuplexStream.prototype.end.call(this,chunk);if(this._callback){this._callback(null,this.slice());this._callback=null;}};BufferList.prototype.get=function get(index){return this.slice(index,index+1)[0];};BufferList.prototype.slice=function slice(start,end){if(typeof start=='number'&&start<0)start+=this.length;if(typeof end=='number'&&end<0)end+=this.length;return this.copy(null,0,start,end);};BufferList.prototype.copy=function copy(dst,dstStart,srcStart,srcEnd){if(typeof srcStart!='number'||srcStart<0)srcStart=0;if(typeof srcEnd!='number'||srcEnd>this.length)srcEnd=this.length;if(srcStart>=this.length)return dst||Buffer.alloc(0);if(srcEnd<=0)return dst||Buffer.alloc(0);var copy=!!dst,off=this._offset(srcStart),len=srcEnd-srcStart,bytes=len,bufoff=copy&&dstStart||0,start=off[1],l,i;if(srcStart===0&&srcEnd==this.length){if(!copy){return this._bufs.length===1?this._bufs[0]:Buffer.concat(this._bufs,this.length);}for(i=0;i<this._bufs.length;i++){this._bufs[i].copy(dst,bufoff);bufoff+=this._bufs[i].length;}return dst;}if(bytes<=this._bufs[off[0]].length-start){return copy?this._bufs[off[0]].copy(dst,dstStart,start,start+bytes):this._bufs[off[0]].slice(start,start+bytes);}if(!copy)dst=Buffer.allocUnsafe(len);for(i=off[0];i<this._bufs.length;i++){l=this._bufs[i].length-start;if(bytes>l){this._bufs[i].copy(dst,bufoff,start);}else{this._bufs[i].copy(dst,bufoff,start,start+bytes);break;}bufoff+=l;bytes-=l;if(start)start=0;}return dst;};BufferList.prototype.shallowSlice=function shallowSlice(start,end){start=start||0;end=end||this.length;if(start<0)start+=this.length;if(end<0)end+=this.length;var startOffset=this._offset(start),endOffset=this._offset(end),buffers=this._bufs.slice(startOffset[0],endOffset[0]+1);if(endOffset[1]==0)buffers.pop();else buffers[buffers.length-1]=buffers[buffers.length-1].slice(0,endOffset[1]);if(startOffset[1]!=0)buffers[0]=buffers[0].slice(startOffset[1]);return new BufferList(buffers);};BufferList.prototype.toString=function toString(encoding,start,end){return this.slice(start,end).toString(encoding);};BufferList.prototype.consume=function consume(bytes){while(this._bufs.length){if(bytes>=this._bufs[0].length){bytes-=this._bufs[0].length;this.length-=this._bufs[0].length;this._bufs.shift();}else{this._bufs[0]=this._bufs[0].slice(bytes);this.length-=bytes;break;}}return this;};BufferList.prototype.duplicate=function duplicate(){var i=0,copy=new BufferList();for(;i<this._bufs.length;i++)copy.append(this._bufs[i]);return copy;};BufferList.prototype.destroy=function destroy(){this._bufs.length=0;this.length=0;this.push(null);};(function(){var methods={'readDoubleBE':8,'readDoubleLE':8,'readFloatBE':4,'readFloatLE':4,'readInt32BE':4,'readInt32LE':4,'readUInt32BE':4,'readUInt32LE':4,'readInt16BE':2,'readInt16LE':2,'readUInt16BE':2,'readUInt16LE':2,'readInt8':1,'readUInt8':1};for(var m in methods){(function(m){BufferList.prototype[m]=function(offset){return this.slice(offset,offset+methods[m])[m](0);};})(m);}})();module.exports=BufferList;},9845:function(module,__unusedexports,__webpack_require__){"use strict";var buffer=__webpack_require__(9423);var Signature=__webpack_require__(406);var Script=__webpack_require__(5355);var Output=__webpack_require__(1143);var BufferReader=__webpack_require__(412);var BufferWriter=__webpack_require__(2418);var BN=__webpack_require__(6122);var Hash=__webpack_require__(2442);var ECDSA=__webpack_require__(5621);var $=__webpack_require__(5107);var _=__webpack_require__(6064);var SIGHASH_SINGLE_BUG='0000000000000000000000000000000000000000000000000000000000000001';var BITS_64_ON='ffffffffffffffff';var sighash=function sighash(transaction,sighashType,inputNumber,subscript){var Transaction=__webpack_require__(7593);var Input=__webpack_require__(4517);var i;var txcopy=Transaction.shallowCopy(transaction);subscript=new Script(subscript);subscript.removeCodeseparators();for(i=0;i<txcopy.inputs.length;i++){txcopy.inputs[i]=new Input(txcopy.inputs[i]).setScript(Script.empty());}txcopy.inputs[inputNumber]=new Input(txcopy.inputs[inputNumber]).setScript(subscript);if((sighashType&31)===Signature.SIGHASH_NONE||(sighashType&31)===Signature.SIGHASH_SINGLE){for(i=0;i<txcopy.inputs.length;i++){if(i!==inputNumber){txcopy.inputs[i].sequenceNumber=0;}}}if((sighashType&31)===Signature.SIGHASH_NONE){txcopy.outputs=[];}else if((sighashType&31)===Signature.SIGHASH_SINGLE){if(inputNumber>=txcopy.outputs.length){return new Buffer(SIGHASH_SINGLE_BUG,'hex');}txcopy.outputs.length=inputNumber+1;for(i=0;i<inputNumber;i++){txcopy.outputs[i]=new Output({satoshis:BN.fromBuffer(new buffer.Buffer(BITS_64_ON,'hex')),script:Script.empty()});}}if(sighashType&Signature.SIGHASH_ANYONECANPAY){txcopy.inputs=[txcopy.inputs[inputNumber]];}var buf=new BufferWriter().write(txcopy.toBuffer()).writeInt32LE(sighashType).toBuffer();var ret=Hash.sha256sha256(buf);ret=new BufferReader(ret).readReverse();return ret;};function sign(transaction,privateKey,sighashType,inputIndex,subscript){var hashbuf=sighash(transaction,sighashType,inputIndex,subscript);var sig=ECDSA.sign(hashbuf,privateKey,'little').set({nhashtype:sighashType});return sig;}function verify(transaction,signature,publicKey,inputIndex,subscript){$.checkArgument(!_.isUndefined(transaction));$.checkArgument(!_.isUndefined(signature)&&!_.isUndefined(signature.nhashtype));var hashbuf=sighash(transaction,signature.nhashtype,inputIndex,subscript);return ECDSA.verify(hashbuf,signature,publicKey,'little');}module.exports={sighash:sighash,sign:sign,verify:verify};},9849:function(module){function AbstractChainedBatch(db){this._db=db;this._operations=[];this._written=false;}AbstractChainedBatch.prototype._serializeKey=function(key){return this._db._serializeKey(key);};AbstractChainedBatch.prototype._serializeValue=function(value){return this._db._serializeValue(value);};AbstractChainedBatch.prototype._checkWritten=function(){if(this._written){throw new Error('write() already called on this batch');}};AbstractChainedBatch.prototype.put=function(key,value){this._checkWritten();var err=this._db._checkKey(key,'key');if(err){throw err;}key=this._serializeKey(key);value=this._serializeValue(value);this._put(key,value);return this;};AbstractChainedBatch.prototype._put=function(key,value){this._operations.push({type:'put',key:key,value:value});};AbstractChainedBatch.prototype.del=function(key){this._checkWritten();var err=this._db._checkKey(key,'key');if(err){throw err;}key=this._serializeKey(key);this._del(key);return this;};AbstractChainedBatch.prototype._del=function(key){this._operations.push({type:'del',key:key});};AbstractChainedBatch.prototype.clear=function(){this._checkWritten();this._operations=[];this._clear();return this;};AbstractChainedBatch.prototype._clear=function noop(){};AbstractChainedBatch.prototype.write=function(options,callback){this._checkWritten();if(typeof options==='function'){callback=options;}if(typeof callback!=='function'){throw new Error('write() requires a callback argument');}if(typeof options!=='object'){options={};}this._written=true;if(typeof this._write==='function'){return this._write(callback);}if(typeof this._db._batch==='function'){return this._db._batch(this._operations,options,callback);}process.nextTick(callback);};module.exports=AbstractChainedBatch;},9854:function(module){"use strict";var toString=Object.prototype.toString;module.exports=function(x){var prototype;return toString.call(x)==='[object Object]'&&(prototype=Object.getPrototypeOf(x),prototype===null||prototype===Object.getPrototypeOf({}));};},9862:function(module){"use strict";var ALPHABET='qpzry9x8gf2tvdw0s3jn54khce6mua7l';var ALPHABET_MAP={};for(var z=0;z<ALPHABET.length;z++){var x=ALPHABET.charAt(z);if(ALPHABET_MAP[x]!==undefined)throw new TypeError(x+' is ambiguous');ALPHABET_MAP[x]=z;}function polymodStep(pre){var b=pre>>25;return(pre&0x1FFFFFF)<<5^-(b>>0&1)&0x3b6a57b2^-(b>>1&1)&0x26508e6d^-(b>>2&1)&0x1ea119fa^-(b>>3&1)&0x3d4233dd^-(b>>4&1)&0x2a1462b3;}function prefixChk(prefix){var chk=1;for(var i=0;i<prefix.length;++i){var c=prefix.charCodeAt(i);if(c<33||c>126)throw new Error('Invalid prefix ('+prefix+')');chk=polymodStep(chk)^c>>5;}chk=polymodStep(chk);for(i=0;i<prefix.length;++i){var v=prefix.charCodeAt(i);chk=polymodStep(chk)^v&0x1f;}return chk;}function encode(prefix,words,LIMIT){LIMIT=LIMIT||90;if(prefix.length+7+words.length>LIMIT)throw new TypeError('Exceeds length limit');prefix=prefix.toLowerCase();var chk=prefixChk(prefix);var result=prefix+'1';for(var i=0;i<words.length;++i){var x=words[i];if(x>>5!==0)throw new Error('Non 5-bit word');chk=polymodStep(chk)^x;result+=ALPHABET.charAt(x);}for(i=0;i<6;++i){chk=polymodStep(chk);}chk^=1;for(i=0;i<6;++i){var v=chk>>(5-i)*5&0x1f;result+=ALPHABET.charAt(v);}return result;}function decode(str,LIMIT){LIMIT=LIMIT||90;if(str.length<8)throw new TypeError(str+' too short');if(str.length>LIMIT)throw new TypeError('Exceeds length limit');var lowered=str.toLowerCase();var uppered=str.toUpperCase();if(str!==lowered&&str!==uppered)throw new Error('Mixed-case string '+str);str=lowered;var split=str.lastIndexOf('1');if(split===-1)throw new Error('No separator character for '+str);if(split===0)throw new Error('Missing prefix for '+str);var prefix=str.slice(0,split);var wordChars=str.slice(split+1);if(wordChars.length<6)throw new Error('Data too short');var chk=prefixChk(prefix);var words=[];for(var i=0;i<wordChars.length;++i){var c=wordChars.charAt(i);var v=ALPHABET_MAP[c];if(v===undefined)throw new Error('Unknown character '+c);chk=polymodStep(chk)^v;if(i+6>=wordChars.length)continue;words.push(v);}if(chk!==1)throw new Error('Invalid checksum for '+str);return{prefix:prefix,words:words};}function convert(data,inBits,outBits,pad){var value=0;var bits=0;var maxV=(1<<outBits)-1;var result=[];for(var i=0;i<data.length;++i){value=value<<inBits|data[i];bits+=inBits;while(bits>=outBits){bits-=outBits;result.push(value>>bits&maxV);}}if(pad){if(bits>0){result.push(value<<outBits-bits&maxV);}}else{if(bits>=inBits)throw new Error('Excess padding');if(value<<outBits-bits&maxV)throw new Error('Non-zero padding');}return result;}function toWords(bytes){return convert(bytes,8,5,true);}function fromWords(words){return convert(words,5,8,false);}module.exports={decode:decode,encode:encode,toWords:toWords,fromWords:fromWords};},9865:function(module,__unusedexports,__webpack_require__){const lazy=__webpack_require__(8643);const typef=__webpack_require__(2809);const OPS=__webpack_require__(9710);const ecc=__webpack_require__(6290);const bcrypto=__webpack_require__(5475);const bech32=__webpack_require__(9862);const bscript=__webpack_require__(5099);const BITCOIN_NETWORK=__webpack_require__(1215).bitcoin;const EMPTY_BUFFER=Buffer.alloc(0);function p2wpkh(a,opts){if(!a.address&&!a.hash&&!a.output&&!a.pubkey&&!a.witness)throw new TypeError('Not enough data');opts=Object.assign({validate:true},opts||{});typef({address:typef.maybe(typef.String),hash:typef.maybe(typef.BufferN(20)),input:typef.maybe(typef.BufferN(0)),network:typef.maybe(typef.Object),output:typef.maybe(typef.BufferN(22)),pubkey:typef.maybe(ecc.isPoint),signature:typef.maybe(bscript.isCanonicalScriptSignature),witness:typef.maybe(typef.arrayOf(typef.Buffer))},a);const _address=lazy.value(function(){const result=bech32.decode(a.address);const version=result.words.shift();const data=bech32.fromWords(result.words);return{version,prefix:result.prefix,data:Buffer.from(data)};});const network=a.network||BITCOIN_NETWORK;const o={network};lazy.prop(o,'address',function(){if(!o.hash)return;const words=bech32.toWords(o.hash);words.unshift(0x00);return bech32.encode(network.bech32,words);});lazy.prop(o,'hash',function(){if(a.output)return a.output.slice(2,22);if(a.address)return _address().data;if(a.pubkey||o.pubkey)return bcrypto.hash160(a.pubkey||o.pubkey);});lazy.prop(o,'output',function(){if(!o.hash)return;return bscript.compile([OPS.OP_0,o.hash]);});lazy.prop(o,'pubkey',function(){if(a.pubkey)return a.pubkey;if(!a.witness)return;return a.witness[1];});lazy.prop(o,'signature',function(){if(!a.witness)return;return a.witness[0];});lazy.prop(o,'input',function(){if(!o.witness)return;return EMPTY_BUFFER;});lazy.prop(o,'witness',function(){if(!a.pubkey)return;if(!a.signature)return;return[a.signature,a.pubkey];});if(opts.validate){let hash;if(a.address){if(network&&network.bech32!==_address().prefix)throw new TypeError('Invalid prefix or Network mismatch');if(_address().version!==0x00)throw new TypeError('Invalid address version');if(_address().data.length!==20)throw new TypeError('Invalid address data');hash=_address().data;}if(a.hash){if(hash&&!hash.equals(a.hash))throw new TypeError('Hash mismatch');else hash=a.hash;}if(a.output){if(a.output.length!==22||a.output[0]!==OPS.OP_0||a.output[1]!==0x14)throw new TypeError('Output is invalid');if(hash&&!hash.equals(a.output.slice(2)))throw new TypeError('Hash mismatch');else hash=a.output.slice(2);}if(a.pubkey){const pkh=bcrypto.hash160(a.pubkey);if(hash&&!hash.equals(pkh))throw new TypeError('Hash mismatch');else hash=pkh;}if(a.witness){if(a.witness.length!==2)throw new TypeError('Witness is invalid');if(!bscript.isCanonicalScriptSignature(a.witness[0]))throw new TypeError('Witness has invalid signature');if(!ecc.isPoint(a.witness[1]))throw new TypeError('Witness has invalid pubkey');if(a.signature&&!a.signature.equals(a.witness[0]))throw new TypeError('Signature mismatch');if(a.pubkey&&!a.pubkey.equals(a.witness[1]))throw new TypeError('Pubkey mismatch');const pkh=bcrypto.hash160(a.witness[1]);if(hash&&!hash.equals(pkh))throw new TypeError('Hash mismatch');}}return Object.assign(o,a);}module.exports=p2wpkh;},9866:function(module,exports,__webpack_require__){var hmac=exports;var hash=__webpack_require__(3102);var utils=hash.utils;var assert=utils.assert;function Hmac(hash,key,enc){if(!(this instanceof Hmac))return new Hmac(hash,key,enc);this.Hash=hash;this.blockSize=hash.blockSize/8;this.outSize=hash.outSize/8;this.inner=null;this.outer=null;this._init(utils.toArray(key,enc));}module.exports=Hmac;Hmac.prototype._init=function init(key){if(key.length>this.blockSize)key=new this.Hash().update(key).digest();assert(key.length<=this.blockSize);for(var i=key.length;i<this.blockSize;i++)key.push(0);for(var i=0;i<key.length;i++)key[i]^=0x36;this.inner=new this.Hash().update(key);for(var i=0;i<key.length;i++)key[i]^=0x6a;this.outer=new this.Hash().update(key);};Hmac.prototype.update=function update(msg,enc){this.inner.update(msg,enc);return this;};Hmac.prototype.digest=function digest(enc){this.outer.update(this.inner.digest());return this.outer.digest(enc);};},9891:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _eachLimit=__webpack_require__(4203);var _eachLimit2=_interopRequireDefault(_eachLimit);var _doLimit=__webpack_require__(9817);var _doLimit2=_interopRequireDefault(_doLimit);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}exports.default=(0,_doLimit2.default)(_eachLimit2.default,1);module.exports=exports['default'];},9896:function(module,__unusedexports,__webpack_require__){module.exports='undefined'===typeof WebSocket?__webpack_require__(5437):WebSocket;},9897:function(module){module.exports=require("dns");},9923:function(__unusedmodule,exports,__webpack_require__){"use strict";const nacl=__webpack_require__(2193);const nextTick=__webpack_require__(7173);exports.publicKeyLength=nacl.sign.publicKeyLength;exports.privateKeyLength=nacl.sign.secretKeyLength;exports.generateKey=function(callback){nextTick(()=>{let result;try{result=nacl.sign.keyPair();}catch(err){return callback(err);}callback(null,result);});};exports.generateKeyFromSeed=function(seed,callback){nextTick(()=>{let result;try{result=nacl.sign.keyPair.fromSeed(seed);}catch(err){return callback(err);}callback(null,result);});};exports.hashAndSign=function(key,msg,callback){nextTick(()=>{callback(null,Buffer.from(nacl.sign.detached(msg,key)));});};exports.hashAndVerify=function(key,sig,msg,callback){nextTick(()=>{let result;try{result=nacl.sign.detached.verify(msg,sig,key);}catch(err){return callback(err);}callback(null,result);});};},9929:function(module){"use strict";var seed=1;function getNextValue(){seed=(seed*9301+49297)%233280;return seed/233280.0;}function setSeed(_seed_){seed=_seed_;}module.exports={nextValue:getNextValue,seed:setSeed};},9930:function(module,__unusedexports,__webpack_require__){"use strict";const promisify=__webpack_require__(6955);module.exports=function key(self){return{gen:promisify((name,opts,callback)=>{opts=opts||{};self._keychain.createKey(name,opts.type,opts.size,callback);}),info:promisify((name,callback)=>{self._keychain.findKeyByName(name,callback);}),list:promisify(callback=>{self._keychain.listKeys(callback);}),rm:promisify((name,callback)=>{self._keychain.removeKey(name,callback);}),rename:promisify((oldName,newName,callback)=>{self._keychain.renameKey(oldName,newName,(err,key)=>{if(err)return callback(err);const result={was:oldName,now:key.name,id:key.id,overwrite:false};callback(null,result);});}),import:promisify((name,pem,password,callback)=>{self._keychain.importKey(name,pem,password,callback);}),export:promisify((name,password,callback)=>{self._keychain.exportKey(name,password,callback);})};};},9933:function(module,__unusedexports,__webpack_require__){"use strict";var BN=__webpack_require__(6122);var BufferUtil=__webpack_require__(9657);var ec=__webpack_require__(5194).curves.secp256k1;var ecPoint=ec.curve.point.bind(ec.curve);var ecPointFromX=ec.curve.pointFromX.bind(ec.curve);var Point=function Point(x,y,isRed){var point=ecPoint(x,y,isRed);point.validate();return point;};Point.prototype=Object.getPrototypeOf(ec.curve.point());Point.fromX=function fromX(odd,x){var point=ecPointFromX(odd,x);point.validate();return point;};Point.getG=function getG(){return ec.curve.g;};Point.getN=function getN(){return new BN(ec.curve.n.toArray());};Point.prototype._getX=Point.prototype.getX;Point.prototype.getX=function getX(){return new BN(this._getX().toArray());};Point.prototype._getY=Point.prototype.getY;Point.prototype.getY=function getY(){return new BN(this._getY().toArray());};Point.prototype.validate=function validate(){if(this.isInfinity()){throw new Error('Point cannot be equal to Infinity');}if(this.getX().cmp(BN.Zero)===0||this.getY().cmp(BN.Zero)===0){throw new Error('Invalid x,y value for curve, cannot equal 0.');}var p2=ecPointFromX(this.getY().isOdd(),this.getX());if(p2.y.cmp(this.y)!==0){throw new Error('Invalid y value for curve.');}var xValidRange=this.getX().gt(BN.Minus1)&&this.getX().lt(Point.getN());var yValidRange=this.getY().gt(BN.Minus1)&&this.getY().lt(Point.getN());if(!xValidRange||!yValidRange){throw new Error('Point does not lie on the curve');}if(!this.mul(Point.getN()).isInfinity()){throw new Error('Point times N must be infinity');}return this;};Point.pointToCompressed=function pointToCompressed(point){var xbuf=point.getX().toBuffer({size:32});var ybuf=point.getY().toBuffer({size:32});var prefix;var odd=ybuf[ybuf.length-1]%2;if(odd){prefix=new Buffer([0x03]);}else{prefix=new Buffer([0x02]);}return BufferUtil.concat([prefix,xbuf]);};module.exports=Point;},9934:function(module){var s=1000;var m=s*60;var h=m*60;var d=h*24;var w=d*7;var y=d*365.25;module.exports=function(val,options){options=options||{};var type=typeof val;if(type==='string'&&val.length>0){return parse(val);}else if(type==='number'&&isNaN(val)===false){return options.long?fmtLong(val):fmtShort(val);}throw new Error('val is not a non-empty string or a valid number. val='+JSON.stringify(val));};function parse(str){str=String(str);if(str.length>100){return;}var match=/^((?:\d+)?\-?\d?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(str);if(!match){return;}var n=parseFloat(match[1]);var type=(match[2]||'ms').toLowerCase();switch(type){case'years':case'year':case'yrs':case'yr':case'y':return n*y;case'weeks':case'week':case'w':return n*w;case'days':case'day':case'd':return n*d;case'hours':case'hour':case'hrs':case'hr':case'h':return n*h;case'minutes':case'minute':case'mins':case'min':case'm':return n*m;case'seconds':case'second':case'secs':case'sec':case's':return n*s;case'milliseconds':case'millisecond':case'msecs':case'msec':case'ms':return n;default:return undefined;}}function fmtShort(ms){var msAbs=Math.abs(ms);if(msAbs>=d){return Math.round(ms/d)+'d';}if(msAbs>=h){return Math.round(ms/h)+'h';}if(msAbs>=m){return Math.round(ms/m)+'m';}if(msAbs>=s){return Math.round(ms/s)+'s';}return ms+'ms';}function fmtLong(ms){var msAbs=Math.abs(ms);if(msAbs>=d){return plural(ms,msAbs,d,'day');}if(msAbs>=h){return plural(ms,msAbs,h,'hour');}if(msAbs>=m){return plural(ms,msAbs,m,'minute');}if(msAbs>=s){return plural(ms,msAbs,s,'second');}return ms+' ms';}function plural(ms,msAbs,n,name){var isPlural=msAbs>=n*1.5;return Math.round(ms/n)+' '+name+(isPlural?'s':'');}},9938:function(module,__unusedexports,__webpack_require__){"use strict";module.exports=self=>__webpack_require__(7968)(self);},9946:function(module,exports,__webpack_require__){"use strict";const protons=__webpack_require__(817);const rpcProto=protons(__webpack_require__(8732));const topicDescriptorProto=protons(__webpack_require__(8233));exports=module.exports;exports.rpc=rpcProto;exports.td=topicDescriptorProto;},9955:function(module){var asyncTag='[object AsyncFunction]',funcTag='[object Function]',genTag='[object GeneratorFunction]',nullTag='[object Null]',proxyTag='[object Proxy]',undefinedTag='[object Undefined]';var freeGlobal=typeof global=='object'&&global&&global.Object===Object&&global;var freeSelf=typeof self=='object'&&self&&self.Object===Object&&self;var root=freeGlobal||freeSelf||Function('return this')();var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;var nativeObjectToString=objectProto.toString;var Symbol=root.Symbol,symToStringTag=Symbol?Symbol.toStringTag:undefined;function baseGetTag(value){if(value==null){return value===undefined?undefinedTag:nullTag;}return symToStringTag&&symToStringTag in Object(value)?getRawTag(value):objectToString(value);}function getRawTag(value){var isOwn=hasOwnProperty.call(value,symToStringTag),tag=value[symToStringTag];try{value[symToStringTag]=undefined;var unmasked=true;}catch(e){}var result=nativeObjectToString.call(value);if(unmasked){if(isOwn){value[symToStringTag]=tag;}else{delete value[symToStringTag];}}return result;}function objectToString(value){return nativeObjectToString.call(value);}function isFunction(value){if(!isObject(value)){return false;}var tag=baseGetTag(value);return tag==funcTag||tag==genTag||tag==asyncTag||tag==proxyTag;}function isObject(value){var type=typeof value;return value!=null&&(type=='object'||type=='function');}module.exports=isFunction;},9957:function(module){var forge={};var aes=forge.aes={};var md=forge.md={};var pki=forge.pki={};var rsa=forge.pki.rsa=forge.rsa={};var util=forge.util={};module.exports=function(opts){if(!opts)opts={};if(typeof opts.bits=='undefined')opts.bits=2048;var keypair=forge.rsa.generateKeyPair(opts);keypair={public:fix(forge.pki.publicKeyToRSAPublicKeyPem(keypair.publicKey,72)),private:fix(forge.pki.privateKeyToPem(keypair.privateKey,72))};return keypair;};function fix(str){return str.replace(/\r/g,'')+'\n';}util.fillString=function(c,n){var s='';while(n>0){if(n&1){s+=c;}n>>>=1;if(n>0){c+=c;}}return s;};var sha1=forge.sha1=forge.md.sha1={};var _padding=null;var _initialized=false;var _init=function(){_padding=String.fromCharCode(128);_padding+=forge.util.fillString(String.fromCharCode(0x00),64);_initialized=true;};var _update=function(s,w,bytes){var t,a,b,c,d,e,f,i;var len=bytes.length();while(len>=64){a=s.h0;b=s.h1;c=s.h2;d=s.h3;e=s.h4;for(i=0;i<16;++i){t=bytes.getInt32();w[i]=t;f=d^b&(c^d);t=(a<<5|a>>>27)+f+e+0x5A827999+t;e=d;d=c;c=b<<30|b>>>2;b=a;a=t;}for(;i<20;++i){t=w[i-3]^w[i-8]^w[i-14]^w[i-16];t=t<<1|t>>>31;w[i]=t;f=d^b&(c^d);t=(a<<5|a>>>27)+f+e+0x5A827999+t;e=d;d=c;c=b<<30|b>>>2;b=a;a=t;}for(;i<32;++i){t=w[i-3]^w[i-8]^w[i-14]^w[i-16];t=t<<1|t>>>31;w[i]=t;f=b^c^d;t=(a<<5|a>>>27)+f+e+0x6ED9EBA1+t;e=d;d=c;c=b<<30|b>>>2;b=a;a=t;}for(;i<40;++i){t=w[i-6]^w[i-16]^w[i-28]^w[i-32];t=t<<2|t>>>30;w[i]=t;f=b^c^d;t=(a<<5|a>>>27)+f+e+0x6ED9EBA1+t;e=d;d=c;c=b<<30|b>>>2;b=a;a=t;}for(;i<60;++i){t=w[i-6]^w[i-16]^w[i-28]^w[i-32];t=t<<2|t>>>30;w[i]=t;f=b&c|d&(b^c);t=(a<<5|a>>>27)+f+e+0x8F1BBCDC+t;e=d;d=c;c=b<<30|b>>>2;b=a;a=t;}for(;i<80;++i){t=w[i-6]^w[i-16]^w[i-28]^w[i-32];t=t<<2|t>>>30;w[i]=t;f=b^c^d;t=(a<<5|a>>>27)+f+e+0xCA62C1D6+t;e=d;d=c;c=b<<30|b>>>2;b=a;a=t;}s.h0+=a;s.h1+=b;s.h2+=c;s.h3+=d;s.h4+=e;len-=64;}};sha1.create=function(){if(!_initialized){_init();}var _state=null;var _input=forge.util.createBuffer();var _w=new Array(80);var md={algorithm:'sha1',blockLength:64,digestLength:20,messageLength:0};md.start=function(){md.messageLength=0;_input=forge.util.createBuffer();_state={h0:0x67452301,h1:0xEFCDAB89,h2:0x98BADCFE,h3:0x10325476,h4:0xC3D2E1F0};};md.start();md.update=function(msg,encoding){if(encoding==='utf8'){msg=forge.util.encodeUtf8(msg);}md.messageLength+=msg.length;_input.putBytes(msg);_update(_state,_w,_input);if(_input.read>2048||_input.length()===0){_input.compact();}};md.digest=function(){var len=md.messageLength;var padBytes=forge.util.createBuffer();padBytes.putBytes(_input.bytes());padBytes.putBytes(_padding.substr(0,64-(len+8)%64));padBytes.putInt32(len>>>29&0xFF);padBytes.putInt32(len<<3&0xFFFFFFFF);var s2={h0:_state.h0,h1:_state.h1,h2:_state.h2,h3:_state.h3,h4:_state.h4};_update(s2,_w,padBytes);var rval=forge.util.createBuffer();rval.putInt32(s2.h0);rval.putInt32(s2.h1);rval.putInt32(s2.h2);rval.putInt32(s2.h3);rval.putInt32(s2.h4);return rval;};return md;};util.ByteBuffer=function(b){this.data=b||'';this.read=0;};util.ByteBuffer.prototype.length=function(){return this.data.length-this.read;};util.ByteBuffer.prototype.isEmpty=function(){return this.data.length-this.read===0;};util.ByteBuffer.prototype.putByte=function(b){this.data+=String.fromCharCode(b);};util.ByteBuffer.prototype.fillWithByte=function(b,n){b=String.fromCharCode(b);var d=this.data;while(n>0){if(n&1){d+=b;}n>>>=1;if(n>0){b+=b;}}this.data=d;};util.ByteBuffer.prototype.putBytes=function(bytes){this.data+=bytes;};util.ByteBuffer.prototype.putString=function(str){this.data+=util.encodeUtf8(str);};util.ByteBuffer.prototype.putInt16=function(i){this.data+=String.fromCharCode(i>>8&0xFF)+String.fromCharCode(i&0xFF);};util.ByteBuffer.prototype.putInt24=function(i){this.data+=String.fromCharCode(i>>16&0xFF)+String.fromCharCode(i>>8&0xFF)+String.fromCharCode(i&0xFF);};util.ByteBuffer.prototype.putInt32=function(i){this.data+=String.fromCharCode(i>>24&0xFF)+String.fromCharCode(i>>16&0xFF)+String.fromCharCode(i>>8&0xFF)+String.fromCharCode(i&0xFF);};util.ByteBuffer.prototype.putInt16Le=function(i){this.data+=String.fromCharCode(i&0xFF)+String.fromCharCode(i>>8&0xFF);};util.ByteBuffer.prototype.putInt24Le=function(i){this.data+=String.fromCharCode(i&0xFF)+String.fromCharCode(i>>8&0xFF)+String.fromCharCode(i>>16&0xFF);};util.ByteBuffer.prototype.putInt32Le=function(i){this.data+=String.fromCharCode(i&0xFF)+String.fromCharCode(i>>8&0xFF)+String.fromCharCode(i>>16&0xFF)+String.fromCharCode(i>>24&0xFF);};util.ByteBuffer.prototype.putInt=function(i,n){do{n-=8;this.data+=String.fromCharCode(i>>n&0xFF);}while(n>0);};util.ByteBuffer.prototype.putBuffer=function(buffer){this.data+=buffer.getBytes();};util.ByteBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++);};util.ByteBuffer.prototype.getInt16=function(){var rval=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);this.read+=2;return rval;};util.ByteBuffer.prototype.getInt24=function(){var rval=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);this.read+=3;return rval;};util.ByteBuffer.prototype.getInt32=function(){var rval=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);this.read+=4;return rval;};util.ByteBuffer.prototype.getInt16Le=function(){var rval=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;this.read+=2;return rval;};util.ByteBuffer.prototype.getInt24Le=function(){var rval=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;this.read+=3;return rval;};util.ByteBuffer.prototype.getInt32Le=function(){var rval=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;this.read+=4;return rval;};util.ByteBuffer.prototype.getInt=function(n){var rval=0;do{rval=(rval<<n)+this.data.charCodeAt(this.read++);n-=8;}while(n>0);return rval;};util.ByteBuffer.prototype.getBytes=function(count){var rval;if(count){count=Math.min(this.length(),count);rval=this.data.slice(this.read,this.read+count);this.read+=count;}else if(count===0){rval='';}else{rval=this.read===0?this.data:this.data.slice(this.read);this.clear();}return rval;};util.ByteBuffer.prototype.bytes=function(count){return typeof count==='undefined'?this.data.slice(this.read):this.data.slice(this.read,this.read+count);};util.ByteBuffer.prototype.at=function(i){return this.data.charCodeAt(this.read+i);};util.ByteBuffer.prototype.setAt=function(i,b){this.data=this.data.substr(0,this.read+i)+String.fromCharCode(b)+this.data.substr(this.read+i+1);};util.ByteBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1);};util.ByteBuffer.prototype.copy=function(){var c=util.createBuffer(this.data);c.read=this.read;return c;};util.ByteBuffer.prototype.compact=function(){if(this.read>0){this.data=this.data.slice(this.read);this.read=0;}};util.ByteBuffer.prototype.clear=function(){this.data='';this.read=0;};util.ByteBuffer.prototype.truncate=function(count){var len=Math.max(0,this.length()-count);this.data=this.data.substr(this.read,len);this.read=0;};util.ByteBuffer.prototype.toHex=function(){var rval='';for(var i=this.read;i<this.data.length;++i){var b=this.data.charCodeAt(i);if(b<16){rval+='0';}rval+=b.toString(16);}return rval;};util.ByteBuffer.prototype.toString=function(){return util.decodeUtf8(this.bytes());};util.createBuffer=function(input,encoding){encoding=encoding||'raw';if(input!==undefined&&encoding==='utf8'){input=util.encodeUtf8(input);}return new util.ByteBuffer(input);};var prng=forge.prng={};var crypto=null;prng.create=function(plugin){var ctx={plugin:plugin,key:null,seed:null,time:null,reseeds:0,generated:0};var md=plugin.md;var pools=new Array(32);for(var i=0;i<32;++i){pools[i]=md.create();}ctx.pools=pools;ctx.pool=0;ctx.generate=function(count,callback){if(!callback){return ctx.generateSync(count);}var cipher=ctx.plugin.cipher;var increment=ctx.plugin.increment;var formatKey=ctx.plugin.formatKey;var formatSeed=ctx.plugin.formatSeed;var b=forge.util.createBuffer();generate();function generate(err){if(err){return callback(err);}if(b.length()>=count){return callback(null,b.getBytes(count));}if(ctx.generated>=1048576){var now=+new Date();if(ctx.time===null||now-ctx.time>100){ctx.key=null;}}if(ctx.key===null){return _reseed(generate);}var bytes=cipher(ctx.key,ctx.seed);ctx.generated+=bytes.length;b.putBytes(bytes);ctx.key=formatKey(cipher(ctx.key,increment(ctx.seed)));ctx.seed=formatSeed(cipher(ctx.key,ctx.seed));forge.util.setImmediate(generate);}};ctx.generateSync=function(count){var cipher=ctx.plugin.cipher;var increment=ctx.plugin.increment;var formatKey=ctx.plugin.formatKey;var formatSeed=ctx.plugin.formatSeed;var b=forge.util.createBuffer();while(b.length()<count){if(ctx.generated>=1048576){var now=+new Date();if(ctx.time===null||now-ctx.time>100){ctx.key=null;}}if(ctx.key===null){_reseedSync();}var bytes=cipher(ctx.key,ctx.seed);ctx.generated+=bytes.length;b.putBytes(bytes);ctx.key=formatKey(cipher(ctx.key,increment(ctx.seed)));ctx.seed=formatSeed(cipher(ctx.key,ctx.seed));}return b.getBytes(count);};function _reseed(callback){if(ctx.pools[0].messageLength>=32){_seed();return callback();}var needed=32-ctx.pools[0].messageLength<<5;ctx.seedFile(needed,function(err,bytes){if(err){return callback(err);}ctx.collect(bytes);_seed();callback();});}function _reseedSync(){if(ctx.pools[0].messageLength>=32){return _seed();}var needed=32-ctx.pools[0].messageLength<<5;ctx.collect(ctx.seedFileSync(needed));_seed();}function _seed(){var md=forge.md.sha1.create();md.update(ctx.pools[0].digest().getBytes());ctx.pools[0].start();var k=1;for(var i=1;i<32;++i){k=k===31?0x80000000:k<<2;if(k%ctx.reseeds===0){md.update(ctx.pools[i].digest().getBytes());ctx.pools[i].start();}}var keyBytes=md.digest().getBytes();md.start();md.update(keyBytes);var seedBytes=md.digest().getBytes();ctx.key=ctx.plugin.formatKey(keyBytes);ctx.seed=ctx.plugin.formatSeed(seedBytes);++ctx.reseeds;ctx.generated=0;ctx.time=+new Date();}function defaultSeedFile(needed){var b=forge.util.createBuffer();if(typeof window!=='undefined'&&window.crypto&&window.crypto.getRandomValues){var entropy=new Uint32Array(needed/4);try{window.crypto.getRandomValues(entropy);for(var i=0;i<entropy.length;++i){b.putInt32(entropy[i]);}}catch(e){}}if(b.length()<needed){var hi,lo,next;var seed=Math.floor(Math.random()*0xFFFF);while(b.length()<needed){lo=16807*(seed&0xFFFF);hi=16807*(seed>>16);lo+=(hi&0x7FFF)<<16;lo+=hi>>15;lo=(lo&0x7FFFFFFF)+(lo>>31);seed=lo&0xFFFFFFFF;for(var i=0;i<3;++i){next=seed>>>(i<<3);next^=Math.floor(Math.random()*0xFF);b.putByte(String.fromCharCode(next&0xFF));}}}return b.getBytes();}if(crypto){ctx.seedFile=function(needed,callback){crypto.randomBytes(needed,function(err,bytes){if(err){return callback(err);}callback(null,bytes.toString());});};ctx.seedFileSync=function(needed){return crypto.randomBytes(needed).toString();};}else{ctx.seedFile=function(needed,callback){try{callback(null,defaultSeedFile(needed));}catch(e){callback(e);}};ctx.seedFileSync=defaultSeedFile;}ctx.collect=function(bytes){var count=bytes.length;for(var i=0;i<count;++i){ctx.pools[ctx.pool].update(bytes.substr(i,1));ctx.pool=ctx.pool===31?0:ctx.pool+1;}};ctx.collectInt=function(i,n){var bytes='';for(var x=0;x<n;x+=8){bytes+=String.fromCharCode(i>>x&0xFF);}ctx.collect(bytes);};ctx.registerWorker=function(worker){if(worker===self){ctx.seedFile=function(needed,callback){function listener(e){var data=e.data;if(data.forge&&data.forge.prng){self.removeEventListener('message',listener);callback(data.forge.prng.err,data.forge.prng.bytes);}}self.addEventListener('message',listener);self.postMessage({forge:{prng:{needed:needed}}});};}else{function listener(e){var data=e.data;if(data.forge&&data.forge.prng){ctx.seedFile(data.forge.prng.needed,function(err,bytes){worker.postMessage({forge:{prng:{err:err,bytes:bytes}}});});}}worker.addEventListener('message',listener);}};return ctx;};var init=false;var Nb=4;var sbox;var isbox;var rcon;var mix;var imix;var initialize=function(){init=true;rcon=[0x00,0x01,0x02,0x04,0x08,0x10,0x20,0x40,0x80,0x1B,0x36];var xtime=new Array(256);for(var i=0;i<128;++i){xtime[i]=i<<1;xtime[i+128]=i+128<<1^0x11B;}sbox=new Array(256);isbox=new Array(256);mix=new Array(4);imix=new Array(4);for(var i=0;i<4;++i){mix[i]=new Array(256);imix[i]=new Array(256);}var e=0,ei=0,e2,e4,e8,sx,sx2,me,ime;for(var i=0;i<256;++i){sx=ei^ei<<1^ei<<2^ei<<3^ei<<4;sx=sx>>8^sx&255^0x63;sbox[e]=sx;isbox[sx]=e;sx2=xtime[sx];e2=xtime[e];e4=xtime[e2];e8=xtime[e4];me=sx2<<24^sx<<16^sx<<8^(sx^sx2);ime=(e2^e4^e8)<<24^(e^e8)<<16^(e^e4^e8)<<8^(e^e2^e8);for(var n=0;n<4;++n){mix[n][e]=me;imix[n][sx]=ime;me=me<<24|me>>>8;ime=ime<<24|ime>>>8;}if(e===0){e=ei=1;}else{e=e2^xtime[xtime[xtime[e2^e8]]];ei^=xtime[xtime[ei]];}}};var expandKey=function(key,decrypt){var w=key.slice(0);var temp,iNk=1;var Nk=w.length;var Nr1=Nk+6+1;var end=Nb*Nr1;for(var i=Nk;i<end;++i){temp=w[i-1];if(i%Nk===0){temp=sbox[temp>>>16&255]<<24^sbox[temp>>>8&255]<<16^sbox[temp&255]<<8^sbox[temp>>>24]^rcon[iNk]<<24;iNk++;}else if(Nk>6&&i%Nk==4){temp=sbox[temp>>>24]<<24^sbox[temp>>>16&255]<<16^sbox[temp>>>8&255]<<8^sbox[temp&255];}w[i]=w[i-Nk]^temp;}if(decrypt){var tmp;var m0=imix[0];var m1=imix[1];var m2=imix[2];var m3=imix[3];var wnew=w.slice(0);var end=w.length;for(var i=0,wi=end-Nb;i<end;i+=Nb,wi-=Nb){if(i===0||i===end-Nb){wnew[i]=w[wi];wnew[i+1]=w[wi+3];wnew[i+2]=w[wi+2];wnew[i+3]=w[wi+1];}else{for(var n=0;n<Nb;++n){tmp=w[wi+n];wnew[i+(3&-n)]=m0[sbox[tmp>>>24]]^m1[sbox[tmp>>>16&255]]^m2[sbox[tmp>>>8&255]]^m3[sbox[tmp&255]];}}}w=wnew;}return w;};forge.aes._expandKey=function(key,decrypt){if(!init){initialize();}return expandKey(key,decrypt);};var _updateBlock=function(w,input,output,decrypt){var Nr=w.length/4-1;var m0,m1,m2,m3,sub;if(decrypt){m0=imix[0];m1=imix[1];m2=imix[2];m3=imix[3];sub=isbox;}else{m0=mix[0];m1=mix[1];m2=mix[2];m3=mix[3];sub=sbox;}var a,b,c,d,a2,b2,c2;a=input[0]^w[0];b=input[decrypt?3:1]^w[1];c=input[2]^w[2];d=input[decrypt?1:3]^w[3];var i=3;for(var round=1;round<Nr;++round){a2=m0[a>>>24]^m1[b>>>16&255]^m2[c>>>8&255]^m3[d&255]^w[++i];b2=m0[b>>>24]^m1[c>>>16&255]^m2[d>>>8&255]^m3[a&255]^w[++i];c2=m0[c>>>24]^m1[d>>>16&255]^m2[a>>>8&255]^m3[b&255]^w[++i];d=m0[d>>>24]^m1[a>>>16&255]^m2[b>>>8&255]^m3[c&255]^w[++i];a=a2;b=b2;c=c2;}output[0]=sub[a>>>24]<<24^sub[b>>>16&255]<<16^sub[c>>>8&255]<<8^sub[d&255]^w[++i];output[decrypt?3:1]=sub[b>>>24]<<24^sub[c>>>16&255]<<16^sub[d>>>8&255]<<8^sub[a&255]^w[++i];output[2]=sub[c>>>24]<<24^sub[d>>>16&255]<<16^sub[a>>>8&255]<<8^sub[b&255]^w[++i];output[decrypt?1:3]=sub[d>>>24]<<24^sub[a>>>16&255]<<16^sub[b>>>8&255]<<8^sub[c&255]^w[++i];};forge.aes._updateBlock=_updateBlock;var prng_aes={};var _prng_aes_output=new Array(4);var _prng_aes_buffer=forge.util.createBuffer();prng_aes.formatKey=function(key){var tmp=forge.util.createBuffer(key);key=new Array(4);key[0]=tmp.getInt32();key[1]=tmp.getInt32();key[2]=tmp.getInt32();key[3]=tmp.getInt32();return forge.aes._expandKey(key,false);};prng_aes.formatSeed=function(seed){var tmp=forge.util.createBuffer(seed);seed=new Array(4);seed[0]=tmp.getInt32();seed[1]=tmp.getInt32();seed[2]=tmp.getInt32();seed[3]=tmp.getInt32();return seed;};prng_aes.cipher=function(key,seed){forge.aes._updateBlock(key,seed,_prng_aes_output,false);_prng_aes_buffer.putInt32(_prng_aes_output[0]);_prng_aes_buffer.putInt32(_prng_aes_output[1]);_prng_aes_buffer.putInt32(_prng_aes_output[2]);_prng_aes_buffer.putInt32(_prng_aes_output[3]);return _prng_aes_buffer.getBytes();};prng_aes.increment=function(seed){++seed[3];return seed;};prng_aes.md=forge.md.sha1;var _ctx=forge.prng.create(prng_aes);if(typeof window=='undefined'||!window.crypto||!window.crypto.getRandomValues){if(typeof window==='undefined'||window.document===undefined){}_ctx.collectInt(+new Date(),32);if(typeof navigator!=='undefined'){var _navBytes='';for(var key in navigator){try{if(typeof navigator[key]=='string'){_navBytes+=navigator[key];}}catch(e){}}_ctx.collect(_navBytes);_navBytes=null;}}forge.random=_ctx;forge.random.getBytes=function(count,callback){return forge.random.generate(count,callback);};forge.pki.rsa.createKeyPairGenerationState=function(bits,e){if(typeof bits==='string'){bits=parseInt(bits,10);}bits=bits||1024;var rng={nextBytes:function(x){var b=forge.random.getBytes(x.length);for(var i=0;i<x.length;++i){x[i]=b.charCodeAt(i);}}};var rval={state:0,bits:bits,rng:rng,eInt:e||65537,e:new BigInteger(null),p:null,q:null,qBits:bits>>1,pBits:bits-(bits>>1),pqState:0,num:null,keys:null};rval.e.fromInt(rval.eInt);return rval;};var dbits;var canary=0xdeadbeefcafe;var j_lm=(canary&0xffffff)==0xefcafe;function BigInteger(a,b,c){this.data=[];if(a!=null)if("number"==typeof a)this.fromNumber(a,b,c);else if(b==null&&"string"!=typeof a)this.fromString(a,256);else this.fromString(a,b);}function nbi(){return new BigInteger(null);}function am1(i,x,w,j,c,n){while(--n>=0){var v=x*this.data[i++]+w.data[j]+c;c=Math.floor(v/0x4000000);w.data[j++]=v&0x3ffffff;}return c;}function am2(i,x,w,j,c,n){var xl=x&0x7fff,xh=x>>15;while(--n>=0){var l=this.data[i]&0x7fff;var h=this.data[i++]>>15;var m=xh*l+h*xl;l=xl*l+((m&0x7fff)<<15)+w.data[j]+(c&0x3fffffff);c=(l>>>30)+(m>>>15)+xh*h+(c>>>30);w.data[j++]=l&0x3fffffff;}return c;}function am3(i,x,w,j,c,n){var xl=x&0x3fff,xh=x>>14;while(--n>=0){var l=this.data[i]&0x3fff;var h=this.data[i++]>>14;var m=xh*l+h*xl;l=xl*l+((m&0x3fff)<<14)+w.data[j]+c;c=(l>>28)+(m>>14)+xh*h;w.data[j++]=l&0xfffffff;}return c;}if(typeof navigator==='undefined'){BigInteger.prototype.am=am3;dbits=28;}else if(j_lm&&navigator.appName=="Microsoft Internet Explorer"){BigInteger.prototype.am=am2;dbits=30;}else if(j_lm&&navigator.appName!="Netscape"){BigInteger.prototype.am=am1;dbits=26;}else{BigInteger.prototype.am=am3;dbits=28;}BigInteger.prototype.DB=dbits;BigInteger.prototype.DM=(1<<dbits)-1;BigInteger.prototype.DV=1<<dbits;var BI_FP=52;BigInteger.prototype.FV=Math.pow(2,BI_FP);BigInteger.prototype.F1=BI_FP-dbits;BigInteger.prototype.F2=2*dbits-BI_FP;var BI_RM="0123456789abcdefghijklmnopqrstuvwxyz";var BI_RC=new Array();var rr,vv;rr="0".charCodeAt(0);for(vv=0;vv<=9;++vv)BI_RC[rr++]=vv;rr="a".charCodeAt(0);for(vv=10;vv<36;++vv)BI_RC[rr++]=vv;rr="A".charCodeAt(0);for(vv=10;vv<36;++vv)BI_RC[rr++]=vv;function int2char(n){return BI_RM.charAt(n);}function intAt(s,i){var c=BI_RC[s.charCodeAt(i)];return c==null?-1:c;}function bnpCopyTo(r){for(var i=this.t-1;i>=0;--i)r.data[i]=this.data[i];r.t=this.t;r.s=this.s;}function bnpFromInt(x){this.t=1;this.s=x<0?-1:0;if(x>0)this.data[0]=x;else if(x<-1)this.data[0]=x+DV;else this.t=0;}function nbv(i){var r=nbi();r.fromInt(i);return r;}function bnpFromString(s,b){var k;if(b==16)k=4;else if(b==8)k=3;else if(b==256)k=8;else if(b==2)k=1;else if(b==32)k=5;else if(b==4)k=2;else{this.fromRadix(s,b);return;}this.t=0;this.s=0;var i=s.length,mi=false,sh=0;while(--i>=0){var x=k==8?s[i]&0xff:intAt(s,i);if(x<0){if(s.charAt(i)=="-")mi=true;continue;}mi=false;if(sh==0)this.data[this.t++]=x;else if(sh+k>this.DB){this.data[this.t-1]|=(x&(1<<this.DB-sh)-1)<<sh;this.data[this.t++]=x>>this.DB-sh;}else this.data[this.t-1]|=x<<sh;sh+=k;if(sh>=this.DB)sh-=this.DB;}if(k==8&&(s[0]&0x80)!=0){this.s=-1;if(sh>0)this.data[this.t-1]|=(1<<this.DB-sh)-1<<sh;}this.clamp();if(mi)BigInteger.ZERO.subTo(this,this);}function bnpClamp(){var c=this.s&this.DM;while(this.t>0&&this.data[this.t-1]==c)--this.t;}function bnToString(b){if(this.s<0)return"-"+this.negate().toString(b);var k;if(b==16)k=4;else if(b==8)k=3;else if(b==2)k=1;else if(b==32)k=5;else if(b==4)k=2;else return this.toRadix(b);var km=(1<<k)-1,d,m=false,r="",i=this.t;var p=this.DB-i*this.DB%k;if(i-->0){if(p<this.DB&&(d=this.data[i]>>p)>0){m=true;r=int2char(d);}while(i>=0){if(p<k){d=(this.data[i]&(1<<p)-1)<<k-p;d|=this.data[--i]>>(p+=this.DB-k);}else{d=this.data[i]>>(p-=k)&km;if(p<=0){p+=this.DB;--i;}}if(d>0)m=true;if(m)r+=int2char(d);}}return m?r:"0";}function bnNegate(){var r=nbi();BigInteger.ZERO.subTo(this,r);return r;}function bnAbs(){return this.s<0?this.negate():this;}function bnCompareTo(a){var r=this.s-a.s;if(r!=0)return r;var i=this.t;r=i-a.t;if(r!=0)return this.s<0?-r:r;while(--i>=0)if((r=this.data[i]-a.data[i])!=0)return r;return 0;}function nbits(x){var r=1,t;if((t=x>>>16)!=0){x=t;r+=16;}if((t=x>>8)!=0){x=t;r+=8;}if((t=x>>4)!=0){x=t;r+=4;}if((t=x>>2)!=0){x=t;r+=2;}if((t=x>>1)!=0){x=t;r+=1;}return r;}function bnBitLength(){if(this.t<=0)return 0;return this.DB*(this.t-1)+nbits(this.data[this.t-1]^this.s&this.DM);}function bnpDLShiftTo(n,r){var i;for(i=this.t-1;i>=0;--i)r.data[i+n]=this.data[i];for(i=n-1;i>=0;--i)r.data[i]=0;r.t=this.t+n;r.s=this.s;}function bnpDRShiftTo(n,r){for(var i=n;i<this.t;++i)r.data[i-n]=this.data[i];r.t=Math.max(this.t-n,0);r.s=this.s;}function bnpLShiftTo(n,r){var bs=n%this.DB;var cbs=this.DB-bs;var bm=(1<<cbs)-1;var ds=Math.floor(n/this.DB),c=this.s<<bs&this.DM,i;for(i=this.t-1;i>=0;--i){r.data[i+ds+1]=this.data[i]>>cbs|c;c=(this.data[i]&bm)<<bs;}for(i=ds-1;i>=0;--i)r.data[i]=0;r.data[ds]=c;r.t=this.t+ds+1;r.s=this.s;r.clamp();}function bnpRShiftTo(n,r){r.s=this.s;var ds=Math.floor(n/this.DB);if(ds>=this.t){r.t=0;return;}var bs=n%this.DB;var cbs=this.DB-bs;var bm=(1<<bs)-1;r.data[0]=this.data[ds]>>bs;for(var i=ds+1;i<this.t;++i){r.data[i-ds-1]|=(this.data[i]&bm)<<cbs;r.data[i-ds]=this.data[i]>>bs;}if(bs>0)r.data[this.t-ds-1]|=(this.s&bm)<<cbs;r.t=this.t-ds;r.clamp();}function bnpSubTo(a,r){var i=0,c=0,m=Math.min(a.t,this.t);while(i<m){c+=this.data[i]-a.data[i];r.data[i++]=c&this.DM;c>>=this.DB;}if(a.t<this.t){c-=a.s;while(i<this.t){c+=this.data[i];r.data[i++]=c&this.DM;c>>=this.DB;}c+=this.s;}else{c+=this.s;while(i<a.t){c-=a.data[i];r.data[i++]=c&this.DM;c>>=this.DB;}c-=a.s;}r.s=c<0?-1:0;if(c<-1)r.data[i++]=this.DV+c;else if(c>0)r.data[i++]=c;r.t=i;r.clamp();}function bnpMultiplyTo(a,r){var x=this.abs(),y=a.abs();var i=x.t;r.t=i+y.t;while(--i>=0)r.data[i]=0;for(i=0;i<y.t;++i)r.data[i+x.t]=x.am(0,y.data[i],r,i,0,x.t);r.s=0;r.clamp();if(this.s!=a.s)BigInteger.ZERO.subTo(r,r);}function bnpSquareTo(r){var x=this.abs();var i=r.t=2*x.t;while(--i>=0)r.data[i]=0;for(i=0;i<x.t-1;++i){var c=x.am(i,x.data[i],r,2*i,0,1);if((r.data[i+x.t]+=x.am(i+1,2*x.data[i],r,2*i+1,c,x.t-i-1))>=x.DV){r.data[i+x.t]-=x.DV;r.data[i+x.t+1]=1;}}if(r.t>0)r.data[r.t-1]+=x.am(i,x.data[i],r,2*i,0,1);r.s=0;r.clamp();}function bnpDivRemTo(m,q,r){var pm=m.abs();if(pm.t<=0)return;var pt=this.abs();if(pt.t<pm.t){if(q!=null)q.fromInt(0);if(r!=null)this.copyTo(r);return;}if(r==null)r=nbi();var y=nbi(),ts=this.s,ms=m.s;var nsh=this.DB-nbits(pm.data[pm.t-1]);if(nsh>0){pm.lShiftTo(nsh,y);pt.lShiftTo(nsh,r);}else{pm.copyTo(y);pt.copyTo(r);}var ys=y.t;var y0=y.data[ys-1];if(y0==0)return;var yt=y0*(1<<this.F1)+(ys>1?y.data[ys-2]>>this.F2:0);var d1=this.FV/yt,d2=(1<<this.F1)/yt,e=1<<this.F2;var i=r.t,j=i-ys,t=q==null?nbi():q;y.dlShiftTo(j,t);if(r.compareTo(t)>=0){r.data[r.t++]=1;r.subTo(t,r);}BigInteger.ONE.dlShiftTo(ys,t);t.subTo(y,y);while(y.t<ys)y.data[y.t++]=0;while(--j>=0){var qd=r.data[--i]==y0?this.DM:Math.floor(r.data[i]*d1+(r.data[i-1]+e)*d2);if((r.data[i]+=y.am(0,qd,r,j,0,ys))<qd){y.dlShiftTo(j,t);r.subTo(t,r);while(r.data[i]<--qd)r.subTo(t,r);}}if(q!=null){r.drShiftTo(ys,q);if(ts!=ms)BigInteger.ZERO.subTo(q,q);}r.t=ys;r.clamp();if(nsh>0)r.rShiftTo(nsh,r);if(ts<0)BigInteger.ZERO.subTo(r,r);}function bnMod(a){var r=nbi();this.abs().divRemTo(a,null,r);if(this.s<0&&r.compareTo(BigInteger.ZERO)>0)a.subTo(r,r);return r;}function Classic(m){this.m=m;}function cConvert(x){if(x.s<0||x.compareTo(this.m)>=0)return x.mod(this.m);else return x;}function cRevert(x){return x;}function cReduce(x){x.divRemTo(this.m,null,x);}function cMulTo(x,y,r){x.multiplyTo(y,r);this.reduce(r);}function cSqrTo(x,r){x.squareTo(r);this.reduce(r);}Classic.prototype.convert=cConvert;Classic.prototype.revert=cRevert;Classic.prototype.reduce=cReduce;Classic.prototype.mulTo=cMulTo;Classic.prototype.sqrTo=cSqrTo;function bnpInvDigit(){if(this.t<1)return 0;var x=this.data[0];if((x&1)==0)return 0;var y=x&3;y=y*(2-(x&0xf)*y)&0xf;y=y*(2-(x&0xff)*y)&0xff;y=y*(2-((x&0xffff)*y&0xffff))&0xffff;y=y*(2-x*y%this.DV)%this.DV;return y>0?this.DV-y:-y;}function Montgomery(m){this.m=m;this.mp=m.invDigit();this.mpl=this.mp&0x7fff;this.mph=this.mp>>15;this.um=(1<<m.DB-15)-1;this.mt2=2*m.t;}function montConvert(x){var r=nbi();x.abs().dlShiftTo(this.m.t,r);r.divRemTo(this.m,null,r);if(x.s<0&&r.compareTo(BigInteger.ZERO)>0)this.m.subTo(r,r);return r;}function montRevert(x){var r=nbi();x.copyTo(r);this.reduce(r);return r;}function montReduce(x){while(x.t<=this.mt2)x.data[x.t++]=0;for(var i=0;i<this.m.t;++i){var j=x.data[i]&0x7fff;var u0=j*this.mpl+((j*this.mph+(x.data[i]>>15)*this.mpl&this.um)<<15)&x.DM;j=i+this.m.t;x.data[j]+=this.m.am(0,u0,x,i,0,this.m.t);while(x.data[j]>=x.DV){x.data[j]-=x.DV;x.data[++j]++;}}x.clamp();x.drShiftTo(this.m.t,x);if(x.compareTo(this.m)>=0)x.subTo(this.m,x);}function montSqrTo(x,r){x.squareTo(r);this.reduce(r);}function montMulTo(x,y,r){x.multiplyTo(y,r);this.reduce(r);}Montgomery.prototype.convert=montConvert;Montgomery.prototype.revert=montRevert;Montgomery.prototype.reduce=montReduce;Montgomery.prototype.mulTo=montMulTo;Montgomery.prototype.sqrTo=montSqrTo;function bnpIsEven(){return(this.t>0?this.data[0]&1:this.s)==0;}function bnpExp(e,z){if(e>0xffffffff||e<1)return BigInteger.ONE;var r=nbi(),r2=nbi(),g=z.convert(this),i=nbits(e)-1;g.copyTo(r);while(--i>=0){z.sqrTo(r,r2);if((e&1<<i)>0)z.mulTo(r2,g,r);else{var t=r;r=r2;r2=t;}}return z.revert(r);}function bnModPowInt(e,m){var z;if(e<256||m.isEven())z=new Classic(m);else z=new Montgomery(m);return this.exp(e,z);}BigInteger.prototype.copyTo=bnpCopyTo;BigInteger.prototype.fromInt=bnpFromInt;BigInteger.prototype.fromString=bnpFromString;BigInteger.prototype.clamp=bnpClamp;BigInteger.prototype.dlShiftTo=bnpDLShiftTo;BigInteger.prototype.drShiftTo=bnpDRShiftTo;BigInteger.prototype.lShiftTo=bnpLShiftTo;BigInteger.prototype.rShiftTo=bnpRShiftTo;BigInteger.prototype.subTo=bnpSubTo;BigInteger.prototype.multiplyTo=bnpMultiplyTo;BigInteger.prototype.squareTo=bnpSquareTo;BigInteger.prototype.divRemTo=bnpDivRemTo;BigInteger.prototype.invDigit=bnpInvDigit;BigInteger.prototype.isEven=bnpIsEven;BigInteger.prototype.exp=bnpExp;BigInteger.prototype.toString=bnToString;BigInteger.prototype.negate=bnNegate;BigInteger.prototype.abs=bnAbs;BigInteger.prototype.compareTo=bnCompareTo;BigInteger.prototype.bitLength=bnBitLength;BigInteger.prototype.mod=bnMod;BigInteger.prototype.modPowInt=bnModPowInt;BigInteger.ZERO=nbv(0);BigInteger.ONE=nbv(1);function bnClone(){var r=nbi();this.copyTo(r);return r;}function bnIntValue(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;else if(this.t==0)return-1;}else if(this.t==1)return this.data[0];else if(this.t==0)return 0;return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0];}function bnByteValue(){return this.t==0?this.s:this.data[0]<<24>>24;}function bnShortValue(){return this.t==0?this.s:this.data[0]<<16>>16;}function bnpChunkSize(r){return Math.floor(Math.LN2*this.DB/Math.log(r));}function bnSigNum(){if(this.s<0)return-1;else if(this.t<=0||this.t==1&&this.data[0]<=0)return 0;else return 1;}function bnpToRadix(b){if(b==null)b=10;if(this.signum()==0||b<2||b>36)return"0";var cs=this.chunkSize(b);var a=Math.pow(b,cs);var d=nbv(a),y=nbi(),z=nbi(),r="";this.divRemTo(d,y,z);while(y.signum()>0){r=(a+z.intValue()).toString(b).substr(1)+r;y.divRemTo(d,y,z);}return z.intValue().toString(b)+r;}function bnpFromRadix(s,b){this.fromInt(0);if(b==null)b=10;var cs=this.chunkSize(b);var d=Math.pow(b,cs),mi=false,j=0,w=0;for(var i=0;i<s.length;++i){var x=intAt(s,i);if(x<0){if(s.charAt(i)=="-"&&this.signum()==0)mi=true;continue;}w=b*w+x;if(++j>=cs){this.dMultiply(d);this.dAddOffset(w,0);j=0;w=0;}}if(j>0){this.dMultiply(Math.pow(b,j));this.dAddOffset(w,0);}if(mi)BigInteger.ZERO.subTo(this,this);}function bnpFromNumber(a,b,c){if("number"==typeof b){if(a<2)this.fromInt(1);else{this.fromNumber(a,c);if(!this.testBit(a-1))this.bitwiseTo(BigInteger.ONE.shiftLeft(a-1),op_or,this);if(this.isEven())this.dAddOffset(1,0);while(!this.isProbablePrime(b)){this.dAddOffset(2,0);if(this.bitLength()>a)this.subTo(BigInteger.ONE.shiftLeft(a-1),this);}}}else{var x=new Array(),t=a&7;x.length=(a>>3)+1;b.nextBytes(x);if(t>0)x[0]&=(1<<t)-1;else x[0]=0;this.fromString(x,256);}}function bnToByteArray(){var i=this.t,r=new Array();r[0]=this.s;var p=this.DB-i*this.DB%8,d,k=0;if(i-->0){if(p<this.DB&&(d=this.data[i]>>p)!=(this.s&this.DM)>>p)r[k++]=d|this.s<<this.DB-p;while(i>=0){if(p<8){d=(this.data[i]&(1<<p)-1)<<8-p;d|=this.data[--i]>>(p+=this.DB-8);}else{d=this.data[i]>>(p-=8)&0xff;if(p<=0){p+=this.DB;--i;}}if((d&0x80)!=0)d|=-256;if(k==0&&(this.s&0x80)!=(d&0x80))++k;if(k>0||d!=this.s)r[k++]=d;}}return r;}function bnEquals(a){return this.compareTo(a)==0;}function bnMin(a){return this.compareTo(a)<0?this:a;}function bnMax(a){return this.compareTo(a)>0?this:a;}function bnpBitwiseTo(a,op,r){var i,f,m=Math.min(a.t,this.t);for(i=0;i<m;++i)r.data[i]=op(this.data[i],a.data[i]);if(a.t<this.t){f=a.s&this.DM;for(i=m;i<this.t;++i)r.data[i]=op(this.data[i],f);r.t=this.t;}else{f=this.s&this.DM;for(i=m;i<a.t;++i)r.data[i]=op(f,a.data[i]);r.t=a.t;}r.s=op(this.s,a.s);r.clamp();}function op_and(x,y){return x&y;}function bnAnd(a){var r=nbi();this.bitwiseTo(a,op_and,r);return r;}function op_or(x,y){return x|y;}function bnOr(a){var r=nbi();this.bitwiseTo(a,op_or,r);return r;}function op_xor(x,y){return x^y;}function bnXor(a){var r=nbi();this.bitwiseTo(a,op_xor,r);return r;}function op_andnot(x,y){return x&~y;}function bnAndNot(a){var r=nbi();this.bitwiseTo(a,op_andnot,r);return r;}function bnNot(){var r=nbi();for(var i=0;i<this.t;++i)r.data[i]=this.DM&~this.data[i];r.t=this.t;r.s=~this.s;return r;}function bnShiftLeft(n){var r=nbi();if(n<0)this.rShiftTo(-n,r);else this.lShiftTo(n,r);return r;}function bnShiftRight(n){var r=nbi();if(n<0)this.lShiftTo(-n,r);else this.rShiftTo(n,r);return r;}function lbit(x){if(x==0)return-1;var r=0;if((x&0xffff)==0){x>>=16;r+=16;}if((x&0xff)==0){x>>=8;r+=8;}if((x&0xf)==0){x>>=4;r+=4;}if((x&3)==0){x>>=2;r+=2;}if((x&1)==0)++r;return r;}function bnGetLowestSetBit(){for(var i=0;i<this.t;++i)if(this.data[i]!=0)return i*this.DB+lbit(this.data[i]);if(this.s<0)return this.t*this.DB;return-1;}function cbit(x){var r=0;while(x!=0){x&=x-1;++r;}return r;}function bnBitCount(){var r=0,x=this.s&this.DM;for(var i=0;i<this.t;++i)r+=cbit(this.data[i]^x);return r;}function bnTestBit(n){var j=Math.floor(n/this.DB);if(j>=this.t)return this.s!=0;return(this.data[j]&1<<n%this.DB)!=0;}function bnpChangeBit(n,op){var r=BigInteger.ONE.shiftLeft(n);this.bitwiseTo(r,op,r);return r;}function bnSetBit(n){return this.changeBit(n,op_or);}function bnClearBit(n){return this.changeBit(n,op_andnot);}function bnFlipBit(n){return this.changeBit(n,op_xor);}function bnpAddTo(a,r){var i=0,c=0,m=Math.min(a.t,this.t);while(i<m){c+=this.data[i]+a.data[i];r.data[i++]=c&this.DM;c>>=this.DB;}if(a.t<this.t){c+=a.s;while(i<this.t){c+=this.data[i];r.data[i++]=c&this.DM;c>>=this.DB;}c+=this.s;}else{c+=this.s;while(i<a.t){c+=a.data[i];r.data[i++]=c&this.DM;c>>=this.DB;}c+=a.s;}r.s=c<0?-1:0;if(c>0)r.data[i++]=c;else if(c<-1)r.data[i++]=this.DV+c;r.t=i;r.clamp();}function bnAdd(a){var r=nbi();this.addTo(a,r);return r;}function bnSubtract(a){var r=nbi();this.subTo(a,r);return r;}function bnMultiply(a){var r=nbi();this.multiplyTo(a,r);return r;}function bnDivide(a){var r=nbi();this.divRemTo(a,r,null);return r;}function bnRemainder(a){var r=nbi();this.divRemTo(a,null,r);return r;}function bnDivideAndRemainder(a){var q=nbi(),r=nbi();this.divRemTo(a,q,r);return new Array(q,r);}function bnpDMultiply(n){this.data[this.t]=this.am(0,n-1,this,0,0,this.t);++this.t;this.clamp();}function bnpDAddOffset(n,w){if(n==0)return;while(this.t<=w)this.data[this.t++]=0;this.data[w]+=n;while(this.data[w]>=this.DV){this.data[w]-=this.DV;if(++w>=this.t)this.data[this.t++]=0;++this.data[w];}}function NullExp(){}function nNop(x){return x;}function nMulTo(x,y,r){x.multiplyTo(y,r);}function nSqrTo(x,r){x.squareTo(r);}NullExp.prototype.convert=nNop;NullExp.prototype.revert=nNop;NullExp.prototype.mulTo=nMulTo;NullExp.prototype.sqrTo=nSqrTo;function bnPow(e){return this.exp(e,new NullExp());}function bnpMultiplyLowerTo(a,n,r){var i=Math.min(this.t+a.t,n);r.s=0;r.t=i;while(i>0)r.data[--i]=0;var j;for(j=r.t-this.t;i<j;++i)r.data[i+this.t]=this.am(0,a.data[i],r,i,0,this.t);for(j=Math.min(a.t,n);i<j;++i)this.am(0,a.data[i],r,i,0,n-i);r.clamp();}function bnpMultiplyUpperTo(a,n,r){--n;var i=r.t=this.t+a.t-n;r.s=0;while(--i>=0)r.data[i]=0;for(i=Math.max(n-this.t,0);i<a.t;++i)r.data[this.t+i-n]=this.am(n-i,a.data[i],r,0,0,this.t+i-n);r.clamp();r.drShiftTo(1,r);}function Barrett(m){this.r2=nbi();this.q3=nbi();BigInteger.ONE.dlShiftTo(2*m.t,this.r2);this.mu=this.r2.divide(m);this.m=m;}function barrettConvert(x){if(x.s<0||x.t>2*this.m.t)return x.mod(this.m);else if(x.compareTo(this.m)<0)return x;else{var r=nbi();x.copyTo(r);this.reduce(r);return r;}}function barrettRevert(x){return x;}function barrettReduce(x){x.drShiftTo(this.m.t-1,this.r2);if(x.t>this.m.t+1){x.t=this.m.t+1;x.clamp();}this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3);this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);while(x.compareTo(this.r2)<0)x.dAddOffset(1,this.m.t+1);x.subTo(this.r2,x);while(x.compareTo(this.m)>=0)x.subTo(this.m,x);}function barrettSqrTo(x,r){x.squareTo(r);this.reduce(r);}function barrettMulTo(x,y,r){x.multiplyTo(y,r);this.reduce(r);}Barrett.prototype.convert=barrettConvert;Barrett.prototype.revert=barrettRevert;Barrett.prototype.reduce=barrettReduce;Barrett.prototype.mulTo=barrettMulTo;Barrett.prototype.sqrTo=barrettSqrTo;function bnModPow(e,m){var i=e.bitLength(),k,r=nbv(1),z;if(i<=0)return r;else if(i<18)k=1;else if(i<48)k=3;else if(i<144)k=4;else if(i<768)k=5;else k=6;if(i<8)z=new Classic(m);else if(m.isEven())z=new Barrett(m);else z=new Montgomery(m);var g=new Array(),n=3,k1=k-1,km=(1<<k)-1;g[1]=z.convert(this);if(k>1){var g2=nbi();z.sqrTo(g[1],g2);while(n<=km){g[n]=nbi();z.mulTo(g2,g[n-2],g[n]);n+=2;}}var j=e.t-1,w,is1=true,r2=nbi(),t;i=nbits(e.data[j])-1;while(j>=0){if(i>=k1)w=e.data[j]>>i-k1&km;else{w=(e.data[j]&(1<<i+1)-1)<<k1-i;if(j>0)w|=e.data[j-1]>>this.DB+i-k1;}n=k;while((w&1)==0){w>>=1;--n;}if((i-=n)<0){i+=this.DB;--j;}if(is1){g[w].copyTo(r);is1=false;}else{while(n>1){z.sqrTo(r,r2);z.sqrTo(r2,r);n-=2;}if(n>0)z.sqrTo(r,r2);else{t=r;r=r2;r2=t;}z.mulTo(r2,g[w],r);}while(j>=0&&(e.data[j]&1<<i)==0){z.sqrTo(r,r2);t=r;r=r2;r2=t;if(--i<0){i=this.DB-1;--j;}}}return z.revert(r);}function bnGCD(a){var x=this.s<0?this.negate():this.clone();var y=a.s<0?a.negate():a.clone();if(x.compareTo(y)<0){var t=x;x=y;y=t;}var i=x.getLowestSetBit(),g=y.getLowestSetBit();if(g<0)return x;if(i<g)g=i;if(g>0){x.rShiftTo(g,x);y.rShiftTo(g,y);}while(x.signum()>0){if((i=x.getLowestSetBit())>0)x.rShiftTo(i,x);if((i=y.getLowestSetBit())>0)y.rShiftTo(i,y);if(x.compareTo(y)>=0){x.subTo(y,x);x.rShiftTo(1,x);}else{y.subTo(x,y);y.rShiftTo(1,y);}}if(g>0)y.lShiftTo(g,y);return y;}function bnpModInt(n){if(n<=0)return 0;var d=this.DV%n,r=this.s<0?n-1:0;if(this.t>0)if(d==0)r=this.data[0]%n;else for(var i=this.t-1;i>=0;--i)r=(d*r+this.data[i])%n;return r;}function bnModInverse(m){var ac=m.isEven();if(this.isEven()&&ac||m.signum()==0)return BigInteger.ZERO;var u=m.clone(),v=this.clone();var a=nbv(1),b=nbv(0),c=nbv(0),d=nbv(1);while(u.signum()!=0){while(u.isEven()){u.rShiftTo(1,u);if(ac){if(!a.isEven()||!b.isEven()){a.addTo(this,a);b.subTo(m,b);}a.rShiftTo(1,a);}else if(!b.isEven())b.subTo(m,b);b.rShiftTo(1,b);}while(v.isEven()){v.rShiftTo(1,v);if(ac){if(!c.isEven()||!d.isEven()){c.addTo(this,c);d.subTo(m,d);}c.rShiftTo(1,c);}else if(!d.isEven())d.subTo(m,d);d.rShiftTo(1,d);}if(u.compareTo(v)>=0){u.subTo(v,u);if(ac)a.subTo(c,a);b.subTo(d,b);}else{v.subTo(u,v);if(ac)c.subTo(a,c);d.subTo(b,d);}}if(v.compareTo(BigInteger.ONE)!=0)return BigInteger.ZERO;if(d.compareTo(m)>=0)return d.subtract(m);if(d.signum()<0)d.addTo(m,d);else return d;if(d.signum()<0)return d.add(m);else return d;}var lowprimes=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509];var lplim=(1<<26)/lowprimes[lowprimes.length-1];function bnIsProbablePrime(t){var i,x=this.abs();if(x.t==1&&x.data[0]<=lowprimes[lowprimes.length-1]){for(i=0;i<lowprimes.length;++i)if(x.data[0]==lowprimes[i])return true;return false;}if(x.isEven())return false;i=1;while(i<lowprimes.length){var m=lowprimes[i],j=i+1;while(j<lowprimes.length&&m<lplim)m*=lowprimes[j++];m=x.modInt(m);while(i<j)if(m%lowprimes[i++]==0)return false;}return x.millerRabin(t);}function bnpMillerRabin(t){var n1=this.subtract(BigInteger.ONE);var k=n1.getLowestSetBit();if(k<=0)return false;var r=n1.shiftRight(k);t=t+1>>1;if(t>lowprimes.length)t=lowprimes.length;var a=nbi();for(var i=0;i<t;++i){a.fromInt(lowprimes[i]);var y=a.modPow(r,this);if(y.compareTo(BigInteger.ONE)!=0&&y.compareTo(n1)!=0){var j=1;while(j++<k&&y.compareTo(n1)!=0){y=y.modPowInt(2,this);if(y.compareTo(BigInteger.ONE)==0)return false;}if(y.compareTo(n1)!=0)return false;}}return true;}BigInteger.prototype.chunkSize=bnpChunkSize;BigInteger.prototype.toRadix=bnpToRadix;BigInteger.prototype.fromRadix=bnpFromRadix;BigInteger.prototype.fromNumber=bnpFromNumber;BigInteger.prototype.bitwiseTo=bnpBitwiseTo;BigInteger.prototype.changeBit=bnpChangeBit;BigInteger.prototype.addTo=bnpAddTo;BigInteger.prototype.dMultiply=bnpDMultiply;BigInteger.prototype.dAddOffset=bnpDAddOffset;BigInteger.prototype.multiplyLowerTo=bnpMultiplyLowerTo;BigInteger.prototype.multiplyUpperTo=bnpMultiplyUpperTo;BigInteger.prototype.modInt=bnpModInt;BigInteger.prototype.millerRabin=bnpMillerRabin;BigInteger.prototype.clone=bnClone;BigInteger.prototype.intValue=bnIntValue;BigInteger.prototype.byteValue=bnByteValue;BigInteger.prototype.shortValue=bnShortValue;BigInteger.prototype.signum=bnSigNum;BigInteger.prototype.toByteArray=bnToByteArray;BigInteger.prototype.equals=bnEquals;BigInteger.prototype.min=bnMin;BigInteger.prototype.max=bnMax;BigInteger.prototype.and=bnAnd;BigInteger.prototype.or=bnOr;BigInteger.prototype.xor=bnXor;BigInteger.prototype.andNot=bnAndNot;BigInteger.prototype.not=bnNot;BigInteger.prototype.shiftLeft=bnShiftLeft;BigInteger.prototype.shiftRight=bnShiftRight;BigInteger.prototype.getLowestSetBit=bnGetLowestSetBit;BigInteger.prototype.bitCount=bnBitCount;BigInteger.prototype.testBit=bnTestBit;BigInteger.prototype.setBit=bnSetBit;BigInteger.prototype.clearBit=bnClearBit;BigInteger.prototype.flipBit=bnFlipBit;BigInteger.prototype.add=bnAdd;BigInteger.prototype.subtract=bnSubtract;BigInteger.prototype.multiply=bnMultiply;BigInteger.prototype.divide=bnDivide;BigInteger.prototype.remainder=bnRemainder;BigInteger.prototype.divideAndRemainder=bnDivideAndRemainder;BigInteger.prototype.modPow=bnModPow;BigInteger.prototype.modInverse=bnModInverse;BigInteger.prototype.pow=bnPow;BigInteger.prototype.gcd=bnGCD;BigInteger.prototype.isProbablePrime=bnIsProbablePrime;forge.jsbn=forge.jsbn||{};forge.jsbn.BigInteger=BigInteger;var util=forge.util=forge.util||{};if(typeof process==='undefined'||!process.nextTick){if(typeof setImmediate==='function'){util.setImmediate=setImmediate;util.nextTick=function(callback){return setImmediate(callback);};}else{util.setImmediate=function(callback){setTimeout(callback,0);};util.nextTick=util.setImmediate;}}else{util.nextTick=process.nextTick;if(typeof setImmediate==='function'){util.setImmediate=setImmediate;}else{util.setImmediate=util.nextTick;}}var _modPow=function(x,key,pub){var y;if(pub){y=x.modPow(key.e,key.n);}else{if(!key.dP){key.dP=key.d.mod(key.p.subtract(BigInteger.ONE));}if(!key.dQ){key.dQ=key.d.mod(key.q.subtract(BigInteger.ONE));}if(!key.qInv){key.qInv=key.q.modInverse(key.p);}var xp=x.mod(key.p).modPow(key.dP,key.p);var xq=x.mod(key.q).modPow(key.dQ,key.q);while(xp.compareTo(xq)<0){xp=xp.add(key.p);}y=xp.subtract(xq).multiply(key.qInv).mod(key.p).multiply(key.q).add(xq);}return y;};util.encodeUtf8=function(str){return unescape(encodeURIComponent(str));};util.decodeUtf8=function(str){return decodeURIComponent(escape(str));};util.createBuffer=function(input,encoding){encoding=encoding||'raw';if(input!==undefined&&encoding==='utf8'){input=util.encodeUtf8(input);}return new util.ByteBuffer(input);};util.hexToBytes=function(hex){var rval='';var i=0;if(hex.length&1==1){i=1;rval+=String.fromCharCode(parseInt(hex[0],16));}for(;i<hex.length;i+=2){rval+=String.fromCharCode(parseInt(hex.substr(i,2),16));}return rval;};pki.rsa.decrypt=function(ed,key,pub,ml){var k=Math.ceil(key.n.bitLength()/8);if(ed.length!=k){throw{message:'Encrypted message length is invalid.',length:ed.length,expected:k};}var y=new BigInteger(forge.util.createBuffer(ed).toHex(),16);var x=_modPow(y,key,pub);var xhex=x.toString(16);var eb=forge.util.createBuffer();var zeros=k-Math.ceil(xhex.length/2);while(zeros>0){eb.putByte(0x00);--zeros;}eb.putBytes(forge.util.hexToBytes(xhex));if(ml!==false){var first=eb.getByte();var bt=eb.getByte();if(first!==0x00||pub&&bt!==0x00&&bt!==0x01||!pub&&bt!=0x02||pub&&bt===0x00&&typeof ml==='undefined'){throw{message:'Encryption block is invalid.'};}var padNum=0;if(bt===0x00){padNum=k-3-ml;for(var i=0;i<padNum;++i){if(eb.getByte()!==0x00){throw{message:'Encryption block is invalid.'};}}}else if(bt===0x01){padNum=0;while(eb.length()>1){if(eb.getByte()!==0xFF){--eb.read;break;}++padNum;}}else if(bt===0x02){padNum=0;while(eb.length()>1){if(eb.getByte()===0x00){--eb.read;break;}++padNum;}}var zero=eb.getByte();if(zero!==0x00||padNum!==k-3-eb.length()){throw{message:'Encryption block is invalid.'};}}return eb.getBytes();};pki.rsa.encrypt=function(m,key,bt){var pub=bt;var eb=forge.util.createBuffer();var k=Math.ceil(key.n.bitLength()/8);if(bt!==false&&bt!==true){if(m.length>k-11){throw{message:'Message is too long to encrypt.',length:m.length,max:k-11};}eb.putByte(0x00);eb.putByte(bt);var padNum=k-3-m.length;var padByte;if(bt===0x00||bt===0x01){pub=false;padByte=bt===0x00?0x00:0xFF;for(var i=0;i<padNum;++i){eb.putByte(padByte);}}else{pub=true;for(var i=0;i<padNum;++i){padByte=Math.floor(Math.random()*255)+1;eb.putByte(padByte);}}eb.putByte(0x00);}eb.putBytes(m);var x=new BigInteger(eb.toHex(),16);var y=_modPow(x,key,pub);var yhex=y.toString(16);var ed=forge.util.createBuffer();var zeros=k-Math.ceil(yhex.length/2);while(zeros>0){ed.putByte(0x00);--zeros;}ed.putBytes(forge.util.hexToBytes(yhex));return ed.getBytes();};pki.rsa.setPrivateKey=function(n,e,d,p,q,dP,dQ,qInv){var key={n:n,e:e,d:d,p:p,q:q,dP:dP,dQ:dQ,qInv:qInv};key.decrypt=function(data){return pki.rsa.decrypt(data,key,false);};key.sign=function(md,scheme){var bt=false;if(scheme===undefined){scheme={encode:emsaPkcs1v15encode};bt=0x01;}var d=scheme.encode(md,key.n.bitLength());return pki.rsa.encrypt(d,key,bt);};return key;};var _getValueLength=function(b){var b2=b.getByte();if(b2==0x80){return undefined;}var length;var longForm=b2&0x80;if(!longForm){length=b2;}else{length=b.getInt((b2&0x7F)<<3);}return length;};var asn1=forge.asn1=forge.asn1||{};asn1.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30};asn1.Class={UNIVERSAL:0x00,APPLICATION:0x40,CONTEXT_SPECIFIC:0x80,PRIVATE:0xC0};asn1.create=function(tagClass,type,constructed,value){if(value.constructor==Array){var tmp=[];for(var i=0;i<value.length;++i){if(value[i]!==undefined){tmp.push(value[i]);}}value=tmp;}return{tagClass:tagClass,type:type,constructed:constructed,composed:constructed||value.constructor==Array,value:value};};asn1.fromDer=function(bytes){if(bytes.constructor==String){bytes=forge.util.createBuffer(bytes);}if(bytes.length()<2){throw{message:'Too few bytes to parse DER.',bytes:bytes.length()};}var b1=bytes.getByte();var tagClass=b1&0xC0;var type=b1&0x1F;var length=_getValueLength(bytes);if(bytes.length()<length){throw{message:'Too few bytes to read ASN.1 value.',detail:bytes.length()+' < '+length};}var value;var constructed=(b1&0x20)==0x20;var composed=constructed;if(!composed&&tagClass===asn1.Class.UNIVERSAL&&type===asn1.Type.BITSTRING&&length>1){var read=bytes.read;var unused=bytes.getByte();if(unused===0){b1=bytes.getByte();var tc=b1&0xC0;if(tc===asn1.Class.UNIVERSAL||tc===asn1.Class.CONTEXT_SPECIFIC){try{var len=_getValueLength(bytes);composed=len===length-(bytes.read-read);if(composed){++read;--length;}}catch(ex){}}}bytes.read=read;}if(composed){value=[];if(length===undefined){for(;;){if(bytes.bytes(2)===String.fromCharCode(0,0)){bytes.getBytes(2);break;}value.push(asn1.fromDer(bytes));}}else{var start=bytes.length();while(length>0){value.push(asn1.fromDer(bytes));length-=start-bytes.length();start=bytes.length();}}}else{if(length===undefined){throw{message:'Non-constructed ASN.1 object of indefinite length.'};}if(type===asn1.Type.BMPSTRING){value='';for(var i=0;i<length;i+=2){value+=String.fromCharCode(bytes.getInt16());}}else{value=bytes.getBytes(length);}}return asn1.create(tagClass,type,constructed,value);};asn1.toDer=function(obj){var bytes=forge.util.createBuffer();var b1=obj.tagClass|obj.type;var value=forge.util.createBuffer();if(obj.composed){if(obj.constructed){b1|=0x20;}else{value.putByte(0x00);}for(var i=0;i<obj.value.length;++i){if(obj.value[i]!==undefined){value.putBuffer(asn1.toDer(obj.value[i]));}}}else{if(obj.type===asn1.Type.BMPSTRING){for(var i=0;i<obj.value.length;++i){value.putInt16(obj.value.charCodeAt(i));}}else{value.putBytes(obj.value);}}bytes.putByte(b1);if(value.length()<=127){bytes.putByte(value.length()&0x7F);}else{var len=value.length();var lenBytes='';do{lenBytes+=String.fromCharCode(len&0xFF);len=len>>>8;}while(len>0);bytes.putByte(lenBytes.length|0x80);for(var i=lenBytes.length-1;i>=0;--i){bytes.putByte(lenBytes.charCodeAt(i));}}bytes.putBuffer(value);return bytes;};pki.rsa.setPublicKey=function(n,e){var key={n:n,e:e};key.encrypt=function(data){return pki.rsa.encrypt(data,key,0x02);};key.verify=function(digest,signature,scheme){var ml=scheme===undefined?undefined:false;var d=pki.rsa.decrypt(signature,key,true,ml);if(scheme===undefined){var obj=asn1.fromDer(d);return digest===obj.value[1].value;}else{return scheme.verify(digest,d,key.n.bitLength());}};return key;};var GCD_30_DELTA=[6,4,2,4,2,4,6,2];pki.rsa.stepKeyPairGenerationState=function(state,n){var THIRTY=new BigInteger(null);THIRTY.fromInt(30);var deltaIdx=0;var op_or=function(x,y){return x|y;};var t1=+new Date();var t2;var total=0;while(state.keys===null&&(n<=0||total<n)){if(state.state===0){var bits=state.p===null?state.pBits:state.qBits;var bits1=bits-1;if(state.pqState===0){state.num=new BigInteger(bits,state.rng);if(!state.num.testBit(bits1)){state.num.bitwiseTo(BigInteger.ONE.shiftLeft(bits1),op_or,state.num);}state.num.dAddOffset(31-state.num.mod(THIRTY).byteValue(),0);deltaIdx=0;++state.pqState;}else if(state.pqState===1){if(state.num.bitLength()>bits){state.pqState=0;}else if(state.num.isProbablePrime(1)){++state.pqState;}else{state.num.dAddOffset(GCD_30_DELTA[deltaIdx++%8],0);}}else if(state.pqState===2){state.pqState=state.num.subtract(BigInteger.ONE).gcd(state.e).compareTo(BigInteger.ONE)===0?3:0;}else if(state.pqState===3){state.pqState=0;if(state.num.isProbablePrime(10)){if(state.p===null){state.p=state.num;}else{state.q=state.num;}if(state.p!==null&&state.q!==null){++state.state;}}state.num=null;}}else if(state.state===1){if(state.p.compareTo(state.q)<0){state.num=state.p;state.p=state.q;state.q=state.num;}++state.state;}else if(state.state===2){state.p1=state.p.subtract(BigInteger.ONE);state.q1=state.q.subtract(BigInteger.ONE);state.phi=state.p1.multiply(state.q1);++state.state;}else if(state.state===3){if(state.phi.gcd(state.e).compareTo(BigInteger.ONE)===0){++state.state;}else{state.p=null;state.q=null;state.state=0;}}else if(state.state===4){state.n=state.p.multiply(state.q);if(state.n.bitLength()===state.bits){++state.state;}else{state.q=null;state.state=0;}}else if(state.state===5){var d=state.e.modInverse(state.phi);state.keys={privateKey:forge.pki.rsa.setPrivateKey(state.n,state.e,d,state.p,state.q,d.mod(state.p1),d.mod(state.q1),state.q.modInverse(state.p)),publicKey:forge.pki.rsa.setPublicKey(state.n,state.e)};}t2=+new Date();total+=t2-t1;t1=t2;}return state.keys!==null;};function _generateKeyPair(state,options,callback){if(typeof options==='function'){callback=options;options={};}if(false||typeof Worker==='undefined'){function step(){if(forge.pki.rsa.stepKeyPairGenerationState(state,10)){return callback(null,state.keys);}forge.util.setImmediate(step);}return step();}var numWorkers=options.workers||2;var workLoad=options.workLoad||100;var range=workLoad*30/8;var workerScript=options.workerScript||'forge/prime.worker.js';var THIRTY=new BigInteger(null);THIRTY.fromInt(30);var op_or=function(x,y){return x|y;};generate();function generate(){getPrime(state.pBits,function(err,num){if(err){return callback(err);}state.p=num;getPrime(state.qBits,finish);});}function getPrime(bits,callback){var workers=[];for(var i=0;i<numWorkers;++i){workers[i]=new Worker(workerScript);}var running=numWorkers;var num=generateRandom();for(var i=0;i<numWorkers;++i){workers[i].addEventListener('message',workerMessage);}function generateRandom(){var bits1=bits-1;var num=new BigInteger(bits,state.rng);if(!num.testBit(bits1)){num.bitwiseTo(BigInteger.ONE.shiftLeft(bits1),op_or,num);}num.dAddOffset(31-num.mod(THIRTY).byteValue(),0);return num;}var found=false;function workerMessage(e){if(found){return;}--running;var data=e.data;if(data.found){for(var i=0;i<workers.length;++i){workers[i].terminate();}found=true;return callback(null,new BigInteger(data.prime,16));}if(num.bitLength()>bits){num=generateRandom();}var hex=num.toString(16);e.target.postMessage({e:state.eInt,hex:hex,workLoad:workLoad});num.dAddOffset(range,0);}}function finish(err,num){state.q=num;if(state.p.compareTo(state.q)<0){var tmp=state.p;state.p=state.q;state.q=tmp;}state.p1=state.p.subtract(BigInteger.ONE);state.q1=state.q.subtract(BigInteger.ONE);state.phi=state.p1.multiply(state.q1);if(state.phi.gcd(state.e).compareTo(BigInteger.ONE)!==0){state.p=state.q=null;generate();return;}state.n=state.p.multiply(state.q);if(state.n.bitLength()!==state.bits){state.q=null;getPrime(state.qBits,finish);return;}var d=state.e.modInverse(state.phi);state.keys={privateKey:forge.pki.rsa.setPrivateKey(state.n,state.e,d,state.p,state.q,d.mod(state.p1),d.mod(state.q1),state.q.modInverse(state.p)),publicKey:forge.pki.rsa.setPublicKey(state.n,state.e)};callback(null,state.keys);}}pki.rsa.generateKeyPair=function(bits,e,options,callback){if(arguments.length===1){if(typeof bits==='object'){options=bits;bits=undefined;}else if(typeof bits==='function'){callback=bits;bits=undefined;}}else if(arguments.length===2){if(typeof bits==='number'){if(typeof e==='function'){callback=e;}else{options=e;}}else{options=bits;callback=e;bits=undefined;}e=undefined;}else if(arguments.length===3){if(typeof e==='number'){if(typeof options==='function'){callback=options;options=undefined;}}else{callback=options;options=e;e=undefined;}}options=options||{};if(bits===undefined){bits=options.bits||1024;}if(e===undefined){e=options.e||0x10001;}var state=pki.rsa.createKeyPairGenerationState(bits,e);if(!callback){pki.rsa.stepKeyPairGenerationState(state,0);return state.keys;}_generateKeyPair(state,options,callback);};var _bnToBytes=function(b){var hex=b.toString(16);if(hex[0]>='8'){hex='00'+hex;}return forge.util.hexToBytes(hex);};pki.publicKeyToRSAPublicKey=function(key){return asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,true,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,false,_bnToBytes(key.n)),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,false,_bnToBytes(key.e))]);};var _base64='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';util.encode64=function(input,maxline){var line='';var output='';var chr1,chr2,chr3;var i=0;while(i<input.length){chr1=input.charCodeAt(i++);chr2=input.charCodeAt(i++);chr3=input.charCodeAt(i++);line+=_base64.charAt(chr1>>2);line+=_base64.charAt((chr1&3)<<4|chr2>>4);if(isNaN(chr2)){line+='==';}else{line+=_base64.charAt((chr2&15)<<2|chr3>>6);line+=isNaN(chr3)?'=':_base64.charAt(chr3&63);}if(maxline&&line.length>maxline){output+=line.substr(0,maxline)+'\r\n';line=line.substr(maxline);}}output+=line;return output;};pki.publicKeyToRSAPublicKeyPem=function(key,maxline){var out=asn1.toDer(pki.publicKeyToRSAPublicKey(key));out=forge.util.encode64(out.getBytes(),maxline||64);return'-----BEGIN RSA PUBLIC KEY-----\r\n'+out+'\r\n-----END RSA PUBLIC KEY-----';};pki.privateKeyToAsn1=pki.privateKeyToRSAPrivateKey=function(key){return asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,true,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,false,String.fromCharCode(0x00)),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,false,_bnToBytes(key.n)),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,false,_bnToBytes(key.e)),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,false,_bnToBytes(key.d)),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,false,_bnToBytes(key.p)),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,false,_bnToBytes(key.q)),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,false,_bnToBytes(key.dP)),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,false,_bnToBytes(key.dQ)),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,false,_bnToBytes(key.qInv))]);};pki.privateKeyToPem=function(key,maxline){var out=asn1.toDer(pki.privateKeyToAsn1(key));out=forge.util.encode64(out.getBytes(),maxline||64);return'-----BEGIN RSA PRIVATE KEY-----\r\n'+out+'\r\n-----END RSA PRIVATE KEY-----';};},9960:function(module,exports,__webpack_require__){exports.log=log;exports.formatArgs=formatArgs;exports.save=save;exports.load=load;exports.useColors=useColors;exports.storage=localstorage();exports.colors=['#0000CC','#0000FF','#0033CC','#0033FF','#0066CC','#0066FF','#0099CC','#0099FF','#00CC00','#00CC33','#00CC66','#00CC99','#00CCCC','#00CCFF','#3300CC','#3300FF','#3333CC','#3333FF','#3366CC','#3366FF','#3399CC','#3399FF','#33CC00','#33CC33','#33CC66','#33CC99','#33CCCC','#33CCFF','#6600CC','#6600FF','#6633CC','#6633FF','#66CC00','#66CC33','#9900CC','#9900FF','#9933CC','#9933FF','#99CC00','#99CC33','#CC0000','#CC0033','#CC0066','#CC0099','#CC00CC','#CC00FF','#CC3300','#CC3333','#CC3366','#CC3399','#CC33CC','#CC33FF','#CC6600','#CC6633','#CC9900','#CC9933','#CCCC00','#CCCC33','#FF0000','#FF0033','#FF0066','#FF0099','#FF00CC','#FF00FF','#FF3300','#FF3333','#FF3366','#FF3399','#FF33CC','#FF33FF','#FF6600','#FF6633','#FF9900','#FF9933','#FFCC00','#FFCC33'];function useColors(){if(typeof window!=='undefined'&&window.process&&(window.process.type==='renderer'||window.process.__nwjs)){return true;}if(typeof navigator!=='undefined'&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)){return false;}return typeof document!=='undefined'&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!=='undefined'&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!=='undefined'&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!=='undefined'&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/);}function formatArgs(args){args[0]=(this.useColors?'%c':'')+this.namespace+(this.useColors?' %c':' ')+args[0]+(this.useColors?'%c ':' ')+'+'+module.exports.humanize(this.diff);if(!this.useColors){return;}const c='color: '+this.color;args.splice(1,0,c,'color: inherit');let index=0;let lastC=0;args[0].replace(/%[a-zA-Z%]/g,match=>{if(match==='%%'){return;}index++;if(match==='%c'){lastC=index;}});args.splice(lastC,0,c);}function log(...args){return typeof console==='object'&&console.log&&console.log(...args);}function save(namespaces){try{if(namespaces){exports.storage.setItem('debug',namespaces);}else{exports.storage.removeItem('debug');}}catch(error){}}function load(){let r;try{r=exports.storage.getItem('debug');}catch(error){}if(!r&&typeof process!=='undefined'&&'env'in process){r=process.env.DEBUG;}return r;}function localstorage(){try{return localStorage;}catch(error){}}module.exports=__webpack_require__(4863)(exports);const{formatters}=module.exports;formatters.j=function(v){try{return JSON.stringify(v);}catch(error){return'[UnexpectedJSONParseError]: '+error.message;}};},9972:function(module,__unusedexports,__webpack_require__){"use strict";const traverse=__webpack_require__(5097);const UnixFS=__webpack_require__(7959);const pull=__webpack_require__(418);const values=__webpack_require__(5130);const error=__webpack_require__(5619);const once=__webpack_require__(751);const empty=__webpack_require__(7086);const filter=__webpack_require__(708);const flatten=__webpack_require__(6549);const map=__webpack_require__(569);const paramap=__webpack_require__(3515);const extractDataFromBlock=__webpack_require__(5504);module.exports=(cid,node,name,path,pathRest,resolve,size,dag,parent,depth,options)=>{const accepts=pathRest[0];if(accepts!==undefined&&accepts!==path){return empty();}let file;try{file=UnixFS.unmarshal(node.data);}catch(err){return error(err);}const fileSize=size||file.fileSize();let offset=options.offset;let length=options.length;if(offset<0){return error(new Error('Offset must be greater than or equal to 0'));}if(offset>fileSize){return error(new Error('Offset must be less than the file size'));}if(length<0){return error(new Error('Length must be greater than or equal to 0'));}if(length===0){return once({depth:depth,content:once(Buffer.alloc(0)),name:name,path:path,multihash:cid.buffer,size:fileSize,type:'file'});}if(!offset){offset=0;}if(!length||offset+length>fileSize){length=fileSize-offset;}const content=streamBytes(dag,node,fileSize,offset,length);return values([{depth:depth,content:content,name:name,path:path,multihash:cid.buffer,size:fileSize,type:'file'}]);};function streamBytes(dag,node,fileSize,offset,length){if(offset===fileSize||length===0){return once(Buffer.alloc(0));}const end=offset+length;return pull(traverse.depthFirst({node,start:0,end:fileSize},getChildren(dag,offset,end)),map(extractData(offset,end)),filter(Boolean));}function getChildren(dag,offset,end){let streamPosition=0;return function visitor({node}){if(Buffer.isBuffer(node)){return empty();}let file;try{file=UnixFS.unmarshal(node.data);}catch(err){return error(err);}const nodeHasData=Boolean(file.data&&file.data.length);if(nodeHasData&&node.links.length){streamPosition+=file.data.length;}const filteredLinks=node.links.map((link,index)=>{const child={link:link,start:streamPosition,end:streamPosition+file.blockSizes[index],size:file.blockSizes[index]};streamPosition=child.end;return child;}).filter(child=>{return offset>=child.start&&offset<child.end||end>child.start&&end<=child.end||offset<child.start&&end>child.end;});if(filteredLinks.length){streamPosition=filteredLinks[0].start;}return pull(once(filteredLinks),paramap((children,cb)=>{dag.getMany(children.map(child=>child.link.cid),(err,results)=>{if(err){return cb(err);}cb(null,results.map((result,index)=>{const child=children[index];return{start:child.start,end:child.end,node:result,size:child.size};}));});}),flatten());};}function extractData(requestedStart,requestedEnd){let streamPosition=-1;return function getData({node,start,end}){let block;if(Buffer.isBuffer(node)){block=node;}else{try{const file=UnixFS.unmarshal(node.data);if(!file.data){if(file.blockSizes.length){return;}return Buffer.alloc(0);}block=file.data;}catch(err){throw new Error(`Failed to unmarshal node - ${err.message}`);}}if(block&&block.length){if(streamPosition===-1){streamPosition=start;}const output=extractDataFromBlock(block,streamPosition,requestedStart,requestedEnd);streamPosition+=block.length;return output;}return Buffer.alloc(0);};}}},function(__webpack_require__){"use strict";!function(){__webpack_require__.nmd=function(module){module.paths=[];if(!module.children)module.children=[];Object.defineProperty(module,'loaded',{enumerable:true,get:function(){return module.l;}});Object.defineProperty(module,'id',{enumerable:true,get:function(){return module.i;}});return module;};}();});
